"use strict";(self.webpackChunkmonaco_custom_bundle=self.webpackChunkmonaco_custom_bundle||[]).push([[335],{81050:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(87537),s=i.n(r),o=i(23645),n=i.n(o)()(s());n.push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .zone-widget .codicon.codicon-error,\n.markers-panel .marker-icon.error, .markers-panel .marker-icon .codicon.codicon-error,\n.text-search-provider-messages .providerMessage .codicon.codicon-error,\n.extensions-viewlet > .extensions .codicon.codicon-error,\n.extension-editor .codicon.codicon-error,\n.preferences-editor .codicon.codicon-error {\n\tcolor: var(--vscode-problemsErrorIcon-foreground);\n}\n\n.monaco-editor .zone-widget .codicon.codicon-warning,\n.markers-panel .marker-icon.warning, .markers-panel .marker-icon .codicon.codicon-warning,\n.text-search-provider-messages .providerMessage .codicon.codicon-warning,\n.extensions-viewlet > .extensions .codicon.codicon-warning,\n.extension-editor .codicon.codicon-warning,\n.preferences-editor .codicon.codicon-warning {\n\tcolor: var(--vscode-problemsWarningIcon-foreground);\n}\n\n.monaco-editor .zone-widget .codicon.codicon-info,\n.markers-panel .marker-icon.info, .markers-panel .marker-icon .codicon.codicon-info,\n.text-search-provider-messages .providerMessage .codicon.codicon-info,\n.extensions-viewlet > .extensions .codicon.codicon-info,\n.extension-editor .codicon.codicon-info,\n.preferences-editor .codicon.codicon-info {\n\tcolor: var(--vscode-problemsInfoIcon-foreground);\n}\n","",{version:3,sources:["webpack://./node_modules/monaco-editor/esm/vs/platform/severityIcon/browser/media/severityIcon.css"],names:[],mappings:"AAAA;;;+FAG+F;;AAE/F;;;;;;CAMC,iDAAiD;AAClD;;AAEA;;;;;;CAMC,mDAAmD;AACpD;;AAEA;;;;;;CAMC,gDAAgD;AACjD",sourcesContent:["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .zone-widget .codicon.codicon-error,\n.markers-panel .marker-icon.error, .markers-panel .marker-icon .codicon.codicon-error,\n.text-search-provider-messages .providerMessage .codicon.codicon-error,\n.extensions-viewlet > .extensions .codicon.codicon-error,\n.extension-editor .codicon.codicon-error,\n.preferences-editor .codicon.codicon-error {\n\tcolor: var(--vscode-problemsErrorIcon-foreground);\n}\n\n.monaco-editor .zone-widget .codicon.codicon-warning,\n.markers-panel .marker-icon.warning, .markers-panel .marker-icon .codicon.codicon-warning,\n.text-search-provider-messages .providerMessage .codicon.codicon-warning,\n.extensions-viewlet > .extensions .codicon.codicon-warning,\n.extension-editor .codicon.codicon-warning,\n.preferences-editor .codicon.codicon-warning {\n\tcolor: var(--vscode-problemsWarningIcon-foreground);\n}\n\n.monaco-editor .zone-widget .codicon.codicon-info,\n.markers-panel .marker-icon.info, .markers-panel .marker-icon .codicon.codicon-info,\n.text-search-provider-messages .providerMessage .codicon.codicon-info,\n.extensions-viewlet > .extensions .codicon.codicon-info,\n.extension-editor .codicon.codicon-info,\n.preferences-editor .codicon.codicon-info {\n\tcolor: var(--vscode-problemsInfoIcon-foreground);\n}\n"],sourceRoot:""}]);const a=n},75742:(e,t,i)=>{i.d(t,{j:()=>_});var r=i(93379),s=i.n(r),o=i(7795),n=i.n(o),a=i(90569),l=i.n(a),c=i(3565),h=i.n(c),d=i(19216),m=i.n(d),u=i(44589),g=i.n(u),p=i(81050),k={};k.styleTagTransform=g(),k.setAttributes=h(),k.insert=l().bind(null,"head"),k.domAPI=n(),k.insertStyleElement=m(),s()(p.Z,k),p.Z&&p.Z.locals&&p.Z.locals;var _,w=i(73046),E=i(25670),f=i(14603);!function(e){e.className=function(e){switch(e){case f.Z.Ignore:return"severity-ignore "+E.kS.asClassName(w.lA.info);case f.Z.Info:return E.kS.asClassName(w.lA.info);case f.Z.Warning:return E.kS.asClassName(w.lA.warning);case f.Z.Error:return E.kS.asClassName(w.lA.error);default:return""}}}(_||(_={}))},96335:(e,t,i)=>{i.r(t),i.d(t,{default:()=>kt}),i(29769);var r=i(80855),s=i(93983),o=i(23193),n=i(8269),a=i(49989),l=i(63580),c=i(95935),h=i(24314),d=i(98674),m=i(9488),u=i(43702),g=i(4669),p=i(89954),k=i(98401),_=i(97295),w=i(24254);function E(e,t){return c.SF.compare(e.resource,t.resource)}function f(e,t){const[i]=e.markers,[r]=t.markers;let s=0;return i&&r&&(s=d.ZL.compare(i.marker.severity,r.marker.severity)),0===s&&(s=e.path.localeCompare(t.path)||e.name.localeCompare(t.name)),s}class b{constructor(e,t){this.id=e,this.resource=t,this._markersMap=new u.Y9,this._total=0,this.path=this.resource.fsPath,this.name=(0,c.EZ)(this.resource)}get markers(){return this._cachedMarkers||(this._cachedMarkers=(0,m.xH)([...this._markersMap.values()]).sort(b._compareMarkers)),this._cachedMarkers}has(e){return this._markersMap.has(e)}set(e,t){this.delete(e),(0,m.Of)(t)&&(this._markersMap.set(e,t),this._total+=t.length,this._cachedMarkers=void 0)}delete(e){const t=this._markersMap.get(e);t&&(this._total-=t.length,this._cachedMarkers=void 0,this._markersMap.delete(e))}get total(){return this._total}static _compareMarkers(e,t){return d.ZL.compare(e.marker.severity,t.marker.severity)||c.SF.compare(e.resource,t.resource)||h.e.compareRangesUsingStarts(e.marker,t.marker)}}class R{get resource(){return this.marker.resource}get range(){return this.marker}get lines(){return this._lines||(this._lines=(0,_.uq)(this.marker.message)),this._lines}constructor(e,t,i=[]){this.id=e,this.marker=t,this.relatedInformation=i}toString(){return JSON.stringify({...this.marker,resource:this.marker.resource.path,relatedInformation:this.relatedInformation.length?this.relatedInformation.map((e=>({...e.raw,resource:e.raw.resource.path}))):void 0},null,"\t")}}class M extends R{constructor(e,t,i,r,s,o){super(e.id,e.marker,e.relatedInformation),this.sourceMatches=t,this.codeMatches=i,this.messageMatches=r,this.fileMatches=s,this.ownerMatches=o}}class A{constructor(e,t,i){this.id=e,this.marker=t,this.raw=i}}class v{get resourceMarkers(){return this.cachedSortedResources||(this.cachedSortedResources=[...this.resourcesByUri.values()].sort(f)),this.cachedSortedResources}constructor(){this.cachedSortedResources=void 0,this._onDidChange=new g.Q5,this.onDidChange=this._onDidChange.event,this._total=0,this.resourcesByUri=new Map}reset(){const e=new Set;for(const t of this.resourcesByUri.values())e.add(t);this.resourcesByUri.clear(),this._total=0,this._onDidChange.fire({removed:e,added:new Set,updated:new Set})}get total(){return this._total}getResourceMarkers(e){return(0,k.M2)(this.resourcesByUri.get(c.SF.getComparisonKey(e,!0)))}setResourceMarkers(e){const t={added:new Set,removed:new Set,updated:new Set};for(const[i,r]of e){if(w.g.has(i.scheme))continue;const e=c.SF.getComparisonKey(i,!0);let s=this.resourcesByUri.get(e);if((0,m.Of)(r)){if(s)t.updated.add(s);else{const r=this.id(i.toString());s=new b(r,i.with({fragment:null})),this.resourcesByUri.set(e,s),t.added.add(s)}const o=new Map,n=r.map((e=>{const t=d.H0.makeKey(e),i=o.get(t)||0;o.set(t,i+1);const r=this.id(s.id,t,i,e.resource.toString());let n;return e.relatedInformation&&(n=e.relatedInformation.map(((t,i)=>new A(this.id(r,t.resource.toString(),t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn,i),e,t)))),new R(r,e,n)}));this._total-=s.total,s.set(i,n),this._total+=s.total}else s&&(this._total-=s.total,s.delete(i),this._total+=s.total,0===s.total?(this.resourcesByUri.delete(e),t.removed.add(s)):t.updated.add(s))}this.cachedSortedResources=void 0,(t.added.size||t.removed.size||t.updated.size)&&this._onDidChange.fire(t)}id(...e){const t=new p.Px;for(const i of e)t.hash(i);return`${t.value}`}dispose(){this._onDidChange.dispose(),this.resourcesByUri.clear()}}var I=i(3277);(0,I.Z)('.markers-panel .markers-panel-container{height:100%}.markers-panel .hide{display:none}.markers-panel .markers-panel-container .message-box-container{line-height:22px;padding-left:20px}.markers-panel .markers-panel-container .message-box-container .messageAction{cursor:pointer;margin-left:4px;text-decoration:underline}.markers-panel .markers-panel-container .hidden{display:none}.markers-panel .markers-panel-container .codicon.codicon-light-bulb{color:var(--vscode-editorLightBulb-foreground)}.markers-panel .markers-panel-container .codicon.codicon-lightbulb-autofix{color:var(--vscode-editorLightBulbAutoFix-foreground)}.markers-panel .markers-panel-container .tree-container.hidden{display:none;visibility:hidden}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents{display:flex;line-height:22px;padding-right:10px}.monaco-workbench.hc-black .markers-panel .markers-panel-container .tree-container .monaco-tl-contents,.monaco-workbench.hc-light .markers-panel .markers-panel-container .tree-container .monaco-tl-contents{line-height:20px}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-stats{display:inline-block;margin-left:10px}.markers-panel:not(.wide) .markers-panel-container .tree-container .monaco-tl-contents .resource-label-container{flex:1}.markers-panel.wide .markers-panel-container .tree-container .monaco-tl-contents .count-badge-wrapper{margin-left:10px}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container{flex:1;overflow:hidden}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container>.marker-message-line{overflow:hidden}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container>.marker-message-line>.marker-message{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container>.marker-message-line.details-container{display:flex}.markers-panel .markers-panel-container .tree-container .monaco-list:focus .monaco-list-row.focused .monaco-tl-contents .details-container a.monaco-link{color:inherit}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container a.monaco-link .monaco-highlighted-label{text-decoration:underline;text-underline-position:under}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-code:before{content:"("}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-code:after{content:")"}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container .marker-line,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container .marker-source,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container .multiline-actions{margin-left:6px}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-code,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-line,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-source,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .related-info-resource,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .related-info-resource-separator{opacity:.7}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .highlight{font-weight:700}.markers-panel .monaco-tl-contents .marker-icon{align-items:center;display:flex;height:22px;justify-content:center;margin:0 6px}.markers-panel .monaco-list-row.focused .monaco-tl-contents>.marker-icon.quickFix,.markers-panel .monaco-list-row.selected .monaco-tl-contents>.marker-icon.quickFix,.markers-panel .monaco-list-row:hover .monaco-tl-contents>.marker-icon.quickFix,.markers-panel .monaco-tl-contents .actions .monaco-action-bar{display:none}.markers-panel .monaco-list-row.focused .monaco-tl-contents .actions .monaco-action-bar,.markers-panel .monaco-list-row.selected .monaco-tl-contents .actions .monaco-action-bar,.markers-panel .monaco-list-row:hover .monaco-tl-contents .actions .monaco-action-bar{display:block}.markers-panel .monaco-tl-contents .actions,.markers-panel .monaco-tl-contents .multiline-actions .monaco-action-bar{height:22px}.markers-panel .monaco-tl-contents .actions .action-label,.markers-panel .monaco-tl-contents .multiline-actions .monaco-action-bar .action-label{padding:2px}.markers-panel .monaco-tl-contents .actions .action-item{margin:0 4px}.markers-panel .monaco-tl-contents .actions .action-item.disabled,.markers-panel .monaco-tl-contents .multiline-actions .action-item.disabled{display:none}.markers-panel .markers-table-container .monaco-table .monaco-table-th{align-items:center;display:flex;font-weight:600;padding-left:10px}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td{align-items:center;display:flex;padding-left:10px}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td .highlight{font-weight:700}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.file,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.message,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.owner{overflow:hidden;text-overflow:ellipsis}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.severity{display:flex}.markers-panel .markers-table-container .monaco-table .monaco-list-row.focused .monaco-table-tr>.monaco-table-td.quickFix>.severity,.markers-panel .markers-table-container .monaco-table .monaco-list-row.selected .monaco-table-tr>.monaco-table-td.quickFix>.severity,.markers-panel .markers-table-container .monaco-table .monaco-list-row:hover .monaco-table-tr>.monaco-table-td.quickFix>.severity{display:none}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.actions{margin-left:-3px}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.actions>.monaco-action-bar .action-item{display:none}.markers-panel .markers-table-container .monaco-table .monaco-list-row.focused .monaco-table-tr>.monaco-table-td.quickFix>.actions>.monaco-action-bar .action-item,.markers-panel .markers-table-container .monaco-table .monaco-list-row.selected .monaco-table-tr>.monaco-table-td.quickFix>.actions>.monaco-action-bar .action-item,.markers-panel .markers-table-container .monaco-table .monaco-list-row:hover .monaco-table-tr>.monaco-table-td.quickFix>.actions>.monaco-action-bar .action-item{display:flex}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.code-label:before,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.monaco-link:before{content:"("}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.code-label:after,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.monaco-link:after{content:")"}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.code-label,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.monaco-link{display:none}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code.code-label>.code-label{display:inline}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code.code-link>.monaco-link{display:inline;text-decoration:underline}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.file>.file-position{margin-left:6px;opacity:.7}',{});var S=i(65321),C=i(74741),x=i(10829),L=i(24448),F=i(72065),N=i(5606);class y{static{this.MARKERS_PANEL_TOGGLE_LABEL=l.NC("problems.view.toggle.label","Toggle Problems (Errors, Warnings, Infos)")}static{this.MARKERS_PANEL_SHOW_LABEL=l.NC("problems.view.focus.label","Focus Problems (Errors, Warnings, Infos)")}static{this.PROBLEMS_PANEL_CONFIGURATION_TITLE=l.NC("problems.panel.configuration.title","Problems View")}static{this.PROBLEMS_PANEL_CONFIGURATION_AUTO_REVEAL=l.NC("problems.panel.configuration.autoreveal","Controls whether Problems view should automatically reveal files when opening them.")}static{this.PROBLEMS_PANEL_CONFIGURATION_VIEW_MODE=l.NC("problems.panel.configuration.viewMode","Controls the default view mode of the Problems view.")}static{this.PROBLEMS_PANEL_CONFIGURATION_SHOW_CURRENT_STATUS=l.NC("problems.panel.configuration.showCurrentInStatus","When enabled shows the current problem in the status bar.")}static{this.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER=l.NC("problems.panel.configuration.compareOrder","Controls the order in which problems are navigated.")}static{this.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_SEVERITY=l.NC("problems.panel.configuration.compareOrder.severity","Navigate problems ordered by severity")}static{this.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_POSITION=l.NC("problems.panel.configuration.compareOrder.position","Navigate problems ordered by position")}static{this.MARKERS_PANEL_TITLE_PROBLEMS=l.NC("markers.panel.title.problems","Problems")}static{this.MARKERS_PANEL_NO_PROBLEMS_BUILT=l.NC("markers.panel.no.problems.build","No problems have been detected in the workspace.")}static{this.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT=l.NC("markers.panel.no.problems.activeFile.build","No problems have been detected in the current file.")}static{this.MARKERS_PANEL_NO_PROBLEMS_FILTERS=l.NC("markers.panel.no.problems.filters","No results found with provided filter criteria.")}static{this.MARKERS_PANEL_ACTION_TOOLTIP_MORE_FILTERS=l.NC("markers.panel.action.moreFilters","More Filters...")}static{this.MARKERS_PANEL_FILTER_LABEL_SHOW_ERRORS=l.NC("markers.panel.filter.showErrors","Show Errors")}static{this.MARKERS_PANEL_FILTER_LABEL_SHOW_WARNINGS=l.NC("markers.panel.filter.showWarnings","Show Warnings")}static{this.MARKERS_PANEL_FILTER_LABEL_SHOW_INFOS=l.NC("markers.panel.filter.showInfos","Show Infos")}static{this.MARKERS_PANEL_FILTER_LABEL_EXCLUDED_FILES=l.NC("markers.panel.filter.useFilesExclude","Hide Excluded Files")}static{this.MARKERS_PANEL_FILTER_LABEL_ACTIVE_FILE=l.NC("markers.panel.filter.activeFile","Show Active File Only")}static{this.MARKERS_PANEL_ACTION_TOOLTIP_FILTER=l.NC("markers.panel.action.filter","Filter Problems")}static{this.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX=l.NC("markers.panel.action.quickfix","Show fixes")}static{this.MARKERS_PANEL_FILTER_ARIA_LABEL=l.NC("markers.panel.filter.ariaLabel","Filter Problems")}static{this.MARKERS_PANEL_FILTER_PLACEHOLDER=l.NC("markers.panel.filter.placeholder","Filter (e.g. text, **/*.ts, !**/node_modules/**)")}static{this.MARKERS_PANEL_FILTER_ERRORS=l.NC("markers.panel.filter.errors","errors")}static{this.MARKERS_PANEL_FILTER_WARNINGS=l.NC("markers.panel.filter.warnings","warnings")}static{this.MARKERS_PANEL_FILTER_INFOS=l.NC("markers.panel.filter.infos","infos")}static{this.MARKERS_PANEL_SINGLE_ERROR_LABEL=l.NC("markers.panel.single.error.label","1 Error")}static{this.MARKERS_PANEL_MULTIPLE_ERRORS_LABEL=e=>l.NC("markers.panel.multiple.errors.label","{0} Errors",""+e)}static{this.MARKERS_PANEL_SINGLE_WARNING_LABEL=l.NC("markers.panel.single.warning.label","1 Warning")}static{this.MARKERS_PANEL_MULTIPLE_WARNINGS_LABEL=e=>l.NC("markers.panel.multiple.warnings.label","{0} Warnings",""+e)}static{this.MARKERS_PANEL_SINGLE_INFO_LABEL=l.NC("markers.panel.single.info.label","1 Info")}static{this.MARKERS_PANEL_MULTIPLE_INFOS_LABEL=e=>l.NC("markers.panel.multiple.infos.label","{0} Infos",""+e)}static{this.MARKERS_PANEL_SINGLE_UNKNOWN_LABEL=l.NC("markers.panel.single.unknown.label","1 Unknown")}static{this.MARKERS_PANEL_MULTIPLE_UNKNOWNS_LABEL=e=>l.NC("markers.panel.multiple.unknowns.label","{0} Unknowns",""+e)}static{this.MARKERS_PANEL_AT_LINE_COL_NUMBER=(e,t)=>l.NC("markers.panel.at.ln.col.number","[Ln {0}, Col {1}]",""+e,""+t)}static{this.MARKERS_TREE_ARIA_LABEL_RESOURCE=(e,t,i)=>l.NC("problems.tree.aria.label.resource","{0} problems in file {1} of folder {2}",e,t,i)}static{this.MARKERS_TREE_ARIA_LABEL_MARKER=e=>{const t=e.relatedInformation.length?l.NC("problems.tree.aria.label.marker.relatedInformation"," This problem has references to {0} locations.",e.relatedInformation.length):"";switch(e.marker.severity){case d.ZL.Error:return e.marker.source?l.NC("problems.tree.aria.label.error.marker","Error: {0} at line {1} and character {2}.{3} generated by {4}",e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t,e.marker.source):l.NC("problems.tree.aria.label.error.marker.nosource","Error: {0} at line {1} and character {2}.{3}",e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t);case d.ZL.Warning:return e.marker.source?l.NC("problems.tree.aria.label.warning.marker","Warning: {0} at line {1} and character {2}.{3} generated by {4}",e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t,e.marker.source):l.NC("problems.tree.aria.label.warning.marker.nosource","Warning: {0} at line {1} and character {2}.{3}",e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t,t);case d.ZL.Info:return e.marker.source?l.NC("problems.tree.aria.label.info.marker","Info: {0} at line {1} and character {2}.{3} generated by {4}",e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t,e.marker.source):l.NC("problems.tree.aria.label.info.marker.nosource","Info: {0} at line {1} and character {2}.{3}",e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t);default:return e.marker.source?l.NC("problems.tree.aria.label.marker","Problem: {0} at line {1} and character {2}.{3} generated by {4}",e.marker.source,e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t,e.marker.source):l.NC("problems.tree.aria.label.marker.nosource","Problem: {0} at line {1} and character {2}.{3}",e.marker.message,e.marker.startLineNumber,e.marker.startColumn,t)}}}static{this.MARKERS_TREE_ARIA_LABEL_RELATED_INFORMATION=e=>l.NC("problems.tree.aria.label.relatedinfo.message","{0} at line {1} and character {2} in {3}",e.message,e.startLineNumber,e.startColumn,(0,c.EZ)(e.resource))}static{this.SHOW_ERRORS_WARNINGS_ACTION_LABEL=l.NC("errors.warnings.show.label","Show Errors and Warnings")}}var T=i(5976),P=i(73046),O=i(25670),D=i(76033),V=i(49594);(0,I.Z)(".markers-panel-action-filter>.markers-panel-filter-controls>.monaco-action-bar .action-label.markers-filters.checked{background-color:var(--vscode-inputOption-activeBackground);border-color:var(--vscode-inputOption-activeBorder);color:var(--vscode-inputOption-activeForeground)}",{});class K extends T.JT{constructor(e,t){super(),this.contextKeyService=t,this._onDidChange=this._register(new g.Q5),this.onDidChange=this._onDidChange.event,this._excludedFiles=V.G.ShowExcludedFilesFilterContextKey.bindTo(this.contextKeyService),this._activeFile=V.G.ShowActiveFileFilterContextKey.bindTo(this.contextKeyService),this._showWarnings=V.G.ShowWarningsFilterContextKey.bindTo(this.contextKeyService),this._showErrors=V.G.ShowErrorsFilterContextKey.bindTo(this.contextKeyService),this._showInfos=V.G.ShowInfoFilterContextKey.bindTo(this.contextKeyService),this._showErrors.set(e.showErrors),this._showWarnings.set(e.showWarnings),this._showInfos.set(e.showInfos),this._excludedFiles.set(e.excludedFiles),this._activeFile.set(e.activeFile),this.filterHistory=e.filterHistory}get excludedFiles(){return!!this._excludedFiles.get()}set excludedFiles(e){this._excludedFiles.get()!==e&&(this._excludedFiles.set(e),this._onDidChange.fire({excludedFiles:!0}))}get activeFile(){return!!this._activeFile.get()}set activeFile(e){this._activeFile.get()!==e&&(this._activeFile.set(e),this._onDidChange.fire({activeFile:!0}))}get showWarnings(){return!!this._showWarnings.get()}set showWarnings(e){this._showWarnings.get()!==e&&(this._showWarnings.set(e),this._onDidChange.fire({showWarnings:!0}))}get showErrors(){return!!this._showErrors.get()}set showErrors(e){this._showErrors.get()!==e&&(this._showErrors.set(e),this._onDidChange.fire({showErrors:!0}))}get showInfos(){return!!this._showInfos.get()}set showInfos(e){this._showInfos.get()!==e&&(this._showInfos.set(e),this._onDidChange.fire({showInfos:!0}))}}class W extends C.aU{static{this.ID="workbench.actions.problems.quickfix"}static{this.CLASS="markers-panel-action-quickfix "+O.kS.asClassName(P.lA.lightBulb)}static{this.AUTO_FIX_CLASS=W.CLASS+" autofixable"}get quickFixes(){return this._quickFixes}set quickFixes(e){this._quickFixes=e,this.enabled=this._quickFixes.length>0}autoFixable(e){this.class=e?W.AUTO_FIX_CLASS:W.CLASS}constructor(e){super(W.ID,y.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX,W.CLASS,!1),this.marker=e,this._onShowQuickFixes=this._register(new g.Q5),this.onShowQuickFixes=this._onShowQuickFixes.event,this._quickFixes=[]}run(){return this._onShowQuickFixes.fire(),Promise.resolve()}}let B=class extends D.gU{constructor(e,t){super(null,e,{icon:!0,label:!1}),this.contextMenuService=t}onClick(e){S.zB.stop(e,!0),this.showQuickFixes()}showQuickFixes(){if(!this.element)return;if(!this.isEnabled())return;const e=S.i(this.element),t=this.action.quickFixes;t.length&&this.contextMenuService.showContextMenu({getAnchor:()=>({x:e.left+10,y:e.top+e.height+4}),getActions:()=>t})}};B=(0,r.g)([(0,r.f)(1,N.i)],B);var H=i(33108),G=i(20871),U=i(97781),q=i(26904),$=i(53725),Z=i(32414),Q=i(75392),j=i(14118),X=i(4767);class Y{constructor(e,t,i){this.globalExpression=(0,j.Qc)(e),this.expressionsByRoot=X.Id.forUris((e=>i.extUri.ignorePathCasing(e)));for(const e of t)this.expressionsByRoot.set(e.root,{root:e.root,expression:(0,j.Qc)(e.expression)})}matches(e){const t=this.expressionsByRoot.findSubstr(e);if(t){const i=(0,c.lX)(t.root,e);if(i&&t.expression(i))return!0}return!!this.globalExpression(e.path)}}class z{static{this._filter=Q.XU}static{this._messageFilter=Q.Oh}static EMPTY(e){return new z("",[],!1,!1,!1,e)}constructor(e,t,i,r,s,o){this.filter=e,this.showWarnings=!1,this.showErrors=!1,this.showInfos=!1,e=e.trim(),this.showWarnings=i,this.showErrors=r,this.showInfos=s;const n=Array.isArray(t)?t:[],a=Array.isArray(t)?(0,j.jy)():t;for(const{expression:e}of n)for(const t of Object.keys(e))t.endsWith("/**")||(e[`${_.oL(t,"/")}/**`]=e[t]);const l=e.startsWith("!");this.textFilter={text:(l?_.j3(e,"!"):e).trim(),negate:l};const c=(0,j.jy)();if(e){const t=(0,j.Eu)(e,",").map((e=>e.trim())).filter((e=>!!e.length));for(const e of t)if(e.startsWith("!")){const t=_.j3(e,"!");t&&this.setPattern(a,t)}else this.setPattern(c,e)}this.excludesMatcher=new Y(a,n,o),this.includesMatcher=new Y(c,[],o)}setPattern(e,t){"."===t[0]&&(t="*"+t),e[`**/${t}/**`]=!0,e[`**/${t}`]=!0}}var J=i(36248),ee=i(40382),te=i(66663),ie=i(82663),re=i(89162),se=i(34650),oe=i(90317),ne=i(44349),ae=i(15393),le=i(73733),ce=i(75396),he=i(87997),de=i(75742),me=i(50988),ue=i(75761),ge=i(90535),pe=i(59554),ke=i(99106),_e=i(71922),we=i(86253),Ee=i(14603);let fe=class{constructor(e){this.labelService=e}getWidgetAriaLabel(){return(0,l.NC)("problemsView","Problems View")}getAriaLabel(e){if(e instanceof b){const t=this.labelService.getUriLabel(e.resource,{relative:!0})||e.resource.fsPath;return y.MARKERS_TREE_ARIA_LABEL_RESOURCE(e.markers.length,e.name,ie.XX(t))}return e instanceof R||e instanceof M?y.MARKERS_TREE_ARIA_LABEL_MARKER(e):e instanceof A?y.MARKERS_TREE_ARIA_LABEL_RELATED_INFORMATION(e.raw):null}};fe=(0,r.g)([(0,r.f)(0,ne.e)],fe);class be{static{this.LINE_HEIGHT=22}constructor(e){this.markersViewState=e}getHeight(e){if(e instanceof R){const t=this.markersViewState.getViewModel(e);return(!t||t.multiline?e.lines.length:1)*be.LINE_HEIGHT}return be.LINE_HEIGHT}getTemplateId(e){return e instanceof b?"rm":e instanceof R?"m":"ri"}}let Re=class{constructor(e,t,i,r){this.labels=e,this.labelService=i,this.fileService=r,this.renderedNodes=new Map,this.disposables=new T.SL,this.templateId="rm",t(this.onDidChangeRenderNodeCount,this,this.disposables)}renderTemplate(e){const t=S.R3(e,S.$(".resource-label-container")),i=this.labels.create(t,{supportHighlights:!0}),r=S.R3(e,S.$(".count-badge-wrapper"));return{count:new re.Z(r,{},we.ku),resourceLabel:i}}renderElement(e,t,i){const r=e.element,s=e.filterData&&e.filterData.uriMatches||[];this.fileService.hasProvider(r.resource)||r.resource.scheme===te.lg.untitled?i.resourceLabel.setFile(r.resource,{matches:s}):i.resourceLabel.setResource({name:r.name,description:this.labelService.getUriLabel((0,c.XX)(r.resource),{relative:!0}),resource:r.resource},{matches:s}),this.updateCount(e,i),this.renderedNodes.set(e,i)}disposeElement(e){this.renderedNodes.delete(e)}disposeTemplate(e){e.resourceLabel.dispose()}onDidChangeRenderNodeCount(e){const t=this.renderedNodes.get(e);t&&this.updateCount(e,t)}updateCount(e,t){t.count.setCount(e.children.reduce(((e,t)=>e+(t.visible?1:0)),0))}dispose(){this.disposables.dispose()}};Re=(0,r.g)([(0,r.f)(2,ne.e),(0,r.f)(3,ue.sn)],Re);let Me=class{constructor(e,t,i){this.markersViewState=e,this.instantiationService=t,this.openerService=i,this.templateId="m"}renderTemplate(e){const t=Object.create(null);return t.markerWidget=new Ce(e,this.markersViewState,this.openerService,this.instantiationService),t}renderElement(e,t,i){i.markerWidget.render(e.element,e.filterData)}disposeTemplate(e){e.markerWidget.dispose()}};Me=(0,r.g)([(0,r.f)(1,F.TG),(0,r.f)(2,me.v4)],Me);const Ae=(0,pe.q5)("markers-view-multi-line-expanded",P.lA.chevronUp,(0,l.NC)("expandedIcon","Icon indicating that multiple lines are shown in the markers view.")),ve=(0,pe.q5)("markers-view-multi-line-collapsed",P.lA.chevronDown,(0,l.NC)("collapsedIcon","Icon indicating that multiple lines are collapsed in the markers view.")),Ie="problems.action.toggleMultiline";class Se extends D.gU{render(e){super.render(e),this.updateExpandedAttribute()}updateClass(){super.updateClass(),this.updateExpandedAttribute()}updateExpandedAttribute(){this.element?.setAttribute("aria-expanded",`${this._action.class===O.kS.asClassName(Ae)}`)}}class Ce extends T.JT{constructor(e,t,i,r){super(),this.parent=e,this.markersViewModel=t,this._openerService=i,this.disposables=this._register(new T.SL),this.actionBar=this._register(new oe.o(S.R3(e,S.$(".actions")),{actionViewItemProvider:e=>e.id===W.ID?r.createInstance(B,e):void 0})),this.iconContainer=S.R3(e,S.$("")),this.icon=S.R3(this.iconContainer,S.$("")),this.messageAndDetailsContainer=S.R3(e,S.$(".marker-message-details-container"))}render(e,t){this.actionBar.clear(),this.disposables.clear(),S.PO(this.messageAndDetailsContainer),this.iconContainer.className=`marker-icon ${Ee.Z.toString(d.ZL.toSeverity(e.marker.severity))}`,this.icon.className=`codicon ${de.j.className(d.ZL.toSeverity(e.marker.severity))}`,this.renderQuickfixActionbar(e),this.renderMessageAndDetails(e,t),this.disposables.add(S.nm(this.parent,S.tw.MOUSE_OVER,(()=>this.markersViewModel.onMarkerMouseHover(e)))),this.disposables.add(S.nm(this.parent,S.tw.MOUSE_LEAVE,(()=>this.markersViewModel.onMarkerMouseLeave(e))))}renderQuickfixActionbar(e){const t=this.markersViewModel.getViewModel(e);if(t){const e=t.quickFixAction;this.actionBar.push([e],{icon:!0,label:!1}),this.iconContainer.classList.toggle("quickFix",e.enabled),e.onDidChange((({enabled:e})=>{(0,k.Jp)(e)||this.iconContainer.classList.toggle("quickFix",e)}),this,this.disposables),e.onShowQuickFixes((()=>{const e=this.actionBar.viewItems[0];e&&e.showQuickFixes()}),this,this.disposables)}}renderMultilineActionbar(e,t){const i=this.disposables.add(new oe.o(S.R3(t,S.$(".multiline-actions")),{actionViewItemProvider:e=>{if(e.id===Ie)return new Se(void 0,e,{icon:!0})}}));this.disposables.add((0,T.OF)((()=>i.dispose())));const r=this.markersViewModel.getViewModel(e),s=r&&r.multiline,o=new C.aU(Ie);o.enabled=!!r&&e.lines.length>1,o.tooltip=s?(0,l.NC)("single line","Show message in single line"):(0,l.NC)("multi line","Show message in multiple lines"),o.class=O.kS.asClassName(s?Ae:ve),o.run=()=>(r&&(r.multiline=!r.multiline),Promise.resolve()),i.push([o],{icon:!0,label:!1})}renderMessageAndDetails(e,t){const{marker:i,lines:r}=e,s=this.markersViewModel.getViewModel(e),o=!s||s.multiline,n=t&&t.lineMatches||[];this.messageAndDetailsContainer.title=e.marker.message;const a=[];for(let e=0;e<(o?r.length:1);e++){const t=S.R3(this.messageAndDetailsContainer,S.$(".marker-message-line")),i=S.R3(t,S.$(".marker-message"));new se.q(i).set(r[e].length>1e3?`${r[e].substring(0,1e3)}...`:r[e],n[e]),""===r[e]&&(t.style.height=`${be.LINE_HEIGHT}px`),a.push(t)}this.renderDetails(i,t,a[0]),this.renderMultilineActionbar(e,a[0])}renderDetails(e,t,i){if(i.classList.add("details-container"),e.source||e.code){const r=new se.q(S.R3(i,S.$(".marker-source"))),s=t&&t.sourceMatches||[];if(r.set(e.source,s),e.code)if("string"==typeof e.code){const r=new se.q(S.R3(i,S.$(".marker-code"))),s=t&&t.codeMatches||[];r.set(e.code,s)}else{const r=S.$(".marker-code"),s=new se.q(r),o=e.code.target.toString(!0);this.disposables.add(new ke.r(i,{href:o,label:r,title:o},void 0,this._openerService));const n=t&&t.codeMatches||[];s.set(e.code.value,n)}}S.R3(i,S.$("span.marker-line")).textContent=y.MARKERS_PANEL_AT_LINE_COL_NUMBER(e.startLineNumber,e.startColumn)}}let xe=class{constructor(e){this.labelService=e,this.templateId="ri"}renderTemplate(e){const t=Object.create(null);S.R3(e,S.$(".actions")),S.R3(e,S.$(".icon")),t.resourceLabel=new se.q(S.R3(e,S.$(".related-info-resource"))),t.lnCol=S.R3(e,S.$("span.marker-line"));const i=S.R3(e,S.$("span.related-info-resource-separator"));return i.textContent=":",i.style.paddingRight="4px",t.description=new se.q(S.R3(e,S.$(".marker-description"))),t}renderElement(e,t,i){const r=e.element.raw,s=e.filterData&&e.filterData.uriMatches||[],o=e.filterData&&e.filterData.messageMatches||[];i.resourceLabel.set((0,c.EZ)(r.resource),s),i.resourceLabel.element.title=this.labelService.getUriLabel(r.resource,{relative:!0}),i.lnCol.textContent=y.MARKERS_PANEL_AT_LINE_COL_NUMBER(r.startLineNumber,r.startColumn),i.description.set(r.message,o),i.description.element.title=r.message}disposeTemplate(e){}};xe=(0,r.g)([(0,r.f)(0,ne.e)],xe);class Le{constructor(e){this.options=e}filter(e,t){return e instanceof b?this.filterResourceMarkers(e):e instanceof R?this.filterMarker(e,t):this.filterRelatedInformation(e,t)}filterResourceMarkers(e){if(w.g.has(e.resource.scheme))return!1;if(this.options.excludesMatcher.matches(e.resource))return!1;if(this.options.includesMatcher.matches(e.resource))return!0;if(this.options.textFilter.text&&!this.options.textFilter.negate){const t=z._filter(this.options.textFilter.text,(0,c.EZ)(e.resource));if(t)return{visibility:!0,data:{type:0,uriMatches:t||[]}}}return 2}filterMarker(e,t){if(!(this.options.showErrors&&d.ZL.Error===e.marker.severity||this.options.showWarnings&&d.ZL.Warning===e.marker.severity||this.options.showInfos&&d.ZL.Info===e.marker.severity))return!1;if(!this.options.textFilter.text)return!0;const i=[];for(const t of e.lines){const e=z._messageFilter(this.options.textFilter.text,t);i.push(e||[])}const r=e.marker.source?z._filter(this.options.textFilter.text,e.marker.source):void 0,s=e.marker.code?z._filter(this.options.textFilter.text,"string"==typeof e.marker.code?e.marker.code:e.marker.code.value):void 0,o=r||s||i.some((e=>e.length>0));return o&&!this.options.textFilter.negate?{visibility:!0,data:{type:1,lineMatches:i,sourceMatches:r||[],codeMatches:s||[]}}:(!o||!this.options.textFilter.negate||2!==t)&&(!(o||!this.options.textFilter.negate||2!==t)||t)}filterRelatedInformation(e,t){if(!this.options.textFilter.text)return!0;const i=z._filter(this.options.textFilter.text,(0,c.EZ)(e.raw.resource)),r=z._messageFilter(this.options.textFilter.text,ie.EZ(e.raw.message)),s=i||r;return s&&!this.options.textFilter.negate?{visibility:!0,data:{type:2,uriMatches:i||[],messageMatches:r||[]}}:(!s||!this.options.textFilter.negate||2!==t)&&(!(s||!this.options.textFilter.negate||2!==t)||t)}}let Fe=class extends T.JT{constructor(e,t,i,r,s){super(),this.marker=e,this.modelService=t,this.instantiationService=i,this.editorService=r,this.languageFeaturesService=s,this._onDidChange=this._register(new g.Q5),this.onDidChange=this._onDidChange.event,this.modelPromise=null,this.codeActionsPromise=null,this._multiline=!0,this._quickFixAction=null,this._register((0,T.OF)((()=>{this.modelPromise&&this.modelPromise.cancel(),this.codeActionsPromise&&this.codeActionsPromise.cancel()})))}get multiline(){return this._multiline}set multiline(e){this._multiline!==e&&(this._multiline=e,this._onDidChange.fire())}get quickFixAction(){return this._quickFixAction||(this._quickFixAction=this._register(this.instantiationService.createInstance(W,this.marker))),this._quickFixAction}showLightBulb(){this.setQuickFixes(!0)}async setQuickFixes(e){const t=await this.getCodeActions(e);this.quickFixAction.quickFixes=t?this.toActions(t):[],this.quickFixAction.autoFixable(!!t&&t.hasAutoFix)}getCodeActions(e){return null!==this.codeActionsPromise?this.codeActionsPromise:this.getModel(e).then((e=>e?(this.codeActionsPromise||(this.codeActionsPromise=(0,ae.PG)((t=>(0,ce.aI)(this.languageFeaturesService.codeActionProvider,e,new h.e(this.marker.range.startLineNumber,this.marker.range.startColumn,this.marker.range.endLineNumber,this.marker.range.endColumn),{type:1,triggerAction:he.aQ.ProblemsView,filter:{include:he.yN.QuickFix}},ge.Ex.None,t).then((e=>this._register(e)))))),this.codeActionsPromise):null))}toActions(e){return e.validActions.map((e=>new C.aU(e.action.command?e.action.command.id:e.action.title,e.action.title,void 0,!0,(()=>this.openFileAtMarker(this.marker).then((()=>this.instantiationService.invokeFunction(ce.LR,e,ce.UX.FromProblemsView)))))))}openFileAtMarker(e){const{resource:t,selection:i}={resource:e.resource,selection:e.range};return this.editorService.openEditor({resource:t,options:{selection:i,preserveFocus:!0,pinned:!1,revealIfVisible:!0}},L.LP).then((()=>{}))}getModel(e){const t=this.modelService.getModel(this.marker.resource);return t?Promise.resolve(t):e?(this.modelPromise||(this.modelPromise=(0,ae.PG)((e=>new Promise((e=>{this._register(this.modelService.onModelAdded((t=>{(0,c.Xy)(t.uri,this.marker.resource)&&e(t)})))}))))),this.modelPromise):Promise.resolve(null)}};Fe=(0,r.g)([(0,r.f)(1,le.q),(0,r.f)(2,F.TG),(0,r.f)(3,L.AR),(0,r.f)(4,_e.p)],Fe);let Ne=class extends T.JT{constructor(e=!0,t="tree",i,r){super(),this.contextKeyService=i,this.instantiationService=r,this._onDidChange=this._register(new g.Q5),this.onDidChange=this._onDidChange.event,this._onDidChangeViewMode=this._register(new g.Q5),this.onDidChangeViewMode=this._onDidChangeViewMode.event,this.markersViewStates=new Map,this.markersPerResource=new Map,this.bulkUpdate=!1,this.hoveredMarker=null,this.hoverDelayer=new ae.vp(300),this._multiline=!0,this._viewMode="tree",this._multiline=e,this._viewMode=t,this.viewModeContextKey=V.G.MarkersViewModeContextKey.bindTo(this.contextKeyService),this.viewModeContextKey.set(t)}add(e){if(!this.markersViewStates.has(e.id)){const t=this.instantiationService.createInstance(Fe,e),i=[t];t.multiline=this.multiline,t.onDidChange((()=>{this.bulkUpdate||this._onDidChange.fire(e)}),this,i),this.markersViewStates.set(e.id,{viewModel:t,disposables:i});const r=this.markersPerResource.get(e.resource.toString())||[];r.push(e),this.markersPerResource.set(e.resource.toString(),r)}}remove(e){const t=this.markersPerResource.get(e.toString())||[];for(const e of t){const t=this.markersViewStates.get(e.id);t&&(0,T.B9)(t.disposables),this.markersViewStates.delete(e.id),this.hoveredMarker===e&&(this.hoveredMarker=null)}this.markersPerResource.delete(e.toString())}getViewModel(e){const t=this.markersViewStates.get(e.id);return t?t.viewModel:null}onMarkerMouseHover(e){this.hoveredMarker=e,this.hoverDelayer.trigger((()=>{if(this.hoveredMarker){const e=this.getViewModel(this.hoveredMarker);e&&e.showLightBulb()}}))}onMarkerMouseLeave(e){this.hoveredMarker===e&&(this.hoveredMarker=null)}get multiline(){return this._multiline}set multiline(e){let t=!1;this._multiline!==e&&(this._multiline=e,t=!0),this.bulkUpdate=!0,this.markersViewStates.forEach((({viewModel:i})=>{i.multiline!==e&&(i.multiline=e,t=!0)})),this.bulkUpdate=!1,t&&this._onDidChange.fire(void 0)}get viewMode(){return this._viewMode}set viewMode(e){this._viewMode!==e&&(this._viewMode=e,this._onDidChangeViewMode.fire(e),this.viewModeContextKey.set(e))}dispose(){this.markersViewStates.forEach((({disposables:e})=>(0,T.B9)(e))),this.markersViewStates.clear(),this.markersPerResource.clear(),super.dispose()}};Ne=(0,r.g)([(0,r.f)(2,s.i6),(0,r.f)(3,F.TG)],Ne);var ye=i(84144),Te=i(91847),Pe=i(59069),Oe=i(66307),De=i(13994),Ve=i(70590),Ke=i(8321),We=i(48205),Be=i(41122),He=i(93038),Ge=i(4850);const Ue=S.$;let qe=class e{static{this.TEMPLATE_ID="severity"}constructor(t,i){this.markersViewModel=t,this.instantiationService=i,this.templateId=e.TEMPLATE_ID}renderTemplate(e){const t=S.R3(e,Ue(".severity")),i=S.R3(t,Ue("")),r=S.R3(e,Ue(".actions"));return{actionBar:new oe.o(r,{actionViewItemProvider:e=>e.id===W.ID?this.instantiationService.createInstance(B,e):void 0,animated:!1}),icon:i}}renderElement(e,t,i,r){const s=e=>{(0,k.Jp)(e)||S.Fx(i.icon,"monaco-table-td").classList.toggle("quickFix",e)};i.icon.title=d.ZL.toString(e.marker.severity),i.icon.className=`marker-icon ${Ee.Z.toString(d.ZL.toSeverity(e.marker.severity))} codicon ${de.j.className(d.ZL.toSeverity(e.marker.severity))}`,i.actionBar.clear();const o=this.markersViewModel.getViewModel(e);if(o){const e=o.quickFixAction;i.actionBar.push([e],{icon:!0,label:!1}),s(o.quickFixAction.enabled),e.onDidChange((({enabled:e})=>s(e))),e.onShowQuickFixes((()=>{const e=i.actionBar.viewItems[0];e&&e.showQuickFixes()}))}}disposeTemplate(e){}};qe=(0,r.g)([(0,r.f)(1,F.TG)],qe);let $e=class e{static{this.TEMPLATE_ID="code"}constructor(t){this.openerService=t,this.templateId=e.TEMPLATE_ID}renderTemplate(e){const t=S.R3(e,Ue(".code")),i=new se.q(t);i.element.classList.add("source-label");const r=new se.q(t);return r.element.classList.add("code-label"),{codeColumn:t,sourceLabel:i,codeLabel:r,codeLink:new ke.r(t,{href:"",label:""},{},this.openerService)}}renderElement(e,t,i,r){if(i.codeColumn.classList.remove("code-label"),i.codeColumn.classList.remove("code-link"),e.marker.source&&e.marker.code)if("string"==typeof e.marker.code)i.codeColumn.classList.add("code-label"),i.codeColumn.title=`${e.marker.source} (${e.marker.code})`,i.sourceLabel.set(e.marker.source,e.sourceMatches),i.codeLabel.set(e.marker.code,e.codeMatches);else{i.codeColumn.classList.add("code-link"),i.codeColumn.title=`${e.marker.source} (${e.marker.code.value})`,i.sourceLabel.set(e.marker.source,e.sourceMatches);const t=new se.q(Ue(".code-link-label"));t.set(e.marker.code.value,e.codeMatches),i.codeLink.link={href:e.marker.code.target.toString(),title:e.marker.code.target.toString(),label:t.element}}else i.codeColumn.title="",i.sourceLabel.set("-")}disposeTemplate(e){}};$e=(0,r.g)([(0,r.f)(0,me.v4)],$e);class Ze{constructor(){this.templateId=Ze.TEMPLATE_ID}static{this.TEMPLATE_ID="message"}renderTemplate(e){const t=S.R3(e,Ue(".message"));return{columnElement:t,highlightedLabel:new se.q(t)}}renderElement(e,t,i,r){i.columnElement.title=e.marker.message,i.highlightedLabel.set(e.marker.message,e.messageMatches)}disposeTemplate(e){}}let Qe=class e{static{this.TEMPLATE_ID="file"}constructor(t){this.labelService=t,this.templateId=e.TEMPLATE_ID}renderTemplate(e){const t=S.R3(e,Ue(".file")),i=new se.q(t);i.element.classList.add("file-label");const r=new se.q(t);return r.element.classList.add("file-position"),{columnElement:t,fileLabel:i,positionLabel:r}}renderElement(e,t,i,r){const s=y.MARKERS_PANEL_AT_LINE_COL_NUMBER(e.marker.startLineNumber,e.marker.startColumn);i.columnElement.title=`${this.labelService.getUriLabel(e.marker.resource,{relative:!1})} ${s}`,i.fileLabel.set(this.labelService.getUriLabel(e.marker.resource,{relative:!0}),e.fileMatches),i.positionLabel.set(s,void 0)}disposeTemplate(e){}};Qe=(0,r.g)([(0,r.f)(0,ne.e)],Qe);class je{constructor(){this.templateId=je.TEMPLATE_ID}static{this.TEMPLATE_ID="owner"}renderTemplate(e){const t=S.R3(e,Ue(".owner"));return{columnElement:t,highlightedLabel:new se.q(t)}}renderElement(e,t,i,r){i.columnElement.title=e.marker.owner,i.highlightedLabel.set(e.marker.owner,e.ownerMatches)}disposeTemplate(e){}}class Xe{constructor(){this.headerRowHeight=Xe.HEADER_ROW_HEIGHT}static{this.HEADER_ROW_HEIGHT=24}static{this.ROW_HEIGHT=24}getHeight(e){return Xe.ROW_HEIGHT}}let Ye=class extends T.JT{constructor(e,t,i,r,s,o,n){super(),this.container=e,this.markersViewModel=t,this.resourceMarkers=i,this.filterOptions=r,this.instantiationService=o,this.labelService=n,this._itemCount=0,this.table=this.instantiationService.createInstance(Z.On,"Markers",this.container,new Xe,[{label:"",tooltip:"",weight:0,minimumWidth:36,maximumWidth:36,templateId:qe.TEMPLATE_ID,project:e=>e},{label:(0,l.NC)("codeColumnLabel","Code"),tooltip:"",weight:1,minimumWidth:100,maximumWidth:300,templateId:$e.TEMPLATE_ID,project:e=>e},{label:(0,l.NC)("messageColumnLabel","Message"),tooltip:"",weight:4,templateId:Ze.TEMPLATE_ID,project:e=>e},{label:(0,l.NC)("fileColumnLabel","File"),tooltip:"",weight:2,templateId:Qe.TEMPLATE_ID,project:e=>e},{label:(0,l.NC)("sourceColumnLabel","Source"),tooltip:"",weight:1,minimumWidth:100,maximumWidth:300,templateId:je.TEMPLATE_ID,project:e=>e}],[this.instantiationService.createInstance(qe,this.markersViewModel),this.instantiationService.createInstance($e),this.instantiationService.createInstance(Ze),this.instantiationService.createInstance(Qe),this.instantiationService.createInstance(je)],s);const a=this.table.domNode.querySelector(".monaco-list-rows"),c=g.ju.chain(this._register(new Ge.Y(a,"mouseover")).event).map((e=>S.Fx(e.target,"monaco-list-row","monaco-list-rows"))).filter((e=>!!e)).map((e=>parseInt(e.getAttribute("data-index")))).event,h=g.ju.map(this._register(new Ge.Y(a,"mouseleave")).event,(()=>-1)),d=g.ju.latch(g.ju.any(c,h)),m=g.ju.debounce(d,((e,t)=>t),500);this._register(m((e=>{-1!==e&&this.table.row(e)&&this.markersViewModel.onMarkerMouseHover(this.table.row(e))})))}get contextKeyService(){return this.table.contextKeyService}get onContextMenu(){return this.table.onContextMenu}get onDidOpen(){return this.table.onDidOpen}get onDidChangeFocus(){return this.table.onDidChangeFocus}get onDidChangeSelection(){return this.table.onDidChangeSelection}collapseMarkers(){}domFocus(){this.table.domFocus()}filterMarkers(e,t){this.filterOptions=t,this.reset(e)}getFocus(){const e=this.table.getFocus();return e.length>0?[...e.map((e=>this.table.row(e)))]:[]}getHTMLElement(){return this.table.getHTMLElement()}getRelativeTop(e){return e?this.table.getRelativeTop(this.table.indexOf(e)):null}getSelection(){const e=this.table.getSelection();return e.length>0?[...e.map((e=>this.table.row(e)))]:[]}getVisibleItemCount(){return this._itemCount}isVisible(){return!this.container.classList.contains("hidden")}layout(e,t){this.container.style.height=`${e}px`,this.table.layout(e,t)}reset(e){this.resourceMarkers=e;const t=[];for(const e of this.resourceMarkers)for(const i of e.markers)if(!w.g.has(i.resource.scheme)&&!this.filterOptions.excludesMatcher.matches(i.resource))if(this.filterOptions.includesMatcher.matches(i.resource))t.push(new M(i));else if(this.filterOptions.showErrors&&d.ZL.Error===i.marker.severity||this.filterOptions.showWarnings&&d.ZL.Warning===i.marker.severity||this.filterOptions.showInfos&&d.ZL.Info===i.marker.severity)if(this.filterOptions.textFilter.text){const e=i.marker.source?z._filter(this.filterOptions.textFilter.text,i.marker.source)??void 0:void 0,r=i.marker.code?z._filter(this.filterOptions.textFilter.text,"string"==typeof i.marker.code?i.marker.code:i.marker.code.value)??void 0:void 0,s=z._messageFilter(this.filterOptions.textFilter.text,i.marker.message)??void 0,o=z._messageFilter(this.filterOptions.textFilter.text,this.labelService.getUriLabel(i.resource,{relative:!0}))??void 0,n=z._messageFilter(this.filterOptions.textFilter.text,i.marker.owner)??void 0,a=e||r||s||o||n;(a&&!this.filterOptions.textFilter.negate||!a&&this.filterOptions.textFilter.negate)&&t.push(new M(i,e,r,s,o,n))}else t.push(new M(i));this._itemCount=t.length,this.table.splice(0,Number.POSITIVE_INFINITY,t.sort(((e,t)=>{let i=d.ZL.compare(e.marker.severity,t.marker.severity);return 0===i&&(i=E(e.marker,t.marker)),0===i&&(i=h.e.compareRangesUsingStarts(e.marker,t.marker)),i})))}revealMarkers(e,t,i){if(e){const r=this.resourceMarkers.indexOf(e);if(-1!==r)if(this.hasSelectedMarkerFor(e)){const e=this.table.getSelection();this.table.reveal(e[0],i),t&&this.table.setFocus(e)}else this.table.reveal(r,0),t&&(this.table.setFocus([r]),this.table.setSelection([r]))}else t&&(this.table.setSelection([]),this.table.focusFirst())}setAriaLabel(e){this.table.domNode.ariaLabel=e}setMarkerSelection(e,t){this.isVisible()&&(e&&e.length>0?(this.table.setSelection(e.map((e=>this.findMarkerIndex(e)))),t&&t.length>0?this.table.setFocus(t.map((e=>this.findMarkerIndex(e)))):this.table.setFocus([this.findMarkerIndex(e[0])]),this.table.reveal(this.findMarkerIndex(e[0]))):0===this.getSelection().length&&this.getVisibleItemCount()>0&&(this.table.setSelection([0]),this.table.setFocus([0]),this.table.reveal(0)))}toggleVisibility(e){this.container.classList.toggle("hidden",e)}update(e){for(const t of e){const e=this.resourceMarkers.indexOf(t);this.resourceMarkers.splice(e,1,t)}this.reset(this.resourceMarkers)}updateMarker(e){this.table.rerender()}findMarkerIndex(e){for(let t=0;t<this.table.length;t++)if(this.table.row(t).marker===e.marker)return t;return-1}hasSelectedMarkerFor(e){const t=this.getSelection();return!!(t&&t.length>0&&t[0]instanceof R&&e.has(t[0].marker.resource))}};Ye=(0,r.g)([(0,r.f)(5,F.TG),(0,r.f)(6,ne.e)],Ye);var ze=i(20539);function Je(e){return $.$.map(e.markers,(e=>{const t=$.$.from(e.relatedInformation);return{element:e,children:$.$.map(t,(e=>({element:e})))}}))}let et=class extends Ve.S_{constructor(e,t,i,r,s,o,n,a,l,c,h,d,m,u,g){const p=new De.N(V.s.MARKERS_VIEW_STORAGE_ID,m).getMemento(1,1);super({...e,filterOptions:{ariaLabel:y.MARKERS_PANEL_FILTER_ARIA_LABEL,placeholder:y.MARKERS_PANEL_FILTER_PLACEHOLDER,focusContextKey:V.G.MarkerViewFilterFocusContextKey.key,text:p.filter||"",history:p.filterHistory||[]}},d,c,s,a,i,t,u,g,o),this.editorService=r,this.markerService=n,this.workspaceContextService=l,this.uriIdentityService=h,this.lastSelectedRelativeTop=0,this.currentActiveResource=null,this.onVisibleDisposables=this._register(new T.SL),this.widgetDisposables=this._register(new T.SL),this.currentHeight=0,this.currentWidth=0,this.cachedFilterStats=void 0,this.currentResourceGotAddedToMarkersData=!1,this.onDidChangeVisibility=this.onDidChangeBodyVisibility,this.panelState=p,this.markersModel=this._register(t.createInstance(v)),this.markersViewModel=this._register(t.createInstance(Ne,this.panelState.multiline,this.panelState.viewMode??this.getDefaultViewMode())),this._register(this.onDidChangeVisibility((e=>this.onDidChangeMarkersViewVisibility(e)))),this._register(this.markersViewModel.onDidChangeViewMode((e=>this.onDidChangeViewMode()))),this.widgetAccessibilityProvider=t.createInstance(fe),this.widgetIdentityProvider={getId:e=>e.id},this.setCurrentActiveEditor(),this.filter=new Le(z.EMPTY(h)),this.rangeHighlightDecorations=this._register(this.instantiationService.createInstance(G.rv)),this.filters=this._register(new K({filterHistory:this.panelState.filterHistory||[],showErrors:!1!==this.panelState.showErrors,showWarnings:!1!==this.panelState.showWarnings,showInfos:!1!==this.panelState.showInfos,excludedFiles:!!this.panelState.useFilesExclude,activeFile:!!this.panelState.activeFile},this.contextKeyService)),this._register(this.configurationService.onDidChangeConfiguration((e=>{this.filters.excludedFiles&&e.affectsConfiguration("files.exclude")&&this.updateFilter()})))}render(){super.render(),this._register((0,ze.g)({focusNotifiers:[this,this.filterWidget],focusNextWidget:()=>{this.filterWidget.hasFocus()&&this.focus()},focusPreviousWidget:()=>{this.filterWidget.hasFocus()||this.focusFilter()}}))}renderBody(e){super.renderBody(e),e.classList.add("markers-panel"),this._register(S.nm(e,"keydown",(e=>{this.keybindingService.mightProducePrintableCharacter(new Pe.y1(e))&&this.focusFilter()})));const t=S.R3(e,S.$(".markers-panel-container"));this.createArialLabelElement(t),this.createMessageBox(t),this.widgetContainer=S.R3(t,S.$(".widget-container")),this.createWidget(this.widgetContainer),this.updateFilter(),this.renderContent()}getTitle(){return y.MARKERS_PANEL_TITLE_PROBLEMS}layoutBodyContent(e=this.currentHeight,t=this.currentWidth){this.messageBoxContainer&&(this.messageBoxContainer.style.height=`${e}px`),this.widget.layout(e,t),this.currentHeight=e,this.currentWidth=t}focus(){this.widget.getHTMLElement()!==document.activeElement&&(this.hasNoProblems()?this.messageBoxContainer.focus():(this.widget.domFocus(),this.widget.setMarkerSelection()))}focusFilter(){this.filterWidget.focus()}updateBadge(e,t){this.filterWidget.updateBadge(e===t||0===e?void 0:(0,l.NC)("showing filtered problems","Showing {0} of {1}",t,e))}checkMoreFilters(){this.filterWidget.checkMoreFilters(!this.filters.showErrors||!this.filters.showWarnings||!this.filters.showInfos||this.filters.excludedFiles||this.filters.activeFile)}clearFilterText(){this.filterWidget.setFilterText("")}showQuickFixes(e){const t=this.markersViewModel.getViewModel(e);t&&t.quickFixAction.run()}openFileAtElement(e,t,i,r){const{resource:s,selection:o}=e instanceof R?{resource:e.resource,selection:e.range}:e instanceof A?{resource:e.raw.resource,selection:e.raw}:"marker"in e?{resource:e.marker.resource,selection:e.marker.range}:{resource:null,selection:null};return s&&o?(this.editorService.openEditor({resource:s,options:{selection:o,preserveFocus:t,pinned:r,revealIfVisible:!0}},i?L.O3:L.LP).then((e=>{e&&t?this.rangeHighlightDecorations.highlightRange({resource:s,range:o},e.getControl()):this.rangeHighlightDecorations.removeHighlightRange()})),!0):(this.rangeHighlightDecorations.removeHighlightRange(),!1)}refreshPanel(e){if(this.isVisible()){const t=this.widget.getSelection().length>0;e?e instanceof R?this.widget.updateMarker(e):e.added.size||e.removed.size?this.resetWidget():this.widget.update([...e.updated]):this.resetWidget(),t&&this.widget.setMarkerSelection(),this.cachedFilterStats=void 0;const{total:i,filtered:r}=this.getFilterStats();this.toggleVisibility(0===i||0===r),this.renderMessage(),this.updateBadge(i,r),this.checkMoreFilters()}}onDidChangeViewState(e){this.refreshPanel(e)}resetWidget(){this.widget.reset(this.getResourceMarkers())}updateFilter(){this.filter.options=new z(this.filterWidget.getFilterText(),this.getFilesExcludeExpressions(),this.filters.showWarnings,this.filters.showErrors,this.filters.showInfos,this.uriIdentityService),this.widget.filterMarkers(this.getResourceMarkers(),this.filter.options),this.cachedFilterStats=void 0;const{total:e,filtered:t}=this.getFilterStats();this.toggleVisibility(0===e||0===t),this.renderMessage(),this.updateBadge(e,t),this.checkMoreFilters()}getDefaultViewMode(){return"table"===this.configurationService.getValue("problems.defaultViewMode")?"table":"tree"}getFilesExcludeExpressions(){if(!this.filters.excludedFiles)return[];const e=this.workspaceContextService.getWorkspace().folders;return e.length?e.map((e=>({root:e.uri,expression:this.getFilesExclude(e.uri)}))):this.getFilesExclude()}getFilesExclude(e){return(0,J.I8)(this.configurationService.getValue("files.exclude",{resource:e}))||{}}getResourceMarkers(){if(!this.filters.activeFile)return this.markersModel.resourceMarkers;let e=[];if(this.currentActiveResource){const t=this.markersModel.getResourceMarkers(this.currentActiveResource);t&&(e=[t])}return e}createMessageBox(e){this.messageBoxContainer=S.R3(e,S.$(".message-box-container")),this.messageBoxContainer.setAttribute("aria-labelledby","markers-panel-arialabel")}createArialLabelElement(e){this.ariaLabelElement=S.R3(e,S.$("")),this.ariaLabelElement.setAttribute("id","markers-panel-arialabel")}createWidget(e){this.widget="table"===this.markersViewModel.viewMode?this.createTable(e):this.createTree(e),this.widgetDisposables.add(this.widget);const t=V.G.MarkerFocusContextKey.bindTo(this.widget.contextKeyService),i=V.G.RelatedInformationFocusContextKey.bindTo(this.widget.contextKeyService);this.widgetDisposables.add(this.widget.onDidChangeFocus((e=>{t.set(e.elements.some((e=>e instanceof R))),i.set(e.elements.some((e=>e instanceof A)))}))),this.widgetDisposables.add(g.ju.debounce(this.widget.onDidOpen,((e,t)=>t),75,!0)((e=>{this.openFileAtElement(e.element,!!e.editorOptions.preserveFocus,e.sideBySide,!!e.editorOptions.pinned)}))),this.widgetDisposables.add(g.ju.any(this.widget.onDidChangeSelection,this.widget.onDidChangeFocus)((()=>{const e=[...this.widget.getSelection(),...this.widget.getFocus()];for(const t of e)if(t instanceof R){const e=this.markersViewModel.getViewModel(t);e?.showLightBulb()}}))),this.widgetDisposables.add(this.widget.onContextMenu(this.onContextMenu,this)),this.widgetDisposables.add(this.widget.onDidChangeSelection(this.onSelected,this))}createTable(e){return this.instantiationService.createInstance(Ye,S.R3(e,S.$(".markers-table-container")),this.markersViewModel,this.getResourceMarkers(),this.filter.options,{accessibilityProvider:this.widgetAccessibilityProvider,dnd:this.instantiationService.createInstance(He.vb,(e=>e instanceof M?(0,me.YO)(e.resource,e.range):null)),horizontalScrolling:!1,identityProvider:this.widgetIdentityProvider,multipleSelectionSupport:!0,selectionNavigation:!0})}createTree(e){const t=new g.ZD,i=this.instantiationService.createInstance(Oe.RX,this),r=new be(this.markersViewModel),s=[this.instantiationService.createInstance(Re,i,t.event),this.instantiationService.createInstance(Me,this.markersViewModel),this.instantiationService.createInstance(xe)],o=this.instantiationService.createInstance(tt,"MarkersView",S.R3(e,S.$(".tree-container.show-file-icons")),r,s,{filter:this.filter,accessibilityProvider:this.widgetAccessibilityProvider,identityProvider:this.widgetIdentityProvider,dnd:this.instantiationService.createInstance(He.vb,(e=>e instanceof b?e.resource:e instanceof R?(0,me.YO)(e.resource,e.range):e instanceof A?(0,me.YO)(e.raw.resource,e.raw):null)),expandOnlyOnTwistieClick:e=>e instanceof R&&e.relatedInformation.length>0,overrideStyles:{listBackground:this.getBackgroundColor()},selectionNavigation:!0,multipleSelectionSupport:!0});return t.input=o.onDidChangeRenderNodeCount,o}collapseAll(){this.widget.collapseMarkers()}setMultiline(e){this.markersViewModel.multiline=e}setViewMode(e){this.markersViewModel.viewMode=e}onDidChangeMarkersViewVisibility(e){if(this.onVisibleDisposables.clear(),e){for(const e of this.reInitialize())this.onVisibleDisposables.add(e);this.refreshPanel()}}reInitialize(){const e=[],t=e=>this.markerService.read({resource:e,severities:d.ZL.Error|d.ZL.Warning|d.ZL.Info});return this.markersModel.setResourceMarkers((0,m.vM)(t(),E).map((e=>[e[0].resource,e]))),e.push(g.ju.debounce(this.markerService.onMarkerChanged,((e,t)=>(e=e||new u.Y9,t.forEach((t=>e.set(t,t))),e)),64)((e=>{this.markersModel.setResourceMarkers([...e.values()].map((e=>[e,t(e)])))}))),e.push(g.ju.any(this.markersModel.onDidChange,this.editorService.onDidActiveEditorChange)((e=>{e?this.onDidChangeModel(e):this.onActiveEditorChanged()}))),e.push((0,T.OF)((()=>this.markersModel.reset()))),this.markersModel.resourceMarkers.forEach((e=>e.markers.forEach((e=>this.markersViewModel.add(e))))),e.push(this.markersViewModel.onDidChange((e=>this.onDidChangeViewState(e)))),e.push((0,T.OF)((()=>this.markersModel.resourceMarkers.forEach((e=>this.markersViewModel.remove(e.resource)))))),e.push(this.filters.onDidChange((e=>{e.activeFile?this.refreshPanel():(e.excludedFiles||e.showWarnings||e.showErrors||e.showInfos)&&this.updateFilter()}))),e.push(this.filterWidget.onDidChangeFilterText((e=>this.updateFilter()))),e.push((0,T.OF)((()=>{this.cachedFilterStats=void 0}))),e.push((0,T.OF)((()=>this.rangeHighlightDecorations.removeHighlightRange()))),e}onDidChangeModel(e){const t=[...e.added,...e.removed,...e.updated],i=[];for(const{resource:e}of t){this.markersViewModel.remove(e);const t=this.markersModel.getResourceMarkers(e);if(t)for(const e of t.markers)this.markersViewModel.add(e);i.push(e)}this.currentResourceGotAddedToMarkersData=this.currentResourceGotAddedToMarkersData||this.isCurrentResourceGotAddedToMarkersData(i),this.refreshPanel(e),this.updateRangeHighlights(),this.currentResourceGotAddedToMarkersData&&(this.autoReveal(),this.currentResourceGotAddedToMarkersData=!1)}onDidChangeViewMode(){this.widgetContainer&&this.widget&&(this.widgetContainer.textContent="",this.widgetDisposables.clear());const e=new Set;for(const t of this.widget.getSelection())t instanceof b?t.markers.forEach((t=>e.add(t))):(t instanceof R||t instanceof M)&&e.add(t);const t=new Set;for(const e of this.widget.getFocus())(e instanceof R||e instanceof M)&&t.add(e);this.createWidget(this.widgetContainer),this.refreshPanel(),e.size>0&&(this.widget.setMarkerSelection(Array.from(e),Array.from(t)),this.widget.domFocus())}isCurrentResourceGotAddedToMarkersData(e){const t=this.currentActiveResource;return!!t&&(!this.getResourceForCurrentActiveResource()&&e.some((e=>e.toString()===t.toString())))}onActiveEditorChanged(){this.setCurrentActiveEditor(),this.filters.activeFile&&this.refreshPanel(),this.autoReveal()}setCurrentActiveEditor(){const e=this.editorService.activeEditor;this.currentActiveResource=e?(0,k.M2)(Be.zK.getOriginalUri(e,{supportSideBySide:Be.YX.PRIMARY})):null}onSelected(){const e=this.widget.getSelection();e&&e.length>0&&(this.lastSelectedRelativeTop=this.widget.getRelativeTop(e[0])||0)}hasNoProblems(){const{total:e,filtered:t}=this.getFilterStats();return 0===e||0===t}renderContent(){this.cachedFilterStats=void 0,this.resetWidget(),this.toggleVisibility(this.hasNoProblems()),this.renderMessage()}renderMessage(){if(!this.messageBoxContainer||!this.ariaLabelElement)return;S.PO(this.messageBoxContainer);const{total:e,filtered:t}=this.getFilterStats();0===t?(this.messageBoxContainer.style.display="block",this.messageBoxContainer.setAttribute("tabIndex","0"),this.filters.activeFile?this.renderFilterMessageForActiveFile(this.messageBoxContainer):e>0?this.renderFilteredByFilterMessage(this.messageBoxContainer):this.renderNoProblemsMessage(this.messageBoxContainer)):(this.messageBoxContainer.style.display="none",t===e?this.setAriaLabel((0,l.NC)("No problems filtered","Showing {0} problems",e)):this.setAriaLabel((0,l.NC)("problems filtered","Showing {0} of {1} problems",t,e)),this.messageBoxContainer.removeAttribute("tabIndex"))}renderFilterMessageForActiveFile(e){this.currentActiveResource&&this.markersModel.getResourceMarkers(this.currentActiveResource)?this.renderFilteredByFilterMessage(e):this.renderNoProblemsMessageForActiveFile(e)}renderFilteredByFilterMessage(e){S.R3(e,S.$("span")).textContent=y.MARKERS_PANEL_NO_PROBLEMS_FILTERS;const t=S.R3(e,S.$("a.messageAction"));t.textContent=(0,l.NC)("clearFilter","Clear Filters"),t.setAttribute("tabIndex","0"),S.R3(e,S.$("span")).textContent=".",S.mu(t,S.tw.CLICK,(()=>this.clearFilters())),S.mu(t,S.tw.KEY_DOWN,(e=>{(e.equals(3)||e.equals(10))&&(this.clearFilters(),e.stopPropagation())})),this.setAriaLabel(y.MARKERS_PANEL_NO_PROBLEMS_FILTERS)}renderNoProblemsMessageForActiveFile(e){S.R3(e,S.$("span")).textContent=y.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT,this.setAriaLabel(y.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT)}renderNoProblemsMessage(e){S.R3(e,S.$("span")).textContent=y.MARKERS_PANEL_NO_PROBLEMS_BUILT,this.setAriaLabel(y.MARKERS_PANEL_NO_PROBLEMS_BUILT)}setAriaLabel(e){this.widget.setAriaLabel(e),this.ariaLabelElement.setAttribute("aria-label",e)}clearFilters(){this.filterWidget.setFilterText(""),this.filters.excludedFiles=!1,this.filters.showErrors=!0,this.filters.showWarnings=!0,this.filters.showInfos=!0}autoReveal(e=!1){if(this.filters.activeFile)return;const t=this.configurationService.getValue("problems.autoReveal");if("boolean"==typeof t&&t){const t=this.getResourceForCurrentActiveResource();this.widget.revealMarkers(t,e,this.lastSelectedRelativeTop)}}getResourceForCurrentActiveResource(){return this.currentActiveResource?this.markersModel.getResourceMarkers(this.currentActiveResource):null}updateRangeHighlights(){this.rangeHighlightDecorations.removeHighlightRange(),this.widget.getHTMLElement()===document.activeElement&&this.highlightCurrentSelectedMarkerRange()}highlightCurrentSelectedMarkerRange(){const e=this.widget.getSelection()??[];if(1!==e.length)return;const t=e[0];t instanceof R&&this.rangeHighlightDecorations.highlightRange(t)}onContextMenu(e){const t=e.element;t&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this.contextMenuService.showContextMenu({getAnchor:()=>e.anchor,menuId:ye.eH.ProblemsPanelContext,contextKeyService:this.widget.contextKeyService,getActions:()=>this.getMenuActions(t),getActionViewItem:e=>{const t=this.keybindingService.lookupKeybinding(e.id);if(t)return new D.gU(e,e,{label:!0,keybinding:t.getLabel()})},onHide:e=>{e&&this.widget.domFocus()}}))}getMenuActions(e){const t=[];if(e instanceof R){const i=this.markersViewModel.getViewModel(e);if(i){const e=i.quickFixAction.quickFixes;e.length&&(t.push(...e),t.push(new C.Z0))}}return t}getFocusElement(){return this.widget.getFocus()[0]??void 0}getFocusedSelectedElements(){const e=this.getFocusElement();if(!e)return null;const t=this.widget.getSelection();if(t.includes(e)){const e=[];for(const i of t)i&&e.push(i);return e}return[e]}getAllResourceMarkers(){return this.markersModel.resourceMarkers}getFilterStats(){return this.cachedFilterStats||(this.cachedFilterStats={total:this.markersModel.total,filtered:this.widget?.getVisibleItemCount()??0}),this.cachedFilterStats}toggleVisibility(e){this.widget.toggleVisibility(e),this.layoutBodyContent()}saveState(){this.panelState.filter=this.filterWidget.getFilterText(),this.panelState.filterHistory=this.filters.filterHistory,this.panelState.showErrors=this.filters.showErrors,this.panelState.showWarnings=this.filters.showWarnings,this.panelState.showInfos=this.filters.showInfos,this.panelState.useFilesExclude=this.filters.excludedFiles,this.panelState.activeFile=this.filters.activeFile,this.panelState.multiline=this.markersViewModel.multiline,this.panelState.viewMode=this.markersViewModel.viewMode,super.saveState()}dispose(){super.dispose()}};et=(0,r.g)([(0,r.f)(1,F.TG),(0,r.f)(2,Ke.XH),(0,r.f)(3,L.AR),(0,r.f)(4,H.Ui),(0,r.f)(5,x.bU),(0,r.f)(6,d.lT),(0,r.f)(7,s.i6),(0,r.f)(8,ee.ec),(0,r.f)(9,N.i),(0,r.f)(10,We.v),(0,r.f)(11,Te.d),(0,r.f)(12,q.Uy),(0,r.f)(13,me.v4),(0,r.f)(14,U.XE)],et);let tt=class extends Z.PF{constructor(e,t,i,r,s,o,n,a,l,c){super(e,t,i,r,s,o,n,a,c),this.container=t,this.visibilityContextKey=V.G.MarkersTreeVisibilityContextKey.bindTo(n)}collapseMarkers(){this.collapseAll(),this.setSelection([]),this.setFocus([]),this.getHTMLElement().focus(),this.focusFirst()}filterMarkers(){this.refilter()}getVisibleItemCount(){let e=0;const t=this.getNode();for(const i of t.children)for(const t of i.children)i.visible&&t.visible&&e++;return e}isVisible(){return!this.container.classList.contains("hidden")}toggleVisibility(e){this.visibilityContextKey.set(!e),this.container.classList.toggle("hidden",e)}reset(e){this.setChildren(null,$.$.map(e,(e=>({element:e,children:Je(e)}))))}revealMarkers(e,t,i){e?this.hasElement(e)&&(!this.isCollapsed(e)&&this.hasSelectedMarkerFor(e)?(this.reveal(this.getSelection()[0],i),t&&this.setFocus(this.getSelection())):(this.expand(e),this.reveal(e,0),t&&(this.setFocus([e]),this.setSelection([e])))):t&&(this.setSelection([]),this.focusFirst())}setAriaLabel(e){this.ariaLabel=e}setMarkerSelection(e,t){if(this.isVisible())if(e&&e.length>0)this.setSelection(e.map((e=>this.findMarkerNode(e)))),t&&t.length>0?this.setFocus(t.map((e=>this.findMarkerNode(e)))):this.setFocus([this.findMarkerNode(e[0])]),this.reveal(this.findMarkerNode(e[0]));else if(0===this.getSelection().length){const e=this.firstVisibleElement,t=e?e instanceof b?e.markers[0]:e instanceof R?e:void 0:void 0;t&&(this.setSelection([t]),this.setFocus([t]),this.reveal(t))}}update(e){for(const t of e)this.setChildren(t,Je(t)),this.rerender(t)}updateMarker(e){this.rerender(e)}findMarkerNode(e){for(const t of this.getNode().children)for(const i of t.children)if(i.element instanceof R&&i.element.marker===e.marker)return i.element;return null}hasSelectedMarkerFor(e){const t=this.getSelection();return!!(t&&t.length>0&&t[0]instanceof R&&e.has(t[0].marker.resource))}dispose(){super.dispose()}layout(e,t){this.container.style.height=`${e}px`,super.layout(e,t)}};tt=(0,r.g)([(0,r.f)(5,F.TG),(0,r.f)(6,s.i6),(0,r.f)(7,Z.Lw),(0,r.f)(8,U.XE),(0,r.f)(9,H.Ui)],tt);var it=i(89872),rt=i(63809),st=i(84972),ot=i(29918),nt=i(88813),at=i(28194),lt=i(97108),ct=i(68398),ht=i(24020);a.W.registerCommandAndKeybindingRule({id:V.s.MARKER_OPEN_ACTION_ID,weight:200,when:s.Ao.and(V.G.MarkerFocusContextKey),primary:3,mac:{primary:3,secondary:[2066]},handler:(e,t)=>{const i=e.get(Ke.qC).getActiveViewWithId(V.s.MARKERS_VIEW_ID);i.openFileAtElement(i.getFocusElement(),!1,!1,!0)}}),a.W.registerCommandAndKeybindingRule({id:V.s.MARKER_OPEN_SIDE_ACTION_ID,weight:200,when:s.Ao.and(V.G.MarkerFocusContextKey),primary:2051,mac:{primary:259},handler:(e,t)=>{const i=e.get(Ke.qC).getActiveViewWithId(V.s.MARKERS_VIEW_ID);i.openFileAtElement(i.getFocusElement(),!1,!0,!0)}}),a.W.registerCommandAndKeybindingRule({id:V.s.MARKER_SHOW_PANEL_ID,weight:200,when:void 0,primary:void 0,handler:async(e,t)=>{await e.get(Ke.qC).openView(V.s.MARKERS_VIEW_ID)}}),a.W.registerCommandAndKeybindingRule({id:V.s.MARKER_SHOW_QUICK_FIX,weight:200,when:V.G.MarkerFocusContextKey,primary:2137,handler:(e,t)=>{const i=e.get(Ke.qC).getActiveViewWithId(V.s.MARKERS_VIEW_ID),r=i.getFocusElement();r instanceof R&&i.showQuickFixes(r)}}),it.B.as(o.IP.Configuration).registerConfiguration({id:"problems",order:101,title:y.PROBLEMS_PANEL_CONFIGURATION_TITLE,type:"object",properties:{"problems.autoReveal":{description:y.PROBLEMS_PANEL_CONFIGURATION_AUTO_REVEAL,type:"boolean",default:!0},"problems.defaultViewMode":{description:y.PROBLEMS_PANEL_CONFIGURATION_VIEW_MODE,type:"string",default:"tree",enum:["table","tree"]},"problems.showCurrentInStatus":{description:y.PROBLEMS_PANEL_CONFIGURATION_SHOW_CURRENT_STATUS,type:"boolean",default:!1},"problems.sortOrder":{description:y.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER,type:"string",default:"severity",enum:["severity","position"],enumDescriptions:[y.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_SEVERITY,y.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_POSITION]}}});const dt=(0,pe.q5)("markers-view-icon",P.lA.warning,(0,l.NC)("markersViewIcon","View icon of the markers view.")),mt=it.B.as(Ke.IP.ViewContainersRegistry).registerViewContainer({id:V.s.MARKERS_CONTAINER_ID,title:y.MARKERS_PANEL_TITLE_PROBLEMS,icon:dt,hideIfEmpty:!0,order:0,ctorDescriptor:new lt.M(at.XV,[V.s.MARKERS_CONTAINER_ID,{mergeViewWithContainerWhenSingleView:!0}]),storageId:V.s.MARKERS_VIEW_STORAGE_ID},1,{doNotRegisterOpenCommand:!0});it.B.as(Ke.IP.ViewsRegistry).registerViews([{id:V.s.MARKERS_VIEW_ID,containerIcon:dt,name:y.MARKERS_PANEL_TITLE_PROBLEMS,canToggleVisibility:!1,canMoveView:!0,ctorDescriptor:new lt.M(et),openCommandActionDescriptor:{id:"workbench.actions.view.problems",mnemonicTitle:(0,l.NC)({key:"miMarker",comment:["&& denotes a mnemonic"]},"&&Problems"),keybindings:{primary:3115},order:0}}],mt);const ut=it.B.as(rt.I.Workbench);(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.table.${V.s.MARKERS_VIEW_ID}.viewAsTree`,title:(0,l.NC)("viewAsTree","View as Tree"),menu:{id:ye.eH.ViewTitle,when:s.Ao.and(s.Ao.equals("view",V.s.MARKERS_VIEW_ID),V.G.MarkersViewModeContextKey.isEqualTo("table")),group:"navigation",order:3},icon:P.lA.listTree,viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.setViewMode("tree")}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.table.${V.s.MARKERS_VIEW_ID}.viewAsTable`,title:(0,l.NC)("viewAsTable","View as Table"),menu:{id:ye.eH.ViewTitle,when:s.Ao.and(s.Ao.equals("view",V.s.MARKERS_VIEW_ID),V.G.MarkersViewModeContextKey.isEqualTo("tree")),group:"navigation",order:3},icon:P.lA.listFlat,viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.setViewMode("table")}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.${V.s.MARKERS_VIEW_ID}.toggleErrors`,title:(0,l.NC)("toggle errors","Toggle Errors"),category:(0,l.NC)("problems","Problems"),toggled:{condition:V.G.ShowErrorsFilterContextKey,title:(0,l.NC)("errors","Show Errors")},menu:{id:ht.B,group:"1_filter",when:s.Ao.equals("view",V.s.MARKERS_VIEW_ID),order:1},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.filters.showErrors=!t.filters.showErrors}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.${V.s.MARKERS_VIEW_ID}.toggleWarnings`,title:(0,l.NC)("toggle warnings","Toggle Warnings"),category:(0,l.NC)("problems","Problems"),toggled:{condition:V.G.ShowWarningsFilterContextKey,title:(0,l.NC)("warnings","Show Warnings")},menu:{id:ht.B,group:"1_filter",when:s.Ao.equals("view",V.s.MARKERS_VIEW_ID),order:2},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.filters.showWarnings=!t.filters.showWarnings}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.${V.s.MARKERS_VIEW_ID}.toggleInfos`,title:(0,l.NC)("toggle infos","Toggle Infos"),category:(0,l.NC)("problems","Problems"),toggled:{condition:V.G.ShowInfoFilterContextKey,title:(0,l.NC)("Infos","Show Infos")},menu:{id:ht.B,group:"1_filter",when:s.Ao.equals("view",V.s.MARKERS_VIEW_ID),order:3},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.filters.showInfos=!t.filters.showInfos}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.${V.s.MARKERS_VIEW_ID}.toggleActiveFile`,title:(0,l.NC)("toggle active file","Toggle Active File"),category:(0,l.NC)("problems","Problems"),toggled:{condition:V.G.ShowActiveFileFilterContextKey,title:(0,l.NC)("Active File","Show Active File Only")},menu:{id:ht.B,group:"2_filter",when:s.Ao.equals("view",V.s.MARKERS_VIEW_ID),order:1},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.filters.activeFile=!t.filters.activeFile}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.${V.s.MARKERS_VIEW_ID}.toggleExcludedFiles`,title:(0,l.NC)("toggle Excluded Files","Toggle Excluded Files"),category:(0,l.NC)("problems","Problems"),toggled:{condition:V.G.ShowExcludedFilesFilterContextKey,title:(0,l.NC)("Excluded Files","Hide Excluded Files")},menu:{id:ht.B,group:"2_filter",when:s.Ao.equals("view",V.s.MARKERS_VIEW_ID),order:2},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.filters.excludedFiles=!t.filters.excludedFiles}}),(0,ye.r1)(class extends ye.Ke{constructor(){super({id:"workbench.action.problems.focus",title:{value:y.MARKERS_PANEL_SHOW_LABEL,original:"Focus Problems (Errors, Warnings, Infos)"},category:n.R.View,f1:!0})}async run(e){e.get(Ke.qC).openView(V.s.MARKERS_VIEW_ID,!0)}}),(0,ye.r1)(class extends Ve.Nx{constructor(){const e=s.Ao.and(nt.PY.isEqualTo(V.s.MARKERS_VIEW_ID),V.G.MarkersTreeVisibilityContextKey,V.G.RelatedInformationFocusContextKey.toNegated());super({id:V.s.MARKER_COPY_ACTION_ID,title:{value:(0,l.NC)("copyMarker","Copy"),original:"Copy"},menu:{id:ye.eH.ProblemsPanelContext,when:e,group:"navigation"},keybinding:{weight:200,primary:2081,when:e},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){const i=e.get(st.p),r=t.getFocusedSelectedElements()||t.getAllResourceMarkers(),s=[],o=e=>{s.includes(e)||s.push(e)};for(const e of r)e instanceof b?e.markers.forEach(o):e instanceof R&&o(e);s.length&&await i.writeText(`[${s}]`)}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:V.s.MARKER_COPY_MESSAGE_ACTION_ID,title:{value:(0,l.NC)("copyMessage","Copy Message"),original:"Copy Message"},menu:{id:ye.eH.ProblemsPanelContext,when:V.G.MarkerFocusContextKey,group:"navigation"},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){const i=e.get(st.p),r=t.getFocusElement();r instanceof R&&await i.writeText(r.marker.message)}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:V.s.RELATED_INFORMATION_COPY_MESSAGE_ACTION_ID,title:{value:(0,l.NC)("copyMessage","Copy Message"),original:"Copy Message"},menu:{id:ye.eH.ProblemsPanelContext,when:V.G.RelatedInformationFocusContextKey,group:"navigation"},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){const i=e.get(st.p),r=t.getFocusElement();r instanceof A&&await i.writeText(r.raw.message)}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:V.s.FOCUS_PROBLEMS_FROM_FILTER,title:(0,l.NC)("focusProblemsList","Focus problems view"),keybinding:{when:V.G.MarkerViewFilterFocusContextKey,weight:200,primary:2066},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.focus()}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:V.s.MARKERS_VIEW_FOCUS_FILTER,title:(0,l.NC)("focusProblemsFilter","Focus problems filter"),keybinding:{when:nt.PY.isEqualTo(V.s.MARKERS_VIEW_ID),weight:200,primary:2084},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.focusFilter()}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:V.s.MARKERS_VIEW_SHOW_MULTILINE_MESSAGE,title:{value:(0,l.NC)("show multiline","Show message in multiple lines"),original:"Problems: Show message in multiple lines"},category:(0,l.NC)("problems","Problems"),menu:{id:ye.eH.CommandPalette,when:s.Ao.has((0,nt.yd)(V.s.MARKERS_VIEW_ID))},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.setMultiline(!0)}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:V.s.MARKERS_VIEW_SHOW_SINGLELINE_MESSAGE,title:{value:(0,l.NC)("show singleline","Show message in single line"),original:"Problems: Show message in single line"},category:(0,l.NC)("problems","Problems"),menu:{id:ye.eH.CommandPalette,when:s.Ao.has((0,nt.yd)(V.s.MARKERS_VIEW_ID))},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.setMultiline(!1)}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:V.s.MARKERS_VIEW_CLEAR_FILTER_TEXT,title:(0,l.NC)("clearFiltersText","Clear filters text"),category:(0,l.NC)("problems","Problems"),keybinding:{when:V.G.MarkerViewFilterFocusContextKey,weight:200,primary:9},viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){t.clearFilterText()}}),(0,ye.r1)(class extends Ve.Nx{constructor(){super({id:`workbench.actions.treeView.${V.s.MARKERS_VIEW_ID}.collapseAll`,title:(0,l.NC)("collapseAll","Collapse All"),menu:{id:ye.eH.ViewTitle,when:s.Ao.and(s.Ao.equals("view",V.s.MARKERS_VIEW_ID),V.G.MarkersViewModeContextKey.isEqualTo("tree")),group:"navigation",order:2},icon:P.lA.collapseAll,viewId:V.s.MARKERS_VIEW_ID})}async runInView(e,t){return t.collapseAll()}}),(0,ye.r1)(class extends ye.Ke{constructor(){super({id:V.s.TOGGLE_MARKERS_VIEW_ACTION_ID,title:y.MARKERS_PANEL_TOGGLE_LABEL})}async run(e){const t=e.get(Ke.qC);t.isViewVisible(V.s.MARKERS_VIEW_ID)?t.closeView(V.s.MARKERS_VIEW_ID):t.openView(V.s.MARKERS_VIEW_ID,!0)}});let gt=class extends T.JT{constructor(e,t){super(),this.markerService=e,this.statusbarService=t,this.markersStatusItem=this._register(this.statusbarService.addEntry(this.getMarkersItem(),"status.problems",0,50)),this.markerService.onMarkerChanged((()=>this.markersStatusItem.update(this.getMarkersItem())))}getMarkersItem(){const e=this.markerService.getStatistics(),t=this.getMarkersTooltip(e);return{name:(0,l.NC)("status.problems","Problems"),text:this.getMarkersText(e),ariaLabel:t,tooltip:t,command:"workbench.actions.view.toggleProblems"}}getMarkersTooltip(e){const t=[];var i;return e.errors>0&&t.push((i=e.errors,(0,l.NC)("totalErrors","Errors: {0}",i))),e.warnings>0&&t.push((e=>(0,l.NC)("totalWarnings","Warnings: {0}",e))(e.warnings)),e.infos>0&&t.push((e=>(0,l.NC)("totalInfos","Infos: {0}",e))(e.infos)),0===t.length?(0,l.NC)("noProblems","No Problems"):t.join(", ")}getMarkersText(e){const t=[];return t.push("$(error) "+this.packNumber(e.errors)),t.push("$(warning) "+this.packNumber(e.warnings)),e.infos>0&&t.push("$(info) "+this.packNumber(e.infos)),t.join(" ")}packNumber(e){const t=(0,l.NC)("manyProblems","10K+");return e>9999?t:e>999?e.toString().charAt(0)+"K":e.toString()}};gt=(0,r.g)([(0,r.f)(0,d.lT),(0,r.f)(1,ot.iq)],gt),ut.registerWorkbenchContribution(gt,3);let pt=class extends T.JT{constructor(e,t){super(),this.activityService=e,this.markerService=t,this.activity=this._register(new T.XK),this._register(this.markerService.onMarkerChanged((()=>this.updateBadge()))),this.updateBadge()}updateBadge(){const{errors:e,warnings:t,infos:i}=this.markerService.getStatistics(),r=e+t+i,s=(0,l.NC)("totalProblems","Total {0} Problems",r);this.activity.value=this.activityService.showViewActivity(V.s.MARKERS_VIEW_ID,{badge:new ct.mA(r,(()=>s))})}};function kt(){return{}}pt=(0,r.g)([(0,r.f)(0,ct.By),(0,r.f)(1,d.lT)],pt),ut.registerWorkbenchContribution(pt,3)},20871:(e,t,i)=>{i.d(t,{rv:()=>E,th:()=>b});var r=i(80855),s=i(93794),o=i(65520),n=i(4669),a=i(91847),l=i(65321),c=i(73910),h=i(72065),d=i(5976),m=i(95935),u=i(24448),g=i(71083),p=i(84144),k=i(60961),_=i(93983),w=i(84527);let E=class e extends d.JT{constructor(e){super(),this.editorService=e,this._onHighlightRemoved=this._register(new n.Q5),this.onHighlightRemoved=this._onHighlightRemoved.event,this.rangeHighlightDecorationId=null,this.editor=null,this.editorDisposables=this._register(new d.SL)}removeHighlightRange(){if(this.editor&&this.rangeHighlightDecorationId){const e=this.rangeHighlightDecorationId;this.editor.changeDecorations((t=>{t.removeDecoration(e)})),this._onHighlightRemoved.fire()}this.rangeHighlightDecorationId=null}highlightRange(e,t){t=t??this.getEditor(e),(0,o.CL)(t)?this.doHighlightRange(t,e):(0,o.sd)(t)&&(0,o.CL)(t.activeCodeEditor)&&this.doHighlightRange(t.activeCodeEditor,e)}doHighlightRange(e,t){this.removeHighlightRange(),e.changeDecorations((e=>{this.rangeHighlightDecorationId=e.addDecoration(t.range,this.createRangeHighlightDecoration(t.isWholeLine))})),this.setEditor(e)}getEditor(e){const t=this.editorService.activeEditor?.resource;if(t&&(0,m.Xy)(t,e.resource)&&(0,o.CL)(this.editorService.activeTextEditorControl))return this.editorService.activeTextEditorControl}setEditor(e){this.editor!==e&&(this.editorDisposables.clear(),this.editor=e,this.editorDisposables.add(this.editor.onDidChangeCursorPosition((e=>{0!==e.reason&&3!==e.reason&&5!==e.reason&&6!==e.reason||this.removeHighlightRange()}))),this.editorDisposables.add(this.editor.onDidChangeModel((()=>{this.removeHighlightRange()}))),this.editorDisposables.add(this.editor.onDidDispose((()=>{this.removeHighlightRange(),this.editor=null}))))}static{this._WHOLE_LINE_RANGE_HIGHLIGHT=g.qx.register({description:"codeeditor-range-highlight-whole",stickiness:1,className:"rangeHighlight",isWholeLine:!0})}static{this._RANGE_HIGHLIGHT=g.qx.register({description:"codeeditor-range-highlight",stickiness:1,className:"rangeHighlight"})}createRangeHighlightDecoration(t=!0){return t?e._WHOLE_LINE_RANGE_HIGHLIGHT:e._RANGE_HIGHLIGHT}dispose(){super.dispose(),this.editor?.getModel()&&(this.removeHighlightRange(),this.editor=null)}};E=(0,r.g)([(0,r.f)(0,u.AR)],E);let f=class extends s.${constructor(e,t,i,r){if(super(),this.editor=e,this.label=t,this._onClick=this._register(new n.Q5),this.onClick=this._onClick.event,this._domNode=(0,l.$)(".floating-click-widget"),this._domNode.style.padding="6px 11px",this._domNode.style.borderRadius="2px",this._domNode.style.cursor="pointer",this._domNode.style.zIndex="1",i){const e=r.lookupKeybinding(i);e&&(this.label+=` (${e.getLabel()})`)}}getId(){return"editor.overlayWidget.floatingClickWidget"}getDomNode(){return this._domNode}getPosition(){return{preference:1}}render(){(0,l.PO)(this._domNode),this._domNode.style.backgroundColor=(0,c.BtC)(c.b7$,(0,c.n_1)(c.cvW)),this._domNode.style.color=(0,c.BtC)(c.j5u,(0,c.n_1)(c.NOs)),this._domNode.style.border=`1px solid ${(0,c.n_1)(c.lRK)}`,(0,l.R3)(this._domNode,(0,l.$)("")).textContent=this.label,this.onclick(this._domNode,(e=>this._onClick.fire())),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}};f=(0,r.g)([(0,r.f)(3,a.d)],f);let b=class extends d.JT{static{this.ID="editor.contrib.floatingClickMenu"}constructor(e,t,i,r){if(super(),!(e instanceof w.Hn)){const s=i.createMenu(p.eH.EditorContent,r),o=new d.SL,n=()=>{if(o.clear(),!e.hasModel()||e.getOption(60))return;const i=[];if((0,k.vr)(s,{renderShortTitle:!0,shouldForwardArgs:!0},i),0===i.length)return;const[r]=i,n=t.createInstance(f,e,r.label,r.id);o.add(n),o.add(n.onClick((()=>r.run(e.getModel().uri)))),n.render()};this._store.add(s),this._store.add(o),this._store.add(s.onDidChange(n)),n()}}};b=(0,r.g)([(0,r.f)(1,h.TG),(0,r.f)(2,p.co),(0,r.f)(3,_.i6)],b)},49594:(e,t,i)=>{i.d(t,{G:()=>s,s:()=>r});var r,s,o=i(93983);!function(e){e.MARKERS_CONTAINER_ID="workbench.panel.markers",e.MARKERS_VIEW_ID="workbench.panel.markers.view",e.MARKERS_VIEW_STORAGE_ID="workbench.panel.markers",e.MARKER_COPY_ACTION_ID="problems.action.copy",e.MARKER_COPY_MESSAGE_ACTION_ID="problems.action.copyMessage",e.RELATED_INFORMATION_COPY_MESSAGE_ACTION_ID="problems.action.copyRelatedInformationMessage",e.FOCUS_PROBLEMS_FROM_FILTER="problems.action.focusProblemsFromFilter",e.MARKERS_VIEW_FOCUS_FILTER="problems.action.focusFilter",e.MARKERS_VIEW_CLEAR_FILTER_TEXT="problems.action.clearFilterText",e.MARKERS_VIEW_SHOW_MULTILINE_MESSAGE="problems.action.showMultilineMessage",e.MARKERS_VIEW_SHOW_SINGLELINE_MESSAGE="problems.action.showSinglelineMessage",e.MARKER_OPEN_ACTION_ID="problems.action.open",e.MARKER_OPEN_SIDE_ACTION_ID="problems.action.openToSide",e.MARKER_SHOW_PANEL_ID="workbench.action.showErrorsWarnings",e.MARKER_SHOW_QUICK_FIX="problems.action.showQuickFixes",e.TOGGLE_MARKERS_VIEW_ACTION_ID="workbench.actions.view.toggleProblems"}(r||(r={})),function(e){e.MarkersViewModeContextKey=new o.uy("problemsViewMode","tree"),e.MarkersTreeVisibilityContextKey=new o.uy("problemsVisibility",!1),e.MarkerFocusContextKey=new o.uy("problemFocus",!1),e.MarkerViewFilterFocusContextKey=new o.uy("problemsFilterFocus",!1),e.RelatedInformationFocusContextKey=new o.uy("relatedInformationFocus",!1),e.ShowErrorsFilterContextKey=new o.uy("problems.filter.errors",!0),e.ShowWarningsFilterContextKey=new o.uy("problems.filter.warnings",!0),e.ShowInfoFilterContextKey=new o.uy("problems.filter.info",!0),e.ShowActiveFileFilterContextKey=new o.uy("problems.filter.activeFile",!1),e.ShowExcludedFilesFilterContextKey=new o.uy("problems.filter.excludedFiles",!0)}(s||(s={}))}}]);
//# sourceMappingURL=335.bundle.js.map