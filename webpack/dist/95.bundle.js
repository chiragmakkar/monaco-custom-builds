"use strict";(self.webpackChunkmonaco_custom_bundle=self.webpackChunkmonaco_custom_bundle||[]).push([[95],{3095:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Be,updateUserKeybindings:()=>je}),i(29769);var n=i(77364),o=i(97108),r=i(80855),s=i(63580),a=i(16268),d=i(10161),c=i(65321),u=i(59069),h=i(15393),l=i(4669),y=i(61683),m=i(8030),p=i(22258),g=i(8313);class f{static _readModifiers(e){e=e.toLowerCase().trim();let t,i,n=!1,o=!1,r=!1,s=!1;do{t=!1,/^ctrl(\+|\-)/.test(e)&&(n=!0,e=e.substr(5),t=!0),/^shift(\+|\-)/.test(e)&&(o=!0,e=e.substr(6),t=!0),/^alt(\+|\-)/.test(e)&&(r=!0,e=e.substr(4),t=!0),/^meta(\+|\-)/.test(e)&&(s=!0,e=e.substr(5),t=!0),/^win(\+|\-)/.test(e)&&(s=!0,e=e.substr(4),t=!0),/^cmd(\+|\-)/.test(e)&&(s=!0,e=e.substr(4),t=!0)}while(t);const a=e.indexOf(" ");return a>0?(i=e.substring(0,a),e=e.substring(a)):(i=e,e=""),{remains:e,ctrl:n,shift:o,alt:r,meta:s,key:i}}static parseChord(e){const t=this._readModifiers(e),i=t.key.match(/^\[([^\]]+)\]$/);if(i){const e=i[1],n=p.Z5.lowerCaseToEnum(e);return[new g.ae(t.ctrl,t.shift,t.alt,t.meta,n),t.remains]}const n=p.kL.fromUserSettings(t.key);return[new g.$M(t.ctrl,t.shift,t.alt,t.meta,n),t.remains]}static parseKeybinding(e){if(!e)return null;const t=[];let i;for(;e.length>0;)[i,e]=this.parseChord(e),t.push(i);return t.length>0?new g.$5(t):null}}var b=i(5976),C=i(36248),_=i(1432),K=i(95935),k=i(84144),v=i(94565),w=i(93983),S=i(75761),x=i(81294),L=i(25244),T=i(38439),I=i(49989),N=i(14923),A=i(75355),M=i(43557),D=i(59422),E=i(89872),P=i(10829),$=i(97295),U=i(26963),H=i(25670),G=i(9488),O=i(12021);const R=[{key:"commandPalette",id:k.eH.CommandPalette,description:(0,s.NC)("menus.commandPalette","The Command Palette"),supportsSubmenus:!1},{key:"touchBar",id:k.eH.TouchBarContext,description:(0,s.NC)("menus.touchBar","The touch bar (macOS only)"),supportsSubmenus:!1},{key:"editor/title",id:k.eH.EditorTitle,description:(0,s.NC)("menus.editorTitle","The editor title menu")},{key:"editor/title/run",id:k.eH.EditorTitleRun,description:(0,s.NC)("menus.editorTitleRun","Run submenu inside the editor title menu")},{key:"editor/context",id:k.eH.EditorContext,description:(0,s.NC)("menus.editorContext","The editor context menu")},{key:"editor/context/copy",id:k.eH.EditorContextCopy,description:(0,s.NC)("menus.editorContextCopyAs","'Copy as' submenu in the editor context menu")},{key:"editor/context/share",id:k.eH.EditorContextShare,description:(0,s.NC)("menus.editorContextShare","'Share' submenu in the editor context menu"),proposed:"contribShareMenu"},{key:"explorer/context",id:k.eH.ExplorerContext,description:(0,s.NC)("menus.explorerContext","The file explorer context menu")},{key:"explorer/context/share",id:k.eH.ExplorerContextShare,description:(0,s.NC)("menus.explorerContextShare","'Share' submenu in the file explorer context menu"),proposed:"contribShareMenu"},{key:"editor/title/context",id:k.eH.EditorTitleContext,description:(0,s.NC)("menus.editorTabContext","The editor tabs context menu")},{key:"editor/title/context/share",id:k.eH.EditorTitleContextShare,description:(0,s.NC)("menus.editorTitleContextShare","'Share' submenu inside the editor title context menu"),proposed:"contribShareMenu"},{key:"debug/callstack/context",id:k.eH.DebugCallStackContext,description:(0,s.NC)("menus.debugCallstackContext","The debug callstack view context menu")},{key:"debug/variables/context",id:k.eH.DebugVariablesContext,description:(0,s.NC)("menus.debugVariablesContext","The debug variables view context menu")},{key:"debug/toolBar",id:k.eH.DebugToolBar,description:(0,s.NC)("menus.debugToolBar","The debug toolbar menu")},{key:"menuBar/home",id:k.eH.MenubarHomeMenu,description:(0,s.NC)("menus.home","The home indicator context menu (web only)"),proposed:"contribMenuBarHome",supportsSubmenus:!1},{key:"menuBar/edit/copy",id:k.eH.MenubarCopy,description:(0,s.NC)("menus.opy","'Copy as' submenu in the top level Edit menu")},{key:"scm/title",id:k.eH.SCMTitle,description:(0,s.NC)("menus.scmTitle","The Source Control title menu")},{key:"scm/sourceControl",id:k.eH.SCMSourceControl,description:(0,s.NC)("menus.scmSourceControl","The Source Control menu")},{key:"scm/resourceState/context",id:k.eH.SCMResourceContext,description:(0,s.NC)("menus.resourceStateContext","The Source Control resource state context menu")},{key:"scm/resourceFolder/context",id:k.eH.SCMResourceFolderContext,description:(0,s.NC)("menus.resourceFolderContext","The Source Control resource folder context menu")},{key:"scm/resourceGroup/context",id:k.eH.SCMResourceGroupContext,description:(0,s.NC)("menus.resourceGroupContext","The Source Control resource group context menu")},{key:"scm/change/title",id:k.eH.SCMChangeContext,description:(0,s.NC)("menus.changeTitle","The Source Control inline change menu")},{key:"statusBar/remoteIndicator",id:k.eH.StatusBarRemoteIndicatorMenu,description:(0,s.NC)("menus.statusBarRemoteIndicator","The remote indicator menu in the status bar"),supportsSubmenus:!1},{key:"view/title",id:k.eH.ViewTitle,description:(0,s.NC)("view.viewTitle","The contributed view title menu")},{key:"view/item/context",id:k.eH.ViewItemContext,description:(0,s.NC)("view.itemContext","The contributed view item context menu")},{key:"comments/comment/editorActions",id:k.eH.CommentEditorActions,description:(0,s.NC)("commentThread.editorActions","The contributed comment editor actions"),proposed:"contribCommentEditorActionsMenu"},{key:"comments/commentThread/title",id:k.eH.CommentThreadTitle,description:(0,s.NC)("commentThread.title","The contributed comment thread title menu")},{key:"comments/commentThread/context",id:k.eH.CommentThreadActions,description:(0,s.NC)("commentThread.actions","The contributed comment thread context menu, rendered as buttons below the comment editor"),supportsSubmenus:!1},{key:"comments/commentThread/additionalActions",id:k.eH.CommentThreadAdditionalActions,description:(0,s.NC)("commentThread.actions","The contributed comment thread context menu, rendered as buttons below the comment editor"),supportsSubmenus:!1,proposed:"contribCommentThreadAdditionalMenu"},{key:"comments/commentThread/title/context",id:k.eH.CommentThreadTitleContext,description:(0,s.NC)("commentThread.titleContext","The contributed comment thread title's peek context menu, rendered as a right click menu on the comment thread's peek title."),proposed:"contribCommentPeekContext"},{key:"comments/comment/title",id:k.eH.CommentTitle,description:(0,s.NC)("comment.title","The contributed comment title menu")},{key:"comments/comment/context",id:k.eH.CommentActions,description:(0,s.NC)("comment.actions","The contributed comment context menu, rendered as buttons below the comment editor"),supportsSubmenus:!1},{key:"comments/commentThread/comment/context",id:k.eH.CommentThreadCommentContext,description:(0,s.NC)("comment.commentContext","The contributed comment context menu, rendered as a right click menu on the an individual comment in the comment thread's peek view."),proposed:"contribCommentPeekContext"},{key:"notebook/toolbar",id:k.eH.NotebookToolbar,description:(0,s.NC)("notebook.toolbar","The contributed notebook toolbar menu")},{key:"notebook/kernelSource",id:k.eH.NotebookKernelSource,description:(0,s.NC)("notebook.kernelSource","The contributed notebook kernel sources menu"),proposed:"notebookKernelSource"},{key:"notebook/cell/title",id:k.eH.NotebookCellTitle,description:(0,s.NC)("notebook.cell.title","The contributed notebook cell title menu")},{key:"notebook/cell/execute",id:k.eH.NotebookCellExecute,description:(0,s.NC)("notebook.cell.execute","The contributed notebook cell execution menu")},{key:"interactive/toolbar",id:k.eH.InteractiveToolbar,description:(0,s.NC)("interactive.toolbar","The contributed interactive toolbar menu")},{key:"interactive/cell/title",id:k.eH.InteractiveCellTitle,description:(0,s.NC)("interactive.cell.title","The contributed interactive cell title menu")},{key:"testing/item/context",id:k.eH.TestItem,description:(0,s.NC)("testing.item.context","The contributed test item menu")},{key:"testing/item/gutter",id:k.eH.TestItemGutter,description:(0,s.NC)("testing.item.gutter.title","The menu for a gutter decoration for a test item")},{key:"extension/context",id:k.eH.ExtensionContext,description:(0,s.NC)("menus.extensionContext","The extension context menu")},{key:"timeline/title",id:k.eH.TimelineTitle,description:(0,s.NC)("view.timelineTitle","The Timeline view title menu")},{key:"timeline/item/context",id:k.eH.TimelineItemContext,description:(0,s.NC)("view.timelineContext","The Timeline view item context menu")},{key:"ports/item/context",id:k.eH.TunnelContext,description:(0,s.NC)("view.tunnelContext","The Ports view item context menu")},{key:"ports/item/origin/inline",id:k.eH.TunnelOriginInline,description:(0,s.NC)("view.tunnelOriginInline","The Ports view item origin inline menu")},{key:"ports/item/port/inline",id:k.eH.TunnelPortInline,description:(0,s.NC)("view.tunnelPortInline","The Ports view item port inline menu")},{key:"file/newFile",id:k.eH.NewFile,description:(0,s.NC)("file.newFile","The 'New File...' quick pick, shown on welcome page and File menu."),supportsSubmenus:!1},{key:"webview/context",id:k.eH.WebviewContext,description:(0,s.NC)("webview.context","The webview context menu")},{key:"file/share",id:k.eH.MenubarShare,description:(0,s.NC)("menus.share","Share submenu shown in the top level File menu."),proposed:"contribShareMenu"},{key:"editor/inlineCompletions/actions",id:k.eH.InlineCompletionsActions,description:(0,s.NC)("inlineCompletions.actions","The actions shown when hovering on an inline completion"),supportsSubmenus:!1,proposed:"inlineCompletionsAdditions"},{key:"editor/content",id:k.eH.EditorContent,description:(0,s.NC)("merge.toolbar","The prominent button in an editor, overlays its content"),proposed:"contribEditorContentMenu"},{key:"editor/lineNumber/context",id:k.eH.EditorLineNumberContext,description:(0,s.NC)("editorLineNumberContext","The contributed editor line number context menu")},{key:"mergeEditor/result/title",id:k.eH.MergeInputResultToolbar,description:(0,s.NC)("menus.mergeEditorResult","The result toolbar of the merge editor"),proposed:"contribMergeEditorMenus"}];var j;!function(e){function t(e){return"string"==typeof e.command}function i(e,t){return"string"!=typeof e.command?(t.error((0,s.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","command")),!1):e.alt&&"string"!=typeof e.alt?(t.error((0,s.NC)("optstring","property `{0}` can be omitted or must be of type `string`","alt")),!1):e.when&&"string"!=typeof e.when?(t.error((0,s.NC)("optstring","property `{0}` can be omitted or must be of type `string`","when")),!1):!e.group||"string"==typeof e.group||(t.error((0,s.NC)("optstring","property `{0}` can be omitted or must be of type `string`","group")),!1)}function n(e,t){return"string"!=typeof e.submenu?(t.error((0,s.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","submenu")),!1):e.when&&"string"!=typeof e.when?(t.error((0,s.NC)("optstring","property `{0}` can be omitted or must be of type `string`","when")),!1):!e.group||"string"==typeof e.group||(t.error((0,s.NC)("optstring","property `{0}` can be omitted or must be of type `string`","group")),!1)}e.isMenuItem=t,e.isValidMenuItem=i,e.isValidSubmenuItem=n,e.isValidItems=function(e,o){if(!Array.isArray(e))return o.error((0,s.NC)("requirearray","submenu items must be an array")),!1;for(const r of e)if(t(r)){if(!i(r,o))return!1}else if(!n(r,o))return!1;return!0},e.isValidSubmenu=function(e,t){return"object"!=typeof e?(t.error((0,s.NC)("require","submenu items must be an object")),!1):"string"!=typeof e.id?(t.error((0,s.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","id")),!1):"string"==typeof e.label||(t.error((0,s.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","label")),!1)};const o={type:"object",required:["command"],properties:{command:{description:(0,s.NC)("vscode.extension.contributes.menuItem.command","Identifier of the command to execute. The command must be declared in the 'commands'-section"),type:"string"},alt:{description:(0,s.NC)("vscode.extension.contributes.menuItem.alt","Identifier of an alternative command to execute. The command must be declared in the 'commands'-section"),type:"string"},when:{description:(0,s.NC)("vscode.extension.contributes.menuItem.when","Condition which must be true to show this item"),type:"string"},group:{description:(0,s.NC)("vscode.extension.contributes.menuItem.group","Group into which this item belongs"),type:"string"}}},r={type:"object",required:["submenu"],properties:{submenu:{description:(0,s.NC)("vscode.extension.contributes.menuItem.submenu","Identifier of the submenu to display in this item."),type:"string"},when:{description:(0,s.NC)("vscode.extension.contributes.menuItem.when","Condition which must be true to show this item"),type:"string"},group:{description:(0,s.NC)("vscode.extension.contributes.menuItem.group","Group into which this item belongs"),type:"string"}}},a={type:"object",required:["id","label"],properties:{id:{description:(0,s.NC)("vscode.extension.contributes.submenu.id","Identifier of the menu to display as a submenu."),type:"string"},label:{description:(0,s.NC)("vscode.extension.contributes.submenu.label","The label of the menu item which leads to this submenu."),type:"string"},icon:{description:(0,s.NC)({key:"vscode.extension.contributes.submenu.icon",comment:["do not translate or change `\\$(zap)`, \\ in front of $ is important."]},"(Optional) Icon which is used to represent the submenu in the UI. Either a file path, an object with file paths for dark and light themes, or a theme icon references, like `\\$(zap)`"),anyOf:[{type:"string"},{type:"object",properties:{light:{description:(0,s.NC)("vscode.extension.contributes.submenu.icon.light","Icon path when a light theme is used"),type:"string"},dark:{description:(0,s.NC)("vscode.extension.contributes.submenu.icon.dark","Icon path when a dark theme is used"),type:"string"}}}]}}};function d(e,t,i){return void 0===e?(t.error((0,s.NC)("requireStringOrObject","property `{0}` is mandatory and must be of type `string` or `object`",i)),!1):"string"==typeof e&&(0,$.m5)(e)?(t.error((0,s.NC)("requirestring","property `{0}` is mandatory and must be of type `string`",i)),!1):"string"==typeof e||!(0,$.m5)(e.original)&&!(0,$.m5)(e.value)||(t.error((0,s.NC)("requirestrings","properties `{0}` and `{1}` are mandatory and must be of type `string`",`${i}.value`,`${i}.original`)),!1)}e.menusContribution={description:(0,s.NC)("vscode.extension.contributes.menus","Contributes menu items to the editor"),type:"object",properties:(0,G.Kz)(R,(e=>e.key),(e=>({markdownDescription:e.proposed?(0,s.NC)("proposed",'Proposed API, requires `enabledApiProposal: ["{0}"]` - {1}',e.proposed,e.description):e.description,type:"array",items:!1===e.supportsSubmenus?o:{oneOf:[o,r]}}))),additionalProperties:{description:"Submenu",type:"array",items:{oneOf:[o,r]}}},e.submenusContribution={description:(0,s.NC)("vscode.extension.contributes.submenus","Contributes submenu items to the editor"),type:"array",items:a},e.isValidCommand=function(e,t){return e?(0,$.m5)(e.command)?(t.error((0,s.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","command")),!1):!(!d(e.title,t,"title")||e.shortTitle&&!d(e.shortTitle,t,"shortTitle")||(e.enablement&&"string"!=typeof e.enablement?(t.error((0,s.NC)("optstring","property `{0}` can be omitted or must be of type `string`","precondition")),1):e.category&&!d(e.category,t,"category")||!function(e,t){return void 0===e||("string"==typeof e||("string"==typeof e.dark&&"string"==typeof e.light||(t.error((0,s.NC)("opticon","property `icon` can be omitted or must be either a string or a literal like `{dark, light}`")),!1)))}(e.icon,t))):(t.error((0,s.NC)("nonempty","expected non-empty value.")),!1)};const c={type:"object",required:["command","title"],properties:{command:{description:(0,s.NC)("vscode.extension.contributes.commandType.command","Identifier of the command to execute"),type:"string"},title:{description:(0,s.NC)("vscode.extension.contributes.commandType.title","Title by which the command is represented in the UI"),type:"string"},shortTitle:{markdownDescription:(0,s.NC)("vscode.extension.contributes.commandType.shortTitle","(Optional) Short title by which the command is represented in the UI. Menus pick either `title` or `shortTitle` depending on the context in which they show commands."),type:"string"},category:{description:(0,s.NC)("vscode.extension.contributes.commandType.category","(Optional) Category string by which the command is grouped in the UI"),type:"string"},enablement:{description:(0,s.NC)("vscode.extension.contributes.commandType.precondition","(Optional) Condition which must be true to enable the command in the UI (menu and keybindings). Does not prevent executing the command by other means, like the `executeCommand`-api."),type:"string"},icon:{description:(0,s.NC)({key:"vscode.extension.contributes.commandType.icon",comment:["do not translate or change `\\$(zap)`, \\ in front of $ is important."]},"(Optional) Icon which is used to represent the command in the UI. Either a file path, an object with file paths for dark and light themes, or a theme icon references, like `\\$(zap)`"),anyOf:[{type:"string"},{type:"object",properties:{light:{description:(0,s.NC)("vscode.extension.contributes.commandType.icon.light","Icon path when a light theme is used"),type:"string"},dark:{description:(0,s.NC)("vscode.extension.contributes.commandType.icon.dark","Icon path when a dark theme is used"),type:"string"}}}]}}};e.commandsContribution={description:(0,s.NC)("vscode.extension.contributes.commands","Contributes commands to the command palette."),oneOf:[c,{type:"array",items:c}]}}(j||(j={}));const F=new b.SL,B=U.ut.registerExtensionPoint({extensionPoint:"commands",jsonSchema:j.commandsContribution,activationEventsGenerator:(e,t)=>{for(const i of e)i.command&&t.push(`onCommand:${i.command}`)}});B.setHandler((e=>{function t(e,t){if(!j.isValidCommand(e,t.collector))return;const{icon:i,enablement:n,category:o,title:r,shortTitle:a,command:d}=e;let c;i&&(c="string"==typeof i?H.kS.fromString(i)??{dark:K.Vo(t.description.extensionLocation,i),light:K.Vo(t.description.extensionLocation,i)}:{dark:K.Vo(t.description.extensionLocation,i.dark),light:K.Vo(t.description.extensionLocation,i.light)});const u=k.BH.getCommand(d);u&&(u.source?t.collector.info((0,s.NC)("dup1","Command `{0}` already registered by {1} ({2})",e.command,u.source.title,u.source.id)):t.collector.info((0,s.NC)("dup0","Command `{0}` already registered",e.command))),F.add(k.BH.addCommand({id:d,title:r,source:{id:t.description.identifier.value,title:t.description.displayName??t.description.name},shortTitle:a,tooltip:r,category:o,precondition:w.Ao.deserialize(n),icon:c}))}F.clear();for(const i of e){const{value:e}=i;if(Array.isArray(e))for(const n of e)t(n,i);else t(e,i)}}));const q=new Map,V=U.ut.registerExtensionPoint({extensionPoint:"submenus",jsonSchema:j.submenusContribution});V.setHandler((e=>{q.clear();for(const t of e){const{value:e,collector:i}=t;for(const[,n]of Object.entries(e)){if(!j.isValidSubmenu(n,i))continue;if(!n.id){i.warn((0,s.NC)("submenuId.invalid.id","`{0}` is not a valid submenu identifier",n.id));continue}if(q.has(n.id)){i.info((0,s.NC)("submenuId.duplicate.id","The `{0}` submenu was already previously registered.",n.id));continue}if(!n.label){i.warn((0,s.NC)("submenuId.invalid.label","`{0}` is not a valid submenu label",n.label));continue}let e;n.icon&&(e="string"==typeof n.icon?H.kS.fromString(n.icon)||{dark:K.Vo(t.description.extensionLocation,n.icon)}:{dark:K.Vo(t.description.extensionLocation,n.icon.dark),light:K.Vo(t.description.extensionLocation,n.icon.light)});const o={id:k.eH.for(`api:${n.id}`),label:n.label,icon:e};q.set(n.id,o)}}}));const z=new Map(R.map((e=>[e.key,e]))),W=new b.SL,J=new Map;U.ut.registerExtensionPoint({extensionPoint:"menus",jsonSchema:j.menusContribution,deps:[V]}).setHandler((e=>{W.clear(),J.clear();for(const t of e){const{value:e,collector:i}=t;for(const n of Object.entries(e)){if(!j.isValidItems(n[1],i))continue;let e=z.get(n[0]);if(!e){const t=q.get(n[0]);t&&(e={key:n[0],id:t.id,description:""})}if(e)if(!e.proposed||(0,O.$x)(t.description,e.proposed))for(const t of n[1]){let o;if(j.isMenuItem(t)){const e=k.BH.getCommand(t.command),n=t.alt&&k.BH.getCommand(t.alt)||void 0;if(!e){i.error((0,s.NC)("missing.command","Menu item references a command `{0}` which is not defined in the 'commands' section.",t.command));continue}t.alt&&!n&&i.warn((0,s.NC)("missing.altCommand","Menu item references an alt-command `{0}` which is not defined in the 'commands' section.",t.alt)),t.command===t.alt&&i.info((0,s.NC)("dupe.command","Menu item references the same command as default and alt-command")),o={command:e,alt:n,group:void 0,order:void 0,when:void 0}}else{if(!1===e.supportsSubmenus){i.error((0,s.NC)("unsupported.submenureference","Menu item references a submenu for a menu which doesn't have submenu support."));continue}const r=q.get(t.submenu);if(!r){i.error((0,s.NC)("missing.submenu","Menu item references a submenu `{0}` which is not defined in the 'submenus' section.",t.submenu));continue}let a=J.get(e.id.id);if(a||(a=new Set,J.set(e.id.id,a)),a.has(r.id.id)){i.warn((0,s.NC)("submenuItem.duplicate","The `{0}` submenu was already contributed to the `{1}` menu.",t.submenu,n[0]));continue}a.add(r.id.id),o={submenu:r.id,icon:r.icon,title:r.label,group:void 0,order:void 0,when:void 0}}if(t.group){const e=t.group.lastIndexOf("@");e>0?(o.group=t.group.substr(0,e),o.order=Number(t.group.substr(e+1))||void 0):o.group=t.group}o.when=w.Ao.deserialize(t.when),W.add(k.BH.appendMenuItem(e.id,o))}else i.error((0,s.NC)("proposedAPI.invalid","{0} is a proposed menu identifier. It requires 'package.json#enabledApiProposals: [\"{1}\"]' and is only available when running out of dev or with the following command line switch: --enable-proposed-api {2}",n[0],e.proposed,t.description.identifier.value))}}}));var Y=i(85526),Z=i(66135);class Q{static writeKeybindingItem(e,t){if(!t.resolvedKeybinding)return;const i=JSON.stringify(t.resolvedKeybinding.getUserSettingsLabel());var n;e.write(`{ "key": ${n=i+",",n.length<25?n+new Array(25-n.length).join(" "):n} "command": `);const o=t.when?JSON.stringify(t.when.serialize()):"",r=JSON.stringify(t.command);o.length>0?(e.write(`${r},`),e.writeLine(),e.write(`                                     "when": ${o}`)):e.write(`${r}`),t.commandArgs&&(e.write(","),e.writeLine(),e.write(`                                     "args": ${JSON.stringify(t.commandArgs)}`)),e.write(" }")}static readUserKeybindingItem(e){const t="key"in e&&"string"==typeof e.key?f.parseKeybinding(e.key):null,i="when"in e&&"string"==typeof e.when?w.Ao.deserialize(e.when):void 0;return{keybinding:t,command:"command"in e&&"string"==typeof e.command?e.command:null,commandArgs:"args"in e&&void 0!==e.args?e.args:void 0,when:i,_sourceKey:"key"in e&&"string"==typeof e.key?e.key:void 0}}}class X{constructor(){this._lines=[],this._currentLine=""}write(e){this._currentLine+=e}writeLine(e=""){this._lines.push(this._currentLine+e),this._currentLine=""}toString(){return this.writeLine(),this._lines.join("\n")}}var ee=i(49452),te=i(48205);const ie={type:"object",default:{command:"",key:""},properties:{command:{description:s.NC("vscode.extension.contributes.keybindings.command","Identifier of the command to run when keybinding is triggered."),type:"string"},args:{description:s.NC("vscode.extension.contributes.keybindings.args","Arguments to pass to the command to execute.")},key:{description:s.NC("vscode.extension.contributes.keybindings.key","Key or key sequence (separate keys with plus-sign and sequences with space, e.g. Ctrl+O and Ctrl+L L for a chord)."),type:"string"},mac:{description:s.NC("vscode.extension.contributes.keybindings.mac","Mac specific key or key sequence."),type:"string"},linux:{description:s.NC("vscode.extension.contributes.keybindings.linux","Linux specific key or key sequence."),type:"string"},win:{description:s.NC("vscode.extension.contributes.keybindings.win","Windows specific key or key sequence."),type:"string"},when:{description:s.NC("vscode.extension.contributes.keybindings.when","Condition when the key is active."),type:"string"}}},ne=U.ut.registerExtensionPoint({extensionPoint:"keybindings",deps:[B],jsonSchema:{description:s.NC("vscode.extension.contributes.keybindings","Contributes keybindings."),oneOf:[ie,{type:"array",items:ie}]}}),oe=[90,91,92,93,95,96,97,98,99,100,101,102,103,104,105],re=new Map;re.set(95,22),re.set(96,23),re.set(97,24),re.set(98,25),re.set(99,26),re.set(100,27),re.set(101,28),re.set(102,29),re.set(103,30),re.set(104,21);let se=class e extends L.F{constructor(e,t,i,n,o,r,s,h,l,y,m){super(e,t,i,n,y),this.hostService=r,this.keyboardLayoutService=m,this._contributions=[],this.isComposingGlobalContextKey=e.createKey("isComposing",!1),this.kbsJsonSchema=new de,this.updateKeybindingsJsonSchema(),this._keyboardMapper=this.keyboardLayoutService.getKeyboardMapper(),this.keyboardLayoutService.onDidChangeKeyboardLayout((()=>{this._keyboardMapper=this.keyboardLayoutService.getKeyboardMapper(),this.updateResolver()})),this._cachedResolver=null,this.userKeybindings=this._register(new ae(o,l,h,y)),this.userKeybindings.initialize().then((()=>{this.userKeybindings.keybindings.length&&this.updateResolver()})),this._register(this.userKeybindings.onDidChange((()=>{y.debug("User keybindings changed"),this.updateResolver()}))),ne.setHandler((e=>{const t=[];for(const i of e)this._handleKeybindingsExtensionPointUser(i.description.identifier,i.description.isBuiltin,i.value,i.collector,t);I.W.setExtensionKeybindings(t),this.updateResolver()})),this.updateKeybindingsJsonSchema(),this._register(s.onDidRegisterExtensions((()=>this.updateKeybindingsJsonSchema()))),this._register(c.nm(window,c.tw.KEY_DOWN,(e=>{this.isComposingGlobalContextKey.set(e.isComposing);const t=new u.y1(e);this._log(`/ Received  keydown event - ${(0,u.oG)(e)}`),this._log(`| Converted keydown event - ${(0,u.xr)(t)}`),this._dispatch(t,t.target)&&t.preventDefault(),this.isComposingGlobalContextKey.set(!1)}))),this._register(c.nm(window,c.tw.KEY_UP,(e=>{this.isComposingGlobalContextKey.set(e.isComposing);const t=new u.y1(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault(),this.isComposingGlobalContextKey.set(!1)}))),this._register(a.Km((()=>{const e=navigator.keyboard;2!==d.D.keyboard&&(a.rm()?e?.lock(["Escape"]):e?.unlock(),this._cachedResolver=null,this._onDidUpdateKeybindings.fire())})))}registerSchemaContribution(e){this._contributions.push(e),e.onDidChange&&this._register(e.onDidChange((()=>this.updateKeybindingsJsonSchema()))),this.updateKeybindingsJsonSchema()}updateKeybindingsJsonSchema(){this.kbsJsonSchema.updateSchema(this._contributions.flatMap((e=>e.getSchemaAdditions())))}_printKeybinding(e){return m.r6.toLabel(_.OS,e.chords,(e=>e instanceof g.$M?p.kL.toString(e.keyCode):p.Z5.toString(e.scanCode)))||"[null]"}_printResolvedKeybinding(e){return e.getDispatchChords().map((e=>e||"[null]")).join(" ")}_printResolvedKeybindings(e,t,i){const n=`${t.padStart(35," ")} => `;if(0!==i.length)for(const t of i)e.push(`${n}${this._printResolvedKeybinding(t).padStart(35," ")}`);else e.push(`${n}${"[NO BINDING]".padStart(35," ")}`)}_dumpResolveKeybindingDebugInfo(){const e=new Set,t=[];t.push("Default Resolved Keybindings (unique only):");for(const i of I.W.getDefaultKeybindings()){if(!i.keybinding)continue;const n=this._printKeybinding(i.keybinding);if(e.has(n))continue;e.add(n);const o=this._keyboardMapper.resolveKeybinding(i.keybinding);this._printResolvedKeybindings(t,n,o)}t.push("User Resolved Keybindings (unique only):");for(const i of this.userKeybindings.keybindings){if(!i.keybinding)continue;const n=i._sourceKey??"Impossible: missing source key, but has keybinding";if(e.has(n))continue;e.add(n);const o=this._keyboardMapper.resolveKeybinding(i.keybinding);this._printResolvedKeybindings(t,n,o)}return t.join("\n")}_dumpDebugInfo(){const e=JSON.stringify(this.keyboardLayoutService.getCurrentKeyboardLayout(),null,"\t"),t=this._keyboardMapper.dumpDebugInfo();return`Layout info:\n${e}\n\n${this._dumpResolveKeybindingDebugInfo()}\n\n${t}\n\nRaw mapping:\n${JSON.stringify(this.keyboardLayoutService.getRawKeyboardMapping(),null,"\t")}`}_dumpDebugInfoJSON(){const e={layout:this.keyboardLayoutService.getCurrentKeyboardLayout(),rawMapping:this.keyboardLayoutService.getRawKeyboardMapping()};return JSON.stringify(e,null,"\t")}customKeybindingsCount(){return this.userKeybindings.keybindings.length}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}getUserKeybindingItems(){return this._resolveUserKeybindingItems(this.userKeybindings.keybindings,!1)}_getResolver(){if(!this._cachedResolver){const e=this._resolveKeybindingItems(I.W.getDefaultKeybindings(),!0),t=this.getUserKeybindingItems();this._cachedResolver=new T.s(e,t,(e=>this._log(e)))}return this._cachedResolver}_documentHasFocus(){return this.hostService.hasFocus}_resolveKeybindingItems(e,t){const i=[];let n=0;for(const o of e){const e=o.when||void 0,r=o.keybinding;if(r){if(this._assertBrowserConflicts(r))continue;const s=this._keyboardMapper.resolveKeybinding(r);for(let r=s.length-1;r>=0;r--){const a=s[r];i[n++]=new N.M(a,o.command,o.commandArgs,e,t,o.extensionId,o.isBuiltinExtension)}}else i[n++]=new N.M(void 0,o.command,o.commandArgs,e,t,o.extensionId,o.isBuiltinExtension)}return i}_resolveUserKeybindingItems(e,t){const i=[];let n=0;for(const o of e){const e=o.when||void 0;if(o.keybinding){const r=this._keyboardMapper.resolveKeybinding(o.keybinding);for(const s of r)i[n++]=new N.M(s,o.command,o.commandArgs,e,t,null,!1)}else i[n++]=new N.M(void 0,o.command,o.commandArgs,e,t,null,!1)}return i}_assertBrowserConflicts(e){if(0===d.D.keyboard)return!1;if(1===d.D.keyboard&&a.rm())return!1;for(const t of e.chords){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey))continue;const e=3584;let i=0;if(t.metaKey&&(i|=2048),t.shiftKey&&(i|=1024),t.altKey&&(i|=512),t.ctrlKey&&2===_.OS&&(i|=256),2560==(i&e)){if(t instanceof g.ae&&(86===t.scanCode||85===t.scanCode))return!0;if(t instanceof g.$M&&(15===t.keyCode||17===t.keyCode))return!0}if(2048==(i&e)){if(t instanceof g.ae&&t.scanCode>=36&&t.scanCode<=45)return!0;if(t instanceof g.$M&&t.keyCode>=21&&t.keyCode<=30)return!0}}return!1}resolveKeybinding(e){return this._keyboardMapper.resolveKeybinding(e)}resolveKeyboardEvent(e){return this.keyboardLayoutService.validateCurrentKeyboardMapping(e),this._keyboardMapper.resolveKeyboardEvent(e)}resolveUserBinding(e){const t=f.parseKeybinding(e);return t?this._keyboardMapper.resolveKeybinding(t):[]}_handleKeybindingsExtensionPointUser(e,t,i,n,o){if(Array.isArray(i))for(let r=0,s=i.length;r<s;r++)this._handleKeybinding(e,t,r+1,i[r],n,o);else this._handleKeybinding(e,t,1,i,n,o)}_handleKeybinding(e,t,i,n,o,r){const a=[];if(function(e,t){return e?"string"!=typeof e.command?(t.push(s.NC("requirestring","property `{0}` is mandatory and must be of type `string`","command")),!1):e.key&&"string"!=typeof e.key?(t.push(s.NC("optstring","property `{0}` can be omitted or must be of type `string`","key")),!1):e.when&&"string"!=typeof e.when?(t.push(s.NC("optstring","property `{0}` can be omitted or must be of type `string`","when")),!1):e.mac&&"string"!=typeof e.mac?(t.push(s.NC("optstring","property `{0}` can be omitted or must be of type `string`","mac")),!1):e.linux&&"string"!=typeof e.linux?(t.push(s.NC("optstring","property `{0}` can be omitted or must be of type `string`","linux")),!1):!e.win||"string"==typeof e.win||(t.push(s.NC("optstring","property `{0}` can be omitted or must be of type `string`","win")),!1):(t.push(s.NC("nonempty","expected non-empty value.")),!1)}(n,a)){const o=this._asCommandRule(e,t,i++,n);o&&r.push(o)}a.length>0&&o.error(s.NC("invalid.keybindings","Invalid `contributes.{0}`: {1}",ne.name,a.join("\n")))}static bindToCurrentPlatform(e,t,i,n){if(1===_.OS&&n){if(n)return n}else if(2===_.OS){if(t)return t}else if(i)return i;return e}_asCommandRule(t,i,n,o){const{command:r,args:s,when:a,key:d,mac:c,linux:u,win:h}=o,l=e.bindToCurrentPlatform(d,c,u,h);if(!l)return;let y;y=i?300+n:400+n;const m=k.BH.getCommand(r),p=m&&m.precondition;let g;return a&&p?g=w.Ao.and(p,w.Ao.deserialize(a)):a?g=w.Ao.deserialize(a):p&&(g=p),{id:r,args:s,when:g,weight:y,keybinding:f.parseKeybinding(l),extensionId:t.value,isBuiltinExtension:i}}getDefaultKeybindingsContent(){const t=this._getResolver(),i=t.getDefaultKeybindings(),n=t.getDefaultBoundCommands();return e._getDefaultKeybindings(i)+"\n\n"+e._getAllCommandsAsComment(n)}static _getDefaultKeybindings(e){const t=new X;t.writeLine("[");const i=e.length-1;return e.forEach(((e,n)=>{Q.writeKeybindingItem(t,e),n!==i?t.writeLine(","):t.writeLine()})),t.writeLine("]"),t.toString()}static _getAllCommandsAsComment(e){const t=(0,Z.g)(e).sort().join("\n// - ");return"// "+s.NC("unboundCommands","Here are other available commands: ")+"\n// - "+t}mightProducePrintableCharacter(e){if(e.ctrlKey||e.metaKey||e.altKey)return!1;const t=p.Z5.toEnum(e.code);if(-1!==oe.indexOf(t))return e.keyCode===p.Vd[t]||!(!_.dz||e.keyCode!==re.get(t));if(-1!==p.Vd[t])return!1;const i=this.keyboardLayoutService.getRawKeyboardMapping();if(!i)return!1;const n=i[e.code];return!!n&&!(!n.value||/\s/.test(n.value))}};se=(0,r.g)([(0,r.f)(0,w.i6),(0,r.f)(1,v.H),(0,r.f)(2,P.bU),(0,r.f)(3,D.lT),(0,r.f)(4,ee.AP),(0,r.f)(5,Y.$),(0,r.f)(6,O.QS),(0,r.f)(7,S.sn),(0,r.f)(8,te.v),(0,r.f)(9,M.VZ),(0,r.f)(10,A.o)],se);class ae extends b.JT{get keybindings(){return this._keybindings}constructor(e,t,i,n){super(),this.userDataProfileService=e,this.uriIdentityService=t,this.fileService=i,this._rawKeybindings=[],this._keybindings=[],this.watchDisposables=this._register(new b.SL),this._onDidChange=this._register(new l.Q5),this.onDidChange=this._onDidChange.event,this.watch(),this.reloadConfigurationScheduler=this._register(new h.pY((()=>this.reload().then((e=>{e&&this._onDidChange.fire()}))),50)),this._register(l.ju.filter(this.fileService.onDidFilesChange,(e=>e.contains(this.userDataProfileService.currentProfile.keybindingsResource)))((()=>{n.debug("Keybindings file changed"),this.reloadConfigurationScheduler.schedule()}))),this._register(this.fileService.onDidRunOperation((e=>{4===e.operation&&e.resource.toString()===this.userDataProfileService.currentProfile.keybindingsResource.toString()&&(n.debug("Keybindings file written"),this.reloadConfigurationScheduler.schedule())}))),this._register(e.onDidChangeCurrentProfile((e=>{this.uriIdentityService.extUri.isEqual(e.previous.keybindingsResource,e.profile.keybindingsResource)||e.join(this.whenCurrentProfileChanged())})))}async whenCurrentProfileChanged(){this.watch(),this.reloadConfigurationScheduler.schedule()}watch(){this.watchDisposables.clear(),this.watchDisposables.add(this.fileService.watch((0,K.XX)(this.userDataProfileService.currentProfile.keybindingsResource))),this.watchDisposables.add(this.fileService.watch(this.userDataProfileService.currentProfile.keybindingsResource))}async initialize(){await this.reload()}async reload(){const e=await this.readUserKeybindings();return!C.fS(this._rawKeybindings,e)&&(this._rawKeybindings=e,this._keybindings=this._rawKeybindings.map((e=>Q.readUserKeybindingItem(e))),!0)}async readUserKeybindings(){try{const e=await this.fileService.readFile(this.userDataProfileService.currentProfile.keybindingsResource),t=(0,y.Qc)(e.value.toString());return Array.isArray(t)?t.filter((e=>e&&"object"==typeof e)):[]}catch(e){return[]}}}class de{static{this.schemaId="vscode://schemas/keybindings"}constructor(){this.commandsSchemas=[],this.commandsEnum=[],this.removalCommandsEnum=[],this.commandsEnumDescriptions=[],this.schema={id:de.schemaId,type:"array",title:s.NC("keybindings.json.title","Keybindings configuration"),allowTrailingCommas:!0,allowComments:!0,definitions:{editorGroupsSchema:{type:"array",items:{type:"object",properties:{groups:{$ref:"#/definitions/editorGroupsSchema",default:[{},{}]},size:{type:"number",default:.5}}}},commandNames:{type:"string",enum:this.commandsEnum,enumDescriptions:this.commandsEnumDescriptions,description:s.NC("keybindings.json.command","Name of the command to execute")},commandType:{anyOf:[{$ref:"#/definitions/commandNames"},{type:"string",enum:this.removalCommandsEnum,enumDescriptions:this.commandsEnumDescriptions,description:s.NC("keybindings.json.removalCommand","Name of the command to remove keyboard shortcut for")},{type:"string"}]},commandsSchemas:{allOf:this.commandsSchemas}},items:{required:["key"],type:"object",defaultSnippets:[{body:{key:"$1",command:"$2",when:"$3"}}],properties:{key:{type:"string",description:s.NC("keybindings.json.key","Key or key sequence (separated by space)")},command:{anyOf:[{if:{type:"array"},then:{not:{type:"array"},errorMessage:s.NC("keybindings.commandsIsArray","Incorrect type. Expected \"{0}\". The field 'command' does not support running multiple commands. Use command 'runCommands' to pass it multiple commands to run.","string")},else:{$ref:"#/definitions/commandType"}},{$ref:"#/definitions/commandType"}]},when:{type:"string",description:s.NC("keybindings.json.when","Condition when the key is active.")},args:{description:s.NC("keybindings.json.args","Arguments to pass to the command to execute.")}},$ref:"#/definitions/commandsSchemas"}},this.schemaRegistry=E.B.as(x.I.JSONContribution),this.schemaRegistry.registerSchema(de.schemaId,this.schema)}updateSchema(e){this.commandsSchemas.length=0,this.commandsEnum.length=0,this.removalCommandsEnum.length=0,this.commandsEnumDescriptions.length=0;const t=new Set,i=(e,i)=>{/^_/.test(e)||t.has(e)||(t.add(e),this.commandsEnum.push(e),this.commandsEnumDescriptions.push(i),this.removalCommandsEnum.push(`-${e}`))},n=v.P.getCommands();for(const[e,t]of n){const n=t.description;if(i(e,n?n.description:void 0),!n||!n.args||1!==n.args.length||!n.args[0].schema)continue;const o=n.args[0].schema,r=void 0!==n.args[0].isOptional?!n.args[0].isOptional:Array.isArray(o.required)&&o.required.length>0,s={if:{required:["command"],properties:{command:{const:e}}},then:{required:[].concat(r?["args"]:[]),properties:{args:o}}};this.commandsSchemas.push(s)}const o=k.BH.getCommands();for(const e of o.keys())i(e);this.commandsSchemas.push(...e),this.schemaRegistry.notifySchemaChanged(de.schemaId)}}var ce=i(91847),ue=i(53060),he=i(35838);class le{constructor(e,t,i,n){this.layout=e,this.secondaryLayouts=t,this.mapping=function(e){const t=e,i={};for(const e in t){const n=t[e];if(n.length){const t=n[0],o=n[1],r=n[2],s=n[3],a=Number(n[4]),d=6===n.length?n[5]:void 0;i[e]={value:t,vkey:d,withShift:o,withAltGr:r,withShiftAltGr:s,valueIsDeadKey:(1&a)>0,withShiftIsDeadKey:(2&a)>0,withAltGrIsDeadKey:(4&a)>0,withShiftAltGrIsDeadKey:(8&a)>0}}else i[e]={value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1}}return i}(i),this.isUserKeyboardLayout=!!n,this.layout.isUserKeyboardLayout=!!n}static createKeyboardLayoutFromDebugInfo(e,t,i){const n=new le(e,[],{},!0);return n.mapping=t,n}update(e){this.layout=e.layout,this.secondaryLayouts=e.secondaryLayouts,this.mapping=e.mapping,this.isUserKeyboardLayout=e.isUserKeyboardLayout,this.layout.isUserKeyboardLayout=e.isUserKeyboardLayout}getScore(e){let t=0;for(const i in e){if(_.ED&&("Backslash"===i||"KeyQ"===i))continue;if(_.IJ&&("Backspace"===i||"Escape"===i))continue;const n=this.mapping[i];void 0===n&&(t-=1);const o=e[i];n&&o&&n.value!==o.value&&(t-=1)}return t}equal(e){return this.isUserKeyboardLayout===e.isUserKeyboardLayout&&(0,A.j)(this.layout)===(0,A.j)(e.layout)&&this.fuzzyEqual(e.mapping)}fuzzyEqual(e){for(const t in e){if(_.ED&&("Backslash"===t||"KeyQ"===t))continue;if(void 0===this.mapping[t])return!1;const i=this.mapping[t],n=e[t];if(i.value!==n.value)return!1}return!0}}var ye=i(23193);const me=E.B.as(ye.IP.Configuration),pe={id:"keyboard",order:15,type:"object",title:s.NC("keyboardConfigurationTitle","Keyboard"),properties:{"keyboard.dispatch":{scope:1,type:"string",enum:["code","keyCode"],default:"code",markdownDescription:s.NC("dispatch","Controls the dispatching logic for key presses to use either `code` (recommended) or `keyCode`."),included:2===_.OS||3===_.OS},"keyboard.mapAltGrToCtrlAlt":{scope:1,type:"boolean",default:!1,markdownDescription:s.NC("mapAltGrToCtrlAlt","Controls if the AltGraph+ modifier should be treated as Ctrl+Alt+."),included:1===_.OS}}};me.registerConfiguration(pe);class ge{constructor(e){this._actual=e,this._cache=new Map}dumpDebugInfo(){return this._actual.dumpDebugInfo()}resolveKeyboardEvent(e){return this._actual.resolveKeyboardEvent(e)}resolveKeybinding(e){const t=e.getHashCode(),i=this._cache.get(t);if(!i){const i=this._actual.resolveKeybinding(e);return this._cache.set(t,i),i}return i}}var fe=i(8712);class be extends fe.L{constructor(e,t){super(1,t),this._mapper=e}_getLabel(e){return e.isDuplicateModifierCase()?"":this._mapper.getUILabelForKeyCode(e.keyCode)}_getUSLabelForKeybinding(e){return e.isDuplicateModifierCase()?"":p.kL.toString(e.keyCode)}getUSLabel(){return m.xo.toLabel(this._os,this._chords,(e=>this._getUSLabelForKeybinding(e)))}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":this._mapper.getAriaLabelForKeyCode(e.keyCode)}_getElectronAccelerator(e){return this._mapper.getElectronAcceleratorForKeyBinding(e)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=this._mapper.getUserSettingsLabelForKeyCode(e.keyCode);return t?t.toLowerCase():t}_isWYSIWYG(e){return this.__isWYSIWYG(e.keyCode)}__isWYSIWYG(e){return 15===e||16===e||17===e||18===e||this._mapper.getAriaLabelForKeyCode(e)===this._mapper.getUserSettingsLabelForKeyCode(e)}_getChordDispatch(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=p.kL.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static getProducedCharCode(e,t){return t?e.ctrlKey&&e.shiftKey&&e.altKey?t.withShiftAltGr:e.ctrlKey&&e.altKey?t.withAltGr:e.shiftKey?t.withShift:t.value:null}static getProducedChar(e,t){const i=this.getProducedCharCode(e,t);return null===i||0===i.length?" --- ":"  "+i+"  "}}class Ce{constructor(e,t,i){this._isUSStandard=e,this._mapAltGrToCtrlAlt=i,this._keyCodeToLabel=[],this._scanCodeToKeyCode=[],this._keyCodeToLabel=[],this._keyCodeExists=[],this._keyCodeToLabel[0]=p.kL.toString(0);for(let e=0;e<193;e++){const t=p.Vd[e];-1!==t&&(this._scanCodeToKeyCode[e]=t,this._keyCodeToLabel[t]=p.kL.toString(t),this._keyCodeExists[t]=!0)}const n=[];let o=!1;this._codeInfo=[];for(const e in t)if(t.hasOwnProperty(e)){const i=p.Z5.toEnum(e);if(0===i)continue;const r=t[e],s=p.Vd[i];if(-1!==s){const e=p.qG[r.vkey]||0;if(0===e||s===e)continue;if(134!==i)continue}const a=r.value,d=r.withShift,c=r.withAltGr,u=r.withShiftAltGr,h=p.qG[r.vkey]||0,l={scanCode:i,keyCode:h,value:a,withShift:d,withAltGr:c,withShiftAltGr:u};if(this._codeInfo[i]=l,this._scanCodeToKeyCode[i]=h,0===h)continue;if(this._keyCodeExists[h]=!0,0===a.length)this._keyCodeToLabel[h]=null;else if(a.length>1)this._keyCodeToLabel[h]=a;else{const e=a.charCodeAt(0);e>=97&&e<=122?(n[e-97+65]=!0,o=!0,this._keyCodeToLabel[h]=String.fromCharCode(e-97+65)):e>=65&&e<=90?(n[e]=!0,o=!0,this._keyCodeToLabel[h]=a):this._keyCodeToLabel[h]=a}}const r=(e,t)=>{n[e]||(this._keyCodeToLabel[t]=String.fromCharCode(e))};if(r(65,31),r(66,32),r(67,33),r(68,34),r(69,35),r(70,36),r(71,37),r(72,38),r(73,39),r(74,40),r(75,41),r(76,42),r(77,43),r(78,44),r(79,45),r(80,46),r(81,47),r(82,48),r(83,49),r(84,50),r(85,51),r(86,52),r(87,53),r(88,54),r(89,55),r(90,56),!o){const e=(e,t)=>{this._keyCodeToLabel[e]=String.fromCharCode(t)};e(85,59),e(86,61),e(87,44),e(88,45),e(89,46),e(90,47),e(91,96),e(92,91),e(93,92),e(94,93),e(95,39)}}dumpDebugInfo(){const e=[],t=[88,104];let i=0;e.push("-----------------------------------------------------------------------------------------------------------------------------------------");for(let n=0;n<193;n++){if(-1!==p.Vd[n]&&-1===t.indexOf(n))continue;i%6==0&&(e.push("|       HW Code combination      |  Key  |    KeyCode combination    |          UI label         |        User settings       | WYSIWYG |"),e.push("-----------------------------------------------------------------------------------------------------------------------------------------")),i++;const o=this._codeInfo[n],r=p.Z5.toString(n),s=[0,2,5,7];for(const t of s){const i=!!(1&t),s=!!(2&t),a=!!(4&t),d=new g.ae(i,s,a,!1,n),c=this._resolveChord(d),u=c?p.kL.toString(c.keyCode):null,h=c?new be(this,[c]):null,l=`${i?"Ctrl+":""}${s?"Shift+":""}${a?"Alt+":""}${r}`,y=h?h.getAriaLabel():null,m=y?y.replace(/Control\+/,"Ctrl+"):null,f=h?h.getUserSettingsLabel():null,b=be.getProducedChar(d,o),C=u?`${i?"Ctrl+":""}${s?"Shift+":""}${a?"Alt+":""}${u}`:null,_=h&&h.isWYSIWYG()?"       ":"   NO  ";e.push(`| ${this._leftPad(l,30)} | ${b} | ${this._leftPad(C,25)} | ${this._leftPad(m,25)} |  ${this._leftPad(f,25)} | ${_} |`)}e.push("-----------------------------------------------------------------------------------------------------------------------------------------")}return e.join("\n")}_leftPad(e,t){for(null===e&&(e="null");e.length<t;)e=" "+e;return e}getUILabelForKeyCode(e){return this._getLabelForKeyCode(e)}getAriaLabelForKeyCode(e){return this._getLabelForKeyCode(e)}getUserSettingsLabelForKeyCode(e){return this._isUSStandard?p.kL.toUserSettingsUS(e):p.kL.toUserSettingsGeneral(e)}getElectronAcceleratorForKeyBinding(e){return p.kL.toElectronAccelerator(e.keyCode)}_getLabelForKeyCode(e){return this._keyCodeToLabel[e]||p.kL.toString(0)}resolveKeyboardEvent(e){const t=e.ctrlKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,i=e.altKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,n=new g.$M(t,e.shiftKey,i,e.metaKey,e.keyCode);return new be(this,[n])}_resolveChord(e){if(!e)return null;if(e instanceof g.$M)return this._keyCodeExists[e.keyCode]?e:null;const t=this._scanCodeToKeyCode[e.scanCode]||0;return 0!==t&&this._keyCodeExists[t]?new g.$M(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t):null}resolveKeybinding(e){const t=(0,N.a)(e.chords.map((e=>this._resolveChord(e))));return t.length>0?[new be(this,t)]:[]}}var _e=i(68714);const Ke=[];class ke extends fe.L{constructor(e,t,i){super(t,i),this._mapper=e}_getLabel(e){return this._mapper.getUILabelForScanCodeChord(e)}_getAriaLabel(e){return this._mapper.getAriaLabelForScanCodeChord(e)}_getElectronAccelerator(e){return this._mapper.getElectronAcceleratorLabelForScanCodeChord(e)}_getUserSettingsLabel(e){return this._mapper.getUserSettingsLabelForScanCodeChord(e)}_isWYSIWYG(e){if(!e)return!0;if(-1!==p.Vd[e.scanCode])return!0;const t=this._mapper.getAriaLabelForScanCodeChord(e),i=this._mapper.getUserSettingsLabelForScanCodeChord(e);return!t&&!i||!(!t||!i)&&t.toLowerCase()===i.toLowerCase()}_getChordDispatch(e){return this._mapper.getDispatchStrForScanCodeChord(e)}_getSingleModifierChordDispatch(e){return 157!==e.scanCode&&161!==e.scanCode||e.shiftKey||e.altKey||e.metaKey?159!==e.scanCode&&163!==e.scanCode||e.ctrlKey||e.shiftKey||e.metaKey?158!==e.scanCode&&162!==e.scanCode||e.ctrlKey||e.altKey||e.metaKey?160!==e.scanCode&&164!==e.scanCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"shift":"alt":"ctrl"}}class ve{constructor(e,t,i,n){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.scanCode=n}toString(){return`${this.ctrlKey?"Ctrl+":""}${this.shiftKey?"Shift+":""}${this.altKey?"Alt+":""}${p.Z5.toString(this.scanCode)}`}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.scanCode===e.scanCode}getProducedCharCode(e){return e?this.ctrlKey&&this.shiftKey&&this.altKey?e.withShiftAltGr:this.ctrlKey&&this.altKey?e.withAltGr:this.shiftKey?e.withShift:e.value:""}getProducedChar(e){const t=xe.getCharCode(this.getProducedCharCode(e));return 0===t?" --- ":t>=768&&t<=879?"U+"+t.toString(16):"  "+String.fromCharCode(t)+"  "}}class we{constructor(e,t,i,n){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.keyCode=n}toString(){return`${this.ctrlKey?"Ctrl+":""}${this.shiftKey?"Shift+":""}${this.altKey?"Alt+":""}${p.kL.toString(this.keyCode)}`}}class Se{constructor(){this._scanCodeToKeyCode=[],this._keyCodeToScanCode=[],this._scanCodeToKeyCode=[],this._keyCodeToScanCode=[]}registrationComplete(){this._moveToEnd(56),this._moveToEnd(106)}_moveToEnd(e){for(let t=0;t<8;t++){const i=this._scanCodeToKeyCode[(e<<3)+t];if(i)for(let t=0,n=i.length;t<n;t++){const n=this._keyCodeToScanCode[i[t]];if(1!==n.length)for(let t=0,i=n.length;t<i;t++){const o=n[t];if(o>>>3===e){for(let e=t+1;e<i;e++)n[e-1]=n[e];n[i-1]=o}}}}}registerIfUnknown(e,t){if(0===t.keyCode)return;const i=this._encodeScanCodeCombo(e),n=this._encodeKeyCodeCombo(t),o=t.keyCode>=21&&t.keyCode<=30,r=t.keyCode>=31&&t.keyCode<=56,s=this._scanCodeToKeyCode[i];if(o||r){if(s)for(let e=0,t=s.length;e<t;e++)if(s[e]===n)return}else if(s&&0!==s.length)return;this._scanCodeToKeyCode[i]=this._scanCodeToKeyCode[i]||[],this._scanCodeToKeyCode[i].unshift(n),this._keyCodeToScanCode[n]=this._keyCodeToScanCode[n]||[],this._keyCodeToScanCode[n].unshift(i)}lookupKeyCodeCombo(e){const t=this._encodeKeyCodeCombo(e),i=this._keyCodeToScanCode[t];if(!i||0===i.length)return[];const n=[];for(let e=0,t=i.length;e<t;e++){const t=i[e],o=!!(1&t),r=!!(2&t),s=!!(4&t),a=t>>>3;n[e]=new ve(o,r,s,a)}return n}lookupScanCodeCombo(e){const t=this._encodeScanCodeCombo(e),i=this._scanCodeToKeyCode[t];if(!i||0===i.length)return[];const n=[];for(let e=0,t=i.length;e<t;e++){const t=i[e],o=!!(1&t),r=!!(2&t),s=!!(4&t),a=t>>>3;n[e]=new we(o,r,s,a)}return n}guessStableKeyCode(e){if(e>=36&&e<=45)switch(e){case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21}const t=this.lookupScanCodeCombo(new ve(!1,!1,!1,e)),i=this.lookupScanCodeCombo(new ve(!1,!0,!1,e));if(1===t.length&&1===i.length){const e=t[0].shiftKey,n=t[0].keyCode,o=i[0].shiftKey;if(n===i[0].keyCode&&e!==o)return n}return-1}_encodeScanCodeCombo(e){return this._encode(e.ctrlKey,e.shiftKey,e.altKey,e.scanCode)}_encodeKeyCodeCombo(e){return this._encode(e.ctrlKey,e.shiftKey,e.altKey,e.keyCode)}_encode(e,t,i,n){return((e?1:0)<<0|(t?1:0)<<1|(i?1:0)<<2|n<<3)>>>0}}class xe{constructor(e,t,i,n){this._isUSStandard=e,this._mapAltGrToCtrlAlt=i,this._OS=n,this._scanCodeToLabel=[],this._scanCodeToDispatch=[],this._codeInfo=[],this._scanCodeKeyCodeMapper=new Se,this._scanCodeToLabel=[],this._scanCodeToDispatch=[];const o=(e,t,i,n,o,r,s,a)=>{this._scanCodeKeyCodeMapper.registerIfUnknown(new ve(!!e,!!t,!!i,n),new we(!!o,!!r,!!s,a))},r=(e,t,i,n,r)=>{for(let s=e;s<=1;s++)for(let e=t;e<=1;e++)for(let t=i;t<=1;t++)o(s,e,t,n,s,e,t,r)};for(let e=0;e<193;e++)this._scanCodeToLabel[e]=null;for(let e=0;e<193;e++)this._scanCodeToDispatch[e]=null;for(let e=0;e<193;e++){const t=p.Vd[e];-1!==t&&(r(0,0,0,e,t),this._scanCodeToLabel[e]=p.kL.toString(t),this._scanCodeToDispatch[e]=0===t||5===t||57===t||6===t||4===t?null:`[${p.Z5.toString(e)}]`)}const s={};{const e=[];for(const i in t)if(t.hasOwnProperty(i)){const n=p.Z5.toEnum(i);if(0===n)continue;if(-1!==p.Vd[n])continue;const o=t[i],r=xe.getCharCode(o.value);r>=97&&r<=122&&(e[r-97+65]=!0)}const i=(t,i,n,o)=>{e[t]||(s[p.Z5.toString(i)]={value:n,withShift:o,withAltGr:"",withShiftAltGr:""})};i(65,10,"a","A"),i(66,11,"b","B"),i(67,12,"c","C"),i(68,13,"d","D"),i(69,14,"e","E"),i(70,15,"f","F"),i(71,16,"g","G"),i(72,17,"h","H"),i(73,18,"i","I"),i(74,19,"j","J"),i(75,20,"k","K"),i(76,21,"l","L"),i(77,22,"m","M"),i(78,23,"n","N"),i(79,24,"o","O"),i(80,25,"p","P"),i(81,26,"q","Q"),i(82,27,"r","R"),i(83,28,"s","S"),i(84,29,"t","T"),i(85,30,"u","U"),i(86,31,"v","V"),i(87,32,"w","W"),i(88,33,"x","X"),i(89,34,"y","Y"),i(90,35,"z","Z")}const a=[];let d=0;for(const e in t)if(t.hasOwnProperty(e)){const i=p.Z5.toEnum(e);if(0===i)continue;if(-1!==p.Vd[i])continue;this._codeInfo[i]=t[e];const n=s[e]||t[e],o=xe.getCharCode(n.value),r={scanCode:i,value:o,withShift:xe.getCharCode(n.withShift),withAltGr:xe.getCharCode(n.withAltGr),withShiftAltGr:xe.getCharCode(n.withShiftAltGr)};if(a[d++]=r,this._scanCodeToDispatch[i]=`[${p.Z5.toString(i)}]`,o>=97&&o<=122){const e=o-97+65;this._scanCodeToLabel[i]=String.fromCharCode(e)}else this._scanCodeToLabel[i]=o>=65&&o<=90||o?String.fromCharCode(o):null}for(let e=a.length-1;e>=0;e--){const t=a[e],i=t.scanCode,n=t.withShiftAltGr;if(n===t.withAltGr||n===t.withShift||n===t.value)continue;const r=xe._charCodeToKb(n);if(!r)continue;const s=r.shiftKey,d=r.keyCode;o(1,1,1,i,0,s?1:0,0,d)}for(let e=a.length-1;e>=0;e--){const t=a[e],i=t.scanCode,n=t.withAltGr;if(n===t.withShift||n===t.value)continue;const r=xe._charCodeToKb(n);if(!r)continue;const s=r.shiftKey,d=r.keyCode;o(1,0,1,i,0,s?1:0,0,d)}for(let e=a.length-1;e>=0;e--){const t=a[e],i=t.scanCode,n=t.withShift;if(n===t.value)continue;const r=xe._charCodeToKb(n);if(!r)continue;const s=r.shiftKey,d=r.keyCode;s?(o(0,1,0,i,0,1,0,d),o(0,1,1,i,0,1,1,d),o(1,1,0,i,1,1,0,d),o(1,1,1,i,1,1,1,d)):(o(0,1,0,i,0,0,0,d),o(0,1,0,i,0,1,0,d),o(0,1,1,i,0,0,1,d),o(0,1,1,i,0,1,1,d),o(1,1,0,i,1,0,0,d),o(1,1,0,i,1,1,0,d),o(1,1,1,i,1,0,1,d),o(1,1,1,i,1,1,1,d))}for(let e=a.length-1;e>=0;e--){const t=a[e],i=t.scanCode,n=xe._charCodeToKb(t.value);if(!n)continue;const r=n.shiftKey,s=n.keyCode;r?(o(0,0,0,i,0,1,0,s),o(0,0,1,i,0,1,1,s),o(1,0,0,i,1,1,0,s),o(1,0,1,i,1,1,1,s)):(o(0,0,0,i,0,0,0,s),o(0,0,1,i,0,0,1,s),o(0,1,0,i,0,1,0,s),o(0,1,1,i,0,1,1,s),o(1,0,0,i,1,0,0,s),o(1,0,1,i,1,0,1,s),o(1,1,0,i,1,1,0,s),o(1,1,1,i,1,1,1,s))}r(0,0,0,36,22),r(0,0,0,37,23),r(0,0,0,38,24),r(0,0,0,39,25),r(0,0,0,40,26),r(0,0,0,41,27),r(0,0,0,42,28),r(0,0,0,43,29),r(0,0,0,44,30),r(0,0,0,45,21),this._scanCodeKeyCodeMapper.registrationComplete()}dumpDebugInfo(){const e=[],t=[88,104];let i=0;e.push(`isUSStandard: ${this._isUSStandard}`),e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------");for(let n=0;n<193;n++){if(-1!==p.Vd[n]&&-1===t.indexOf(n))continue;i%4==0&&(e.push("|       HW Code combination      |  Key  |    KeyCode combination    | Pri |          UI label         |         User settings          |    Electron accelerator   |       Dispatching string       | WYSIWYG |"),e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")),i++;const o=this._codeInfo[n];for(let t=0;t<8;t++){const i=new ve(!!(1&t),!!(2&t),!!(4&t),n),r=this.resolveKeyboardEvent({_standardKeyboardEventBrand:!0,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,metaKey:!1,altGraphKey:!1,keyCode:-1,code:p.Z5.toString(n)}),s=i.toString(),a=i.getProducedChar(o),d=r.getAriaLabel(),c=d?d.replace(/Control\+/,"Ctrl+"):null,u=r.getUserSettingsLabel(),h=r.getElectronAccelerator(),l=r.getDispatchChords()[0],y=r&&r.isWYSIWYG()?"       ":"   NO  ",m=this._scanCodeKeyCodeMapper.lookupScanCodeCombo(i);if(0===m.length)e.push(`| ${this._leftPad(s,30)} | ${a} | ${this._leftPad("",25)} | ${this._leftPad("",3)} | ${this._leftPad(c,25)} | ${this._leftPad(u,30)} | ${this._leftPad(h,25)} | ${this._leftPad(l,30)} | ${y} |`);else for(let t=0,n=m.length;t<n;t++){const n=m[t];let o;const r=this._scanCodeKeyCodeMapper.lookupKeyCodeCombo(n);if(1===r.length)o="";else{let e=-1;for(let t=0;t<r.length;t++)if(r[t].equals(i)){e=t+1;break}o=String(e)}const d=n.toString();0===t?e.push(`| ${this._leftPad(s,30)} | ${a} | ${this._leftPad(d,25)} | ${this._leftPad(o,3)} | ${this._leftPad(c,25)} | ${this._leftPad(u,30)} | ${this._leftPad(h,25)} | ${this._leftPad(l,30)} | ${y} |`):e.push(`| ${this._leftPad("",30)} |       | ${this._leftPad(d,25)} | ${this._leftPad(o,3)} | ${this._leftPad("",25)} | ${this._leftPad("",30)} | ${this._leftPad("",25)} | ${this._leftPad("",30)} |         |`)}}e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")}return e.join("\n")}_leftPad(e,t){for(null===e&&(e="null");e.length<t;)e=" "+e;return e}keyCodeChordToScanCodeChord(e){if(3===e.keyCode)return[new g.ae(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,46)];const t=this._scanCodeKeyCodeMapper.lookupKeyCodeCombo(new we(e.ctrlKey,e.shiftKey,e.altKey,e.keyCode)),i=[];for(let n=0,o=t.length;n<o;n++){const o=t[n];i[n]=new g.ae(o.ctrlKey,o.shiftKey,o.altKey,e.metaKey,o.scanCode)}return i}getUILabelForScanCodeChord(e){if(!e)return null;if(e.isDuplicateModifierCase())return"";if(2===this._OS)switch(e.scanCode){case 86:return"←";case 88:return"↑";case 85:return"→";case 87:return"↓"}return this._scanCodeToLabel[e.scanCode]}getAriaLabelForScanCodeChord(e){return e?e.isDuplicateModifierCase()?"":this._scanCodeToLabel[e.scanCode]:null}getDispatchStrForScanCodeChord(e){const t=this._scanCodeToDispatch[e.scanCode];if(!t)return null;let i="";return e.ctrlKey&&(i+="ctrl+"),e.shiftKey&&(i+="shift+"),e.altKey&&(i+="alt+"),e.metaKey&&(i+="meta+"),i+=t,i}getUserSettingsLabelForScanCodeChord(e){if(!e)return null;if(e.isDuplicateModifierCase())return"";const t=p.Vd[e.scanCode];if(-1!==t)return p.kL.toUserSettingsUS(t).toLowerCase();const i=this._scanCodeKeyCodeMapper.guessStableKeyCode(e.scanCode);if(-1!==i){const t=this.keyCodeChordToScanCodeChord(new g.$M(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,i));for(let n=0,o=t.length;n<o;n++)if(t[n].scanCode===e.scanCode)return p.kL.toUserSettingsUS(i).toLowerCase()}return this._scanCodeToDispatch[e.scanCode]}getElectronAcceleratorLabelForScanCodeChord(e){if(!e)return null;const t=p.Vd[e.scanCode];if(-1!==t)return p.kL.toElectronAccelerator(t);const i=this._scanCodeKeyCodeMapper.guessStableKeyCode(e.scanCode);return(3!==this._OS||this._isUSStandard||85!==i&&86!==i&&87!==i&&88!==i&&89!==i&&90!==i&&91!==i&&92!==i&&93!==i&&94!==i)&&-1!==i?p.kL.toElectronAccelerator(i):null}_toResolvedKeybinding(e){if(0===e.length)return[];const t=[];return this._generateResolvedKeybindings(e,0,[],t),t}_generateResolvedKeybindings(e,t,i,n){const o=e[t],r=t===e.length-1;for(let s=0,a=o.length;s<a;s++){const a=[...i,o[s]];r?n.push(new ke(this,this._OS,a)):this._generateResolvedKeybindings(e,t+1,a,n)}}resolveKeyboardEvent(e){let t=p.Z5.toEnum(e.code);94===t&&(t=46);const i=e.keyCode;if(15===i||16===i||17===i||18===i||20===i||19===i||14===i||13===i||12===i||11===i||1===i){const e=p.nf[i];-1!==e&&(t=e)}else if((95===t||96===t||97===t||98===t||99===t||100===t||101===t||102===t||103===t||104===t||105===t)&&i>=0){const e=p.nf[i];-1!==e&&(t=e)}const n=e.ctrlKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,o=e.altKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,r=new g.ae(n,e.shiftKey,o,e.metaKey,t);return new ke(this,this._OS,[r])}_resolveChord(e){return e?e instanceof g.ae?[e]:this.keyCodeChordToScanCodeChord(e):[]}resolveKeybinding(e){const t=e.chords.map((e=>this._resolveChord(e)));return this._toResolvedKeybinding(t)}static _redirectCharCode(e){switch(e){case 12290:return 46;case 12300:case 12304:return 91;case 12301:case 12305:return 93;case 65307:return 59;case 65292:return 44}return e}static _charCodeToKb(e){return(e=this._redirectCharCode(e))<Ke.length?Ke[e]:null}static getCharCode(e){if(0===e.length)return 0;const t=e.charCodeAt(0);switch(t){case 768:return 96;case 769:return 180;case 770:return 94;case 771:return 732;case 772:return 175;case 773:return 8254;case 774:return 728;case 775:return 729;case 776:return 168;case 778:return 730;case 779:return 733}return t}}!function(){function e(e,t,i){for(let t=Ke.length;t<e;t++)Ke[t]=null;Ke[e]={keyCode:t,shiftKey:i}}for(let t=65;t<=90;t++)e(t,t-65+31,!0);for(let t=97;t<=122;t++)e(t,t-97+31,!1);e(59,85,!1),e(58,85,!0),e(61,86,!1),e(43,86,!0),e(44,87,!1),e(60,87,!0),e(45,88,!1),e(95,88,!0),e(46,89,!1),e(62,89,!0),e(47,90,!1),e(63,90,!0),e(96,91,!1),e(126,91,!0),e(91,92,!1),e(123,92,!0),e(92,93,!1),e(124,93,!0),e(93,94,!1),e(125,94,!0),e(39,95,!1),e(34,95,!0)}();var Le=i(48814),Te=i(33108),Ie=i(26904);class Ne extends b.JT{get activeKeymap(){return this._activeKeymapInfo}get keymapInfos(){return this._keymapInfos}get activeKeyboardLayout(){return this._initialized?this._activeKeymapInfo?.layout??null:null}get activeKeyMapping(){return this._initialized?this._activeKeymapInfo?.mapping??null:null}get keyboardLayouts(){return this._keymapInfos.map((e=>e.layout))}constructor(e){super(),this._configurationService=e,this._onDidChangeKeyboardMapper=new l.Q5,this.onDidChangeKeyboardMapper=this._onDidChangeKeyboardMapper.event,this._keyboardMapper=null,this._initialized=!1,this._keymapInfos=[],this._mru=[],this._activeKeymapInfo=null,navigator.keyboard&&navigator.keyboard.addEventListener&&navigator.keyboard.addEventListener("layoutchange",(()=>{this._getBrowserKeyMapping().then((e=>{this.isKeyMappingActive(e)||this.setLayoutFromBrowserAPI()}))})),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("keyboard")&&(this._keyboardMapper=null,this._onDidChangeKeyboardMapper.fire())})))}registerKeyboardLayout(e){this._keymapInfos.push(e),this._mru=this._keymapInfos}removeKeyboardLayout(e){let t=this._mru.indexOf(e);this._mru.splice(t,1),t=this._keymapInfos.indexOf(e),this._keymapInfos.splice(t,1)}getMatchedKeymapInfo(e){if(!e)return null;const t=this.getUSStandardLayout();if(t){let i=t.getScore(e);if(0===i)return{result:t,score:0};let n=t;for(let t=0;t<this._mru.length;t++){const o=this._mru[t].getScore(e);if(o>i){if(0===o)return{result:this._mru[t],score:0};i=o,n=this._mru[t]}}return{result:n,score:i}}for(let t=0;t<this._mru.length;t++)if(this._mru[t].fuzzyEqual(e))return{result:this._mru[t],score:0};return null}getUSStandardLayout(){const e=this._mru.filter((e=>e.layout.isUSStandard));return e.length?e[0]:null}isKeyMappingActive(e){return this._activeKeymapInfo&&e&&this._activeKeymapInfo.fuzzyEqual(e)}setUSKeyboardLayout(){this._activeKeymapInfo=this.getUSStandardLayout()}setActiveKeyMapping(e){let t=!1;const i=this.getMatchedKeymapInfo(e);if(i&&(this._activeKeymapInfo?e&&i.result.getScore(e)>this._activeKeymapInfo.getScore(e)&&(this._activeKeymapInfo=i.result,t=!0):(this._activeKeymapInfo=i.result,t=!0)),this._activeKeymapInfo||(this._activeKeymapInfo=this.getUSStandardLayout(),t=!0),!this._activeKeymapInfo||!t)return;const n=this._mru.indexOf(this._activeKeymapInfo);this._mru.splice(n,1),this._mru.unshift(this._activeKeymapInfo),this._setKeyboardData(this._activeKeymapInfo)}setActiveKeymapInfo(e){this._activeKeymapInfo=e;const t=this._mru.indexOf(this._activeKeymapInfo);0!==t&&(this._mru.splice(t,1),this._mru.unshift(this._activeKeymapInfo),this._setKeyboardData(this._activeKeymapInfo))}setLayoutFromBrowserAPI(){this._updateKeyboardLayoutAsync(this._initialized)}_updateKeyboardLayoutAsync(e,t){e&&this._getBrowserKeyMapping(t).then((e=>{this.isKeyMappingActive(e)||this.setActiveKeyMapping(e)}))}getKeyboardMapper(){const e=function(e){const t=e.getValue("keyboard");return{dispatch:"keyCode"===t?.dispatch?1:0,mapAltGrToCtrlAlt:Boolean(t?.mapAltGrToCtrlAlt)}}(this._configurationService);return 1!==e.dispatch&&this._initialized&&this._activeKeymapInfo?(this._keyboardMapper||(this._keyboardMapper=new ge(Ae._createKeyboardMapper(this._activeKeymapInfo,e.mapAltGrToCtrlAlt))),this._keyboardMapper):new _e.a(e.mapAltGrToCtrlAlt,_.OS)}validateCurrentKeyboardMapping(e){this._initialized&&(this._validateCurrentKeyboardMapping(e)||this._updateKeyboardLayoutAsync(!0,e))}setKeyboardLayout(e){const t=this.keymapInfos.filter((t=>(0,A.j)(t.layout)===e));t.length>0&&this.setActiveKeymapInfo(t[0])}_setKeyboardData(e){this._initialized=!0,this._keyboardMapper=null,this._onDidChangeKeyboardMapper.fire()}static _createKeyboardMapper(e,t){const i=e.mapping,n=!!e.layout.isUSStandard;return 1===_.OS?new Ce(n,i,t):0===Object.keys(i).length?new _e.a(t,_.OS):new xe(n,i,t,_.OS)}_validateCurrentKeyboardMapping(e){if(!this._initialized)return!0;const t=e,i=this._activeKeymapInfo;if(!i)return!0;if("Dead"===t.browserEvent.key||t.browserEvent.isComposing)return!0;const n=i.mapping[t.code];if(!n)return!1;if(""===n.value)return(e.ctrlKey||e.metaKey)&&setTimeout((()=>{this._getBrowserKeyMapping().then((e=>{this.isKeyMappingActive(e)||this.setLayoutFromBrowserAPI()}))}),350),!0;const o=t.altKey&&t.shiftKey?n.withShiftAltGr:t.altKey?n.withAltGr:t.shiftKey?n.withShift:n.value,r=t.altKey&&t.shiftKey&&n.withShiftAltGrIsDeadKey||t.altKey&&n.withAltGrIsDeadKey||t.shiftKey&&n.withShiftIsDeadKey||n.valueIsDeadKey;return!(r&&"Dead"!==t.browserEvent.key||!r&&t.browserEvent.key!==o)}async _getBrowserKeyMapping(e){if(navigator.keyboard)try{return navigator.keyboard.getLayoutMap().then((e=>{const t={};for(const i of e)t[i[0]]={value:i[1],withShift:"",withAltGr:"",withShiftAltGr:""};return t}))}catch{}else if(e&&!e.shiftKey&&!e.altKey&&!e.metaKey&&!e.metaKey){const t={},i=e;return t[i.browserEvent.code]={value:i.browserEvent.key,withShift:"",withAltGr:"",withShiftAltGr:""},this.getMatchedKeymapInfo(t)?t:null}return null}}class Ae extends Ne{constructor(e,t,n,o){super(e),function(e){switch(e){case"./keyboardLayouts/layout.contribution.darwin.js":return i.e(409).then(i.bind(i,15409)).then((e=>e.default??e));case"./keyboardLayouts/layout.contribution.linux.js":return i.e(886).then(i.bind(i,87886)).then((e=>e.default??e));case"./keyboardLayouts/layout.contribution.win.js":return i.e(308).then(i.bind(i,79308)).then((e=>e.default??e));default:return new Promise((function(t,i){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}("./keyboardLayouts/layout.contribution."+(_.ED?"win":_.dz?"darwin":"linux")+".js").then((e=>{const t=e.KeyboardLayoutContribution.INSTANCE.layoutInfos;this._keymapInfos.push(...t.map((e=>new le(e.layout,e.secondaryLayouts,e.mapping,e.isUserKeyboardLayout)))),this._mru=this._keymapInfos,this._initialized=!0,this.setLayoutFromBrowserAPI()}))}}class Me extends b.JT{get keyboardLayout(){return this._keyboardLayout}constructor(e,t){super(),this.keyboardLayoutResource=e,this.fileService=t,this._onDidChange=this._register(new l.Q5),this.onDidChange=this._onDidChange.event,this._keyboardLayout=null,this.reloadConfigurationScheduler=this._register(new h.pY((()=>this.reload().then((e=>{e&&this._onDidChange.fire()}))),50)),this._register(l.ju.filter(this.fileService.onDidFilesChange,(e=>e.contains(this.keyboardLayoutResource)))((()=>this.reloadConfigurationScheduler.schedule())))}async initialize(){await this.reload()}async reload(){const e=this._keyboardLayout;try{const e=await this.fileService.readFile(this.keyboardLayoutResource),t=(0,y.Qc)(e.value.toString());if("object"===(0,y.jo)(t)){const e=t.layout,i=t.rawMapping;this._keyboardLayout=le.createKeyboardLayoutFromDebugInfo(e,i,!0)}else this._keyboardLayout=null}catch(e){this._keyboardLayout=null}return!e||!C.fS(e,this._keyboardLayout)}}let De=class extends b.JT{constructor(e,t,i,n,o,r){super(),this.configurationService=r,this._onDidChangeKeyboardLayout=new l.Q5,this.onDidChangeKeyboardLayout=this._onDidChangeKeyboardLayout.event;const s=r.getValue("keyboard").layout;this._keyboardLayoutMode=s??"autodetect",this._factory=new Ae(r,i,n,o),this._register(this._factory.onDidChangeKeyboardMapper((()=>{this._onDidChangeKeyboardLayout.fire()}))),s&&"autodetect"!==s&&this._factory.setKeyboardLayout(s),this._register(r.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("keyboard.layout")){const e=r.getValue("keyboard").layout;this._keyboardLayoutMode=e,"autodetect"===e?this._factory.setLayoutFromBrowserAPI():this._factory.setKeyboardLayout(e)}}))),this._userKeyboardLayout=new Me(e.keyboardLayoutResource,t),this._userKeyboardLayout.initialize().then((()=>{this._userKeyboardLayout.keyboardLayout&&(this._factory.registerKeyboardLayout(this._userKeyboardLayout.keyboardLayout),this.setUserKeyboardLayoutIfMatched())})),this._register(this._userKeyboardLayout.onDidChange((()=>{const e=this._factory.keymapInfos.filter((e=>e.isUserKeyboardLayout));e.length?this._userKeyboardLayout.keyboardLayout?e[0].update(this._userKeyboardLayout.keyboardLayout):this._factory.removeKeyboardLayout(e[0]):this._userKeyboardLayout.keyboardLayout&&this._factory.registerKeyboardLayout(this._userKeyboardLayout.keyboardLayout),this.setUserKeyboardLayoutIfMatched()})))}setUserKeyboardLayoutIfMatched(){const e=this.configurationService.getValue("keyboard").layout;e&&this._userKeyboardLayout.keyboardLayout&&(0,A.j)(this._userKeyboardLayout.keyboardLayout.layout)===e&&this._factory.activeKeymap&&(this._userKeyboardLayout.keyboardLayout.equal(this._factory.activeKeymap)||this._factory.setActiveKeymapInfo(this._userKeyboardLayout.keyboardLayout))}getKeyboardMapper(){return this._factory.getKeyboardMapper()}getCurrentKeyboardLayout(){return this._factory.activeKeyboardLayout}getAllKeyboardLayouts(){return this._factory.keyboardLayouts}getRawKeyboardMapping(){return this._factory.activeKeyMapping}validateCurrentKeyboardMapping(e){"autodetect"===this._keyboardLayoutMode&&this._factory.validateCurrentKeyboardMapping(e)}};De=(0,r.g)([(0,r.f)(0,Le.Y),(0,r.f)(1,S.sn),(0,r.f)(2,D.lT),(0,r.f)(3,Ie.Uy),(0,r.f)(4,v.H),(0,r.f)(5,Te.Ui)],De);const Ee=E.B.as(ye.IP.Configuration),Pe={id:"keyboard",order:15,type:"object",title:s.NC("keyboardConfigurationTitle","Keyboard"),properties:{"keyboard.layout":{type:"string",default:"autodetect",description:s.NC("keyboard.layout.config","Control the keyboard layout used in web.")}}};Ee.registerConfiguration(Pe);var $e=i(72065);let Ue=class extends b.JT{constructor(e,t,i){super(),this._instantiationService=e,this._extensionService=t,this._logService=i,this._extensionHostIsReady=!1,this._onWillExecuteCommand=this._register(new l.Q5),this.onWillExecuteCommand=this._onWillExecuteCommand.event,this._onDidExecuteCommand=new l.Q5,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._extensionService.whenInstalledExtensionsRegistered().then((e=>this._extensionHostIsReady=e)),this._starActivation=null}_activateStar(){return this._starActivation||(this._starActivation=Promise.race([this._extensionService.activateByEvent("*"),(0,h.Vs)(3e4)])),this._starActivation}async executeCommand(e,...t){this._logService.trace("CommandService#executeCommand",e);const i=`onCommand:${e}`;return v.P.getCommand(e)?this._extensionService.activationEventIsDone(i)?this._tryExecuteCommand(e,t):this._extensionHostIsReady?(await this._extensionService.activateByEvent(i),this._tryExecuteCommand(e,t)):(this._extensionService.activateByEvent(i),this._tryExecuteCommand(e,t)):(await Promise.all([this._extensionService.activateByEvent(i),Promise.race([this._activateStar(),l.ju.toPromise(l.ju.filter(v.P.onDidRegisterCommand,(t=>t===e)))])]),this._tryExecuteCommand(e,t))}_tryExecuteCommand(e,t){const i=v.P.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction(i.handler,...t);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(e){return Promise.reject(e)}}};Ue=(0,r.g)([(0,r.f)(0,$e.TG),(0,r.f)(1,O.QS),(0,r.f)(2,M.VZ)],Ue);var He=i(89118),Ge=(i(38823),i(8269)),Oe=i(41443);class Re extends k.Ke{constructor(){super({id:"workbench.action.toggleKeybindingsLog",title:{value:s.NC("toggleKeybindingsLog","Toggle Keyboard Shortcuts Troubleshooting"),original:"Toggle Keyboard Shortcuts Troubleshooting"},category:Ge.R.Developer,f1:!0})}run(e){e.get(ce.d).toggleLogging()&&e.get(v.H).executeCommand(Oe.X)}}async function je(e){const t=n.IO.get(he.lv);await n.IO.get(S.sn).writeFile(t.defaultProfile.keybindingsResource,ue.KN.fromString(e))}(0,k.r1)(Re);class Fe extends se{constructor(){super(...arguments),this.keybindingProviders=[]}registerKeybindingProvider(e){return this.keybindingProviders.push(e),this.updateResolver(),(0,b.OF)((()=>{const t=this.keybindingProviders.indexOf(e);t>=0&&(this.keybindingProviders.splice(t,1),this.updateResolver())}))}_getResolver(){return super._getResolver()}getUserKeybindingItems(){return[...super.getUserKeybindingItems(),...this.keybindingProviders.flatMap((e=>e()))]}}function Be(){return{...(0,He.ZP)(),[ce.d.toString()]:new o.M(Fe,[],!1),[A.o.toString()]:new o.M(De,void 0,!0),[v.H.toString()]:new o.M(Ue,[],!0)}}},66135:(e,t,i)=>{i.d(t,{g:()=>a});var n=i(94565),o=i(9488),r=i(16830),s=i(84144);function a(e){const t=[],i=new Map,a=(r,s)=>{if(!i.has(r)&&(i.set(r,!0),"_"!==r[0]&&0!==r.indexOf("vscode.")&&!0!==e.get(r))){if(!s){const e=n.P.getCommand(r);if(e&&"object"==typeof e.description&&(0,o.Of)(e.description.args))return}t.push(r)}};for(const e of s.BH.getMenuItems(s.eH.CommandPalette))(0,s.vr)(e)&&a(e.command.id,!0);for(const e of r.Uc.getEditorActions())a(e.id,!0);for(const e of n.P.getCommands().keys())a(e,!1);return t}},41443:(e,t,i)=>{i.d(t,{X:()=>n});const n="workbench.action.showWindowLog"}}]);
//# sourceMappingURL=95.bundle.js.map