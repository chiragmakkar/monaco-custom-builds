"use strict";(self.webpackChunkmonaco_custom_bundle=self.webpackChunkmonaco_custom_bundle||[]).push([[487],{2356:(e,t,i)=>{i.d(t,{Z:()=>l});var s=i(87537),o=i.n(s),n=i(23645),a=i.n(n)()(o());a.push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/** Dialog: Modal Block */\n.monaco-dialog-modal-block {\n\tposition: fixed;\n\theight: 100%;\n\twidth: 100%;\n\tleft:0;\n\ttop:0;\n\tz-index: 2600;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.monaco-dialog-modal-block.dimmed {\n\tbackground: rgba(0, 0, 0, 0.3);\n}\n\n/** Dialog: Container */\n.monaco-dialog-box {\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n\twidth: min-content;\n\tmin-width: 500px;\n\tmax-width: 90vw;\n\tmin-height: 75px;\n\tpadding: 10px;\n\ttransform: translate3d(0px, 0px, 0px);\n}\n\n/** Dialog: Title Actions Row */\n.monaco-dialog-box .dialog-toolbar-row {\n\theight: 22px;\n\tpadding-bottom: 4px;\n}\n\n.monaco-dialog-box .dialog-toolbar-row .actions-container {\n\tjustify-content: flex-end;\n}\n\n/** Dialog: Message Row */\n.monaco-dialog-box .dialog-message-row {\n\tdisplay: flex;\n\tflex-grow: 1;\n\talign-items: center;\n\tpadding: 0 10px;\n}\n\n.monaco-dialog-box .dialog-message-row > .dialog-icon.codicon {\n\tflex: 0 0 48px;\n\theight: 48px;\n\talign-self: baseline;\n\tfont-size: 48px;\n}\n\n/** Dialog: Message Container */\n.monaco-dialog-box .dialog-message-row .dialog-message-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tpadding-left: 24px;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tword-wrap: break-word; /* never overflow long words, but break to next line */\n\twhite-space: normal;\n}\n\n/** Dialog: Message */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message {\n\tline-height: 22px;\n\tfont-size: 18px;\n\tflex: 1; /* let the message always grow */\n\twhite-space: normal;\n\tword-wrap: break-word; /* never overflow long words, but break to next line */\n\tmin-height: 48px; /* matches icon height */\n\tmargin-bottom: 8px;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n/** Dialog: Details */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-detail {\n\tline-height: 22px;\n\tflex: 1; /* let the message always grow */\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message a:focus {\n\toutline-width: 1px;\n\toutline-style: solid;\n}\n\n/** Dialog: Checkbox */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row {\n\tpadding: 15px 0px 0px;\n\tdisplay: flex;\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row .dialog-checkbox-message {\n\tcursor: pointer;\n\tuser-select: none;\n\t-webkit-user-select: none;\n}\n\n/** Dialog: Input */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input {\n\tpadding: 15px 0px 0px;\n\tdisplay: flex;\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input .monaco-inputbox {\n\tflex: 1;\n}\n\n/** Dialog: File Path */\n.monaco-dialog-box code {\n\tfont-family: var(--monaco-monospace-font);\n}\n\n/** Dialog: Buttons Row */\n.monaco-dialog-box > .dialog-buttons-row {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding-right: 1px;\n\toverflow: hidden; /* buttons row should never overflow */\n}\n\n.monaco-dialog-box > .dialog-buttons-row {\n\tdisplay: flex;\n\twhite-space: nowrap;\n\tpadding: 20px 10px 10px;\n}\n\n/** Dialog: Buttons */\n.monaco-dialog-box > .dialog-buttons-row > .dialog-buttons {\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: flex-end;\n\toverflow: hidden;\n\tmargin-left: 67px; /* for long buttons, force align with text */\n}\n\n.monaco-dialog-box > .dialog-buttons-row > .dialog-buttons > .monaco-button {\n\twidth: fit-content;\n\tpadding: 5px 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmargin: 4px 5px; /* allows button focus outline to be visible */\n\toutline-offset: 2px !important;\n}\n","",{version:3,sources:["webpack://./node_modules/monaco-editor/esm/vs/base/browser/ui/dialog/dialog.css"],names:[],mappings:"AAAA;;;+FAG+F;;AAE/F,yBAAyB;AACzB;CACC,eAAe;CACf,YAAY;CACZ,WAAW;CACX,MAAM;CACN,KAAK;CACL,aAAa;CACb,aAAa;CACb,uBAAuB;CACvB,mBAAmB;AACpB;;AAEA;CACC,8BAA8B;AAC/B;;AAEA,uBAAuB;AACvB;CACC,aAAa;CACb,8BAA8B;CAC9B,kBAAkB;CAClB,gBAAgB;CAChB,eAAe;CACf,gBAAgB;CAChB,aAAa;CACb,qCAAqC;AACtC;;AAEA,+BAA+B;AAC/B;CACC,YAAY;CACZ,mBAAmB;AACpB;;AAEA;CACC,yBAAyB;AAC1B;;AAEA,yBAAyB;AACzB;CACC,aAAa;CACb,YAAY;CACZ,mBAAmB;CACnB,eAAe;AAChB;;AAEA;CACC,cAAc;CACd,YAAY;CACZ,oBAAoB;CACpB,eAAe;AAChB;;AAEA,+BAA+B;AAC/B;CACC,aAAa;CACb,sBAAsB;CACtB,gBAAgB;CAChB,uBAAuB;CACvB,kBAAkB;CAClB,iBAAiB;CACjB,yBAAyB;CACzB,qBAAqB,EAAE,sDAAsD;CAC7E,mBAAmB;AACpB;;AAEA,qBAAqB;AACrB;CACC,iBAAiB;CACjB,eAAe;CACf,OAAO,EAAE,gCAAgC;CACzC,mBAAmB;CACnB,qBAAqB,EAAE,sDAAsD;CAC7E,gBAAgB,EAAE,wBAAwB;CAC1C,kBAAkB;CAClB,aAAa;CACb,mBAAmB;AACpB;;AAEA,qBAAqB;AACrB;CACC,iBAAiB;CACjB,OAAO,EAAE,gCAAgC;AAC1C;;AAEA;CACC,kBAAkB;CAClB,oBAAoB;AACrB;;AAEA,sBAAsB;AACtB;CACC,qBAAqB;CACrB,aAAa;AACd;;AAEA;CACC,eAAe;CACf,iBAAiB;CACjB,yBAAyB;AAC1B;;AAEA,mBAAmB;AACnB;CACC,qBAAqB;CACrB,aAAa;AACd;;AAEA;CACC,OAAO;AACR;;AAEA,uBAAuB;AACvB;CACC,yCAAyC;AAC1C;;AAEA,yBAAyB;AACzB;CACC,aAAa;CACb,mBAAmB;CACnB,kBAAkB;CAClB,gBAAgB,EAAE,sCAAsC;AACzD;;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,uBAAuB;AACxB;;AAEA,qBAAqB;AACrB;CACC,aAAa;CACb,WAAW;CACX,yBAAyB;CACzB,gBAAgB;CAChB,iBAAiB,EAAE,4CAA4C;AAChE;;AAEA;CACC,kBAAkB;CAClB,iBAAiB;CACjB,gBAAgB;CAChB,uBAAuB;CACvB,eAAe,EAAE,8CAA8C;CAC/D,8BAA8B;AAC/B",sourcesContent:["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/** Dialog: Modal Block */\n.monaco-dialog-modal-block {\n\tposition: fixed;\n\theight: 100%;\n\twidth: 100%;\n\tleft:0;\n\ttop:0;\n\tz-index: 2600;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.monaco-dialog-modal-block.dimmed {\n\tbackground: rgba(0, 0, 0, 0.3);\n}\n\n/** Dialog: Container */\n.monaco-dialog-box {\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n\twidth: min-content;\n\tmin-width: 500px;\n\tmax-width: 90vw;\n\tmin-height: 75px;\n\tpadding: 10px;\n\ttransform: translate3d(0px, 0px, 0px);\n}\n\n/** Dialog: Title Actions Row */\n.monaco-dialog-box .dialog-toolbar-row {\n\theight: 22px;\n\tpadding-bottom: 4px;\n}\n\n.monaco-dialog-box .dialog-toolbar-row .actions-container {\n\tjustify-content: flex-end;\n}\n\n/** Dialog: Message Row */\n.monaco-dialog-box .dialog-message-row {\n\tdisplay: flex;\n\tflex-grow: 1;\n\talign-items: center;\n\tpadding: 0 10px;\n}\n\n.monaco-dialog-box .dialog-message-row > .dialog-icon.codicon {\n\tflex: 0 0 48px;\n\theight: 48px;\n\talign-self: baseline;\n\tfont-size: 48px;\n}\n\n/** Dialog: Message Container */\n.monaco-dialog-box .dialog-message-row .dialog-message-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tpadding-left: 24px;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tword-wrap: break-word; /* never overflow long words, but break to next line */\n\twhite-space: normal;\n}\n\n/** Dialog: Message */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message {\n\tline-height: 22px;\n\tfont-size: 18px;\n\tflex: 1; /* let the message always grow */\n\twhite-space: normal;\n\tword-wrap: break-word; /* never overflow long words, but break to next line */\n\tmin-height: 48px; /* matches icon height */\n\tmargin-bottom: 8px;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n/** Dialog: Details */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-detail {\n\tline-height: 22px;\n\tflex: 1; /* let the message always grow */\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message a:focus {\n\toutline-width: 1px;\n\toutline-style: solid;\n}\n\n/** Dialog: Checkbox */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row {\n\tpadding: 15px 0px 0px;\n\tdisplay: flex;\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row .dialog-checkbox-message {\n\tcursor: pointer;\n\tuser-select: none;\n\t-webkit-user-select: none;\n}\n\n/** Dialog: Input */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input {\n\tpadding: 15px 0px 0px;\n\tdisplay: flex;\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input .monaco-inputbox {\n\tflex: 1;\n}\n\n/** Dialog: File Path */\n.monaco-dialog-box code {\n\tfont-family: var(--monaco-monospace-font);\n}\n\n/** Dialog: Buttons Row */\n.monaco-dialog-box > .dialog-buttons-row {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding-right: 1px;\n\toverflow: hidden; /* buttons row should never overflow */\n}\n\n.monaco-dialog-box > .dialog-buttons-row {\n\tdisplay: flex;\n\twhite-space: nowrap;\n\tpadding: 20px 10px 10px;\n}\n\n/** Dialog: Buttons */\n.monaco-dialog-box > .dialog-buttons-row > .dialog-buttons {\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: flex-end;\n\toverflow: hidden;\n\tmargin-left: 67px; /* for long buttons, force align with text */\n}\n\n.monaco-dialog-box > .dialog-buttons-row > .dialog-buttons > .monaco-button {\n\twidth: fit-content;\n\tpadding: 5px 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmargin: 4px 5px; /* allows button focus outline to be visible */\n\toutline-offset: 2px !important;\n}\n"],sourceRoot:""}]);const l=a},71487:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Xe}),i(29769);var s=i(80855),o=i(84972),n=(i(49953),i(91847)),a=i(34277),l=i(43557),r=i(51902),h=i(89872),c=i(63809),d=i(63580),g=i(14603),u=i(65321),m=i(59069),p=i(90317),f=i(32052),A=i(98892),v=i(90573),C=i(74741),x=i(73046),S=i(25670),b=i(68843),w=i(5976),y=i(1432),B=i(93379),k=i.n(B),F=i(7795),P=i.n(F),D=i(90569),E=i.n(D),U=i(3565),I=i.n(U),N=i(19216),W=i.n(N),T=i(44589),q=i.n(T),L=i(2356),O={};O.styleTagTransform=q(),O.setAttributes=I(),O.insert=E().bind(null,"head"),O.domAPI=P(),O.insertStyleElement=W(),k()(L.Z,O),L.Z&&L.Z.locals&&L.Z.locals;var R=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{r(s.next(e))}catch(e){n(e)}}function l(e){try{r(s.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((s=s.apply(e,t||[])).next())}))};class Z extends w.JT{constructor(e,t,i,s){super(),this.container=e,this.message=t,this.options=s,this.modalElement=this.container.appendChild((0,u.$)(".monaco-dialog-modal-block.dimmed")),this.shadowElement=this.modalElement.appendChild((0,u.$)(".dialog-shadow")),this.element=this.shadowElement.appendChild((0,u.$)(".monaco-dialog-box")),this.element.setAttribute("role","dialog"),this.element.tabIndex=-1,(0,u.Cp)(this.element),this.buttonStyles=s.buttonStyles,Array.isArray(i)&&i.length>0?this.buttons=i:this.options.disableDefaultAction?this.buttons=[]:this.buttons=[d.NC("ok","OK")];const o=this.element.appendChild((0,u.$)(".dialog-buttons-row"));this.buttonsContainer=o.appendChild((0,u.$)(".dialog-buttons"));const n=this.element.appendChild((0,u.$)(".dialog-message-row"));if(this.iconElement=n.appendChild((0,u.$)("#monaco-dialog-icon.dialog-icon")),this.iconElement.setAttribute("aria-label",this.getIconAriaLabel()),this.messageContainer=n.appendChild((0,u.$)(".dialog-message-container")),(this.options.detail||this.options.renderBody)&&(this.messageContainer.appendChild((0,u.$)(".dialog-message")).appendChild((0,u.$)("#monaco-dialog-message-text.dialog-message-text")).innerText=this.message),this.messageDetailElement=this.messageContainer.appendChild((0,u.$)("#monaco-dialog-message-detail.dialog-message-detail")),this.options.detail||!this.options.renderBody?this.messageDetailElement.innerText=this.options.detail?this.options.detail:t:this.messageDetailElement.style.display="none",this.options.renderBody){const e=this.messageContainer.appendChild((0,u.$)("#monaco-dialog-message-body.dialog-message-body"));this.options.renderBody(e);for(const e of this.messageContainer.querySelectorAll("a"))e.tabIndex=0}if(this.options.inputs?this.inputs=this.options.inputs.map((e=>{var t;const i=this.messageContainer.appendChild((0,u.$)(".dialog-message-input")),o=this._register(new v.Wz(i,void 0,{placeholder:e.placeholder,type:null!==(t=e.type)&&void 0!==t?t:"text",inputBoxStyles:s.inputBoxStyles}));return e.value&&(o.value=e.value),o})):this.inputs=[],this.options.checkboxLabel){const e=this.messageContainer.appendChild((0,u.$)(".dialog-checkbox-row")),t=this.checkbox=this._register(new A.XZ(this.options.checkboxLabel,!!this.options.checkboxChecked,s.checkboxStyles));e.appendChild(t.domNode);const i=e.appendChild((0,u.$)(".dialog-checkbox-message"));i.innerText=this.options.checkboxLabel,this._register((0,u.nm)(i,u.tw.CLICK,(()=>t.checked=!t.checked)))}const a=this.element.appendChild((0,u.$)(".dialog-toolbar-row"));this.toolbarContainer=a.appendChild((0,u.$)(".dialog-toolbar")),this.applyStyles()}getIconAriaLabel(){let e=d.NC("dialogInfoMessage","Info");switch(this.options.type){case"error":e=d.NC("dialogErrorMessage","Error");break;case"warning":e=d.NC("dialogWarningMessage","Warning");break;case"pending":e=d.NC("dialogPendingMessage","In Progress")}return e}updateMessage(e){this.messageDetailElement.innerText=e}show(){return R(this,void 0,void 0,(function*(){return this.focusToReturn=document.activeElement,new Promise((e=>{(0,u.PO)(this.buttonsContainer);const t=this.buttonBar=this._register(new f.k2(this.buttonsContainer)),i=this.rearrangeButtons(this.buttons,this.options.cancelId);i.forEach(((s,o)=>{const n=0===i[o].index,a=this.options.buttonDetails?this._register(t.addButtonWithDescription(Object.assign({title:!0,secondary:!n},this.buttonStyles))):this._register(t.addButton(Object.assign({title:!0,secondary:!n},this.buttonStyles)));a.label=(0,b.pH)(i[o].label,!0),a instanceof f.bP&&(a.description=this.options.buttonDetails[i[o].index]),this._register(a.onDidClick((t=>{t&&u.zB.stop(t),e({button:i[o].index,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map((e=>e.value)):void 0})})))})),this._register((0,u.nm)(window,"keydown",(t=>{var s,o;const n=new m.y1(t);if(n.equals(512)&&n.preventDefault(),n.equals(3))return void(this.inputs.some((e=>e.hasFocus()))&&(u.zB.stop(t),e({button:null!==(o=null===(s=i.find((e=>e.index!==this.options.cancelId)))||void 0===s?void 0:s.index)&&void 0!==o?o:0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map((e=>e.value)):void 0})));if(n.equals(10))return;let a=!1;if(n.equals(2)||n.equals(17)||n.equals(1026)||n.equals(15)){const e=[];let t=-1;if(this.messageContainer){const i=this.messageContainer.querySelectorAll("a");for(const s of i)e.push(s),s===document.activeElement&&(t=e.length-1)}for(const i of this.inputs)e.push(i),i.hasFocus()&&(t=e.length-1);if(this.checkbox&&(e.push(this.checkbox),this.checkbox.hasFocus()&&(t=e.length-1)),this.buttonBar)for(const i of this.buttonBar.buttons)e.push(i),i.hasFocus()&&(t=e.length-1);if(n.equals(2)||n.equals(17))-1===t&&(t=0),e[(t+1)%e.length].focus();else{-1===t&&(t=e.length);let i=t-1;-1===i&&(i=e.length-1),e[i].focus()}a=!0}a?u.zB.stop(t,!0):this.options.keyEventProcessor&&this.options.keyEventProcessor(n)}),!0)),this._register((0,u.nm)(window,"keyup",(t=>{u.zB.stop(t,!0);const i=new m.y1(t);!this.options.disableCloseAction&&i.equals(9)&&e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})}),!0)),this._register((0,u.nm)(this.element,"focusout",(e=>{e.relatedTarget&&this.element&&((0,u.jg)(e.relatedTarget,this.element)||(this.focusToReturn=e.relatedTarget,e.target&&(e.target.focus(),u.zB.stop(e,!0))))}),!1));const s="codicon-modifier-spin";if(this.iconElement.classList.remove(...S.kS.asClassNameArray(x.lA.dialogError),...S.kS.asClassNameArray(x.lA.dialogWarning),...S.kS.asClassNameArray(x.lA.dialogInfo),...S.kS.asClassNameArray(x.lA.loading),s),this.options.icon)this.iconElement.classList.add(...S.kS.asClassNameArray(this.options.icon));else switch(this.options.type){case"error":this.iconElement.classList.add(...S.kS.asClassNameArray(x.lA.dialogError));break;case"warning":this.iconElement.classList.add(...S.kS.asClassNameArray(x.lA.dialogWarning));break;case"pending":this.iconElement.classList.add(...S.kS.asClassNameArray(x.lA.loading),s);break;case"none":this.iconElement.classList.add("no-codicon");break;default:this.iconElement.classList.add(...S.kS.asClassNameArray(x.lA.dialogInfo))}if(!this.options.disableCloseAction){const t=this._register(new p.o(this.toolbarContainer,{})),i=this._register(new C.aU("dialog.close",d.NC("dialogClose","Close Dialog"),S.kS.asClassName(x.lA.dialogClose),!0,(()=>R(this,void 0,void 0,(function*(){e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})})))));t.push(i,{icon:!0,label:!1})}this.applyStyles(),this.element.setAttribute("aria-modal","true"),this.element.setAttribute("aria-labelledby","monaco-dialog-icon monaco-dialog-message-text"),this.element.setAttribute("aria-describedby","monaco-dialog-icon monaco-dialog-message-text monaco-dialog-message-detail monaco-dialog-message-body"),(0,u.$Z)(this.element),this.inputs.length>0?(this.inputs[0].focus(),this.inputs[0].select()):i.forEach(((e,i)=>{0===e.index&&t.buttons[i].focus()}))}))}))}applyStyles(){const e=this.options.dialogStyles,t=e.dialogForeground,i=e.dialogBackground,s=e.dialogShadow?`0 0px 8px ${e.dialogShadow}`:"",o=e.dialogBorder?`1px solid ${e.dialogBorder}`:"",n=e.textLinkForeground;if(this.shadowElement.style.boxShadow=s,this.element.style.color=null!=t?t:"",this.element.style.backgroundColor=null!=i?i:"",this.element.style.border=o,n)for(const e of this.messageContainer.getElementsByTagName("a"))e.style.color=n;let a;switch(this.options.type){case"error":a=e.errorIconForeground;break;case"warning":a=e.warningIconForeground;break;default:a=e.infoIconForeground}a&&(this.iconElement.style.color=a)}dispose(){super.dispose(),this.modalElement&&(this.modalElement.remove(),this.modalElement=void 0),this.focusToReturn&&(0,u.jg)(this.focusToReturn,document.body)&&(this.focusToReturn.focus(),this.focusToReturn=void 0)}rearrangeButtons(e,t){const i=e.map(((e,t)=>({label:e,index:t})));if(e.length<2)return i;if(y.dz||y.IJ){if("number"==typeof t&&i[t]){const e=i.splice(t,1)[0];i.splice(1,0,e)}i.reverse()}else if(y.ED&&"number"==typeof t&&i[t]){const e=i.splice(t,1)[0];i.push(e)}return i}}var M=i(3356),X=i(72065),$=i(18806),_=i(86253),V=i(76446);let z=class e extends V.te{static{this.ALLOWABLE_COMMANDS=["copy","cut","editor.action.selectAll","editor.action.clipboardCopyAction","editor.action.clipboardCutAction","editor.action.clipboardPasteAction"]}constructor(e,t,i,s,o,n){super(),this.logService=e,this.layoutService=t,this.keybindingService=i,this.instantiationService=s,this.productService=o,this.clipboardService=n,this.markdownRenderer=this.instantiationService.createInstance($.$,{})}async prompt(e){this.logService.trace("DialogService#prompt",e.message);const t=this.getPromptButtons(e),{button:i,checkboxChecked:s}=await this.doShow(e.type,e.message,t,e.detail,e.cancelButton?t.length-1:-1,e.checkbox,void 0,"object"==typeof e?.custom?e.custom:void 0);return this.getPromptResult(e,i,s)}async confirm(e){this.logService.trace("DialogService#confirm",e.message);const t=this.getConfirmationButtons(e),{button:i,checkboxChecked:s}=await this.doShow(e.type??"question",e.message,t,e.detail,t.length-1,e.checkbox,void 0,"object"==typeof e?.custom?e.custom:void 0);return{confirmed:0===i,checkboxChecked:s}}async input(e){this.logService.trace("DialogService#input",e.message);const t=this.getInputButtons(e),{button:i,checkboxChecked:s,values:o}=await this.doShow(e.type??"question",e.message,t,e.detail,t.length-1,e?.checkbox,e.inputs,"object"==typeof e.custom?e.custom:void 0);return{confirmed:0===i,checkboxChecked:s,values:o}}async about(){const e=e=>(0,d.NC)("aboutDetail","Version: {0}\nCommit: {1}\nDate: {2}\nBrowser: {3}",this.productService.version||"Unknown",this.productService.commit||"Unknown",this.productService.date?`${this.productService.date}${e?" ("+(0,M.Z)(new Date(this.productService.date),!0)+")":""}`:"Unknown",navigator.userAgent),t=e(!0),i=e(!1),{button:s}=await this.doShow(g.Z.Info,this.productService.nameLong,[(0,d.NC)({key:"copy",comment:["&& denotes a mnemonic"]},"&&Copy"),(0,d.NC)("ok","OK")],t,1);0===s&&this.clipboardService.writeText(i)}async doShow(t,i,s,o,n,a,l,r){const h=new w.SL,c=r?e=>{e.classList.add(...r.classes||[]),r.markdownDetails?.forEach((t=>{const i=this.markdownRenderer.render(t.markdown);e.appendChild(i.element),i.element.classList.add(...t.classes||[]),h.add(i)}))}:void 0,d=new Z(this.layoutService.container,i,s,{detail:o,cancelId:n,type:this.getDialogType(t),keyEventProcessor:t=>{const i=this.keybindingService.softDispatch(t,this.layoutService.container);2===i.kind&&i.commandId&&-1===e.ALLOWABLE_COMMANDS.indexOf(i.commandId)&&u.zB.stop(t,!0)},renderBody:c,icon:r?.icon,disableCloseAction:r?.disableCloseAction,buttonDetails:r?.buttonDetails,checkboxLabel:a?.label,checkboxChecked:a?.checked,inputs:l,buttonStyles:_.wG,checkboxStyles:_.oO,inputBoxStyles:_.Hc,dialogStyles:_.C9});h.add(d);const g=await d.show();return h.dispose(),g}};z=(0,s.g)([(0,s.f)(0,l.VZ),(0,s.f)(1,a.F),(0,s.f)(2,n.d),(0,s.f)(3,X.TG),(0,s.f)(4,r.a),(0,s.f)(5,o.p)],z);let H=class extends w.JT{constructor(e,t,i,s,o,n,a){super(),this.dialogService=e,this.impl=new z(t,i,s,o,n,a),this.model=this.dialogService.model,this._register(this.model.onWillShowDialog((()=>{this.currentDialog||this.processDialogs()}))),this.processDialogs()}async processDialogs(){for(;this.model.dialogs.length;){let e;if(this.currentDialog=this.model.dialogs[0],this.currentDialog.args.confirmArgs){const t=this.currentDialog.args.confirmArgs;e=await this.impl.confirm(t.confirmation)}else if(this.currentDialog.args.inputArgs){const t=this.currentDialog.args.inputArgs;e=await this.impl.input(t.input)}else if(this.currentDialog.args.promptArgs){const t=this.currentDialog.args.promptArgs;e=await this.impl.prompt(t.prompt)}else await this.impl.about();this.currentDialog.close(e),this.currentDialog=void 0}}};H=(0,s.g)([(0,s.f)(0,V.Ss),(0,s.f)(1,l.VZ),(0,s.f)(2,a.F),(0,s.f)(3,n.d),(0,s.f)(4,X.TG),(0,s.f)(5,r.a),(0,s.f)(6,o.p)],H),h.B.as(c.I.Workbench).registerWorkbenchContribution(H,1);var j=i(15393),K=i(4669);class Y extends w.JT{constructor(){super(...arguments),this.dialogs=[],this._onWillShowDialog=this._register(new K.Q5),this.onWillShowDialog=this._onWillShowDialog.event,this._onDidShowDialog=this._register(new K.Q5),this.onDidShowDialog=this._onDidShowDialog.event}show(e){const t=new j.CR,i={args:e,close:e=>{this.dialogs.splice(0,1),t.complete(e),this._onDidShowDialog.fire()}};return this.dialogs.push(i),this._onWillShowDialog.fire(),{item:i,result:t.p}}}var G=i(78787);let J=class extends w.JT{constructor(e,t){super(),this.environmentService=e,this.logService=t,this.model=this._register(new Y),this.onWillShowDialog=this.model.onWillShowDialog,this.onDidShowDialog=this.model.onDidShowDialog}skipDialogs(){return!(!this.environmentService.isExtensionDevelopment||!this.environmentService.extensionTestsLocationURI)||!!this.environmentService.enableSmokeTestDriver}async confirm(e){if(this.skipDialogs())return this.logService.trace("DialogService: refused to show confirmation dialog in tests."),{confirmed:!0};const t=this.model.show({confirmArgs:{confirmation:e}});return await t.result}async prompt(e){if(this.skipDialogs())throw new Error(`DialogService: refused to show dialog in tests. Contents: ${e.message}`);const t=this.model.show({promptArgs:{prompt:e}});return await t.result}async input(e){if(this.skipDialogs())throw new Error("DialogService: refused to show input dialog in tests.");const t=this.model.show({inputArgs:{input:e}});return await t.result}async info(e,t){await this.prompt({type:g.Z.Info,message:e,detail:t})}async warn(e,t){await this.prompt({type:g.Z.Warning,message:e,detail:t})}async error(e,t){await this.prompt({type:g.Z.Error,message:e,detail:t})}async about(){if(this.skipDialogs())throw new Error("DialogService: refused to show about dialog in tests.");const e=this.model.show({});await e.result}};J=(0,s.g)([(0,s.f)(0,G.n),(0,s.f)(1,l.VZ)],J);var Q,ee,te,ie,se,oe=i(97108),ne=i(67245),ae=i(40382),le=i(43202),re=i(95935),he=i(82663),ce=i(36248),de=i(75761),ge=i(41157),ue=i(70666),me=i(44349),pe=i(59422),fe=i(73733),Ae=i(72042),ve=i(22016),Ce=i(66663),xe=i(43459),Se=i(93983),be=i(97295),we=i(15527),ye=i(24448),Be=i(51858),ke=i(31106);!function(e){e.ID="workbench.action.files.openLocalFile",e.LABEL=d.NC("openLocalFile","Open Local File..."),e.handler=function(){return e=>e.get(V.Z$).pickFileAndOpen({forceNewWindow:!1,availableFileSystems:[Ce.lg.file]})}}(Q||(Q={})),function(e){e.ID="workbench.action.files.saveLocalFile",e.LABEL=d.NC("saveLocalFile","Save Local File..."),e.handler=function(){return e=>{const t=e.get(ye.AR),i=t.activeEditorPane;return i?t.save({groupId:i.group.id,editor:i.input},{saveAs:!0,availableFileSystems:[Ce.lg.file],reason:1}):Promise.resolve(void 0)}}}(ee||(ee={})),function(e){e.ID="workbench.action.files.openLocalFolder",e.LABEL=d.NC("openLocalFolder","Open Local Folder..."),e.handler=function(){return e=>e.get(V.Z$).pickFolderAndOpen({forceNewWindow:!1,availableFileSystems:[Ce.lg.file]})}}(te||(te={})),function(e){e.ID="workbench.action.files.openLocalFileFolder",e.LABEL=d.NC("openLocalFileFolder","Open Local..."),e.handler=function(){return e=>e.get(V.Z$).pickFileFolderAndOpen({forceNewWindow:!1,availableFileSystems:[Ce.lg.file]})}}(ie||(ie={})),function(e){e[e.Updated=0]="Updated",e[e.UpdatedWithTrailing=1]="UpdatedWithTrailing",e[e.Updating=2]="Updating",e[e.NotUpdated=3]="NotUpdated",e[e.InvalidPath=4]="InvalidPath"}(se||(se={}));const Fe=new Se.uy("remoteFileDialogVisible",!1);let Pe=class{constructor(e,t,i,s,o,n,a,l,r,h,c,d,g,u){this.fileService=e,this.quickInputService=t,this.labelService=i,this.workspaceContextService=s,this.notificationService=o,this.fileDialogService=n,this.modelService=a,this.languageService=l,this.environmentService=r,this.remoteAgentService=h,this.pathService=c,this.keybindingService=d,this.accessibilityService=u,this.hidden=!1,this.allowFileSelection=!0,this.allowFolderSelection=!1,this.requiresTrailing=!1,this.userEnteredPathSegment="",this.autoCompletePathSegment="",this.isWindows=!1,this.separator="/",this.onBusyChangeEmitter=new K.Q5,this.disposables=[this.onBusyChangeEmitter],this.remoteAuthority=this.environmentService.remoteAuthority,this.contextKey=Fe.bindTo(g),this.scheme=this.pathService.defaultUriScheme}set busy(e){this.filePickBox.busy!==e&&(this.filePickBox.busy=e,this.onBusyChangeEmitter.fire(e))}get busy(){return this.filePickBox.busy}async showOpenDialog(e={}){this.scheme=this.getScheme(e.availableFileSystems,e.defaultUri),this.userHome=await this.getUserHome(),this.trueHome=await this.getUserHome(!0);const t=this.getOptions(e);return t?(this.options=t,this.pickResource()):Promise.resolve(void 0)}async showSaveDialog(e){this.scheme=this.getScheme(e.availableFileSystems,e.defaultUri),this.userHome=await this.getUserHome(),this.trueHome=await this.getUserHome(!0),this.requiresTrailing=!0;const t=this.getOptions(e,!0);return t?(this.options=t,this.options.canSelectFolders=!0,this.options.canSelectFiles=!0,new Promise((e=>{this.pickResource(!0).then((t=>{e(t)}))}))):Promise.resolve(void 0)}getOptions(e,t=!1){let i,s;if(e.defaultUri&&(i=this.scheme===e.defaultUri.scheme?e.defaultUri:void 0,s=t?re.EZ(e.defaultUri):void 0),i||(i=this.userHome,s&&(i=re.Vo(i,s))),this.scheme!==Ce.lg.file&&!this.fileService.hasProvider(i))return void this.notificationService.info(d.NC("remoteFileDialog.notConnectedToRemote","File system provider for {0} is not available.",i.toString()));const o=ce.I8(e);return o.defaultUri=i,o}remoteUriFrom(e,t){e.startsWith("\\\\")||(e=e.replace(/\\/g,"/"));const i=this.scheme===Ce.lg.file?ue.ov.file(e):ue.ov.from({scheme:this.scheme,path:e,query:t?.query,fragment:t?.fragment}),s=i.scheme===Ce.lg.file?void 0:this.remoteAuthority??t?.authority;return re.bK(i,s,s?this.pathService.defaultUriScheme:i.scheme)}getScheme(e,t){return e&&e.length>0?t&&e.indexOf(t.scheme)>=0?t.scheme:e[0]:t?t.scheme:Ce.lg.file}async getRemoteAgentEnvironment(){return void 0===this.remoteAgentEnvironment&&(this.remoteAgentEnvironment=await this.remoteAgentService.getEnvironment()),this.remoteAgentEnvironment}getUserHome(e=!1){return e?this.pathService.userHome({preferLocal:this.scheme===Ce.lg.file}):this.fileDialogService.preferredHome(this.scheme)}async pickResource(e=!1){this.allowFolderSelection=!!this.options.canSelectFolders,this.allowFileSelection=!!this.options.canSelectFiles,this.separator=this.labelService.getSeparator(this.scheme,this.remoteAuthority),this.hidden=!1,this.isWindows=await this.checkIsWindowsOS();let t,i=this.options.defaultUri?this.options.defaultUri:this.workspaceContextService.getWorkspace().folders[0].uri;const s=re.DZ(i);if(this.options.defaultUri){try{t=await this.fileService.stat(this.options.defaultUri)}catch(e){}t&&t.isDirectory||(i=re.XX(this.options.defaultUri),this.trailing=re.EZ(this.options.defaultUri))}return new Promise((t=>{if(this.filePickBox=this.quickInputService.createQuickPick(),this.busy=!0,this.filePickBox.matchOnLabel=!1,this.filePickBox.sortByLabel=!1,this.filePickBox.autoFocusOnList=!1,this.filePickBox.ignoreFocusOut=!0,this.filePickBox.ok=!0,this.scheme!==Ce.lg.file&&this.options&&this.options.availableFileSystems&&this.options.availableFileSystems.length>1&&this.options.availableFileSystems.indexOf(Ce.lg.file)>-1){let t;this.filePickBox.customButton=!0,this.filePickBox.customLabel=d.NC("remoteFileDialog.local","Show Local"),t=e?ee:this.allowFileSelection?this.allowFolderSelection?ie:Q:te;const i=this.keybindingService.lookupKeybinding(t.ID);if(i){const e=i.getLabel();e&&(this.filePickBox.customHover=(0,be.WU)("{0} ({1})",t.LABEL,e))}}let o=0,n=!1;function a(e,i){i&&(i=re.e8(i,e.separator),i=re.O2(i)),t(i),e.contextKey.set(!1),e.filePickBox.dispose(),(0,w.B9)(e.disposables)}function l(e){e.busy?e.onBusyChangeEmitter.event((t=>{t||l(e)})):n||(n=!0,o++,e.onDidAccept().then((t=>{t?(e.filePickBox.hide(),a(e,t)):e.hidden?a(e,void 0):(o--,n=!1)})))}this.currentFolder=re.XX(i),this.userEnteredPathSegment="",this.autoCompletePathSegment="",this.filePickBox.title=this.options.title,this.filePickBox.value=this.pathFromUri(this.currentFolder,!0),this.filePickBox.valueSelection=[this.filePickBox.value.length,this.filePickBox.value.length],this.filePickBox.items=[],this.filePickBox.onDidCustom((()=>{if(!n&&!this.busy)return n=!0,o++,this.options.availableFileSystems&&this.options.availableFileSystems.length>1&&(this.options.availableFileSystems=this.options.availableFileSystems.slice(1)),this.filePickBox.hide(),e?this.fileDialogService.showSaveDialog(this.options).then((e=>{a(this,e)})):this.fileDialogService.showOpenDialog(this.options).then((e=>{a(this,e?e[0]:void 0)}))})),this.filePickBox.onDidAccept((e=>{l(this)})),this.filePickBox.onDidChangeActive((e=>{if(n=!1,1===e.length&&this.isSelectionChangeFromUser()){this.filePickBox.validationMessage=void 0;const t=this.constructFullUserPath();(0,be.qq)(this.filePickBox.value.substring(0,t.length),t)||(this.filePickBox.valueSelection=[0,this.filePickBox.value.length],this.insertText(t,t)),this.setAutoComplete(t,this.userEnteredPathSegment,e[0],!0)}})),this.filePickBox.onDidChangeValue((async e=>this.handleValueChange(e))),this.filePickBox.onDidHide((()=>{this.hidden=!0,0===o&&a(this,void 0)})),this.filePickBox.show(),this.contextKey.set(!0),this.updateItems(i,!0,this.trailing).then((()=>{this.trailing?this.filePickBox.valueSelection=[this.filePickBox.value.length-this.trailing.length,this.filePickBox.value.length-s.length]:this.filePickBox.valueSelection=[this.filePickBox.value.length,this.filePickBox.value.length],this.busy=!1}))}))}async handleValueChange(e){try{if(this.isValueChangeFromUser())if((0,be.qq)(e,this.constructFullUserPath())||this.isBadSubpath(e))this.filePickBox.activeItems=[],this.userEnteredPathSegment="";else{this.filePickBox.validationMessage=void 0;const t=this.filePickBoxValue();let i=se.NotUpdated;re.F_.isEqual(this.currentFolder,t)||(i=await this.tryUpdateItems(e,t)),i!==se.NotUpdated&&i!==se.UpdatedWithTrailing||this.setActiveItems(e)}}catch{}}isBadSubpath(e){return this.badPath&&e.length>this.badPath.length&&(0,be.qq)(e.substring(0,this.badPath.length),this.badPath)}isValueChangeFromUser(){return!(0,be.qq)(this.filePickBox.value,this.pathAppend(this.currentFolder,this.userEnteredPathSegment+this.autoCompletePathSegment))}isSelectionChangeFromUser(){return this.activeItem!==(this.filePickBox.activeItems?this.filePickBox.activeItems[0]:void 0)}constructFullUserPath(){const e=this.pathFromUri(this.currentFolder);return(0,be.qq)(this.filePickBox.value.substr(0,this.userEnteredPathSegment.length),this.userEnteredPathSegment)?(0,be.qq)(this.filePickBox.value.substr(0,e.length),e)?e:this.userEnteredPathSegment:this.pathAppend(this.currentFolder,this.userEnteredPathSegment)}filePickBoxValue(){const e=this.remoteUriFrom(this.filePickBox.value.trimRight(),this.currentFolder),t=this.pathFromUri(this.currentFolder);if((0,be.qq)(this.filePickBox.value,t))return this.currentFolder;const i=this.remoteUriFrom(t,this.currentFolder),s=re.lX(i,e),o=this.filePickBox.value.length>1&&t.length>1&&(0,be.qq)(this.filePickBox.value.substr(0,2),t.substr(0,2));if(s&&o){let t=re.Vo(this.currentFolder,s);const i=re.EZ(e);return"."!==i&&".."!==i||(t=this.remoteUriFrom(this.pathAppend(t,i),this.currentFolder)),re.Gm(e)?re.e8(t):t}return e}async onDidAccept(){if(this.busy=!0,1===this.filePickBox.activeItems.length){const e=this.filePickBox.selectedItems[0];if(e.isFolder){if(this.trailing)await this.updateItems(e.uri,!0,this.trailing);else{const t=this.pathFromUri(e.uri);(0,be.ok)(t,this.filePickBox.value)&&(0,be.qq)(e.label,re.EZ(e.uri))?(this.filePickBox.valueSelection=[this.pathFromUri(this.currentFolder).length,this.filePickBox.value.length],this.insertText(t,this.basenameWithTrailingSlash(e.uri))):".."===e.label&&(0,be.ok)(this.filePickBox.value,t)?(this.filePickBox.valueSelection=[t.length,this.filePickBox.value.length],this.insertText(t,"")):await this.updateItems(e.uri,!0)}return void(this.filePickBox.busy=!1)}}else if(await this.tryUpdateItems(this.filePickBox.value,this.filePickBoxValue())!==se.NotUpdated)return void(this.filePickBox.busy=!1);let e;if(0===this.filePickBox.activeItems.length?e=this.filePickBoxValue():1===this.filePickBox.activeItems.length&&(e=this.filePickBox.selectedItems[0].uri),e&&(e=this.addPostfix(e)),await this.validate(e))return this.busy=!1,e;this.busy=!1}root(e){let t=e,i=re.XX(e);for(;!re.Xy(t,i);)t=i,i=re.XX(i);return i}tildaReplace(e){const t=this.trueHome;return e.length>0&&"~"===e[0]?re.Vo(t,e.substring(1)):this.remoteUriFrom(e)}tryAddTrailingSeparatorToDirectory(e,t){return t.isDirectory&&!this.endsWithSlash(e.path)?re.e8(e):e}async tryUpdateItems(e,t){if(e.length>0&&"~"===e[0]){const t=this.tildaReplace(e);return await this.updateItems(t,!0)?se.UpdatedWithTrailing:se.Updated}if("\\"===e)return t=this.root(this.currentFolder),e=this.pathFromUri(t),await this.updateItems(t,!0)?se.UpdatedWithTrailing:se.Updated;if(!re.F_.isEqual(this.currentFolder,t)&&(this.endsWithSlash(e)||!re.F_.isEqual(this.currentFolder,re.XX(t))&&re.F_.isEqualOrParent(this.currentFolder,re.XX(t)))){let i;try{i=await this.fileService.stat(t)}catch(e){}if(i&&i.isDirectory&&"."!==re.EZ(t)&&this.endsWithSlash(e))return t=this.tryAddTrailingSeparatorToDirectory(t,i),await this.updateItems(t)?se.UpdatedWithTrailing:se.Updated;if(this.endsWithSlash(e))return this.filePickBox.validationMessage=d.NC("remoteFileDialog.badPath","The path does not exist."),this.badPath=e,se.InvalidPath;{let e=re.XX(t);const i=re.O2(re.e8(this.currentFolder)),s=re.O2(re.e8(e));if(!(re.F_.isEqual(i,s)||/^[a-zA-Z]:$/.test(this.filePickBox.value)&&(0,be.qq)(this.pathFromUri(this.currentFolder).substring(0,this.filePickBox.value.length),this.filePickBox.value))){let i;try{i=await this.fileService.stat(e)}catch(e){}if(i&&i.isDirectory)return this.badPath=void 0,e=this.tryAddTrailingSeparatorToDirectory(e,i),await this.updateItems(e,!1,re.EZ(t))?se.UpdatedWithTrailing:se.Updated}}}return this.badPath=void 0,se.NotUpdated}tryUpdateTrailing(e){const t=re.DZ(e);this.trailing&&t&&(this.trailing=re.EZ(e))}setActiveItems(e){e=this.pathFromUri(this.tildaReplace(e));const t=this.remoteUriFrom(e),i=re.EZ(t),s=this.constructFullUserPath();if((0,be.qq)(s,e.substring(0,s.length))||(0,be.qq)(e,s.substring(0,e.length))){let o=!1;for(let t=0;t<this.filePickBox.items.length;t++){const s=this.filePickBox.items[t];if(this.setAutoComplete(e,i,s)){o=!0;break}}if(!o){const e=i.length>=2?s.substring(s.length-i.length+2):"";this.userEnteredPathSegment=e===i?i:"",this.autoCompletePathSegment="",this.filePickBox.activeItems=[],this.tryUpdateTrailing(t)}}else this.userEnteredPathSegment=i,this.autoCompletePathSegment="",this.filePickBox.activeItems=[],this.tryUpdateTrailing(t)}setAutoComplete(e,t,i,s=!1){if(this.busy)return this.userEnteredPathSegment=t,this.autoCompletePathSegment="",!1;const o=i.label;return".."===o?(this.userEnteredPathSegment="",this.autoCompletePathSegment="",this.activeItem=i,s&&document.execCommand("insertText",!1,""),!1):!s&&o.length>=t.length&&(0,be.qq)(o.substr(0,t.length),t)?(this.userEnteredPathSegment=t,this.activeItem=i,this.autoCompletePathSegment="",i.isFolder||!this.trailing?this.filePickBox.activeItems=[i]:this.filePickBox.activeItems=[],!0):s&&!(0,be.qq)(this.basenameWithTrailingSlash(i.uri),this.userEnteredPathSegment+this.autoCompletePathSegment)?(this.userEnteredPathSegment="",this.accessibilityService.isScreenReaderOptimized()||(this.autoCompletePathSegment=this.trimTrailingSlash(o)),this.activeItem=i,this.accessibilityService.isScreenReaderOptimized()||(this.filePickBox.valueSelection=[this.pathFromUri(this.currentFolder,!0).length,this.filePickBox.value.length],this.insertText(this.pathAppend(this.currentFolder,this.autoCompletePathSegment),this.autoCompletePathSegment),this.filePickBox.valueSelection=[this.filePickBox.value.length-this.autoCompletePathSegment.length,this.filePickBox.value.length]),!0):(this.userEnteredPathSegment=t,this.autoCompletePathSegment="",!1)}insertText(e,t){this.filePickBox.inputHasFocus()?(document.execCommand("insertText",!1,t),this.filePickBox.value!==e&&(this.filePickBox.value=e,this.handleValueChange(e))):(this.filePickBox.value=e,this.handleValueChange(e))}addPostfix(e){let t=e;if(this.requiresTrailing&&this.options.filters&&this.options.filters.length>0&&!re.Gm(e)){let i=!1;const s=re.DZ(e).substr(1);for(let e=0;e<this.options.filters.length;e++){for(let t=0;t<this.options.filters[e].extensions.length;t++)if("*"===this.options.filters[e].extensions[t]||this.options.filters[e].extensions[t]===s){i=!0;break}if(i)break}i||(t=re.Vo(re.XX(e),re.EZ(e)+"."+this.options.filters[0].extensions[0]))}return t}trimTrailingSlash(e){return e.length>1&&this.endsWithSlash(e)?e.substr(0,e.length-1):e}yesNoPrompt(e,t){const i=this.quickInputService.createQuickPick();i.title=t,i.ignoreFocusOut=!0,i.ok=!0,i.customButton=!0,i.customLabel=d.NC("remoteFileDialog.cancel","Cancel"),i.value=this.pathFromUri(e);let s=!1;return new Promise((e=>{i.onDidAccept((()=>{s=!0,i.hide(),e(!0)})),i.onDidHide((()=>{s||e(!1),this.filePickBox.show(),this.hidden=!1,this.filePickBox.items=this.filePickBox.items,i.dispose()})),i.onDidChangeValue((()=>{i.hide()})),i.onDidCustom((()=>{i.hide()})),i.show()}))}async validate(e){if(void 0===e)return this.filePickBox.validationMessage=d.NC("remoteFileDialog.invalidPath","Please enter a valid path."),Promise.resolve(!1);let t,i;try{i=await this.fileService.stat(re.XX(e)),t=await this.fileService.stat(e)}catch(e){}if(this.requiresTrailing){if(t&&t.isDirectory)return this.filePickBox.validationMessage=d.NC("remoteFileDialog.validateFolder","The folder already exists. Please use a new file name."),Promise.resolve(!1);if(t){const t=d.NC("remoteFileDialog.validateExisting","{0} already exists. Are you sure you want to overwrite it?",re.EZ(e));return this.yesNoPrompt(e,t)}if(!(0,we.AQ)(re.EZ(e),this.isWindows))return this.filePickBox.validationMessage=d.NC("remoteFileDialog.validateBadFilename","Please enter a valid file name."),Promise.resolve(!1);if(!i){const t=d.NC("remoteFileDialog.validateCreateDirectory","The folder {0} does not exist. Would you like to create it?",re.EZ(re.XX(e)));return this.yesNoPrompt(e,t)}if(!i.isDirectory)return this.filePickBox.validationMessage=d.NC("remoteFileDialog.validateNonexistentDir","Please enter a path that exists."),Promise.resolve(!1)}else{if(!t)return this.filePickBox.validationMessage=d.NC("remoteFileDialog.validateNonexistentDir","Please enter a path that exists."),Promise.resolve(!1);if("/"===e.path&&this.isWindows)return this.filePickBox.validationMessage=d.NC("remoteFileDialog.windowsDriveLetter","Please start the path with a drive letter."),Promise.resolve(!1);if(t.isDirectory&&!this.allowFolderSelection)return this.filePickBox.validationMessage=d.NC("remoteFileDialog.validateFileOnly","Please select a file."),Promise.resolve(!1);if(!t.isDirectory&&!this.allowFileSelection)return this.filePickBox.validationMessage=d.NC("remoteFileDialog.validateFolderOnly","Please select a folder."),Promise.resolve(!1)}return Promise.resolve(!0)}async updateItems(e,t=!1,i){this.busy=!0,this.autoCompletePathSegment="";const s=!!i;let o=!1;const n=(0,j.PG)((async n=>{let a;try{a=await this.fileService.resolve(e),a.isDirectory||(i=re.EZ(e),e=re.XX(e),a=void 0,o=!0)}catch(e){}const l=i?this.pathAppend(e,i):this.pathFromUri(e,!0);return this.currentFolder=this.endsWithSlash(e.path)?e:re.e8(e,this.separator),this.userEnteredPathSegment=i||"",this.createItems(a,this.currentFolder,n).then((e=>n.isCancellationRequested?(this.busy=!1,!1):(this.filePickBox.items=e,this.filePickBox.activeItems=[this.filePickBox.items[0]],this.filePickBox.activeItems=[],!(0,be.qq)(this.filePickBox.value,l)&&t&&(this.filePickBox.valueSelection=[0,this.filePickBox.value.length],this.insertText(l,l)),t&&i&&s?this.filePickBox.valueSelection=[this.filePickBox.value.length-i.length,this.filePickBox.value.length-i.length]:i||(this.filePickBox.valueSelection=[this.filePickBox.value.length,this.filePickBox.value.length]),this.busy=!1,this.updatingPromise=void 0,o)))}));return void 0!==this.updatingPromise&&this.updatingPromise.cancel(),this.updatingPromise=n,n}pathFromUri(e,t=!1){let i=(0,b.DT)(e.fsPath,this.isWindows).replace(/\n/g,"");return i="/"===this.separator?i.replace(/\\/g,this.separator):i.replace(/\//g,this.separator),t&&!this.endsWithSlash(i)&&(i+=this.separator),i}pathAppend(e,t){return".."===t||"."===t?this.pathFromUri(e,!0)+t:this.pathFromUri(re.Vo(e,t))}async checkIsWindowsOS(){let e=y.ED;const t=await this.getRemoteAgentEnvironment();return t&&(e=1===t.os),e}endsWithSlash(e){return/[\/\\]$/.test(e)}basenameWithTrailingSlash(e){const t=this.pathFromUri(e,!0),i=this.pathFromUri(re.XX(e),!0);return t.substring(i.length)}async createBackItem(e){const t=this.currentFolder.with({scheme:Ce.lg.file,authority:""}),i=re.XX(t);if(!re.Xy(t,i)){const t=re.XX(e);if(await this.fileService.exists(t))return{label:"..",uri:re.e8(t,this.separator),isFolder:!0}}}async createItems(e,t,i){const s=[],o=await this.createBackItem(t);try{e||(e=await this.fileService.resolve(t));const o=e.children?await Promise.all(e.children.map((e=>this.createItem(e,t,i)))):[];for(const e of o)e&&s.push(e)}catch(e){console.log(e)}if(i.isCancellationRequested)return[];const n=s.sort(((e,t)=>{if(e.isFolder!==t.isFolder)return e.isFolder?-1:1;const i=this.endsWithSlash(e.label)?e.label.substr(0,e.label.length-1):e.label,s=this.endsWithSlash(t.label)?t.label.substr(0,t.label.length-1):t.label;return i.localeCompare(s)}));return o&&n.unshift(o),n}extname(e){const t=re.DZ(e);if(0!==t.length)return t;{const t=re.EZ(e);if(t.startsWith("."))return t}return""}filterFile(e){if(this.options.filters){const t=this.extname(e);for(let e=0;e<this.options.filters.length;e++)for(let i=0;i<this.options.filters[e].extensions.length;i++){const s=this.options.filters[e].extensions[i];if("*"===s||t==="."+s)return!0}return!1}return!0}async createItem(e,t,i){if(i.isCancellationRequested)return;let s=re.Vo(t,e.name);if(e.isDirectory){const e=re.EZ(s);return s=re.e8(s,this.separator),{label:e,uri:s,isFolder:!0,iconClasses:(0,ve.r)(this.modelService,this.languageService,s||void 0,de.RR.FOLDER)}}return!e.isDirectory&&this.allowFileSelection&&this.filterFile(s)?{label:e.name,uri:s,isFolder:!1,iconClasses:(0,ve.r)(this.modelService,this.languageService,s||void 0)}:void 0}};Pe=(0,s.g)([(0,s.f)(0,de.sn),(0,s.f)(1,ge.eJ),(0,s.f)(2,me.e),(0,s.f)(3,ae.ec),(0,s.f)(4,pe.lT),(0,s.f)(5,V.Z$),(0,s.f)(6,fe.q),(0,s.f)(7,Ae.O),(0,s.f)(8,G.n),(0,s.f)(9,xe.R),(0,s.f)(10,Be.a),(0,s.f)(11,n.d),(0,s.f)(12,Se.i6),(0,s.f)(13,ke.F7)],Pe);var De=i(18076),Ee=i(33108),Ue=i(50988),Ie=i(85526),Ne=i(9488),We=i(68801),Te=i(94565),qe=i(11640),Le=i(22844);let Oe=class{constructor(e,t,i,s,o,n,a,l,r,h,c,d,g,u,m,p,f){this.hostService=e,this.contextService=t,this.historyService=i,this.environmentService=s,this.instantiationService=o,this.configurationService=n,this.fileService=a,this.openerService=l,this.dialogService=r,this.languageService=h,this.workspacesService=c,this.labelService=d,this.pathService=g,this.commandService=u,this.editorService=m,this.codeEditorService=p,this.logService=f}async defaultFilePath(e=this.getSchemeFilterForWindow()){let t=this.historyService.getLastActiveFile(e);return t=t?re.XX(t):this.historyService.getLastActiveWorkspaceRoot(e),t||(t=await this.preferredHome(e)),t}async defaultFolderPath(e=this.getSchemeFilterForWindow()){let t=this.historyService.getLastActiveWorkspaceRoot(e);return t||(t=this.historyService.getLastActiveFile(e)),t?re.XX(t):this.preferredHome(e)}async preferredHome(e=this.getSchemeFilterForWindow()){const t=e===Ce.lg.file,i=this.configurationService.inspect("files.dialog.defaultPath"),s=t?i.userLocalValue:i.userRemoteValue;if(s&&(t?(0,he.YP)(s):(await this.pathService.path).isAbsolute(s))){const e=t?(0,he.Fv)(s):(await this.pathService.path).normalize(s),i=re.bK(await this.pathService.fileURI(e),this.environmentService.remoteAuthority,this.pathService.defaultUriScheme);if(await this.fileService.exists(i))return i}return this.pathService.userHome({preferLocal:t})}async defaultWorkspacePath(e=this.getSchemeFilterForWindow()){let t;if(3===this.contextService.getWorkbenchState()){const i=this.contextService.getWorkspace().configuration;i?.scheme===e&&(0,ae.AQ)(i,this.environmentService)&&!(0,ae.gC)(i)&&(t=re.XX(i))}return t||(t=await this.defaultFilePath(e)),t}async showSaveConfirm(e){return this.skipDialogs()?(this.logService.trace("FileDialogService: refused to show save confirmation dialog in tests."),1):this.doShowSaveConfirm(e)}skipDialogs(){return!(!this.environmentService.isExtensionDevelopment||!this.environmentService.extensionTestsLocationURI)||!!this.environmentService.enableSmokeTestDriver}async doShowSaveConfirm(e){if(0===e.length)return 1;let t,i=d.NC("saveChangesDetail","Your changes will be lost if you don't save them.");1===e.length?t=d.NC("saveChangesMessage","Do you want to save the changes you made to {0}?","string"==typeof e[0]?e[0]:re.EZ(e[0])):(t=d.NC("saveChangesMessages","Do you want to save the changes to the following {0} files?",e.length),i=(0,V.kc)(e)+"\n"+i);const{result:s}=await this.dialogService.prompt({type:g.Z.Warning,message:t,detail:i,buttons:[{label:e.length>1?d.NC({key:"saveAll",comment:["&& denotes a mnemonic"]},"&&Save All"):d.NC({key:"save",comment:["&& denotes a mnemonic"]},"&&Save"),run:()=>0},{label:d.NC({key:"dontSave",comment:["&& denotes a mnemonic"]},"Do&&n't Save"),run:()=>1}],cancelButton:{run:()=>2}});return s}addFileSchemaIfNeeded(e,t){return e===Ce.lg.untitled?[Ce.lg.file]:e!==Ce.lg.file?[e,Ce.lg.file]:[e]}async pickFileFolderAndOpenSimplified(e,t,i){const s=d.NC("openFileOrFolder.title","Open File or Folder"),o=this.addFileSchemaIfNeeded(e),n=await this.pickResource({canSelectFiles:!0,canSelectFolders:!0,canSelectMany:!1,defaultUri:t.defaultUri,title:s,availableFileSystems:o});if(n){const e=await this.fileService.stat(n),s=e.isDirectory?{folderUri:n}:{fileUri:n};!(0,ne.Ux)(s)&&(0,ne.pS)(s)&&this.addFileToRecentlyOpened(s.fileUri),e.isDirectory||t.forceNewWindow||i?await this.hostService.openWindow([s],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority}):await this.editorService.openEditors([{resource:n,options:{source:Le.vU.USER,pinned:!0}}],void 0,{validateTrust:!0})}}async pickFileAndOpenSimplified(e,t,i){const s=d.NC("openFile.title","Open File"),o=this.addFileSchemaIfNeeded(e),n=await this.pickResource({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:t.defaultUri,title:s,availableFileSystems:o});n&&(this.addFileToRecentlyOpened(n),t.forceNewWindow||i?await this.hostService.openWindow([{fileUri:n}],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority}):await this.editorService.openEditors([{resource:n,options:{source:Le.vU.USER,pinned:!0}}],void 0,{validateTrust:!0}))}addFileToRecentlyOpened(e){this.workspacesService.addRecentlyOpened([{fileUri:e,label:this.labelService.getUriLabel(e)}])}async pickFolderAndOpenSimplified(e,t){const i=d.NC("openFolder.title","Open Folder"),s=this.addFileSchemaIfNeeded(e,!0),o=await this.pickResource({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:t.defaultUri,title:i,availableFileSystems:s});if(o)return this.hostService.openWindow([{folderUri:o}],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority})}async pickWorkspaceAndOpenSimplified(e,t){const i=d.NC("openWorkspace.title","Open Workspace from File"),s=[{name:d.NC("filterName.workspace","Workspace"),extensions:[ae.A6]}],o=this.addFileSchemaIfNeeded(e,!0),n=await this.pickResource({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:t.defaultUri,title:i,filters:s,availableFileSystems:o});if(n)return this.hostService.openWindow([{workspaceUri:n}],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority})}async pickFileToSaveSimplified(e,t){t.availableFileSystems||(t.availableFileSystems=this.addFileSchemaIfNeeded(e)),t.title=d.NC("saveFileAs.title","Save As");const i=await this.saveRemoteResource(t);return i&&this.addFileToRecentlyOpened(i),i}async showSaveDialogSimplified(e,t){return t.availableFileSystems||(t.availableFileSystems=this.addFileSchemaIfNeeded(e)),this.saveRemoteResource(t)}async showOpenDialogSimplified(e,t){t.availableFileSystems||(t.availableFileSystems=this.addFileSchemaIfNeeded(e,t.canSelectFolders));const i=await this.pickResource(t);return i?[i]:void 0}getSimpleFileDialog(){return this.instantiationService.createInstance(Pe)}pickResource(e){return this.getSimpleFileDialog().showOpenDialog(e)}saveRemoteResource(e){return this.getSimpleFileDialog().showSaveDialog(e)}getSchemeFilterForWindow(e){return e??this.pathService.defaultUriScheme}getFileSystemSchema(e){return e.availableFileSystems&&e.availableFileSystems[0]||this.getSchemeFilterForWindow(e.defaultUri?.scheme)}getWorkspaceAvailableFileSystems(e){if(e.availableFileSystems&&e.availableFileSystems.length>0)return e.availableFileSystems;const t=[Ce.lg.file];return this.environmentService.remoteAuthority&&t.unshift(Ce.lg.vscodeRemote),t}getPickFileToSaveDialogOptions(e,t){const i={defaultUri:e,title:d.NC("saveAsTitle","Save As"),availableFileSystems:t},s=e?re.DZ(e):void 0;let o;const n=this.languageService.getSortedRegisteredLanguageNames(),a=(0,Ne.kX)(n.map((({languageName:e,languageId:t})=>{const i=this.languageService.getExtensions(t);if(!i.length)return null;const n={name:e,extensions:(0,Ne.EB)(i).slice(0,10).map((e=>(0,be.fy)(e,".")))},a=s||We.y5;if(!o&&i.includes(a)){o=n;const e=(0,be.fy)(a,".");return n.extensions.includes(e)||n.extensions.unshift(e),null}return n})));return!o&&s&&(o={name:(0,be.fy)(s,".").toUpperCase(),extensions:[(0,be.fy)(s,".")]}),i.filters=(0,Ne.kX)([{name:d.NC("allFiles","All Files"),extensions:["*"]},o,...a,{name:d.NC("noExt","No Extension"),extensions:[""]}]),i}};Oe=(0,s.g)([(0,s.f)(0,Ie.$),(0,s.f)(1,ae.ec),(0,s.f)(2,le.CE),(0,s.f)(3,G.n),(0,s.f)(4,X.TG),(0,s.f)(5,Ee.Ui),(0,s.f)(6,de.sn),(0,s.f)(7,Ue.v4),(0,s.f)(8,V.Ss),(0,s.f)(9,Ae.O),(0,s.f)(10,De.Dc),(0,s.f)(11,me.e),(0,s.f)(12,Be.a),(0,s.f)(13,Te.H),(0,s.f)(14,ye.AR),(0,s.f)(15,qe.$),(0,s.f)(16,l.VZ)],Oe);var Re=i(76779),Ze=i(5107);class Me extends Oe{constructor(){super(...arguments),this.pickWorkspaceAndOpen=Ze.Jc}async pickFileFolderAndOpen(e){const t=this.getFileSystemSchema(e);return null==e.defaultUri&&(e.defaultUri=await this.defaultFilePath(t)),super.pickFileFolderAndOpenSimplified(t,e,!1)}async pickFolderAndOpen(e){const t=this.getFileSystemSchema(e);return null==e.defaultUri&&(e.defaultUri=await this.defaultFolderPath(t)),super.pickFolderAndOpenSimplified(t,e)}async pickFileAndOpen(e){const t=this.getFileSystemSchema(e);return null==e.defaultUri&&(e.defaultUri=await this.defaultFilePath(t)),super.pickFileAndOpenSimplified(t,e,!1)}async showSaveDialog(e){const t=this.getFileSystemSchema(e);return super.showSaveDialogSimplified(t,e)}async showOpenDialog(e){const t=this.getFileSystemSchema(e);return super.showOpenDialogSimplified(t,e)}async pickFileToSave(e,t){const i=this.getFileSystemSchema({defaultUri:e,availableFileSystems:t}),s=this.getPickFileToSaveDialogOptions(e,t);return super.pickFileToSaveSimplified(i,s)}}function Xe(e){return{[V.Ss.toString()]:new oe.M(J,void 0,!0),[V.Z$.toString()]:new oe.M(Me,void 0,!0),...(0,Re.Z)(e)}}},67245:(e,t,i)=>{i.d(t,{ET:()=>l,Ux:()=>o,fi:()=>a,pS:()=>n});var s=i(1432);function o(e){return!!e.workspaceUri}function n(e){return!!e.fileUri}function a(e){const t=l(e),i=e.getValue("window.menuBarVisibility");return"default"===i||"native"===t&&"compact"===i||s.dz&&s.tY?"classic":i}function l(e){if(s.$L)return"custom";const t=e.getValue("window");if(t){if(s.dz&&!0===t.nativeTabs)return"native";if(s.dz&&!1===t.nativeFullScreen)return"native";const e=t.titleBarStyle;if("native"===e||"custom"===e)return e}return s.IJ?"native":"custom"}}}]);
//# sourceMappingURL=487.bundle.js.map