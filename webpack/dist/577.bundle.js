"use strict";(self.webpackChunkmonaco_custom_bundle=self.webpackChunkmonaco_custom_bundle||[]).push([[577],{30577:(t,i,e)=>{e.r(i),e.d(i,{default:()=>Dt}),e(29769);var o=e(80855),n=e(3277);(0,n.Z)(".monaco-workbench>.notifications-toasts{bottom:26px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{border-radius:4px;margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}",{});var s=e(63580),a=e(5976),r=e(65321),c=e(72065);(0,n.Z)(".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);border-radius:inherit;color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{border-radius:4px;box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .monaco-scrollable-element{border-radius:4px}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .monaco-list:focus-within .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0;height:2px}",{});var l=e(32414),h=e(88550),d=e(50988),f=e(70666),m=e(32052),u=e(90317),p=e(74741),g=e(5606),b=e(75909);(0,n.Z)(".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}",{});var v=e(2384),C=e(94565),w=e(84972),y=e(73046),N=e(59554),S=e(25670);const D=(0,N.q5)("notifications-clear",y.lA.close,(0,s.NC)("clearIcon","Icon for the clear action in notifications.")),x=(0,N.q5)("notifications-clear-all",y.lA.clearAll,(0,s.NC)("clearAllIcon","Icon for the clear all action in notifications.")),I=(0,N.q5)("notifications-hide",y.lA.chevronDown,(0,s.NC)("hideIcon","Icon for the hide action in notifications.")),k=(0,N.q5)("notifications-expand",y.lA.chevronUp,(0,s.NC)("expandIcon","Icon for the expand action in notifications.")),T=(0,N.q5)("notifications-collapse",y.lA.chevronDown,(0,s.NC)("collapseIcon","Icon for the collapse action in notifications.")),L=(0,N.q5)("notifications-configure",y.lA.gear,(0,s.NC)("configureIcon","Icon for the configure action in notifications.")),E=(0,N.q5)("notifications-do-not-disturb",y.lA.bellSlash,(0,s.NC)("doNotDisturbIcon","Icon for the mute all action in notifications."));let A=class extends p.aU{static{this.ID=v.X4}static{this.LABEL=(0,s.NC)("clearNotification","Clear Notification")}constructor(t,i,e){super(t,i,S.kS.asClassName(D)),this.commandService=e}async run(t){this.commandService.executeCommand(v.X4,t)}};A=(0,o.g)([(0,o.f)(2,C.H)],A);let _=class extends p.aU{static{this.ID=v.k8}static{this.LABEL=(0,s.NC)("clearNotifications","Clear All Notifications")}constructor(t,i,e){super(t,i,S.kS.asClassName(x)),this.commandService=e}async run(){this.commandService.executeCommand(v.k8)}};_=(0,o.g)([(0,o.f)(2,C.H)],_);let M=class extends p.aU{static{this.ID=v.gT}static{this.LABEL=(0,s.NC)("toggleDoNotDisturbMode","Toggle Do Not Disturb Mode")}constructor(t,i,e){super(t,i,S.kS.asClassName(E)),this.commandService=e}async run(){this.commandService.executeCommand(v.gT)}};M=(0,o.g)([(0,o.f)(2,C.H)],M);let V=class extends p.aU{static{this.ID=v.CS}static{this.LABEL=(0,s.NC)("hideNotificationsCenter","Hide Notifications")}constructor(t,i,e){super(t,i,S.kS.asClassName(I)),this.commandService=e}async run(){this.commandService.executeCommand(v.CS)}};V=(0,o.g)([(0,o.f)(2,C.H)],V);let H=class extends p.aU{static{this.ID=v.$K}static{this.LABEL=(0,s.NC)("expandNotification","Expand Notification")}constructor(t,i,e){super(t,i,S.kS.asClassName(k)),this.commandService=e}async run(t){this.commandService.executeCommand(v.$K,t)}};H=(0,o.g)([(0,o.f)(2,C.H)],H);let O=class extends p.aU{static{this.ID=v.HB}static{this.LABEL=(0,s.NC)("collapseNotification","Collapse Notification")}constructor(t,i,e){super(t,i,S.kS.asClassName(T)),this.commandService=e}async run(t){this.commandService.executeCommand(v.HB,t)}};O=(0,o.g)([(0,o.f)(2,C.H)],O);class R extends p.aU{static{this.ID="workbench.action.configureNotification"}static{this.LABEL=(0,s.NC)("configureNotification","Configure Notification")}constructor(t,i,e){super(t,i,S.kS.asClassName(L)),this.configurationActions=e}}let B=class extends p.aU{static{this.ID="workbench.action.copyNotificationMessage"}static{this.LABEL=(0,s.NC)("copyNotification","Copy Text")}constructor(t,i,e){super(t,i),this.clipboardService=e}run(t){return this.clipboardService.writeText(t.message.raw)}};B=(0,o.g)([(0,o.f)(2,w.p)],B);var F=e(91847),P=e(11218),G=e(59422),W=e(9488),K=e(98324),z=e(4850),U=e(10553),j=e(4669),X=e(86253),$=e(59069);class Y{static{this.ROW_HEIGHT=42}static{this.LINE_HEIGHT=22}constructor(t){this.offsetHelper=this.createOffsetHelper(t)}createOffsetHelper(t){const i=document.createElement("div");return i.classList.add("notification-offset-helper"),t.appendChild(i),i}getHeight(t){if(!t.expanded)return Y.ROW_HEIGHT;let i=Y.ROW_HEIGHT;const e=this.computePreferredHeight(t);return Y.LINE_HEIGHT<e&&(i+=e-Y.LINE_HEIGHT),(t.source||(0,W.Of)(t.actions&&t.actions.primary))&&(i+=Y.ROW_HEIGHT),i===Y.ROW_HEIGHT&&t.collapse(!0),i}computePreferredHeight(t){let i=0;t.hasProgress||i++,t.canCollapse&&i++,(0,W.Of)(t.actions&&t.actions.secondary)&&i++,this.offsetHelper.style.width=450-(36+32*i-4)+"px";const e=q.render(t.message);this.offsetHelper.appendChild(e);const o=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return(0,r.PO)(this.offsetHelper),o}getTemplateId(t){if(t instanceof b.VJ)return J.TEMPLATE_ID;throw new Error("unknown element type: "+t)}}class q{static render(t,i){const e=document.createElement("span");for(const o of t.linkedText.nodes)if("string"==typeof o)e.appendChild(document.createTextNode(o));else{let t=o.title;!t&&o.href.startsWith("command:")?t=(0,s.NC)("executeCommand","Click to execute command '{0}'",o.href.substr(8)):t||(t=o.href);const n=(0,r.$)("a",{href:o.href,title:t,tabIndex:0},o.label);if(i){const t=t=>{(0,r.cl)(t)&&r.zB.stop(t,!0),i.callback(o.href)},e=i.toDispose.add(new z.Y(n,r.tw.CLICK)).event,s=i.toDispose.add(new z.Y(n,r.tw.KEY_DOWN)).event,a=i.toDispose.add(j.ju.chain(s)).filter((t=>{const i=new $.y1(t);return i.equals(10)||i.equals(3)})).event;i.toDispose.add(U.o.addTarget(n));const c=i.toDispose.add(new z.Y(n,U.t.Tap)).event;j.ju.any(e,c,a)(t,null,i.toDispose)}e.appendChild(n)}return e}}let J=class t{static{this.TEMPLATE_ID="notification"}constructor(t,i,e){this.actionRunner=t,this.contextMenuService=i,this.instantiationService=e}get templateId(){return t.TEMPLATE_ID}renderTemplate(t){const i=Object.create(null);i.toDispose=new a.SL,i.container=document.createElement("div"),i.container.classList.add("notification-list-item"),i.mainRow=document.createElement("div"),i.mainRow.classList.add("notification-list-item-main-row"),i.icon=document.createElement("div"),i.icon.classList.add("notification-list-item-icon","codicon"),i.message=document.createElement("div"),i.message.classList.add("notification-list-item-message");const e=document.createElement("div");return e.classList.add("notification-list-item-toolbar-container"),i.toolbar=new u.o(e,{ariaLabel:(0,s.NC)("notificationActions","Notification Actions"),actionViewItemProvider:t=>{if(t&&t instanceof R){const e=new K.C(t,t.configurationActions,this.contextMenuService,{actionRunner:this.actionRunner,classNames:t.class});return i.toDispose.add(e),e}},actionRunner:this.actionRunner}),i.toDispose.add(i.toolbar),i.detailsRow=document.createElement("div"),i.detailsRow.classList.add("notification-list-item-details-row"),i.source=document.createElement("div"),i.source.classList.add("notification-list-item-source"),i.buttonsContainer=document.createElement("div"),i.buttonsContainer.classList.add("notification-list-item-buttons-container"),t.appendChild(i.container),i.container.appendChild(i.detailsRow),i.detailsRow.appendChild(i.source),i.detailsRow.appendChild(i.buttonsContainer),i.container.appendChild(i.mainRow),i.mainRow.appendChild(i.icon),i.mainRow.appendChild(i.message),i.mainRow.appendChild(e),i.progress=new P.k(t,X.b5),i.toDispose.add(i.progress),i.renderer=this.instantiationService.createInstance(Q,i,this.actionRunner),i.toDispose.add(i.renderer),i}renderElement(t,i,e){e.renderer.setInput(t)}disposeTemplate(t){(0,a.B9)(t.toDispose)}};J=(0,o.g)([(0,o.f)(1,g.i),(0,o.f)(2,c.TG)],J);let Q=class t extends a.JT{static{this.SEVERITIES=[G.zb.Info,G.zb.Warning,G.zb.Error]}constructor(i,e,o,n,s,r){super(),this.template=i,this.actionRunner=e,this.openerService=o,this.instantiationService=n,this.keybindingService=s,this.contextMenuService=r,this.inputDisposables=this._register(new a.SL),t.closeNotificationAction||(t.closeNotificationAction=n.createInstance(A,A.ID,A.LABEL),t.expandNotificationAction=n.createInstance(H,H.ID,H.LABEL),t.collapseNotificationAction=n.createInstance(O,O.ID,O.LABEL))}setInput(t){this.inputDisposables.clear(),this.render(t)}render(t){this.template.container.classList.toggle("expanded",t.expanded),this.inputDisposables.add((0,r.nm)(this.template.container,r.tw.MOUSE_UP,(t=>{1===t.button&&r.zB.stop(t,!0)}))),this.inputDisposables.add((0,r.nm)(this.template.container,r.tw.AUXCLICK,(i=>{t.hasProgress||1!==i.button||(r.zB.stop(i,!0),t.close())}))),this.renderSeverity(t);const i=this.renderMessage(t);this.renderSecondaryActions(t,i),this.renderSource(t),this.renderButtons(t),this.renderProgress(t),this.inputDisposables.add(t.onDidChangeContent((i=>{switch(i.kind){case 0:this.renderSeverity(t);break;case 3:this.renderProgress(t);break;case 1:this.renderMessage(t)}})))}renderSeverity(i){t.SEVERITIES.forEach((t=>{i.severity!==t&&this.template.icon.classList.remove(...S.kS.asClassNameArray(this.toSeverityIcon(t)))})),this.template.icon.classList.add(...S.kS.asClassNameArray(this.toSeverityIcon(i.severity)))}renderMessage(t){(0,r.PO)(this.template.message),this.template.message.appendChild(q.render(t.message,{callback:t=>this.openerService.open(f.ov.parse(t),{allowCommands:!0}),toDispose:this.inputDisposables}));const i=t.canCollapse&&!t.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return i?this.template.message.title=this.template.message.textContent+"":this.template.message.removeAttribute("title"),i}renderSecondaryActions(i,e){const o=[],n=i.actions?i.actions.secondary:void 0;if((0,W.Of)(n)){const t=this.instantiationService.createInstance(R,R.ID,R.LABEL,n);o.push(t),this.inputDisposables.add(t)}let s=!1;i.canCollapse&&(i.expanded||i.source||e)&&(s=!0),s&&o.push(i.expanded?t.collapseNotificationAction:t.expandNotificationAction),i.hasProgress||o.push(t.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=i,o.forEach((t=>this.template.toolbar.push(t,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(t)})))}renderSource(t){t.expanded&&t.source?(this.template.source.textContent=(0,s.NC)("notificationSource","Source: {0}",t.source),this.template.source.title=t.source):(this.template.source.textContent="",this.template.source.removeAttribute("title"))}renderButtons(t){(0,r.PO)(this.template.buttonsContainer);const i=t.actions?t.actions.primary:void 0;if(t.expanded&&(0,W.Of)(i)){const e=this,o=new class extends p.Wi{async runAction(i){e.actionRunner.run(i,t),i instanceof b.O_&&i.keepOpen||t.close()}},n=this.inputDisposables.add(new m.k2(this.template.buttonsContainer));for(let t=0;t<i.length;t++){const e=i[t],s={title:!0,secondary:t>0,...X.wG},a=e instanceof b.O_?e.menu:void 0,c=this.inputDisposables.add(a?n.addButtonWithDropdown({...s,contextMenuProvider:this.contextMenuService,actions:a,actionRunner:o}):n.addButton(s));c.label=e.label,this.inputDisposables.add(c.onDidClick((t=>{t&&r.zB.stop(t,!0),o.run(e)})))}}}renderProgress(t){if(!t.hasProgress)return void this.template.progress.stop().hide();const i=t.progress.state;i.infinite?this.template.progress.infinite().show():"number"==typeof i.total||"number"==typeof i.worked?("number"!=typeof i.total||this.template.progress.hasTotal()||this.template.progress.total(i.total),"number"==typeof i.worked&&this.template.progress.setWorked(i.worked).show()):this.template.progress.done().hide()}toSeverityIcon(t){switch(t){case G.zb.Warning:return y.lA.warning;case G.zb.Error:return y.lA.error}return y.lA.info}getKeybindingLabel(t){const i=this.keybindingService.lookupKeybinding(t.id);return i?i.getLabel():null}};Q=(0,o.g)([(0,o.f)(2,d.v4),(0,o.f)(3,c.TG),(0,o.f)(4,F.d),(0,o.f)(5,g.i)],Q);var Z=e(98401),tt=e(88813),it=e(33108);let et=class extends a.JT{constructor(t,i,e,o){super(),this.container=t,this.options=i,this.instantiationService=e,this.contextMenuService=o,this.viewModel=[]}show(){this.isVisible||(this.list||this.createNotificationsList(),this.isVisible=!0)}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const t=this._register(this.instantiationService.createInstance(v.HU)),i=this.instantiationService.createInstance(J,t),e=this.listDelegate=new Y(this.listContainer),o=this.options,n=this.list=this._register(this.instantiationService.createInstance(l.ev,"NotificationsList",this.listContainer,e,[i],{...o,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:h.wk},accessibilityProvider:this.instantiationService.createInstance(ot,o)})),s=this._register(this.instantiationService.createInstance(B,B.ID,B.LABEL));this._register(n.onContextMenu((i=>{i.element&&this.contextMenuService.showContextMenu({getAnchor:()=>i.anchor,getActions:()=>[s],getActionsContext:()=>i.element,actionRunner:t})}))),this._register(n.onMouseDblClick((t=>t.element.toggle())));const a=this._register((0,r.go)(n.getHTMLElement()));this._register(a.onDidBlur((()=>{document.hasFocus()&&n.setFocus([])}))),tt.Mc.bindTo(n.contextKeyService),this._register(n.onDidChangeSelection((t=>{t.indexes.length>0&&n.setSelection([])}))),this.container.appendChild(this.listContainer)}updateNotificationsList(t,i,e=[]){const[o,n]=(0,Z.ld)(this.list,this.listContainer),s=(0,r.jg)(document.activeElement,n),a=o.getFocus()[0],c=this.viewModel[a];let l=null;if("number"==typeof a&&(l=o.getRelativeTop(a)),this.viewModel.splice(t,i,...e),o.splice(t,i,e),o.layout(),0===this.viewModel.length)this.hide();else if("number"==typeof a){let t=0;if(c){let i=this.viewModel.indexOf(c);-1===i&&(i=a-1),i<this.viewModel.length&&i>=0&&(t=i)}"number"==typeof l&&o.reveal(t,l),o.setFocus([t])}this.isVisible&&s&&o.domFocus()}updateNotificationHeight(t){const i=this.viewModel.indexOf(t);if(-1===i)return;const[e,o]=(0,Z.ld)(this.list,this.listDelegate);e.updateElementHeight(i,o.getHeight(t)),e.layout()}hide(){this.isVisible&&this.list&&(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return!!this.listContainer&&(0,r.jg)(document.activeElement,this.listContainer)}layout(t,i){this.listContainer&&this.list&&(this.listContainer.style.width=`${t}px`,"number"==typeof i&&(this.list.getHTMLElement().style.maxHeight=`${i}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};et=(0,o.g)([(0,o.f)(2,c.TG),(0,o.f)(3,g.i)],et);let ot=class{constructor(t,i,e){this._options=t,this._keybindingService=i,this._configurationService=e}getAriaLabel(t){let i;const e=this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel();return this._configurationService.getValue("accessibility.verbosity.notification")&&(i=e?(0,s.NC)("notificationAccessibleViewHint","Inspect the response in the accessible view with {0}",e):(0,s.NC)("notificationAccessibleViewHintNoKb","Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")),t.source?i?(0,s.NC)("notificationWithSourceAriaLabelHint","{0}, source: {1}, notification, {2}",t.message.raw,t.source,i):(0,s.NC)("notificationWithSourceAriaLabel","{0}, source: {1}, notification",t.message.raw,t.source):i?(0,s.NC)("notificationAriaLabelHint","{0}, notification, {1}",t.message.raw,i):(0,s.NC)("notificationAriaLabel","{0}, notification",t.message.raw)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??(0,s.NC)("notificationsList","Notifications List")}getRole(){return"dialog"}};ot=(0,o.g)([(0,o.f)(1,F.d),(0,o.f)(2,it.Ui)],ot);var nt,st=e(9301),at=e(97781),rt=e(73910),ct=e(86456),lt=e(93983),ht=e(22384),dt=e(85526),ft=e(15393);!function(t){t[t.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",t[t.HIDDEN=1]="HIDDEN",t[t.VISIBLE=2]="VISIBLE"}(nt||(nt={}));let mt=class t extends at.bB{static{this.MAX_WIDTH=450}static{this.MAX_NOTIFICATIONS=3}static{this.PURGE_TIMEOUT={[G.zb.Info]:15e3,[G.zb.Warning]:18e3,[G.zb.Error]:2e4}}static{this.SPAM_PROTECTION={interval:800,limit:t.MAX_NOTIFICATIONS}}get isVisible(){return!!this._isVisible}constructor(i,e,o,n,s,a,r,c,l){super(s),this.container=i,this.model=e,this.instantiationService=o,this.layoutService=n,this.editorGroupService=a,this.contextKeyService=r,this.lifecycleService=c,this.hostService=l,this._onDidChangeVisibility=this._register(new j.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.notificationsToastsVisibleContextKey=tt.Bm.bindTo(this.contextKeyService),this.addedToastsIntervalCounter=new ft.JE(t.SPAM_PROTECTION.interval),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayout((t=>this.layout(r.Ro.lift(t))))),this.lifecycleService.when(3).then((()=>{this.model.notifications.forEach((t=>this.addToast(t))),this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t))))})),this._register(this.model.onDidChangeFilter((t=>{t!==G.NG.SILENT&&t!==G.NG.ERROR||this.hide()})))}onDidChangeNotification(t){switch(t.kind){case 0:return this.addToast(t.item);case 3:return this.removeToast(t.item)}}addToast(i){if(this.isNotificationsCenterVisible)return;if(i.priority===G.RX.SILENT)return;if(this.addedToastsIntervalCounter.increment()>t.SPAM_PROTECTION.limit)return;const e=new a.SL;this.mapNotificationToDisposable.set(i,e),e.add((0,r.jL)((()=>this.doAddToast(i,e))))}doAddToast(t,i){let e=this.notificationsToastsContainer;e||(e=this.notificationsToastsContainer=document.createElement("div"),e.classList.add("notifications-toasts"),this.container.appendChild(e)),e.classList.add("visible");const o=document.createElement("div");o.classList.add("notification-toast-container");const n=e.firstChild;n?e.insertBefore(o,n):e.appendChild(o);const c=document.createElement("div");c.classList.add("notification-toast"),o.appendChild(c);const l=this.instantiationService.createInstance(et,c,{verticalScrollMode:2,widgetAriaLabel:t.source?(0,s.NC)("notificationWithSourceAriaLabel","{0}, source: {1}, notification",t.message.raw,t.source):(0,s.NC)("notificationAriaLabel","{0}, notification",t.message.raw)});i.add(l);const h={item:t,list:l,container:o,toast:c};this.mapNotificationToToast.set(t,h),i.add((0,a.OF)((()=>this.updateToastVisibility(h,!1)))),l.show();const d=this.computeMaxDimensions();this.layoutLists(d.width),l.updateNotificationsList(0,0,[t]),this.layoutContainer(d.height),i.add(t.onDidChangeExpansion((()=>{l.updateNotificationsList(0,1,[t])}))),i.add(t.onDidChangeContent((i=>{switch(i.kind){case 2:l.updateNotificationsList(0,1,[t]);break;case 1:t.expanded&&l.updateNotificationHeight(t)}}))),j.ju.once(t.onDidClose)((()=>{this.removeToast(t)})),this.purgeNotification(t,o,l,i),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),c.classList.add("notification-fade-in"),i.add((0,r.nm)(c,"transitionend",(()=>{c.classList.remove("notification-fade-in"),c.classList.add("notification-fade-in-done")}))),t.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(i,e,o,n){let s,c,l=!1;n.add((0,r.nm)(e,r.tw.MOUSE_OVER,(()=>l=!0))),n.add((0,r.nm)(e,r.tw.MOUSE_OUT,(()=>l=!1)));const h=()=>{s=setTimeout((()=>{this.hostService.hasFocus?i.sticky||o.hasFocus()||l?h():this.removeToast(i):c||(c=this.hostService.onDidChangeFocus((t=>{t&&h()})),n.add(c))}),t.PURGE_TIMEOUT[i.severity])};h(),n.add((0,a.OF)((()=>clearTimeout(s))))}removeToast(t){let i=!1;const e=this.mapNotificationToToast.get(t);e&&((0,r.jg)(document.activeElement,e.container)&&(i=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(t));const o=this.mapNotificationToDisposable.get(t);o&&((0,a.B9)(o),this.mapNotificationToDisposable.delete(t)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),i&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach((t=>(0,a.B9)(t))),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){this.notificationsToastsContainer?.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const t=!!this.notificationsToastsContainer&&(0,r.jg)(document.activeElement,this.notificationsToastsContainer);this.removeToasts(),t&&this.editorGroupService.activeGroup.focus()}focus(){const t=this.getToasts(nt.VISIBLE);return t.length>0&&(t[0].list.focusFirst(),!0)}focusNext(){const t=this.getToasts(nt.VISIBLE);for(let i=0;i<t.length;i++)if(t[i].list.hasFocus()){const e=t[i+1];if(e)return e.list.focusFirst(),!0;break}return!1}focusPrevious(){const t=this.getToasts(nt.VISIBLE);for(let i=0;i<t.length;i++)if(t[i].list.hasFocus()){const e=t[i-1];if(e)return e.list.focusFirst(),!0;break}return!1}focusFirst(){const t=this.getToasts(nt.VISIBLE)[0];return!!t&&(t.list.focusFirst(),!0)}focusLast(){const t=this.getToasts(nt.VISIBLE);return t.length>0&&(t[t.length-1].list.focusFirst(),!0)}update(t){this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach((({toast:t})=>{const i=this.getColor(h.wk);t.style.background=i||"";const e=this.getColor(rt.rh);t.style.boxShadow=e?`0 0 8px 2px ${e}`:"";const o=this.getColor(h.zL);t.style.border=o?`1px solid ${o}`:""}))}getToasts(t){const i=[];return this.mapNotificationToToast.forEach((e=>{switch(t){case nt.HIDDEN_OR_VISIBLE:i.push(e);break;case nt.HIDDEN:this.isToastInDOM(e)||i.push(e);break;case nt.VISIBLE:this.isToastInDOM(e)&&i.push(e)}})),i.reverse()}layout(t){this.workbenchDimensions=t;const i=this.computeMaxDimensions();i.height&&this.layoutContainer(i.height),this.layoutLists(i.width)}computeMaxDimensions(){const i=t.MAX_WIDTH;let e,o=i;return this.workbenchDimensions&&(o=this.workbenchDimensions.width,o-=16,e=this.workbenchDimensions.height,this.layoutService.isVisible("workbench.parts.statusbar")&&(e-=22),this.layoutService.isVisible("workbench.parts.titlebar")&&(e-=22),e-=24),e="number"==typeof e?Math.round(.618*e):0,new r.Ro(Math.min(i,o),e)}layoutLists(t){this.mapNotificationToToast.forEach((({list:i})=>i.layout(t)))}layoutContainer(i){let e=0;for(const o of this.getToasts(nt.HIDDEN_OR_VISIBLE)){o.container.style.opacity="0",this.updateToastVisibility(o,!0),i-=o.container.offsetHeight;let n=!1;e===t.MAX_NOTIFICATIONS?n=!1:i>=0&&(n=!0),this.updateToastVisibility(o,n),o.container.style.opacity="",n&&e++}}updateToastVisibility(t,i){if(this.isToastInDOM(t)===i)return;const e=(0,Z.cW)(this.notificationsToastsContainer);i?e.appendChild(t.container):e.removeChild(t.container),t.item.updateVisibility(i)}isToastInDOM(t){return!!t.container.parentElement}};mt=(0,o.g)([(0,o.f)(2,c.TG),(0,o.f)(3,st.ze),(0,o.f)(4,at.XE),(0,o.f)(5,ct.Qw),(0,o.f)(6,lt.i6),(0,o.f)(7,ht.g),(0,o.f)(8,dt.$)],mt);var ut=e(26904);let pt=class t extends a.JT{constructor(i){super(),this.storageService=i,this.model=this._register(new b.Px),this._onDidAddNotification=this._register(new j.Q5),this.onDidAddNotification=this._onDidAddNotification.event,this._onDidRemoveNotification=this._register(new j.Q5),this.onDidRemoveNotification=this._onDidRemoveNotification.event,this._onDidChangeDoNotDisturbMode=this._register(new j.Q5),this.onDidChangeDoNotDisturbMode=this._onDidChangeDoNotDisturbMode.event,this._doNotDisturbMode=this.storageService.getBoolean(t.DND_SETTINGS_KEY,-1,!1),this.updateDoNotDisturbFilters(),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>{switch(t.kind){case 0:case 3:{const i={message:t.item.message.original,severity:t.item.severity,source:"string"==typeof t.item.sourceId&&"string"==typeof t.item.source?{id:t.item.sourceId,label:t.item.source}:t.item.source,priority:t.item.priority};0===t.kind&&this._onDidAddNotification.fire(i),3===t.kind&&this._onDidRemoveNotification.fire(i);break}}})))}static{this.DND_SETTINGS_KEY="notifications.doNotDisturbMode"}get doNotDisturbMode(){return this._doNotDisturbMode}set doNotDisturbMode(i){this._doNotDisturbMode!==i&&(this.storageService.store(t.DND_SETTINGS_KEY,i,-1,1),this._doNotDisturbMode=i,this.updateDoNotDisturbFilters(),this._onDidChangeDoNotDisturbMode.fire())}updateDoNotDisturbFilters(){let t;t=this._doNotDisturbMode?G.NG.ERROR:G.NG.OFF,this.model.setFilter(t)}info(t){Array.isArray(t)?t.forEach((t=>this.info(t))):this.model.addNotification({severity:G.zb.Info,message:t})}warn(t){Array.isArray(t)?t.forEach((t=>this.warn(t))):this.model.addNotification({severity:G.zb.Warning,message:t})}error(t){Array.isArray(t)?t.forEach((t=>this.error(t))):this.model.addNotification({severity:G.zb.Error,message:t})}notify(t){const i=new a.SL;if(t.neverShowAgain){const o=this.toStorageScope(t.neverShowAgain),n=t.neverShowAgain.id;if(this.storageService.getBoolean(n,o))return new G.EO;const a=i.add(new p.aU("workbench.notification.neverShowAgain",(0,s.NC)("neverShowAgain","Don't Show Again"),void 0,!0,(async()=>{e.close(),this.storageService.store(n,!0,o,0)}))),r={primary:t.actions?.primary||[],secondary:t.actions?.secondary||[]};t.neverShowAgain.isSecondary?r.secondary=[...r.secondary,a]:r.primary=[a,...r.primary],t.actions=r}const e=this.model.addNotification(t);return j.ju.once(e.onDidClose)((()=>i.dispose())),e}toStorageScope(t){switch(t.scope){case G.YB.APPLICATION:return-1;case G.YB.PROFILE:return 0;case G.YB.WORKSPACE:return 1;default:return-1}}prompt(t,i,e,o){const n=new a.SL;if(o?.neverShowAgain){const t=this.toStorageScope(o.neverShowAgain),i=o.neverShowAgain.id;if(this.storageService.getBoolean(i,t))return new G.EO;const n={label:(0,s.NC)("neverShowAgain","Don't Show Again"),run:()=>this.storageService.store(i,!0,t,0),isSecondary:o.neverShowAgain.isSecondary};e=o.neverShowAgain.isSecondary?[...e,n]:[n,...e]}let r=!1;const c=[],l=[];e.forEach(((t,i)=>{const e=new b.O_(`workbench.dialog.choice.${i}`,t);t.isSecondary?l.push(e):c.push(e),n.add(e.onDidRun((()=>{r=!0,t.keepOpen||d.close()}))),n.add(e)}));const h={primary:c,secondary:l},d=this.notify({severity:t,message:i,actions:h,sticky:o?.sticky,priority:o?.priority});return j.ju.once(d.onDidClose)((()=>{n.dispose(),o&&"function"==typeof o.onCancel&&!r&&o.onCancel()})),d}status(t,i){return this.model.showStatusMessage(t,i)}};pt=(0,o.g)([(0,o.f)(0,ut.Uy)],pt);var gt=e(97108);(0,n.Z)(".monaco-workbench>.notifications-center{border-radius:4px;bottom:31px;display:none;overflow:hidden;position:absolute;right:8px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:8px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row[data-last-element=false]>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container,.monaco-workbench>.notifications-center .notifications-list-container .monaco-scrollable-element,.monaco-workbench>.notifications-center .notifications-list-container .notification-list-item{border-radius:0}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}",{});let bt=class t extends at.bB{static{this.MAX_DIMENSIONS=new r.Ro(450,400)}constructor(t,i,e,o,n,s,a,r,c){super(e),this.container=t,this.model=i,this.instantiationService=o,this.layoutService=n,this.contextKeyService=s,this.editorGroupService=a,this.keybindingService=r,this.notificationService=c,this._onDidChangeVisibility=this._register(new j.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=tt.di.bindTo(this.contextKeyService),this.notificationsCenterVisibleContextKey=tt.di.bindTo(s),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t)))),this._register(this.layoutService.onDidLayout((t=>this.layout(r.Ro.lift(t))))),this._register(this.notificationService.onDidChangeDoNotDisturbMode((()=>this.onDidChangeDoNotDisturbMode())))}onDidChangeDoNotDisturbMode(){this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){const t=(0,Z.cW)(this.notificationsList);return t.show(),void t.focusFirst()}this.notificationsCenterContainer||this.create(),this.updateTitle();const[t,i]=(0,Z.ld)(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,i.classList.add("visible"),t.show(),this.layout(this.workbenchDimensions),t.updateNotificationsList(0,0,this.model.notifications),t.focusFirst(),this.updateStyles(),this.model.notifications.forEach((t=>t.updateVisibility(!0))),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[t,i]=(0,Z.ld)(this.notificationsCenterTitle,this.clearAllAction);0===this.model.notifications.length?(t.textContent=(0,s.NC)("notificationsEmpty","No new notifications"),i.enabled=!1):(t.textContent=(0,s.NC)("notifications","Notifications"),i.enabled=this.model.notifications.some((t=>!t.hasProgress)))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const t=document.createElement("div");t.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(t);const i=this._register(this.instantiationService.createInstance(v.HU)),e=this._register(new u.o(t,{ariaLabel:(0,s.NC)("notificationsToolbar","Notification Center Actions"),actionRunner:i}));this.clearAllAction=this._register(this.instantiationService.createInstance(_,_.ID,_.LABEL)),e.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.toggleDoNotDisturbAction=this._register(this.instantiationService.createInstance(M,M.ID,M.LABEL)),e.push(this.toggleDoNotDisturbAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.toggleDoNotDisturbAction)});const o=this._register(this.instantiationService.createInstance(V,V.ID,V.LABEL));e.push(o,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(o)}),this.notificationsList=this.instantiationService.createInstance(et,this.notificationsCenterContainer,{widgetAriaLabel:(0,s.NC)("notificationsCenterWidgetAriaLabel","Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(t){const i=this.keybindingService.lookupKeybinding(t.id);return i?i.getLabel():null}onDidChangeNotification(t){if(!this._isVisible)return;let i=!1;const[e,o]=(0,Z.ld)(this.notificationsList,this.notificationsCenterContainer);switch(t.kind){case 0:e.updateNotificationsList(t.index,0,[t.item]),t.item.updateVisibility(!0);break;case 1:switch(t.detail){case 2:e.updateNotificationsList(t.index,1,[t.item]);break;case 1:t.item.expanded&&e.updateNotificationHeight(t.item)}break;case 2:e.updateNotificationsList(t.index,1,[t.item]);break;case 3:i=(0,r.jg)(document.activeElement,o),e.updateNotificationsList(t.index,1),t.item.updateVisibility(!1)}this.updateTitle(),0===this.model.notifications.length&&(this.hide(),i&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const t=(0,r.jg)(document.activeElement,this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach((t=>t.updateVisibility(!1))),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),t&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const t=this.getColor(rt.rh);this.notificationsCenterContainer.style.boxShadow=t?`0 0 8px 2px ${t}`:"";const i=this.getColor(h.Vs);this.notificationsCenterContainer.style.border=i?`1px solid ${i}`:"";const e=this.getColor(h.H5);this.notificationsCenterHeader.style.color=e??"";const o=this.getColor(h.D3);this.notificationsCenterHeader.style.background=o??""}}layout(i){if(this.workbenchDimensions=i,this._isVisible&&this.notificationsCenterContainer){const i=t.MAX_DIMENSIONS.width,e=t.MAX_DIMENSIONS.height;let o=i,n=e;this.workbenchDimensions&&(o=this.workbenchDimensions.width,o-=16,n=this.workbenchDimensions.height-35,this.layoutService.isVisible("workbench.parts.statusbar")&&(n-=22),this.layoutService.isVisible("workbench.parts.titlebar")&&(n-=22),n-=24),(0,Z.cW)(this.notificationsList).layout(Math.min(i,o),Math.min(e,n))}}clearAll(){this.hide();for(const t of[...this.model.notifications])t.hasProgress||t.close()}};bt=(0,o.g)([(0,o.f)(2,at.XE),(0,o.f)(3,c.TG),(0,o.f)(4,st.ze),(0,o.f)(5,lt.i6),(0,o.f)(6,ct.Qw),(0,o.f)(7,F.d),(0,o.f)(8,G.lT)],bt);var vt=e(56346),Ct=e(59523);class wt extends a.JT{constructor(t){super(),this.model=t;for(const i of t.notifications)this.triggerAriaAlert(i);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification((t=>this.onDidChangeNotification(t))))}onDidChangeNotification(t){0===t.kind&&(this.triggerAriaAlert(t.item),t.item.severity===G.zb.Error&&(t.item.message.original instanceof Error?console.error(t.item.message.original):console.error((0,Ct.yJ)(t.item.message.linkedText.toString(),!0))))}triggerAriaAlert(t){if(t.priority===G.RX.SILENT)return;const i=t.onDidChangeContent((i=>{1===i.kind&&this.doTriggerAriaAlert(t)}));j.ju.once(t.onDidClose)((()=>i.dispose())),this.doTriggerAriaAlert(t)}doTriggerAriaAlert(t){let i;i=t.severity===G.zb.Error?(0,s.NC)("alertErrorMessage","Error: {0}",t.message.linkedText.toString()):t.severity===G.zb.Warning?(0,s.NC)("alertWarningMessage","Warning: {0}",t.message.linkedText.toString()):(0,s.NC)("alertInfoMessage","Info: {0}",t.message.linkedText.toString()),(0,vt.Z9)(i)}}var yt=e(25042),Nt=e(34277),St=e(76779);function Dt(t){return{[G.lT.toString()]:new gt.M(pt,void 0,!0),...(0,St.Z)(t)}}(0,e(75560).yG)((async t=>{const i=t.get(Nt.F).container,e=t.get(G.lT).model,o=t.get(c.TG);setTimeout((()=>{const t=o.createInstance(bt,i,e),n=o.createInstance(mt,i,e);o.createInstance(wt,e),o.createInstance(yt.R),(0,v.w6)(t,n,e),n.layout(r.D6(i))}))}))}}]);
//# sourceMappingURL=577.bundle.js.map