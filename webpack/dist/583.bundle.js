"use strict";(self.webpackChunkmonaco_custom_bundle=self.webpackChunkmonaco_custom_bundle||[]).push([[583],{43552:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(87537),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-breadcrumbs {\n\tuser-select: none;\n\t-webkit-user-select: none;\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\tjustify-content: flex-start;\n\toutline-style: none;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item {\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 0 1 auto;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\talign-self: center;\n\theight: 100%;\n\toutline: none;\n}\n.monaco-breadcrumbs.disabled .monaco-breadcrumb-item {\n\tcursor: default;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item .codicon-breadcrumb-separator {\n\tcolor: inherit;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item:first-of-type::before {\n\tcontent: ' ';\n}\n","",{version:3,sources:["webpack://./node_modules/monaco-editor/esm/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.css"],names:[],mappings:"AAAA;;;+FAG+F;;AAE/F;CACC,iBAAiB;CACjB,yBAAyB;CACzB,aAAa;CACb,mBAAmB;CACnB,iBAAiB;CACjB,2BAA2B;CAC3B,mBAAmB;AACpB;;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,cAAc;CACd,mBAAmB;CACnB,eAAe;CACf,kBAAkB;CAClB,YAAY;CACZ,aAAa;AACd;AACA;CACC,eAAe;AAChB;;AAEA;CACC,cAAc;AACf;;AAEA;CACC,YAAY;AACb",sourcesContent:["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-breadcrumbs {\n\tuser-select: none;\n\t-webkit-user-select: none;\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\tjustify-content: flex-start;\n\toutline-style: none;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item {\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 0 1 auto;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\talign-self: center;\n\theight: 100%;\n\toutline: none;\n}\n.monaco-breadcrumbs.disabled .monaco-breadcrumb-item {\n\tcursor: default;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item .codicon-breadcrumb-separator {\n\tcolor: inherit;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item:first-of-type::before {\n\tcontent: ' ';\n}\n"],sourceRoot:""}]);const a=r},93039:(e,t,i)=>{i.d(t,{Z:()=>a});var o=i(87537),s=i.n(o),n=i(23645),r=i.n(n)()(s());r.push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-hover {\n\tcursor: default;\n\tposition: absolute;\n\toverflow: hidden;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tbox-sizing: border-box;\n\tanimation: fadein 100ms linear;\n\tline-height: 1.5em;\n}\n\n.monaco-hover.hidden {\n\tdisplay: none;\n}\n\n.monaco-hover a:hover:not(.disabled) {\n\tcursor: pointer;\n}\n\n.monaco-hover .hover-contents:not(.html-hover-contents) {\n\tpadding: 4px 8px;\n}\n\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) {\n\tmax-width: var(--hover-maxWidth, 500px);\n\tword-wrap: break-word;\n}\n\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) hr {\n\tmin-width: 100%;\n}\n\n.monaco-hover p,\n.monaco-hover .code,\n.monaco-hover ul,\n.monaco-hover h1,\n.monaco-hover h2,\n.monaco-hover h3,\n.monaco-hover h4,\n.monaco-hover h5,\n.monaco-hover h6 {\n\tmargin: 8px 0;\n}\n\n.monaco-hover h1,\n.monaco-hover h2,\n.monaco-hover h3,\n.monaco-hover h4,\n.monaco-hover h5,\n.monaco-hover h6 {\n\tline-height: 1.1;\n}\n\n.monaco-hover code {\n\tfont-family: var(--monaco-monospace-font);\n}\n\n.monaco-hover hr {\n\tbox-sizing: border-box;\n\tborder-left: 0px;\n\tborder-right: 0px;\n\tmargin-top: 4px;\n\tmargin-bottom: -4px;\n\tmargin-left: -8px;\n\tmargin-right: -8px;\n\theight: 1px;\n}\n\n.monaco-hover p:first-child,\n.monaco-hover .code:first-child,\n.monaco-hover ul:first-child {\n\tmargin-top: 0;\n}\n\n.monaco-hover p:last-child,\n.monaco-hover .code:last-child,\n.monaco-hover ul:last-child {\n\tmargin-bottom: 0;\n}\n\n/* MarkupContent Layout */\n.monaco-hover ul {\n\tpadding-left: 20px;\n}\n.monaco-hover ol {\n\tpadding-left: 20px;\n}\n\n.monaco-hover li > p {\n\tmargin-bottom: 0;\n}\n\n.monaco-hover li > ul {\n\tmargin-top: 0;\n}\n\n.monaco-hover code {\n\tborder-radius: 3px;\n\tpadding: 0 0.4em;\n}\n\n.monaco-hover .monaco-tokenized-source {\n\twhite-space: pre-wrap;\n}\n\n.monaco-hover .hover-row.status-bar {\n\tfont-size: 12px;\n\tline-height: 22px;\n}\n\n.monaco-hover .hover-row.status-bar .info {\n\tfont-style: italic;\n\tpadding: 0px 8px;\n}\n\n.monaco-hover .hover-row.status-bar .actions {\n\tdisplay: flex;\n\tpadding: 0px 8px;\n}\n\n.monaco-hover .hover-row.status-bar .actions .action-container {\n\tmargin-right: 16px;\n\tcursor: pointer;\n}\n\n.monaco-hover .hover-row.status-bar .actions .action-container .action .icon {\n\tpadding-right: 4px;\n}\n\n.monaco-hover .markdown-hover .hover-contents .codicon {\n\tcolor: inherit;\n\tfont-size: inherit;\n\tvertical-align: middle;\n}\n\n.monaco-hover .hover-contents a.code-link:hover,\n.monaco-hover .hover-contents a.code-link {\n\tcolor: inherit;\n}\n\n.monaco-hover .hover-contents a.code-link:before {\n\tcontent: '(';\n}\n\n.monaco-hover .hover-contents a.code-link:after {\n\tcontent: ')';\n}\n\n.monaco-hover .hover-contents a.code-link > span {\n\ttext-decoration: underline;\n\t/** Hack to force underline to show **/\n\tborder-bottom: 1px solid transparent;\n\ttext-underline-position: under;\n\tcolor: var(--vscode-textLink-foreground);\n}\n\n.monaco-hover .hover-contents a.code-link > span:hover {\n\tcolor: var(--vscode-textLink-activeForeground);\n}\n\n/** Spans in markdown hovers need a margin-bottom to avoid looking cramped: https://github.com/microsoft/vscode/issues/101496 **/\n.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span {\n\tmargin-bottom: 4px;\n\tdisplay: inline-block;\n}\n\n.monaco-hover-content .action-container a {\n\t-webkit-user-select: none;\n\tuser-select: none;\n}\n\n.monaco-hover-content .action-container.disabled {\n\tpointer-events: none;\n\topacity: 0.4;\n\tcursor: default;\n}\n","",{version:3,sources:["webpack://./node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hover.css"],names:[],mappings:"AAAA;;;+FAG+F;;AAE/F;CACC,eAAe;CACf,kBAAkB;CAClB,gBAAgB;CAChB,iBAAiB;CACjB,yBAAyB;CACzB,sBAAsB;CACtB,8BAA8B;CAC9B,kBAAkB;AACnB;;AAEA;CACC,aAAa;AACd;;AAEA;CACC,eAAe;AAChB;;AAEA;CACC,gBAAgB;AACjB;;AAEA;CACC,uCAAuC;CACvC,qBAAqB;AACtB;;AAEA;CACC,eAAe;AAChB;;AAEA;;;;;;;;;CASC,aAAa;AACd;;AAEA;;;;;;CAMC,gBAAgB;AACjB;;AAEA;CACC,yCAAyC;AAC1C;;AAEA;CACC,sBAAsB;CACtB,gBAAgB;CAChB,iBAAiB;CACjB,eAAe;CACf,mBAAmB;CACnB,iBAAiB;CACjB,kBAAkB;CAClB,WAAW;AACZ;;AAEA;;;CAGC,aAAa;AACd;;AAEA;;;CAGC,gBAAgB;AACjB;;AAEA,yBAAyB;AACzB;CACC,kBAAkB;AACnB;AACA;CACC,kBAAkB;AACnB;;AAEA;CACC,gBAAgB;AACjB;;AAEA;CACC,aAAa;AACd;;AAEA;CACC,kBAAkB;CAClB,gBAAgB;AACjB;;AAEA;CACC,qBAAqB;AACtB;;AAEA;CACC,eAAe;CACf,iBAAiB;AAClB;;AAEA;CACC,kBAAkB;CAClB,gBAAgB;AACjB;;AAEA;CACC,aAAa;CACb,gBAAgB;AACjB;;AAEA;CACC,kBAAkB;CAClB,eAAe;AAChB;;AAEA;CACC,kBAAkB;AACnB;;AAEA;CACC,cAAc;CACd,kBAAkB;CAClB,sBAAsB;AACvB;;AAEA;;CAEC,cAAc;AACf;;AAEA;CACC,YAAY;AACb;;AAEA;CACC,YAAY;AACb;;AAEA;CACC,0BAA0B;CAC1B,sCAAsC;CACtC,oCAAoC;CACpC,8BAA8B;CAC9B,wCAAwC;AACzC;;AAEA;CACC,8CAA8C;AAC/C;;AAEA,gIAAgI;AAChI;CACC,kBAAkB;CAClB,qBAAqB;AACtB;;AAEA;CACC,yBAAyB;CACzB,iBAAiB;AAClB;;AAEA;CACC,oBAAoB;CACpB,YAAY;CACZ,eAAe;AAChB",sourcesContent:["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-hover {\n\tcursor: default;\n\tposition: absolute;\n\toverflow: hidden;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tbox-sizing: border-box;\n\tanimation: fadein 100ms linear;\n\tline-height: 1.5em;\n}\n\n.monaco-hover.hidden {\n\tdisplay: none;\n}\n\n.monaco-hover a:hover:not(.disabled) {\n\tcursor: pointer;\n}\n\n.monaco-hover .hover-contents:not(.html-hover-contents) {\n\tpadding: 4px 8px;\n}\n\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) {\n\tmax-width: var(--hover-maxWidth, 500px);\n\tword-wrap: break-word;\n}\n\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) hr {\n\tmin-width: 100%;\n}\n\n.monaco-hover p,\n.monaco-hover .code,\n.monaco-hover ul,\n.monaco-hover h1,\n.monaco-hover h2,\n.monaco-hover h3,\n.monaco-hover h4,\n.monaco-hover h5,\n.monaco-hover h6 {\n\tmargin: 8px 0;\n}\n\n.monaco-hover h1,\n.monaco-hover h2,\n.monaco-hover h3,\n.monaco-hover h4,\n.monaco-hover h5,\n.monaco-hover h6 {\n\tline-height: 1.1;\n}\n\n.monaco-hover code {\n\tfont-family: var(--monaco-monospace-font);\n}\n\n.monaco-hover hr {\n\tbox-sizing: border-box;\n\tborder-left: 0px;\n\tborder-right: 0px;\n\tmargin-top: 4px;\n\tmargin-bottom: -4px;\n\tmargin-left: -8px;\n\tmargin-right: -8px;\n\theight: 1px;\n}\n\n.monaco-hover p:first-child,\n.monaco-hover .code:first-child,\n.monaco-hover ul:first-child {\n\tmargin-top: 0;\n}\n\n.monaco-hover p:last-child,\n.monaco-hover .code:last-child,\n.monaco-hover ul:last-child {\n\tmargin-bottom: 0;\n}\n\n/* MarkupContent Layout */\n.monaco-hover ul {\n\tpadding-left: 20px;\n}\n.monaco-hover ol {\n\tpadding-left: 20px;\n}\n\n.monaco-hover li > p {\n\tmargin-bottom: 0;\n}\n\n.monaco-hover li > ul {\n\tmargin-top: 0;\n}\n\n.monaco-hover code {\n\tborder-radius: 3px;\n\tpadding: 0 0.4em;\n}\n\n.monaco-hover .monaco-tokenized-source {\n\twhite-space: pre-wrap;\n}\n\n.monaco-hover .hover-row.status-bar {\n\tfont-size: 12px;\n\tline-height: 22px;\n}\n\n.monaco-hover .hover-row.status-bar .info {\n\tfont-style: italic;\n\tpadding: 0px 8px;\n}\n\n.monaco-hover .hover-row.status-bar .actions {\n\tdisplay: flex;\n\tpadding: 0px 8px;\n}\n\n.monaco-hover .hover-row.status-bar .actions .action-container {\n\tmargin-right: 16px;\n\tcursor: pointer;\n}\n\n.monaco-hover .hover-row.status-bar .actions .action-container .action .icon {\n\tpadding-right: 4px;\n}\n\n.monaco-hover .markdown-hover .hover-contents .codicon {\n\tcolor: inherit;\n\tfont-size: inherit;\n\tvertical-align: middle;\n}\n\n.monaco-hover .hover-contents a.code-link:hover,\n.monaco-hover .hover-contents a.code-link {\n\tcolor: inherit;\n}\n\n.monaco-hover .hover-contents a.code-link:before {\n\tcontent: '(';\n}\n\n.monaco-hover .hover-contents a.code-link:after {\n\tcontent: ')';\n}\n\n.monaco-hover .hover-contents a.code-link > span {\n\ttext-decoration: underline;\n\t/** Hack to force underline to show **/\n\tborder-bottom: 1px solid transparent;\n\ttext-underline-position: under;\n\tcolor: var(--vscode-textLink-foreground);\n}\n\n.monaco-hover .hover-contents a.code-link > span:hover {\n\tcolor: var(--vscode-textLink-activeForeground);\n}\n\n/** Spans in markdown hovers need a margin-bottom to avoid looking cramped: https://github.com/microsoft/vscode/issues/101496 **/\n.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span {\n\tmargin-bottom: 4px;\n\tdisplay: inline-block;\n}\n\n.monaco-hover-content .action-container a {\n\t-webkit-user-select: none;\n\tuser-select: none;\n}\n\n.monaco-hover-content .action-container.disabled {\n\tpointer-events: none;\n\topacity: 0.4;\n\tcursor: default;\n}\n"],sourceRoot:""}]);const a=r},82246:(e,t,i)=>{i.d(t,{S:()=>_,c:()=>S});var o=i(65321),s=i(59069),n=i(64117),r=i(5976),a=i(93379),c=i.n(a),d=i(7795),h=i.n(d),l=i(90569),u=i.n(l),p=i(3565),g=i.n(p),m=i(19216),v=i.n(m),b=i(44589),f=i.n(b),w=i(93039),y={};y.styleTagTransform=f(),y.setAttributes=g(),y.insert=u().bind(null,"head"),y.domAPI=h(),y.insertStyleElement=v(),c()(w.Z,y),w.Z&&w.Z.locals&&w.Z.locals;const C=o.$;class S extends r.JT{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new n.s$(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class _ extends r.JT{static render(e,t,i){return new _(e,t,i)}constructor(e,t,i){super(),this.actionContainer=o.R3(e,C("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=o.R3(this.actionContainer,C("a.action")),this.action.setAttribute("role","button"),t.iconClass&&o.R3(this.action,C(`span.icon.${t.iconClass}`)),o.R3(this.action,C("span")).textContent=i?`${t.label} (${i})`:t.label,this._register(o.nm(this.actionContainer,o.tw.CLICK,(e=>{e.stopPropagation(),e.preventDefault(),t.run(this.actionContainer)}))),this._register(o.nm(this.actionContainer,o.tw.KEY_DOWN,(e=>{const i=new s.y1(e);(i.equals(3)||i.equals(10))&&(e.stopPropagation(),e.preventDefault(),t.run(this.actionContainer))}))),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}},52094:(e,t,i)=>{e.exports=i.p+"867c598137f964486c1a.html"},39568:(e,t,i)=>{e.exports=i.p+"b7088ddc44a09856a399.html"},25608:(e,t,i)=>{e.exports=i.p+"a4cace0425b6a1fae0e5.html"},86055:(e,t,i)=>{e.exports=i.p+"74723a99be12f42c685d.js"},78583:(e,t,i)=>{i.r(t),i.d(t,{ActivityService:()=>fe,ActivitybarPart:()=>Ot,ConfirmResult:()=>lt.U,HoverService:()=>qt,PanelPart:()=>Ft,Parts:()=>V.QL,SidebarPart:()=>K,StatusbarPart:()=>Pd,ViewContainerLocation:()=>r.fI,attachPart:()=>vl,default:()=>Ll,isEditorPartVisible:()=>Il,isPartVisibile:()=>fl,onPartVisibilityChange:()=>bl,registerCustomView:()=>Dl,registerEditorPane:()=>kl,renderActivitybarPar:()=>yl,renderAuxiliaryPart:()=>_l,renderEditorPart:()=>El,renderPanelPart:()=>Sl,renderPart:()=>gl,renderSidebarPart:()=>Cl,renderStatusBarPart:()=>xl,setPartVisibility:()=>wl});var o=i(80855),s=(i(29769),i(77364)),n=i(97108),r=i(8321),a=i(98148),c=i(72065),d=i(3277);(0,d.Z)(".monaco-workbench.nosidebar>.part.sidebar{display:none!important;visibility:hidden!important}.monaco-workbench .part.sidebar .title-actions .actions-container{justify-content:flex-end}.monaco-workbench .part.sidebar .title-actions .action-item{margin-right:4px}.monaco-workbench .part.sidebar>.title>.title-label h2{text-transform:uppercase}.monaco-workbench .viewlet .collapsible.header .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .viewlet .collapsible.header .actions{width:0}.monaco-workbench .viewlet .collapsible.header.focused .actions,.monaco-workbench .viewlet .split-view-view:hover>.header .actions{flex:1;width:auto}.monaco-workbench .viewlet .collapsible.header .actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;height:22px;margin-right:0;width:28px}.monaco-workbench .viewlet .collapsible.header .actions .action-label .label,.monaco-workbench .viewlet .collapsible.header.collapsed .actions{display:none}.monaco-workbench .viewlet .collapsible.header .action-label{background-repeat:no-repeat;height:16px;margin-right:.2em;width:16px}",{});var h=i(89872);(0,d.Z)(".monaco-workbench .part>.content>.composite{height:100%}.monaco-workbench .part>.composite.title{display:flex}.monaco-workbench .part>.composite.title>.title-actions{flex:1;padding-left:5px}",{});var l=i(63580),u=i(44742),p=i(5976),g=i(4669),m=i(17301),v=i(90317),b=i(11218);(0,d.Z)(".monaco-workbench .part{box-sizing:border-box;overflow:hidden}.monaco-workbench .part>.drop-block-overlay.visible{visibility:visible}.monaco-workbench .part>.drop-block-overlay{height:100%;opacity:0;position:absolute;top:0;visibility:hidden;width:100%;z-index:12}.monaco-workbench .part>.title{box-sizing:border-box;display:none;display:flex;height:35px;overflow:hidden;padding-left:8px;padding-right:8px}.monaco-workbench .part>.title>.title-label{line-height:35px;overflow:hidden;padding-left:12px;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label h2{cursor:default;font-size:11px;font-weight:400;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label a{cursor:default;font-size:13px;text-decoration:none}.monaco-workbench .part>.title>.title-actions{flex:1;height:35px;padding-left:5px}.monaco-workbench .part>.title>.title-actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}.monaco-workbench .part>.title>.title-actions .action-label .label{display:none}.monaco-workbench .part>.title>.title-actions .action-label.codicon{color:inherit}.monaco-workbench .part>.content{font-size:13px}.monaco-workbench .part.editor>.content .monaco-progress-container,.monaco-workbench .part>.content>.monaco-progress-container{height:2px;left:0;position:absolute;top:33px;z-index:5}.monaco-workbench\n\t.part.editor>.content\n\t.monaco-progress-container\n\t.progress-bit,.monaco-workbench .part>.content>.monaco-progress-container .progress-bit{height:2px}",{});var f=i(39531),w=i(65321),y=i(98401);class C extends f.w{get dimension(){return this._dimension}constructor(e,t,i,o,s){super(e,i,o),this.options=t,this.layoutService=s,this._onDidVisibilityChange=this._register(new g.Q5),this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._onDidChange=this._register(new g.Q5),s.registerPart(this)}onThemeChange(e){this.parent&&super.onThemeChange(e)}updateStyles(){super.updateStyles()}create(e,t){this.parent=e,this.titleArea=this.createTitleArea(e,t),this.contentArea=this.createContentArea(e,t),this.partLayout=new S(this.options,this.contentArea),this.updateStyles()}getContainer(){return this.parent}createTitleArea(e,t){}getTitleArea(){return this.titleArea}createContentArea(e,t){}getContentArea(){return this.contentArea}layoutContents(e,t){return(0,y.cW)(this.partLayout).layout(e,t)}get onDidChange(){return this._onDidChange.event}layout(e,t,i,o){this._dimension=new w.Ro(e,t)}setVisible(e){this._onDidVisibilityChange.fire(e)}}class S{static{this.TITLE_HEIGHT=35}constructor(e,t){this.options=e,this.contentArea=t}layout(e,t){let i;i=this.options.hasTitle?new w.Ro(e,Math.min(t,S.TITLE_HEIGHT)):w.Ro.None;let o=e;this.options&&"function"==typeof this.options.borderWidth&&(o-=this.options.borderWidth());const s=new w.Ro(o,t-i.height);return this.contentArea&&(0,w.dp)(this.contentArea,s.width,s.height),{titleSize:i,contentSize:s}}}var _=i(60972),E=i(90535),x=i(60961),k=i(77267),D=i(59856),A=i(86253);class I extends C{constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,m,v){super(m,v,r,t,o),this.notificationService=e,this.storageService=t,this.contextMenuService=i,this.keybindingService=s,this.instantiationService=n,this.registry=a,this.activeCompositeSettingsKey=c,this.defaultCompositeId=d,this.nameForTelemetry=h,this.compositeCSSClass=l,this.titleForegroundColor=u,this.onDidCompositeOpen=this._register(new g.Q5),this.onDidCompositeClose=this._register(new g.Q5),this.mapCompositeToCompositeContainer=new Map,this.mapActionsBindingToComposite=new Map,this.instantiatedCompositeItems=new Map,this.actionsListener=this._register(new p.XK),this.lastActiveCompositeId=t.get(c,1,this.defaultCompositeId)}openComposite(e,t){return this.activeComposite?.getId()===e?(t&&this.activeComposite.focus(),this.activeComposite):this.element?this.doOpenComposite(e,t):void 0}doOpenComposite(e,t=!1){const i=u.a.nextId();this.currentCompositeOpenToken=i,this.activeComposite&&this.hideActiveComposite(),this.updateTitle(e);const o=this.createComposite(e,!0);if(!(this.currentCompositeOpenToken!==i||this.activeComposite&&this.activeComposite.getId()!==o.getId()))return this.activeComposite?.getId()===o.getId()?(t&&o.focus(),this.onDidCompositeOpen.fire({composite:o,focus:t}),o):(this.showComposite(o),t&&o.focus(),o&&this.onDidCompositeOpen.fire({composite:o,focus:t}),o)}createComposite(e,t){const i=this.instantiatedCompositeItems.get(e);if(i)return i.composite;const o=this.registry.getComposite(e);if(o){const i=this,s=new k.GX((0,y.cW)(this.progressBar),new class extends k.nw{constructor(){super(o.id,!!t),this._register(i.onDidCompositeOpen.event((e=>this.onScopeOpened(e.composite.getId())))),this._register(i.onDidCompositeClose.event((e=>this.onScopeClosed(e.getId()))))}}),n=this.instantiationService.createChild(new _.y([E.ek,s])),r=o.instantiate(n),a=new p.SL;return this.instantiatedCompositeItems.set(e,{composite:r,disposable:a,progress:s}),a.add(r.onTitleAreaUpdate((()=>this.onTitleAreaUpdate(r.getId())),this)),r}throw new Error(`Unable to find composite with id ${e}`)}showComposite(e){this.activeComposite=e;const t=this.activeComposite.getId();t!==this.defaultCompositeId?this.storageService.store(this.activeCompositeSettingsKey,t,1,1):this.storageService.remove(this.activeCompositeSettingsKey,1),this.lastActiveCompositeId=this.activeComposite.getId();let i=this.mapCompositeToCompositeContainer.get(e.getId());if(i||(i=(0,w.$)(".composite"),i.classList.add(...this.compositeCSSClass.split(" ")),i.id=e.getId(),e.create(i),e.updateStyles(),this.mapCompositeToCompositeContainer.set(e.getId(),i)),!this.activeComposite||e.getId()!==this.activeComposite.getId())return;const o=this.getContentArea();o?.appendChild(i),(0,w.$Z)(i);const s=(0,y.cW)(this.toolBar);s.actionRunner=e.getActionRunner();const n=this.registry.getComposite(e.getId());n&&n.name!==e.getTitle()&&this.updateTitle(e.getId(),e.getTitle());let r=this.mapActionsBindingToComposite.get(e.getId());r||(r=this.collectCompositeActions(e),this.mapActionsBindingToComposite.set(e.getId(),r)),r(),this.actionsListener.value=s.actionRunner.onDidRun((e=>{e.error&&!(0,m.n2)(e.error)&&this.notificationService.error(e.error)})),e.setVisible(!0),this.activeComposite&&e.getId()===this.activeComposite.getId()&&(this.contentAreaSize&&e.layout(this.contentAreaSize),this.boundarySashes&&e.setBoundarySashes(this.boundarySashes))}onTitleAreaUpdate(e){const t=this.instantiatedCompositeItems.get(e);if(t&&this.updateTitle(e,t.composite.getTitle()),this.activeComposite?.getId()===e){const e=this.collectCompositeActions(this.activeComposite);this.mapActionsBindingToComposite.set(this.activeComposite.getId(),e),e()}else this.mapActionsBindingToComposite.delete(e)}updateTitle(e,t){const i=this.registry.getComposite(e);if(!i||!this.titleLabel)return;t||(t=i.name);const o=this.keybindingService.lookupKeybinding(e);this.titleLabel.updateTitle(e,t,(0,y.f6)(o?.getLabel())),(0,y.cW)(this.toolBar).setAriaLabel((0,l.NC)("ariaCompositeToolbarLabel","{0} actions",t))}collectCompositeActions(e){const t=e?.getMenuIds(),i=e?.getActions().slice(0)||[],o=e?.getSecondaryActions().slice(0)||[],s=(0,y.cW)(this.toolBar);return s.context=this.actionsContextProvider(),()=>s.setActions((0,v.c)(i),(0,v.c)(o),t)}getActiveComposite(){return this.activeComposite}getLastActiveCompositeId(){return this.lastActiveCompositeId}hideActiveComposite(){if(!this.activeComposite)return;const e=this.activeComposite;this.activeComposite=void 0;const t=this.mapCompositeToCompositeContainer.get(e.getId());return e.setVisible(!1),t&&(t.remove(),(0,w.Cp)(t)),this.progressBar?.stop().hide(),this.toolBar&&this.collectCompositeActions()(),this.onDidCompositeClose.fire(e),e}createTitleArea(e){const t=(0,w.R3)(e,(0,w.$)(".composite"));t.classList.add("title"),this.titleLabel=this.createTitleLabel(t);const i=(0,w.R3)(t,(0,w.$)(".title-actions"));return this.toolBar=this._register(this.instantiationService.createInstance(D.T,i,{actionViewItemProvider:e=>this.actionViewItemProvider(e),orientation:0,getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id),anchorAlignmentProvider:()=>this.getTitleAreaDropDownAnchorAlignment(),toggleMenuTitle:(0,l.NC)("viewsAndMoreActions","Views and More Actions..."),telemetrySource:this.nameForTelemetry})),this.collectCompositeActions()(),t}createTitleLabel(e){const t=(0,w.R3)(e,(0,w.$)(".title-label")),i=(0,w.R3)(t,(0,w.$)("h2"));this.titleLabelElement=i;const o=this;return{updateTitle:(e,t,o)=>{this.activeComposite&&this.activeComposite.getId()!==e||(i.innerText=t,i.title=o?(0,l.NC)("titleTooltip","{0} ({1})",t,o):t)},updateStyles:()=>{i.style.color=o.titleForegroundColor&&o.getColor(o.titleForegroundColor)||""}}}updateStyles(){super.updateStyles(),(0,y.cW)(this.titleLabel).updateStyles()}actionViewItemProvider(e){return this.activeComposite?this.activeComposite.getActionViewItem(e):(0,x.Id)(this.instantiationService,e)}actionsContextProvider(){return this.activeComposite?this.activeComposite.getActionsContext():null}createContentArea(e){const t=(0,w.R3)(e,(0,w.$)(".content"));return this.progressBar=this._register(new b.k(t,A.b5)),this.progressBar.hide(),t}getProgressIndicator(e){const t=this.instantiatedCompositeItems.get(e);return t?t.progress:void 0}getTitleAreaDropDownAnchorAlignment(){return 1}layout(e,t,i,o){super.layout(e,t,i,o),this.contentAreaSize=w.Ro.lift(super.layoutContents(e,t).contentSize),this.activeComposite?.layout(this.contentAreaSize)}setBoundarySashes(e){this.boundarySashes=e,this.activeComposite?.setBoundarySashes(e)}removeComposite(e){if(this.activeComposite?.getId()===e)return!1;this.mapCompositeToCompositeContainer.delete(e),this.mapActionsBindingToComposite.delete(e);const t=this.instantiatedCompositeItems.get(e);return t&&(t.composite.dispose(),(0,p.B9)(t.disposable),this.instantiatedCompositeItems.delete(e)),!0}dispose(){this.mapCompositeToCompositeContainer.clear(),this.mapActionsBindingToComposite.clear(),this.instantiatedCompositeItems.forEach((e=>{e.composite.dispose(),(0,p.B9)(e.disposable)})),this.instantiatedCompositeItems.clear(),super.dispose()}}var T=i(23364),V=i(9301),L=i(88813),R=i(26904),O=i(5606),N=i(91847),M=i(97781),P=i(73910),B=i(88550),F=i(59422),W=i(7448),H=i(93983),z=i(12021),G=i(93038),U=i(10553);let K=class e extends I{static{this.activeViewletSettingsKey="workbench.sidebar.activeviewletid"}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();return"number"==typeof t?Math.max(t,300):void 0}get onDidPaneCompositeRegister(){return this.viewletRegistry.onDidRegister}get onDidPaneCompositeOpen(){return g.ju.map(this.onDidCompositeOpen.event,(e=>e.composite))}get onDidPaneCompositeClose(){return this.onDidCompositeClose.event}constructor(t,i,o,s,n,r,a,c,d,l){super(t,i,o,s,n,r,a,h.B.as(T.IP.Viewlets),e.activeViewletSettingsKey,c.getDefaultViewContainer(0).id,"sideBar","viewlet",B.nq,"workbench.parts.sidebar",{hasTitle:!0,borderWidth:()=>this.getColor(B._M)||this.getColor(P.lRK)?1:0}),this.viewDescriptorService=c,this.contextKeyService=d,this.extensionService=l,this.minimumWidth=170,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.priority=1,this.snap=!0,this._onDidViewletDeregister=this._register(new g.Q5),this.onDidPaneCompositeDeregister=this._onDidViewletDeregister.event,this.viewletRegistry=h.B.as(T.IP.Viewlets),this.sideBarFocusContextKey=L.Sr.bindTo(this.contextKeyService),this.activeViewletContextKey=L.bD.bindTo(this.contextKeyService),this.blockOpeningViewlet=!1,this.registerListeners()}registerListeners(){this._register(this.onDidPaneCompositeOpen((e=>{this.activeViewletContextKey.set(e.getId())}))),this._register(this.onDidPaneCompositeClose((e=>{this.activeViewletContextKey.get()===e.getId()&&this.activeViewletContextKey.reset()}))),this._register(this.registry.onDidDeregister((async e=>{const t=this.viewDescriptorService.getViewContainersByLocation(0).filter((e=>this.viewDescriptorService.getViewContainerModel(e).activeViewDescriptors.length>0));if(t.length){if(this.getActiveComposite()?.getId()===e.id){const e=this.viewDescriptorService.getDefaultViewContainer(0)?.id,i=t.filter((t=>t.id===e))[0]||t[0];await this.openPaneComposite(i.id)}}else this.layoutService.setPartHidden(!0,"workbench.parts.sidebar");this.removeComposite(e.id),this._onDidViewletDeregister.fire(e)})))}create(e){this.element=e,super.create(e);const t=this._register((0,w.go)(e));this._register(t.onDidFocus((()=>this.sideBarFocusContextKey.set(!0)))),this._register(t.onDidBlur((()=>this.sideBarFocusContextKey.set(!1))))}createTitleArea(e){const t=super.createTitleArea(e);return this._register((0,w.nm)(t,w.tw.CONTEXT_MENU,(e=>{this.onTitleAreaContextMenu(new W.nV(e))}))),this._register(U.o.addTarget(t)),this._register((0,w.nm)(t,U.t.Contextmenu,(e=>{this.onTitleAreaContextMenu(new W.nV(e))}))),this.titleLabelElement.draggable=!0,this._register(G.Mi.INSTANCE.registerDraggable(this.titleLabelElement,(()=>({type:"composite",id:this.getActivePaneComposite().getId()})),{})),t}updateStyles(){super.updateStyles();const e=(0,y.cW)(this.getContainer());e.style.backgroundColor=this.getColor(B.Qd)||"",e.style.color=this.getColor(B.Sr)||"";const t=this.getColor(B._M)||this.getColor(P.lRK),i=0===this.layoutService.getSideBarPosition();e.style.borderRightWidth=t&&i?"1px":"",e.style.borderRightStyle=t&&i?"solid":"",e.style.borderRightColor=i&&t||"",e.style.borderLeftWidth=t&&!i?"1px":"",e.style.borderLeftStyle=t&&!i?"solid":"",e.style.borderLeftColor=i?"":t||"",e.style.outlineColor=this.getColor(B.pY)??""}layout(e,t,i,o){this.layoutService.isVisible("workbench.parts.sidebar")&&super.layout(e,t,i,o)}getActivePaneComposite(){return this.getActiveComposite()}getLastActivePaneCompositeId(){return this.getLastActiveCompositeId()}hideActivePaneComposite(){this.hideActiveComposite()}async openPaneComposite(e,t){return"string"==typeof e&&this.getPaneComposite(e)?this.doOpenViewlet(e,t):(await this.extensionService.whenInstalledExtensionsRegistered(),"string"==typeof e&&this.getPaneComposite(e)?this.doOpenViewlet(e,t):void 0)}getPaneComposites(){return this.viewletRegistry.getPaneComposites().sort(((e,t)=>"number"!=typeof e.order?-1:"number"!=typeof t.order?1:e.order-t.order))}getPaneComposite(e){return this.getPaneComposites().filter((t=>t.id===e))[0]}doOpenViewlet(e,t){if(!this.blockOpeningViewlet){if(!this.layoutService.isVisible("workbench.parts.sidebar"))try{this.blockOpeningViewlet=!0,this.layoutService.setPartHidden(!1,"workbench.parts.sidebar")}finally{this.blockOpeningViewlet=!1}return this.openComposite(e,t)}}getTitleAreaDropDownAnchorAlignment(){return 0===this.layoutService.getSideBarPosition()?0:1}onTitleAreaContextMenu(e){const t=this.getActivePaneComposite();if(t){const i=t?t.getContextMenuActions():[];i.length&&this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>i.slice(),getActionViewItem:e=>this.actionViewItemProvider(e),actionRunner:t.getActionRunner(),skipTelemetry:!0})}}toJSON(){return{type:"workbench.parts.sidebar"}}};K=(0,o.g)([(0,o.f)(0,F.lT),(0,o.f)(1,R.Uy),(0,o.f)(2,O.i),(0,o.f)(3,V.ze),(0,o.f)(4,N.d),(0,o.f)(5,c.TG),(0,o.f)(6,M.XE),(0,o.f)(7,r.XH),(0,o.f)(8,H.i6),(0,o.f)(9,z.QS)],K);var $=i(28194),j=i(10829),X=i(98e3),J=i(70666),Y=i(9488),Q=i(95935),q=i(25670),Z=i(43557),ee=i(78787),te=i(84144),ie=i(8269),oe=i(31834),se=i(43702);const ne="viewsLog",re=(0,l.NC)("views log","Views");function ae(e){return(0,Q.Vo)(e.windowLogsPath,"views.log")}function ce(e){return`${e}.hidden`}(0,te.r1)(class extends te.Ke{constructor(){super({id:"_workbench.output.showViewsLog",title:{value:"Show Views Log",original:"Show Views Log"},category:ie.R.Developer,f1:!0})}async run(e){const t=e.get(Z.yR),i=e.get(oe.GI),o=e.get(ee.n);t.setVisibility(ae(o),!0),i.showChannel(ne)}});let de=class extends p.JT{constructor(e,t,i,o,s){super(),this.viewContainerName=t,this.storageService=i,this._onDidChangeStoredState=this._register(new g.Q5),this.onDidChangeStoredState=this._onDidChangeStoredState.event,this.logger=o.createLogger(ae(s),{id:ne,name:re,hidden:!0}),this.globalViewsStateStorageId=ce(e),this.workspaceViewsStateStorageId=e,this._register(this.storageService.onDidChangeValue((e=>this.onDidStorageChange(e)))),this.state=this.initialize()}set(e,t){this.state.set(e,t)}get(e){return this.state.get(e)}updateState(e){this.updateWorkspaceState(e),this.updateGlobalState(e)}updateWorkspaceState(e){const t=this.getStoredWorkspaceState();for(const i of e){const e=this.get(i.id);e&&(t[i.id]={collapsed:!!e.collapsed,isHidden:!e.visibleWorkspace,size:e.size,order:i.workspace&&e?e.order:void 0})}Object.keys(t).length>0?this.storageService.store(this.workspaceViewsStateStorageId,JSON.stringify(t),1,1):this.storageService.remove(this.workspaceViewsStateStorageId,1)}updateGlobalState(e){const t=this.getStoredGlobalState();for(const i of e){const e=this.get(i.id);t.set(i.id,{id:i.id,isHidden:!(!e||!i.canToggleVisibility||e.visibleGlobal),order:!i.workspace&&e?e.order:void 0})}this.setStoredGlobalState(t)}onDidStorageChange(e){if(e.key===this.globalViewsStateStorageId&&0===e.scope&&this.globalViewsStatesValue!==this.getStoredGlobalViewsStatesValue()){this._globalViewsStatesValue=void 0;const e=this.getStoredGlobalState(),t=this.getStoredWorkspaceState(),i=[];for(const[o,s]of e){const e=this.get(o);if(e)e.visibleGlobal!==!s.isHidden&&(s.isHidden||this.logger.info(`View visibility state changed: ${o} is now visible`,this.viewContainerName),i.push({id:o,visible:!s.isHidden}));else{const e=t[o];this.set(o,{active:!1,visibleGlobal:!s.isHidden,visibleWorkspace:(0,y.o8)(e?.isHidden)?void 0:!e?.isHidden,collapsed:e?.collapsed,order:e?.order,size:e?.size})}}if(i.length){this._onDidChangeStoredState.fire(i);for(const e of i){const t=this.get(e.id);t&&(t.visibleGlobal=e.visible)}}}}initialize(){const e=new Map,t=this.getStoredWorkspaceState();for(const i of Object.keys(t)){const o=t[i];e.set(i,{active:!1,visibleGlobal:void 0,visibleWorkspace:(0,y.o8)(o.isHidden)?void 0:!o.isHidden,collapsed:o.collapsed,order:o.order,size:o.size})}const i=this.storageService.get(this.globalViewsStateStorageId,1,"[]"),{state:o}=this.parseStoredGlobalState(i);if(o.size>0){for(const{id:t,isHidden:i}of o.values()){const o=e.get(t);o?(0,y.o8)(o.visibleWorkspace)&&(o.visibleWorkspace=!i):e.set(t,{active:!1,collapsed:void 0,visibleGlobal:void 0,visibleWorkspace:!i})}this.storageService.remove(this.globalViewsStateStorageId,1)}const{state:s,hasDuplicates:n}=this.parseStoredGlobalState(this.globalViewsStatesValue);n&&this.setStoredGlobalState(s);for(const{id:t,isHidden:i,order:o}of s.values()){const s=e.get(t);s?(s.visibleGlobal=!i,(0,y.o8)(o)||(s.order=o)):e.set(t,{active:!1,visibleGlobal:!i,order:o,collapsed:void 0,visibleWorkspace:void 0})}return e}getStoredWorkspaceState(){return JSON.parse(this.storageService.get(this.workspaceViewsStateStorageId,1,"{}"))}getStoredGlobalState(){return this.parseStoredGlobalState(this.globalViewsStatesValue).state}setStoredGlobalState(e){this.globalViewsStatesValue=JSON.stringify([...e.values()])}parseStoredGlobalState(e){const t=JSON.parse(e);let i=!1;return{state:t.reduce(((e,t)=>("string"==typeof t?(i=i||e.has(t),e.set(t,{id:t,isHidden:!0})):(i=i||e.has(t.id),e.set(t.id,t)),e)),new Map),hasDuplicates:i}}get globalViewsStatesValue(){return this._globalViewsStatesValue||(this._globalViewsStatesValue=this.getStoredGlobalViewsStatesValue()),this._globalViewsStatesValue}set globalViewsStatesValue(e){this.globalViewsStatesValue!==e&&(this._globalViewsStatesValue=e,this.setStoredGlobalViewsStatesValue(e))}getStoredGlobalViewsStatesValue(){return this.storageService.get(this.globalViewsStateStorageId,0,"[]")}setStoredGlobalViewsStatesValue(e){this.storageService.store(this.globalViewsStateStorageId,e,0,0)}};de=(0,o.g)([(0,o.f)(2,R.Uy),(0,o.f)(3,Z.yR),(0,o.f)(4,ee.n)],de);let he=class extends p.JT{get title(){return this._title}get icon(){return this._icon}get keybindingId(){return this._keybindingId}get allViewDescriptors(){return this.viewDescriptorItems.map((e=>e.viewDescriptor))}get activeViewDescriptors(){return this.viewDescriptorItems.filter((e=>e.state.active)).map((e=>e.viewDescriptor))}get visibleViewDescriptors(){return this.viewDescriptorItems.filter((e=>this.isViewDescriptorVisible(e))).map((e=>e.viewDescriptor))}constructor(e,t,i,o,s){super(),this.viewContainer=e,this.contextKeyService=i,this.contextKeys=new se.WJ,this.viewDescriptorItems=[],this._onDidChangeContainerInfo=this._register(new g.Q5),this.onDidChangeContainerInfo=this._onDidChangeContainerInfo.event,this._onDidChangeAllViewDescriptors=this._register(new g.Q5),this.onDidChangeAllViewDescriptors=this._onDidChangeAllViewDescriptors.event,this._onDidChangeActiveViewDescriptors=this._register(new g.Q5),this.onDidChangeActiveViewDescriptors=this._onDidChangeActiveViewDescriptors.event,this._onDidAddVisibleViewDescriptors=this._register(new g.Q5),this.onDidAddVisibleViewDescriptors=this._onDidAddVisibleViewDescriptors.event,this._onDidRemoveVisibleViewDescriptors=this._register(new g.Q5),this.onDidRemoveVisibleViewDescriptors=this._onDidRemoveVisibleViewDescriptors.event,this._onDidMoveVisibleViewDescriptors=this._register(new g.Q5),this.onDidMoveVisibleViewDescriptors=this._onDidMoveVisibleViewDescriptors.event,this.logger=o.createLogger(ae(s),{id:ne,name:re,hidden:!0}),this._register(g.ju.filter(i.onDidChangeContext,(e=>e.affectsSome(this.contextKeys)))((()=>this.onDidChangeContext()))),this.viewDescriptorsState=this._register(t.createInstance(de,e.storageId||`${e.id}.state`,"string"==typeof e.title?e.title:e.title.original)),this._register(this.viewDescriptorsState.onDidChangeStoredState((e=>this.updateVisibility(e)))),this.updateContainerInfo()}updateContainerInfo(){const e=this.viewContainer.alwaysUseContainerInfo||0===this.visibleViewDescriptors.length||this.visibleViewDescriptors.some((e=>h.B.as(r.IP.ViewsRegistry).getViewContainer(e.id)===this.viewContainer)),t=e?"string"==typeof this.viewContainer.title?this.viewContainer.title:this.viewContainer.title.value:this.visibleViewDescriptors[0]?.containerTitle||this.visibleViewDescriptors[0]?.name||"";let i=!1;this._title!==t&&(this._title=t,i=!0);const o=e?this.viewContainer.icon:this.visibleViewDescriptors[0]?.containerIcon||r.L7;let s=!1;this.isEqualIcon(o)||(this._icon=o,s=!0);const n=this.viewContainer.openCommandActionDescriptor?.id??this.activeViewDescriptors.find((e=>e.openCommandActionDescriptor))?.openCommandActionDescriptor?.id;let a=!1;this._keybindingId!==n&&(this._keybindingId=n,a=!0),(i||s||a)&&this._onDidChangeContainerInfo.fire({title:i,icon:s,keybindingId:a})}isEqualIcon(e){return J.ov.isUri(e)?J.ov.isUri(this._icon)&&(0,Q.Xy)(e,this._icon):q.kS.isThemeIcon(e)?q.kS.isThemeIcon(this._icon)&&q.kS.isEqual(e,this._icon):e===this._icon}isVisible(e){const t=this.viewDescriptorItems.find((t=>t.viewDescriptor.id===e));if(!t)throw new Error(`Unknown view ${e}`);return this.isViewDescriptorVisible(t)}setVisible(e,t){this.updateVisibility([{id:e,visible:t}])}updateVisibility(e){const t=(0,Y.kX)(e.filter((({visible:e})=>!e)).map((({id:e})=>this.findAndIgnoreIfNotFound(e)))),i=[];for(const{viewDescriptorItem:e,visibleIndex:o}of t)this.updateViewDescriptorItemVisibility(e,!1)&&i.push({viewDescriptor:e.viewDescriptor,index:o});i.length&&this.broadCastRemovedVisibleViewDescriptors(i);const o=[];for(const{id:t,visible:i}of e){if(!i)continue;const e=this.findAndIgnoreIfNotFound(t);if(!e)continue;const{viewDescriptorItem:s,visibleIndex:n}=e;this.updateViewDescriptorItemVisibility(s,!0)&&o.push({index:n,viewDescriptor:s.viewDescriptor,size:s.state.size,collapsed:!!s.state.collapsed})}o.length&&this.broadCastAddedVisibleViewDescriptors(o)}updateViewDescriptorItemVisibility(e,t){return!!e.viewDescriptor.canToggleVisibility&&this.isViewDescriptorVisibleWhenActive(e)!==t&&(e.viewDescriptor.workspace?e.state.visibleWorkspace=t:(e.state.visibleGlobal=t,t&&this.logger.info(`Showing view ${e.viewDescriptor.id} in the container ${this.viewContainer.id}`)),this.isViewDescriptorVisible(e)===t)}isCollapsed(e){return!!this.find(e).viewDescriptorItem.state.collapsed}setCollapsed(e,t){const{viewDescriptorItem:i}=this.find(e);i.state.collapsed!==t&&(i.state.collapsed=t),this.viewDescriptorsState.updateState(this.allViewDescriptors)}getSize(e){return this.find(e).viewDescriptorItem.state.size}setSizes(e){for(const{id:t,size:i}of e){const{viewDescriptorItem:e}=this.find(t);e.state.size!==i&&(e.state.size=i)}this.viewDescriptorsState.updateState(this.allViewDescriptors)}move(e,t){const i=this.viewDescriptorItems.findIndex((t=>t.viewDescriptor.id===e)),o=this.viewDescriptorItems.findIndex((e=>e.viewDescriptor.id===t)),s=this.viewDescriptorItems[i],n=this.viewDescriptorItems[o];(0,Y.pB)(this.viewDescriptorItems,i,o);for(let e=0;e<this.viewDescriptorItems.length;e++)this.viewDescriptorItems[e].state.order=e;this.broadCastMovedViewDescriptors({index:i,viewDescriptor:s.viewDescriptor},{index:o,viewDescriptor:n.viewDescriptor})}add(e){const t=[];for(const i of e){const e=i.viewDescriptor;if(e.when)for(const t of e.when.keys())this.contextKeys.add(t);let o=this.viewDescriptorsState.get(e.id);if(o){if(e.workspace)o.visibleWorkspace=(0,y.Jp)(i.visible)?(0,y.Jp)(o.visibleWorkspace)?!e.hideByDefault:o.visibleWorkspace:i.visible;else{const t=o.visibleGlobal;o.visibleGlobal=(0,y.Jp)(i.visible)?(0,y.Jp)(o.visibleGlobal)?!e.hideByDefault:o.visibleGlobal:i.visible,o.visibleGlobal&&!t&&this.logger.info(`Added view ${e.id} in the container ${this.viewContainer.id} and showing it.`,`${t}`,`${e.hideByDefault}`,`${i.visible}`)}o.collapsed=(0,y.Jp)(i.collapsed)?(0,y.Jp)(o.collapsed)?!!e.collapsed:o.collapsed:i.collapsed}else o={active:!1,visibleGlobal:(0,y.Jp)(i.visible)?!e.hideByDefault:i.visible,visibleWorkspace:(0,y.Jp)(i.visible)?!e.hideByDefault:i.visible,collapsed:(0,y.Jp)(i.collapsed)?!!e.collapsed:i.collapsed};this.viewDescriptorsState.set(e.id,o),o.active=this.contextKeyService.contextMatchesRules(e.when),t.push({viewDescriptor:e,state:o})}this.viewDescriptorItems.push(...t),this.viewDescriptorItems.sort(this.compareViewDescriptors.bind(this)),this._onDidChangeAllViewDescriptors.fire({added:t.map((({viewDescriptor:e})=>e)),removed:[]});const i=[];for(const e of t)e.state.active&&i.push({viewDescriptorItem:e,visible:this.isViewDescriptorVisible(e)});i.length&&this._onDidChangeActiveViewDescriptors.fire({added:i.map((({viewDescriptorItem:e})=>e.viewDescriptor)),removed:[]});const o=[];for(const{viewDescriptorItem:e,visible:t}of i)if(t&&this.isViewDescriptorVisible(e)){const{visibleIndex:t}=this.find(e.viewDescriptor.id);o.push({index:t,viewDescriptor:e.viewDescriptor,size:e.state.size,collapsed:!!e.state.collapsed})}this.broadCastAddedVisibleViewDescriptors(o)}remove(e){const t=[],i=[],o=[],s=[];for(const n of e){if(n.when)for(const e of n.when.keys())this.contextKeys.delete(e);const e=this.viewDescriptorItems.findIndex((e=>e.viewDescriptor.id===n.id));if(-1!==e){t.push(n);const r=this.viewDescriptorItems[e];if(r.state.active&&o.push(r.viewDescriptor),this.isViewDescriptorVisible(r)){const{visibleIndex:e}=this.find(r.viewDescriptor.id);s.push({index:e,viewDescriptor:r.viewDescriptor})}i.push(r)}}i.forEach((e=>this.viewDescriptorItems.splice(this.viewDescriptorItems.indexOf(e),1))),this.broadCastRemovedVisibleViewDescriptors(s),o.length&&this._onDidChangeActiveViewDescriptors.fire({added:[],removed:o}),t.length&&this._onDidChangeAllViewDescriptors.fire({added:[],removed:t})}onDidChangeContext(){const e=[],t=[];for(const i of this.viewDescriptorItems){const o=i.state.active,s=this.contextKeyService.contextMatchesRules(i.viewDescriptor.when);o!==s&&(s?e.push({item:i,visibleWhenActive:this.isViewDescriptorVisibleWhenActive(i)}):t.push(i))}const i=[];for(const e of t)if(this.isViewDescriptorVisible(e)){const{visibleIndex:t}=this.find(e.viewDescriptor.id);i.push({index:t,viewDescriptor:e.viewDescriptor})}t.forEach((e=>e.state.active=!1)),e.forEach((({item:e})=>e.state.active=!0)),this.broadCastRemovedVisibleViewDescriptors(i),(e.length||t.length)&&this._onDidChangeActiveViewDescriptors.fire({added:e.map((({item:e})=>e.viewDescriptor)),removed:t.map((e=>e.viewDescriptor))});const o=[];for(const{item:t,visibleWhenActive:i}of e)if(i&&this.isViewDescriptorVisible(t)){const{visibleIndex:e}=this.find(t.viewDescriptor.id);o.push({index:e,viewDescriptor:t.viewDescriptor,size:t.state.size,collapsed:!!t.state.collapsed})}this.broadCastAddedVisibleViewDescriptors(o)}broadCastAddedVisibleViewDescriptors(e){e.length&&(this._onDidAddVisibleViewDescriptors.fire(e.sort(((e,t)=>e.index-t.index))),this.updateState(`Added views:${e.map((e=>e.viewDescriptor.id)).join(",")} in ${this.viewContainer.id}`))}broadCastRemovedVisibleViewDescriptors(e){e.length&&(this._onDidRemoveVisibleViewDescriptors.fire(e.sort(((e,t)=>t.index-e.index))),this.updateState(`Removed views:${e.map((e=>e.viewDescriptor.id)).join(",")} from ${this.viewContainer.id}`))}broadCastMovedViewDescriptors(e,t){this._onDidMoveVisibleViewDescriptors.fire({from:e,to:t}),this.updateState(`Moved view ${e.viewDescriptor.id} to ${t.viewDescriptor.id} in ${this.viewContainer.id}`)}updateState(e){this.logger.info(e),this.viewDescriptorsState.updateState(this.allViewDescriptors),this.updateContainerInfo()}isViewDescriptorVisible(e){return!!e.state.active&&this.isViewDescriptorVisibleWhenActive(e)}isViewDescriptorVisibleWhenActive(e){return e.viewDescriptor.workspace?!!e.state.visibleWorkspace:!!e.state.visibleGlobal}find(e){const t=this.findAndIgnoreIfNotFound(e);if(t)return t;throw new Error(`view descriptor ${e} not found`)}findAndIgnoreIfNotFound(e){for(let t=0,i=0;t<this.viewDescriptorItems.length;t++){const o=this.viewDescriptorItems[t];if(o.viewDescriptor.id===e)return{index:t,visibleIndex:i,viewDescriptorItem:o};this.isViewDescriptorVisible(o)&&i++}}compareViewDescriptors(e,t){return e.viewDescriptor.id===t.viewDescriptor.id?0:this.getViewOrder(e)-this.getViewOrder(t)||this.getGroupOrderResult(e.viewDescriptor,t.viewDescriptor)}getViewOrder(e){const t="number"==typeof e.state.order?e.state.order:e.viewDescriptor.order;return"number"==typeof t?t:Number.MAX_VALUE}getGroupOrderResult(e,t){return e.group&&t.group?e.group===t.group?0:e.group<t.group?-1:1:0}};function le(e){return`${e}.state`}he=(0,o.g)([(0,o.f)(1,c.TG),(0,o.f)(2,H.i6),(0,o.f)(3,Z.yR),(0,o.f)(4,ee.n)],he);let ue=class e extends p.JT{static{this.VIEWS_CUSTOMIZATIONS="views.customizations"}static{this.COMMON_CONTAINER_ID_PREFIX="workbench.views.service"}get viewContainers(){return this.viewContainersRegistry.all}constructor(e,t,i,o,s){super(),this.instantiationService=e,this.contextKeyService=t,this.storageService=i,this.extensionService=o,this.telemetryService=s,this._onDidChangeContainer=this._register(new g.Q5),this.onDidChangeContainer=this._onDidChangeContainer.event,this._onDidChangeLocation=this._register(new g.Q5),this.onDidChangeLocation=this._onDidChangeLocation.event,this._onDidChangeContainerLocation=this._register(new g.Q5),this.onDidChangeContainerLocation=this._onDidChangeContainerLocation.event,this.viewContainerModels=this._register(new p.b2),this.viewsVisibilityActionDisposables=this._register(new p.b2),this._onDidChangeViewContainers=this._register(new g.Q5),this.onDidChangeViewContainers=this._onDidChangeViewContainers.event,this.activeViewContextKeys=new Map,this.movableViewContextKeys=new Map,this.defaultViewLocationContextKeys=new Map,this.defaultViewContainerLocationContextKeys=new Map,this.viewContainersRegistry=h.B.as(r.IP.ViewContainersRegistry),this.viewsRegistry=h.B.as(r.IP.ViewsRegistry),this.migrateToViewsCustomizationsStorage(),this.viewContainersCustomLocations=new Map(Object.entries(this.viewCustomizations.viewContainerLocations)),this.viewDescriptorsCustomLocations=new Map(Object.entries(this.viewCustomizations.viewLocations)),this.viewContainerBadgeEnablementStates=new Map(Object.entries(this.viewCustomizations.viewContainerBadgeEnablementStates)),this.viewContainers.forEach((e=>this.onDidRegisterViewContainer(e))),this._register(this.viewsRegistry.onViewsRegistered((e=>this.onDidRegisterViews(e)))),this._register(this.viewsRegistry.onViewsDeregistered((({views:e,viewContainer:t})=>this.onDidDeregisterViews(e,t)))),this._register(this.viewsRegistry.onDidChangeContainer((({views:e,from:t,to:i})=>this.onDidChangeDefaultContainer(e,t,i)))),this._register(this.viewContainersRegistry.onDidRegister((({viewContainer:e})=>{this.onDidRegisterViewContainer(e),this._onDidChangeViewContainers.fire({added:[{container:e,location:this.getViewContainerLocation(e)}],removed:[]})}))),this._register(this.viewContainersRegistry.onDidDeregister((({viewContainer:e})=>{this.onDidDeregisterViewContainer(e),this._onDidChangeViewContainers.fire({removed:[{container:e,location:this.getViewContainerLocation(e)}],added:[]})}))),this._register(this.storageService.onDidChangeValue((e=>{this.onDidStorageChange(e)}))),this.extensionService.whenInstalledExtensionsRegistered().then((()=>this.whenExtensionsRegistered()))}migrateToViewsCustomizationsStorage(){if(this.storageService.get(e.VIEWS_CUSTOMIZATIONS,0))return;const t=this.storageService.get("views.cachedViewContainerLocations",0),i=this.storageService.get("views.cachedViewPositions",0);if(!t&&!i)return;const o=t?JSON.parse(t):[],s=i?JSON.parse(i):[],n={viewContainerLocations:o.reduce(((e,[t,i])=>(e[t]=i,e)),{}),viewLocations:s.reduce(((e,[t,{containerId:i}])=>(e[t]=i,e)),{}),viewContainerBadgeEnablementStates:{}};this.storageService.store(e.VIEWS_CUSTOMIZATIONS,JSON.stringify(n),0,0),this.storageService.remove("views.cachedViewContainerLocations",0),this.storageService.remove("views.cachedViewPositions",0)}registerGroupedViews(e){for(const[t,i]of e.entries()){const e=this.viewContainersRegistry.get(t);if(!e||!this.viewContainerModels.has(e)){if(this.isGeneratedContainerId(t)){const e=this.viewContainersCustomLocations.get(t);void 0!==e&&this.registerGeneratedViewContainer(e,t)}continue}const o=i.filter((t=>0===this.getViewContainerModel(e).allViewDescriptors.filter((e=>e.id===t.id)).length));this.addViews(e,o)}}deregisterGroupedViews(e){for(const[t,i]of e.entries()){const e=this.viewContainersRegistry.get(t);e&&this.viewContainerModels.has(e)&&this.removeViews(e,i)}}moveOrphanViewsToDefaultLocation(){for(const[e,t]of this.viewDescriptorsCustomLocations.entries()){if(this.viewContainersRegistry.get(t))continue;const i=this.viewsRegistry.getViewContainer(e),o=this.getViewDescriptorById(e);i&&o&&this.addViews(i,[o])}}whenExtensionsRegistered(){this.moveOrphanViewsToDefaultLocation();for(const e of[...this.viewContainersCustomLocations.keys()])this.cleanUpGeneratedViewContainer(e);this.saveViewCustomizations(),this.registerViewsVisibilityActions()}onDidRegisterViews(e){this.contextKeyService.bufferChangeEvents((()=>{e.forEach((({views:e,viewContainer:t})=>{const i=this.regroupViews(t.id,e);this.registerGroupedViews(i),e.forEach((e=>this.getOrCreateMovableViewContextKey(e).set(!!e.canMoveView)))}))}))}isGeneratedContainerId(t){return t.startsWith(e.COMMON_CONTAINER_ID_PREFIX)}onDidDeregisterViews(e,t){const i=this.regroupViews(t.id,e);this.deregisterGroupedViews(i),this.contextKeyService.bufferChangeEvents((()=>{e.forEach((e=>this.getOrCreateMovableViewContextKey(e).set(!1)))}))}regroupViews(e,t){const i=new Map;for(const o of t){const t=this.viewDescriptorsCustomLocations.get(o.id)??e;let s=i.get(t);s||i.set(t,s=[]),s.push(o)}return i}getViewDescriptorById(e){return this.viewsRegistry.getView(e)}getViewLocationById(e){const t=this.getViewContainerByViewId(e);return null===t?null:this.getViewContainerLocation(t)}getViewContainerByViewId(e){const t=this.viewDescriptorsCustomLocations.get(e);return t?this.viewContainersRegistry.get(t)??null:this.getDefaultContainerById(e)}getViewContainerLocation(e){return this.viewContainersCustomLocations.get(e.id)??this.getDefaultViewContainerLocation(e)}getDefaultViewContainerLocation(e){return this.viewContainersRegistry.getViewContainerLocation(e)}getDefaultContainerById(e){return this.viewsRegistry.getViewContainer(e)??null}getViewContainerModel(e){return this.getOrRegisterViewContainerModel(e)}getViewContainerById(e){return this.viewContainersRegistry.get(e)||null}getViewContainersByLocation(e){return this.viewContainers.filter((t=>this.getViewContainerLocation(t)===e))}getDefaultViewContainer(e){return this.viewContainersRegistry.getDefaultViewContainer(e)}moveViewContainerToLocation(e,t,i){this.moveViewContainerToLocationWithoutSaving(e,t,i),this.saveViewCustomizations()}getViewContainerBadgeEnablementState(e){return this.viewContainerBadgeEnablementStates.get(e)??!0}setViewContainerBadgeEnablementState(e,t){this.viewContainerBadgeEnablementStates.set(e,t),this.saveViewCustomizations()}moveViewToLocation(e,t){const i=this.registerGeneratedViewContainer(t);this.moveViewsToContainer([e],i)}moveViewsToContainer(e,t,i){if(!e.length)return;const o=this.getViewContainerByViewId(e[0].id),s=t;o&&s&&o!==s&&(this.moveViewsWithoutSaving(e,o,s,i),this.cleanUpGeneratedViewContainer(o.id),this.saveViewCustomizations(),this.reportMovedViews(e,o,s))}reset(){for(const e of this.viewContainers){const t=this.getViewContainerModel(e);for(const e of t.allViewDescriptors){const t=this.getDefaultContainerById(e.id),i=this.getViewContainerByViewId(e.id);i&&t&&i!==t&&this.moveViewsWithoutSaving([e],i,t)}const i=this.getDefaultViewContainerLocation(e),o=this.getViewContainerLocation(e);null!==i&&o!==i&&this.moveViewContainerToLocationWithoutSaving(e,i),this.cleanUpGeneratedViewContainer(e.id)}this.viewContainersCustomLocations.clear(),this.viewDescriptorsCustomLocations.clear(),this.saveViewCustomizations()}isViewContainerRemovedPermanently(e){return this.isGeneratedContainerId(e)&&!this.viewContainersCustomLocations.has(e)}onDidChangeDefaultContainer(e,t,i){const o=e.filter((e=>!this.viewDescriptorsCustomLocations.has(e.id)||!this.viewContainers.includes(t)&&this.viewDescriptorsCustomLocations.get(e.id)===t.id));o.length&&this.moveViewsWithoutSaving(o,t,i)}reportMovedViews(t,i,o){const s=t=>t.id.startsWith(e.COMMON_CONTAINER_ID_PREFIX)?"custom":t.extensionId?"extension":t.id,n=this.getViewContainerLocation(i),r=this.getViewContainerLocation(o),a=t.length,c=s(i),d=s(o),h=1===n?"panel":"sidebar",l=1===r?"panel":"sidebar";this.telemetryService.publicLog2("viewDescriptorService.moveViews",{viewCount:a,fromContainer:c,toContainer:d,fromLocation:h,toLocation:l})}moveViewsWithoutSaving(e,t,i,o=r.nm.Expand){this.removeViews(t,e),this.addViews(i,e,o);const s=this.getViewContainerLocation(t),n=this.getViewContainerLocation(i);s!==n&&this._onDidChangeLocation.fire({views:e,from:s,to:n}),this._onDidChangeContainer.fire({views:e,from:t,to:i})}moveViewContainerToLocationWithoutSaving(e,t,i){const o=this.getViewContainerLocation(e),s=t;if(o!==s){const t=this.isGeneratedContainerId(e.id),n=s===this.getDefaultViewContainerLocation(e);t||!n?this.viewContainersCustomLocations.set(e.id,s):this.viewContainersCustomLocations.delete(e.id),this.getOrCreateDefaultViewContainerLocationContextKey(e).set(t||n),e.requestedIndex=i,this._onDidChangeContainerLocation.fire({viewContainer:e,from:o,to:s});const r=this.getViewsByContainer(e);this._onDidChangeLocation.fire({views:r,from:o,to:s})}}cleanUpGeneratedViewContainer(e){if(!this.isGeneratedContainerId(e))return;const t=this.getViewContainerById(e);t&&this.getViewContainerModel(t)?.allViewDescriptors.length||[...this.viewDescriptorsCustomLocations.values()].includes(e)||(t&&this.viewContainersRegistry.deregisterViewContainer(t),this.viewContainersCustomLocations.delete(e),this.viewContainerBadgeEnablementStates.delete(e),this.storageService.remove(ce(t?.storageId||le(e)),0))}registerGeneratedViewContainer(e,t){const i=t||this.generateContainerId(e),o=this.viewContainersRegistry.registerViewContainer({id:i,ctorDescriptor:new n.M($.XV,[i,{mergeViewWithContainerWhenSingleView:!0}]),title:i,icon:0===e?r.L7:void 0,storageId:le(i),hideIfEmpty:!0},e,{doNotRegisterOpenCommand:!0});return this.viewContainersCustomLocations.get(o.id)!==e&&this.viewContainersCustomLocations.set(o.id,e),this.getOrCreateDefaultViewContainerLocationContextKey(o).set(!0),o}onDidStorageChange(t){t.key===e.VIEWS_CUSTOMIZATIONS&&0===t.scope&&JSON.stringify(this.viewCustomizations)!==this.getStoredViewCustomizationsValue()&&this.onDidViewCustomizationsStorageChange()}onDidViewCustomizationsStorageChange(){this._viewCustomizations=void 0;const e=new Map(Object.entries(this.viewCustomizations.viewContainerLocations)),t=new Map(Object.entries(this.viewCustomizations.viewLocations)),i=[],o=[];for(const[t,o]of e.entries()){const e=this.getViewContainerById(t);e?o!==this.getViewContainerLocation(e)&&i.push([e,o]):this.isGeneratedContainerId(t)&&this.registerGeneratedViewContainer(o,t)}for(const t of this.viewContainers)if(!e.has(t.id)){const e=this.getViewContainerLocation(t),o=this.getDefaultViewContainerLocation(t);e!==o&&i.push([t,o])}for(const[e,i]of t.entries()){const t=this.getViewDescriptorById(e);if(t){const s=this.getViewContainerByViewId(e),n=this.viewContainersRegistry.get(i);s&&n&&n!==s&&o.push({views:[t],from:s,to:n})}}for(const e of this.viewContainers){const i=this.getViewContainerModel(e);for(const e of i.allViewDescriptors)if(!t.has(e.id)){const t=this.getViewContainerByViewId(e.id),i=this.getDefaultContainerById(e.id);t&&i&&t!==i&&o.push({views:[e],from:t,to:i})}}for(const[e,t]of i)this.moveViewContainerToLocationWithoutSaving(e,t);for(const{views:e,from:t,to:i}of o)this.moveViewsWithoutSaving(e,t,i,r.nm.Default);this.viewContainersCustomLocations=e,this.viewDescriptorsCustomLocations=t}generateContainerId(t){return`${e.COMMON_CONTAINER_ID_PREFIX}.${(0,r.Hg)(t)}.${(0,X.R)()}`}saveViewCustomizations(){const e={viewContainerLocations:{},viewLocations:{},viewContainerBadgeEnablementStates:{}};for(const[t,i]of this.viewContainersCustomLocations){const o=this.getViewContainerById(t);o&&!this.isGeneratedContainerId(t)&&i===this.getDefaultViewContainerLocation(o)||(e.viewContainerLocations[t]=i)}for(const[t,i]of this.viewDescriptorsCustomLocations){const o=this.getViewContainerById(i);if(o){const e=this.getDefaultContainerById(t);if(e?.id===o.id)continue}e.viewLocations[t]=i}for(const[t,i]of this.viewContainerBadgeEnablementStates)!1===i&&(e.viewContainerBadgeEnablementStates[t]=i);this.viewCustomizations=e}get viewCustomizations(){return this._viewCustomizations||(this._viewCustomizations=JSON.parse(this.getStoredViewCustomizationsValue()),this._viewCustomizations.viewContainerLocations=this._viewCustomizations.viewContainerLocations??{},this._viewCustomizations.viewLocations=this._viewCustomizations.viewLocations??{},this._viewCustomizations.viewContainerBadgeEnablementStates=this._viewCustomizations.viewContainerBadgeEnablementStates??{}),this._viewCustomizations}set viewCustomizations(e){const t=JSON.stringify(e);JSON.stringify(this.viewCustomizations)!==t&&(this._viewCustomizations=e,this.setStoredViewCustomizationsValue(t))}getStoredViewCustomizationsValue(){return this.storageService.get(e.VIEWS_CUSTOMIZATIONS,0,"{}")}setStoredViewCustomizationsValue(t){this.storageService.store(e.VIEWS_CUSTOMIZATIONS,t,0,0)}getViewsByContainer(e){const t=this.viewsRegistry.getViews(e).filter((t=>(this.viewDescriptorsCustomLocations.get(t.id)??e.id)===e.id));for(const[i,o]of this.viewDescriptorsCustomLocations.entries()){if(o!==e.id)continue;if(this.viewsRegistry.getViewContainer(i)===e)continue;const s=this.getViewDescriptorById(i);s&&t.push(s)}return t}onDidRegisterViewContainer(e){const t=!!this.isGeneratedContainerId(e.id)||this.getViewContainerLocation(e)===this.getDefaultViewContainerLocation(e);this.getOrCreateDefaultViewContainerLocationContextKey(e).set(t),this.getOrRegisterViewContainerModel(e)}getOrRegisterViewContainerModel(e){let t=this.viewContainerModels.get(e)?.viewContainerModel;if(!t){const i=new p.SL;t=i.add(this.instantiationService.createInstance(he,e)),this.onDidChangeActiveViews({added:t.activeViewDescriptors,removed:[]}),t.onDidChangeActiveViewDescriptors((e=>this.onDidChangeActiveViews(e)),this,i),this.onDidChangeVisibleViews({added:[...t.visibleViewDescriptors],removed:[]}),t.onDidAddVisibleViewDescriptors((e=>this.onDidChangeVisibleViews({added:e.map((({viewDescriptor:e})=>e)),removed:[]})),this,i),t.onDidRemoveVisibleViewDescriptors((e=>this.onDidChangeVisibleViews({added:[],removed:e.map((({viewDescriptor:e})=>e))})),this,i),i.add((0,p.OF)((()=>this.viewsVisibilityActionDisposables.deleteAndDispose(e)))),i.add(this.registerResetViewContainerAction(e)),this.viewContainerModels.set(e,{viewContainerModel:t,disposables:i,dispose:()=>i.dispose()}),this.onDidRegisterViews([{views:this.viewsRegistry.getViews(e),viewContainer:e}]);const o=this.getViewsByContainer(e).filter((t=>this.getDefaultContainerById(t.id)!==e));o.length&&(this.addViews(e,o),this.contextKeyService.bufferChangeEvents((()=>{o.forEach((e=>this.getOrCreateMovableViewContextKey(e).set(!!e.canMoveView)))})))}return t}onDidDeregisterViewContainer(e){this.viewContainerModels.deleteAndDispose(e)}onDidChangeActiveViews({added:e,removed:t}){this.contextKeyService.bufferChangeEvents((()=>{e.forEach((e=>this.getOrCreateActiveViewContextKey(e).set(!0))),t.forEach((e=>this.getOrCreateActiveViewContextKey(e).set(!1)))}))}onDidChangeVisibleViews({added:e,removed:t}){this.contextKeyService.bufferChangeEvents((()=>{e.forEach((e=>this.getOrCreateVisibleViewContextKey(e).set(!0))),t.forEach((e=>this.getOrCreateVisibleViewContextKey(e).set(!1)))}))}registerViewsVisibilityActions(){for(const[e,{viewContainerModel:t,disposables:i}]of this.viewContainerModels)this.viewsVisibilityActionDisposables.set(e,this.registerViewsVisibilityActionsForContainer(t)),i.add(g.ju.any(t.onDidChangeActiveViewDescriptors,t.onDidAddVisibleViewDescriptors,t.onDidRemoveVisibleViewDescriptors,t.onDidMoveVisibleViewDescriptors)((i=>this.viewsVisibilityActionDisposables.set(e,this.registerViewsVisibilityActionsForContainer(t)))))}registerViewsVisibilityActionsForContainer(e){const t=new p.SL;return e.activeViewDescriptors.forEach(((i,o)=>{i.remoteAuthority||(t.add((0,te.r1)(class extends $.wr{constructor(){super({id:`${i.id}.toggleVisibility`,viewPaneContainerId:e.viewContainer.id,precondition:i.canToggleVisibility&&(!e.isVisible(i.id)||e.visibleViewDescriptors.length>1)?H.Ao.true():H.Ao.false(),toggled:H.Ao.has(`${i.id}.visible`),title:i.name,menu:[{id:$.jc,group:"1_toggleViews",when:H.Ao.and(H.Ao.equals("viewContainer",e.viewContainer.id),H.Ao.equals("viewContainerLocation",(0,r.Hg)(0))),order:o},{id:te.eH.ViewContainerTitleContext,when:H.Ao.and(H.Ao.equals("viewContainer",e.viewContainer.id)),order:o,group:"1_toggleVisibility"},{id:te.eH.ViewTitleContext,when:H.Ao.and(e.visibleViewDescriptors.length>1?H.Ao.or(...e.visibleViewDescriptors.map((e=>H.Ao.equals("view",e.id)))):H.Ao.false()),order:o,group:"2_toggleVisibility"}]})}async runInViewPaneContainer(e,t){t.toggleViewVisibility(i.id)}})),t.add((0,te.r1)(class extends $.wr{constructor(){super({id:`${i.id}.removeView`,viewPaneContainerId:e.viewContainer.id,title:(0,l.NC)("hideView","Hide '{0}'",i.name),precondition:i.canToggleVisibility&&(!e.isVisible(i.id)||e.visibleViewDescriptors.length>1)?H.Ao.true():H.Ao.false(),menu:[{id:te.eH.ViewTitleContext,when:H.Ao.and(H.Ao.equals("view",i.id),H.Ao.has(`${i.id}.visible`)),group:"1_hide",order:1}]})}async runInViewPaneContainer(e,t){t.toggleViewVisibility(i.id)}})))})),t}registerResetViewContainerAction(e){const t=this;return(0,te.r1)(class extends te.Ke{constructor(){super({id:`${e.id}.resetViewContainerLocation`,title:{original:"Reset Location",value:(0,l.NC)("resetViewLocation","Reset Location")},menu:[{id:te.eH.ViewContainerTitleContext,when:H.Ao.or(H.Ao.and(H.Ao.equals("viewContainer",e.id),H.Ao.equals(`${e.id}.defaultViewContainerLocation`,!1)))}]})}run(){t.moveViewContainerToLocation(e,t.getDefaultViewContainerLocation(e))}})}addViews(e,t,i=r.nm.Default){this.contextKeyService.bufferChangeEvents((()=>{t.forEach((t=>{const i=this.getDefaultContainerById(t.id)===e;this.getOrCreateDefaultViewLocationContextKey(t).set(i),i?this.viewDescriptorsCustomLocations.delete(t.id):this.viewDescriptorsCustomLocations.set(t.id,e.id)}))})),this.getViewContainerModel(e).add(t.map((e=>({viewDescriptor:e,collapsed:i===r.nm.Default&&void 0,visible:i!==r.nm.Default||void 0}))))}removeViews(e,t){this.contextKeyService.bufferChangeEvents((()=>{t.forEach((t=>{this.viewDescriptorsCustomLocations.get(t.id)===e.id&&this.viewDescriptorsCustomLocations.delete(t.id),this.getOrCreateDefaultViewLocationContextKey(t).set(!1)}))})),this.getViewContainerModel(e).remove(t)}getOrCreateActiveViewContextKey(e){const t=`${e.id}.active`;let i=this.activeViewContextKeys.get(t);return i||(i=new H.uy(t,!1).bindTo(this.contextKeyService),this.activeViewContextKeys.set(t,i)),i}getOrCreateVisibleViewContextKey(e){const t=`${e.id}.visible`;let i=this.activeViewContextKeys.get(t);return i||(i=new H.uy(t,!1).bindTo(this.contextKeyService),this.activeViewContextKeys.set(t,i)),i}getOrCreateMovableViewContextKey(e){const t=`${e.id}.canMove`;let i=this.movableViewContextKeys.get(t);return i||(i=new H.uy(t,!1).bindTo(this.contextKeyService),this.movableViewContextKeys.set(t,i)),i}getOrCreateDefaultViewLocationContextKey(e){const t=`${e.id}.defaultViewLocation`;let i=this.defaultViewLocationContextKeys.get(t);return i||(i=new H.uy(t,!1).bindTo(this.contextKeyService),this.defaultViewLocationContextKeys.set(t,i)),i}getOrCreateDefaultViewContainerLocationContextKey(e){const t=`${e.id}.defaultViewContainerLocation`;let i=this.defaultViewContainerLocationContextKeys.get(t);return i||(i=new H.uy(t,!1).bindTo(this.contextKeyService),this.defaultViewContainerLocationContextKeys.set(t,i)),i}};ue=(0,o.g)([(0,o.f)(0,c.TG),(0,o.f)(1,H.i6),(0,o.f)(2,R.Uy),(0,o.f)(3,z.QS),(0,o.f)(4,j.bU)],ue);var pe=i(68398);const ge="workbench.action.globalActivity",me="workbench.action.accountsActivity";var ve=i(7481);let be=class extends p.JT{constructor(e,t,i){super(),this.viewId=e,this.viewDescriptorService=t,this.activityService=i,this.activity=void 0,this.activityDisposable=p.JT.None,this._register(g.ju.filter(this.viewDescriptorService.onDidChangeContainer,(t=>t.views.some((t=>t.id===e))))((()=>this.update()))),this._register(g.ju.filter(this.viewDescriptorService.onDidChangeLocation,(t=>t.views.some((t=>t.id===e))))((()=>this.update())))}setActivity(e){this.activity=e,this.update()}clearActivity(){this.activity=void 0,this.update()}update(){this.activityDisposable.dispose();const e=this.viewDescriptorService.getViewContainerByViewId(this.viewId);e&&this.activity&&(this.activityDisposable=this.activityService.showViewContainerActivity(e.id,this.activity))}dispose(){this.activityDisposable.dispose()}};be=(0,o.g)([(0,o.f)(1,r.XH),(0,o.f)(2,pe.By)],be);let fe=class{constructor(e,t,i){this.paneCompositeService=e,this.viewDescriptorService=t,this.instantiationService=i,this.viewActivities=new Map}showViewContainerActivity(e,{badge:t,clazz:i,priority:o}){const s=this.viewDescriptorService.getViewContainerById(e);if(s){const e=this.viewDescriptorService.getViewContainerLocation(s);if(null!==e)return this.paneCompositeService.showActivity(s.id,e,t,i,o)}return p.JT.None}showViewActivity(e,t){let i=this.viewActivities.get(e);i?i.id++:(i={id:1,activity:this.instantiationService.createInstance(be,e)},this.viewActivities.set(e,i));const o=i.id;i.activity.setActivity(t);const s=i;return(0,p.OF)((()=>{s.id===o&&(s.activity.dispose(),this.viewActivities.delete(e))}))}showAccountsActivity({badge:e,clazz:t,priority:i}){return this.paneCompositeService.showActivity(me,0,e,t,i)}showGlobalActivity({badge:e,clazz:t,priority:i}){return this.paneCompositeService.showActivity(ge,0,e,t,i)}};fe=(0,o.g)([(0,o.f)(0,ve.c),(0,o.f)(1,r.XH),(0,o.f)(2,c.TG)],fe),(0,d.Z)('.monaco-workbench .part.activitybar{height:100%;width:48px}.monaco-workbench .activitybar.bordered:before{border-color:inherit;box-sizing:border-box;content:"";float:left;height:100%;position:absolute;width:0}.monaco-workbench .activitybar.left.bordered:before{border-right-style:solid;border-right-width:1px;right:0}.monaco-workbench .activitybar.right.bordered:before{border-left-style:solid;border-left-width:1px;left:0}.monaco-workbench .activitybar>.content{display:flex;flex-direction:column;height:100%;justify-content:space-between}.monaco-workbench .activitybar>.content .monaco-action-bar{background-color:inherit;text-align:left}.monaco-workbench .activitybar .action-item:focus{outline:0!important}.monaco-workbench .activitybar>.content>.composite-bar{margin-bottom:auto}.monaco-workbench .activitybar .menubar,.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more{height:35px;width:100%}',{}),(0,d.Z)('.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item{display:block;position:relative}.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:before{background-color:transparent;content:"";display:none;height:2px;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:background-color;width:48px}.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:before{margin-top:-2px;top:1px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:after{bottom:1px;margin-bottom:-2px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:first-of-type:before{margin-top:-2px;top:2px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:last-of-type:after{bottom:2px;margin-bottom:-2px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before{transition-delay:0s}.monaco-workbench .activitybar>.content.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .activitybar>.content.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom+.action-item:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:last-of-type.bottom:after{background-color:var(--insert-border-color)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label{box-sizing:border-box;display:flex;height:48px;margin-right:0;overflow:hidden;position:relative;width:48px;z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label:not(.codicon){font-size:15px;line-height:40px;padding:0 0 0 48px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label.codicon{align-items:center;font-size:24px;justify-content:center}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.codicon{color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.uri-icon{background-color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-left:2px solid;content:"";height:100%;position:absolute;top:0;width:0;z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before{height:100%;top:0}.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator.action-item,.monaco-workbench.hc-light .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator{display:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.clicked:focus:before{border-left:none!important}.monaco-workbench .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{left:0}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{right:0}.monaco-workbench.hc-black .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-black .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before{outline:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge{z-index:2}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{pointer-events:none}.monaco-workbench.border .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{left:-2px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .badge-content{border-radius:20px;font-size:9px;font-weight:600;height:16px;line-height:16px;min-width:8px;padding:0 4px;position:absolute;right:8px;text-align:center;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge .profile-badge-content{background-color:var(--vscode-profileBadge-background);border:2px solid var(--vscode-activityBar-background);border-radius:7px;color:var(--vscode-profileBadge-foreground);font-size:9px;font-weight:600;line-height:10px;padding:2px 3px;position:absolute;right:6px;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:active .profile-badge-content,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .profile-badge-content,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .profile-badge-content{color:var(--vscode-activityBar-foreground)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content{font-size:12px;font-weight:unset;justify-content:center;padding:0}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content:before{text-align:center;vertical-align:baseline}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{left:auto;right:0}',{});var we=i(59069),ye=i(74741),Ce=i(43548),Se=i(90882),_e=i(54368),Ee=i(33108),xe=i(51902),ke=i(22713),De=i(86078),Ae=i(49452),Ie=i(78036);let Te=class e extends Ce.JS{static{this.preventDoubleClickDelay=300}constructor(e,t,i,o,s){super(e),this.paneCompositePart=t,this.layoutService=i,this.telemetryService=o,this.configurationService=s,this.lastRun=0}updateActivity(e){this.activity=e}async run(t){if(t instanceof MouseEvent&&2===t.button)return;const i=Date.now();if(i>this.lastRun&&i-this.lastRun<e.preventDoubleClickDelay)return;this.lastRun=i;const o=this.layoutService.isVisible("workbench.parts.sidebar"),s=this.paneCompositePart.getActivePaneComposite(),n=this.configurationService.getValue("workbench.activityBar.iconClickBehavior"),r=!t||!("preserveFocus"in t)||!t.preserveFocus;if(!o||s?.getId()!==this.activity.id)return this.logAction("show"),await this.paneCompositePart.openPaneComposite(this.activity.id,r),this.activate();"focus"===n?(this.logAction("refocus"),this.paneCompositePart.openPaneComposite(this.activity.id,r)):(this.logAction("hide"),this.layoutService.setPartHidden(!0,"workbench.parts.sidebar"))}logAction(e){this.telemetryService.publicLog2("activityBarAction",{viewletId:this.activity.id,action:e})}};Te=(0,o.g)([(0,o.f)(2,V.ze),(0,o.f)(3,j.bU),(0,o.f)(4,Ee.Ui)],Te);let Ve=class extends Ce.Pw{constructor(e,t,i,o,s,n,r,a,c,d,h){super(e,i,(()=>!0),o,s,c,h),this.contextMenuActionsProvider=t,this.menuService=n,this.contextMenuService=r,this.contextKeyService=a,this.environmentService=d}render(e){super.render(e),this._register((0,w.nm)(this.container,w.tw.MOUSE_DOWN,(async e=>{w.zB.stop(e,!0),2!==e?.button&&this.run()}))),this._register((0,w.nm)(this.container,w.tw.CONTEXT_MENU,(async e=>{const t=new p.SL,i=await this.resolveContextMenuActions(t),o=new W.nV(e);this.contextMenuService.showContextMenu({getAnchor:()=>o,getActions:()=>i,onHide:()=>t.dispose()})}))),this._register((0,w.nm)(this.container,w.tw.KEY_UP,(e=>{const t=new we.y1(e);(t.equals(3)||t.equals(10))&&(w.zB.stop(e,!0),this.run())}))),this._register((0,w.nm)(this.container,U.t.Tap,(e=>{w.zB.stop(e,!0),this.run()})))}async resolveContextMenuActions(e){return this.contextMenuActionsProvider()}};Ve=(0,o.g)([(0,o.f)(3,M.XE),(0,o.f)(4,ke.B),(0,o.f)(5,te.co),(0,o.f)(6,O.i),(0,o.f)(7,H.i6),(0,o.f)(8,Ee.Ui),(0,o.f)(9,ee.n),(0,o.f)(10,N.d)],Ve);let Le=class extends Ve{constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,p){super(t,i,{draggable:!1,colors:s,icon:o,hasPopup:!0,hoverOptions:n},r,a,c,d,h,l,u,p),this.menuId=e}async run(){const e=new p.SL,t=e.add(this.menuService.createMenu(this.menuId,this.contextKeyService)),i=await this.resolveMainMenuActions(t,e);this.contextMenuService.showContextMenu({getAnchor:()=>this.container,anchorAlignment:"left"===this.configurationService.getValue("workbench.sideBar.location")?1:0,anchorAxisAlignment:1,getActions:()=>i,onHide:()=>e.dispose(),menuActionOptions:{renderShortTitle:!0}})}async resolveMainMenuActions(e,t){const i=[];return(0,x.vr)(e,{renderShortTitle:!0},{primary:[],secondary:i}),i}};Le=(0,o.g)([(0,o.f)(6,M.XE),(0,o.f)(7,ke.B),(0,o.f)(8,te.co),(0,o.f)(9,O.i),(0,o.f)(10,H.i6),(0,o.f)(11,Ee.Ui),(0,o.f)(12,ee.n),(0,o.f)(13,N.d)],Le);let Re=class e extends Le{static{this.ACCOUNTS_VISIBILITY_PREFERENCE_KEY="workbench.activity.showAccounts"}constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,p,g,m,v,b){super(te.eH.AccountsContext,e,t,!0,i,o,s,n,a,r,c,u,h,g),this.authenticationService=d,this.productService=l,this.storageService=p,this.secretStorageService=m,this.credentialsService=v,this.logService=b,this.groupedAccounts=new Map,this.problematicProviders=new Set,this.initialized=!1,this.sessionFromEmbedder=(0,Se.u5)(this.credentialsService,this.secretStorageService,this.productService),this.registerListeners(),this.initialize()}registerListeners(){this._register(this.authenticationService.onDidRegisterAuthenticationProvider((async e=>{await this.addAccountsFromProvider(e.id)}))),this._register(this.authenticationService.onDidUnregisterAuthenticationProvider((e=>{this.groupedAccounts.delete(e.id),this.problematicProviders.delete(e.id)}))),this._register(this.authenticationService.onDidChangeSessions((async e=>{for(const t of[...e.event.changed,...e.event.added])try{await this.addOrUpdateAccount(e.providerId,t.account)}catch(e){this.logService.error(e)}for(const t of e.event.removed)this.removeAccount(e.providerId,t.account)})))}async initialize(){const e=this.authenticationService.getProviderIds(),t=await Promise.allSettled(e.map((e=>this.addAccountsFromProvider(e))));for(const e of t)"rejected"===e.status&&this.logService.error(e.reason);this.initialized=!0}async resolveMainMenuActions(e,t){await super.resolveMainMenuActions(e,t);const i=this.authenticationService.getProviderIds(),o=e.getActions();let s=[];for(const e of i){if(!this.initialized){const e=t.add(new ye.aU("noAccountsAvailable",(0,l.NC)("loading","Loading..."),void 0,!1));s.push(e);break}const i=this.authenticationService.getLabel(e),o=this.groupedAccounts.get(e);if(o)for(const n of o){const o=[t.add(new ye.aU(`configureSessions${n.label}`,(0,l.NC)("manageTrustedExtensions","Manage Trusted Extensions"),void 0,!0,(()=>this.authenticationService.manageTrustedExtensionsForAccount(e,n.label))))];if(n.canSignOut){const i=t.add(new ye.aU("signOut",(0,l.NC)("signOut","Sign Out"),void 0,!0,(async()=>{const t=(await this.authenticationService.getSessions(e)).filter((e=>e.account.id===n.id));return await this.authenticationService.removeAccountSessions(e,n.label,t)})));o.push(i)}const r=new ye.wY("activitybar.submenu",`${n.label} (${i})`,o);s.push(r)}else if(this.problematicProviders.has(e)){const o=t.add(new ye.aU("providerUnavailable",(0,l.NC)("authProviderUnavailable","{0} is currently unavailable",i),void 0,!1));s.push(o);try{await this.addAccountsFromProvider(e)}catch(e){this.logService.error(e)}}}if(i.length&&!s.length){const e=t.add(new ye.aU("noAccountsAvailable",(0,l.NC)("noAccounts","You are not signed in to any accounts"),void 0,!1));s.push(e)}return s.length&&o.length&&s.push(new ye.Z0),o.forEach(((e,t)=>{const i=e[1];s=s.concat(i),t!==o.length-1&&s.push(new ye.Z0)})),s}async resolveContextMenuActions(t){const i=await super.resolveContextMenuActions(t);return i.unshift((0,ye.xw)({id:"hideAccounts",label:(0,l.NC)("hideAccounts","Hide Accounts"),run:()=>this.storageService.store(e.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,!1,0,0)}),new ye.Z0),i}async addOrUpdateAccount(e,t){let i=this.groupedAccounts.get(e);if(i){const e=i.find((e=>e.id===t.id));if(e)return void(e.label!==t.label&&(e.label=t.label))}else i=[],this.groupedAccounts.set(e,i);const o=await this.sessionFromEmbedder;let s=!!o?.canSignOut;s||(s=!o?.id||!(await this.authenticationService.getSessions(e)).filter((e=>e.account.id===t.id)).some((e=>e.id===o.id))),i.push({...t,canSignOut:s})}removeAccount(e,t){const i=this.groupedAccounts.get(e);if(!i)return;const o=i.findIndex((e=>e.id===t.id));-1!==o&&(i.splice(o,1),0===i.length&&this.groupedAccounts.delete(e))}async addAccountsFromProvider(e){try{const t=await this.authenticationService.getSessions(e);this.problematicProviders.delete(e);for(const i of t)try{await this.addOrUpdateAccount(e,i.account)}catch(e){this.logService.error(e)}}catch(t){this.logService.error(t),this.problematicProviders.add(e)}}};Re=(0,o.g)([(0,o.f)(4,M.XE),(0,o.f)(5,ke.B),(0,o.f)(6,O.i),(0,o.f)(7,te.co),(0,o.f)(8,H.i6),(0,o.f)(9,_e.Z),(0,o.f)(10,ee.n),(0,o.f)(11,xe.a),(0,o.f)(12,Ee.Ui),(0,o.f)(13,R.Uy),(0,o.f)(14,N.d),(0,o.f)(15,Ie.V),(0,o.f)(16,De.L),(0,o.f)(17,Z.VZ)],Re);let Oe=class extends Le{constructor(e,t,i,o,s,n,r,a,c,d,h,l,u){super(te.eH.GlobalActivity,e,t,!0,i,o,n,r,a,c,d,h,l,u),this.userDataProfileService=s,this._register(this.userDataProfileService.onDidChangeCurrentProfile((()=>this.updateProfileBadge())))}render(e){super.render(e),this.profileBadge=(0,w.R3)(e,(0,w.$)(".profile-badge")),this.profileBadgeContent=(0,w.R3)(this.profileBadge,(0,w.$)(".profile-badge-content")),this.updateProfileBadge()}updateProfileBadge(){this.profileBadge&&this.profileBadgeContent&&((0,w.PO)(this.profileBadgeContent),(0,w.Cp)(this.profileBadge),this.userDataProfileService.currentProfile.isDefault||this.action.getBadge()||(this.profileBadgeContent.textContent=this.userDataProfileService.currentProfile.name.substring(0,2).toUpperCase(),(0,w.$Z)(this.profileBadge)))}updateBadge(){super.updateBadge(),this.updateProfileBadge()}computeTitle(){return this.userDataProfileService.currentProfile.isDefault?super.computeTitle():(0,l.NC)("manage","Manage {0} (Profile)",this.userDataProfileService.currentProfile.name)}};Oe=(0,o.g)([(0,o.f)(4,Ae.AP),(0,o.f)(5,M.XE),(0,o.f)(6,ke.B),(0,o.f)(7,te.co),(0,o.f)(8,O.i),(0,o.f)(9,H.i6),(0,o.f)(10,Ee.Ui),(0,o.f)(11,ee.n),(0,o.f)(12,N.d)],Oe);class Ne extends Te{}class Me extends Ce.du{constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setActivity(e){this.label=e.name}}class Pe extends Ce.B7{constructor(e,t){super({id:e,name:e,classNames:void 0},t)}setActivity(e){this.label=e.name}}class Be extends te.Ke{constructor(e,t){super(e),this.offset=t}async run(e){const t=e.get(ve.c),i=t.getVisiblePaneCompositeIds(0),o=t.getActivePaneComposite(0);if(!o)return;let s;for(let e=0;e<i.length;e++)if(i[e]===o.getId()){s=i[(e+i.length+this.offset)%i.length];break}await t.openPaneComposite(s,0,!0)}}(0,te.r1)(class extends Be{constructor(){super({id:"workbench.action.previousSideBarView",title:{value:(0,l.NC)("previousSideBarView","Previous Primary Side Bar View"),original:"Previous Primary Side Bar View"},category:ie.R.View,f1:!0},-1)}}),(0,te.r1)(class extends Be{constructor(){super({id:"workbench.action.nextSideBarView",title:{value:(0,l.NC)("nextSideBarView","Next Primary Side Bar View"),original:"Next Primary Side Bar View"},category:ie.R.View,f1:!0},1)}}),(0,te.r1)(class extends te.Ke{constructor(){super({id:"workbench.action.focusActivityBar",title:{value:(0,l.NC)("focusActivityBar","Focus Activity Bar"),original:"Focus Activity Bar"},category:ie.R.View,f1:!0})}async run(e){const t=e.get(V.ze);t.setPartHidden(!1,"workbench.parts.activitybar"),t.focusPart("workbench.parts.activitybar")}}),(0,M.Ic)(((e,t)=>{const i=e.getColor(B.D$);i&&t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator:before {\n\t\t\t\tborder-left-color: ${i};\n\t\t\t}\n\t\t`);const o=e.getColor(B.sz);o&&t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus::before {\n\t\t\t\tvisibility: hidden;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus .active-item-indicator:before {\n\t\t\t\tvisibility: visible;\n\t\t\t\tborder-left-color: ${o};\n\t\t\t}\n\t\t`);const s=e.getColor(B.MQ);s&&t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator {\n\t\t\t\tz-index: 0;\n\t\t\t\tbackground-color: ${s};\n\t\t\t}\n\t\t`);const n=e.getColor(P.xL1);if(n)t.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:before {\n\t\t\t\tcontent: "";\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 8px;\n\t\t\t\tleft: 8px;\n\t\t\t\theight: 32px;\n\t\t\t\twidth: 32px;\n\t\t\t\tz-index: 1;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.profile-activity-item:before {\n\t\t\t\ttop: -6px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:hover:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:hover:before {\n\t\t\t\toutline: 1px solid;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:hover:before {\n\t\t\t\toutline: 1px dashed;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator:before {\n\t\t\t\tborder-left-color: ${n};\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:hover:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:hover:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:hover:before {\n\t\t\t\toutline-color: ${n};\n\t\t\t}\n\t\t`);else{const i=e.getColor(P.R80);i&&t.addRule(`\n\t\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator:before {\n\t\t\t\t\t\tborder-left-color: ${i};\n\t\t\t\t\t}\n\t\t\t\t`)}}));var Fe=i(82828),We=i(93794);class He{constructor(e,t,i,o,s){this.viewDescriptorService=e,this.targetContainerLocation=t,this.openComposite=i,this.moveComposite=o,this.getItems=s}drop(e,t,i,o){const s=e.getData();if("composite"===s.type){const e=this.viewDescriptorService.getViewContainerById(s.id);if(this.viewDescriptorService.getViewContainerLocation(e)===this.targetContainerLocation)t&&this.moveComposite(s.id,t,o);else{if(this.viewDescriptorService.getViewContainerModel(e).allViewDescriptors.some((e=>!e.canMoveView)))return;this.viewDescriptorService.moveViewContainerToLocation(e,this.targetContainerLocation,this.getTargetIndex(t,o))}}if("view"===s.type){const e=this.viewDescriptorService.getViewDescriptorById(s.id);if(e&&e.canMoveView){this.viewDescriptorService.moveViewToLocation(e,this.targetContainerLocation);const i=this.viewDescriptorService.getViewContainerByViewId(e.id);t&&this.moveComposite(i.id,t,o),this.openComposite(i.id,!0).then((t=>{t?.openView(e.id,!0)}))}}}onDragEnter(e,t,i){return this.canDrop(e,t)}onDragOver(e,t,i){return this.canDrop(e,t)}getTargetIndex(e,t){if(!e)return;const i=this.getItems(),o=1===this.targetContainerLocation?t?.horizontallyBefore:t?.verticallyBefore;return i.filter((e=>e.visible)).findIndex((t=>t.id===e))+(o?0:1)}canDrop(e,t){const i=e.getData();if("composite"===i.type){const e=this.viewDescriptorService.getViewContainerById(i.id);return this.viewDescriptorService.getViewContainerLocation(e)===this.targetContainerLocation?i.id!==t:!this.viewDescriptorService.getViewContainerModel(e).allViewDescriptors.some((e=>!e.canMoveView))}{const e=this.viewDescriptorService.getViewDescriptorById(i.id);return!(!e||!e.canMoveView)}}}let ze=class extends We.${constructor(e,t,i,o,s){super(),this.options=t,this.instantiationService=i,this.contextMenuService=o,this.viewDescriptorService=s,this._onDidChange=this._register(new g.Q5),this.onDidChange=this._onDidChange.event,this.model=new Ge(e,t),this.visibleComposites=[],this.compositeSizeInBar=new Map,this.computeSizes(this.model.visibleItems)}getCompositeBarItems(){return[...this.model.items]}setCompositeBarItems(e){this.model.setItems(e)&&this.updateCompositeSwitcher()}getPinnedComposites(){return this.model.pinnedItems}getVisibleComposites(){return this.model.visibleItems}create(e){const t=e.appendChild((0,w.$)(".composite-bar"));let i;return this.compositeSwitcherBar=this._register(new v.o(t,{actionViewItemProvider:e=>{if(e instanceof Ce.L$)return this.compositeOverflowActionViewItem;const t=this.model.findItem(e.id);return t&&this.instantiationService.createInstance(Ce.fn,{draggable:!0,colors:this.options.colors,icon:this.options.icon,hoverOptions:this.options.activityHoverOptions},e,t.pinnedAction,t.toggleBadgeAction,(e=>this.options.getContextMenuActionsForComposite(e)),(()=>this.getContextMenuActions()),this.options.dndHandler,this)},orientation:this.options.orientation,ariaLabel:(0,l.NC)("activityBarAriaLabel","Active View Switcher"),ariaRole:"tablist",animated:!1,preventLoopNavigation:this.options.preventLoopNavigation,triggerKeys:{keyDown:!0}})),this._register((0,w.nm)(e,w.tw.CONTEXT_MENU,(e=>this.showContextMenu(e)))),this._register(U.o.addTarget(e)),this._register((0,w.nm)(e,U.t.Contextmenu,(e=>this.showContextMenu(e)))),this._register(G.Mi.INSTANCE.registerTarget(e,{onDragOver:o=>{const s=this.getVisibleComposites();if(!s.length||o.eventData.target&&(0,w.jg)(o.eventData.target,t))return void(i=this.updateFromDragging(e,!1,!1,!0));const n=this.insertAtFront(t,o.eventData),r=n?s[0]:s[s.length-1],a=this.options.dndHandler.onDragOver(o.dragAndDropData,r.id,o.eventData);(0,G.cP)(o.eventData.dataTransfer,"move",a),i=this.updateFromDragging(e,a,n,!0)},onDragLeave:t=>{i=this.updateFromDragging(e,!1,!1,!1)},onDragEnd:t=>{i=this.updateFromDragging(e,!1,!1,!1)},onDrop:o=>{const s=this.getVisibleComposites();if(s.length){const e=this.insertAtFront(t,o.eventData)?s[0]:s[s.length-1];this.options.dndHandler.drop(o.dragAndDropData,e.id,o.eventData,i)}i=this.updateFromDragging(e,!1,!1,!1)}})),t}insertAtFront(e,t){const i=e.getBoundingClientRect(),o=t.clientX,s=t.clientY;switch(this.options.orientation){case 0:return o<i.left;case 1:return s<i.top}}updateFromDragging(e,t,i,o){if(e.classList.toggle("dragged-over",o),e.classList.toggle("dragged-over-head",t&&i),e.classList.toggle("dragged-over-tail",t&&!i),t)return{verticallyBefore:i,horizontallyBefore:i}}focus(e){this.compositeSwitcherBar?.focus(e)}recomputeSizes(){this.computeSizes(this.model.visibleItems)}layout(e){this.dimension=e,0!==e.height&&0!==e.width&&(0===this.compositeSizeInBar.size&&this.computeSizes(this.model.visibleItems),this.updateCompositeSwitcher())}addComposite({id:e,name:t,order:i,requestedIndex:o}){this.model.add(e,t,i,o)&&(this.computeSizes([this.model.findItem(e)]),this.updateCompositeSwitcher())}removeComposite(e){this.isPinned(e)&&this.unpin(e),this.model.remove(e)&&this.updateCompositeSwitcher()}hideComposite(e){this.model.hide(e)&&(this.resetActiveComposite(e),this.updateCompositeSwitcher())}activateComposite(e){const t=this.model.activeItem;this.model.activate(e)&&(-1===this.visibleComposites.indexOf(e)||this.model.activeItem&&!this.model.activeItem.pinned||t&&!t.pinned)&&this.updateCompositeSwitcher()}deactivateComposite(e){const t=this.model.activeItem;this.model.deactivate()&&t&&!t.pinned&&this.updateCompositeSwitcher()}showActivity(e,t,i,o){if(!t)throw(0,m.b1)("badge");"number"!=typeof o&&(o=0);const s={badge:t,clazz:i,priority:o};return this.model.addActivity(e,s),(0,p.OF)((()=>this.model.removeActivity(e,s)))}async pin(e,t){this.model.setPinned(e,!0)&&(this.updateCompositeSwitcher(),t&&(await this.options.openComposite(e),this.activateComposite(e)))}unpin(e){this.model.setPinned(e,!1)&&(this.updateCompositeSwitcher(),this.resetActiveComposite(e))}areBadgesEnabled(e){return this.viewDescriptorService.getViewContainerBadgeEnablementState(e)}toggleBadgeEnablement(e){this.viewDescriptorService.setViewContainerBadgeEnablementState(e,!this.areBadgesEnabled(e)),this.updateCompositeSwitcher();const t=this.model.findItem(e);t&&t.activityAction.setBadge(t.activityAction.getBadge(),t.activityAction.getClass())}resetActiveComposite(e){const t=this.options.getDefaultCompositeId();this.model.activeItem&&this.model.activeItem.id===e&&(this.deactivateComposite(e),t&&t!==e&&this.isPinned(t)?this.options.openComposite(t,!0):this.options.openComposite(this.visibleComposites.filter((t=>t!==e))[0]))}isPinned(e){const t=this.model.findItem(e);return t?.pinned}move(e,t,i){if(void 0!==i){const o=this.model.items.findIndex((t=>t.id===e));let s=this.model.items.findIndex((e=>e.id===t));o>=0&&s>=0&&(!i&&o>s&&s++,i&&o<s&&s--,s<this.model.items.length&&s>=0&&s!==o&&this.model.move(this.model.items[o].id,this.model.items[s].id)&&setTimeout((()=>this.updateCompositeSwitcher()),0))}else this.model.move(e,t)&&setTimeout((()=>this.updateCompositeSwitcher()),0)}getAction(e){const t=this.model.findItem(e);return t?.activityAction}computeSizes(e){const t=this.options.compositeSize;if(t)e.forEach((e=>this.compositeSizeInBar.set(e.id,t)));else{const t=this.compositeSwitcherBar;if(t&&this.dimension&&0!==this.dimension.height&&0!==this.dimension.width){const i=t.viewItems.length;t.push(e.map((e=>e.activityAction))),e.forEach(((e,o)=>this.compositeSizeInBar.set(e.id,1===this.options.orientation?t.getHeight(i+o):t.getWidth(i+o)))),e.forEach((()=>t.pull(t.viewItems.length-1)))}}}updateCompositeSwitcher(){const e=this.compositeSwitcherBar;if(!e||!this.dimension)return;let t=this.model.visibleItems.filter((e=>e.pinned||this.model.activeItem&&this.model.activeItem.id===e.id)).map((e=>e.id)),i=t.length;const o=t.length;let s=0;const n=1===this.options.orientation?this.dimension.height:this.dimension.width;for(let e=0;e<t.length;e++){const o=this.compositeSizeInBar.get(t[e]);if(s+o>n){i=e;break}s+=o}for(o>i&&(t=t.slice(0,i)),this.model.activeItem&&t.every((e=>!!this.model.activeItem&&e!==this.model.activeItem.id))&&(s+=this.compositeSizeInBar.get(this.model.activeItem.id),t.push(this.model.activeItem.id));s>n&&t.length;){const e=t.length>1?t.splice(t.length-2,1)[0]:t.pop();s-=this.compositeSizeInBar.get(e)}for(o>t.length&&(s+=this.options.overflowActionSize);s>n&&t.length;){const e=t.length>1&&t[t.length-1]===this.model.activeItem?.id?t.splice(t.length-2,1)[0]:t.pop();s-=this.compositeSizeInBar.get(e)}o===t.length&&this.compositeOverflowAction&&(e.pull(e.length()-1),this.compositeOverflowAction.dispose(),this.compositeOverflowAction=void 0,this.compositeOverflowActionViewItem?.dispose(),this.compositeOverflowActionViewItem=void 0);const r=[];this.visibleComposites.forEach(((e,i)=>{t.includes(e)||r.push(i)})),r.reverse().forEach((t=>{const i=e.viewItems[t];e.pull(t),i.dispose(),this.visibleComposites.splice(t,1)})),t.forEach(((t,i)=>{const o=this.visibleComposites.indexOf(t);if(i!==o){if(-1!==o){const t=e.viewItems[o];e.pull(o),t.dispose(),this.visibleComposites.splice(o,1)}e.push(this.model.findItem(t).activityAction,{label:!0,icon:this.options.icon,index:i}),this.visibleComposites.splice(i,0,t)}})),o>t.length&&!this.compositeOverflowAction&&(this.compositeOverflowAction=this.instantiationService.createInstance(Ce.L$,(()=>{this.compositeOverflowActionViewItem?.showMenu()})),this.compositeOverflowActionViewItem=this.instantiationService.createInstance(Ce.Ui,this.compositeOverflowAction,(()=>this.getOverflowingComposites()),(()=>this.model.activeItem?this.model.activeItem.id:void 0),(e=>{const t=this.model.findItem(e);return t?.activity[0]?.badge}),this.options.getOnCompositeClickAction,this.options.colors,this.options.activityHoverOptions),e.push(this.compositeOverflowAction,{label:!1,icon:!0})),this._onDidChange.fire()}getOverflowingComposites(){let e=this.model.visibleItems.filter((e=>e.pinned)).map((e=>e.id));return this.model.activeItem&&!this.model.activeItem.pinned&&e.push(this.model.activeItem.id),e=e.filter((e=>!this.visibleComposites.includes(e))),this.model.visibleItems.filter((t=>e.includes(t.id))).map((e=>({id:e.id,name:this.getAction(e.id)?.label||e.name})))}showContextMenu(e){w.zB.stop(e,!0);const t=new W.nV(e);this.contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>this.getContextMenuActions(e)})}getContextMenuActions(e){return this.model.visibleItems.map((({id:e,name:t,activityAction:i})=>(0,ye.xw)({id:e,label:this.getAction(e).label||t||e,checked:this.isPinned(e),enabled:i.enabled,run:()=>{this.isPinned(e)?this.unpin(e):this.pin(e,!0)}})))}};ze=(0,o.g)([(0,o.f)(2,c.TG),(0,o.f)(3,O.i),(0,o.f)(4,r.XH)],ze);class Ge{get items(){return this._items}constructor(e,t){this._items=[],this.options=t,this.setItems(e)}setItems(e){const t=[];let i=!1;if(this.items&&0!==this.items.length){const o=this.items;for(let s=0;s<e.length;s++){const n=e[s],r=o.filter((({id:e})=>e===n.id))[0];r?r.pinned!==n.pinned||s!==o.indexOf(r)?(r.pinned=n.pinned,t.push(r),i=!0):t.push(r):(t.push(this.createCompositeBarItem(n.id,n.name,n.order,n.pinned,n.visible)),i=!0)}this._items=t}else this._items=e.map((e=>this.createCompositeBarItem(e.id,e.name,e.order,e.pinned,e.visible))),i=!0;return i}get visibleItems(){return this.items.filter((e=>e.visible))}get pinnedItems(){return this.items.filter((e=>e.visible&&e.pinned))}createCompositeBarItem(e,t,i,o,s){const n=this.options;return{id:e,name:t,pinned:o,order:i,visible:s,activity:[],get activityAction(){return n.getActivityAction(e)},get pinnedAction(){return n.getCompositePinnedAction(e)},get toggleBadgeAction(){return n.getCompositeBadgeAction(e)}}}add(e,t,i,o){const s=this.findItem(e);if(s){let e=!1;return s.name=t,(0,y.Jp)(i)||(e=s.order!==i,s.order=i),s.visible||(s.visible=!0,e=!0),e}{const s=this.createCompositeBarItem(e,t,i,!0,!0);if((0,y.Jp)(o))if((0,y.Jp)(i))this.items.push(s);else{let e=0;for(;e<this.items.length&&"number"==typeof this.items[e].order&&this.items[e].order<i;)e++;this.items.splice(e,0,s)}else{let e=0,t=o;for(;t>0&&e<this.items.length;)this.items[e++].visible&&t--;this.items.splice(e,0,s)}return!0}}remove(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return this.items.splice(t,1),!0;return!1}hide(e){for(const t of this.items)if(t.id===e)return!!t.visible&&(t.visible=!1,!0);return!1}move(e,t){const i=this.findIndex(e),o=this.findIndex(t);if(-1===i||-1===o)return!1;const s=this.items.splice(i,1)[0];return this.items.splice(o,0,s),s.pinned=!0,!0}setPinned(e,t){for(const i of this.items)if(i.id===e)return i.pinned!==t&&(i.pinned=t,!0);return!1}addActivity(e,t){const i=this.findItem(e);if(i){const o=i.activity;for(let e=0;e<=o.length;e++){if(e===o.length){o.push(t);break}if(o[e].priority<=t.priority){o.splice(e,0,t);break}}return this.updateActivity(e),!0}return!1}removeActivity(e,t){const i=this.findItem(e);if(i){const o=i.activity.indexOf(t);if(-1!==o)return i.activity.splice(o,1),this.updateActivity(e),!0}return!1}updateActivity(e){const t=this.findItem(e);if(t)if(t.activity.length){const[{badge:e,clazz:i}]=t.activity;t.activityAction.setBadge(e,i)}else t.activityAction.setBadge(void 0)}activate(e){if(!this.activeItem||this.activeItem.id!==e){this.activeItem&&this.deactivate();for(const t of this.items)if(t.id===e)return this.activeItem=t,this.activeItem.activityAction.activate(),!0}return!1}deactivate(){return!!this.activeItem&&(this.activeItem.activityAction.deactivate(),this.activeItem=void 0,!0)}findItem(e){return this.items.filter((t=>t.id===e))[0]}findIndex(e){for(let t=0;t<this.items.length;t++)if(this.items[t].id===e)return t;return-1}}(0,d.Z)(".monaco-workbench .menubar .toolbar-toggle-more,.monaco-workbench .menubar>.menubar-menu-button{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button{color:var(--vscode-activityBar-inactiveForeground)}.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover,.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus .toolbar-toggle-more{color:var(--vscode-activityBar-foreground)}.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button,.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button .toolbar-toggle-more{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .toolbar-toggle-more,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .toolbar-toggle-more{color:var(--vscode-menubar-selectionForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .menubar-menu-title{background-color:var(--vscode-menubar-selectionBackground)}.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline:dashed 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title{outline:solid 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline-color:var(--vscode-menubar-selectionBorder);outline-offset:-1px}",{});var Ue=i(67245),Ke=i(1432),$e=i(18076),je=i(15393),Xe=i(44349),Je=i(12749),Ye=i(46973),Qe=i(16268),qe=i(68272),Ze=i(73046),et=i(22258),tt=i(97295);(0,d.Z)('.menubar{box-sizing:border-box;display:flex;flex-shrink:1;height:100%;overflow:hidden}.menubar.overflow-menu-only{width:38px}.fullscreen .menubar:not(.compact){margin:0;padding:4px 5px}.menubar>.menubar-menu-button{-webkit-app-region:no-drag;zoom:1;align-items:center;box-sizing:border-box;cursor:default;display:flex;outline:0!important;white-space:nowrap}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title{outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px}.menubar.compact{flex-shrink:0;overflow:visible}.menubar.compact>.menubar-menu-button{height:100%;padding:0;width:100%}.menubar-menu-title{border-radius:5px;padding:0 8px}.menubar .menubar-menu-items-holder{left:0;opacity:1;position:fixed;z-index:2000}.menubar.compact .menubar-menu-items-holder{position:fixed}.menubar .menubar-menu-items-holder.monaco-menu-container{border:none;outline:0}.menubar .menubar-menu-items-holder.monaco-menu-container :focus{outline:0}.menubar .toolbar-toggle-more{align-items:center;display:flex;height:22px;justify-content:center;padding:0 8px;vertical-align:sub;width:22px}.menubar.compact .toolbar-toggle-more{align-items:center;cursor:pointer;display:flex;justify-content:center;left:0;position:relative;top:0;width:100%}.menubar.compact .toolbar-toggle-more:before,.menubar:not(.compact) .menubar-menu-button:first-child .toolbar-toggle-more:before{content:"\\eb94"!important}.menubar.compact>.menubar-menu-button.open .menubar-menu-title,.menubar.compact>.menubar-menu-button:focus .menubar-menu-title,.menubar.compact>.menubar-menu-button:hover .menubar-menu-title{outline-offset:-8px!important;outline-width:1px!important}',{});const it=w.$;var ot;!function(e){e[e.HIDDEN=0]="HIDDEN",e[e.VISIBLE=1]="VISIBLE",e[e.FOCUSED=2]="FOCUSED",e[e.OPEN=3]="OPEN"}(ot||(ot={}));class st extends p.JT{static{this.OVERFLOW_INDEX=-1}constructor(e,t,i){super(),this.container=e,this.options=t,this.menuStyle=i,this._mnemonicsInUse=!1,this.openedViaKeyboard=!1,this.awaitingAltRelease=!1,this.ignoreNextMouseUp=!1,this.updatePending=!1,this.numMenusShown=0,this.overflowLayoutScheduled=void 0,this.container.setAttribute("role","menubar"),this.isCompact&&this.container.classList.add("compact"),this.menus=[],this.mnemonics=new Map,this._focusState=ot.VISIBLE,this._onVisibilityChange=this._register(new g.Q5),this._onFocusStateChange=this._register(new g.Q5),this.createOverflowMenu(),this.menuUpdater=this._register(new je.pY((()=>this.update()),200)),this.actionRunner=this.options.actionRunner??this._register(new ye.Wi),this._register(this.actionRunner.onWillRun((()=>{this.setUnfocusedState()}))),this._register(w._q.getInstance().event(this.onModifierKeyToggled,this)),this._register(w.nm(this.container,w.tw.KEY_DOWN,(e=>{const t=new we.y1(e);let i=!0;const o=e.key?e.key.toLocaleLowerCase():"",s=Ke.dz&&!this.isCompact;if(t.equals(15)||s&&t.equals(1026))this.focusPrevious();else if(t.equals(17)||s&&t.equals(2))this.focusNext();else if(t.equals(9)&&this.isFocused&&!this.isOpen)this.setUnfocusedState();else if(!this.isOpen&&!t.ctrlKey&&this.options.enableMnemonics&&this.mnemonicsInUse&&this.mnemonics.has(o)){const e=this.mnemonics.get(o);this.onMenuTriggered(e,!1)}else i=!1;this.isCompact||!t.equals(1026)&&!t.equals(2)||t.preventDefault(),i&&(t.preventDefault(),t.stopPropagation())}))),this._register(w.nm(window,w.tw.MOUSE_DOWN,(()=>{this.isFocused&&this.setUnfocusedState()}))),this._register(w.nm(this.container,w.tw.FOCUS_IN,(e=>{const t=e;t.relatedTarget&&(this.container.contains(t.relatedTarget)||(this.focusToReturn=t.relatedTarget))}))),this._register(w.nm(this.container,w.tw.FOCUS_OUT,(e=>{const t=e;t.relatedTarget?t.relatedTarget&&!this.container.contains(t.relatedTarget)&&(this.focusToReturn=void 0,this.setUnfocusedState()):this.setUnfocusedState()}))),this._register(w.nm(window,w.tw.KEY_DOWN,(e=>{if(!this.options.enableMnemonics||!e.altKey||e.ctrlKey||e.defaultPrevented)return;const t=e.key.toLocaleLowerCase();if(!this.mnemonics.has(t))return;this.mnemonicsInUse=!0,this.updateMnemonicVisibility(!0);const i=this.mnemonics.get(t);this.onMenuTriggered(i,!1)}))),this.setUnfocusedState()}push(e){(0,Y._2)(e).forEach((e=>{const t=this.menus.length,i=(0,qe.t7)(e.label),o=qe.Dy.exec(e.label);if(o){const e=o[1]?o[1]:o[3];this.registerMnemonic(this.menus.length,e)}if(this.isCompact)this.menus.push(e);else{const o=it("div.menubar-menu-button",{role:"menuitem",tabindex:-1,"aria-label":i,"aria-haspopup":!0}),s=it("div.menubar-menu-title",{role:"none","aria-hidden":!0});o.appendChild(s),this.container.insertBefore(o,this.overflowMenu.buttonElement),this.updateLabels(s,o,e.label),this._register(w.nm(o,w.tw.KEY_UP,(e=>{const i=new we.y1(e);let o=!0;!i.equals(18)&&!i.equals(3)||this.isOpen?o=!1:(this.focusedMenu={index:t},this.openedViaKeyboard=!0,this.focusState=ot.OPEN),o&&(i.preventDefault(),i.stopPropagation())}))),this._register(U.o.addTarget(o)),this._register(w.nm(o,U.t.Tap,(e=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&w.jg(e.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(t,!0),e.preventDefault(),e.stopPropagation())}))),this._register(w.nm(o,w.tw.MOUSE_DOWN,(e=>{new W.nV(e).leftButton?(this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(t,!0)),e.preventDefault(),e.stopPropagation()):e.preventDefault()}))),this._register(w.nm(o,w.tw.MOUSE_UP,(e=>{e.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(t,!0))}))),this._register(w.nm(o,w.tw.MOUSE_ENTER,(()=>{this.isOpen&&!this.isCurrentMenu(t)?(o.focus(),this.cleanupCustomMenu(),this.showCustomMenu(t,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:t},o.focus())}))),this.menus.push({label:e.label,actions:e.actions,buttonElement:o,titleElement:s})}}))}createOverflowMenu(){const e=this.isCompact?l.NC("mAppMenu","Application Menu"):l.NC("mMore","More"),t=it("div.menubar-menu-button",{role:"menuitem",tabindex:this.isCompact?0:-1,"aria-label":e,"aria-haspopup":!0}),i=it("div.menubar-menu-title.toolbar-toggle-more"+q.kS.asCSSSelector(Ze.lA.menuBarMore),{role:"none","aria-hidden":!0});t.appendChild(i),this.container.appendChild(t),t.style.visibility="hidden",this._register(w.nm(t,w.tw.KEY_UP,(e=>{const t=new we.y1(e);let i=!0;const o=[3];this.isCompact?(o.push(10),this.options.compactMode===qe.Nm.Right?o.push(17):this.options.compactMode===qe.Nm.Left&&o.push(15)):o.push(18),o.some((e=>t.equals(e)))&&!this.isOpen?(this.focusedMenu={index:st.OVERFLOW_INDEX},this.openedViaKeyboard=!0,this.focusState=ot.OPEN):i=!1,i&&(t.preventDefault(),t.stopPropagation())}))),this._register(U.o.addTarget(t)),this._register(w.nm(t,U.t.Tap,(e=>{this.isOpen&&this.focusedMenu&&this.focusedMenu.holder&&w.jg(e.initialTarget,this.focusedMenu.holder)||(this.ignoreNextMouseUp=!1,this.onMenuTriggered(st.OVERFLOW_INDEX,!0),e.preventDefault(),e.stopPropagation())}))),this._register(w.nm(t,w.tw.MOUSE_DOWN,(e=>{new W.nV(e).leftButton?(this.isOpen?this.ignoreNextMouseUp=!1:(this.ignoreNextMouseUp=!0,this.onMenuTriggered(st.OVERFLOW_INDEX,!0)),e.preventDefault(),e.stopPropagation()):e.preventDefault()}))),this._register(w.nm(t,w.tw.MOUSE_UP,(e=>{e.defaultPrevented||(this.ignoreNextMouseUp?this.ignoreNextMouseUp=!1:this.isFocused&&this.onMenuTriggered(st.OVERFLOW_INDEX,!0))}))),this._register(w.nm(t,w.tw.MOUSE_ENTER,(()=>{this.isOpen&&!this.isCurrentMenu(st.OVERFLOW_INDEX)?(this.overflowMenu.buttonElement.focus(),this.cleanupCustomMenu(),this.showCustomMenu(st.OVERFLOW_INDEX,!1)):this.isFocused&&!this.isOpen&&(this.focusedMenu={index:st.OVERFLOW_INDEX},t.focus())}))),this.overflowMenu={buttonElement:t,titleElement:i,label:"More",actions:[]}}updateMenu(e){const t=this.menus.filter((t=>t.label===e.label));t&&t.length&&(t[0].actions=e.actions)}dispose(){super.dispose(),this.menus.forEach((e=>{e.titleElement?.remove(),e.buttonElement?.remove()})),this.overflowMenu.titleElement.remove(),this.overflowMenu.buttonElement.remove(),(0,p.B9)(this.overflowLayoutScheduled),this.overflowLayoutScheduled=void 0}blur(){this.setUnfocusedState()}getWidth(){if(!this.isCompact&&this.menus){const e=this.menus[0].buttonElement.getBoundingClientRect().left;return(this.hasOverflow?this.overflowMenu.buttonElement.getBoundingClientRect().right:this.menus[this.menus.length-1].buttonElement.getBoundingClientRect().right)-e}return 0}getHeight(){return this.container.clientHeight}toggleFocus(){this.isFocused||"hidden"===this.options.visibility?this.isOpen||this.setUnfocusedState():(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:st.OVERFLOW_INDEX},this.focusState=ot.FOCUSED)}updateOverflowAction(){if(!this.menus||!this.menus.length)return;const e="overflow-menu-only";this.container.classList.toggle(e,!1);const t=this.container.offsetWidth;let i=0,o=this.isCompact;const s=this.numMenusShown;this.numMenusShown=0;const n=this.menus.filter((e=>void 0!==e.buttonElement&&void 0!==e.titleElement));for(const e of n){if(!o){const n=e.buttonElement.offsetWidth;i+n>t?o=!0:(i+=n,this.numMenusShown++,this.numMenusShown>s&&(e.buttonElement.style.visibility="visible"))}o&&(e.buttonElement.style.visibility="hidden")}if(this.numMenusShown-1<=n.length/2){for(const e of n)e.buttonElement.style.visibility="hidden";o=!0,this.numMenusShown=0,i=0}if(this.isCompact){this.overflowMenu.actions=[];for(let e=this.numMenusShown;e<this.menus.length;e++)this.overflowMenu.actions.push(new ye.wY(`menubar.submenu.${this.menus[e].label}`,this.menus[e].label,this.menus[e].actions||[]));const e=this.options.getCompactMenuActions?.();e&&e.length&&(this.overflowMenu.actions.push(new ye.Z0),this.overflowMenu.actions.push(...e)),this.overflowMenu.buttonElement.style.visibility="visible"}else if(o){for(;i+this.overflowMenu.buttonElement.offsetWidth>t&&this.numMenusShown>0;){this.numMenusShown--;const e=n[this.numMenusShown].buttonElement.offsetWidth;n[this.numMenusShown].buttonElement.style.visibility="hidden",i-=e}this.overflowMenu.actions=[];for(let e=this.numMenusShown;e<n.length;e++)this.overflowMenu.actions.push(new ye.wY(`menubar.submenu.${n[e].label}`,n[e].label,n[e].actions||[]));this.overflowMenu.buttonElement.nextElementSibling!==n[this.numMenusShown].buttonElement&&(this.overflowMenu.buttonElement.remove(),this.container.insertBefore(this.overflowMenu.buttonElement,n[this.numMenusShown].buttonElement)),this.overflowMenu.buttonElement.style.visibility="visible"}else this.overflowMenu.buttonElement.remove(),this.container.appendChild(this.overflowMenu.buttonElement),this.overflowMenu.buttonElement.style.visibility="hidden";this.container.classList.toggle(e,0===this.numMenusShown)}updateLabels(e,t,i){const o=(0,qe.t7)(i);if(this.options.enableMnemonics){const t=tt.YU(i);qe.Yo.lastIndex=0;let o=qe.Yo.exec(t);for(;o&&o[1];)o=qe.Yo.exec(t);const s=e=>e.replace(/&amp;&amp;/g,"&amp;");o?(e.innerText="",e.append(tt.j3(s(t.substr(0,o.index))," "),it("mnemonic",{"aria-hidden":"true"},o[3]),tt.oL(s(t.substr(o.index+o[0].length))," "))):e.innerText=s(t).trim()}else e.innerText=o.replace(/&&/g,"&");const s=qe.Dy.exec(i);if(s){const e=s[1]?s[1]:s[3];this.options.enableMnemonics?t.setAttribute("aria-keyshortcuts","Alt+"+e.toLocaleLowerCase()):t.removeAttribute("aria-keyshortcuts")}}update(e){e&&(this.options=e),this.isFocused?this.updatePending=!0:(this.menus.forEach((e=>{e.buttonElement&&e.titleElement&&this.updateLabels(e.titleElement,e.buttonElement,e.label)})),this.overflowLayoutScheduled||(this.overflowLayoutScheduled=w.jL((()=>{this.updateOverflowAction(),this.overflowLayoutScheduled=void 0}))),this.setUnfocusedState())}registerMnemonic(e,t){this.mnemonics.set(t.toLocaleLowerCase(),e)}hideMenubar(){"none"!==this.container.style.display&&(this.container.style.display="none",this._onVisibilityChange.fire(!1))}showMenubar(){"flex"!==this.container.style.display&&(this.container.style.display="flex",this._onVisibilityChange.fire(!0),this.updateOverflowAction())}get focusState(){return this._focusState}set focusState(e){if(this._focusState>=ot.FOCUSED&&e<ot.FOCUSED&&this.updatePending&&(this.menuUpdater.schedule(),this.updatePending=!1),e===this._focusState)return;const t=this.isVisible,i=this.isOpen,o=this.isFocused;switch(this._focusState=e,e){case ot.HIDDEN:t&&this.hideMenubar(),i&&this.cleanupCustomMenu(),o&&(this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case ot.VISIBLE:t||this.showMenubar(),i&&this.cleanupCustomMenu(),o&&(this.focusedMenu&&(this.focusedMenu.index===st.OVERFLOW_INDEX?this.overflowMenu.buttonElement.blur():this.menus[this.focusedMenu.index].buttonElement?.blur()),this.focusedMenu=void 0,this.focusToReturn&&(this.focusToReturn.focus(),this.focusToReturn=void 0));break;case ot.FOCUSED:t||this.showMenubar(),i&&this.cleanupCustomMenu(),this.focusedMenu&&(this.focusedMenu.index===st.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[this.focusedMenu.index].buttonElement?.focus());break;case ot.OPEN:t||this.showMenubar(),this.focusedMenu&&this.showCustomMenu(this.focusedMenu.index,this.openedViaKeyboard)}this._focusState=e,this._onFocusStateChange.fire(this.focusState>=ot.FOCUSED)}get isVisible(){return this.focusState>=ot.VISIBLE}get isFocused(){return this.focusState>=ot.FOCUSED}get isOpen(){return this.focusState>=ot.OPEN}get hasOverflow(){return this.isCompact||this.numMenusShown<this.menus.length}get isCompact(){return void 0!==this.options.compactMode}setUnfocusedState(){"toggle"===this.options.visibility||"hidden"===this.options.visibility||"classic"===this.options.visibility&&Qe.rm()?this.focusState=ot.HIDDEN:this.focusState=ot.VISIBLE,this.ignoreNextMouseUp=!1,this.mnemonicsInUse=!1,this.updateMnemonicVisibility(!1)}focusPrevious(){if(!this.focusedMenu||0===this.numMenusShown)return;let e=(this.focusedMenu.index-1+this.numMenusShown)%this.numMenusShown;this.focusedMenu.index===st.OVERFLOW_INDEX?e=this.numMenusShown-1:0===this.focusedMenu.index&&this.hasOverflow&&(e=st.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===st.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[e].buttonElement?.focus()))}focusNext(){if(!this.focusedMenu||0===this.numMenusShown)return;let e=(this.focusedMenu.index+1)%this.numMenusShown;this.focusedMenu.index===st.OVERFLOW_INDEX?e=0:this.focusedMenu.index===this.numMenusShown-1&&(e=st.OVERFLOW_INDEX),e!==this.focusedMenu.index&&(this.isOpen?(this.cleanupCustomMenu(),this.showCustomMenu(e)):this.isFocused&&(this.focusedMenu.index=e,e===st.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[e].buttonElement?.focus()))}updateMnemonicVisibility(e){this.menus&&this.menus.forEach((t=>{if(t.titleElement&&t.titleElement.children.length){const i=t.titleElement.children.item(0);i&&(i.style.textDecoration=this.options.alwaysOnMnemonics||e?"underline":"")}}))}get mnemonicsInUse(){return this._mnemonicsInUse}set mnemonicsInUse(e){this._mnemonicsInUse=e}get shouldAltKeyFocus(){return!(Ke.dz||this.options.disableAltFocus&&"toggle"!==this.options.visibility)}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}onMenuTriggered(e,t){this.isOpen?this.isCurrentMenu(e)?this.setUnfocusedState():(this.cleanupCustomMenu(),this.showCustomMenu(e,this.openedViaKeyboard)):(this.focusedMenu={index:e},this.openedViaKeyboard=!t,this.focusState=ot.OPEN)}onModifierKeyToggled(e){const t=!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey);"hidden"!==this.options.visibility&&(e.event&&this.shouldAltKeyFocus&&159===et.Z5.toEnum(e.event.code)&&e.event.preventDefault(),this.isFocused&&"alt"===e.lastKeyPressed&&e.altKey&&(this.setUnfocusedState(),this.mnemonicsInUse=!1,this.awaitingAltRelease=!0),t&&"alt"===e.lastKeyPressed&&"alt"===e.lastKeyReleased&&(this.awaitingAltRelease||(!this.isFocused&&this.shouldAltKeyFocus?(this.mnemonicsInUse=!0,this.focusedMenu={index:this.numMenusShown>0?0:st.OVERFLOW_INDEX},this.focusState=ot.FOCUSED):this.isOpen||this.setUnfocusedState())),e.altKey||"alt"!==e.lastKeyReleased||(this.awaitingAltRelease=!1),this.options.enableMnemonics&&this.menus&&!this.isOpen&&this.updateMnemonicVisibility(!this.awaitingAltRelease&&e.altKey||this.mnemonicsInUse))}isCurrentMenu(e){return!!this.focusedMenu&&this.focusedMenu.index===e}cleanupCustomMenu(){this.focusedMenu&&(this.focusedMenu.index===st.OVERFLOW_INDEX?this.overflowMenu.buttonElement.focus():this.menus[this.focusedMenu.index].buttonElement?.focus(),this.focusedMenu.holder&&(this.focusedMenu.holder.parentElement?.classList.remove("open"),this.focusedMenu.holder.remove()),this.focusedMenu.widget?.dispose(),this.focusedMenu={index:this.focusedMenu.index})}showCustomMenu(e,t=!0){const i=e>=this.numMenusShown?st.OVERFLOW_INDEX:e,o=i===st.OVERFLOW_INDEX?this.overflowMenu:this.menus[i];if(!o.actions||!o.buttonElement||!o.titleElement)return;const s=it("div.menubar-menu-items-holder",{title:""});o.buttonElement.classList.add("open");const n=o.titleElement.getBoundingClientRect(),r=w.I8(o.titleElement);this.options.compactMode===qe.Nm.Right?(s.style.top=`${n.top}px`,s.style.left=`${n.left+this.container.clientWidth}px`):this.options.compactMode===qe.Nm.Left?(s.style.top=`${n.top}px`,s.style.right=`${this.container.clientWidth}px`,s.style.left="auto"):(s.style.top=n.bottom*r+"px",s.style.left=n.left*r+"px"),o.buttonElement.appendChild(s);const a={getKeyBinding:this.options.getKeybinding,actionRunner:this.actionRunner,enableMnemonics:this.options.alwaysOnMnemonics||this.mnemonicsInUse&&this.options.enableMnemonics,ariaLabel:(0,y.f6)(o.buttonElement.getAttribute("aria-label")),expandDirection:this.isCompact?this.options.compactMode:qe.Nm.Right,useEventAsContext:!0},c=this._register(new qe.v2(s,o.actions,a,this.menuStyle));this._register(c.onDidCancel((()=>{this.focusState=ot.FOCUSED}))),i!==e?c.trigger(e-this.numMenusShown):c.focus(t),this.focusedMenu={index:i,holder:s,widget:c}}}var nt=i(68843),rt=i(31106),at=i(85526),ct=i(10161),dt=i(39282),ht=i(94565),lt=i(49953),ut=i(49989),pt=i(41157),gt=i(40382),mt=i(73733),vt=i(72042),bt=i(22016),ft=i(75761),wt=i(39403);function yt(e){return e&&e.hasOwnProperty("folderUri")}var Ct=i(76446);const St="inRecentFilesPicker";class _t extends te.Ke{constructor(e){super(e),this.removeFromRecentlyOpened={iconClass:q.kS.asClassName(Ze.lA.removeClose),tooltip:(0,l.NC)("remove","Remove from Recently Opened")},this.dirtyRecentlyOpenedFolder={iconClass:"dirty-workspace "+q.kS.asClassName(Ze.lA.closeDirty),tooltip:(0,l.NC)("dirtyRecentlyOpenedFolder","Folder With Unsaved Files"),alwaysVisible:!0},this.dirtyRecentlyOpenedWorkspace={...this.dirtyRecentlyOpenedFolder,tooltip:(0,l.NC)("dirtyRecentlyOpenedWorkspace","Workspace With Unsaved Files")}}async run(e){const t=e.get($e.Dc),i=e.get(pt.eJ),o=e.get(gt.ec),s=e.get(Xe.e),n=e.get(N.d),r=e.get(mt.q),a=e.get(vt.O),c=e.get(at.$),d=e.get(Ct.Ss),h=await t.getRecentlyOpened(),u=await t.getDirtyWorkspaces();let p=!1;const g=new se.Y9,m=new se.Y9;for(const e of u)yt(e)?g.set(e.folderUri,!0):(m.set(e.workspace.configPath,e.workspace),p=!0);const v=new se.Y9,b=new se.Y9;for(const e of h.workspaces)(0,$e.ID)(e)?v.set(e.folderUri,!0):(b.set(e.workspace.configPath,e.workspace),p=!0);const f=[];for(const e of h.workspaces){const t=(0,$e.ID)(e)?g.has(e.folderUri):m.has(e.workspace.configPath);f.push(this.toQuickPick(r,a,s,e,t))}for(const e of u)(yt(e)&&!v.has(e.folderUri)||(w=e)&&w.hasOwnProperty("workspace")&&!b.has(e.workspace.configPath))&&f.push(this.toQuickPick(r,a,s,e,!0));var w;const y=h.files.map((e=>this.toQuickPick(r,a,s,e,!1))),C=h.workspaces[0],S=C&&o.isCurrentWorkspace((0,$e.eI)(C)?C.workspace:C.folderUri);let _;const E={type:"separator",label:p?(0,l.NC)("workspacesAndFolders","folders & workspaces"):(0,l.NC)("folders","folders")},x={type:"separator",label:(0,l.NC)("files","files")},k=[E,...f,x,...y],D=await i.pick(k,{contextKey:St,activeItem:[...f,...y][S?1:0],placeHolder:Ke.dz?(0,l.NC)("openRecentPlaceholderMac","Select to open (hold Cmd-key to force new window or Option-key for same window)"):(0,l.NC)("openRecentPlaceholder","Select to open (hold Ctrl-key to force new window or Alt-key for same window)"),matchOnDescription:!0,onKeyMods:e=>_=e,quickNavigate:this.isQuickNavigate()?{keybindings:n.lookupKeybindings(this.desc.id)}:void 0,hideInput:this.isQuickNavigate(),onDidTriggerItemButton:async e=>{if(e.button===this.removeFromRecentlyOpened)await t.removeRecentlyOpened([e.item.resource]),e.removeItem();else if(e.button===this.dirtyRecentlyOpenedFolder||e.button===this.dirtyRecentlyOpenedWorkspace){const t=e.button===this.dirtyRecentlyOpenedWorkspace,{confirmed:o}=await d.confirm({title:t?(0,l.NC)("dirtyWorkspace","Workspace with Unsaved Files"):(0,l.NC)("dirtyFolder","Folder with Unsaved Files"),message:t?(0,l.NC)("dirtyWorkspaceConfirm","Do you want to open the workspace to review the unsaved files?"):(0,l.NC)("dirtyFolderConfirm","Do you want to open the folder to review the unsaved files?"),detail:t?(0,l.NC)("dirtyWorkspaceConfirmDetail","Workspaces with unsaved files cannot be removed until all unsaved files have been saved or reverted."):(0,l.NC)("dirtyFolderConfirmDetail","Folders with unsaved files cannot be removed until all unsaved files have been saved or reverted.")});o&&(c.openWindow([e.item.openable],{remoteAuthority:e.item.remoteAuthority||null}),i.cancel())}}});if(D)return c.openWindow([D.openable],{forceNewWindow:_?.ctrlCmd,forceReuseWindow:_?.alt,remoteAuthority:D.remoteAuthority||null})}toQuickPick(e,t,i,o,s){let n,r,a,c,d=!1;(0,$e.ID)(o)?(c=o.folderUri,r=(0,bt.r)(e,t,c,ft.RR.FOLDER),n={folderUri:c},a=o.label||i.getWorkspaceLabel(c,{verbose:2})):(0,$e.eI)(o)?(c=o.workspace.configPath,r=(0,bt.r)(e,t,c,ft.RR.ROOT_FOLDER),n={workspaceUri:c},a=o.label||i.getWorkspaceLabel(o.workspace,{verbose:2}),d=!0):(c=o.fileUri,r=(0,bt.r)(e,t,c,ft.RR.FILE),n={fileUri:c},a=o.label||i.getUriLabel(c));const{name:h,parentPath:u}=(0,nt.w7)(a);return{iconClasses:r,label:h,ariaLabel:s?d?(0,l.NC)("recentDirtyWorkspaceAriaLabel","{0}, workspace with unsaved changes",h):(0,l.NC)("recentDirtyFolderAriaLabel","{0}, folder with unsaved changes",h):h,description:u,buttons:s?[d?this.dirtyRecentlyOpenedWorkspace:this.dirtyRecentlyOpenedFolder]:[this.removeFromRecentlyOpened],openable:n,resource:c,remoteAuthority:o.remoteAuthority}}}class Et extends _t{static{this.ID="workbench.action.openRecent"}constructor(){super({id:Et.ID,title:{value:(0,l.NC)("openRecent","Open Recent..."),mnemonicTitle:(0,l.NC)({key:"miMore",comment:["&& denotes a mnemonic"]},"&&More..."),original:"Open Recent..."},category:ie.R.File,f1:!0,keybinding:{weight:200,primary:2096,mac:{primary:304}},menu:{id:te.eH.MenubarRecentMenu,group:"y_more",order:1}})}isQuickNavigate(){return!1}}class xt extends te.Ke{static{this.ID="workbench.action.reloadWindow"}constructor(){super({id:xt.ID,title:{value:(0,l.NC)("reloadWindow","Reload Window"),original:"Reload Window"},category:ie.R.Developer,f1:!0,keybinding:{weight:250,when:dt.RG,primary:2096}})}run(e){return e.get(at.$).reload()}}const kt=H.Ao.and(wt.gz,H.Ao.has(St)),Dt="workbench.action.quickOpenNavigateNextInRecentFilesPicker";ut.W.registerCommandAndKeybindingRule({id:Dt,weight:250,handler:(0,wt.x8)(Dt,!0),when:kt,primary:2096,mac:{primary:304}});const At="workbench.action.quickOpenNavigatePreviousInRecentFilesPicker";ut.W.registerCommandAndKeybindingRule({id:At,weight:250,handler:(0,wt.x8)(At,!1),when:kt,primary:3120,mac:{primary:1328}}),ht.P.registerCommand("workbench.action.toggleConfirmBeforeClose",(e=>{const t=e.get(Ee.Ui),i=t.inspect("window.confirmBeforeClose").userValue;return t.updateValue("window.confirmBeforeClose","never"===i?"keyboardOnly":"never")}));var It=i(31382);te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarFileMenu,title:{value:"File",original:"File",mnemonicTitle:(0,l.NC)({key:"mFile",comment:["&& denotes a mnemonic"]},"&&File")},order:1}),te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarEditMenu,title:{value:"Edit",original:"Edit",mnemonicTitle:(0,l.NC)({key:"mEdit",comment:["&& denotes a mnemonic"]},"&&Edit")},order:2}),te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarSelectionMenu,title:{value:"Selection",original:"Selection",mnemonicTitle:(0,l.NC)({key:"mSelection",comment:["&& denotes a mnemonic"]},"&&Selection")},order:3}),te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarViewMenu,title:{value:"View",original:"View",mnemonicTitle:(0,l.NC)({key:"mView",comment:["&& denotes a mnemonic"]},"&&View")},order:4}),te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarGoMenu,title:{value:"Go",original:"Go",mnemonicTitle:(0,l.NC)({key:"mGoto",comment:["&& denotes a mnemonic"]},"&&Go")},order:5}),te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarTerminalMenu,title:{value:"Terminal",original:"Terminal",mnemonicTitle:(0,l.NC)({key:"mTerminal",comment:["&& denotes a mnemonic"]},"&&Terminal")},order:7}),te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarHelpMenu,title:{value:"Help",original:"Help",mnemonicTitle:(0,l.NC)({key:"mHelp",comment:["&& denotes a mnemonic"]},"&&Help")},order:8}),te.BH.appendMenuItem(te.eH.MenubarMainMenu,{submenu:te.eH.MenubarPreferencesMenu,title:{value:"Preferences",original:"Preferences",mnemonicTitle:(0,l.NC)({key:"mPreferences",comment:["&& denotes a mnemonic"]},"Preferences")},when:dt.hr,order:9});class Tt extends p.JT{static{this.MAX_MENU_RECENT_ENTRIES=10}constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,g){super(),this.menuService=e,this.workspacesService=t,this.contextKeyService=i,this.keybindingService=o,this.configurationService=s,this.labelService=n,this.updateService=r,this.storageService=a,this.notificationService=c,this.preferencesService=d,this.environmentService=h,this.accessibilityService=l,this.hostService=u,this.commandService=g,this.keys=["window.menuBarVisibility","window.enableMenuBarMnemonics","window.customMenuBarAltFocus","workbench.sideBar.location","window.nativeTabs"],this.menus={},this.topLevelTitles={},this.recentlyOpened={files:[],workspaces:[]},this.mainMenu=this._register(this.menuService.createMenu(te.eH.MenubarMainMenu,this.contextKeyService)),this.mainMenuDisposables=this._register(new p.SL),this.setupMainMenu(),this.menuUpdater=this._register(new je.pY((()=>this.doUpdateMenubar(!1)),200)),this.notifyUserOfCustomMenubarAccessibility()}registerListeners(){this._register(this.hostService.onDidChangeFocus((e=>this.onDidChangeWindowFocus(e)))),this._register(this.configurationService.onDidChangeConfiguration((e=>this.onConfigurationUpdated(e)))),this.updateService.onStateChange((()=>this.onUpdateStateChange())),this._register(this.workspacesService.onDidChangeRecentlyOpened((()=>{this.onDidChangeRecentlyOpened()}))),this._register(this.keybindingService.onDidUpdateKeybindings((()=>this.updateMenubar()))),this._register(this.labelService.onDidChangeFormatters((()=>{this.onDidChangeRecentlyOpened()}))),this._register(this.mainMenu.onDidChange((()=>{this.setupMainMenu(),this.doUpdateMenubar(!0)})))}setupMainMenu(){this.mainMenuDisposables.clear(),this.menus={},this.topLevelTitles={};const[,e]=this.mainMenu.getActions()[0];for(const t of e)t instanceof te.NZ&&"string"!=typeof t.item.title&&(this.menus[t.item.title.original]=this.mainMenuDisposables.add(this.menuService.createMenu(t.item.submenu,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.topLevelTitles[t.item.title.original]=t.item.title.mnemonicTitle??t.item.title.value)}updateMenubar(){this.menuUpdater.schedule()}calculateActionLabel(e){return e.label}onUpdateStateChange(){this.updateMenubar()}onUpdateKeybindings(){this.updateMenubar()}getOpenRecentActions(){if(!this.recentlyOpened)return[];const{workspaces:e,files:t}=this.recentlyOpened,i=[];if(e.length>0){for(let t=0;t<Tt.MAX_MENU_RECENT_ENTRIES&&t<e.length;t++)i.push(this.createOpenRecentMenuAction(e[t]));i.push(new ye.Z0)}if(t.length>0){for(let e=0;e<Tt.MAX_MENU_RECENT_ENTRIES&&e<t.length;e++)i.push(this.createOpenRecentMenuAction(t[e]));i.push(new ye.Z0)}return i}onDidChangeWindowFocus(e){e&&this.onDidChangeRecentlyOpened()}onConfigurationUpdated(e){this.keys.some((t=>e.affectsConfiguration(t)))&&this.updateMenubar(),e.affectsConfiguration("editor.accessibilitySupport")&&this.notifyUserOfCustomMenubarAccessibility(),e.affectsConfiguration("window.menuBarVisibility")&&this.onDidChangeRecentlyOpened()}get menubarHidden(){return!(Ke.dz&&Ke.tY||"hidden"!==(0,Ue.fi)(this.configurationService))}onDidChangeRecentlyOpened(){this.menubarHidden||this.workspacesService.getRecentlyOpened().then((e=>{this.recentlyOpened=e,this.updateMenubar()}))}createOpenRecentMenuAction(e){let t,i,o,s;const n=e.remoteAuthority;(0,$e.ID)(e)?(i=e.folderUri,t=e.label||this.labelService.getWorkspaceLabel(i,{verbose:2}),o="openRecentFolder",s={folderUri:i}):(0,$e.eI)(e)?(i=e.workspace.configPath,t=e.label||this.labelService.getWorkspaceLabel(e.workspace,{verbose:2}),o="openRecentWorkspace",s={workspaceUri:i}):(i=e.fileUri,t=e.label||this.labelService.getUriLabel(i),o="openRecentFile",s={fileUri:i});const r=new ye.aU(o,(0,nt.NF)(t),void 0,void 0,(e=>{const t=e,i=e&&(!Ke.dz&&(t.ctrlKey||t.shiftKey)||Ke.dz&&(t.metaKey||t.altKey));return this.hostService.openWindow([s],{forceNewWindow:!!i,remoteAuthority:n||null})}));return Object.assign(r,{uri:i,remoteAuthority:n})}notifyUserOfCustomMenubarAccessibility(){if(Ke.$L||Ke.dz)return;const e=this.storageService.getBoolean("menubar/accessibleMenubarNotified",-1,!1),t="custom"===(0,Ue.ET)(this.configurationService);if(e||t||!this.accessibilityService.isScreenReaderOptimized())return;const i=(0,l.NC)("menubar.customTitlebarAccessibilityNotification","Accessibility support is enabled for you. For the most accessible experience, we recommend the custom title bar style.");this.notificationService.prompt(F.zb.Info,i,[{label:(0,l.NC)("goToSetting","Open Settings"),run:()=>this.preferencesService.openUserSettings({query:"window.titleBarStyle"})}]),this.storageService.store("menubar/accessibleMenubarNotified",!0,-1,0)}}let Vt=class extends Tt{constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,m,v,b){super(e,t,i,o,s,n,r,a,c,d,h,l,v,b),this.layoutService=u,this.telemetryService=m,this.alwaysOnMnemonics=!1,this.focusInsideMenubar=!1,this.pendingFirstTimeUpdate=!1,this.visible=!0,this.webNavigationMenu=this._register(this.menuService.createMenu(te.eH.MenubarHomeMenu,this.contextKeyService)),this.reinstallDisposables=this._register(new p.SL),this._onVisibilityChange=this._register(new g.Q5),this._onFocusStateChange=this._register(new g.Q5),this.actionRunner=this._register(new ye.Wi),this.actionRunner.onDidRun((e=>{this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"menu"})})),this.workspacesService.getRecentlyOpened().then((e=>{this.recentlyOpened=e})),this.registerListeners(),this.registerActions()}doUpdateMenubar(e){this.focusInsideMenubar||this.setupCustomMenubar(e),e&&(this.pendingFirstTimeUpdate=!0)}registerActions(){const e=this;Ke.$L&&this._register((0,te.r1)(class extends te.Ke{constructor(){super({id:"workbench.actions.menubar.focus",title:{value:(0,l.NC)("focusMenu","Focus Application Menu"),original:"Focus Application Menu"},keybinding:{primary:68,weight:200,when:dt.Pf},f1:!0})}async run(){e.menubar?.toggleFocus()}}))}getUpdateAction(){switch(this.updateService.state.type){case"idle":return new ye.aU("update.check",(0,l.NC)({key:"checkForUpdates",comment:["&& denotes a mnemonic"]},"Check for &&Updates..."),void 0,!0,(()=>this.updateService.checkForUpdates(!0)));case"checking for updates":return new ye.aU("update.checking",(0,l.NC)("checkingForUpdates","Checking for Updates..."),void 0,!1);case"available for download":return new ye.aU("update.downloadNow",(0,l.NC)({key:"download now",comment:["&& denotes a mnemonic"]},"D&&ownload Update"),void 0,!0,(()=>this.updateService.downloadUpdate()));case"downloading":return new ye.aU("update.downloading",(0,l.NC)("DownloadingUpdate","Downloading Update..."),void 0,!1);case"downloaded":return new ye.aU("update.install",(0,l.NC)({key:"installUpdate...",comment:["&& denotes a mnemonic"]},"Install &&Update..."),void 0,!0,(()=>this.updateService.applyUpdate()));case"updating":return new ye.aU("update.updating",(0,l.NC)("installingUpdate","Installing Update..."),void 0,!1);case"ready":return new ye.aU("update.restart",(0,l.NC)({key:"restartToUpdate",comment:["&& denotes a mnemonic"]},"Restart to &&Update"),void 0,!0,(()=>this.updateService.quitAndInstall()));default:return null}}get currentMenubarVisibility(){return(0,Ue.fi)(this.configurationService)}get currentDisableMenuBarAltFocus(){const e=this.configurationService.getValue("window.customMenuBarAltFocus");let t=!1;return"boolean"==typeof e&&(t=!e),t}insertActionsBefore(e,t){switch(e.id){case Et.ID:t.push(...this.getOpenRecentActions());break;case"workbench.action.showAboutDialog":if(!Ke.dz&&!Ke.$L){const e=this.getUpdateAction();e&&(e.label=(0,nt.Pg)(e.label),t.push(e),t.push(new ye.Z0))}}}get currentEnableMenuBarMnemonics(){let e=this.configurationService.getValue("window.enableMenuBarMnemonics");return"boolean"!=typeof e&&(e=!0),e&&(!Ke.$L||(0,Qe.rm)())}get currentCompactMenuMode(){if("compact"===this.currentMenubarVisibility)return"right"===this.configurationService.getValue("workbench.sideBar.location")?qe.Nm.Left:qe.Nm.Right}onDidVisibilityChange(e){this.visible=e,this.onDidChangeRecentlyOpened(),this._onVisibilityChange.fire(e)}toActionsArray(e){const t=[];return(0,x.LJ)(e,{shouldForwardArgs:!0},t),t}setupCustomMenubar(e){if(!this.container)return;e?(this.menubar&&this.reinstallDisposables.clear(),this.menubar=this.reinstallDisposables.add(new st(this.container,this.getMenuBarOptions(),A.ZR)),this.accessibilityService.alwaysUnderlineAccessKeys().then((e=>{this.alwaysOnMnemonics=e,this.menubar?.update(this.getMenuBarOptions())})),this.reinstallDisposables.add(this.menubar.onFocusStateChange((e=>{this._onFocusStateChange.fire(e),e||(this.pendingFirstTimeUpdate?(this.setupCustomMenubar(!0),this.pendingFirstTimeUpdate=!1):this.updateMenubar(),this.focusInsideMenubar=!1)}))),this.reinstallDisposables.add(this.menubar.onVisibilityChange((e=>this.onDidVisibilityChange(e)))),this.reinstallDisposables.add((0,w.nm)(this.container,w.tw.FOCUS_IN,(()=>{this.focusInsideMenubar=!0}))),this.reinstallDisposables.add((0,w.nm)(this.container,w.tw.FOCUS_OUT,(()=>{this.focusInsideMenubar=!1}))),this.menubar.isVisible&&this.onDidVisibilityChange(!0)):this.menubar?.update(this.getMenuBarOptions());const t=(e,i,o)=>{i.splice(0);for(const s of e)if(this.insertActionsBefore(s,i),s instanceof ye.Z0)i.push(s);else if(s instanceof te.NZ||s instanceof te.U8){let e="string"==typeof s.item.title?s.item.title:s.item.title.mnemonicTitle??s.item.title.value;if(s instanceof te.NZ){const n=[];t(s.actions,n,o),n.length>0&&i.push(new ye.wY(s.id,(0,nt.Pg)(e),n))}else{(0,It.X)(s.item.toggled)&&(e=s.item.toggled.mnemonicTitle??s.item.toggled.title??e);const t=new ye.aU(s.id,(0,nt.Pg)(e),s.class,s.enabled,(()=>this.commandService.executeCommand(s.id)));t.tooltip=s.tooltip,t.checked=s.checked,i.push(t)}}if("File"===o&&void 0===this.currentCompactMenuMode){const e=this.getWebNavigationActions();e.length&&i.push(...e)}};for(const i of Object.keys(this.topLevelTitles)){const o=this.menus[i];e&&o&&(this.reinstallDisposables.add(o.onDidChange((()=>{if(!this.focusInsideMenubar){const e=[];t(this.toActionsArray(o),e,i),this.menubar?.updateMenu({actions:e,label:(0,nt.Pg)(this.topLevelTitles[i])})}}))),o===this.menus.File&&this.reinstallDisposables.add(this.webNavigationMenu.onDidChange((()=>{if(!this.focusInsideMenubar){const e=[];t(this.toActionsArray(o),e,i),this.menubar?.updateMenu({actions:e,label:(0,nt.Pg)(this.topLevelTitles[i])})}}))));const s=[];o&&t(this.toActionsArray(o),s,i),this.menubar&&(e?this.menubar.push({actions:s,label:(0,nt.Pg)(this.topLevelTitles[i])}):this.menubar.updateMenu({actions:s,label:(0,nt.Pg)(this.topLevelTitles[i])}))}}getWebNavigationActions(){if(!Ke.$L)return[];const e=[];for(const t of this.webNavigationMenu.getActions()){const[,i]=t;for(const t of i)if(t instanceof te.U8){const i="string"==typeof t.item.title?t.item.title:t.item.title.mnemonicTitle??t.item.title.value;e.push(new ye.aU(t.id,(0,nt.Pg)(i),t.class,t.enabled,(async e=>{this.commandService.executeCommand(t.id,e)})))}e.push(new ye.Z0)}return e.length&&e.pop(),e}getMenuBarOptions(){return{enableMnemonics:this.currentEnableMenuBarMnemonics,disableAltFocus:this.currentDisableMenuBarAltFocus,visibility:this.currentMenubarVisibility,actionRunner:this.actionRunner,getKeybinding:e=>this.keybindingService.lookupKeybinding(e.id),alwaysOnMnemonics:this.alwaysOnMnemonics,compactMode:this.currentCompactMenuMode,getCompactMenuActions:()=>Ke.$L?this.getWebNavigationActions():[]}}onDidChangeWindowFocus(e){this.visible&&(super.onDidChangeWindowFocus(e),this.container&&(e?this.container.classList.remove("inactive"):(this.container.classList.add("inactive"),this.menubar?.blur())))}onUpdateStateChange(){this.visible&&super.onUpdateStateChange()}onDidChangeRecentlyOpened(){this.visible&&super.onDidChangeRecentlyOpened()}onUpdateKeybindings(){this.visible&&super.onUpdateKeybindings()}registerListeners(){super.registerListeners(),this._register((0,w.nm)(window,w.tw.RESIZE,(()=>{!this.menubar||Ke.gn&&ct.D.pointerEvents||this.menubar.blur()}))),Ke.$L&&(this._register(this.layoutService.onDidChangeFullscreen((e=>this.updateMenubar()))),this._register(this.webNavigationMenu.onDidChange((()=>this.updateMenubar()))))}get onVisibilityChange(){return this._onVisibilityChange.event}get onFocusStateChange(){return this._onFocusStateChange.event}getMenubarItemsDimensions(){return this.menubar?new w.Ro(this.menubar.getWidth(),this.menubar.getHeight()):new w.Ro(0,0)}create(e){return this.container=e,this.container&&this.doUpdateMenubar(!0),this.container}layout(e){this.menubar?.update(this.getMenuBarOptions())}toggleFocus(){this.menubar?.toggleFocus()}};Vt=(0,o.g)([(0,o.f)(0,te.co),(0,o.f)(1,$e.Dc),(0,o.f)(2,H.i6),(0,o.f)(3,N.d),(0,o.f)(4,Ee.Ui),(0,o.f)(5,Xe.e),(0,o.f)(6,Je.F),(0,o.f)(7,R.Uy),(0,o.f)(8,F.lT),(0,o.f)(9,Ye.UP),(0,o.f)(10,ee.n),(0,o.f)(11,rt.F7),(0,o.f)(12,V.ze),(0,o.f)(13,j.bU),(0,o.f)(14,at.$),(0,o.f)(15,ht.H)],Vt);var Lt=i(59554),Rt=i(89954);let Ot=class e extends C{static{this.PINNED_VIEW_CONTAINERS="workbench.activity.pinnedViewlets2"}static{this.PLACEHOLDER_VIEW_CONTAINERS="workbench.activity.placeholderViewlets"}static{this.ACTION_HEIGHT=48}static{this.ACCOUNTS_ACTION_INDEX=0}static{this.GEAR_ICON=(0,Lt.q5)("settings-view-bar-icon",Ze.lA.settingsGear,(0,l.NC)("settingsViewBarIcon","Settings icon in the view bar."))}static{this.ACCOUNTS_ICON=(0,Lt.q5)("accounts-view-bar-icon",Ze.lA.account,(0,l.NC)("accountsViewBarIcon","Accounts icon in the view bar."))}constructor(e,t,i,o,s,n,r,a,c,d){super("workbench.parts.activitybar",{hasTitle:!1},o,s,i),this.paneCompositePart=e,this.instantiationService=t,this.storageService=s,this.extensionService=n,this.viewDescriptorService=r,this.contextKeyService=a,this.configurationService=c,this.environmentService=d,this.minimumWidth=48,this.maximumWidth=48,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.globalActivity=[],this.accountsActivity=[],this.compositeActions=new Map,this.viewContainerDisposables=new Map,this.keyboardNavigationDisposables=this._register(new p.SL),this.location=0,this.hasExtensionsRegistered=!1,this.enabledViewContainersContextKeys=new Map,this._cachedViewContainers=void 0;for(const e of this.cachedViewContainers)e.visible=!this.shouldBeHidden(e.id,e);this.compositeBar=this.createCompositeBar(),this.onDidRegisterViewContainers(this.getViewContainers()),this.registerListeners()}createCompositeBar(){const t=this.cachedViewContainers.map((e=>({id:e.id,name:e.name,visible:e.visible,order:e.order,pinned:e.pinned})));return this._register(this.instantiationService.createInstance(ze,t,{icon:!0,orientation:1,activityHoverOptions:this.getActivityHoverOptions(),preventLoopNavigation:!0,openComposite:async(e,t)=>await this.paneCompositePart.openPaneComposite(e,!t)??null,getActivityAction:e=>this.getCompositeActions(e).activityAction,getCompositePinnedAction:e=>this.getCompositeActions(e).pinnedAction,getCompositeBadgeAction:e=>this.getCompositeActions(e).badgeAction,getOnCompositeClickAction:e=>(0,ye.xw)({id:e,label:"",run:async()=>this.paneCompositePart.getActivePaneComposite()?.getId()===e?this.paneCompositePart.hideActivePaneComposite():this.paneCompositePart.openPaneComposite(e)}),fillExtraContextMenuActions:(e,t)=>{const i=(0,Ue.fi)(this.configurationService);"compact"!==i&&"hidden"!==i&&"toggle"!==i||e.unshift((0,ye.xw)({id:"toggleMenuVisibility",label:(0,l.NC)("menu","Menu"),checked:"compact"===i,run:()=>this.configurationService.updateValue("window.menuBarVisibility","compact"===i?"toggle":"compact")}),new ye.Z0),"compact"===i&&this.menuBarContainer&&t?.target&&(0,w.jg)(t.target,this.menuBarContainer)&&e.unshift((0,ye.xw)({id:"hideCompactMenu",label:(0,l.NC)("hideMenu","Hide Menu"),run:()=>this.configurationService.updateValue("window.menuBarVisibility","toggle")}),new ye.Z0),e.push(new ye.Z0),e.push((0,ye.xw)({id:"toggleAccountsVisibility",label:(0,l.NC)("accounts","Accounts"),checked:this.accountsVisibilityPreference,run:()=>this.accountsVisibilityPreference=!this.accountsVisibilityPreference})),e.push(new ye.Z0),e.push((0,ye.xw)({id:Fe.VR.ID,label:Fe.VR.getLabel(this.layoutService),run:()=>this.instantiationService.invokeFunction((e=>(new Fe.VR).run(e)))})),e.push((0,ye.xw)({id:Fe.h_.ID,label:(0,l.NC)("hideActivitBar","Hide Activity Bar"),run:()=>this.instantiationService.invokeFunction((e=>(new Fe.h_).run(e)))}))},getContextMenuActionsForComposite:e=>this.getContextMenuActionsForComposite(e),getDefaultCompositeId:()=>this.viewDescriptorService.getDefaultViewContainer(this.location)?.id,hidePart:()=>this.layoutService.setPartHidden(!0,"workbench.parts.sidebar"),dndHandler:new He(this.viewDescriptorService,0,(async(e,t)=>await this.paneCompositePart.openPaneComposite(e,t)??null),((e,t,i)=>this.compositeBar.move(e,t,i?.verticallyBefore)),(()=>this.compositeBar.getCompositeBarItems())),compositeSize:52,colors:e=>this.getActivitybarItemColors(e),overflowActionSize:e.ACTION_HEIGHT}))}getActivityHoverOptions(){return{position:()=>0===this.layoutService.getSideBarPosition()?1:0}}getContextMenuActionsForComposite(e){const t=[],i=this.viewDescriptorService.getViewContainerById(e),o=this.viewDescriptorService.getDefaultViewContainerLocation(i);if(o!==this.viewDescriptorService.getViewContainerLocation(i))t.push((0,ye.xw)({id:"resetLocationAction",label:(0,l.NC)("resetLocation","Reset Location"),run:()=>this.viewDescriptorService.moveViewContainerToLocation(i,o)}));else{const e=this.viewDescriptorService.getViewContainerModel(i);if(1===e.allViewDescriptors.length){const o=e.allViewDescriptors[0],s=this.viewDescriptorService.getDefaultContainerById(o.id);s!==i&&t.push((0,ye.xw)({id:"resetLocationAction",label:(0,l.NC)("resetLocation","Reset Location"),run:()=>this.viewDescriptorService.moveViewsToContainer([o],s)}))}}return t}registerListeners(){this._register(this.viewDescriptorService.onDidChangeViewContainers((({added:e,removed:t})=>this.onDidChangeViewContainers(e,t)))),this._register(this.viewDescriptorService.onDidChangeContainerLocation((({viewContainer:e,from:t,to:i})=>this.onDidChangeViewContainerLocation(e,t,i)))),this.paneCompositePart.onDidPaneCompositeOpen((e=>this.onDidChangeViewContainerVisibility(e.getId(),!0))),this.paneCompositePart.onDidPaneCompositeClose((e=>this.onDidChangeViewContainerVisibility(e.getId(),!1)));const e=this._register(new p.SL);this._register(this.extensionService.onDidRegisterExtensions((()=>{e.clear(),this.onDidRegisterExtensions(),this.compositeBar.onDidChange((()=>this.saveCachedViewContainers()),this,e),this.storageService.onDidChangeValue((e=>this.onDidStorageValueChange(e)),this,e)}))),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("window.menuBarVisibility")&&("compact"===(0,Ue.fi)(this.configurationService)?this.installMenubar():this.uninstallMenubar())})))}onDidChangeViewContainers(e,t){t.filter((({location:e})=>0===e)).forEach((({container:e})=>this.onDidDeregisterViewContainer(e))),this.onDidRegisterViewContainers(e.filter((({location:e})=>0===e)).map((({container:e})=>e)))}onDidChangeViewContainerLocation(e,t,i){t===this.location&&this.onDidDeregisterViewContainer(e),i===this.location&&this.onDidRegisterViewContainers([e])}onDidChangeViewContainerVisibility(e,t){t?this.onDidViewContainerVisible(e):this.compositeBar.deactivateComposite(e)}onDidRegisterExtensions(){this.hasExtensionsRegistered=!0;for(const{id:e}of this.cachedViewContainers){const t=this.getViewContainer(e);t?this.showOrHideViewContainer(t):this.viewDescriptorService.isViewContainerRemovedPermanently(e)?this.removeComposite(e):this.hideComposite(e)}this.saveCachedViewContainers()}onDidViewContainerVisible(e){const t=this.getViewContainer(e);t&&(this.addComposite(t),this.compositeBar.activateComposite(t.id),this.shouldBeHidden(t))&&0===this.viewDescriptorService.getViewContainerModel(t).activeViewDescriptors.length&&this.hideComposite(t.id)}showActivity(e,t,i,o){return this.getViewContainer(e)?this.compositeBar.showActivity(e,t,i,o):e===ge?this.showGlobalActivity(ge,t,i,o):e===me?this.showGlobalActivity(me,t,i,o):p.JT.None}showGlobalActivity(e,t,i,o){"number"!=typeof o&&(o=0);const s={badge:t,clazz:i,priority:o},n=e===ge?this.globalActivity:this.accountsActivity;for(let e=0;e<=n.length;e++){if(e===n.length){n.push(s);break}if(n[e].priority<=o){n.splice(e,0,s);break}}return this.updateGlobalActivity(e),(0,p.OF)((()=>this.removeGlobalActivity(e,s)))}removeGlobalActivity(e,t){const i=e===ge?this.globalActivity:this.accountsActivity,o=i.indexOf(t);-1!==o&&(i.splice(o,1),this.updateGlobalActivity(e))}updateGlobalActivity(e){const t=e===ge?this.globalActivityAction:this.accountsActivityAction;if(!t)return;const i=e===ge?this.globalActivity:this.accountsActivity;if(i.length){const[{badge:e,clazz:o,priority:s}]=i;if(e instanceof pe.mA&&i.length>1){const e=this.getCumulativeNumberBadge(i,s);t.setBadge(e)}else t.setBadge(e,o)}else t.setBadge(void 0)}getCumulativeNumberBadge(e,t){const i=e.filter((e=>e.badge instanceof pe.mA&&e.priority===t)),o=i.reduce(((e,t)=>e+t.badge.number),0);return new pe.mA(o,(()=>i.reduce(((e,t,o)=>(e+=t.badge.getDescription(),o<i.length-1&&(e=`${e}\n`),e)),"")))}uninstallMenubar(){this.menuBar&&(this.menuBar.dispose(),this.menuBar=void 0),this.menuBarContainer&&(this.menuBarContainer.remove(),this.menuBarContainer=void 0,this.registerKeyboardNavigationListeners())}installMenubar(){this.menuBar||(this.menuBarContainer=document.createElement("div"),this.menuBarContainer.classList.add("menubar"),(0,y.cW)(this.content).prepend(this.menuBarContainer),this.menuBar=this._register(this.instantiationService.createInstance(Vt)),this.menuBar.create(this.menuBarContainer),this.registerKeyboardNavigationListeners())}createContentArea(e){return this.element=e,this.content=document.createElement("div"),this.content.classList.add("content"),e.appendChild(this.content),"compact"===(0,Ue.fi)(this.configurationService)&&this.installMenubar(),this.compositeBarContainer=this.compositeBar.create(this.content),this.globalActivitiesContainer=document.createElement("div"),this.content.appendChild(this.globalActivitiesContainer),this.registerKeyboardNavigationListeners(),this.content}registerKeyboardNavigationListeners(){this.keyboardNavigationDisposables.clear(),this.menuBarContainer&&this.keyboardNavigationDisposables.add((0,w.nm)(this.menuBarContainer,w.tw.KEY_DOWN,(e=>{const t=new we.y1(e);(t.equals(18)||t.equals(17))&&this.compositeBar?.focus()}))),this.compositeBarContainer&&this.keyboardNavigationDisposables.add((0,w.nm)(this.compositeBarContainer,w.tw.KEY_DOWN,(e=>{const t=new we.y1(e);t.equals(18)||t.equals(17)?this.globalActivityActionBar?.focus(!0):(t.equals(16)||t.equals(15))&&this.menuBar?.toggleFocus()}))),this.globalActivitiesContainer&&this.keyboardNavigationDisposables.add((0,w.nm)(this.globalActivitiesContainer,w.tw.KEY_DOWN,(e=>{const t=new we.y1(e);(t.equals(16)||t.equals(15))&&this.compositeBar?.focus(this.getVisiblePaneCompositeIds().length-1)})))}createGlobalActivityActionBar(t){this.globalActivityActionBar=this._register(new v.o(t,{actionViewItemProvider:e=>{if("workbench.actions.manage"===e.id)return this.instantiationService.createInstance(Oe,e,(()=>this.compositeBar.getContextMenuActions()),(e=>this.getActivitybarItemColors(e)),this.getActivityHoverOptions());if("workbench.actions.accounts"===e.id)return this.instantiationService.createInstance(Re,e,(()=>this.compositeBar.getContextMenuActions()),(e=>this.getActivitybarItemColors(e)),this.getActivityHoverOptions());throw new Error(`No view item for action '${e.id}'`)},orientation:1,ariaLabel:(0,l.NC)("manage","Manage"),animated:!1,preventLoopNavigation:!0})),this.globalActivityAction=this._register(new Ce.JS({id:"workbench.actions.manage",name:(0,l.NC)("manage","Manage"),classNames:q.kS.asClassNameArray(e.GEAR_ICON)})),this.accountsVisibilityPreference&&(this.accountsActivityAction=this._register(new Ce.JS({id:"workbench.actions.accounts",name:(0,l.NC)("accounts","Accounts"),classNames:q.kS.asClassNameArray(e.ACCOUNTS_ICON)})),this.globalActivityActionBar.push(this.accountsActivityAction,{index:e.ACCOUNTS_ACTION_INDEX})),this.globalActivityActionBar.push(this.globalActivityAction)}toggleAccountsActivity(){!!this.accountsActivityAction!==this.accountsVisibilityPreference&&(this.globalActivityActionBar&&(this.accountsActivityAction?(this.globalActivityActionBar.pull(e.ACCOUNTS_ACTION_INDEX),this.accountsActivityAction=void 0):(this.accountsActivityAction=this._register(new Ce.JS({id:"workbench.actions.accounts",name:(0,l.NC)("accounts","Accounts"),classNames:q.kS.asClassNameArray(Ze.lA.account)})),this.globalActivityActionBar.push(this.accountsActivityAction,{index:e.ACCOUNTS_ACTION_INDEX}))),this.updateGlobalActivity(me))}getCompositeActions(t){let i=this.compositeActions.get(t);if(!i){const o=this.getViewContainer(t);if(o){const e=this.viewDescriptorService.getViewContainerModel(o);i={activityAction:this.instantiationService.createInstance(Te,this.toActivity(e),this.paneCompositePart),pinnedAction:new Ce.du(this.toActivity(e),this.compositeBar),badgeAction:new Ce.B7(this.toActivity(e),this.compositeBar)}}else{const o=this.cachedViewContainers.filter((e=>e.id===t))[0];i={activityAction:this.instantiationService.createInstance(Ne,e.toActivity(t,t,o?.icon,void 0),this.paneCompositePart),pinnedAction:new Me(t,this.compositeBar),badgeAction:new Pe(t,this.compositeBar)}}this.compositeActions.set(t,i)}return i}onDidRegisterViewContainers(e){for(const t of e){this.addComposite(t),this.cachedViewContainers.filter((({id:e})=>e===t.id))[0]||this.compositeBar.pin(t.id);const e=this.paneCompositePart.getActivePaneComposite();e?.getId()===t.id&&this.compositeBar.activateComposite(t.id);const i=this.viewDescriptorService.getViewContainerModel(t);this.updateActivity(t,i),this.showOrHideViewContainer(t);const o=new p.SL;o.add(i.onDidChangeContainerInfo((()=>this.updateActivity(t,i)))),o.add(i.onDidChangeActiveViewDescriptors((()=>this.showOrHideViewContainer(t)))),this.viewContainerDisposables.set(t.id,o)}}onDidDeregisterViewContainer(e){const t=this.viewContainerDisposables.get(e.id);t?.dispose(),this.viewContainerDisposables.delete(e.id),this.removeComposite(e.id)}updateActivity(e,t){const i=this.toActivity(t),{activityAction:o,pinnedAction:s}=this.getCompositeActions(e.id);o.updateActivity(i),s instanceof Me&&s.setActivity(i),this.saveCachedViewContainers()}toActivity(t){return e.toActivity(t.viewContainer.id,t.title,t.icon,t.keybindingId)}static toActivity(e,t,i,o){let s,n;if(J.ov.isUri(i)){n=i;const t=(0,w.wY)(i),o=new Rt.yP;o.update(t);const r=`activity-${e.replace(/\./g,"-")}-${o.digest()}`,a=`.monaco-workbench .activitybar .monaco-action-bar .action-label.${r}`;s=[r,"uri-icon"],(0,w.fk)(a,`\n\t\t\t\tmask: ${t} no-repeat 50% 50%;\n\t\t\t\tmask-size: 24px;\n\t\t\t\t-webkit-mask: ${t} no-repeat 50% 50%;\n\t\t\t\t-webkit-mask-size: 24px;\n\t\t\t`)}else q.kS.isThemeIcon(i)&&(s=q.kS.asClassNameArray(i));return{id:e,name:t,classNames:s,iconUrl:n,keybindingId:o}}showOrHideViewContainer(e){let t=this.enabledViewContainersContextKeys.get(e.id);t||(t=this.contextKeyService.createKey((0,L.l0)(e.id),!1),this.enabledViewContainersContextKeys.set(e.id,t)),this.shouldBeHidden(e)?(t.set(!1),this.hideComposite(e.id)):(t.set(!0),this.addComposite(e))}shouldBeHidden(e,t){const i=(0,y.HD)(e)?this.getViewContainer(e):e,o=(0,y.HD)(e)?e:e.id;if(i){if(!i.hideIfEmpty)return!1;if(this.viewDescriptorService.getViewContainerModel(i).activeViewDescriptors.length>0)return!1}if(!(this.hasExtensionsRegistered||this.environmentService.remoteAuthority&&Ke.tY)){if(t=t||this.cachedViewContainers.find((({id:e})=>e===o)),!i&&t?.isBuiltin&&t?.visible)return!1;if(t?.views?.length)return t.views.every((({when:e})=>!!e&&!this.contextKeyService.contextMatchesRules(H.Ao.deserialize(e))))}return!0}addComposite(e){this.compositeBar.addComposite({id:e.id,name:"string"==typeof e.title?e.title:e.title.value,order:e.order,requestedIndex:e.requestedIndex})}hideComposite(e){this.compositeBar.hideComposite(e);const t=this.compositeActions.get(e);t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e))}removeComposite(e){this.compositeBar.removeComposite(e);const t=this.compositeActions.get(e);t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e))}getPinnedPaneCompositeIds(){const e=this.compositeBar.getPinnedComposites().map((e=>e.id));return this.getViewContainers().filter((e=>this.compositeBar.isPinned(e.id))).sort(((t,i)=>e.indexOf(t.id)-e.indexOf(i.id))).map((e=>e.id))}getVisiblePaneCompositeIds(){return this.compositeBar.getVisibleComposites().filter((e=>this.paneCompositePart.getActivePaneComposite()?.getId()===e.id||this.compositeBar.isPinned(e.id))).map((e=>e.id))}focus(){this.compositeBar.focus()}updateStyles(){super.updateStyles();const e=(0,y.cW)(this.getContainer()),t=this.getColor(B.X0)||"";e.style.backgroundColor=t;const i=this.getColor(B.bG)||this.getColor(P.lRK)||"";e.classList.toggle("bordered",!!i),e.style.borderColor=i||""}getActivitybarItemColors(e){return{activeForegroundColor:e.getColor(B.wJ),inactiveForegroundColor:e.getColor(B.Dj),activeBorderColor:e.getColor(B.D$),activeBackground:e.getColor(B.MQ),badgeBackground:e.getColor(B.ob),badgeForeground:e.getColor(B.jY),dragAndDropBorder:e.getColor(B.Fs),activeBackgroundColor:void 0,inactiveBackgroundColor:void 0,activeBorderBottomColor:void 0}}layout(t,i){if(!this.layoutService.isVisible("workbench.parts.activitybar"))return;let o=super.layoutContents(t,i).contentSize.height;this.menuBarContainer&&(o-=this.menuBarContainer.clientHeight),this.globalActivityActionBar&&(o-=this.globalActivityActionBar.viewItems.length*e.ACTION_HEIGHT),this.compositeBar.layout(new w.Ro(t,o))}getViewContainer(e){const t=this.viewDescriptorService.getViewContainerById(e);return t&&this.viewDescriptorService.getViewContainerLocation(t)===this.location?t:void 0}getViewContainers(){return this.viewDescriptorService.getViewContainersByLocation(this.location)}onDidStorageValueChange(t){if(t.key===e.PINNED_VIEW_CONTAINERS&&0===t.scope&&this.pinnedViewContainersValue!==this.getStoredPinnedViewContainersValue()){this._pinnedViewContainersValue=void 0,this._cachedViewContainers=void 0;const e=[],t=this.compositeBar.getCompositeBarItems();for(const i of this.cachedViewContainers)e.push({id:i.id,name:i.name,order:i.order,pinned:i.pinned,visible:!!t.find((({id:e})=>e===i.id))});for(let i=0;i<t.length;i++)if(!e.some((({id:e})=>e===t[i].id))){const o=this.viewDescriptorService.getViewContainerById(t[i].id);e.splice(i,0,{...t[i],pinned:!0,visible:!0,order:o?.order})}this.compositeBar.setCompositeBarItems(e)}t.key===Re.ACCOUNTS_VISIBILITY_PREFERENCE_KEY&&0===t.scope&&this.toggleAccountsActivity()}saveCachedViewContainers(){const e=[],t=this.compositeBar.getCompositeBarItems();for(const i of t){const t=this.getViewContainer(i.id);if(t){const o=this.viewDescriptorService.getViewContainerModel(t),s=[];for(const{when:e}of o.allViewDescriptors)s.push({when:e?e.serialize():void 0});e.push({id:i.id,name:o.title,icon:J.ov.isUri(o.icon)&&this.environmentService.remoteAuthority?void 0:o.icon,views:s,pinned:i.pinned,order:i.order,visible:i.visible,isBuiltin:!t.extensionId})}else e.push({id:i.id,pinned:i.pinned,order:i.order,visible:!1,isBuiltin:!1})}this.storeCachedViewContainersState(e)}get cachedViewContainers(){if(void 0===this._cachedViewContainers){this._cachedViewContainers=this.getPinnedViewContainers();for(const e of this.getPlaceholderViewContainers()){const t=this._cachedViewContainers.filter((t=>t.id===e.id))[0];t&&(t.name=e.name,t.icon=e.themeIcon?e.themeIcon:e.iconUrl?J.ov.revive(e.iconUrl):void 0,J.ov.isUri(t.icon)&&this.environmentService.remoteAuthority&&(t.icon=void 0),t.views=e.views,t.isBuiltin=e.isBuiltin)}}return this._cachedViewContainers}storeCachedViewContainersState(e){this.setPinnedViewContainers(e.map((({id:e,pinned:t,visible:i,order:o})=>({id:e,pinned:t,visible:i,order:o})))),this.setPlaceholderViewContainers(e.map((({id:e,icon:t,name:i,views:o,isBuiltin:s})=>({id:e,iconUrl:J.ov.isUri(t)?t:void 0,themeIcon:q.kS.isThemeIcon(t)?t:void 0,name:i,isBuiltin:s,views:o}))))}getPinnedViewContainers(){return JSON.parse(this.pinnedViewContainersValue)}setPinnedViewContainers(e){this.pinnedViewContainersValue=JSON.stringify(e)}get pinnedViewContainersValue(){return this._pinnedViewContainersValue||(this._pinnedViewContainersValue=this.getStoredPinnedViewContainersValue()),this._pinnedViewContainersValue}set pinnedViewContainersValue(e){this.pinnedViewContainersValue!==e&&(this._pinnedViewContainersValue=e,this.setStoredPinnedViewContainersValue(e))}getStoredPinnedViewContainersValue(){return this.storageService.get(e.PINNED_VIEW_CONTAINERS,0,"[]")}setStoredPinnedViewContainersValue(t){this.storageService.store(e.PINNED_VIEW_CONTAINERS,t,0,0)}getPlaceholderViewContainers(){return JSON.parse(this.placeholderViewContainersValue)}setPlaceholderViewContainers(e){this.placeholderViewContainersValue=JSON.stringify(e)}get placeholderViewContainersValue(){return this._placeholderViewContainersValue||(this._placeholderViewContainersValue=this.getStoredPlaceholderViewContainersValue()),this._placeholderViewContainersValue}set placeholderViewContainersValue(e){this.placeholderViewContainersValue!==e&&(this._placeholderViewContainersValue=e,this.setStoredPlaceholderViewContainersValue(e))}getStoredPlaceholderViewContainersValue(){return this.storageService.get(e.PLACEHOLDER_VIEW_CONTAINERS,0,"[]")}setStoredPlaceholderViewContainersValue(t){this.storageService.store(e.PLACEHOLDER_VIEW_CONTAINERS,t,0,1)}get accountsVisibilityPreference(){return this.storageService.getBoolean(Re.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,0,!0)}set accountsVisibilityPreference(e){this.storageService.store(Re.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,e,0,0)}toJSON(){return{type:"workbench.parts.activitybar"}}};Ot=(0,o.g)([(0,o.f)(1,c.TG),(0,o.f)(2,V.ze),(0,o.f)(3,M.XE),(0,o.f)(4,R.Uy),(0,o.f)(5,z.QS),(0,o.f)(6,r.XH),(0,o.f)(7,H.i6),(0,o.f)(8,Ee.Ui),(0,o.f)(9,ee.n)],Ot),(0,d.Z)(".monaco-workbench.noauxiliarybar .part.auxiliarybar{display:none!important;visibility:hidden!important}.monaco-workbench .part.auxiliarybar>.content .monaco-editor,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .margin,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .monaco-editor-background{background-color:var(--vscode-sideBar-background)}.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-sideBarTitle-foreground)!important}.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) solid 1px!important}.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:not(.checked):hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) dashed 1px!important}",{}),(0,d.Z)('.monaco-workbench .part.basepanel>.composite.title>.title-actions .monaco-action-bar .actions-container{justify-content:flex-end}.monaco-workbench .part.basepanel>.composite.title>.global-actions .monaco-action-bar .action-item,.monaco-workbench .part.basepanel>.composite.title>.title-actions .monaco-action-bar .action-item{margin-right:4px}.monaco-workbench .part.basepanel>.composite.title>.title-actions .monaco-action-bar .action-item .action-label{outline-offset:-2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container.composite-bar>.monaco-action-bar .action-label.codicon-more{align-items:center;color:inherit!important;display:flex;justify-content:center;margin-left:0;margin-right:0}.monaco-workbench .part.basepanel .empty-panel-message-area{display:none;height:100%;width:100%}.monaco-workbench .part.basepanel .empty-panel-message-area.visible{align-content:center;align-items:center;display:flex;justify-content:center}.monaco-workbench .part.basepanel .empty-panel-message-area .empty-panel-message{margin:12px;text-align:center}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar{height:35px;line-height:27px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item{display:flex;font-size:11px;padding:2px 10px;text-transform:uppercase}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon{padding-left:2px;padding-right:2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .action-label:not(.codicon){height:16px;width:16px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:before{background-color:var(--insert-border-color);content:"";display:none;height:24px;opacity:0;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:opacity;width:2px}.monaco-workbench .part.basepanel>.composite.title.dragged-over>.panel-switcher-container>.monaco-action-bar .action-item:after,.monaco-workbench .part.basepanel>.composite.title.dragged-over>.panel-switcher-container>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:before{left:1px;margin-left:-2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:after{margin-right:-2px;right:1px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:first-of-type:before{left:2px;margin-left:-2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:last-of-type:after{margin-right:-2px;right:2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.left:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.left:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.right:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.right:before{transition-delay:0s}.monaco-workbench .part.basepanel>.composite.title.dragged-over-head>.panel-switcher-container>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .part.basepanel>.composite.title.dragged-over-tail>.panel-switcher-container>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.left:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.right+.action-item:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:last-of-type.right:after{opacity:1}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item .action-label{border-radius:0;margin-right:0;padding:2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .action-label.codicon,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:not(.icon) .action-label{background:none!important}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.checked .action-label{margin-right:0}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:11px;font-weight:400;height:18px;line-height:11px;min-width:18px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item .active-item-indicator{bottom:0;height:100%;left:10px;overflow:hidden;pointer-events:none;position:absolute;top:-4px;width:calc(100% - 20px);z-index:1}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .active-item-indicator{left:2px;top:1px;width:calc(100% - 4px)}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-top-style:solid;border-top-width:1px;bottom:0;content:"";height:0;position:absolute;width:100%;z-index:1}.monaco-workbench .part.basepanel>.title>.panel-switcher-container>.monaco-action-bar .action-item.clicked:not(.checked):focus .active-item-indicator:before{border-top-color:transparent!important}.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.right .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(-90deg)}.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.left .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(90deg)}',{}),i(72088);var Nt=i(6578),Mt=i(54911),Pt=i(5629);let Bt=class e extends I{static{this.MIN_COMPOSITE_BAR_WIDTH=50}get preferredHeight(){return.4*this.layoutService.dimension.height}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const t=e.getOptimalWidth();return"number"==typeof t?Math.max(t,300):void 0}get onDidPaneCompositeOpen(){return g.ju.map(this.onDidCompositeOpen.event,(e=>e.composite))}constructor(e,t,i,o,s,n,r,a,c,d,l,u,p,g,m,v,b,f,w,C){super(e,t,i,o,s,n,r,h.B.as(m),u,a.getDefaultViewContainer(b)?.id||"","panel","panel",void 0,l,C),this.viewDescriptorService=a,this.contextKeyService=c,this.extensionService=d,this.partId=l,this.pinnedPanelsKey=p,this.placeholdeViewContainersKey=g,this.backgroundColor=v,this.viewContainerLocation=b,this.activePanelContextKey=f,this.panelFocusContextKey=w,this.panelOptions=C,this.minimumWidth=300,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=77,this.maximumHeight=Number.POSITIVE_INFINITY,this.snap=!0,this.onDidPaneCompositeClose=this.onDidCompositeClose.event,this.compositeActions=new Map,this.panelDisposables=new Map,this.blockOpeningPanel=!1,this.extensionsRegistered=!1,this.enabledViewContainersContextKeys=new Map,this.panelRegistry=h.B.as(m),this.dndHandler=new He(this.viewDescriptorService,this.viewContainerLocation,((e,t)=>this.openPaneComposite(e,t).then((e=>e||null))),((e,t,i)=>this.compositeBar.move(e,t,i?.horizontallyBefore)),(()=>this.compositeBar.getCompositeBarItems())),this.compositeBar=this._register(this.instantiationService.createInstance(ze,this.getCachedPanels(),{icon:!!this.panelOptions.useIcons,orientation:0,activityHoverOptions:this.getActivityHoverOptions(),openComposite:(e,t)=>this.openPaneComposite(e,!t).then((e=>e||null)),getActivityAction:e=>this.getCompositeActions(e).activityAction,getCompositePinnedAction:e=>this.getCompositeActions(e).pinnedAction,getCompositeBadgeAction:e=>this.getCompositeActions(e).badgeAction,getOnCompositeClickAction:e=>this.instantiationService.createInstance(Nt.rV,(0,y.cW)(this.getPaneComposite(e)),this.viewContainerLocation),fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),getContextMenuActionsForComposite:e=>this.getContextMenuActionsForComposite(e),getDefaultCompositeId:()=>a.getDefaultViewContainer(this.viewContainerLocation)?.id,hidePart:()=>this.layoutService.setPartHidden(!0,this.partId),dndHandler:this.dndHandler,compositeSize:0,overflowActionSize:44,colors:e=>({activeBackgroundColor:e.getColor(this.backgroundColor),inactiveBackgroundColor:e.getColor(this.backgroundColor),activeBorderBottomColor:e.getColor(B.bT),activeForegroundColor:e.getColor(B.Pl),inactiveForegroundColor:e.getColor(B.rU),badgeBackground:e.getColor(P.g8u),badgeForeground:e.getColor(P.qeD),dragAndDropBorder:e.getColor(B.Px)})})),this.registerListeners(),this.onDidRegisterPanels([...this.getPaneComposites()]),this.globalActions=this._register(this.instantiationService.createInstance(Mt.C,"workbench.parts.panel"===l?te.eH.PanelTitle:te.eH.AuxiliaryBarTitle,void 0,void 0)),this._register(this.globalActions.onDidChange((()=>this.updateGlobalToolbarActions())))}getContextMenuActionsForComposite(e){const t=[],i=this.viewDescriptorService.getViewContainerById(e),o=this.viewDescriptorService.getDefaultViewContainerLocation(i);if(o!==this.viewDescriptorService.getViewContainerLocation(i))t.push((0,ye.xw)({id:"resetLocationAction",label:(0,l.NC)("resetLocation","Reset Location"),run:()=>this.viewDescriptorService.moveViewContainerToLocation(i,o)}));else{const e=this.viewDescriptorService.getViewContainerModel(i);if(1===e.allViewDescriptors.length){const o=e.allViewDescriptors[0],s=this.viewDescriptorService.getDefaultContainerById(o.id);s!==i&&t.push((0,ye.xw)({id:"resetLocationAction",label:(0,l.NC)("resetLocation","Reset Location"),run:()=>this.viewDescriptorService.moveViewsToContainer([o],s)}))}}return t}onDidRegisterPanels(e){const t=this.getCachedPanels();for(const i of e){const e=t.filter((({id:e})=>e===i.id))[0],o=this.getActivePaneComposite(),s=o?.getId()===i.id||this.extensionsRegistered&&0===this.compositeBar.getVisibleComposites().length;if(s||!this.shouldBeHidden(i.id,e)){const t={id:i.id,name:i.name,order:i.order,requestedIndex:i.requestedIndex};this.compositeBar.addComposite(t),e||this.compositeBar.pin(i.id),s&&(this.compositeBar.activateComposite(i.id),!o&&this.element&&this.layoutService.isVisible(this.partId)&&this.doOpenPanel(i.id))}}for(const t of e){const e=this.getViewContainer(t.id),i=this.viewDescriptorService.getViewContainerModel(e);this.updateActivity(e,i),this.showOrHideViewContainer(e,i);const o=new p.SL;o.add(i.onDidChangeActiveViewDescriptors((()=>this.showOrHideViewContainer(e,i)))),o.add(i.onDidChangeContainerInfo((()=>this.updateActivity(e,i)))),this.panelDisposables.set(t.id,o)}}async onDidDeregisterPanel(e){const t=this.panelDisposables.get(e);t?.dispose(),this.panelDisposables.delete(e);const i=this.viewDescriptorService.getViewContainersByLocation(this.viewContainerLocation).filter((e=>this.viewDescriptorService.getViewContainerModel(e).activeViewDescriptors.length>0));if(i.length){if(this.getActivePaneComposite()?.getId()===e){const e=this.viewDescriptorService.getDefaultViewContainer(this.viewContainerLocation)?.id,t=i.filter((t=>t.id===e))[0]||i[0];await this.openPaneComposite(t.id)}}else this.layoutService.setPartHidden(!0,this.partId);this.removeComposite(e)}updateActivity(e,t){const i=this.getPlaceholderViewContainers().filter((t=>t.id===e.id))[0]?.name,o={id:e.id,name:this.extensionsRegistered||void 0===i?t.title:i,keybindingId:t.keybindingId},{activityAction:s,pinnedAction:n}=this.getCompositeActions(e.id);s.setActivity(this.toActivity(t)),n instanceof Nt.Bq&&n.setActivity(o),this.compositeBar.recomputeSizes(),this.layoutCompositeBar(),this.extensionsRegistered&&this.saveCachedPanels()}toActivity(t){return e.toActivity(t.viewContainer.id,t.title,this.panelOptions.useIcons?t.icon:void 0,t.keybindingId)}static toActivity(e,t,i,o){let s,n;if(J.ov.isUri(i)){n=i;const t=(0,w.wY)(i),o=new Rt.yP;o.update(t);const r=`activity-${e.replace(/\./g,"-")}-${o.digest()}`;s=[r,"uri-icon"];const a=`.monaco-workbench .basepanel .monaco-action-bar .action-label.${r}`;(0,w.fk)(a,`\n\t\t\t\tmask: ${t} no-repeat 50% 50%;\n\t\t\t\tmask-size: 16px;\n\t\t\t\t-webkit-mask: ${t} no-repeat 50% 50%;\n\t\t\t\t-webkit-mask-size: 16px;\n\t\t\t\tmask-origin: padding;\n\t\t\t\t-webkit-mask-origin: padding;\n\t\t\t`)}else q.kS.isThemeIcon(i)&&(s=q.kS.asClassNameArray(i));return{id:e,name:t,classNames:s,iconUrl:n,keybindingId:o}}showOrHideViewContainer(e,t){let i=this.enabledViewContainersContextKeys.get(e.id);if(i||(i=this.contextKeyService.createKey((0,L.l0)(e.id),!1),this.enabledViewContainersContextKeys.set(e.id,i)),t.activeViewDescriptors.length){if(i.set(!0),this.compositeBar.addComposite({id:e.id,name:"string"==typeof e.title?e.title:e.title.value,order:e.order,requestedIndex:e.requestedIndex}),this.layoutService.isRestored()&&this.layoutService.isVisible(this.partId)){const t=this.getActiveComposite();void 0!==t&&t.getId()!==e.id||this.compositeBar.activateComposite(e.id)}this.layoutCompositeBar(),this.layoutEmptyMessage()}else e.hideIfEmpty&&(i.set(!1),this.hideComposite(e.id))}shouldBeHidden(e,t){const i=this.getViewContainer(e);return!(!i||!i.hideIfEmpty)&&!(!t?.views||!t.views.length)&&t.views.every((({when:e})=>!!e&&!this.contextKeyService.contextMatchesRules(H.Ao.deserialize(e))))}registerListeners(){this._register(this.registry.onDidRegister((e=>this.onDidRegisterPanels([e])))),this._register(this.registry.onDidDeregister((e=>this.onDidDeregisterPanel(e.id)))),this._register(this.onDidPaneCompositeOpen((e=>this.onPanelOpen(e)))),this._register(this.onDidPaneCompositeClose(this.onPanelClose,this));const e=this._register(new p.SL);this._register(this.extensionService.onDidRegisterExtensions((()=>{e.clear(),this.onDidRegisterExtensions(),this.compositeBar.onDidChange((()=>this.saveCachedPanels()),this,e),this.storageService.onDidChangeValue((e=>this.onDidStorageValueChange(e)),this,e)})))}onDidRegisterExtensions(){this.extensionsRegistered=!0;const e=this.getPaneComposites();for(const{id:t}of this.getCachedPanels())e.every((e=>e.id!==t))&&(this.viewDescriptorService.isViewContainerRemovedPermanently(t)?this.removeComposite(t):this.hideComposite(t));this.saveCachedPanels()}hideComposite(e){this.compositeBar.hideComposite(e);const t=this.compositeActions.get(e);t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e))}onPanelOpen(e){this.activePanelContextKey.set(e.getId());const t=this.panelRegistry.getPaneComposite(e.getId());t&&this.compositeBar.addComposite(t),this.compositeBar.activateComposite(e.getId());const i=this.panelRegistry.getPaneComposite(e.getId());if(i){const e=this.getViewContainer(i.id);e?.hideIfEmpty&&0===this.viewDescriptorService.getViewContainerModel(e).activeViewDescriptors.length&&this.hideComposite(i.id)}this.layoutCompositeBar(),this.layoutEmptyMessage()}onPanelClose(e){const t=e.getId();this.activePanelContextKey.get()===t&&this.activePanelContextKey.reset(),this.compositeBar.deactivateComposite(e.getId()),this.layoutEmptyMessage()}create(e){this.element=e,super.create(e),this.createEmptyPanelMessage();const t=this._register((0,w.go)(e));this._register(t.onDidFocus((()=>this.panelFocusContextKey.set(!0)))),this._register(t.onDidBlur((()=>this.panelFocusContextKey.set(!1))))}createEmptyPanelMessage(){const e=this.getContentArea();this.emptyPanelMessageElement=document.createElement("div"),this.emptyPanelMessageElement.classList.add("empty-panel-message-area");const t=document.createElement("div");t.classList.add("empty-panel-message"),t.innerText=(0,l.NC)("panel.emptyMessage","Drag a view here to display."),this.emptyPanelMessageElement.appendChild(t),e.appendChild(this.emptyPanelMessageElement),this._register(G.Mi.INSTANCE.registerTarget(this.emptyPanelMessageElement,{onDragOver:e=>{w.zB.stop(e.eventData,!0);const t=this.dndHandler.onDragEnter(e.dragAndDropData,void 0,e.eventData);(0,G.cP)(e.eventData.dataTransfer,"move",t)},onDragEnter:e=>{w.zB.stop(e.eventData,!0);const t=this.dndHandler.onDragEnter(e.dragAndDropData,void 0,e.eventData);this.emptyPanelMessageElement.style.backgroundColor=t&&this.theme.getColor(B.Xv)?.toString()||""},onDragLeave:e=>{w.zB.stop(e.eventData,!0),this.emptyPanelMessageElement.style.backgroundColor=""},onDragEnd:e=>{w.zB.stop(e.eventData,!0),this.emptyPanelMessageElement.style.backgroundColor=""},onDrop:e=>{w.zB.stop(e.eventData,!0),this.emptyPanelMessageElement.style.backgroundColor="",this.dndHandler.drop(e.dragAndDropData,void 0,e.eventData)}}))}createTitleArea(e){const t=super.createTitleArea(e),i=t.appendChild((0,w.$)(".global-actions"));return this.globalToolBar=this._register(new Pt.u(i,this.contextMenuService,{actionViewItemProvider:e=>this.actionViewItemProvider(e),orientation:0,getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id),anchorAlignmentProvider:()=>this.getTitleAreaDropDownAnchorAlignment(),toggleMenuTitle:(0,l.NC)("moreActions","More Actions...")})),this.updateGlobalToolbarActions(),t}updateStyles(){super.updateStyles();const e=(0,y.cW)(this.getContainer());e.style.backgroundColor=this.getColor(this.backgroundColor)||"";const t=this.getColor(P.lRK)||"";e.style.borderLeftColor=t,e.style.borderRightColor=t;const i=this.getTitleArea();i&&(i.style.borderTopColor=this.getColor(P.lRK)||"")}doOpenPanel(e,t){if(!this.blockOpeningPanel){if(!this.layoutService.isVisible(this.partId))try{this.blockOpeningPanel=!0,this.layoutService.setPartHidden(!1,this.partId)}finally{this.blockOpeningPanel=!1}return this.openComposite(e,t)}}async openPaneComposite(e,t){return"string"==typeof e&&this.getPaneComposite(e)?this.doOpenPanel(e,t):(await this.extensionService.whenInstalledExtensionsRegistered(),"string"==typeof e&&this.getPaneComposite(e)?this.doOpenPanel(e,t):void 0)}showActivity(e,t,i){return this.compositeBar.showActivity(e,t,i)}getPaneComposite(e){return this.panelRegistry.getPaneComposite(e)}getPaneComposites(){return this.panelRegistry.getPaneComposites().sort(((e,t)=>"number"!=typeof e.order?1:"number"!=typeof t.order?-1:e.order-t.order))}getPinnedPaneCompositeIds(){const e=this.compositeBar.getPinnedComposites().map((e=>e.id));return this.getPaneComposites().filter((t=>e.includes(t.id))).sort(((t,i)=>e.indexOf(t.id)-e.indexOf(i.id))).map((e=>e.id))}getVisiblePaneCompositeIds(){return this.compositeBar.getVisibleComposites().filter((e=>this.getActivePaneComposite()?.getId()===e.id||this.compositeBar.isPinned(e.id))).map((e=>e.id))}getActivePaneComposite(){return this.getActiveComposite()}getLastActivePaneCompositeId(){return this.getLastActiveCompositeId()}hideActivePaneComposite(){this.layoutService.isVisible(this.partId)&&this.layoutService.setPartHidden(!0,this.partId),this.hideActiveComposite()}createTitleLabel(e){return this.compositeBar.create(e).classList.add("panel-switcher-container"),{updateTitle:(e,t,i)=>{const o=this.compositeBar.getAction(e);o&&(o.label=t)},updateStyles:()=>{}}}onTitleAreaUpdate(e){super.onTitleAreaUpdate(e),this.layoutCompositeBar()}layout(e,t,i,o){this.layoutService.isVisible(this.partId)&&(this.contentDimension=new w.Ro(e,t),super.layout(this.contentDimension.width,this.contentDimension.height,i,o),this.layoutCompositeBar(),this.layoutEmptyMessage())}layoutCompositeBar(){if(this.contentDimension&&this.dimension){let t=this.contentDimension.width-40;this.toolBar&&(t=Math.max(e.MIN_COMPOSITE_BAR_WIDTH,t-this.getToolbarWidth())),this.compositeBar.layout(new w.Ro(t,this.dimension.height))}}layoutEmptyMessage(){this.emptyPanelMessageElement?.classList.toggle("visible",0===this.compositeBar.getVisibleComposites().length)}getViewContainer(e){const t=this.viewDescriptorService.getViewContainerById(e);return t&&this.viewDescriptorService.getViewContainerLocation(t)===this.viewContainerLocation?t:void 0}updateGlobalToolbarActions(){const e=this.globalActions.getPrimaryActions(),t=this.globalActions.getSecondaryActions();this.globalToolBar?.setActions((0,v.c)(e),(0,v.c)(t))}getCompositeActions(e){let t=this.compositeActions.get(e);if(!t){const i=this.getViewContainer(e);if(i){const e=this.viewDescriptorService.getViewContainerModel(i);t={activityAction:this.instantiationService.createInstance(Nt.rV,this.toActivity(e),this.viewContainerLocation),pinnedAction:new Ce.du(this.toActivity(e),this.compositeBar),badgeAction:new Ce.B7(this.toActivity(e),this.compositeBar)}}else t={activityAction:this.instantiationService.createInstance(Nt.h3,e,this.viewContainerLocation),pinnedAction:new Nt.Bq(e,this.compositeBar),badgeAction:new Pe(e,this.compositeBar)};this.compositeActions.set(e,t)}return t}removeComposite(e){if(super.removeComposite(e)){this.compositeBar.removeComposite(e);const t=this.compositeActions.get(e);return t&&(t.activityAction.dispose(),t.pinnedAction.dispose(),this.compositeActions.delete(e)),!0}return!1}getToolbarWidth(){return this.getActivePaneComposite()&&this.toolBar?this.toolBar.getItemsWidth()+(this.globalToolBar?.getItemsWidth()??0):0}onDidStorageValueChange(e){if(e.key===this.pinnedPanelsKey&&0===e.scope&&this.cachedPanelsValue!==this.getStoredCachedPanelsValue()){this._cachedPanelsValue=void 0;const e=[],t=this.compositeBar.getCompositeBarItems(),i=this.getCachedPanels();for(const o of i)e.push({id:o.id,name:o.name,order:o.order,pinned:o.pinned,visible:!!t.find((({id:e})=>e===o.id))});for(let i=0;i<t.length;i++)e.some((({id:e})=>e===t[i].id))||e.splice(i,0,t[i]);this.compositeBar.setCompositeBarItems(e)}}saveCachedPanels(){const e=[],t=[],i=this.compositeBar.getCompositeBarItems();for(const o of i){const i=this.getViewContainer(o.id);if(i){const s=this.viewDescriptorService.getViewContainerModel(i);e.push({id:o.id,name:s.title,pinned:o.pinned,order:o.order,visible:o.visible}),t.push({id:o.id,name:this.getCompositeActions(o.id).activityAction.label})}else e.push({id:o.id,name:o.name,pinned:o.pinned,order:o.order,visible:o.visible})}this.cachedPanelsValue=JSON.stringify(e),this.setPlaceholderViewContainers(t)}getCachedPanels(){const e=this.getPaneComposites(),t=JSON.parse(this.cachedPanelsValue).map((t=>{const i="string"==typeof t?{id:t,pinned:!0,order:void 0,visible:!0}:t,o=e.some((e=>e.id===i.id));return i.visible=!!o&&(!!(0,y.Jp)(i.visible)||i.visible),i}));for(const e of this.getPlaceholderViewContainers()){const i=t.filter((t=>t.id===e.id))[0];i&&(i.name=e.name)}return t}get cachedPanelsValue(){return this._cachedPanelsValue||(this._cachedPanelsValue=this.getStoredCachedPanelsValue()),this._cachedPanelsValue}set cachedPanelsValue(e){this.cachedPanelsValue!==e&&(this._cachedPanelsValue=e,this.setStoredCachedViewletsValue(e))}getStoredCachedPanelsValue(){return this.storageService.get(this.pinnedPanelsKey,0,"[]")}setStoredCachedViewletsValue(e){this.storageService.store(this.pinnedPanelsKey,e,0,0)}getPlaceholderViewContainers(){return JSON.parse(this.placeholderViewContainersValue)}setPlaceholderViewContainers(e){this.placeholderViewContainersValue=JSON.stringify(e)}get placeholderViewContainersValue(){return this._placeholderViewContainersValue||(this._placeholderViewContainersValue=this.getStoredPlaceholderViewContainersValue()),this._placeholderViewContainersValue}set placeholderViewContainersValue(e){this.placeholderViewContainersValue!==e&&(this._placeholderViewContainersValue=e,this.setStoredPlaceholderViewContainersValue(e))}getStoredPlaceholderViewContainersValue(){return this.storageService.get(this.placeholdeViewContainersKey,1,"[]")}setStoredPlaceholderViewContainersValue(e){this.storageService.store(this.placeholdeViewContainersKey,e,1,1)}};Bt=(0,o.g)([(0,o.f)(0,F.lT),(0,o.f)(1,R.Uy),(0,o.f)(2,O.i),(0,o.f)(3,V.ze),(0,o.f)(4,N.d),(0,o.f)(5,c.TG),(0,o.f)(6,M.XE),(0,o.f)(7,r.XH),(0,o.f)(8,H.i6),(0,o.f)(9,z.QS)],Bt);let Ft=class e extends Bt{static{this.activePanelSettingsKey="workbench.panelpart.activepanelid"}constructor(t,i,o,s,n,r,a,c,d,h,l,u,p){super(t,i,s,n,r,a,c,d,h,l,"workbench.parts.panel",e.activePanelSettingsKey,"workbench.panel.pinnedPanels","workbench.panel.placeholderPanels",T.IP.Panels,B.v9,1,L.jN.bindTo(h),L.dX.bindTo(h),{useIcons:!1,hasTitle:!0}),this.commandService=u,this.menuService=p}updateStyles(){super.updateStyles();const e=(0,y.cW)(this.getContainer()),t=this.getColor(B.QO)||this.getColor(P.lRK)||"";e.style.borderLeftColor=t,e.style.borderRightColor=t;const i=this.getTitleArea();i&&(i.style.borderTopColor=this.getColor(B.QO)||this.getColor(P.lRK)||"")}getActivityHoverOptions(){return{position:()=>2!==this.layoutService.getPanelPosition()||this.layoutService.isPanelMaximized()?2:3}}fillExtraContextMenuActions(e){const t=this.menuService.createMenu(te.eH.PanelPositionMenu,this.contextKeyService),i=this.menuService.createMenu(te.eH.PanelAlignmentMenu,this.contextKeyService),o=[],s=[];(0,x.LJ)(t,{shouldForwardArgs:!0},{primary:[],secondary:o}),(0,x.LJ)(i,{shouldForwardArgs:!0},{primary:[],secondary:s}),i.dispose(),t.dispose(),e.push(new ye.Z0,new ye.wY("workbench.action.panel.position",(0,l.NC)("panel position","Panel Position"),o),new ye.wY("workbench.action.panel.align",(0,l.NC)("align panel","Align Panel"),s),(0,ye.xw)({id:Nt.gU.ID,label:(0,l.NC)("hidePanel","Hide Panel"),run:()=>this.commandService.executeCommand(Nt.gU.ID)}))}layout(e,t,i,o){let s;s=1===this.layoutService.getPanelPosition()?new w.Ro(e-1,t):new w.Ro(e,t),super.layout(s.width,s.height,i,o)}toJSON(){return{type:"workbench.parts.panel"}}};Ft=(0,o.g)([(0,o.f)(0,F.lT),(0,o.f)(1,R.Uy),(0,o.f)(2,j.bU),(0,o.f)(3,O.i),(0,o.f)(4,V.ze),(0,o.f)(5,N.d),(0,o.f)(6,c.TG),(0,o.f)(7,M.XE),(0,o.f)(8,r.XH),(0,o.f)(9,H.i6),(0,o.f)(10,z.QS),(0,o.f)(11,ht.H),(0,o.f)(12,te.co)],Ft);var Wt=i(82294);let Ht=class e extends Bt{static{this.activePanelSettingsKey="workbench.auxiliarybar.activepanelid"}static{this.pinnedPanelsKey="workbench.auxiliarybar.pinnedPanels"}static{this.placeholdeViewContainersKey="workbench.auxiliarybar.placeholderPanels"}constructor(t,i,o,s,n,r,a,c,d,h,l){super(t,i,o,s,n,r,a,c,d,h,"workbench.parts.auxiliarybar",e.activePanelSettingsKey,e.pinnedPanelsKey,e.placeholdeViewContainersKey,T.IP.Auxiliary,B.Qd,2,L.gL.bindTo(d),L.Nx.bindTo(d),{useIcons:!0,hasTitle:!0,borderWidth:()=>this.getColor(B._M)||this.getColor(P.lRK)?1:0}),this.commandService=l,this.minimumWidth=170,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.priority=1}updateStyles(){super.updateStyles();const e=(0,y.cW)(this.getContainer()),t=this.getColor(B._M)||this.getColor(P.lRK),i=1===this.layoutService.getSideBarPosition();e.style.color=this.getColor(B.Sr)||"",e.style.borderLeftColor=t??"",e.style.borderRightColor=t??"",e.style.borderLeftStyle=t&&!i?"solid":"none",e.style.borderRightStyle=t&&i?"solid":"none",e.style.borderLeftWidth=t&&!i?"1px":"0px",e.style.borderRightWidth=t&&i?"1px":"0px"}getActivityHoverOptions(){return{position:()=>2}}fillExtraContextMenuActions(e){const t=0===this.layoutService.getSideBarPosition();e.push(new ye.Z0,(0,ye.xw)({id:Fe.VR.ID,label:t?(0,l.NC)("move second side bar left","Move Secondary Side Bar Left"):(0,l.NC)("move second side bar right","Move Secondary Side Bar Right"),run:()=>this.commandService.executeCommand(Fe.VR.ID)}),(0,ye.xw)({id:Wt.J.ID,label:(0,l.NC)("hide second side bar","Hide Secondary Side Bar"),run:()=>this.commandService.executeCommand(Wt.J.ID)}))}toJSON(){return{type:"workbench.parts.auxiliarybar"}}};Ht=(0,o.g)([(0,o.f)(0,F.lT),(0,o.f)(1,R.Uy),(0,o.f)(2,O.i),(0,o.f)(3,V.ze),(0,o.f)(4,N.d),(0,o.f)(5,c.TG),(0,o.f)(6,M.XE),(0,o.f)(7,r.XH),(0,o.f)(8,H.i6),(0,o.f)(9,z.QS),(0,o.f)(10,ht.H)],Ht);let zt=class extends p.JT{constructor(e){super(),this.paneCompositeParts=new Map,this.paneCompositeSelectorParts=new Map;const t=e.createInstance(Ft),i=e.createInstance(K),o=e.createInstance(Ht),s=e.createInstance(Ot,i);this.paneCompositeParts.set(1,t),this.paneCompositeParts.set(0,i),this.paneCompositeParts.set(2,o),this.paneCompositeSelectorParts.set(1,t),this.paneCompositeSelectorParts.set(0,s),this.paneCompositeSelectorParts.set(2,o);const n=this._register(new p.SL);this.onDidPaneCompositeOpen=g.ju.any(...r.fC.map((e=>g.ju.map(this.paneCompositeParts.get(e).onDidPaneCompositeOpen,(t=>({composite:t,viewContainerLocation:e})),n)))),this.onDidPaneCompositeClose=g.ju.any(...r.fC.map((e=>g.ju.map(this.paneCompositeParts.get(e).onDidPaneCompositeClose,(t=>({composite:t,viewContainerLocation:e})),n))))}openPaneComposite(e,t,i){return this.getPartByLocation(t).openPaneComposite(e,i)}getActivePaneComposite(e){return this.getPartByLocation(e).getActivePaneComposite()}getPaneComposite(e,t){return this.getPartByLocation(t).getPaneComposite(e)}getPaneComposites(e){return this.getPartByLocation(e).getPaneComposites()}getPinnedPaneCompositeIds(e){return this.getSelectorPartByLocation(e).getPinnedPaneCompositeIds()}getVisiblePaneCompositeIds(e){return this.getSelectorPartByLocation(e).getVisiblePaneCompositeIds()}getProgressIndicator(e,t){return this.getPartByLocation(t).getProgressIndicator(e)}hideActivePaneComposite(e){this.getPartByLocation(e).hideActivePaneComposite()}getLastActivePaneCompositeId(e){return this.getPartByLocation(e).getLastActivePaneCompositeId()}showActivity(e,t,i,o,s){return this.getSelectorPartByLocation(t).showActivity(e,i,o,s)}getPartByLocation(e){return(0,y.cW)(this.paneCompositeParts.get(e))}getSelectorPartByLocation(e){return(0,y.cW)(this.paneCompositeSelectorParts.get(e))}};zt=(0,o.g)([(0,o.f)(0,c.TG)],zt),(0,d.Z)('.monaco-workbench .workbench-hover{background:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);border-radius:3px;box-shadow:0 2px 8px var(--vscode-widget-shadow);color:var(--vscode-editorHoverWidget-foreground);font-size:13px;line-height:19px;max-width:700px;overflow:hidden;position:relative;z-index:40}.monaco-workbench .workbench-hover hr{border-bottom:none}.monaco-workbench .workbench-hover:not(.skip-fade-in){animation:fadein .1s linear}.monaco-workbench .workbench-hover.compact{font-size:12px}.monaco-workbench .workbench-hover.compact .hover-contents{padding:2px 8px}.monaco-workbench .workbench-hover-container.locked .workbench-hover{outline:1px solid var(--vscode-editorHoverWidget-border)}.monaco-workbench .workbench-hover-container.locked .workbench-hover:focus,.monaco-workbench .workbench-hover-lock:focus{outline:1px solid var(--vscode-focusBorder)}.monaco-workbench .workbench-hover-container.locked .workbench-hover-lock:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-workbench .workbench-hover-pointer{pointer-events:none;position:absolute;z-index:41}.monaco-workbench .workbench-hover-pointer:after{background-color:var(--vscode-editorHoverWidget-background);border-bottom:1px solid var(--vscode-editorHoverWidget-border);border-right:1px solid var(--vscode-editorHoverWidget-border);content:"";height:5px;position:absolute;width:5px}.monaco-workbench .locked .workbench-hover-pointer:after{border-bottom-width:2px;border-right-width:2px;height:4px;width:4px}.monaco-workbench .workbench-hover-pointer.left{left:-3px}.monaco-workbench .workbench-hover-pointer.right{right:3px}.monaco-workbench .workbench-hover-pointer.top{top:-3px}.monaco-workbench .workbench-hover-pointer.bottom{bottom:3px}.monaco-workbench .workbench-hover-pointer.left:after{transform:rotate(135deg)}.monaco-workbench .workbench-hover-pointer.right:after{transform:rotate(315deg)}.monaco-workbench .workbench-hover-pointer.top:after{transform:rotate(225deg)}.monaco-workbench .workbench-hover-pointer.bottom:after{transform:rotate(45deg)}.monaco-workbench .workbench-hover a{color:var(--vscode-textLink-foreground)}.monaco-workbench .workbench-hover a:focus{outline:1px solid;outline-color:var(--vscode-focusBorder);outline-offset:-1px;text-decoration:underline}.monaco-workbench .workbench-hover a:active,.monaco-workbench .workbench-hover a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-workbench .workbench-hover code{background:var(--vscode-textCodeBlock-background)}.monaco-workbench .workbench-hover .hover-row .actions{background:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-workbench .workbench-hover.right-aligned{left:1px}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions{flex-direction:row-reverse}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions .action-container{margin-left:16px;margin-right:0}',{});var Gt=i(64141),Ut=i(82246),Kt=i(50988),$t=i(18806),jt=i(59365);const Xt=w.$;let Jt=class extends We.${get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return 2===this._hoverPosition?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,o,s){super(),this._keybindingService=t,this._configurationService=i,this._openerService=o,this._instantiationService=s,this._messageListeners=new p.SL,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new g.Q5),this._onRequestLayout=this._register(new g.Q5),this._linkHandler=e.linkHandler||(t=>(0,$t.N)(this._openerService,t,(0,jt.Fr)(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new Qt(e.target),this._hoverPointer=e.showPointer?Xt("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Ut.c),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),e.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=e.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,(e=>e.stopPropagation())),this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9)&&this.dispose()})),this._register(w.nm(window,"blur",(()=>this.dispose())));const n=Xt("div.hover-row.markdown-hover"),r=Xt("div.hover-contents");if("string"==typeof e.content)r.textContent=e.content,r.style.whiteSpace="pre-wrap";else if(e.content instanceof HTMLElement)r.appendChild(e.content),r.classList.add("html-hover-contents");else{const t=e.content,i=this._instantiationService.createInstance($t.$,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Gt.hL.fontFamily}),{element:o}=i.render(t,{actionHandler:{callback:e=>this._linkHandler(e),disposables:this._messageListeners},asyncRenderCallback:()=>{r.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});r.appendChild(o)}if(n.appendChild(r),this._hover.contentsDomNode.appendChild(n),e.actions&&e.actions.length>0){const t=Xt("div.hover-row.status-bar"),i=Xt("div.actions");e.actions.forEach((e=>{const t=this._keybindingService.lookupKeybinding(e.commandId),o=t?t.getLabel():null;Ut.S.render(i,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},o)})),t.appendChild(i),this._hover.containerDomNode.appendChild(t)}let a;if(this._hoverContainer=Xt("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),a=!(e.actions&&e.actions.length>0)&&(void 0===e.hideOnHover?"string"==typeof e.content||(0,jt.Fr)(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.hideOnHover),a&&e.showHoverHint){const e=Xt("div.hover-row.status-bar"),t=Xt("div.info");t.textContent=(0,l.NC)("hoverhint","Hold {0} key to mouse over",Ke.dz?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}const c=[...this._target.targetElements];a||c.push(this._hoverContainer);const d=this._register(new Yt(c));if(this._register(d.onMouseOut((()=>{this._isLocked||this.dispose()}))),a){const e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new Yt(e)),this._register(this._lockMouseTracker.onMouseOut((()=>{this._isLocked||this.dispose()})))}else this._lockMouseTracker=d}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=w.Ce(this._hoverContainer,Xt("div")),o=w.R3(this._hoverContainer,Xt("div"));i.tabIndex=0,o.tabIndex=0,this._register(w.nm(o,"focus",(t=>{e.focus(),t.preventDefault()}))),this._register(w.nm(i,"focus",(e=>{t.focus(),e.preventDefault()})))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const e=i;if("number"==typeof e.tabIndex&&e.tabIndex>=0)return e}const o=this.findLastFocusableChild(i);if(o)return o}}render(e){e.appendChild(this._hoverContainer),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=this._target.targetElements.map((e=>(e=>{const t=w.I8(e),i=e.getBoundingClientRect();return{top:i.top*t,bottom:i.bottom*t,right:i.right*t,left:i.left*t}})(e))),t=Math.min(...e.map((e=>e.top))),i=Math.max(...e.map((e=>e.right))),o=Math.max(...e.map((e=>e.bottom))),s=Math.min(...e.map((e=>e.left))),n=i-s,r=o-t,a={top:t,right:i,bottom:o,left:s,width:n,height:r,center:{x:s+n/2,y:t+r/2}};if(this.adjustHorizontalHoverPosition(a),this.adjustVerticalHoverPosition(a),this.adjustHoverMaxHeight(a),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:a.left+=3,a.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:a.left-=3,a.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:a.top+=3,a.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:a.top-=3,a.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}a.center.x=a.left+n/2,a.center.y=a.top+r/2}this.computeXCordinate(a),this.computeYCordinate(a),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(a)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=document.documentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(document.documentElement.clientWidth-t-2,document.documentElement.clientLeft))),this._x<document.documentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>window.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0===this._target.x)if(this._forcePosition){const t=2+(this._hoverPointer?3:0);1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth=document.documentElement.clientWidth-e.right-t+"px":0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth=e.left-t+"px")}else 1===this._hoverPosition?document.documentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth&&(e.left>=this._hover.containerDomNode.clientWidth?this._hoverPosition=0:this._hoverPosition=2):0===this._hoverPosition&&(e.left<this._hover.containerDomNode.clientWidth&&(document.documentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth<=document.documentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){void 0!==this._target.y||this._forcePosition||(3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight>window.innerHeight&&(this._hoverPosition=3))}adjustHoverMaxHeight(e){let t=window.innerHeight/2;if(this._forcePosition){const i=2+(this._hoverPointer?3:0);3===this._hoverPosition?t=Math.min(t,e.top-i):2===this._hoverPosition&&(t=Math.min(t,window.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const e=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=e.center.y-(this._y-t)-3+"px":this._hoverPointer.style.top=Math.round(t/2)-3+"px";break}case 3:case 2:{this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const o=this._x+i;(o<e.left||o>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}hide(){this.dispose()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};Jt=(0,o.g)([(0,o.f)(1,N.d),(0,o.f)(2,Ee.Ui),(0,o.f)(3,Kt.v4),(0,o.f)(4,c.TG)],Jt);class Yt extends We.${get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new g.Q5),this._elements.forEach((e=>this.onmouseover(e,(()=>this._onTargetMouseOver())))),this._elements.forEach((e=>this.onmouseleave(e,(()=>this._onTargetMouseLeave()))))}_onTargetMouseOver(){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout()}_onTargetMouseLeave(){this._isMouseIn=!1,this._evaluateMouseState()}_evaluateMouseState(){this._clearEvaluateMouseStateTimeout(),this._mouseTimeout=window.setTimeout((()=>this._fireIfMouseOutside()),0)}_clearEvaluateMouseStateTimeout(){this._mouseTimeout&&(clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class Qt{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}let qt=class{constructor(e,t,i,o,s){this._instantiationService=e,this._contextViewService=t,this._keybindingService=o,this._accessibilityService=s,i.onDidShowContextMenu((()=>this.hideHover()))}showHover(e,t,i){if(Zt(this._currentHoverOptions)===Zt(e))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const o=e.trapFocus||this._accessibilityService.isScreenReaderOptimized();i||(o&&document.activeElement?this._lastFocusedElementBeforeOpen=document.activeElement:this._lastFocusedElementBeforeOpen=void 0);const s=new p.SL,n=this._instantiationService.createInstance(Jt,e);n.onDispose((()=>{this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),s.dispose()}));const r=this._contextViewService;if(r.showContextView(new ei(n,t),e.container),n.onRequestLayout((()=>r.layout())),"targetElements"in e.target)for(const t of e.target.targetElements)s.add((0,w.nm)(t,w.tw.CLICK,(()=>this.hideHover())));else s.add((0,w.nm)(e.target,w.tw.CLICK,(()=>this.hideHover())));const a=document.activeElement;if(a&&(s.add((0,w.nm)(a,w.tw.KEY_DOWN,(t=>this._keyDown(t,n,!!e.hideOnKeyDown)))),s.add((0,w.nm)(document,w.tw.KEY_DOWN,(t=>this._keyDown(t,n,!!e.hideOnKeyDown)))),s.add((0,w.nm)(a,w.tw.KEY_UP,(e=>this._keyUp(e,n)))),s.add((0,w.nm)(document,w.tw.KEY_UP,(e=>this._keyUp(e,n))))),"IntersectionObserver"in window){const t=new IntersectionObserver((e=>this._intersectionChange(e,n)),{threshold:0}),i="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(i),s.add((0,p.OF)((()=>t.disconnect())))}return this._currentHover=n,n}hideHover(){!this._currentHover?.isLocked&&this._currentHoverOptions&&(this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewService.hideContextView())}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){if("Alt"===e.key)return void(t.isLocked=!0);const o=new we.y1(e);this._keybindingService.resolveKeyboardEvent(o).getSingleModifierDispatchChords().some((e=>!!e))||0!==this._keybindingService.softDispatch(o,o.target).kind||!i||this._currentHoverOptions?.trapFocus&&"Tab"===e.key||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){"Alt"===e.key&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}};function Zt(e){if(void 0!==e)return e?.id??e}qt=(0,o.g)([(0,o.f)(0,c.TG),(0,o.f)(1,O.u),(0,o.f)(2,O.i),(0,o.f)(3,N.d),(0,o.f)(4,rt.F7)],qt);class ei{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}(0,M.Ic)(((e,t)=>{const i=e.getColor(P.CNo);i&&(t.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`))}));var ti=i(86025),ii=i(84972),oi=i(24448),si=i(48205),ni=i(66007),ri=i(64862),ai=i(71050),ci=i(3384),di=i(5882);const hi=new ri.gJ;let li=class e{static{this.EXPLORER_FILE_CHANGES_REACT_DELAY=500}constructor(t,i,o,s,n,r,a,c,d,h){this.fileService=t,this.configurationService=i,this.contextService=o,this.clipboardService=s,this.editorService=n,this.uriIdentityService=r,this.bulkEditService=a,this.progressService=c,this.filesConfigurationService=h,this.disposables=new p.SL,this.fileChangeEvents=[],this.config=this.configurationService.getValue("explorer"),this.model=new ti.zs(this.contextService,this.uriIdentityService,this.fileService,this.configurationService,this.filesConfigurationService),this.disposables.add(this.model),this.disposables.add(this.fileService.onDidRunOperation((e=>this.onDidRunOperation(e)))),this.onFileChangesScheduler=new je.pY((async()=>{const e=this.fileChangeEvents;this.fileChangeEvents=[];const t=[2];"modified"===this.config.sortOrder&&t.push(0);let i=!1;this.roots.forEach((o=>{this.view&&!i&&(i=ui(o,this.view,e,t))})),e.forEach((e=>{if(!i)for(const t of e.rawAdded){const e=this.model.findClosest((0,Q.XX)(t));if(e&&!e.getChild((0,Q.EZ)(t))){i=!0;break}}})),i&&await this.refresh(!1)}),e.EXPLORER_FILE_CHANGES_REACT_DELAY),this.disposables.add(this.fileService.onDidFilesChange((e=>{this.fileChangeEvents.push(e),this.editable||this.onFileChangesScheduler.isScheduled()||this.onFileChangesScheduler.schedule()}))),this.disposables.add(this.configurationService.onDidChangeConfiguration((e=>this.onConfigurationUpdated(e)))),this.disposables.add(g.ju.any(this.fileService.onDidChangeFileSystemProviderRegistrations,this.fileService.onDidChangeFileSystemProviderCapabilities)((async e=>{let t=!1;this.model.roots.forEach((i=>{i.resource.scheme===e.scheme&&(t=!0,i.forgetChildren())})),t&&this.view&&await this.view.setTreeInput()}))),this.disposables.add(this.model.onDidChangeRoots((()=>{this.view?.setTreeInput()}))),this.disposables.add(d.onDidChangeFocus((e=>{e&&this.refresh(!1)}))),this.revealExcludeMatcher=new ci.Q((e=>function(e){const t=e&&e.explorer&&e.explorer.autoRevealExclude;return t||{}}(i.getValue({resource:e}))),(e=>e.affectsConfiguration("explorer.autoRevealExclude")),o,i),this.disposables.add(this.revealExcludeMatcher)}get roots(){return this.model.roots}get sortOrderConfiguration(){return{sortOrder:this.config.sortOrder,lexicographicOptions:this.config.sortOrderLexicographicOptions}}registerView(e){this.view=e}getContext(e,t=!1){if(!this.view)return[];const i=new Set(this.view.getContext(e));return i.forEach((o=>{try{if(e&&!t&&this.view?.isItemCollapsed(o)&&o.nestedChildren)for(const e of o.nestedChildren)i.add(e)}catch{return}})),[...i]}async applyBulkEdit(e,t){const i=new ai.A,o=this.progressService.withProgress({location:t.progressLocation||10,title:t.progressLabel,cancellable:e.length>1,delay:500},(async o=>{await this.bulkEditService.apply(e,{undoRedoSource:hi,label:t.undoLabel,code:"undoredo.explorerOperation",progress:o,token:i.token,confirmBeforeUndo:t.confirmBeforeUndo})}),(()=>i.cancel()));await this.progressService.withProgress({location:1,delay:500},(()=>o)),i.dispose()}hasViewFocus(){return!!this.view&&this.view.hasFocus()}findClosest(e){return this.model.findClosest(e)}findClosestRoot(e){const t=this.model.roots.filter((t=>this.uriIdentityService.extUri.isEqualOrParent(e,t.resource))).sort(((e,t)=>t.resource.path.length-e.resource.path.length));return t.length?t[0]:null}async setEditable(e,t){if(!this.view)return;this.editable=t?{stat:e,data:t}:void 0;const i=this.isEditable(e);await this.view.setEditable(e,i),this.editable||!this.fileChangeEvents.length||this.onFileChangesScheduler.isScheduled()||this.onFileChangesScheduler.schedule()}async setToCopy(e,t){const i=this.cutItems;this.cutItems=t?e:void 0,await this.clipboardService.writeResources(e.map((e=>e.resource))),this.view?.itemsCopied(e,t,i)}isCut(e){return!!this.cutItems&&this.cutItems.some((t=>this.uriIdentityService.extUri.isEqual(t.resource,e.resource)))}getEditable(){return this.editable}getEditableData(e){return this.editable&&this.editable.stat===e?this.editable.data:void 0}isEditable(e){return!(!this.editable||this.editable.stat!==e&&e)}async select(e,t){if(!this.view)return;const i="force"===t,o=this.findClosest(e);if(o){if(!this.shouldAutoRevealItem(o,i))return;return await this.view.selectResource(o.resource,t),Promise.resolve(void 0)}const s={resolveTo:[e],resolveMetadata:"modified"===this.config.sortOrder},n=this.findClosestRoot(e);if(n)try{const o=await this.fileService.resolve(n.resource,s),r=ti.R3.create(this.fileService,this.configurationService,this.filesConfigurationService,o,void 0,s.resolveTo);ti.R3.mergeLocalWithDisk(r,n);const a=n.find(e);if(await this.view.refresh(!0,n),a&&!this.shouldAutoRevealItem(a,i))return;await this.view.selectResource(a?a.resource:void 0,t)}catch(e){n.error=e,await this.view.refresh(!1,n)}}async refresh(e=!0){if(this.model.roots.forEach((e=>e.forgetChildren())),this.view){await this.view.refresh(!0);const t=this.editorService.activeEditor?.resource,i=this.configurationService.getValue().explorer.autoReveal;e&&t&&i&&this.select(t,i)}}async onDidRunOperation(e){const t=this.config.fileNesting.enabled;if(e.isOperation(0)||e.isOperation(3)){const i=e.target,o=(0,Q.XX)(i.resource),s=this.model.findAll(o);s.length&&await Promise.all(s.map((async e=>{const o="modified"===this.config.sortOrder;if(!e.isDirectoryResolved){const t=await this.fileService.resolve(e.resource,{resolveMetadata:o});if(t){const i=ti.R3.create(this.fileService,this.configurationService,this.filesConfigurationService,t,e.parent);ti.R3.mergeLocalWithDisk(i,e)}}const s=ti.R3.create(this.fileService,this.configurationService,this.filesConfigurationService,i,e.parent);e.removeChild(s),e.addChild(s),await(this.view?.refresh(t,e))})))}else if(e.isOperation(2)){const i=e.resource,o=e.target,s=(0,Q.XX)(i),n=(0,Q.XX)(o.resource),r=this.model.findAll(i),a=r.every((e=>!e.nestedParent))&&this.uriIdentityService.extUri.isEqual(s,n);if(a)await Promise.all(r.map((async e=>{e.rename(o),await(this.view?.refresh(t,e.parent))})));else{const e=this.model.findAll(n);e.length&&r.length&&await Promise.all(r.map((async(i,o)=>{const s=i.parent,n=i.nestedParent;i.move(e[o]),n&&await(this.view?.refresh(!1,n)),await(this.view?.refresh(!1,s)),await(this.view?.refresh(t,e[o]))})))}}else if(e.isOperation(1)){const i=this.model.findAll(e.resource);await Promise.all(i.map((async e=>{if(e.parent){const i=e.parent;i.removeChild(e);const o=e.nestedParent;o&&(o.removeChild(e),await(this.view?.refresh(!1,o))),await(this.view?.refresh(t,i))}})))}}shouldAutoRevealItem(e,t){if(void 0===e||t)return!0;if(this.revealExcludeMatcher.matches(e.resource,(t=>!(!e.parent||!e.parent.getChild(t)))))return!1;const i=e.root;let o=e.parent;for(;o!==i;){if(void 0===o)return!0;if(this.revealExcludeMatcher.matches(o.resource))return!1;o=o.parent}return!0}async onConfigurationUpdated(e){if(!e.affectsConfiguration("explorer"))return;let t=!1;e.affectsConfiguration("explorer.fileNesting")&&(t=!0);const i=this.configurationService.getValue(),o=i?.explorer?.sortOrder||"default";this.config.sortOrder!==o&&(t=void 0!==this.config.sortOrder);const s=i?.explorer?.sortOrderLexicographicOptions||"default";this.config.sortOrderLexicographicOptions!==s&&(t=t||void 0!==this.config.sortOrderLexicographicOptions),this.config=i.explorer,t&&await this.refresh()}dispose(){this.disposables.dispose()}};function ui(e,t,i,o){for(const[s,n]of e.children)if(t.isItemVisible(n)){if(i.some((e=>e.contains(n.resource,...o))))return!0;if(n.isDirectory&&n.isDirectoryResolved&&ui(n,t,i,o))return!0}return!1}li=(0,o.g)([(0,o.f)(0,ft.sn),(0,o.f)(1,Ee.Ui),(0,o.f)(2,gt.ec),(0,o.f)(3,ii.p),(0,o.f)(4,oi.AR),(0,o.f)(5,si.v),(0,o.f)(6,ni.vu),(0,o.f)(7,E.R9),(0,o.f)(8,at.$),(0,o.f)(9,di.LM)],li);var pi=i(43830),gi=i(70590);(0,d.Z)(".monaco-grid-view{overflow:hidden;position:relative}.monaco-grid-branch-node,.monaco-grid-view{height:100%;width:100%}",{});var mi=i(89782),vi=i(41264),bi=i(59870);const fi={separatorBorder:vi.Il.transparent};function wi(e){return 0===e?1:0}class yi{constructor(e){this.isLayoutEnabled=e}}function Ci(e,t){if(Math.abs(e)>t)throw new Error("Invalid index");return(0,bi.Xs)(e,t+1)}class Si{get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}get absoluteOffset(){return this._absoluteOffset}get absoluteOrthogonalOffset(){return this._absoluteOrthogonalOffset}get styles(){return this._styles}get width(){return 1===this.orientation?this.size:this.orthogonalSize}get height(){return 1===this.orientation?this.orthogonalSize:this.size}get top(){return 1===this.orientation?this._absoluteOffset:this._absoluteOrthogonalOffset}get left(){return 1===this.orientation?this._absoluteOrthogonalOffset:this._absoluteOffset}get minimumSize(){return 0===this.children.length?0:Math.max(...this.children.map((e=>e.minimumOrthogonalSize)))}get maximumSize(){return Math.min(...this.children.map((e=>e.maximumOrthogonalSize)))}get priority(){if(0===this.children.length)return 0;const e=this.children.map((e=>void 0===e.priority?0:e.priority));return e.some((e=>2===e))?2:e.some((e=>1===e))?1:0}get proportionalLayout(){return 0===this.children.length||this.children.every((e=>e.proportionalLayout))}get minimumOrthogonalSize(){return this.splitview.minimumSize}get maximumOrthogonalSize(){return this.splitview.maximumSize}get minimumWidth(){return 1===this.orientation?this.minimumOrthogonalSize:this.minimumSize}get minimumHeight(){return 1===this.orientation?this.minimumSize:this.minimumOrthogonalSize}get maximumWidth(){return 1===this.orientation?this.maximumOrthogonalSize:this.maximumSize}get maximumHeight(){return 1===this.orientation?this.maximumSize:this.maximumOrthogonalSize}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){if(this._boundarySashes.start!==e.start||this._boundarySashes.end!==e.end||this._boundarySashes.orthogonalStart!==e.orthogonalStart||this._boundarySashes.orthogonalEnd!==e.orthogonalEnd){this._boundarySashes=e,this.splitview.orthogonalStartSash=e.orthogonalStart,this.splitview.orthogonalEndSash=e.orthogonalEnd;for(let t=0;t<this.children.length;t++){const i=this.children[t],o=0===t,s=t===this.children.length-1;i.boundarySashes={start:e.orthogonalStart,end:e.orthogonalEnd,orthogonalStart:o?e.start:i.boundarySashes.orthogonalStart,orthogonalEnd:s?e.end:i.boundarySashes.orthogonalEnd}}}}get edgeSnapping(){return this._edgeSnapping}set edgeSnapping(e){if(this._edgeSnapping!==e){this._edgeSnapping=e;for(const t of this.children)t instanceof Si&&(t.edgeSnapping=e);this.updateSplitviewEdgeSnappingEnablement()}}constructor(e,t,i,o,s=0,n=0,r=!1,a){if(this.orientation=e,this.layoutController=t,this.splitviewProportionalLayout=o,this.children=[],this._absoluteOffset=0,this._absoluteOrthogonalOffset=0,this.absoluteOrthogonalSize=0,this._onDidChange=new g.Q5,this.onDidChange=this._onDidChange.event,this._onDidScroll=new g.Q5,this.onDidScrollDisposable=p.JT.None,this.onDidScroll=this._onDidScroll.event,this.childrenChangeDisposable=p.JT.None,this._onDidSashReset=new g.Q5,this.onDidSashReset=this._onDidSashReset.event,this.splitviewSashResetDisposable=p.JT.None,this.childrenSashResetDisposable=p.JT.None,this._boundarySashes={},this._edgeSnapping=!1,this._styles=i,this._size=s,this._orthogonalSize=n,this.element=(0,w.$)(".monaco-grid-branch-node"),a){const t={views:a.map((e=>({view:e.node,size:e.node.size,visible:!(e.node instanceof _i&&void 0!==e.visible)||e.visible}))),size:this.orthogonalSize},s={proportionalLayout:o,orientation:e,styles:i};this.children=a.map((e=>e.node)),this.splitview=new mi.z(this.element,{...s,descriptor:t}),this.children.forEach(((e,t)=>{const i=0===t,o=t===this.children.length;e.boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:i?this.boundarySashes.start:this.splitview.sashes[t-1],orthogonalEnd:o?this.boundarySashes.end:this.splitview.sashes[t]}}))}else this.splitview=new mi.z(this.element,{orientation:e,styles:i,proportionalLayout:o}),this.splitview.layout(s,{orthogonalSize:n,absoluteOffset:0,absoluteOrthogonalOffset:0,absoluteSize:s,absoluteOrthogonalSize:n});const c=g.ju.map(this.splitview.onDidSashReset,(e=>[e]));this.splitviewSashResetDisposable=c(this._onDidSashReset.fire,this._onDidSashReset),this.updateChildrenEvents()}style(e){this._styles=e,this.splitview.style(e);for(const t of this.children)t instanceof Si&&t.style(e)}layout(e,t,i){if(this.layoutController.isLayoutEnabled){if(void 0===i)throw new Error("Invalid state");this._size=i.orthogonalSize,this._orthogonalSize=e,this._absoluteOffset=i.absoluteOffset+t,this._absoluteOrthogonalOffset=i.absoluteOrthogonalOffset,this.absoluteOrthogonalSize=i.absoluteOrthogonalSize,this.splitview.layout(i.orthogonalSize,{orthogonalSize:e,absoluteOffset:this._absoluteOrthogonalOffset,absoluteOrthogonalOffset:this._absoluteOffset,absoluteSize:i.absoluteOrthogonalSize,absoluteOrthogonalSize:i.absoluteSize}),this.updateSplitviewEdgeSnappingEnablement()}}setVisible(e){for(const t of this.children)t.setVisible(e)}addChild(e,t,i,o){i=Ci(i,this.children.length),this.splitview.addView(e,t,i,o),this.children.splice(i,0,e),this.updateBoundarySashes(),this.onDidChildrenChange()}removeChild(e,t){e=Ci(e,this.children.length),this.splitview.removeView(e,t),this.children.splice(e,1),this.updateBoundarySashes(),this.onDidChildrenChange()}moveChild(e,t){(e=Ci(e,this.children.length))!==(t=Ci(t,this.children.length))&&(e<t&&(t-=1),this.splitview.moveView(e,t),this.children.splice(t,0,this.children.splice(e,1)[0]),this.updateBoundarySashes(),this.onDidChildrenChange())}swapChildren(e,t){(e=Ci(e,this.children.length))!==(t=Ci(t,this.children.length))&&(this.splitview.swapViews(e,t),[this.children[e].boundarySashes,this.children[t].boundarySashes]=[this.children[e].boundarySashes,this.children[t].boundarySashes],[this.children[e],this.children[t]]=[this.children[t],this.children[e]],this.onDidChildrenChange())}resizeChild(e,t){e=Ci(e,this.children.length),this.splitview.resizeView(e,t)}isChildSizeMaximized(e){return this.splitview.isViewSizeMaximized(e)}distributeViewSizes(e=!1){if(this.splitview.distributeViewSizes(),e)for(const e of this.children)e instanceof Si&&e.distributeViewSizes(!0)}getChildSize(e){return e=Ci(e,this.children.length),this.splitview.getViewSize(e)}isChildVisible(e){return e=Ci(e,this.children.length),this.splitview.isViewVisible(e)}setChildVisible(e,t){e=Ci(e,this.children.length),this.splitview.isViewVisible(e)!==t&&this.splitview.setViewVisible(e,t)}getChildCachedVisibleSize(e){return e=Ci(e,this.children.length),this.splitview.getViewCachedVisibleSize(e)}updateBoundarySashes(){for(let e=0;e<this.children.length;e++)this.children[e].boundarySashes={start:this.boundarySashes.orthogonalStart,end:this.boundarySashes.orthogonalEnd,orthogonalStart:0===e?this.boundarySashes.start:this.splitview.sashes[e-1],orthogonalEnd:e===this.children.length-1?this.boundarySashes.end:this.splitview.sashes[e]}}onDidChildrenChange(){this.updateChildrenEvents(),this._onDidChange.fire(void 0)}updateChildrenEvents(){const e=g.ju.map(g.ju.any(...this.children.map((e=>e.onDidChange))),(()=>{}));this.childrenChangeDisposable.dispose(),this.childrenChangeDisposable=e(this._onDidChange.fire,this._onDidChange);const t=g.ju.any(...this.children.map(((e,t)=>g.ju.map(e.onDidSashReset,(e=>[t,...e])))));this.childrenSashResetDisposable.dispose(),this.childrenSashResetDisposable=t(this._onDidSashReset.fire,this._onDidSashReset);const i=g.ju.any(g.ju.signal(this.splitview.onDidScroll),...this.children.map((e=>e.onDidScroll)));this.onDidScrollDisposable.dispose(),this.onDidScrollDisposable=i(this._onDidScroll.fire,this._onDidScroll)}trySet2x2(e){if(2!==this.children.length||2!==e.children.length)return p.JT.None;if(this.getChildSize(0)!==e.getChildSize(0))return p.JT.None;const[t,i]=this.children,[o,s]=e.children;if(!(t instanceof _i&&i instanceof _i))return p.JT.None;if(!(o instanceof _i&&s instanceof _i))return p.JT.None;0===this.orientation?(i.linkedWidthNode=o.linkedHeightNode=t,t.linkedWidthNode=s.linkedHeightNode=i,s.linkedWidthNode=t.linkedHeightNode=o,o.linkedWidthNode=i.linkedHeightNode=s):(o.linkedWidthNode=i.linkedHeightNode=t,s.linkedWidthNode=t.linkedHeightNode=i,t.linkedWidthNode=s.linkedHeightNode=o,i.linkedWidthNode=o.linkedHeightNode=s);const n=this.splitview.sashes[0],r=e.splitview.sashes[0];return n.linkedSash=r,r.linkedSash=n,this._onDidChange.fire(void 0),e._onDidChange.fire(void 0),(0,p.OF)((()=>{n.linkedSash=r.linkedSash=void 0,t.linkedHeightNode=t.linkedWidthNode=void 0,i.linkedHeightNode=i.linkedWidthNode=void 0,o.linkedHeightNode=o.linkedWidthNode=void 0,s.linkedHeightNode=s.linkedWidthNode=void 0}))}updateSplitviewEdgeSnappingEnablement(){this.splitview.startSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset>0,this.splitview.endSnappingEnabled=this._edgeSnapping||this._absoluteOrthogonalOffset+this._size<this.absoluteOrthogonalSize}dispose(){for(const e of this.children)e.dispose();this._onDidChange.dispose(),this._onDidSashReset.dispose(),this.splitviewSashResetDisposable.dispose(),this.childrenSashResetDisposable.dispose(),this.childrenChangeDisposable.dispose(),this.splitview.dispose()}}class _i{get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}get linkedWidthNode(){return this._linkedWidthNode}set linkedWidthNode(e){this._onDidLinkedWidthNodeChange.input=e?e._onDidViewChange:g.ju.None,this._linkedWidthNode=e,this._onDidSetLinkedNode.fire(void 0)}get linkedHeightNode(){return this._linkedHeightNode}set linkedHeightNode(e){this._onDidLinkedHeightNodeChange.input=e?e._onDidViewChange:g.ju.None,this._linkedHeightNode=e,this._onDidSetLinkedNode.fire(void 0)}constructor(e,t,i,o,s=0){this.view=e,this.orientation=t,this.layoutController=i,this._size=0,this.absoluteOffset=0,this.absoluteOrthogonalOffset=0,this.onDidScroll=g.ju.None,this.onDidSashReset=g.ju.None,this._onDidLinkedWidthNodeChange=new g.ZD,this._linkedWidthNode=void 0,this._onDidLinkedHeightNodeChange=new g.ZD,this._linkedHeightNode=void 0,this._onDidSetLinkedNode=new g.Q5,this.disposables=new p.SL,this._boundarySashes={},this.cachedWidth=0,this.cachedHeight=0,this.cachedTop=0,this.cachedLeft=0,this._orthogonalSize=o,this._size=s;const n=function(e){const[t,i]=g.ju.split(e.onDidChange,y.o8);return g.ju.any(i,g.ju.map(g.ju.latch(g.ju.map(t,(t=>[e.minimumWidth,e.maximumWidth,e.minimumHeight,e.maximumHeight])),Y.fS),(e=>{})))}(e);this._onDidViewChange=g.ju.map(n,(e=>e&&(0===this.orientation?e.width:e.height)),this.disposables),this.onDidChange=g.ju.any(this._onDidViewChange,this._onDidSetLinkedNode.event,this._onDidLinkedWidthNodeChange.event,this._onDidLinkedHeightNodeChange.event)}get width(){return 1===this.orientation?this.orthogonalSize:this.size}get height(){return 1===this.orientation?this.size:this.orthogonalSize}get top(){return 1===this.orientation?this.absoluteOffset:this.absoluteOrthogonalOffset}get left(){return 1===this.orientation?this.absoluteOrthogonalOffset:this.absoluteOffset}get element(){return this.view.element}get minimumWidth(){return this.linkedWidthNode?Math.max(this.linkedWidthNode.view.minimumWidth,this.view.minimumWidth):this.view.minimumWidth}get maximumWidth(){return this.linkedWidthNode?Math.min(this.linkedWidthNode.view.maximumWidth,this.view.maximumWidth):this.view.maximumWidth}get minimumHeight(){return this.linkedHeightNode?Math.max(this.linkedHeightNode.view.minimumHeight,this.view.minimumHeight):this.view.minimumHeight}get maximumHeight(){return this.linkedHeightNode?Math.min(this.linkedHeightNode.view.maximumHeight,this.view.maximumHeight):this.view.maximumHeight}get minimumSize(){return 1===this.orientation?this.minimumHeight:this.minimumWidth}get maximumSize(){return 1===this.orientation?this.maximumHeight:this.maximumWidth}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return this.view.snap}get minimumOrthogonalSize(){return 1===this.orientation?this.minimumWidth:this.minimumHeight}get maximumOrthogonalSize(){return 1===this.orientation?this.maximumWidth:this.maximumHeight}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){var t;this._boundarySashes=e,this.view.setBoundarySashes?.((t=e,1===this.orientation?{left:t.start,right:t.end,top:t.orthogonalStart,bottom:t.orthogonalEnd}:{top:t.start,bottom:t.end,left:t.orthogonalStart,right:t.orthogonalEnd}))}layout(e,t,i){if(this.layoutController.isLayoutEnabled){if(void 0===i)throw new Error("Invalid state");this._size=e,this._orthogonalSize=i.orthogonalSize,this.absoluteOffset=i.absoluteOffset+t,this.absoluteOrthogonalOffset=i.absoluteOrthogonalOffset,this._layout(this.width,this.height,this.top,this.left)}}_layout(e,t,i,o){this.cachedWidth===e&&this.cachedHeight===t&&this.cachedTop===i&&this.cachedLeft===o||(this.cachedWidth=e,this.cachedHeight=t,this.cachedTop=i,this.cachedLeft=o,this.view.layout(e,t,i,o))}setVisible(e){this.view.setVisible?.(e)}dispose(){this.disposables.dispose()}}function Ei(e,t,i){if(e instanceof Si){const o=new Si(wi(e.orientation),e.layoutController,e.styles,e.splitviewProportionalLayout,t,i,e.edgeSnapping);let s=0;for(let n=e.children.length-1;n>=0;n--){const r=e.children[n],a=r instanceof Si?r.orthogonalSize:r.size;let c=0===e.size?0:Math.round(t*a/e.size);s+=c,0===n&&(c+=t-s),o.addChild(Ei(r,i,c),c,0,!0)}return o}return new _i(e.view,wi(e.orientation),e.layoutController,i)}class xi{get root(){return this._root}set root(e){const t=this._root;t&&(this.element.removeChild(t.element),t.dispose()),this._root=e,this.element.appendChild(e.element),this.onDidSashResetRelay.input=e.onDidSashReset,this._onDidChange.input=g.ju.map(e.onDidChange,(()=>{})),this._onDidScroll.input=e.onDidScroll}get width(){return this.root.width}get height(){return this.root.height}get minimumWidth(){return this.root.minimumWidth}get minimumHeight(){return this.root.minimumHeight}get maximumWidth(){return this.root.maximumHeight}get maximumHeight(){return this.root.maximumHeight}get orientation(){return this._root.orientation}get boundarySashes(){return this._boundarySashes}set orientation(e){if(this._root.orientation===e)return;const{size:t,orthogonalSize:i,absoluteOffset:o,absoluteOrthogonalOffset:s}=this._root;this.root=Ei(this._root,i,t),this.root.layout(t,0,{orthogonalSize:i,absoluteOffset:s,absoluteOrthogonalOffset:o,absoluteSize:t,absoluteOrthogonalSize:i}),this.boundarySashes=this.boundarySashes}set boundarySashes(e){var t;this._boundarySashes=e,this.root.boundarySashes=(t=e,1===this.orientation?{start:t.left,end:t.right,orthogonalStart:t.top,orthogonalEnd:t.bottom}:{start:t.top,end:t.bottom,orthogonalStart:t.left,orthogonalEnd:t.right})}set edgeSnapping(e){this.root.edgeSnapping=e}constructor(e={}){this.onDidSashResetRelay=new g.ZD,this._onDidScroll=new g.ZD,this._onDidChange=new g.ZD,this._boundarySashes={},this.disposable2x2=p.JT.None,this.onDidSashReset=this.onDidSashResetRelay.event,this.onDidScroll=this._onDidScroll.event,this.onDidChange=this._onDidChange.event,this.element=(0,w.$)(".monaco-grid-view"),this.styles=e.styles||fi,this.proportionalLayout=void 0===e.proportionalLayout||!!e.proportionalLayout,this.layoutController=new yi(!1),this.root=new Si(0,this.layoutController,this.styles,this.proportionalLayout)}style(e){this.styles=e,this.root.style(e)}layout(e,t,i=0,o=0){this.layoutController.isLayoutEnabled=!0;const[s,n,r,a]=1===this.root.orientation?[t,e,i,o]:[e,t,o,i];this.root.layout(s,0,{orthogonalSize:n,absoluteOffset:r,absoluteOrthogonalOffset:a,absoluteSize:s,absoluteOrthogonalSize:n})}addView(e,t,i){this.disposable2x2.dispose(),this.disposable2x2=p.JT.None;const[o,s]=(0,Y.JH)(i),[n,r]=this.getNode(o);if(r instanceof Si){const i=new _i(e,wi(r.orientation),this.layoutController,r.orthogonalSize);r.addChild(i,t,s)}else{const[,i]=(0,Y.JH)(n),[,a]=(0,Y.JH)(o);let c=0;const d=i.getChildCachedVisibleSize(a);"number"==typeof d&&(c=mi.M.Invisible(d)),i.removeChild(a);const h=new Si(r.orientation,r.layoutController,this.styles,this.proportionalLayout,r.size,r.orthogonalSize,i.edgeSnapping);i.addChild(h,r.size,a);const l=new _i(r.view,i.orientation,this.layoutController,r.size);h.addChild(l,c,0),"number"!=typeof t&&"split"===t.type&&(t=mi.M.Split(0));const u=new _i(e,i.orientation,this.layoutController,r.size);h.addChild(u,t,s)}this.trySet2x2()}removeView(e,t){this.disposable2x2.dispose(),this.disposable2x2=p.JT.None;const[i,o]=(0,Y.JH)(e),[s,n]=this.getNode(i);if(!(n instanceof Si))throw new Error("Invalid location");const r=n.children[o];if(!(r instanceof _i))throw new Error("Invalid location");if(n.removeChild(o,t),0===n.children.length)throw new Error("Invalid grid state");if(n.children.length>1)return this.trySet2x2(),r.view;if(0===s.length){const e=n.children[0];return e instanceof _i||(n.removeChild(0),this.root=e,this.boundarySashes=this.boundarySashes,this.trySet2x2()),r.view}const[,a]=(0,Y.JH)(s),[,c]=(0,Y.JH)(i),d=n.children[0],h=n.isChildVisible(0);n.removeChild(0);const l=a.children.map(((e,t)=>a.getChildSize(t)));if(a.removeChild(c,t),d instanceof Si){l.splice(c,1,...d.children.map((e=>e.size)));for(let e=0;e<d.children.length;e++){const t=d.children[e];a.addChild(t,t.size,c+e)}}else{const e=new _i(d.view,wi(d.orientation),this.layoutController,d.size),t=h?d.orthogonalSize:mi.M.Invisible(d.orthogonalSize);a.addChild(e,t,c)}for(let e=0;e<l.length;e++)a.resizeChild(e,l[e]);return this.trySet2x2(),r.view}moveView(e,t,i){const[,o]=this.getNode(e);if(!(o instanceof Si))throw new Error("Invalid location");o.moveChild(t,i),this.trySet2x2()}swapViews(e,t){const[i,o]=(0,Y.JH)(e),[,s]=this.getNode(i);if(!(s instanceof Si))throw new Error("Invalid from location");const n=s.getChildSize(o),r=s.children[o];if(!(r instanceof _i))throw new Error("Invalid from location");const[a,c]=(0,Y.JH)(t),[,d]=this.getNode(a);if(!(d instanceof Si))throw new Error("Invalid to location");const h=d.getChildSize(c),l=d.children[c];if(!(l instanceof _i))throw new Error("Invalid to location");s===d?s.swapChildren(o,c):(s.removeChild(o),d.removeChild(c),s.addChild(l,n,o),d.addChild(r,h,c)),this.trySet2x2()}resizeView(e,t){const[i,o]=(0,Y.JH)(e),[s,n]=this.getNode(i);if(!(n instanceof Si))throw new Error("Invalid location");if(!t.width&&!t.height)return;const[r,a]=1===n.orientation?[t.width,t.height]:[t.height,t.width];if("number"==typeof a&&s.length>0){const[,e]=(0,Y.JH)(s),[,t]=(0,Y.JH)(i);e.resizeChild(t,a)}"number"==typeof r&&n.resizeChild(o,r),this.trySet2x2()}getViewSize(e){if(!e)return{width:this.root.width,height:this.root.height};const[,t]=this.getNode(e);return{width:t.width,height:t.height}}getViewCachedVisibleSize(e){const[t,i]=(0,Y.JH)(e),[,o]=this.getNode(t);if(!(o instanceof Si))throw new Error("Invalid location");return o.getChildCachedVisibleSize(i)}maximizeViewSize(e){const[t,i]=this.getNode(e);if(!(i instanceof _i))throw new Error("Invalid location");for(let i=0;i<t.length;i++)t[i].resizeChild(e[i],Number.POSITIVE_INFINITY)}isViewSizeMaximized(e){const[t,i]=this.getNode(e);if(!(i instanceof _i))throw new Error("Invalid location");for(let i=0;i<t.length;i++)if(!t[i].isChildSizeMaximized(e[i]))return!1;return!0}distributeViewSizes(e){if(!e)return void this.root.distributeViewSizes(!0);const[,t]=this.getNode(e);if(!(t instanceof Si))throw new Error("Invalid location");t.distributeViewSizes(),this.trySet2x2()}isViewVisible(e){const[t,i]=(0,Y.JH)(e),[,o]=this.getNode(t);if(!(o instanceof Si))throw new Error("Invalid from location");return o.isChildVisible(i)}setViewVisible(e,t){const[i,o]=(0,Y.JH)(e),[,s]=this.getNode(i);if(!(s instanceof Si))throw new Error("Invalid from location");s.setChildVisible(o,t)}getView(e){const t=e?this.getNode(e)[1]:this._root;return this._getViews(t,this.orientation)}static deserialize(e,t,i={}){if("number"!=typeof e.orientation)throw new Error("Invalid JSON: 'orientation' property must be a number.");if("number"!=typeof e.width)throw new Error("Invalid JSON: 'width' property must be a number.");if("number"!=typeof e.height)throw new Error("Invalid JSON: 'height' property must be a number.");if("branch"!==e.root?.type)throw new Error("Invalid JSON: 'root' property must have 'type' value of branch.");const o=e.orientation,s=e.height,n=new xi(i);return n._deserialize(e.root,o,t,s),n}_deserialize(e,t,i,o){this.root=this._deserializeNode(e,t,i,o)}_deserializeNode(e,t,i,o){let s;if("branch"===e.type){const n=e.data.map((o=>({node:this._deserializeNode(o,wi(t),i,e.size),visible:o.visible})));s=new Si(t,this.layoutController,this.styles,this.proportionalLayout,e.size,o,void 0,n)}else s=new _i(i.fromJSON(e.data),t,this.layoutController,o,e.size);return s}_getViews(e,t,i){const o={top:e.top,left:e.left,width:e.width,height:e.height};if(e instanceof _i)return{view:e.view,box:o,cachedVisibleSize:i};const s=[];for(let i=0;i<e.children.length;i++){const o=e.children[i],n=e.getChildCachedVisibleSize(i);s.push(this._getViews(o,wi(t),n))}return{children:s,box:o}}getNode(e,t=this.root,i=[]){if(0===e.length)return[i,t];if(!(t instanceof Si))throw new Error("Invalid location");const[o,...s]=e;if(o<0||o>=t.children.length)throw new Error("Invalid location");const n=t.children[o];return i.push(t),this.getNode(s,n,i)}trySet2x2(){if(this.disposable2x2.dispose(),this.disposable2x2=p.JT.None,2!==this.root.children.length)return;const[e,t]=this.root.children;e instanceof Si&&t instanceof Si&&(this.disposable2x2=e.trySet2x2(t))}getViewMap(e,t){t||(t=this.root),t instanceof Si?t.children.forEach((t=>this.getViewMap(e,t))):e.set(t.view,t.element)}dispose(){this.onDidSashResetRelay.dispose(),this.root.dispose(),this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element)}}function ki(e){return!!e.children}function Di(e,t){if(0===t.length)return e;if(!ki(e))throw new Error("Invalid location");const[i,...o]=t;return Di(e.children[i],o)}function Ai(e,t){const i=Ti(t);return{offset:0===t?e.top:3===t?e.left+e.width:1===t?e.top+e.height:e.left,range:{start:1===i?e.top:e.left,end:1===i?e.top+e.height:e.left+e.width}}}function Ii(e,t){return t.length%2==0?wi(e):e}function Ti(e){return 0===e||1===e?0:1}function Vi(e,t,i){if(Ii(e,t)===Ti(i)){let[e,o]=(0,Y.JH)(t);return 3!==i&&1!==i||(o+=1),[...e,o]}{const e=3===i||1===i?1:0;return[...t,e]}}function Li(e){const t=e.parentElement;if(!t)throw new Error("Invalid grid element");if(/\bmonaco-grid-view\b/.test(t.className))return[];const i=function(e){const t=e.parentElement;if(!t)throw new Error("Invalid grid element");let i=t.firstElementChild,o=0;for(;i!==e&&i!==t.lastElementChild&&i;)i=i.nextElementSibling,o++;return o}(t);return[...Li(t.parentElement.parentElement.parentElement.parentElement),i]}var Ri;!function(e){e.Distribute={type:"distribute"},e.Split={type:"split"},e.Auto={type:"auto"},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(Ri||(Ri={}));class Oi extends p.JT{get orientation(){return this.gridview.orientation}set orientation(e){this.gridview.orientation=e}get width(){return this.gridview.width}get height(){return this.gridview.height}get minimumWidth(){return this.gridview.minimumWidth}get minimumHeight(){return this.gridview.minimumHeight}get maximumWidth(){return this.gridview.maximumWidth}get maximumHeight(){return this.gridview.maximumHeight}get boundarySashes(){return this.gridview.boundarySashes}set boundarySashes(e){this.gridview.boundarySashes=e}set edgeSnapping(e){this.gridview.edgeSnapping=e}get element(){return this.gridview.element}constructor(e,t={}){super(),this.views=new Map,this.didLayout=!1,e instanceof xi?(this.gridview=e,this.gridview.getViewMap(this.views)):this.gridview=new xi(t),this._register(this.gridview),this._register(this.gridview.onDidSashReset(this.onDidSashReset,this)),e instanceof xi||this._addView(e,0,[0]),this.onDidChange=this.gridview.onDidChange,this.onDidScroll=this.gridview.onDidScroll}style(e){this.gridview.style(e)}layout(e,t,i=0,o=0){this.gridview.layout(e,t,i,o),this.didLayout=!0}addView(e,t,i,o){if(this.views.has(e))throw new Error("Can't add same view twice");const s=Ti(o);1===this.views.size&&this.orientation!==s&&(this.orientation=s);const n=this.getViewLocation(i),r=Vi(this.gridview.orientation,n,o);let a;if("number"==typeof t)a=t;else if("split"===t.type){const[,e]=(0,Y.JH)(n);a=mi.M.Split(e)}else if("distribute"===t.type)a=mi.M.Distribute;else if("auto"===t.type){const[,e]=(0,Y.JH)(n);a=mi.M.Auto(e)}else a=t;this._addView(e,a,r)}addViewAt(e,t,i){if(this.views.has(e))throw new Error("Can't add same view twice");let o;o="number"==typeof t?t:"distribute"===t.type?mi.M.Distribute:t,this._addView(e,o,i)}_addView(e,t,i){this.views.set(e,e.element),this.gridview.addView(e,t,i)}removeView(e,t){if(1===this.views.size)throw new Error("Can't remove last view");const i=this.getViewLocation(e);let o;if("distribute"===t?.type)o=mi.M.Distribute;else if("auto"===t?.type){const e=i[i.length-1];o=mi.M.Auto(0===e?1:e-1)}this.gridview.removeView(i,o),this.views.delete(e)}moveView(e,t,i,o){const s=this.getViewLocation(e),[n,r]=(0,Y.JH)(s),a=this.getViewLocation(i),c=Vi(this.gridview.orientation,a,o),[d,h]=(0,Y.JH)(c);(0,Y.fS)(n,d)?this.gridview.moveView(n,r,h):(this.removeView(e,"number"==typeof t?void 0:t),this.addView(e,t,i,o))}moveViewTo(e,t){const i=this.getViewLocation(e),[o,s]=(0,Y.JH)(i),[n,r]=(0,Y.JH)(t);if((0,Y.fS)(o,n))this.gridview.moveView(o,s,r);else{const o=this.getViewSize(e),s=Ii(this.gridview.orientation,i),n=this.getViewCachedVisibleSize(e),r=void 0===n?1===s?o.width:o.height:Ri.Invisible(n);this.removeView(e),this.addViewAt(e,r,t)}}swapViews(e,t){const i=this.getViewLocation(e),o=this.getViewLocation(t);return this.gridview.swapViews(i,o)}resizeView(e,t){const i=this.getViewLocation(e);return this.gridview.resizeView(i,t)}isViewSizeMaximized(e){const t=this.getViewLocation(e);return this.gridview.isViewSizeMaximized(t)}getViewSize(e){if(!e)return this.gridview.getViewSize();const t=this.getViewLocation(e);return this.gridview.getViewSize(t)}getViewCachedVisibleSize(e){const t=this.getViewLocation(e);return this.gridview.getViewCachedVisibleSize(t)}maximizeViewSize(e){const t=this.getViewLocation(e);this.gridview.maximizeViewSize(t)}distributeViewSizes(){this.gridview.distributeViewSizes()}isViewVisible(e){const t=this.getViewLocation(e);return this.gridview.isViewVisible(t)}setViewVisible(e,t){const i=this.getViewLocation(e);this.gridview.setViewVisible(i,t)}getViews(){return this.gridview.getView()}getNeighborViews(e,t,i=!1){if(!this.didLayout)throw new Error("Can't call getNeighborViews before first layout");const o=this.getViewLocation(e),s=this.getViews(),n=Di(s,o);let r=Ai(n.box,t);return i&&(0===t&&0===n.box.top?r={offset:s.box.top+s.box.height,range:r.range}:3===t&&n.box.left+n.box.width===s.box.width||1===t&&n.box.top+n.box.height===s.box.height?r={offset:0,range:r.range}:2===t&&0===n.box.left&&(r={offset:s.box.left+s.box.width,range:r.range})),function(e,t,i){const o=[];return function e(t,i,s){if(ki(t))for(const o of t.children)e(o,i,s);else{const{offset:e,range:a}=Ai(t.box,i);e!==s.offset||(n=a,r=s.range,n.start>=r.end||r.start>=n.end)||o.push(t)}var n,r}(e,t,i),o}(s,function(e){switch(e){case 0:return 1;case 1:return 0;case 2:return 3;case 3:return 2}}(t),r).map((e=>e.view))}getViewLocation(e){const t=this.views.get(e);if(!t)throw new Error("View not found");return Li(t)}onDidSashReset(e){const t=e=>{const t=this.gridview.getView(e);if(ki(t))return!1;const i=Ii(this.orientation,e),o=1===i?t.view.preferredWidth:t.view.preferredHeight;if("number"!=typeof o)return!1;const s=1===i?{width:Math.round(o)}:{height:Math.round(o)};return this.gridview.resizeView(e,s),!0};if(t(e))return;const[i,o]=(0,Y.JH)(e);t([...i,o+1])||this.gridview.distributeViewSizes(i)}}class Ni extends Oi{constructor(){super(...arguments),this.initialLayoutContext=!0}static serializeNode(e,t){const i=0===t?e.box.width:e.box.height;return ki(e)?{type:"branch",data:e.children.map((e=>Ni.serializeNode(e,wi(t)))),size:i}:"number"==typeof e.cachedVisibleSize?{type:"leaf",data:e.view.toJSON(),size:e.cachedVisibleSize,visible:!1}:{type:"leaf",data:e.view.toJSON(),size:i}}static deserialize(e,t,i={}){if("number"!=typeof e.orientation)throw new Error("Invalid JSON: 'orientation' property must be a number.");if("number"!=typeof e.width)throw new Error("Invalid JSON: 'width' property must be a number.");if("number"!=typeof e.height)throw new Error("Invalid JSON: 'height' property must be a number.");const o=xi.deserialize(e,t,i);return new Ni(o,i)}static from(e,t={}){return Ni.deserialize(Wi(e),{fromJSON:e=>e},t)}serialize(){return{root:Ni.serializeNode(this.getViews(),this.orientation),orientation:this.orientation,width:this.width,height:this.height}}layout(e,t,i=0,o=0){super.layout(e,t,i,o),this.initialLayoutContext&&(this.initialLayoutContext=!1,this.gridview.trySet2x2())}}function Mi(e){return!!e.groups}function Pi(e,t){if(!t&&e.groups&&e.groups.length<=1&&(e.groups=void 0),!Mi(e))return;let i=0,o=0;for(const t of e.groups)Pi(t,!1),t.size&&(i+=t.size,o++);const s=(o>0?i:1)/(e.groups.length-o);for(const t of e.groups)t.size||(t.size=s)}function Bi(e){return Mi(e)?{type:"branch",data:e.groups.map((e=>Bi(e))),size:e.size}:{type:"leaf",data:e.data,size:e.size}}function Fi(e,t){if("branch"===e.type){const i=e.data.map((e=>Fi(e,wi(t))));return 0===t?{width:e.size||(0===i.length?void 0:Math.max(...i.map((e=>e.width||0)))),height:0===i.length?void 0:i.reduce(((e,t)=>e+(t.height||0)),0)}:{width:0===i.length?void 0:i.reduce(((e,t)=>e+(t.width||0)),0),height:e.size||(0===i.length?void 0:Math.max(...i.map((e=>e.height||0))))}}return{width:0===t?e.size:void 0,height:0===t?void 0:e.size}}function Wi(e){Pi(e,!0);const t=Bi(e),{width:i,height:o}=Fi(t,e.orientation);return{root:t,orientation:e.orientation,width:i||1,height:o||1}}var Hi=i(30969);(0,d.Z)('.monaco-workbench .part.editor>.content .editor-group-container{height:100%}.monaco-workbench .part.editor>.content .editor-group-container.empty{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container.empty.active,.monaco-workbench .part.editor>.content .editor-group-container.empty.dragged-over{opacity:1}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty.active:focus{outline:1px solid var(--vscode-editorGroup-focusedEmptyBorder);outline-offset:-2px}.monaco-workbench .part.editor>.content.empty .editor-group-container.empty.active:focus{outline:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;margin:auto;max-width:290px}.monaco-workbench .part.editor>.content .editor-group-container:not(.empty)>.editor-group-watermark{display:none}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-watermark{height:calc(100% - 70px);max-width:200px}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.letterpress{aspect-ratio:1/1;background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4xIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=");background-position-x:center;background-repeat:no-repeat;background-size:contain;max-height:100%;width:100%}.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4zIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=")}.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiNkOWQ5ZDkiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==")}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiMzQzNDM0MiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==")}.monaco-workbench .part.editor>.content .editor-group-container.max-height-478px>.editor-group-watermark>.shortcuts,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container>.editor-group-watermark>.shortcuts{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts>.watermark-box{border-collapse:separate;border-spacing:11px 17px;display:inline-table}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dl{cursor:default;display:table-row;opacity:.8}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{letter-spacing:.04em;text-align:right}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd{text-align:left}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd,.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{display:table-cell;vertical-align:middle}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dl,.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{color:rgba(0,0,0,.68)}.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dl,.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dt{color:hsla(0,0%,100%,.6)}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dt,.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dt{color:var(--vscode-editor-foreground)}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dl,.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dl{color:var(--vscode-editor-foreground);opacity:1}.monaco-workbench .part.editor>.content .editor-group-container>.title{box-sizing:border-box;overflow:hidden;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title:not(.tabs){display:flex;flex-wrap:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title.title-border-bottom:after{background-color:var(--title-border-bottom-color);bottom:0;content:"";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container.empty>.title{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar{display:none;height:35px}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-container-toolbar{display:block}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .actions-container{justify-content:flex-end}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.empty>.editor-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-container>.editor-instance{height:100%}.monaco-workbench .part.editor>.content .grid-view-container{height:100%;width:100%}',{});var zi=i(81401),Gi=i(41122),Ui=i(52062);(0,d.Z)('.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container{display:flex;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.tabs-border-bottom:after{background-color:var(--tabs-border-bottom-color);bottom:0;content:"";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element{flex:1}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element .scrollbar{cursor:default;z-index:11}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container{display:flex;height:35px;scrollbar-width:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.scroll{overflow:scroll!important}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container{flex-wrap:wrap;height:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container::-webkit-scrollbar{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab{box-sizing:border-box;cursor:pointer;display:flex;height:35px;padding-left:10px;position:relative;white-space:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab:last-child{margin-right:var(--last-tab-margin-right)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.last-in-row:not(:last-child){border-right:0!important}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.tab-actions-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.tab-actions-right,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.tab-actions-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.tab-actions-right{padding-left:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit{flex-shrink:0;min-width:fit-content;width:120px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed{flex:1 0 0;max-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-max-width,160px));min-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-min-width,50px))}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.last-in-row{min-width:calc(var(--tab-sizing-current-width, var(--tab-sizing-fixed-min-width, 50px)) - 1px)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.sizing-fit.last-in-row:not(:last-child){flex-grow:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink{flex-basis:0;flex-grow:1;max-width:fit-content;min-width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{flex-basis:0;flex-grow:0;position:sticky;z-index:8}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact{max-width:38px;min-width:38px;width:38px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{max-width:80px;min-width:80px;width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-shrink{position:static}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-off:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-off:after{content:"";display:flex;flex:0;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left{min-width:80px;padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dragged{transform:translateZ(0)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dragged-over div{pointer-events:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-left{flex-direction:row-reverse;padding-left:0;padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-top-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container{display:block;left:0;pointer-events:none;position:absolute;width:100%}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container{background-color:var(--tab-border-top-color);height:1px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container{background-color:var(--tab-border-bottom-color);bottom:0;height:1px;z-index:10}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container{background-color:var(--tab-dirty-border-top-color);height:2px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label{line-height:35px;margin-bottom:auto;margin-top:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink .tab-label{position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label>.monaco-icon-label-container:after{bottom:1px;content:"";height:calc(100% - 2px);opacity:1;padding:0;position:absolute;right:0;top:1px;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed:focus>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink:focus>.tab-label>.monaco-icon-label-container:after{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label.tab-label-has-badge:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label.tab-label-has-badge:after{padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky-compact:not(.has-icon) .monaco-icon-label{text-align:center}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label>.monaco-icon-label-container{overflow:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{flex:none;text-overflow:clip}.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions{margin-bottom:auto;margin-top:auto;width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions>.monaco-action-bar{width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions{flex:0;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions:focus-within,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions:focus-within{overflow:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.sticky-compact>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off:not(.dirty):not(.sticky)>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label:focus{opacity:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .actions-container{justify-content:center}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label.codicon{color:inherit;font-size:16px;height:16px;padding:2px;width:16px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before{content:"\\ebb2"}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before{content:"\\ea71"}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:hover>.tab-actions .action-label{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .action-label{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off{padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-off:not(.sticky-compact){padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.dirty-border-top>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.dirty:not(.dirty-border-top):not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.sticky:not(.sticky-compact){padding-right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off>.tab-actions{pointer-events:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control{cursor:default;flex:1 100%;height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-icon-label{height:22px;line-height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-icon-label:before{height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .outline-element-icon{height:22px;line-height:22px;padding-right:3px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item{max-width:80%}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:before{align-items:center;display:flex;height:22px;justify-content:center;width:16px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child .codicon:last-child{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions{cursor:default;flex:initial;height:35px;padding:0 8px 0 4px}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .editor-actions{bottom:0;position:absolute;right:0}',{});var Ki=i(83240),$i=i(66307);(0,d.Z)(".monaco-workbench .part.editor>.content .editor-group-container>.title{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label{flex:1;white-space:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a{font-size:13px}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label span,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label h2{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before{height:35px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .monaco-icon-label:after,.monaco-workbench .part.editor>.content .editor-group-container>.title.tabs .monaco-icon-label:after{margin-right:0}.monaco-editor-group-drag-image{border-radius:10px;display:inline-block;font-size:12px;padding:1px 7px;position:absolute}",{});var ji=i(23547),Xi=i(23627),Ji=i(59407),Yi=i(64117),Qi=i(93379),qi=i.n(Qi),Zi=i(7795),eo=i.n(Zi),to=i(90569),io=i.n(to),oo=i(3565),so=i.n(oo),no=i(19216),ro=i.n(no),ao=i(44589),co=i.n(ao),ho=i(43552),lo={};lo.styleTagTransform=co(),lo.setAttributes=so(),lo.insert=io().bind(null,"head"),lo.domAPI=eo(),lo.insertStyleElement=ro(),qi()(ho.Z,lo),ho.Z&&ho.Z.locals&&ho.Z.locals;class uo{dispose(){}}class po{constructor(e,t,i,o){this._disposables=new p.SL,this._onDidSelectItem=new g.Q5,this._onDidFocusItem=new g.Q5,this._onDidChangeFocus=new g.Q5,this.onDidSelectItem=this._onDidSelectItem.event,this.onDidFocusItem=this._onDidFocusItem.event,this.onDidChangeFocus=this._onDidChangeFocus.event,this._items=new Array,this._nodes=new Array,this._freeNodes=new Array,this._enabled=!0,this._focusedItemIdx=-1,this._selectedItemIdx=-1,this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs",this._domNode.tabIndex=0,this._domNode.setAttribute("role","list"),this._scrollable=new Yi.s$(this._domNode,{vertical:2,horizontal:1,horizontalScrollbarSize:t,useShadows:!1,scrollYToX:!0}),this._separatorIcon=i,this._disposables.add(this._scrollable),this._disposables.add(w.mu(this._domNode,"click",(e=>this._onClick(e)))),e.appendChild(this._scrollable.getDomNode());const s=w.dS(this._domNode);this._style(s,o);const n=w.go(this._domNode);this._disposables.add(n),this._disposables.add(n.onDidBlur((e=>this._onDidChangeFocus.fire(!1)))),this._disposables.add(n.onDidFocus((e=>this._onDidChangeFocus.fire(!0))))}setHorizontalScrollbarSize(e){this._scrollable.updateOptions({horizontalScrollbarSize:e})}dispose(){var e;this._disposables.dispose(),null===(e=this._pendingLayout)||void 0===e||e.dispose(),this._onDidSelectItem.dispose(),this._onDidFocusItem.dispose(),this._onDidChangeFocus.dispose(),this._domNode.remove(),this._nodes.length=0,this._freeNodes.length=0}layout(e){var t;e&&w.Ro.equals(e,this._dimension)||(null===(t=this._pendingLayout)||void 0===t||t.dispose(),this._pendingLayout=e?this._updateDimensions(e):this._updateScrollbar())}_updateDimensions(e){const t=new p.SL;return t.add(w.Pj((()=>{this._dimension=e,this._domNode.style.width=`${e.width}px`,this._domNode.style.height=`${e.height}px`,t.add(this._updateScrollbar())}))),t}_updateScrollbar(){return w.L8((()=>{w.L8((()=>{this._scrollable.setRevealOnScroll(!1),this._scrollable.scanDomNode(),this._scrollable.setRevealOnScroll(!0)}))}))}_style(e,t){let i="";t.breadcrumbsBackground&&(i+=`.monaco-breadcrumbs { background-color: ${t.breadcrumbsBackground}}`),t.breadcrumbsForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item { color: ${t.breadcrumbsForeground}}\n`),t.breadcrumbsFocusForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused { color: ${t.breadcrumbsFocusForeground}}\n`),t.breadcrumbsFocusAndSelectionForeground&&(i+=`.monaco-breadcrumbs .monaco-breadcrumb-item.focused.selected { color: ${t.breadcrumbsFocusAndSelectionForeground}}\n`),t.breadcrumbsHoverForeground&&(i+=`.monaco-breadcrumbs:not(.disabled\t) .monaco-breadcrumb-item:hover:not(.focused):not(.selected) { color: ${t.breadcrumbsHoverForeground}}\n`),e.innerText=i}setEnabled(e){this._enabled=e,this._domNode.classList.toggle("disabled",!this._enabled)}domFocus(){const e=this._focusedItemIdx>=0?this._focusedItemIdx:this._items.length-1;e>=0&&e<this._items.length?this._focus(e,void 0):this._domNode.focus()}isDOMFocused(){let e=document.activeElement;for(;e;){if(this._domNode===e)return!0;e=e.parentElement}return!1}getFocused(){return this._items[this._focusedItemIdx]}setFocused(e,t){this._focus(this._items.indexOf(e),t)}focusPrev(e){this._focusedItemIdx>0&&this._focus(this._focusedItemIdx-1,e)}focusNext(e){this._focusedItemIdx+1<this._nodes.length&&this._focus(this._focusedItemIdx+1,e)}_focus(e,t){this._focusedItemIdx=-1;for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];t!==e?i.classList.remove("focused"):(this._focusedItemIdx=t,i.classList.add("focused"),i.focus())}this._reveal(this._focusedItemIdx,!0),this._onDidFocusItem.fire({type:"focus",item:this._items[this._focusedItemIdx],node:this._nodes[this._focusedItemIdx],payload:t})}reveal(e){const t=this._items.indexOf(e);t>=0&&this._reveal(t,!1)}revealLast(){this._reveal(this._items.length-1,!1)}_reveal(e,t){if(e<0||e>=this._nodes.length)return;const i=this._nodes[e];if(!i)return;const{width:o}=this._scrollable.getScrollDimensions(),{scrollLeft:s}=this._scrollable.getScrollPosition();(!t||i.offsetLeft>s+o||i.offsetLeft<s)&&(this._scrollable.setRevealOnScroll(!1),this._scrollable.setScrollPosition({scrollLeft:i.offsetLeft}),this._scrollable.setRevealOnScroll(!0))}getSelection(){return this._items[this._selectedItemIdx]}setSelection(e,t){this._select(this._items.indexOf(e),t)}_select(e,t){this._selectedItemIdx=-1;for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];t!==e?i.classList.remove("selected"):(this._selectedItemIdx=t,i.classList.add("selected"))}this._onDidSelectItem.fire({type:"select",item:this._items[this._selectedItemIdx],node:this._nodes[this._selectedItemIdx],payload:t})}getItems(){return this._items}setItems(e){let t,i=[];try{t=(0,Y.Mh)(this._items,e,((e,t)=>e.equals(t))),i=this._items.splice(t,this._items.length-t,...e.slice(t)),this._render(t),(0,p.B9)(i),this._focus(-1,void 0)}catch(o){const s=new Error(`BreadcrumbsItem#setItems: newItems: ${e.length}, prefix: ${t}, removed: ${i.length}`);throw s.name=o.name,s.stack=o.stack,s}}_render(e){let t=!1;for(;e<this._items.length&&e<this._nodes.length;e++){const i=this._items[e],o=this._nodes[e];this._renderItem(i,o),t=!0}for(;e<this._nodes.length;){const e=this._nodes.pop();e&&(this._freeNodes.push(e),e.remove(),t=!0)}for(;e<this._items.length;e++){const i=this._items[e],o=this._freeNodes.length>0?this._freeNodes.pop():document.createElement("div");o&&(this._renderItem(i,o),this._domNode.appendChild(o),this._nodes.push(o),t=!0)}t&&this.layout(void 0)}_renderItem(e,t){w.PO(t),t.className="";try{e.render(t)}catch(e){t.innerText="<<RENDER ERROR>>",console.error(e)}t.tabIndex=-1,t.setAttribute("role","listitem"),t.classList.add("monaco-breadcrumb-item");const i=w.$(q.kS.asCSSSelector(this._separatorIcon));t.appendChild(i)}_onClick(e){if(this._enabled)for(let t=e.target;t;t=t.parentElement){const i=this._nodes.indexOf(t);if(i>=0){this._focus(i,e),this._select(i,e);break}}}}(0,d.Z)(".monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .monaco-icon-label{text-decoration-line:underline}.monaco-workbench .monaco-breadcrumb-item.shows-symbol-icon .codicon[class*=codicon-symbol-]{padding-right:6px}.monaco-workbench .monaco-breadcrumbs-picker .arrow{border-style:solid;position:absolute;width:0}.monaco-workbench .monaco-breadcrumbs-picker .picker-item{flex:1;line-height:22px}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree{display:flex;flex-direction:column;height:100%;overflow:hidden}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.input{box-sizing:border-box;height:36px;padding:5px 9px;position:relative}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.tree{height:calc(100% - 36px)}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.input{display:none}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.tree{height:100%}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree .monaco-highlighted-label .highlight{font-weight:700}",{});var go=i(32414),mo=i(66663),vo=i(30286);class bo{constructor(e,t){this.uri=e,this.kind=t}}class fo{constructor(e,t){this.element=e,this.outline=t}}let wo=class{constructor(e,t,i,o,s){this.resource=e,this._workspaceService=o,this._outlineService=s,this._disposables=new p.SL,this._currentOutline=new p.XK,this._outlineDisposables=new p.SL,this._onDidUpdate=new g.Q5,this.onDidUpdate=this._onDidUpdate.event,this._cfgFilePath=Ji.Ny.FilePath.bindTo(i),this._cfgSymbolPath=Ji.Ny.SymbolPath.bindTo(i),this._disposables.add(this._cfgFilePath.onDidChange((e=>this._onDidUpdate.fire(this)))),this._disposables.add(this._cfgSymbolPath.onDidChange((e=>this._onDidUpdate.fire(this)))),this._workspaceService.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders,this,this._disposables),this._fileInfo=this._initFilePathInfo(e),t&&(this._bindToEditor(t),this._disposables.add(s.onDidChange((()=>this._bindToEditor(t)))),this._disposables.add(t.onDidChangeControl((()=>this._bindToEditor(t))))),this._onDidUpdate.fire(this)}dispose(){this._disposables.dispose(),this._cfgFilePath.dispose(),this._cfgSymbolPath.dispose(),this._currentOutline.dispose(),this._outlineDisposables.dispose(),this._onDidUpdate.dispose()}isRelative(){return Boolean(this._fileInfo.folder)}getElements(){let e=[];if("on"===this._cfgFilePath.getValue()?e=e.concat(this._fileInfo.path):"last"===this._cfgFilePath.getValue()&&this._fileInfo.path.length>0&&(e=e.concat(this._fileInfo.path.slice(-1))),"off"===this._cfgSymbolPath.getValue())return e;if(!this._currentOutline.value)return e;const t=this._currentOutline.value.config.breadcrumbsDataSource.getBreadcrumbElements();for(let i="last"===this._cfgSymbolPath.getValue()&&t.length>0?t.length-1:0;i<t.length;i++)e.push(new fo(t[i],this._currentOutline.value));return 0!==t.length||this._currentOutline.value.isEmpty||e.push(new fo(this._currentOutline.value,this._currentOutline.value)),e}_initFilePathInfo(e){if((0,Kt.Gs)(e,mo.lg.untitled,mo.lg.data))return{folder:void 0,path:[]};const t={folder:(0,y.f6)(this._workspaceService.getWorkspaceFolder(e)),path:[]};let i=e;for(;i&&"/"!==i.path&&(!t.folder||!(0,Q.Xy)(t.folder.uri,i));){t.path.unshift(new bo(i,0===t.path.length?ft.RR.FILE:ft.RR.FOLDER));const e=i.path.length;if(i=(0,Q.XX)(i),i.path.length===e)break}return t.folder&&3===this._workspaceService.getWorkbenchState()&&t.path.unshift(new bo(t.folder.uri,ft.RR.ROOT_FOLDER)),t}_onDidChangeWorkspaceFolders(){this._fileInfo=this._initFilePathInfo(this.resource),this._onDidUpdate.fire(this)}_bindToEditor(e){const t=new ai.A;this._currentOutline.clear(),this._outlineDisposables.clear(),this._outlineDisposables.add((0,p.OF)((()=>t.dispose(!0)))),this._outlineService.createOutline(e,2,t.token).then((e=>{t.token.isCancellationRequested&&(e?.dispose(),e=void 0),this._currentOutline.value=e,this._onDidUpdate.fire(this),e&&this._outlineDisposables.add(e.onDidChange((()=>this._onDidUpdate.fire(this))))})).catch((e=>{this._onDidUpdate.fire(this),(0,m.dL)(e)}))}};wo=(0,o.g)([(0,o.f)(2,Ee.Ui),(0,o.f)(3,gt.ec),(0,o.f)(4,vo.h)],wo);var yo=i(82696),Co=i(75392),So=i(14118),_o=i(82663),Eo=i(71765);let xo=class{constructor(e,t,i,o,s){this.resource=t,this._instantiationService=i,this._themeService=o,this._configurationService=s,this._disposables=new p.SL,this._fakeEvent=new UIEvent("fakeEvent"),this._onWillPickElement=new g.Q5,this.onWillPickElement=this._onWillPickElement.event,this._previewDispoables=new p.XK,this._domNode=document.createElement("div"),this._domNode.className="monaco-breadcrumbs-picker show-file-icons",e.appendChild(this._domNode)}dispose(){this._disposables.dispose(),this._previewDispoables.dispose(),this._onWillPickElement.dispose(),this._domNode.remove(),setTimeout((()=>this._tree.dispose()),0)}async show(e,t,i,o,s){const n=this._themeService.getColorTheme().getColor(P.SbC);this._arrow=document.createElement("div"),this._arrow.className="arrow",this._arrow.style.borderColor=`transparent transparent ${n?n.toString():""}`,this._domNode.appendChild(this._arrow),this._treeContainer=document.createElement("div"),this._treeContainer.style.background=n?n.toString():"",this._treeContainer.style.paddingTop="2px",this._treeContainer.style.borderRadius="3px",this._treeContainer.style.boxShadow=`0 0 8px 2px ${this._themeService.getColorTheme().getColor(P.rh)}`,this._treeContainer.style.border=`1px solid ${this._themeService.getColorTheme().getColor(P.A42)}`,this._domNode.appendChild(this._treeContainer),this._layoutInfo={maxHeight:t,width:i,arrowSize:o,arrowOffset:s,inputHeight:0},this._tree=this._createTree(this._treeContainer,e),this._disposables.add(this._tree.onDidOpen((async e=>{const{element:t,editorOptions:i,sideBySide:o}=e;await this._revealElement(t,{...i,preserveFocus:!1},o)}))),this._disposables.add(this._tree.onDidChangeFocus((e=>{this._previewDispoables.value=this._previewElement(e.elements[0])}))),this._disposables.add(this._tree.onDidChangeContentHeight((()=>{this._layout()}))),this._domNode.focus();try{await this._setInput(e),this._layout()}catch(e){(0,m.dL)(e)}}_layout(){const e=2*this._layoutInfo.arrowSize,t=Math.min(this._layoutInfo.maxHeight-e,this._tree.contentHeight),i=t+e;this._domNode.style.height=`${i}px`,this._domNode.style.width=`${this._layoutInfo.width}px`,this._arrow.style.top=`-${2*this._layoutInfo.arrowSize}px`,this._arrow.style.borderWidth=`${this._layoutInfo.arrowSize}px`,this._arrow.style.marginLeft=`${this._layoutInfo.arrowOffset}px`,this._treeContainer.style.height=`${t}px`,this._treeContainer.style.width=`${this._layoutInfo.width}px`,this._tree.layout(t,this._layoutInfo.width)}restoreViewState(){}};xo=(0,o.g)([(0,o.f)(2,c.TG),(0,o.f)(3,M.XE),(0,o.f)(4,Ee.Ui)],xo);class ko{getHeight(e){return 22}getTemplateId(e){return"FileStat"}}class Do{getId(e){return J.ov.isUri(e)?e.toString():(0,gt.MF)(e)?e.id:(0,gt.dV)(e)?e.uri.toString():e.resource.toString()}}let Ao=class{constructor(e){this._fileService=e}hasChildren(e){return J.ov.isUri(e)||(0,gt.MF)(e)||(0,gt.dV)(e)||e.isDirectory}async getChildren(e){if((0,gt.MF)(e))return e.folders;let t;return t=(0,gt.dV)(e)?e.uri:J.ov.isUri(e)?e:e.resource,(await this._fileService.resolve(t)).children??[]}};Ao=(0,o.g)([(0,o.f)(0,ft.sn)],Ao);let Io=class{constructor(e,t){this._labels=e,this._configService=t,this.templateId="FileStat"}renderTemplate(e){return this._labels.create(e,{supportHighlights:!0})}renderElement(e,t,i){const o=this._configService.getValue("explorer.decorations"),{element:s}=e;let n,r;(0,gt.dV)(s)?(n=s.uri,r=ft.RR.ROOT_FOLDER):(n=s.resource,r=s.isDirectory?ft.RR.FOLDER:ft.RR.FILE),i.setFile(n,{fileKind:r,hidePath:!0,fileDecorations:o,matches:(0,Co.mB)(e.filterData),extraClasses:["picker-item"]})}disposeTemplate(e){e.dispose()}};Io=(0,o.g)([(0,o.f)(1,Ee.Ui)],Io);class To{getKeyboardNavigationLabel(e){return e.name}}class Vo{getWidgetAriaLabel(){return(0,l.NC)("breadcrumbs","Breadcrumbs")}getAriaLabel(e){return e.name}}let Lo=class{constructor(e,t){this._workspaceService=e,this._cachedExpressions=new Map,this._disposables=new p.SL;const i=Ji.Ny.FileExcludes.bindTo(t),o=()=>{e.getWorkspace().folders.forEach((e=>{const t=i.getValue({resource:e.uri});if(!t)return;const o={};for(const i in t)"boolean"==typeof t[i]&&(o[0!==i.indexOf("**/")?_o.KR.join(e.uri.path,i):i]=t[i]);this._cachedExpressions.set(e.uri.toString(),So.Qc(o))}))};o(),this._disposables.add(i),this._disposables.add(i.onDidChange(o)),this._disposables.add(e.onDidChangeWorkspaceFolders(o))}dispose(){this._disposables.dispose()}filter(e,t){if((0,gt.dV)(e))return!0;const i=this._workspaceService.getWorkspaceFolder(e.resource);return!i||!this._cachedExpressions.has(i.uri.toString())||!this._cachedExpressions.get(i.uri.toString())((0,_o.Gf)(i.uri.path,e.resource.path),(0,Q.EZ)(e.resource))}};Lo=(0,o.g)([(0,o.f)(0,gt.ec),(0,o.f)(1,Ee.Ui)],Lo);class Ro{compare(e,t){return(0,gt.dV)(e)&&(0,gt.dV)(t)?e.index-t.index:e.isDirectory===t.isDirectory?(0,yo.Jq)(e.name,t.name):e.isDirectory?-1:1}}let Oo=class extends xo{constructor(e,t,i,o,s,n,r){super(e,t,i,o,s),this._workspaceService=n,this._editorService=r}_createTree(e){this._treeContainer.classList.add("file-icon-themable-tree"),this._treeContainer.classList.add("show-file-icons");const t=e=>{this._treeContainer.classList.toggle("align-icons-and-twisties",e.hasFileIcons&&!e.hasFolderIcons),this._treeContainer.classList.toggle("hide-arrows",!0===e.hidesExplorerArrows)};this._disposables.add(this._themeService.onDidFileIconThemeChange(t)),t(this._themeService.getFileIconTheme());const i=this._instantiationService.createInstance($i.RX,$i.hh);return this._disposables.add(i),this._instantiationService.createInstance(go.ls,"BreadcrumbsFilePicker",e,new ko,[this._instantiationService.createInstance(Io,i)],this._instantiationService.createInstance(Ao),{multipleSelectionSupport:!1,sorter:new Ro,filter:this._instantiationService.createInstance(Lo),identityProvider:new Do,keyboardNavigationLabelProvider:new To,accessibilityProvider:this._instantiationService.createInstance(Vo),showNotFoundMessage:!1,overrideStyles:{listBackground:P.SbC}})}async _setInput(e){const{uri:t,kind:i}=e;let o;o=i===ft.RR.ROOT_FOLDER?this._workspaceService.getWorkspace():(0,Q.XX)(t);const s=this._tree;let n;await s.setInput(o);for(const{element:e}of s.getNode().children){if((0,gt.dV)(e)&&(0,Q.Xy)(e.uri,t)){n=e;break}if((0,Q.Xy)(e.resource,t)){n=e;break}}n&&(s.reveal(n,.5),s.setFocus([n],this._fakeEvent)),s.domFocus()}_previewElement(e){return p.JT.None}async _revealElement(e,t,i){return!((0,gt.dV)(e)||!e.isFile||(this._onWillPickElement.fire(),await this._editorService.openEditor({resource:e.resource,options:t},i?oi.O3:void 0),0))}};Oo=(0,o.g)([(0,o.f)(2,c.TG),(0,o.f)(3,M.XE),(0,o.f)(4,Ee.Ui),(0,o.f)(5,gt.ec),(0,o.f)(6,oi.AR)],Oo);let No=class{constructor(e,t,i){this.comparator=e,this._order=i.getValue(t,"breadcrumbs.symbolSortOrder")}compare(e,t){return"name"===this._order?this.comparator.compareByName(e,t):"type"===this._order?this.comparator.compareByType(e,t):this.comparator.compareByPosition(e,t)}};No=(0,o.g)([(0,o.f)(2,Eo.V)],No);class Mo extends xo{_createTree(e,t){const{config:i}=t.outline;return this._instantiationService.createInstance(go.C7,"BreadcrumbsOutlinePicker",e,i.delegate,i.renderers,i.treeDataSource,{...i.options,sorter:this._instantiationService.createInstance(No,i.comparator,void 0),collapseByDefault:!0,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,showNotFoundMessage:!1})}_setInput(e){const t=e.outline.captureViewState();this.restoreViewState=()=>{t.dispose()};const i=this._tree;return i.setInput(e.outline),e.element!==e.outline&&(i.reveal(e.element,.5),i.setFocus([e.element],this._fakeEvent)),i.domFocus(),Promise.resolve()}_previewElement(e){return this._tree.getInput().preview(e)}async _revealElement(e,t,i){this._onWillPickElement.fire();const o=this._tree.getInput();return await o.reveal(e,t,i),!0}}var Po=i(86456);class Bo extends uo{constructor(e,t,i){super(),this.model=e,this.element=t,this.options=i,this._disposables=new p.SL}dispose(){this._disposables.dispose()}equals(e){return e instanceof Bo&&this.element.element===e.element.element&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons}render(e){const{element:t,outline:i}=this.element;if(t===i){const t=w.$("span",void 0,"");return void e.appendChild(t)}const o=i.config.delegate.getTemplateId(t),s=i.config.renderers.find((e=>e.templateId===o));if(!s)return void(e.innerText="<<NO RENDERER>>");const n=s.renderTemplate(e);s.renderElement({element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:0,collapsible:!1,collapsed:!1,visible:!0,filterData:void 0},0,n,void 0),this._disposables.add((0,p.OF)((()=>{s.disposeTemplate(n)})))}}class Fo extends uo{constructor(e,t,i,o){super(),this.model=e,this.element=t,this.options=i,this._labels=o,this._disposables=new p.SL}dispose(){this._disposables.dispose()}equals(e){return e instanceof Fo&&Q.SF.isEqual(this.element.uri,e.element.uri)&&this.options.showFileIcons===e.options.showFileIcons&&this.options.showSymbolIcons===e.options.showSymbolIcons}render(e){const t=this._labels.create(e);t.setFile(this.element.uri,{hidePath:!0,hideIcon:this.element.kind===ft.RR.FOLDER||!this.options.showFileIcons,fileKind:this.element.kind,fileDecorations:{colors:this.options.showDecorationColors,badges:!1}}),e.classList.add(ft.RR[this.element.kind].toLowerCase()),this._disposables.add(t)}}const Wo=(0,Lt.q5)("breadcrumb-separator",Ze.lA.chevronRight,(0,l.NC)("separatorIcon","Icon for the separator in the breadcrumbs."));let Ho=class e{static{this.HEIGHT=22}static{this.SCROLLBAR_SIZES={default:3,large:8}}static{this.Payload_Reveal={}}static{this.Payload_RevealAside={}}static{this.Payload_Pick={}}static{this.CK_BreadcrumbsPossible=new H.uy("breadcrumbsPossible",!1,(0,l.NC)("breadcrumbsPossible","Whether the editor can show breadcrumbs"))}static{this.CK_BreadcrumbsVisible=new H.uy("breadcrumbsVisible",!1,(0,l.NC)("breadcrumbsVisible","Whether breadcrumbs are currently visible"))}static{this.CK_BreadcrumbsActive=new H.uy("breadcrumbsActive",!1,(0,l.NC)("breadcrumbsActive","Whether breadcrumbs have focus"))}constructor(t,i,o,s,n,r,a,c,d,h,l,u){this._options=i,this._editorGroup=o,this._contextKeyService=s,this._contextViewService=n,this._instantiationService=r,this._quickInputService=a,this._fileService=c,this._editorService=d,this._labelService=h,this._disposables=new p.SL,this._breadcrumbsDisposables=new p.SL,this._model=new p.XK,this._breadcrumbsPickerShowing=!1,this.domNode=document.createElement("div"),this.domNode.classList.add("breadcrumbs-control"),w.R3(t,this.domNode),this._cfUseQuickPick=Ji.Ny.UseQuickPick.bindTo(l),this._cfShowIcons=Ji.Ny.Icons.bindTo(l),this._cfTitleScrollbarSizing=Ji.Ny.TitleScrollbarSizing.bindTo(l),this._labels=this._instantiationService.createInstance($i.RX,$i.hh);const g=this._cfTitleScrollbarSizing.getValue()??"default",m=i.widgetStyles??A.Db;this._widget=new po(this.domNode,e.SCROLLBAR_SIZES[g],Wo,m),this._widget.onDidSelectItem(this._onSelectEvent,this,this._disposables),this._widget.onDidFocusItem(this._onFocusEvent,this,this._disposables),this._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive,this,this._disposables),this._ckBreadcrumbsPossible=e.CK_BreadcrumbsPossible.bindTo(this._contextKeyService),this._ckBreadcrumbsVisible=e.CK_BreadcrumbsVisible.bindTo(this._contextKeyService),this._ckBreadcrumbsActive=e.CK_BreadcrumbsActive.bindTo(this._contextKeyService),this._disposables.add(u.register(this._editorGroup.id,this._widget)),this.hide()}dispose(){this._disposables.dispose(),this._breadcrumbsDisposables.dispose(),this._ckBreadcrumbsPossible.reset(),this._ckBreadcrumbsVisible.reset(),this._ckBreadcrumbsActive.reset(),this._cfUseQuickPick.dispose(),this._cfShowIcons.dispose(),this._widget.dispose(),this._labels.dispose(),this.domNode.remove()}get model(){return this._model.value}layout(e){this._widget.layout(e)}isHidden(){return this.domNode.classList.contains("hidden")}hide(){this._breadcrumbsDisposables.clear(),this._ckBreadcrumbsVisible.set(!1),this.domNode.classList.toggle("hidden",!0)}revealLast(){this._widget.revealLast()}update(){this._breadcrumbsDisposables.clear();const t=Gi.zK.getCanonicalUri(this._editorGroup.activeEditor,{supportSideBySide:Gi.YX.PRIMARY}),i=this.isHidden();if(!t||!this._fileService.hasProvider(t))return this._ckBreadcrumbsPossible.set(!1),!i&&(this.hide(),!0);const o=Gi.zK.getOriginalUri(this._editorGroup.activeEditor,{supportSideBySide:Gi.YX.PRIMARY});this.domNode.classList.toggle("hidden",!1),this._ckBreadcrumbsVisible.set(!0),this._ckBreadcrumbsPossible.set(!0);const s=this._instantiationService.createInstance(wo,o??t,this._editorGroup.activeEditorPane);this._model.value=s,this.domNode.classList.toggle("backslash-path","\\"===this._labelService.getSeparator(t.scheme,t.authority));const n=()=>{this.domNode.classList.toggle("relative-path",s.isRelative());const e=this._cfShowIcons.getValue(),t={...this._options,showFileIcons:this._options.showFileIcons&&e,showSymbolIcons:this._options.showSymbolIcons&&e},i=s.getElements().map((e=>e instanceof bo?new Fo(s,e,t,this._labels):new Bo(s,e,t)));0===i.length?(this._widget.setEnabled(!1),this._widget.setItems([new class extends uo{render(e){e.innerText=(0,l.NC)("empty","no elements")}equals(e){return e===this}}])):(this._widget.setEnabled(!0),this._widget.setItems(i),this._widget.reveal(i[i.length-1]))},r=s.onDidUpdate(n),a=this._cfShowIcons.onDidChange(n);n(),this._breadcrumbsDisposables.clear(),this._breadcrumbsDisposables.add(r),this._breadcrumbsDisposables.add((0,p.OF)((()=>this._model.clear()))),this._breadcrumbsDisposables.add(a),this._breadcrumbsDisposables.add((0,p.OF)((()=>this._widget.setItems([]))));const c=()=>{const t=this._cfTitleScrollbarSizing.getValue()??"default";this._widget.setHorizontalScrollbarSize(e.SCROLLBAR_SIZES[t])};c();const d=this._cfTitleScrollbarSizing.onDidChange(c);return this._breadcrumbsDisposables.add(d),this._breadcrumbsDisposables.add({dispose:()=>{this._breadcrumbsPickerShowing&&this._contextViewService.hideContextView({source:this})}}),i!==this.isHidden()}_onFocusEvent(e){e.item&&this._breadcrumbsPickerShowing&&(this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setSelection(e.item))}_onSelectEvent(e){if(!e.item)return;if(e.item===this._breadcrumbsPickerIgnoreOnceItem)return this._breadcrumbsPickerIgnoreOnceItem=void 0,this._widget.setFocused(void 0),void this._widget.setSelection(void 0);const{element:t}=e.item;this._editorGroup.focus();const i=this._getEditorGroup(e.payload);if(void 0!==i)return this._widget.setFocused(void 0),this._widget.setSelection(void 0),void this._revealInEditor(e,t,i);if(this._cfUseQuickPick.getValue())return this._widget.setFocused(void 0),this._widget.setSelection(void 0),void this._quickInputService.quickAccess.show(t instanceof fo?"@":"");let o,s;this._contextViewService.showContextView({render:t=>{e.item instanceof Fo?o=this._instantiationService.createInstance(Oo,t,e.item.model.resource):e.item instanceof Bo&&(o=this._instantiationService.createInstance(Mo,t,e.item.model.resource));const i=o.onWillPickElement((()=>this._contextViewService.hideContextView({source:this,didPick:!0}))),s=Qe.Tz.onDidChange((()=>this._contextViewService.hideContextView({source:this}))),n=w.go(t),r=n.onDidBlur((()=>{this._breadcrumbsPickerIgnoreOnceItem=this._widget.isDOMFocused()?e.item:void 0,this._contextViewService.hideContextView({source:this})}));return this._breadcrumbsPickerShowing=!0,this._updateCkBreadcrumbsActive(),(0,p.F8)(o,i,s,n,r)},getAnchor:()=>{if(!s){const i=window.innerWidth-8;let n=Math.min(.7*window.innerHeight,300);const r=Math.min(i,Math.max(240,i/4.17)),a=8;let c;const d=w.i(e.node.firstChild),h=d.top+d.height+a;h+n>=window.innerHeight&&(n=window.innerHeight-h-30);let l=d.left;if(l+r>=i&&(l=i-r),e.payload instanceof W.nV){const t=r-2*a;c=e.payload.posx-l,c>t&&(l=Math.min(i-r,l+c-t),c=t)}else c=d.left+.3*d.width-l;o.show(t,n,r,a,Math.max(0,c)),s={x:l,y:h}}return s},onHide:e=>{e?.didPick||o.restoreViewState(),this._breadcrumbsPickerShowing=!1,this._updateCkBreadcrumbsActive(),e?.source===this&&(this._widget.setFocused(void 0),this._widget.setSelection(void 0)),o.dispose()}})}_updateCkBreadcrumbsActive(){const e=this._widget.isDOMFocused()||this._breadcrumbsPickerShowing;this._ckBreadcrumbsActive.set(e)}async _revealInEditor(t,i,o,s=!1){if(i instanceof bo)if(i.kind===ft.RR.FILE)await this._editorService.openEditor({resource:i.uri,options:{pinned:s}},o);else{const i=this._widget.getItems(),o=i.indexOf(t.item);this._widget.setFocused(i[o+1]),this._widget.setSelection(i[o+1],e.Payload_Pick)}else i.outline.reveal(i,{pinned:s},o===oi.O3)}_getEditorGroup(t){return t===e.Payload_RevealAside?oi.O3:t===e.Payload_Reveal?oi.LP:void 0}};function zo(e,t){const i=e.get(Po.Qw),o=e.get(Ji._4).getWidget(i.activeGroup.id);if(o){const e=(0,Y.eJ)(o.getItems());o.setFocused(e),t&&o.setSelection(e,Ho.Payload_Pick)}}Ho=(0,o.g)([(0,o.f)(3,H.i6),(0,o.f)(4,O.u),(0,o.f)(5,c.TG),(0,o.f)(6,pt.eJ),(0,o.f)(7,ft.sn),(0,o.f)(8,oi.AR),(0,o.f)(9,Xe.e),(0,o.f)(10,Ee.Ui),(0,o.f)(11,Ji._4)],Ho),(0,te.r1)(class extends te.Ke{constructor(){super({id:"breadcrumbs.toggle",title:{value:(0,l.NC)("cmd.toggle","Toggle Breadcrumbs"),mnemonicTitle:(0,l.NC)({key:"miBreadcrumbs",comment:["&& denotes a mnemonic"]},"Toggle &&Breadcrumbs"),original:"Toggle Breadcrumbs"},category:ie.R.View,toggled:{condition:H.Ao.equals("config.breadcrumbs.enabled",!0),title:(0,l.NC)("cmd.toggle2","Breadcrumbs"),mnemonicTitle:(0,l.NC)({key:"miBreadcrumbs2",comment:["&& denotes a mnemonic"]},"&&Breadcrumbs")},menu:[{id:te.eH.CommandPalette},{id:te.eH.MenubarAppearanceMenu,group:"4_editor",order:2},{id:te.eH.NotebookToolbar,group:"notebookLayout",order:2},{id:te.eH.StickyScrollContext}]})}run(e){const t=e.get(Ee.Ui),i=Ji.Ny.IsEnabled.bindTo(t).getValue();Ji.Ny.IsEnabled.bindTo(t).updateValue(!i)}}),(0,te.r1)(class extends te.Ke{constructor(){super({id:"breadcrumbs.focusAndSelect",title:{value:(0,l.NC)("cmd.focusAndSelect","Focus and Select Breadcrumbs"),original:"Focus and Select Breadcrumbs"},precondition:Ho.CK_BreadcrumbsVisible,keybinding:{weight:200,primary:3161,when:Ho.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){zo(e,!0)}}),(0,te.r1)(class extends te.Ke{constructor(){super({id:"breadcrumbs.focus",title:{value:(0,l.NC)("cmd.focus","Focus Breadcrumbs"),original:"Focus Breadcrumbs"},precondition:Ho.CK_BreadcrumbsVisible,keybinding:{weight:200,primary:3157,when:Ho.CK_BreadcrumbsPossible},f1:!0})}run(e,...t){zo(e,!1)}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.toggleToOn",weight:200,primary:3161,when:H.Ao.not("config.breadcrumbs.enabled"),handler:async e=>{const t=e.get(c.TG),i=e.get(Ee.Ui),o=Ji.Ny.IsEnabled.bindTo(i);return o.getValue()||(await o.updateValue(!0),await(0,je.Vs)(50)),t.invokeFunction(zo,!0)}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNext",weight:200,primary:17,secondary:[2065],mac:{primary:17,secondary:[529]},when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive),handler(e){const t=e.get(Po.Qw),i=e.get(Ji._4).getWidget(t.activeGroup.id);i&&i.focusNext()}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPrevious",weight:200,primary:15,secondary:[2063],mac:{primary:15,secondary:[527]},when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive),handler(e){const t=e.get(Po.Qw),i=e.get(Ji._4).getWidget(t.activeGroup.id);i&&i.focusPrev()}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.focusNextWithPicker",weight:201,primary:2065,mac:{primary:529},when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive,go.CQ),handler(e){const t=e.get(Po.Qw),i=e.get(Ji._4).getWidget(t.activeGroup.id);i&&i.focusNext()}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.focusPreviousWithPicker",weight:201,primary:2063,mac:{primary:527},when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive,go.CQ),handler(e){const t=e.get(Po.Qw),i=e.get(Ji._4).getWidget(t.activeGroup.id);i&&i.focusPrev()}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.selectFocused",weight:200,primary:3,secondary:[18],when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive),handler(e){const t=e.get(Po.Qw),i=e.get(Ji._4).getWidget(t.activeGroup.id);i&&i.setSelection(i.getFocused(),Ho.Payload_Pick)}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocused",weight:200,primary:10,secondary:[2051],when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive),handler(e){const t=e.get(Po.Qw),i=e.get(Ji._4).getWidget(t.activeGroup.id);i&&i.setSelection(i.getFocused(),Ho.Payload_Reveal)}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.selectEditor",weight:201,primary:9,when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive),handler(e){const t=e.get(Po.Qw),i=e.get(Ji._4).getWidget(t.activeGroup.id);i&&(i.setFocused(void 0),i.setSelection(void 0),t.activeGroup.activeEditorPane?.focus())}}),ut.W.registerCommandAndKeybindingRule({id:"breadcrumbs.revealFocusedFromTreeAside",weight:200,primary:2051,when:H.Ao.and(Ho.CK_BreadcrumbsVisible,Ho.CK_BreadcrumbsActive,go.CQ),handler(e){const t=e.get(oi.AR),i=e.get(go.Lw).lastFocusedList;if(!(i instanceof go.C7||i instanceof go.ls))return;const o=i.getFocus()[0];if(J.ov.isUri(o?.resource))return t.openEditor({resource:o.resource,options:{pinned:!0}},oi.O3);const s=i.getInput();return s&&"string"==typeof s.outlineKind?s.reveal(o,{pinned:!0,preserveFocus:!1},!0):void 0}});var Go=i(16021),Uo=i(32049);class Ko extends ye.Wi{constructor(e){super(),this.context=e}run(e,t){let i=this.context;return t?.preserveFocus&&(i={...this.context,preserveFocus:!0}),super.run(e,i)}}let $o=class extends M.bB{constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,g){super(h),this.accessor=t,this.group=i,this.contextMenuService=o,this.instantiationService=s,this.contextKeyService=n,this.keybindingService=r,this.notificationService=a,this.menuService=c,this.quickInputService=d,this.configurationService=l,this.fileService=u,this.editorResolverService=g,this.editorTransfer=Go.Ej.getInstance(),this.groupTransfer=Go.Ej.getInstance(),this.treeItemsTransfer=Go.Ej.getInstance(),this.breadcrumbsControl=void 0,this.editorToolBarMenuDisposables=this._register(new p.SL),this.resourceContext=this._register(s.createInstance(L.f1)),this.editorPinnedContext=L.gI.bindTo(n),this.editorIsFirstContext=L.lr.bindTo(n),this.editorIsLastContext=L._B.bindTo(n),this.editorStickyContext=L.Vq.bindTo(n),this.editorAvailableEditorIds=L.tK.bindTo(this.contextKeyService),this.editorCanSplitInGroupContext=L.gP.bindTo(n),this.sideBySideEditorContext=L.x3.bindTo(n),this.groupLockedContext=L.sp.bindTo(n),this.renderDropdownAsChildElement=!1,this.create(e)}createBreadcrumbsControl(e,t){const i=this._register(Ji.Ny.IsEnabled.bindTo(this.configurationService));this._register(i.onDidChange((()=>{const o=i.getValue();!o&&this.breadcrumbsControl?(this.breadcrumbsControl.dispose(),this.breadcrumbsControl=void 0,this.handleBreadcrumbsEnablementChange()):o&&!this.breadcrumbsControl&&(this.breadcrumbsControl=this.instantiationService.createInstance(Ho,e,t,this.group),this.breadcrumbsControl.update(),this.handleBreadcrumbsEnablementChange())}))),i.getValue()&&(this.breadcrumbsControl=this.instantiationService.createInstance(Ho,e,t,this.group)),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations((e=>{this.breadcrumbsControl?.model&&this.breadcrumbsControl.model.resource.scheme!==e.scheme||this.breadcrumbsControl?.update()&&this.handleBreadcrumbsEnablementChange()})))}createEditorActionsToolBar(e){const t={groupId:this.group.id};this.editorActionsToolbar=this._register(this.instantiationService.createInstance(D.T,e,{actionViewItemProvider:e=>this.actionViewItemProvider(e),orientation:0,ariaLabel:(0,l.NC)("ariaLabelEditorActions","Editor actions"),getKeyBinding:e=>this.getKeybinding(e),actionRunner:this._register(new Ko(t)),anchorAlignmentProvider:()=>1,renderDropdownAsChildElement:this.renderDropdownAsChildElement,telemetrySource:"editorPart",resetMenu:te.eH.EditorTitle,maxNumberOfItems:9})),this.editorActionsToolbar.context=t,this._register(this.editorActionsToolbar.actionRunner.onDidRun((e=>{e.error&&!(0,m.n2)(e.error)&&this.notificationService.error(e.error)})))}actionViewItemProvider(e){const t=this.group.activeEditorPane;if(t instanceof Xi.J){const i=t.getActionViewItem(e);if(i)return i}return(0,x.Id)(this.instantiationService,e,{menuAsChild:this.renderDropdownAsChildElement})}updateEditorActionsToolbar(){const{primary:e,secondary:t}=this.prepareEditorActions(this.getEditorActions());(0,y.cW)(this.editorActionsToolbar).setActions((0,v.c)(e),(0,v.c)(t))}getEditorActions(){const e=[],t=[];if(this.editorToolBarMenuDisposables.clear(),this.contextKeyService.bufferChangeEvents((()=>{const e=this.group.activeEditor;this.resourceContext.set((0,y.M2)(Gi.zK.getOriginalUri(e,{supportSideBySide:Gi.YX.PRIMARY}))),this.editorPinnedContext.set(!!e&&this.group.isPinned(e)),this.editorIsFirstContext.set(!!e&&this.group.isFirst(e)),this.editorIsLastContext.set(!!e&&this.group.isLast(e)),this.editorStickyContext.set(!!e&&this.group.isSticky(e)),(0,L.Qe)(this.editorAvailableEditorIds,e,this.editorResolverService),this.editorCanSplitInGroupContext.set(!!e&&e.hasCapability(32)),this.sideBySideEditorContext.set(e?.typeId===Ui.h.ID),this.groupLockedContext.set(this.group.isLocked)})),this.group.activeEditorPane instanceof Xi.J){const i=this.getEditorPaneAwareContextKeyService(),o=this.menuService.createMenu(te.eH.EditorTitle,i,{emitEventsForSubmenuChanges:!0,eventDebounceDelay:0});this.editorToolBarMenuDisposables.add(o),this.editorToolBarMenuDisposables.add(o.onDidChange((()=>{this.updateEditorActionsToolbar()})));const s=(e,t)=>"navigation"===t&&e.actions.length<=1;(0,x.vr)(o,{arg:this.resourceContext.get(),shouldForwardArgs:!0},{primary:e,secondary:t},"navigation",s)}return{primary:e,secondary:t}}getEditorPaneAwareContextKeyService(){return this.group.activeEditorPane?.scopedContextKeyService??this.contextKeyService}clearEditorActionsToolbar(){this.editorActionsToolbar?.setActions([],[])}enableGroupDragging(e){this._register((0,w.nm)(e,w.tw.DRAG_START,(t=>{if(t.target!==e)return;this.groupTransfer.setData([new G.r8(this.group.id)],G.r8.prototype),t.dataTransfer&&(t.dataTransfer.effectAllowed="copyMove");let i=!1;if(this.accessor.partOptions.showTabs?i=this.doFillResourceDataTransfers(this.group.getEditors(1),t):this.group.activeEditor&&(i=this.doFillResourceDataTransfers([this.group.activeEditor],t)),!i&&Qe.vU&&t.dataTransfer?.setData(ji.go.TEXT,String(this.group.label)),this.group.activeEditor){let e=this.group.activeEditor.getName();this.accessor.partOptions.showTabs&&this.group.count>1&&(e=(0,l.NC)("draggedEditorGroup","{0} (+{1})",e,this.group.count-1)),(0,ji.br)(t,e,"monaco-editor-group-drag-image",this.getColor(P.dCr),this.getColor(P.M6C))}}))),this._register((0,w.nm)(e,w.tw.DRAG_END,(()=>{this.groupTransfer.clearData(G.r8.prototype)})))}doFillResourceDataTransfers(e,t){return!!e.length&&(this.instantiationService.invokeFunction(G.Gj,e.map((e=>({editor:e,groupId:this.group.id}))),t),!0)}onContextMenu(e,t,i){const o=this.resourceContext.get();this.resourceContext.set((0,y.M2)(Gi.zK.getOriginalUri(e,{supportSideBySide:Gi.YX.PRIMARY})));const s=!!this.editorPinnedContext.get();this.editorPinnedContext.set(this.group.isPinned(e));const n=!!this.editorIsFirstContext.get();this.editorIsFirstContext.set(this.group.isFirst(e));const r=!!this.editorIsLastContext.get();this.editorIsLastContext.set(this.group.isLast(e));const a=!!this.editorStickyContext.get();this.editorStickyContext.set(this.group.isSticky(e));const c=!!this.groupLockedContext.get();this.groupLockedContext.set(this.group.isLocked);const d=!!this.editorCanSplitInGroupContext.get();this.editorCanSplitInGroupContext.set(e.hasCapability(32));const h=!!this.sideBySideEditorContext.get();this.sideBySideEditorContext.set(e.typeId===Ui.h.ID);const l=this.editorAvailableEditorIds.get()??"";(0,L.Qe)(this.editorAvailableEditorIds,e,this.editorResolverService);let u=i;t instanceof MouseEvent&&(u=new W.nV(t)),this.contextMenuService.showContextMenu({getAnchor:()=>u,menuId:te.eH.EditorTitleContext,menuActionOptions:{shouldForwardArgs:!0,arg:this.resourceContext.get()},contextKeyService:this.contextKeyService,getActionsContext:()=>({groupId:this.group.id,editorIndex:this.group.getIndexOfEditor(e)}),getKeyBinding:e=>this.getKeybinding(e),onHide:()=>{this.resourceContext.set(o||null),this.editorPinnedContext.set(s),this.editorIsFirstContext.set(n),this.editorIsLastContext.set(r),this.editorStickyContext.set(a),this.groupLockedContext.set(c),this.editorCanSplitInGroupContext.set(d),this.sideBySideEditorContext.set(h),this.editorAvailableEditorIds.set(l),this.accessor.activeGroup.focus()}})}getKeybinding(e){return this.keybindingService.lookupKeybinding(e.id,this.getEditorPaneAwareContextKeyService())}getKeybindingLabel(e){const t=this.getKeybinding(e);return t?(0,y.f6)(t.getLabel()):void 0}dispose(){(0,p.B9)(this.breadcrumbsControl),this.breadcrumbsControl=void 0,super.dispose()}};$o=(0,o.g)([(0,o.f)(3,O.i),(0,o.f)(4,c.TG),(0,o.f)(5,H.i6),(0,o.f)(6,N.d),(0,o.f)(7,F.lT),(0,o.f)(8,te.co),(0,o.f)(9,pt.eJ),(0,o.f)(10,M.XE),(0,o.f)(11,Ee.Ui),(0,o.f)(12,ft.sn),(0,o.f)(13,Uo.es)],$o);var jo=i(49462),Xo=i(51858),Jo=i(92321),Yo=i(36248),Qo=i(22844),qo=i(54713),Zo=i(58345),es=i(80642);let ts=class e extends $o{static{this.SCROLLBAR_SIZES={default:3,large:10}}static{this.TAB_WIDTH={compact:38,shrink:80,fit:120}}static{this.TAB_HEIGHT=35}static{this.DRAG_OVER_OPEN_TAB_THRESHOLD=1500}static{this.MOUSE_WHEEL_EVENT_THRESHOLD=150}static{this.MOUSE_WHEEL_DISTANCE_THRESHOLD=1.5}constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,g,m,v,b,f){super(e,t,i,o,s,n,r,a,c,d,h,l,u,f),this.editorService=g,this.pathService=m,this.editorGroupService=v,this.treeViewsDragAndDropService=b,this.closeEditorAction=this._register(this.instantiationService.createInstance(jo.jH,jo.jH.ID,jo.jH.LABEL)),this.unpinEditorAction=this._register(this.instantiationService.createInstance(jo.xJ,jo.xJ.ID,jo.xJ.LABEL)),this.tabResourceLabels=this._register(this.instantiationService.createInstance($i.RX,$i.hh)),this.tabLabels=[],this.tabActionBars=[],this.tabDisposables=[],this.dimensions={container:w.Ro.None,available:w.Ro.None},this.layoutScheduler=this._register(new p.XK),this.path=Ke.ED?_o.Ku:_o.KR,this.lastMouseWheelEventTime=0,this.isMouseOverTabs=!1,this.updateEditorLabelScheduler=this._register(new je.pY((()=>this.doUpdateEditorLabels()),0)),(async()=>{this.path=await this.pathService.path})(),this._register(this.tabResourceLabels.onDidChangeDecorations((()=>this.doHandleDecorationsChange())))}create(e){this.titleContainer=e,this.tabsAndActionsContainer=document.createElement("div"),this.tabsAndActionsContainer.classList.add("tabs-and-actions-container"),this.titleContainer.appendChild(this.tabsAndActionsContainer),this.tabsContainer=document.createElement("div"),this.tabsContainer.setAttribute("role","tablist"),this.tabsContainer.draggable=!0,this.tabsContainer.classList.add("tabs-container"),this._register(U.o.addTarget(this.tabsContainer)),this.tabSizingFixedDisposables=this._register(new p.SL),this.updateTabSizing(!1),this.tabsScrollbar=this._register(this.createTabsScrollbar(this.tabsContainer)),this.tabsAndActionsContainer.appendChild(this.tabsScrollbar.getDomNode()),this.registerTabsContainerListeners(this.tabsContainer,this.tabsScrollbar),this.editorToolbarContainer=document.createElement("div"),this.editorToolbarContainer.classList.add("editor-actions"),this.tabsAndActionsContainer.appendChild(this.editorToolbarContainer),this.createEditorActionsToolBar(this.editorToolbarContainer);const t=document.createElement("div");t.classList.add("tabs-breadcrumbs"),this.titleContainer.appendChild(t),this.createBreadcrumbsControl(t,{showFileIcons:!0,showSymbolIcons:!0,showDecorationColors:!1,showPlaceholder:!0})}createTabsScrollbar(e){const t=new Yi.NB(e,{horizontal:1,horizontalScrollbarSize:this.getTabsScrollbarSizing(),vertical:2,scrollYToX:!0,useShadows:!1});return t.onScroll((t=>{t.scrollLeftChanged&&(e.scrollLeft=t.scrollLeft)})),t}updateTabsScrollbarSizing(){this.tabsScrollbar?.updateOptions({horizontalScrollbarSize:this.getTabsScrollbarSizing()})}updateTabSizing(e){const[t,i]=(0,y.ld)(this.tabsContainer,this.tabSizingFixedDisposables);i.clear();const o=this.accessor.partOptions;"fixed"===o.tabSizing?(t.style.setProperty("--tab-sizing-fixed-min-width",`${o.tabSizingFixedMinWidth}px`),t.style.setProperty("--tab-sizing-fixed-max-width",`${o.tabSizingFixedMaxWidth}px`),i.add((0,w.nm)(t,w.tw.MOUSE_ENTER,(()=>{this.isMouseOverTabs=!0}))),i.add((0,w.nm)(t,w.tw.MOUSE_LEAVE,(()=>{this.isMouseOverTabs=!1,this.updateTabsFixedWidth(!1)})))):e&&(t.style.removeProperty("--tab-sizing-fixed-min-width"),t.style.removeProperty("--tab-sizing-fixed-max-width"),this.updateTabsFixedWidth(!1))}updateTabsFixedWidth(e){this.forEachTab(((t,i,o)=>{if(e){const{width:e}=o.getBoundingClientRect();o.style.setProperty("--tab-sizing-current-width",`${e}px`)}else o.style.removeProperty("--tab-sizing-current-width")}))}getTabsScrollbarSizing(){return"large"!==this.accessor.partOptions.titleScrollbarSizing?e.SCROLLBAR_SIZES.default:e.SCROLLBAR_SIZES.large}registerTabsContainerListeners(t,i){this.enableGroupDragging(t),this._register((0,w.nm)(t,w.tw.SCROLL,(()=>{t.classList.contains("scroll")&&i.setScrollPosition({scrollLeft:t.scrollLeft})})));for(const e of[U.t.Tap,w.tw.DBLCLICK])this._register((0,w.nm)(t,e,(i=>{if(e===w.tw.DBLCLICK){if(i.target!==t)return}else{if(2!==i.tapCount)return;if(i.initialTarget!==t)return}w.zB.stop(i),this.editorService.openEditor({resource:void 0,options:{pinned:!0,index:this.group.count,override:Gi.Cr.id}},this.group.id)})));this._register((0,w.nm)(t,w.tw.MOUSE_DOWN,(e=>{1===e.button&&e.preventDefault()}))),this._register(new w.eg(t,{onDragEnter:e=>{if(t.classList.add("scroll"),e.target!==t)return void this.updateDropFeedback(t,!1);if(!this.isSupportedDropTransfer(e))return void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));let i=!1;if(this.editorTransfer.hasData(G.L5.prototype)){i=!0;const t=this.editorTransfer.getData(G.L5.prototype);if(Array.isArray(t)){const i=t[0].identifier;if(this.group.id===i.groupId&&this.group.getIndexOfEditor(i.editor)===this.group.count-1)return void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"))}}i||e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),this.updateDropFeedback(t,!0)},onDragLeave:e=>{this.updateDropFeedback(t,!1),t.classList.remove("scroll")},onDragEnd:e=>{this.updateDropFeedback(t,!1),t.classList.remove("scroll")},onDrop:e=>{this.updateDropFeedback(t,!1),t.classList.remove("scroll"),e.target===t&&this.onDrop(e,this.group.count,t)}})),this._register((0,w.nm)(t,w.tw.MOUSE_WHEEL,(t=>{const i=this.group.activeEditor;if(!i||this.group.count<2)return;if(!0===this.accessor.partOptions.scrollToSwitchTabs){if(t.shiftKey)return}else if(!t.shiftKey)return;const o=Date.now();if(o-this.lastMouseWheelEventTime<e.MOUSE_WHEEL_EVENT_THRESHOLD-2*(Math.abs(t.deltaX)+Math.abs(t.deltaY)))return;let s;if(this.lastMouseWheelEventTime=o,t.deltaX+t.deltaY<-e.MOUSE_WHEEL_DISTANCE_THRESHOLD)s=-1;else{if(!(t.deltaX+t.deltaY>e.MOUSE_WHEEL_DISTANCE_THRESHOLD))return;s=1}const n=this.group.getEditorByIndex(this.group.getIndexOfEditor(i)+s);n&&(this.group.openEditor(n),w.zB.stop(t,!0))})));const o=e=>{w.zB.stop(e);let i=t;e instanceof MouseEvent&&(i=new W.nV(e)),this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:te.eH.EditorTabsBarContext,contextKeyService:this.contextKeyService,menuActionOptions:{shouldForwardArgs:!0},getActionsContext:()=>({groupId:this.group.id}),getKeyBinding:e=>this.getKeybinding(e),onHide:()=>this.group.focus()})};this._register((0,w.nm)(t,U.t.Contextmenu,(e=>o(e)))),this._register((0,w.nm)(t,w.tw.CONTEXT_MENU,(e=>o(e))))}doHandleDecorationsChange(){this.layout(this.dimensions)}updateEditorActionsToolbar(){super.updateEditorActionsToolbar(),this.layout(this.dimensions)}openEditor(e){this.handleOpenedEditors()}openEditors(e){this.handleOpenedEditors()}handleOpenedEditors(){const[e,t]=(0,y.ld)(this.tabsContainer,this.tabsScrollbar);for(let i=e.children.length;i<this.group.count;i++)e.appendChild(this.createTab(i,e,t));const i=this.didActiveEditorChange(),o=this.activeTabLabel,s=this.tabLabels.length;this.computeTabLabels(),i||s!==this.tabLabels.length||!this.equalsEditorInputLabel(o,this.activeTabLabel)?(this.redraw({forceRevealActiveTab:!0}),this.breadcrumbsControl?.update()):(this.layout(this.dimensions,{forceRevealActiveTab:!0}),this.breadcrumbsControl?.revealLast())}didActiveEditorChange(){return!(!(!this.activeTabLabel?.editor&&this.group.activeEditor||this.activeTabLabel?.editor&&!this.group.activeEditor)&&this.activeTabLabel?.editor&&this.group.isActive(this.activeTabLabel.editor))}equalsEditorInputLabel(e,t){return e===t||!(!e||!t)&&e.name===t.name&&e.description===t.description&&e.forceDescription===t.forceDescription&&e.title===t.title&&e.ariaLabel===t.ariaLabel}beforeCloseEditor(e){if(this.isMouseOverTabs&&"fixed"===this.accessor.partOptions.tabSizing){const t=this.group.isLast(e);this.updateTabsFixedWidth(!t)}}closeEditor(e){this.handleClosedEditors()}closeEditors(e){this.handleClosedEditors()}handleClosedEditors(){if(this.group.activeEditor){const e=(0,y.cW)(this.tabsContainer);for(;e.children.length>this.group.count;)e.lastChild?.remove(),(0,p.B9)(this.tabDisposables.pop());this.computeTabLabels(),this.redraw({forceRevealActiveTab:!0})}else this.tabsContainer&&(0,w.PO)(this.tabsContainer),this.tabDisposables=(0,p.B9)(this.tabDisposables),this.tabResourceLabels.clear(),this.tabLabels=[],this.activeTabLabel=void 0,this.tabActionBars=[],this.clearEditorActionsToolbar(),this.breadcrumbsControl?.update()}moveEditor(e,t,i){const o=this.tabLabels[t];this.tabLabels.splice(t,1),this.tabLabels.splice(i,0,o),this.forEachTab(((e,t,i,o,s,n)=>{this.redrawTab(e,t,i,o,s,n)}),Math.min(t,i),Math.max(t,i)),this.layout(this.dimensions,{forceRevealActiveTab:!0})}pinEditor(e){this.withTab(e,((e,t,i,o,s)=>this.redrawTabLabel(e,t,i,o,s)))}stickEditor(e){this.doHandleStickyEditorChange(e)}unstickEditor(e){this.doHandleStickyEditorChange(e)}doHandleStickyEditorChange(e){this.withTab(e,((e,t,i,o,s,n)=>this.redrawTab(e,t,i,o,s,n))),this.forEachTab(((e,t,i,o,s)=>{this.redrawTabBorders(t,i)})),this.layout(this.dimensions,{forceRevealActiveTab:!0})}setActive(e){this.forEachTab(((t,i,o,s,n,r)=>{this.redrawTabActiveAndDirty(e,t,o,r)})),this.updateEditorActionsToolbar(),this.layout(this.dimensions,{forceRevealActiveTab:!0})}updateEditorLabel(e){this.updateEditorLabelScheduler.schedule()}doUpdateEditorLabels(){this.computeTabLabels(),this.forEachTab(((e,t,i,o,s)=>{this.redrawTabLabel(e,t,i,o,s)})),this.layout(this.dimensions)}updateEditorDirty(e){this.withTab(e,((e,t,i,o,s,n)=>this.redrawTabActiveAndDirty(this.accessor.activeGroup===this.group,e,i,n)))}updateOptions(e,t){e.labelFormat!==t.labelFormat&&this.computeTabLabels(),e.titleScrollbarSizing!==t.titleScrollbarSizing&&this.updateTabsScrollbarSizing(),e.tabSizingFixedMinWidth===t.tabSizingFixedMinWidth&&e.tabSizingFixedMaxWidth===t.tabSizingFixedMaxWidth&&e.tabSizing===t.tabSizing||this.updateTabSizing(!0),e.labelFormat===t.labelFormat&&e.tabCloseButton===t.tabCloseButton&&e.tabSizing===t.tabSizing&&e.pinnedTabSizing===t.pinnedTabSizing&&e.showIcons===t.showIcons&&e.hasIcons===t.hasIcons&&e.highlightModifiedTabs===t.highlightModifiedTabs&&e.wrapTabs===t.wrapTabs&&(0,Yo.fS)(e.decorations,t.decorations)||this.redraw()}updateStyles(){this.redraw()}forEachTab(e,t,i){this.group.editors.forEach(((o,s)=>{"number"==typeof t&&t>s||"number"==typeof i&&i<s||this.doWithTab(s,o,e)}))}withTab(e,t){this.doWithTab(this.group.getIndexOfEditor(e),e,t)}doWithTab(e,t,i){const o=(0,y.cW)(this.tabsContainer).children[e],s=this.tabResourceLabels.get(e),n=this.tabLabels[e],r=this.tabActionBars[e];o&&s&&n&&i(t,e,o,s,n,r)}createTab(e,t,i){const o=document.createElement("div");o.draggable=!0,o.setAttribute("role","tab"),o.classList.add("tab"),this._register(U.o.addTarget(o));const s=document.createElement("div");s.classList.add("tab-border-top-container"),o.appendChild(s);const n=this.tabResourceLabels.create(o),r=document.createElement("div");r.classList.add("tab-actions"),o.appendChild(r);const a=new Ko({groupId:this.group.id,editorIndex:e}),c=new v.o(r,{ariaLabel:(0,l.NC)("ariaLabelTabActions","Tab actions"),actionRunner:a});c.onWillRun((e=>{e.action.id===this.closeEditorAction.id&&this.blockRevealActiveTabOnce()}));const d=(0,p.F8)(c,(0,p.OF)((0,Y.$T)(this.tabActionBars,c))),h=document.createElement("div");h.classList.add("tab-border-bottom-container"),o.appendChild(h);const u=this.registerTabListeners(o,e,t,i);return this.tabDisposables.push((0,p.F8)(u,d,a,n)),o}registerTabListeners(t,i,o,s){const n=new p.SL,r=(e,o)=>{if(t.blur(),e instanceof MouseEvent&&(0!==e.button||Ke.dz&&e.ctrlKey))return void(1===e.button&&e.preventDefault());if(this.originatesFromTabActionBar(e))return;const s=this.group.getEditorByIndex(i);s&&this.group.openEditor(s,{preserveFocus:o,activation:Qo.kn.ACTIVATE})},a=e=>{w.zB.stop(e);const o=this.group.getEditorByIndex(i);o&&this.onContextMenu(o,e,t)};n.add((0,w.nm)(t,w.tw.MOUSE_DOWN,(e=>r(e,!1)))),n.add((0,w.nm)(t,U.t.Tap,(e=>r(e,!0)))),n.add((0,w.nm)(t,U.t.Change,(e=>{s.setScrollPosition({scrollLeft:s.getScrollPosition().scrollLeft-e.translationX})}))),n.add((0,w.nm)(t,w.tw.MOUSE_UP,(e=>{w.zB.stop(e),t.blur()}))),n.add((0,w.nm)(t,w.tw.AUXCLICK,(e=>{1===e.button&&(w.zB.stop(e,!0),this.blockRevealActiveTabOnce(),this.closeEditorAction.run({groupId:this.group.id,editorIndex:i}))}))),n.add((0,w.nm)(t,w.tw.KEY_DOWN,(e=>{const t=new we.y1(e);t.shiftKey&&68===t.keyCode&&a(e)}))),n.add((0,w.nm)(t,U.t.Contextmenu,(e=>{a(e)}))),n.add((0,w.nm)(t,w.tw.KEY_UP,(e=>{const t=new we.y1(e);let n=!1;if(t.equals(3)||t.equals(10)){n=!0;const e=this.group.getEditorByIndex(i);e&&this.group.openEditor(e)}else if([15,17,16,18,14,13].some((e=>t.equals(e)))){let e;e=t.equals(15)||t.equals(16)?i-1:t.equals(17)||t.equals(18)?i+1:t.equals(14)?0:this.group.count-1;const s=this.group.getEditorByIndex(e);s&&(n=!0,this.group.openEditor(s,{preserveFocus:!0}),o.childNodes[e].focus())}n&&w.zB.stop(e,!0),s.setScrollPosition({scrollLeft:o.scrollLeft})})));for(const e of[U.t.Tap,w.tw.DBLCLICK])n.add((0,w.nm)(t,e,(t=>{if(e===w.tw.DBLCLICK)w.zB.stop(t);else if(2!==t.tapCount)return;const o=this.group.getEditorByIndex(i);o&&this.group.isPinned(o)?this.accessor.partOptions.doubleClickTabToToggleEditorGroupSizes&&this.accessor.arrangeGroups(2,this.group):this.group.pinEditor(o)})));return n.add((0,w.nm)(t,w.tw.CONTEXT_MENU,(e=>{w.zB.stop(e,!0);const o=this.group.getEditorByIndex(i);o&&this.onContextMenu(o,e,t)}),!0)),n.add((0,w.nm)(t,w.tw.DRAG_START,(e=>{const o=this.group.getEditorByIndex(i);o&&(this.editorTransfer.setData([new G.L5({editor:o,groupId:this.group.id})],G.L5.prototype),e.dataTransfer&&(e.dataTransfer.effectAllowed="copyMove"),this.doFillResourceDataTransfers([o],e),t.classList.add("dragged"),(0,w.jL)((()=>t.classList.remove("dragged"))))}))),n.add(new w.eg(t,{onDragEnter:e=>{if(t.classList.add("dragged-over"),!this.isSupportedDropTransfer(e))return void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));let o=!1;if(this.editorTransfer.hasData(G.L5.prototype)){o=!0;const t=this.editorTransfer.getData(G.L5.prototype);if(Array.isArray(t)){const o=t[0].identifier;if(o.editor===this.group.getEditorByIndex(i)&&o.groupId===this.group.id)return void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"))}}o||e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),this.updateDropFeedback(t,!0,i)},onDragOver:(t,o)=>{if(o>=e.DRAG_OVER_OPEN_TAB_THRESHOLD){const e=this.group.getEditorByIndex(i);e&&this.group.activeEditor!==e&&this.group.openEditor(e,{preserveFocus:!0})}},onDragLeave:()=>{t.classList.remove("dragged-over"),this.updateDropFeedback(t,!1,i)},onDragEnd:()=>{t.classList.remove("dragged-over"),this.updateDropFeedback(t,!1,i),this.editorTransfer.clearData(G.L5.prototype)},onDrop:e=>{t.classList.remove("dragged-over"),this.updateDropFeedback(t,!1,i),this.onDrop(e,i,o)}})),n}isSupportedDropTransfer(e){if(this.groupTransfer.hasData(G.r8.prototype)){const e=this.groupTransfer.getData(G.r8.prototype);return!Array.isArray(e)||e[0].identifier!==this.group.id}return!!this.editorTransfer.hasData(G.L5.prototype)||!!(e.dataTransfer&&e.dataTransfer.types.length>0)}updateDropFeedback(e,t,i){const o="number"==typeof i,s="number"==typeof i?this.group.getEditorByIndex(i):void 0,n=o&&!!s&&this.group.isActive(s),r=o?this.getColor(n?B.Ug:B.$7):"";e.style.backgroundColor=(t?this.getColor(B.Xv):r)||"";const a=this.getColor(P.xL1);a&&t?(e.style.outlineWidth="2px",e.style.outlineStyle="dashed",e.style.outlineColor=a,e.style.outlineOffset=o?"-5px":"-3px"):(e.style.outlineWidth="",e.style.outlineStyle="",e.style.outlineColor=a||"",e.style.outlineOffset="")}computeTabLabels(){const{labelFormat:e}=this.accessor.partOptions,{verbosity:t,shortenDuplicates:i}=this.getLabelConfigFlags(e),o=[];let s=-1;for(let e=0;e<this.group.editors.length;e++){const i=this.group.editors[e];o.push({editor:i,name:i.getName(),description:i.getDescription(t),forceDescription:i.hasCapability(64),title:i.getTitle(2),ariaLabel:(0,Ki.Vm)(i,e,this.group,this.editorGroupService.count)}),i===this.group.activeEditor&&(s=e)}i&&this.shortenTabLabels(o),this.tabLabels=o,this.activeTabLabel=o[s]}shortenTabLabels(e){const t=new Map;for(const i of e)"string"==typeof i.description?(0,se.XO)(t,i.name,[]).push(i):i.description="";for(const[,e]of t){if(1===e.length&&!e[0].forceDescription){e[0].description="";continue}const t=new Map;for(const i of e)(0,se.XO)(t,i.description,[]).push(i);let i=!1;for(const[,e]of t)if(!i&&e.length>1){const[t,...o]=e.map((({editor:e})=>e.getDescription(2)));i=o.some((e=>e!==t))}if(i){t.clear();for(const i of e)i.description=i.editor.getDescription(2),(0,se.XO)(t,i.description,[]).push(i)}const o=[];for(const[e]of t)o.push(e);if(1===o.length){for(const e of t.get(o[0])||[])e.forceDescription||(e.description="");continue}const s=(0,nt.OV)(o,this.path.sep);o.forEach(((e,i)=>{for(const o of t.get(e)||[])o.description=s[i]}))}}getLabelConfigFlags(e){switch(e){case"short":return{verbosity:0,shortenDuplicates:!1};case"medium":return{verbosity:1,shortenDuplicates:!1};case"long":return{verbosity:2,shortenDuplicates:!1};default:return{verbosity:1,shortenDuplicates:!0}}}redraw(e){if(this.tabsAndActionsContainer){let e=this.getColor(B.yD);!e&&(0,Jo.c3)(this.theme.type)&&(e=this.getColor(B.Sh)||this.getColor(P.lRK)),e?(this.tabsAndActionsContainer.classList.add("tabs-border-bottom"),this.tabsAndActionsContainer.style.setProperty("--tabs-border-bottom-color",e.toString())):(this.tabsAndActionsContainer.classList.remove("tabs-border-bottom"),this.tabsAndActionsContainer.style.removeProperty("--tabs-border-bottom-color"))}this.forEachTab(((e,t,i,o,s,n)=>{this.redrawTab(e,t,i,o,s,n)})),this.updateEditorActionsToolbar(),this.layout(this.dimensions,e)}redrawTab(t,i,o,s,n,r){const a=this.group.isSticky(i),c=this.accessor.partOptions;this.redrawTabLabel(t,i,o,s,n);const d=a?this.unpinEditorAction:this.closeEditorAction;r.hasAction(d)||(r.isEmpty()||r.clear(),r.push(d,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(d)}));const h=a&&"compact"===c.pinnedTabSizing?"off":c.tabCloseButton;for(const e of["off","left","right"])o.classList.toggle(`tab-actions-${e}`,h===e);const l=a&&"shrink"===c.pinnedTabSizing?"shrink":c.tabSizing;for(const e of["fit","shrink","fixed"])o.classList.toggle(`sizing-${e}`,l===e);o.classList.toggle("has-icon",c.showIcons&&c.hasIcons),o.classList.toggle("sticky",a);for(const e of["normal","compact","shrink"])o.classList.toggle(`sticky-${e}`,a&&c.pinnedTabSizing===e);if(!c.wrapTabs&&a&&"normal"!==c.pinnedTabSizing){let t=0;switch(c.pinnedTabSizing){case"compact":t=e.TAB_WIDTH.compact;break;case"shrink":t=e.TAB_WIDTH.shrink}o.style.left=i*t+"px"}else o.style.left="auto";this.redrawTabBorders(i,o),this.redrawTabActiveAndDirty(this.accessor.activeGroup===this.group,t,o,r)}redrawTabLabel(e,t,i,o,s){const n=this.accessor.partOptions;let r,a,c=!1,d=Boolean(n.decorations?.badges);"compact"===n.pinnedTabSizing&&this.group.isSticky(t)?(r=n.showIcons&&n.hasIcons?"":s.name?.charAt(0).toUpperCase(),a="",c=!0,d=!1):(r=s.name,a=s.description||""),s.ariaLabel&&(i.setAttribute("aria-label",s.ariaLabel),i.setAttribute("aria-description",""));const h=s.title||"";i.title=h,o.setResource({name:r,description:a,resource:Gi.zK.getOriginalUri(e,{supportSideBySide:Gi.YX.BOTH})},{title:h,extraClasses:(0,Y.kX)(["tab-label",d?"tab-label-has-badge":void 0].concat(e.getLabelExtraClasses())),italic:!this.group.isPinned(e),forceLabel:c,fileDecorations:{colors:Boolean(n.decorations?.colors),badges:d}});const l=Gi.zK.getOriginalUri(e,{supportSideBySide:Gi.YX.PRIMARY});l?i.setAttribute("data-resource-name",(0,Q.Hx)(l)):i.removeAttribute("data-resource-name")}redrawTabActiveAndDirty(e,t,i,o){const s=this.group.isActive(t),n=this.doRedrawTabDirty(e,s,t,i);this.doRedrawTabActive(e,!n,t,i,o)}doRedrawTabActive(e,t,i,o,s){if(this.group.isActive(i)){o.classList.add("active"),o.setAttribute("aria-selected","true"),o.tabIndex=0,o.style.backgroundColor=this.getColor(e?B.Ug:B.il)||"";const i=this.getColor(e?B._i:B.FB);i?(o.classList.add("tab-border-bottom"),o.style.setProperty("--tab-border-bottom-color",i.toString())):(o.classList.remove("tab-border-bottom"),o.style.removeProperty("--tab-border-bottom-color"));const n=t?this.getColor(e?B.ME:B.xR):void 0;n?(o.classList.add("tab-border-top"),o.style.setProperty("--tab-border-top-color",n.toString())):(o.classList.remove("tab-border-top"),o.style.removeProperty("--tab-border-top-color")),o.style.color=this.getColor(e?B.xJ:B.uE)||"",s.setFocusable(!0)}else o.classList.remove("active"),o.setAttribute("aria-selected","false"),o.tabIndex=-1,o.style.backgroundColor=this.getColor(e?B.$7:B.qM)||"",o.style.boxShadow="",o.style.color=this.getColor(e?B.ZE:B.rq)||"",s.setFocusable(!1)}doRedrawTabDirty(e,t,i,o){let s=!1;if(i.isDirty()&&!i.isSaving())if(o.classList.add("dirty"),this.accessor.partOptions.highlightModifiedTabs){let i;i=e&&t?this.getColor(B.Ld):e&&!t?this.getColor(B.yc):!e&&t?this.getColor(B._v):this.getColor(B.TN),i&&(s=!0,o.classList.add("dirty-border-top"),o.style.setProperty("--tab-dirty-border-top-color",i))}else o.classList.remove("dirty-border-top"),o.style.removeProperty("--tab-dirty-border-top-color");else o.classList.remove("dirty","dirty-border-top"),o.style.removeProperty("--tab-dirty-border-top-color");return s}redrawTabBorders(e,t){const i=(this.group.isSticky(e)&&this.group.stickyCount===e+1?this.getColor(B.rN):void 0)||this.getColor(B.Sh)||this.getColor(P.lRK);t.style.borderRight=i?`1px solid ${i}`:"",t.style.outlineColor=this.getColor(P.xL1)||""}prepareEditorActions(e){return this.accessor.activeGroup===this.group?e:{primary:e.primary.filter((e=>e.id===qo.yh)),secondary:e.secondary}}getHeight(){const e=this.breadcrumbsControl&&!this.breadcrumbsControl.isHidden();return this.dimensions.used?{total:this.dimensions.used.height,offset:e?this.dimensions.used.height-Ho.HEIGHT:this.dimensions.used.height}:this.computeHeight()}computeHeight(){let t;t=this.accessor.partOptions.wrapTabs&&this.tabsAndActionsContainer?.classList.contains("wrapping")?this.tabsAndActionsContainer.offsetHeight:e.TAB_HEIGHT;const i=t;return this.breadcrumbsControl&&!this.breadcrumbsControl.isHidden()&&(t+=Ho.HEIGHT),{total:t,offset:i}}layout(e,t){if(Object.assign(this.dimensions,e),!this.layoutScheduler.value){const e=(0,w.jL)((()=>{this.doLayout(this.dimensions,this.layoutScheduler.value?.options),this.layoutScheduler.clear()}));this.layoutScheduler.value={options:t,dispose:()=>e.dispose()}}return t?.forceRevealActiveTab&&(this.layoutScheduler.value.options={...this.layoutScheduler.value.options,forceRevealActiveTab:!0}),this.dimensions.used||(this.dimensions.used=new w.Ro(e.container.width,this.computeHeight().total)),this.dimensions.used}doLayout(e,t){const i=this.group.activeEditor?this.getTabAndIndex(this.group.activeEditor):void 0;if(i&&e.container!==w.Ro.None&&e.available!==w.Ro.None){this.doLayoutBreadcrumbs(e);const[o,s]=i;this.doLayoutTabs(o,s,e,t)}const o=this.dimensions.used,s=this.dimensions.used=new w.Ro(e.container.width,this.computeHeight().total);o&&o.height!==s.height&&this.group.relayout()}handleBreadcrumbsEnablementChange(){this.group.relayout()}doLayoutBreadcrumbs(e){this.breadcrumbsControl&&!this.breadcrumbsControl.isHidden()&&this.breadcrumbsControl.layout(new w.Ro(e.container.width,Ho.HEIGHT))}doLayoutTabs(e,t,i,o){this.doLayoutTabsWrapping(i)||this.doLayoutTabsNonWrapping(e,t,o)}doLayoutTabsWrapping(t){const[i,o,s,n]=(0,y.ld)(this.tabsAndActionsContainer,this.tabsContainer,this.editorToolbarContainer,this.tabsScrollbar),r=i.classList.contains("wrapping");let a=r;function c(e){a=e,i.classList.toggle("wrapping",a),o.style.setProperty("--last-tab-margin-right",a?`${s.offsetWidth}px`:"0")}if(this.accessor.partOptions.wrapTabs){const i=o.offsetWidth,n=o.scrollWidth,r=()=>{const e=this.getLastTab();return!e||!(e.offsetWidth+s.offsetWidth-t.available.width>1)};(a||n>i&&r())&&c(!0),a&&(o.offsetHeight>t.available.height||n===i&&o.offsetHeight===e.TAB_HEIGHT||!r())&&c(!1)}else r&&c(!1);if(a&&!r){const e=o.offsetWidth;n.setScrollDimensions({width:e,scrollWidth:e})}if(a){const e=new Map;let t,i;for(const s of o.children){const o=s,n=o.offsetTop;n!==t&&(t=n,i&&e.set(i,!0)),i=o,e.set(o,!1)}i&&e.set(i,!0);for(const[t,i]of e)t.classList.toggle("last-in-row",i)}return a}doLayoutTabsNonWrapping(t,i,o){const[s,n]=(0,y.ld)(this.tabsContainer,this.tabsScrollbar),r=s.offsetWidth,a=s.scrollWidth;let c=0;if(this.group.stickyCount>0){let t=0;switch(this.accessor.partOptions.pinnedTabSizing){case"compact":t=e.TAB_WIDTH.compact;break;case"shrink":t=e.TAB_WIDTH.shrink}c=this.group.stickyCount*t}let d,h,l="normal"!==this.accessor.partOptions.pinnedTabSizing&&this.group.isSticky(i),u=r-c;this.group.stickyCount>0&&u<e.TAB_WIDTH.fit?(s.classList.add("disable-sticky-tabs"),u=r,c=0,l=!1):s.classList.remove("disable-sticky-tabs"),this.blockRevealActiveTab||(d=t.offsetLeft,h=t.offsetWidth);const{width:p,scrollWidth:g}=n.getScrollDimensions();n.setScrollDimensions({width:r,scrollWidth:a});const m=p!==r||g!==a;if(this.blockRevealActiveTab||"number"!=typeof d||"number"!=typeof h||l||!m&&!o?.forceRevealActiveTab)return void(this.blockRevealActiveTab=!1);const v=n.getScrollPosition().scrollLeft,b=h<=u,f=d-c;b&&v+u<f+h?n.setScrollPosition({scrollLeft:v+(f+h-(v+u))}):(v>f||!b)&&n.setScrollPosition({scrollLeft:f})}getTabAndIndex(e){const t=this.group.getIndexOfEditor(e),i=this.getTabAtIndex(t);if(i)return[i,t]}getTabAtIndex(e){if(e>=0)return(0,y.cW)(this.tabsContainer).children[e]}getLastTab(){return this.getTabAtIndex(this.group.count-1)}blockRevealActiveTabOnce(){this.blockRevealActiveTab=!0}originatesFromTabActionBar(e){let t;return t=e instanceof MouseEvent?e.target||e.srcElement:e.initialTarget,!!(0,w.Fx)(t,"action-item","tab")}async onDrop(e,t,i){if(w.zB.stop(e,!0),this.updateDropFeedback(i,!1),i.classList.remove("scroll"),this.groupTransfer.hasData(G.r8.prototype)){const i=this.groupTransfer.getData(G.r8.prototype);if(Array.isArray(i)){const o=this.accessor.getGroup(i[0].identifier);if(o){const i={index:t};this.isMoveOperation(e,o.id)||(i.mode=0),this.accessor.mergeGroup(o,this.group,i)}this.group.focus(),this.groupTransfer.clearData(G.r8.prototype)}}else if(this.editorTransfer.hasData(G.L5.prototype)){const i=this.editorTransfer.getData(G.L5.prototype);if(Array.isArray(i)){const o=i[0].identifier,s=this.accessor.getGroup(o.groupId);s&&(this.isMoveOperation(e,o.groupId,o.editor)?s.moveEditor(o.editor,this.group,{index:t}):s.copyEditor(o.editor,this.group,{index:t})),this.group.focus(),this.editorTransfer.clearData(G.L5.prototype)}}else if(this.treeItemsTransfer.hasData(es.f.prototype)){const e=this.treeItemsTransfer.getData(es.f.prototype);if(Array.isArray(e)){const i=[];for(const o of e){const e=await this.treeViewsDragAndDropService.removeDragOperationTransfer(o.identifier);if(e){const o=await(0,G.W$)(e);i.push(...o.map((e=>({...e,options:{...e.options,pinned:!0,index:t}}))))}}this.editorService.openEditors(i,this.group,{validateTrust:!0})}this.treeItemsTransfer.clearData(es.f.prototype)}else this.instantiationService.createInstance(G.n5,{allowWorkspaceOpen:!1}).handleDrop(e,(()=>this.group),(()=>this.group.focus()),t)}isMoveOperation(e,t,i){return!!i?.hasCapability(8)||(!(e.ctrlKey&&!Ke.dz||e.altKey&&Ke.dz)||t===this.group.id)}dispose(){super.dispose(),this.tabDisposables=(0,p.B9)(this.tabDisposables)}};ts=(0,o.g)([(0,o.f)(3,O.i),(0,o.f)(4,c.TG),(0,o.f)(5,H.i6),(0,o.f)(6,N.d),(0,o.f)(7,F.lT),(0,o.f)(8,te.co),(0,o.f)(9,pt.eJ),(0,o.f)(10,M.XE),(0,o.f)(11,Ee.Ui),(0,o.f)(12,ft.sn),(0,o.f)(13,oi.AR),(0,o.f)(14,Xo.a),(0,o.f)(15,Po.Qw),(0,o.f)(16,Zo.m),(0,o.f)(17,Uo.es)],ts),(0,M.Ic)(((e,t)=>{const i=e.getColor(B.Sh);i&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title > .tabs-and-actions-container.wrapping .tabs-container > .tab {\n\t\t\t\tborder-bottom: 1px solid ${i};\n\t\t\t}\n\t\t`);const o=e.getColor(P.xL1);o&&t.addRule("\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:hover  {\n\t\t\t\toutline: 1px solid;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active {\n\t\t\t\toutline: 1px dotted;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\toutline: 1px dashed;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.dirty > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.sticky > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-actions .action-label {\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t");const s=e.getColor(P.lRK);s&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .editor-actions {\n\t\t\t\toutline: 1px solid ${s}\n\t\t\t}\n\t\t`);const n=e.getColor(B.Bk);n&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover  {\n\t\t\t\tbackground-color: ${n} !important;\n\t\t\t}\n\t\t`);const r=e.getColor(B.e5);r&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\tbackground-color: ${r} !important;\n\t\t\t}\n\t\t`);const a=e.getColor(B.B1);a&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover  {\n\t\t\t\tcolor: ${a} !important;\n\t\t\t}\n\t\t`);const c=e.getColor(B._Z);c&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\tcolor: ${c} !important;\n\t\t\t}\n\t\t`);const d=e.getColor(B.uK);d&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover > .tab-border-bottom-container {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${d};\n\t\t\t}\n\t\t`);const h=e.getColor(B.Iw);if(h&&t.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-border-bottom-container  {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${h};\n\t\t\t}\n\t\t`),!(0,Jo.c3)(e.type)&&!Qe.G6&&!o){const i=(0,B.Xp)(e),o=e.getColor(P.cvW),s=e.getColor(B.Fk),a=e.getColor(B.Xv);let c,d;s&&o&&(c=s.flatten(o,o,i)),s&&o&&a&&o&&(d=s.flatten(o,a,o,i));const h=(e,t,i=!1)=>`\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${e}, transparent) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":""} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${t}, transparent) !important;\n\t\t\t}\n\t\t`;if(n&&c&&d){const e=n.flatten(c),i=n.flatten(d);t.addRule(h(e,i,!0))}if(r&&c&&d){const e=r.flatten(c),i=r.flatten(d);t.addRule(h(e,i))}if(a&&d){const e=a.flatten(d);t.addRule(`\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${e}, transparent) !important;\n\t\t\t\t}\n\t\t`)}const l=(e,t,i,o)=>`\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${e}, transparent);\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-shrink${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${i?".active":":not(.active)"} > .title .tabs-container > .tab.sizing-fixed${o?".active":""}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${t}, transparent);\n\t\t\t\t}\n\t\t`,u=e.getColor(B.Ug);if(u&&c&&d){const e=u.flatten(c),i=u.flatten(d);t.addRule(l(e,i,!0,!0))}const p=e.getColor(B.il);if(p&&c&&d){const e=p.flatten(c),i=p.flatten(d);t.addRule(l(e,i,!1,!0))}const g=e.getColor(B.$7);if(g&&c&&d){const e=g.flatten(c),i=g.flatten(d);t.addRule(l(e,i,!0,!1))}const m=e.getColor(B.qM);if(m&&c&&d){const e=m.flatten(c),i=m.flatten(d);t.addRule(l(e,i,!1,!1))}}}));var is=i(14603),os=i(33425),ss=i(51944),ns=i(59523);let rs=class extends p.JT{get minimumWidth(){return this._activeEditorPane?.minimumWidth??Hi.Tj.width}get minimumHeight(){return this._activeEditorPane?.minimumHeight??Hi.Tj.height}get maximumWidth(){return this._activeEditorPane?.maximumWidth??Hi.ax.width}get maximumHeight(){return this._activeEditorPane?.maximumHeight??Hi.ax.height}get activeEditorPane(){return this._activeEditorPane}constructor(e,t,i,o,s,n,r,a,c){super(),this.editorGroupParent=e,this.editorPanesParent=t,this.groupView=i,this.layoutService=o,this.instantiationService=s,this.editorProgressService=n,this.workspaceTrustService=r,this.logService=a,this.dialogService=c,this._onDidFocus=this._register(new g.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidChangeSizeConstraints=this._register(new g.Q5),this.onDidChangeSizeConstraints=this._onDidChangeSizeConstraints.event,this._activeEditorPane=null,this.editorPanes=[],this.activeEditorPaneDisposables=this._register(new p.SL),this.editorOperation=this._register(new E.nR(this.editorProgressService)),this.editorPanesRegistry=h.B.as(Gi.bS.EditorPane),this.registerListeners()}registerListeners(){this._register(this.workspaceTrustService.onDidChangeTrust((()=>this.onDidChangeWorkspaceTrust())))}onDidChangeWorkspaceTrust(){const e=this._activeEditorPane?.input,t=this._activeEditorPane?.options;e?.hasCapability(16)&&this.groupView.openEditor(e,t)}async openEditor(e,t,i=Object.create(null)){try{return await this.doOpenEditor(this.getEditorPaneDescriptor(e),e,t,i)}catch(o){return t?.ignoreError?{error:o}:this.doShowError(o,e,t,i)}}async doShowError(e,t,i,o){this.logService.error(e);let s=!1;if(i?.source!==Qo.vU.USER||(0,Gi._I)(e)&&!e.allowDialog||(s=await this.doShowErrorDialog(e,t)),s)return{error:e};const n={...i};return(0,m.n2)(e)||(n.error=e),{...await this.doOpenEditor(ss.Zd.DESCRIPTOR,t,n,o),error:e}}async doShowErrorDialog(e,t){let i,o,s=is.Z.Error,n=(0,ns.yJ)(e);(0,Gi._I)(e)&&(o=e.actions,s=e.forceSeverity??is.Z.Error,e.forceMessage&&(i=e.message,n=void 0)),i||(i=(0,l.NC)("editorOpenErrorDialog","Unable to open '{0}'",t.getName()));const r=[];if(o&&o.length>0)for(const e of o)r.push({label:e.label,run:()=>e});else r.push({label:(0,l.NC)({key:"ok",comment:["&& denotes a mnemonic"]},"&&OK"),run:()=>{}});let a;1===r.length&&(a={run:()=>{c=!0}});let c=!1;const{result:d}=await this.dialogService.prompt({type:s,message:i,detail:n,buttons:r,cancelButton:a});if(d){const e=d.run();e instanceof Promise&&e.catch((e=>this.dialogService.error((0,ns.yJ)(e)))),c=!0}return c}async doOpenEditor(e,t,i,o=Object.create(null)){const s=this.doShowEditorPane(e),n=document.activeElement,{changed:r,cancelled:a}=await this.doSetInput(s,t,i,o),c=!i||!i.preserveFocus;return!a&&c&&this.shouldRestoreFocus(n)&&s.focus(),{pane:s,changed:r,cancelled:a}}shouldRestoreFocus(e){if(!this.layoutService.isRestored())return!0;if(!e)return!0;const t=document.activeElement;return!t||t===document.body||(!(e!==t)||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||!!(0,w.jg)(t,this.editorGroupParent))}getEditorPaneDescriptor(e){return e.hasCapability(16)&&!this.workspaceTrustService.isWorkspaceTrusted()?ss.vm.DESCRIPTOR:(0,y.cW)(this.editorPanesRegistry.getEditorPane(e))}doShowEditorPane(e){if(this._activeEditorPane&&e.describes(this._activeEditorPane))return this._activeEditorPane;this.doHideActiveEditorPane();const t=this.doCreateEditorPane(e);this.doSetActiveEditorPane(t);const i=(0,y.cW)(t.getContainer());return this.editorPanesParent.appendChild(i),(0,w.$Z)(i),t.setVisible(!0,this.groupView),this.pagePosition&&t.layout(new w.Ro(this.pagePosition.width,this.pagePosition.height),{top:this.pagePosition.top,left:this.pagePosition.left}),this.boundarySashes&&t.setBoundarySashes(this.boundarySashes),t}doCreateEditorPane(e){const t=this.doInstantiateEditorPane(e);if(!t.getContainer()){const e=document.createElement("div");e.classList.add("editor-instance"),t.create(e)}return t}doInstantiateEditorPane(e){const t=this.editorPanes.find((t=>e.describes(t)));if(t)return t;const i=this._register(e.instantiate(this.instantiationService));return this.editorPanes.push(i),i}doSetActiveEditorPane(e){this._activeEditorPane=e,this.activeEditorPaneDisposables.clear(),e&&(this.activeEditorPaneDisposables.add(e.onDidChangeSizeConstraints((e=>this._onDidChangeSizeConstraints.fire(e)))),this.activeEditorPaneDisposables.add(e.onDidFocus((()=>this._onDidFocus.fire())))),this._onDidChangeSizeConstraints.fire(void 0)}async doSetInput(e,t,i,o){const s=e.input?.matches(t);if(s&&!i?.forceReload)return e.setOptions(i),{changed:!1,cancelled:!1};const n=this.editorOperation.start(this.layoutService.isRestored()?800:3200);let r=!1;try{e.clearInput(),await e.setInput(t,i,o,n.token),n.isCurrent()||(r=!0)}catch(e){if(n.isCurrent())throw e;r=!0}finally{n.stop()}return{changed:!s,cancelled:r}}doHideActiveEditorPane(){if(!this._activeEditorPane)return;this.editorOperation.stop(),this.safeRun((()=>this._activeEditorPane?.clearInput())),this.safeRun((()=>this._activeEditorPane?.setVisible(!1,this.groupView)));const e=this._activeEditorPane.getContainer();e&&(this.editorPanesParent.removeChild(e),(0,w.Cp)(e)),this.doSetActiveEditorPane(null)}closeEditor(e){this._activeEditorPane?.input&&e.matches(this._activeEditorPane.input)&&this.doHideActiveEditorPane()}setVisible(e){this.safeRun((()=>this._activeEditorPane?.setVisible(e,this.groupView)))}layout(e){this.pagePosition=e,this.safeRun((()=>this._activeEditorPane?.layout(new w.Ro(e.width,e.height),e)))}setBoundarySashes(e){this.boundarySashes=e,this.safeRun((()=>this._activeEditorPane?.setBoundarySashes(e)))}safeRun(e){try{e()}catch(e){this.logService.error(e)}}};rs=(0,o.g)([(0,o.f)(3,V.ze),(0,o.f)(4,c.TG),(0,o.f)(5,E.ek),(0,o.f)(6,os.Y2),(0,o.f)(7,Z.VZ),(0,o.f)(8,Ct.Ss)],rs),(0,d.Z)('.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container{align-items:center;display:flex;flex:auto;height:35px;justify-content:flex-start;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label{line-height:35px;overflow:hidden;padding-left:20px;position:relative;text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label>.monaco-icon-label-container{flex:initial}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .no-tabs.title-label{flex:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control{flex:1 50%;margin-left:.45em;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item{font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.preview .monaco-breadcrumb-item{font-style:italic}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:before{background-image:none;content:"/";height:inherit;opacity:1;width:inherit}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.backslash-path .monaco-breadcrumb-item:before{content:"\\\\"}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder+.monaco-breadcrumb-item:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.relative-path .monaco-breadcrumb-item:nth-child(2):before,.monaco-workbench.windows .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:nth-child(2):before{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:after{content:"\\00a0\\00a0";padding:0}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon[class*=codicon-symbol-]{padding:0 1px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon:last-child{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-icon-label:before{height:18px;padding-right:2px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions{display:flex;flex:initial;height:35px;opacity:.5;padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title>.title-actions{opacity:1}',{});class as extends $o{constructor(){super(...arguments),this.activeLabel=Object.create(null)}static{this.HEIGHT=35}create(e){const t=this.titleContainer=e;t.draggable=!0,this.registerContainerListeners(t),this._register(U.o.addTarget(t));const i=document.createElement("div");i.classList.add("label-container"),t.appendChild(i),this.editorLabel=this._register(this.instantiationService.createInstance($i.mn,i,void 0)).element,this._register((0,w.nm)(this.editorLabel.element,w.tw.CLICK,(e=>this.onTitleLabelClick(e)))),this.createBreadcrumbsControl(i,{showFileIcons:!1,showSymbolIcons:!0,showDecorationColors:!1,widgetStyles:{...A.Db,breadcrumbsBackground:vi.Il.transparent.toString()},showPlaceholder:!1}),t.classList.toggle("breadcrumbs",Boolean(this.breadcrumbsControl)),this._register((0,p.OF)((()=>t.classList.remove("breadcrumbs"))));const o=document.createElement("div");o.classList.add("title-actions"),t.appendChild(o),this.createEditorActionsToolBar(o)}registerContainerListeners(e){this.enableGroupDragging(e),this._register((0,w.nm)(e,w.tw.DBLCLICK,(e=>this.onTitleDoubleClick(e)))),this._register((0,w.nm)(e,w.tw.AUXCLICK,(e=>this.onTitleAuxClick(e)))),this._register((0,w.nm)(e,U.t.Tap,(e=>this.onTitleTap(e))));for(const t of[w.tw.CONTEXT_MENU,U.t.Contextmenu])this._register((0,w.nm)(e,t,(t=>{this.group.activeEditor&&this.onContextMenu(this.group.activeEditor,t,e)})))}onTitleLabelClick(e){w.zB.stop(e,!1),setTimeout((()=>this.quickInputService.quickAccess.show()))}onTitleDoubleClick(e){w.zB.stop(e),this.group.pinEditor()}onTitleAuxClick(e){1===e.button&&this.group.activeEditor&&(w.zB.stop(e,!0),this.group.closeEditor(this.group.activeEditor))}onTitleTap(e){const t=e.initialTarget;t instanceof HTMLElement&&this.editorLabel&&(0,w.jg)(t,this.editorLabel.element)&&setTimeout((()=>this.quickInputService.quickAccess.show()),50)}openEditor(e){this.doHandleOpenEditor()}openEditors(e){this.doHandleOpenEditor()}doHandleOpenEditor(){this.ifActiveEditorChanged((()=>this.redraw()))||this.ifActiveEditorPropertiesChanged((()=>this.redraw()))}beforeCloseEditor(e){}closeEditor(e){this.ifActiveEditorChanged((()=>this.redraw()))}closeEditors(e){this.ifActiveEditorChanged((()=>this.redraw()))}moveEditor(e,t,i){this.ifActiveEditorChanged((()=>this.redraw()))}pinEditor(e){this.ifEditorIsActive(e,(()=>this.redraw()))}stickEditor(e){}unstickEditor(e){}setActive(e){this.redraw()}updateEditorLabel(e){this.ifEditorIsActive(e,(()=>this.redraw()))}updateEditorDirty(e){this.ifEditorIsActive(e,(()=>{const t=(0,y.cW)(this.titleContainer);e.isDirty()&&!e.isSaving()?t.classList.add("dirty"):t.classList.remove("dirty")}))}updateOptions(e,t){e.labelFormat===t.labelFormat&&(0,Yo.fS)(e.decorations,t.decorations)||this.redraw()}updateStyles(){this.redraw()}handleBreadcrumbsEnablementChange(){(0,y.cW)(this.titleContainer).classList.toggle("breadcrumbs",Boolean(this.breadcrumbsControl)),this.redraw()}ifActiveEditorChanged(e){return!(!(!this.activeLabel.editor&&this.group.activeEditor||this.activeLabel.editor&&!this.group.activeEditor)&&this.activeLabel.editor&&this.group.isActive(this.activeLabel.editor)||(e(),0))}ifActiveEditorPropertiesChanged(e){this.activeLabel.editor&&this.group.activeEditor&&this.activeLabel.pinned!==this.group.isPinned(this.group.activeEditor)&&e()}ifEditorIsActive(e,t){this.group.isActive(e)&&t()}redraw(){const e=(0,y.f6)(this.group.activeEditor),t=this.accessor.partOptions,i=!!e&&this.group.isPinned(e),o=this.accessor.activeGroup===this.group;this.activeLabel={editor:e,pinned:i},this.breadcrumbsControl&&(o?(this.breadcrumbsControl.update(),this.breadcrumbsControl.domNode.classList.toggle("preview",!i)):this.breadcrumbsControl.hide());const[s,n]=(0,y.ld)(this.titleContainer,this.editorLabel);if(e){this.updateEditorDirty(e);const{labelFormat:r}=this.accessor.partOptions;let a;a=this.breadcrumbsControl&&!this.breadcrumbsControl.isHidden()?"":("default"!==r||o)&&e.getDescription(this.getVerbosity(r))||"";let c=e.getTitle(2);a===c&&(c=""),n.setResource({resource:Gi.zK.getOriginalUri(e,{supportSideBySide:Gi.YX.BOTH}),name:e.getName(),description:a},{title:c,italic:!i,extraClasses:["no-tabs","title-label"].concat(e.getLabelExtraClasses()),fileDecorations:{colors:Boolean(t.decorations?.colors),badges:Boolean(t.decorations?.badges)}}),s.style.color=o?this.getColor(B.xJ)||"":this.getColor(B.uE)||"",this.updateEditorActionsToolbar()}else s.classList.remove("dirty"),n.clear(),this.clearEditorActionsToolbar()}getVerbosity(e){switch(e){case"short":return 0;case"long":return 2;default:return 1}}prepareEditorActions(e){return this.accessor.activeGroup===this.group?e:{primary:e.primary.filter((e=>e.id===qo.$Z||e.id===qo.yh)),secondary:e.secondary}}getHeight(){return{total:as.HEIGHT,offset:0}}layout(e){return this.breadcrumbsControl?.layout(void 0),new w.Ro(e.container.width,this.getHeight().total)}}var cs=i(73536),ds=i(46445),hs=i(22384);const ls={text:l.NC("watermark.showCommands","Show All Commands"),id:"workbench.action.showCommands"},us={text:l.NC("watermark.quickAccess","Go to File"),id:"workbench.action.quickOpen"},ps={text:l.NC("watermark.openFile","Open File"),id:"workbench.action.files.openFile",mac:!1},gs={text:l.NC("watermark.openFolder","Open Folder"),id:"workbench.action.files.openFolder",mac:!1},ms={text:l.NC("watermark.openFileFolder","Open File or Folder"),id:"workbench.action.files.openFileFolder",mac:!0},vs={text:l.NC("watermark.openRecent","Open Recent"),id:"workbench.action.openRecent"},bs={text:l.NC("watermark.newUntitledFile","New Untitled Text File"),id:"workbench.action.files.newUntitledFile"},fs=Object.assign({mac:!0},bs),ws={text:l.NC("watermark.findInFiles","Find in Files"),id:"workbench.action.findInFiles"},ys={text:l.NC({key:"watermark.toggleTerminal",comment:["toggle is a verb here"]},"Toggle Terminal"),id:"workbench.action.terminal.toggleTerminal",when:H.Ao.equals("terminalProcessSupported",!0)},Cs={text:l.NC("watermark.startDebugging","Start Debugging"),id:"workbench.action.debug.start",when:H.Ao.equals("terminalProcessSupported",!0)},Ss={text:l.NC({key:"watermark.toggleFullscreen",comment:["toggle is a verb here"]},"Toggle Full Screen"),id:"workbench.action.toggleFullScreen",when:H.Ao.equals("terminalProcessSupported",!0).negate()},_s={text:l.NC("watermark.showSettings","Show Settings"),id:"workbench.action.openSettings",when:H.Ao.equals("terminalProcessSupported",!0).negate()},Es=[ls,ps,gs,ms,vs,fs],xs=[ls,us,ws,Cs,ys,Ss,_s];let ks=class extends p.JT{constructor(e,t,i,o,s,n,r){super(),this.lifecycleService=t,this.keybindingService=i,this.contextService=o,this.contextKeyService=s,this.configurationService=n,this.telemetryService=r,this.transientDisposables=this._register(new p.SL),this.enabled=!1;const a=(0,w.h)(".editor-group-watermark",[(0,w.h)(".letterpress"),(0,w.h)(".shortcuts@shortcuts")]);(0,w.R3)(e,a.root),this.shortcuts=a.shortcuts,this.registerListeners(),this.workbenchState=o.getWorkbenchState(),this.render()}registerListeners(){this.lifecycleService.onDidShutdown((()=>this.dispose())),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("workbench.tips.enabled")&&this.render()}))),this._register(this.contextService.onDidChangeWorkbenchState((e=>{this.workbenchState!==e&&(this.workbenchState=e,this.render())})));const e=[...Es,...xs].filter((e=>void 0!==e.when)).map((e=>e.when)),t=new Set;e.forEach((e=>e.keys().forEach((e=>t.add(e))))),this._register(this.contextKeyService.onDidChangeContext((e=>{e.affectsSome(t)&&this.render()})))}render(){const e=this.configurationService.getValue("workbench.tips.enabled");if(e===this.enabled)return;if(this.enabled=e,this.clear(),!e)return;const t=(0,w.R3)(this.shortcuts,(0,w.$)(".watermark-box"));(1!==this.workbenchState?xs:Es).filter((e=>!("when"in e)||this.contextKeyService.contextMatchesRules(e.when))).filter((e=>!("mac"in e)||e.mac===(Ke.dz&&!Ke.$L))).filter((e=>!!ht.P.getCommand(e.id)));const i=()=>{(0,w.PO)(t)};i(),this.transientDisposables.add(this.keybindingService.onDidUpdateKeybindings(i)),this.telemetryService.publicLog("watermark:open")}clear(){(0,w.PO)(this.shortcuts),this.transientDisposables.clear()}dispose(){super.dispose(),this.clear()}};ks=(0,o.g)([(0,o.f)(1,hs.g),(0,o.f)(2,N.d),(0,o.f)(3,gt.ec),(0,o.f)(4,H.i6),(0,o.f)(5,Ee.Ui),(0,o.f)(6,j.bU)],ks);let Ds=class e extends M.bB{static createNew(t,i,o){return o.createInstance(e,t,null,i)}static createFromSerialized(t,i,o,s){return s.createInstance(e,i,t,o)}static createCopy(t,i,o,s){return s.createInstance(e,i,t,o)}constructor(t,i,o,s,n,r,a,c,d,h,l,u,m,v,f){super(r),this.accessor=t,this._index=o,this.instantiationService=s,this.contextKeyService=n,this.telemetryService=a,this.keybindingService=c,this.menuService=d,this.contextMenuService=h,this.fileDialogService=l,this.editorService=u,this.filesConfigurationService=m,this.uriIdentityService=v,this.logService=f,this._onDidFocus=this._register(new g.Q5),this.onDidFocus=this._onDidFocus.event,this._onWillDispose=this._register(new g.Q5),this.onWillDispose=this._onWillDispose.event,this._onDidModelChange=this._register(new g.Q5),this.onDidModelChange=this._onDidModelChange.event,this._onDidActiveEditorChange=this._register(new g.Q5),this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this._onDidOpenEditorFail=this._register(new g.Q5),this.onDidOpenEditorFail=this._onDidOpenEditorFail.event,this._onWillCloseEditor=this._register(new g.Q5),this.onWillCloseEditor=this._onWillCloseEditor.event,this._onDidCloseEditor=this._register(new g.Q5),this.onDidCloseEditor=this._onDidCloseEditor.event,this._onWillMoveEditor=this._register(new g.Q5),this.onWillMoveEditor=this._onWillMoveEditor.event,this._onWillOpenEditor=this._register(new g.Q5),this.onWillOpenEditor=this._onWillOpenEditor.event,this.disposedEditorsWorker=this._register(new je.F7((e=>this.handleDisposedEditors(e)),0)),this.mapEditorToPendingConfirmation=new Map,this.containerToolBarMenuDisposable=this._register(new p.XK),this.whenRestoredPromise=new je.CR,this.whenRestored=this.whenRestoredPromise.p,this._disposed=!1,this.element=document.createElement("div"),this._onDidChange=this._register(new g.ZD),this.onDidChange=this._onDidChange.event,i instanceof e?this.model=this._register(i.model.clone()):(0,zi.Ti)(i)?this.model=this._register(s.createInstance(zi.gn,i)):this.model=this._register(s.createInstance(zi.gn,void 0)),this.scopedContextKeyService=this._register(this.contextKeyService.createScoped(this.element)),this.element.classList.add("editor-group-container"),this.registerContainerListeners(),this.createContainerToolbar(),this.createContainerContextMenu(),this._register(this.instantiationService.createInstance(ks,this.element)),this.progressBar=this._register(new b.k(this.element,A.b5)),this.progressBar.hide(),this.scopedInstantiationService=this.instantiationService.createChild(new _.y([H.i6,this.scopedContextKeyService],[E.ek,this._register(new k.dZ(this.progressBar,this))])),this.handleGroupContextKeys(),this.titleContainer=document.createElement("div"),this.titleContainer.classList.add("title"),this.element.appendChild(this.titleContainer),this.titleAreaControl=this.createTitleAreaControl(),this.editorContainer=document.createElement("div"),this.editorContainer.classList.add("editor-container"),this.element.appendChild(this.editorContainer),this.editorPane=this._register(this.scopedInstantiationService.createInstance(rs,this.element,this.editorContainer,this)),this._onDidChange.input=this.editorPane.onDidChangeSizeConstraints,this.doTrackFocus(),this.updateTitleContainer(),this.updateContainer(),this.updateStyles(),(this.restoreEditors(i)??Promise.resolve()).finally((()=>{this.whenRestoredPromise.complete()})),this.registerListeners()}handleGroupContextKeys(){const e=L.$w.bindTo(this.scopedContextKeyService),t=L.gI.bindTo(this.scopedContextKeyService),i=L.lr.bindTo(this.scopedContextKeyService),o=L._B.bindTo(this.scopedContextKeyService),s=L.Vq.bindTo(this.scopedContextKeyService),n=L.mA.bindTo(this.scopedContextKeyService),r=L.sp.bindTo(this.scopedContextKeyService),a=new p.XK,c=()=>{a.clear();const t=this.model.activeEditor;t?(e.set(t.isDirty()&&!t.isSaving()),a.value=t.onDidChangeDirty((()=>{e.set(t.isDirty()&&!t.isSaving())}))):e.set(!1)};this._register(this.onDidModelChange((e=>{switch(e.kind){case 2:r.set(this.isLocked);break;case 6:case 4:case 3:case 5:i.set(this.model.isFirst(this.model.activeEditor)),o.set(this.model.isLast(this.model.activeEditor));break;case 9:e.editor&&e.editor===this.model.activeEditor&&t.set(this.model.isPinned(this.model.activeEditor));break;case 10:e.editor&&e.editor===this.model.activeEditor&&s.set(this.model.isSticky(this.model.activeEditor))}n.set(this.count)}))),this._register(this.onDidActiveEditorChange((()=>{c()}))),c()}registerContainerListeners(){this._register((0,w.nm)(this.element,w.tw.DBLCLICK,(e=>{this.isEmpty&&(w.zB.stop(e),this.editorService.openEditor({resource:void 0,options:{pinned:!0,override:Gi.Cr.id}},this.id))}))),this._register((0,w.nm)(this.element,w.tw.AUXCLICK,(e=>{this.isEmpty&&1===e.button&&(w.zB.stop(e,!0),this.accessor.removeGroup(this))})))}createContainerToolbar(){const e=document.createElement("div");e.classList.add("editor-group-container-toolbar"),this.element.appendChild(e);const t=this._register(new v.o(e,{ariaLabel:(0,l.NC)("ariaLabelGroupActions","Empty editor group actions")})),i=this._register(this.menuService.createMenu(te.eH.EmptyEditorGroup,this.scopedContextKeyService)),o=()=>{const e={primary:[],secondary:[]};this.containerToolBarMenuDisposable.value=(0,p.OF)((()=>t.clear())),(0,x.vr)(i,{arg:{groupId:this.id},shouldForwardArgs:!0},e,"navigation");for(const i of[...e.primary,...e.secondary]){const e=this.keybindingService.lookupKeybinding(i.id);t.push(i,{icon:!0,label:!1,keybinding:e?.getLabel()})}};o(),this._register(i.onDidChange(o))}createContainerContextMenu(){this._register((0,w.nm)(this.element,w.tw.CONTEXT_MENU,(e=>this.onShowContainerContextMenu(e)))),this._register((0,w.nm)(this.element,U.t.Contextmenu,(()=>this.onShowContainerContextMenu())))}onShowContainerContextMenu(e){if(!this.isEmpty)return;let t=this.element;e instanceof MouseEvent&&(t=new W.nV(e)),this.contextMenuService.showContextMenu({menuId:te.eH.EmptyEditorGroupContext,contextKeyService:this.contextKeyService,getAnchor:()=>t,onHide:()=>{this.focus()}})}doTrackFocus(){const e=this._register((0,w.go)(this.element));this._register(e.onDidFocus((()=>{this.isEmpty&&this._onDidFocus.fire()})));const t=e=>{let t;if(e instanceof MouseEvent){if(0!==e.button||Ke.dz&&e.ctrlKey)return;t=e.target}else t=e.initialTarget;(0,w.Fx)(t,"monaco-action-bar",this.titleContainer)||(0,w.Fx)(t,"monaco-breadcrumb-item",this.titleContainer)||setTimeout((()=>{this.focus()}))};this._register((0,w.nm)(this.titleContainer,w.tw.MOUSE_DOWN,(e=>t(e)))),this._register((0,w.nm)(this.titleContainer,U.t.Tap,(e=>t(e)))),this._register(this.editorPane.onDidFocus((()=>{this._onDidFocus.fire()})))}updateContainer(){this.isEmpty?(this.element.classList.add("empty"),this.element.tabIndex=0,this.element.setAttribute("aria-label",(0,l.NC)("emptyEditorGroup","{0} (empty)",this.label))):(this.element.classList.remove("empty"),this.element.removeAttribute("tabIndex"),this.element.removeAttribute("aria-label")),this.updateStyles()}updateTitleContainer(){this.titleContainer.classList.toggle("tabs",this.accessor.partOptions.showTabs),this.titleContainer.classList.toggle("show-file-icons",this.accessor.partOptions.showIcons)}createTitleAreaControl(){return this.titleAreaControl&&(this.titleAreaControl.dispose(),(0,w.PO)(this.titleContainer)),this.accessor.partOptions.showTabs?this.titleAreaControl=this.scopedInstantiationService.createInstance(ts,this.titleContainer,this.accessor,this):this.titleAreaControl=this.scopedInstantiationService.createInstance(as,this.titleContainer,this.accessor,this),this.titleAreaControl}restoreEditors(t){if(0===this.count)return;let i;i=t instanceof e?(0,Hi.J8)(t):Object.create(null);const o=this.model.activeEditor;if(!o)return;i.pinned=this.model.isPinned(o),i.sticky=this.model.isSticky(o),i.preserveFocus=!0;const s=document.activeElement;return this.doShowEditor(o,{active:!0,isNew:!1},i).then((()=>{this.accessor.activeGroup===this&&s===document.activeElement&&this.focus()}))}registerListeners(){this._register(this.model.onDidModelChange((e=>this.onDidGroupModelChange(e)))),this._register(this.accessor.onDidChangeEditorPartOptions((e=>this.onDidChangeEditorPartOptions(e)))),this._register(this.accessor.onDidVisibilityChange((e=>this.onDidVisibilityChange(e))))}onDidGroupModelChange(e){if(this._onDidModelChange.fire(e),e.editor)switch(e.kind){case 3:(0,zi.$X)(e)&&this.onDidOpenEditor(e.editor,e.editorIndex);break;case 4:(0,zi.VL)(e)&&this.handleOnDidCloseEditor(e.editor,e.editorIndex,e.context,e.sticky);break;case 12:this.onWillDisposeEditor(e.editor);break;case 11:this.onDidChangeEditorDirty(e.editor);break;case 7:this.onDidChangeEditorLabel(e.editor)}}onDidOpenEditor(e,t){this.telemetryService.publicLog("editorOpened",this.toEditorTelemetryDescriptor(e)),this.updateContainer()}handleOnDidCloseEditor(e,t,i,o){this._onWillCloseEditor.fire({groupId:this.id,editor:e,context:i,index:t,sticky:o});const s=[e];e instanceof Ui.h&&s.push(e.primary,e.secondary);for(const e of s)this.canDispose(e)&&e.dispose();this.telemetryService.publicLog("editorClosed",this.toEditorTelemetryDescriptor(e)),this.updateContainer(),this._onDidCloseEditor.fire({groupId:this.id,editor:e,context:i,index:t,sticky:o})}canDispose(t){for(const i of this.accessor.groups)if(i instanceof e&&i.model.contains(t,{strictEquals:!0,supportSideBySide:Gi.YX.ANY}))return!1;return!0}toEditorTelemetryDescriptor(e){const t=e.getTelemetryDescriptor(),i=Gi.zK.getOriginalUri(e),o=i?i.scheme===mo.lg.file?i.fsPath:i.path:void 0;if(i&&o){let e=(0,Q.DZ)(i);const s=e.indexOf("?");return e=-1!==s?e.substr(0,s):e,t.resource={mimeType:new ds.NE((0,cs.hm)(i).join(", ")),scheme:i.scheme,ext:e,path:(0,Rt.vp)(o)},t}return t}onWillDisposeEditor(e){this.disposedEditorsWorker.work(e)}handleDisposedEditors(e){let t;const i=[];for(const o of e){const e=this.model.findEditor(o);if(!e)continue;const s=e[0];s.isDisposed()&&(this.model.isActive(s)?t=s:i.push(s))}for(const e of i)this.doCloseEditor(e,!1);t&&this.doCloseEditor(t,!1)}onDidChangeEditorPartOptions(e){this.updateTitleContainer(),e.oldPartOptions.showTabs!==e.newPartOptions.showTabs?(this.createTitleAreaControl(),this.relayout(),this.model.activeEditor&&this.titleAreaControl.openEditor(this.model.activeEditor)):this.titleAreaControl.updateOptions(e.oldPartOptions,e.newPartOptions),this.updateStyles(),e.oldPartOptions.enablePreview&&!e.newPartOptions.enablePreview&&this.model.previewEditor&&this.pinEditor(this.model.previewEditor)}onDidChangeEditorDirty(e){this.pinEditor(e),this.titleAreaControl.updateEditorDirty(e)}onDidChangeEditorLabel(e){this.titleAreaControl.updateEditorLabel(e)}onDidVisibilityChange(e){this.editorPane.setVisible(e)}get index(){return this._index}get label(){return(0,l.NC)("groupLabel","Group {0}",this._index+1)}get ariaLabel(){return(0,l.NC)("groupAriaLabel","Editor Group {0}",this._index+1)}get disposed(){return this._disposed}get isEmpty(){return 0===this.count}get titleHeight(){return this.titleAreaControl.getHeight()}notifyIndexChanged(e){this._index!==e&&(this._index=e,this.model.setIndex(e))}setActive(e){this.active=e,this.element.classList.toggle("active",e),this.element.classList.toggle("inactive",!e),this.titleAreaControl.setActive(e),this.updateStyles(),this.model.setActive(void 0)}get id(){return this.model.id}get editors(){return this.model.getEditors(1)}get count(){return this.model.count}get stickyCount(){return this.model.stickyCount}get activeEditorPane(){return this.editorPane?(0,y.f6)(this.editorPane.activeEditorPane):void 0}get activeEditor(){return this.model.activeEditor}get previewEditor(){return this.model.previewEditor}isPinned(e){return this.model.isPinned(e)}isSticky(e){return this.model.isSticky(e)}isActive(e){return this.model.isActive(e)}contains(e,t){return this.model.contains(e,t)}getEditors(e,t){return this.model.getEditors(e,t)}findEditors(e,t){const i=this.uriIdentityService.asCanonicalUri(e);return this.getEditors(1).filter((e=>{if(e.resource&&(0,Q.Xy)(e.resource,i))return!0;if(t?.supportSideBySide===Gi.YX.PRIMARY||t?.supportSideBySide===Gi.YX.ANY){const t=Gi.zK.getCanonicalUri(e,{supportSideBySide:Gi.YX.PRIMARY});if(t&&(0,Q.Xy)(t,i))return!0}if(t?.supportSideBySide===Gi.YX.SECONDARY||t?.supportSideBySide===Gi.YX.ANY){const t=Gi.zK.getCanonicalUri(e,{supportSideBySide:Gi.YX.SECONDARY});if(t&&(0,Q.Xy)(t,i))return!0}return!1}))}getEditorByIndex(e){return this.model.getEditorByIndex(e)}getIndexOfEditor(e){return this.model.indexOf(e)}isFirst(e){return this.model.isFirst(e)}isLast(e){return this.model.isLast(e)}focus(){this.activeEditorPane?this.activeEditorPane.focus():this.element.focus(),this._onDidFocus.fire()}pinEditor(e=this.activeEditor||void 0){if(e&&!this.model.isPinned(e)){const t=this.model.pin(e);t&&this.titleAreaControl.pinEditor(t)}}stickEditor(e=this.activeEditor||void 0){this.doStickEditor(e,!0)}unstickEditor(e=this.activeEditor||void 0){this.doStickEditor(e,!1)}doStickEditor(e,t){if(e&&this.model.isSticky(e)!==t){const i=this.getIndexOfEditor(e),o=t?this.model.stick(e):this.model.unstick(e);if(!o)return;const s=this.getIndexOfEditor(o);s!==i&&this.titleAreaControl.moveEditor(o,i,s),t?this.titleAreaControl.stickEditor(o):this.titleAreaControl.unstickEditor(o)}}async openEditor(e,t){return this.doOpenEditor(e,t,{supportSideBySide:Gi.YX.BOTH})}async doOpenEditor(e,t,i){if(!e||e.isDisposed())return;this._onWillOpenEditor.fire({editor:e,groupId:this.id});const o=t?.sticky||!this.accessor.partOptions.enablePreview||e.isDirty()||(t?.pinned??"number"==typeof t?.index)||"number"==typeof t?.index&&this.model.isSticky(t.index)||e.hasCapability(512),s={index:t?t.index:void 0,pinned:o,sticky:t?.sticky||"number"==typeof t?.index&&this.model.isSticky(t.index),active:0===this.count||!t||!t.inactive,supportSideBySide:i?.supportSideBySide};t?.sticky&&"number"==typeof t?.index&&!this.model.isSticky(t.index)&&(s.sticky=!1),s.active||s.pinned||!this.model.activeEditor||this.model.isPinned(this.model.activeEditor)||(s.active=!0);let n=!1,r=!1;if(t?.activation===Qo.kn.ACTIVATE?n=!0:t?.activation===Qo.kn.RESTORE?r=!0:t?.activation===Qo.kn.PRESERVE?(n=!1,r=!1):s.active&&(n=!t||!t.preserveFocus,r=!n),"number"==typeof s.index){const t=this.model.indexOf(e);-1!==t&&t!==s.index&&this.doMoveEditorInsideGroup(e,s)}const{editor:a,isNew:c}=this.model.openEditor(e,s);c&&1===this.count&&this.accessor.groups.length>1&&a.editorId&&this.accessor.partOptions.autoLockGroups?.has(a.editorId)&&this.lock(!0);const d=this.doShowEditor(a,{active:!!s.active,isNew:c},t,i);return n?this.accessor.activateGroup(this):r&&this.accessor.restoreGroup(this),d}doShowEditor(e,t,i,o){let s;return s=t.active?(async()=>{const{pane:o,changed:s,cancelled:n,error:r}=await this.editorPane.openEditor(e,i,{newInGroup:t.isNew});if(!n){if(s&&this._onDidActiveEditorChange.fire({editor:e}),r&&this._onDidOpenEditorFail.fire(e),!o&&this.activeEditor===e){const t=!i||!i.preserveFocus;this.doCloseEditor(e,t,{fromError:!0})}return o}})():Promise.resolve(void 0),o?.skipTitleUpdate||this.titleAreaControl.openEditor(e),s}async openEditors(e){const t=(0,Y.kX)(e).filter((({editor:e})=>!e.isDisposed())),i=(0,Y.Xh)(t);if(!i)return;const o={supportSideBySide:Gi.YX.BOTH};await this.doOpenEditor(i.editor,i.options,o);const s=t.slice(1),n=this.getIndexOfEditor(i.editor)+1;return await je.jT.settled(s.map((({editor:e,options:t},i)=>this.doOpenEditor(e,{...t,inactive:!0,pinned:!0,index:n+i},{...o,skipTitleUpdate:!0})))),this.titleAreaControl.openEditors(s.map((({editor:e})=>e))),(0,y.f6)(this.editorPane.activeEditorPane)}moveEditors(e,t){const i={skipTitleUpdate:this!==t};for(const{editor:o,options:s}of e)this.moveEditor(o,t,s,i);if(i.skipTitleUpdate){const i=e.map((({editor:e})=>e));t.titleAreaControl.openEditors(i),this.titleAreaControl.closeEditors(i)}}moveEditor(e,t,i,o){this===t?this.doMoveEditorInsideGroup(e,i):this.doMoveOrCopyEditorAcrossGroups(e,t,i,{...o,keepCopy:!1})}doMoveEditorInsideGroup(e,t){const i=t?t.index:void 0;if("number"!=typeof i)return;const o=this.model.indexOf(e);if(-1===o||o===i)return;const s=this.model.getEditorByIndex(o);s&&(this.model.moveEditor(s,i),this.model.pin(s),this.titleAreaControl.moveEditor(s,o,i),this.titleAreaControl.pinEditor(s))}doMoveOrCopyEditorAcrossGroups(e,t,i,o){const s=o?.keepCopy,n=(0,Hi.J8)(this,e,{...i,pinned:!0,sticky:!s&&this.model.isSticky(e)});s||this._onWillMoveEditor.fire({groupId:this.id,editor:e,target:t.id}),t.doOpenEditor(s?e.copy():e,n,o),s||this.doCloseEditor(e,!1,{...o,context:Gi.Bb.MOVE})}copyEditors(e,t){const i={skipTitleUpdate:this!==t};for(const{editor:o,options:s}of e)this.copyEditor(o,t,s,i);if(i.skipTitleUpdate){const i=e.map((({editor:e})=>e));t.titleAreaControl.openEditors(i)}}copyEditor(e,t,i,o){this===t?this.doMoveEditorInsideGroup(e,i):this.doMoveOrCopyEditorAcrossGroups(e,t,i,{...o,keepCopy:!0})}async closeEditor(e=this.activeEditor||void 0,t){return this.doCloseEditorWithConfirmationHandling(e,t)}async doCloseEditorWithConfirmationHandling(e=this.activeEditor||void 0,t,i){return!!e&&(!await this.handleCloseConfirmation([e])&&(this.doCloseEditor(e,!t?.preserveFocus&&void 0,i),!0))}doCloseEditor(e,t=this.accessor.activeGroup===this,i){i?.skipTitleUpdate||this.titleAreaControl.beforeCloseEditor(e),this.model.isActive(e)?this.doCloseActiveEditor(t,i):this.doCloseInactiveEditor(e,i),i?.skipTitleUpdate||this.titleAreaControl.closeEditor(e)}doCloseActiveEditor(e=this.accessor.activeGroup===this,t){const i=this.activeEditor,o=this.shouldRestoreFocus(this.element),s=this.accessor.partOptions.closeEmptyGroups;if(s&&this.active&&1===this.count){const e=this.accessor.getGroups(1)[1];e&&(o?e.focus():this.accessor.activateGroup(e))}i&&this.model.closeEditor(i,t?.context);const n=this.model.activeEditor;if(n){const i=!e;let o;i&&this.accessor.activeGroup!==this&&(o=Qo.kn.PRESERVE);const s={preserveFocus:i,activation:o,ignoreError:t?.fromError};this.doOpenEditor(n,s)}else i&&this.editorPane.closeEditor(i),o&&!s&&this.focus(),this._onDidActiveEditorChange.fire({editor:void 0}),s&&this.accessor.removeGroup(this)}shouldRestoreFocus(e){const t=document.activeElement;return t===document.body||(0,w.jg)(t,e)}doCloseInactiveEditor(e,t){this.model.closeEditor(e,t?.context)}async handleCloseConfirmation(e){if(!e.length)return!1;const t=e.shift();let i,o=this.mapEditorToPendingConfirmation.get(t);o||(o=this.doHandleCloseConfirmation(t),this.mapEditorToPendingConfirmation.set(t,o));try{i=await o}finally{this.mapEditorToPendingConfirmation.delete(t)}return i||this.handleCloseConfirmation(e)}async doHandleCloseConfirmation(e,t){if(!this.shouldConfirmClose(e))return!1;if(e instanceof Ui.h&&this.model.contains(e.primary))return!1;if(this.accessor.groups.some((t=>{if(t===this)return!1;const i=t;return!!i.contains(e,{supportSideBySide:Gi.YX.BOTH})||!!(e instanceof Ui.h&&i.contains(e.primary))})))return!1;let i=2,o=1,s=!1;if(e.hasCapability(4)||t?.skipAutoSave||e.closeHandler||(3===this.filesConfigurationService.getAutoSaveMode()?(s=!0,i=0,o=3):Ke.tY&&(Ke.ED||Ke.IJ)&&4===this.filesConfigurationService.getAutoSaveMode()&&(s=!0,i=0,o=4)),!s)if(this.activeEditor&&this.activeEditor.matches(e)||await this.doOpenEditor(e),"function"==typeof e.closeHandler?.confirm)i=await e.closeHandler.confirm([{editor:e,groupId:this.id}]);else{let t;t=e instanceof Ui.h?e.primary.getName():e.getName(),i=await this.fileDialogService.showSaveConfirm([t])}if(!e.closeHandler&&!this.shouldConfirmClose(e))return 2===i;switch(i){case 0:return!await e.save(this.id,{reason:o})&&s?this.doHandleCloseConfirmation(e,{skipAutoSave:!0}):e.isDirty();case 1:try{return await e.revert(this.id),e.isDirty()}catch(t){return this.logService.error(t),await e.revert(this.id,{soft:!0}),e.isDirty()}case 2:return!0}}shouldConfirmClose(e){return e.closeHandler?e.closeHandler.showConfirm():e.isDirty()&&!e.isSaving()}async closeEditors(e,t){if(this.isEmpty)return!0;const i=this.doGetEditorsToClose(e);return!await this.handleCloseConfirmation(i.slice(0))&&(this.doCloseEditors(i,t),!0)}doGetEditorsToClose(e){if(Array.isArray(e))return e;const t=e,i="number"==typeof t.direction;let o=this.model.getEditors(i?1:0,t);return t.savedOnly?o=o.filter((e=>!e.isDirty()||e.isSaving())):i&&t.except?o=0===t.direction?o.slice(0,this.model.indexOf(t.except,o)):o.slice(this.model.indexOf(t.except,o)+1):t.except&&(o=o.filter((e=>t.except&&!e.matches(t.except)))),o}doCloseEditors(e,t){let i=!1;for(const t of e)this.isActive(t)?i=!0:this.doCloseInactiveEditor(t);i&&this.doCloseActiveEditor(!t?.preserveFocus&&void 0),e.length&&this.titleAreaControl.closeEditors(e)}async closeAllEditors(e){return this.isEmpty?(this.accessor.partOptions.closeEmptyGroups&&this.accessor.removeGroup(this),!0):!await this.handleCloseConfirmation(this.model.getEditors(0,e))&&(this.doCloseAllEditors(e),!0)}doCloseAllEditors(e){const t=[];for(const i of this.model.getEditors(1,e))this.isActive(i)||this.doCloseInactiveEditor(i),t.push(i);this.activeEditor&&t.includes(this.activeEditor)&&this.doCloseActiveEditor(),t.length&&this.titleAreaControl.closeEditors(t)}async replaceEditors(e){let t;const i=[];for(let{editor:o,replacement:s,forceReplaceDirty:n,options:r}of e){const e=this.getIndexOfEditor(o);if(e>=0){const a=this.isActive(o);r?r.index=e:r={index:e},r.inactive=!a,r.pinned=r.pinned??!0;const c={editor:o,replacement:s,forceReplaceDirty:n,options:r};a?t=c:i.push(c)}}for(const{editor:e,replacement:t,forceReplaceDirty:o,options:s}of i)if(await this.doOpenEditor(t,s),!e.matches(t)){let t=!1;if(o?(this.doCloseEditor(e,!1,{context:Gi.Bb.REPLACE}),t=!0):t=await this.doCloseEditorWithConfirmationHandling(e,{preserveFocus:!0},{context:Gi.Bb.REPLACE}),!t)return}if(t){const e=this.doOpenEditor(t.replacement,t.options);t.editor.matches(t.replacement)||(t.forceReplaceDirty?this.doCloseEditor(t.editor,!1,{context:Gi.Bb.REPLACE}):await this.doCloseEditorWithConfirmationHandling(t.editor,{preserveFocus:!0},{context:Gi.Bb.REPLACE})),await e}}get isLocked(){return 1!==this.accessor.groups.length&&this.model.isLocked}lock(e){1===this.accessor.groups.length&&(e=!1),this.model.lock(e)}updateStyles(){const e=this.isEmpty;this.element.style.backgroundColor=e&&this.getColor(B.AQ)||"";const t=this.getColor(B.DI)||this.getColor(P.lRK);!e&&t?(this.titleContainer.classList.add("title-border-bottom"),this.titleContainer.style.setProperty("--title-border-bottom-color",t)):(this.titleContainer.classList.remove("title-border-bottom"),this.titleContainer.style.removeProperty("--title-border-bottom-color"));const{showTabs:i}=this.accessor.partOptions;this.titleContainer.style.backgroundColor=this.getColor(i?B.Fk:B.Yq)||"",this.editorContainer.style.backgroundColor=this.getColor(P.cvW)||""}get minimumWidth(){return this.editorPane.minimumWidth}get minimumHeight(){return this.editorPane.minimumHeight}get maximumWidth(){return this.editorPane.maximumWidth}get maximumHeight(){return this.editorPane.maximumHeight}get proportionalLayout(){return!this.lastLayout||!(this.lastLayout.width===this.minimumWidth||this.lastLayout.height===this.minimumHeight)}layout(e,t,i,o){this.lastLayout={width:e,height:t,top:i,left:o},this.element.classList.toggle("max-height-478px",t<=478);const s=this.titleAreaControl.layout({container:new w.Ro(e,t),available:new w.Ro(e,t-this.editorPane.minimumHeight)}),n=Math.max(0,t-s.height);this.editorContainer.style.height=`${n}px`,this.editorPane.layout({width:e,height:n,top:i+s.height,left:o})}relayout(){if(this.lastLayout){const{width:e,height:t,top:i,left:o}=this.lastLayout;this.layout(e,t,i,o)}}setBoundarySashes(e){this.editorPane.setBoundarySashes(e)}toJSON(){return this.model.serialize()}dispose(){this._disposed=!0,this._onWillDispose.fire(),this.titleAreaControl.dispose(),super.dispose()}};Ds=(0,o.g)([(0,o.f)(3,c.TG),(0,o.f)(4,H.i6),(0,o.f)(5,M.XE),(0,o.f)(6,j.bU),(0,o.f)(7,N.d),(0,o.f)(8,te.co),(0,o.f)(9,O.i),(0,o.f)(10,Ct.Z$),(0,o.f)(11,oi.AR),(0,o.f)(12,di.LM),(0,o.f)(13,si.v),(0,o.f)(14,Z.VZ)],Ds),(0,d.Z)("#monaco-workbench-editor-drop-overlay{height:100%;left:0;position:absolute;width:100%;z-index:10000}#monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{align-items:center;display:flex;height:100%;justify-content:center;left:0;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{line-height:normal;margin:.2em;opacity:0;padding:.6em;text-align:center}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt i{background-color:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,80%,.4);border-radius:5px;font-style:normal;margin:0 1px;padding:0 8px}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator.overlay-move-transition{transition:top 70ms ease-out,left 70ms ease-out,width 70ms ease-out,height 70ms ease-out,opacity .15s ease-out}",{});var As=i(48764);function Is(e){return e.getValue("editor.dropIntoEditor.enabled")}function Ts(e){return e.shiftKey}let Vs=class e extends M.bB{static{this.OVERLAY_ID="monaco-workbench-editor-drop-overlay"}get disposed(){return!!this._disposed}constructor(e,t,i,o,s,n,r,a,c){super(i),this.accessor=e,this.groupView=t,this.configurationService=o,this.instantiationService=s,this.editorService=n,this.editorGroupService=r,this.treeViewsDragAndDropService=a,this.contextService=c,this.editorTransfer=Go.Ej.getInstance(),this.groupTransfer=Go.Ej.getInstance(),this.treeItemsTransfer=Go.Ej.getInstance(),this.cleanupOverlayScheduler=this._register(new je.pY((()=>this.dispose()),300)),this.enableDropIntoEditor=Is(this.configurationService)&&this.isDropIntoActiveEditorEnabled(),this.create()}create(){const t=this.getOverlayOffsetHeight(),i=this.container=document.createElement("div");i.id=e.OVERLAY_ID,i.style.top=`${t}px`,this.groupView.element.appendChild(i),this.groupView.element.classList.add("dragged-over"),this._register((0,p.OF)((()=>{this.groupView.element.removeChild(i),this.groupView.element.classList.remove("dragged-over")}))),this.overlay=document.createElement("div"),this.overlay.classList.add("editor-group-overlay-indicator"),i.appendChild(this.overlay),this.enableDropIntoEditor&&(this.dropIntoPromptElement=(0,As.BO)((0,l.NC)("dropIntoEditorPrompt","Hold __{0}__ to drop into editor",Ke.dz?"":"Shift"),{}),this.dropIntoPromptElement.classList.add("editor-group-overlay-drop-into-prompt"),this.overlay.appendChild(this.dropIntoPromptElement)),this.registerListeners(i),this.updateStyles()}updateStyles(){const e=(0,y.cW)(this.overlay);e.style.backgroundColor=this.getColor(B.Xv)||"";const t=this.getColor(P.xL1);if(e.style.outlineColor=t||"",e.style.outlineOffset=t?"-2px":"",e.style.outlineStyle=t?"dashed":"",e.style.outlineWidth=t?"2px":"",this.dropIntoPromptElement){this.dropIntoPromptElement.style.backgroundColor=this.getColor(B.MB)??"",this.dropIntoPromptElement.style.color=this.getColor(B.jp)??"";const e=this.getColor(B.tp);e?(this.dropIntoPromptElement.style.borderWidth="1px",this.dropIntoPromptElement.style.borderStyle="solid",this.dropIntoPromptElement.style.borderColor=e):this.dropIntoPromptElement.style.borderWidth="0"}}registerListeners(e){this._register(new w.eg(e,{onDragEnter:e=>{},onDragOver:e=>{if(this.enableDropIntoEditor&&Ts(e))return void this.dispose();const t=this.groupTransfer.hasData(G.r8.prototype),i=this.editorTransfer.hasData(G.L5.prototype);i||t||!e.dataTransfer||(e.dataTransfer.dropEffect="copy");let o=!0;if(t)o=this.isCopyOperation(e);else if(i){const t=this.editorTransfer.getData(G.L5.prototype);Array.isArray(t)&&(o=this.isCopyOperation(e,t[0].identifier))}if(!o){const e=this.findSourceGroupView();if(e===this.groupView&&(t||i&&e.count<2))return void this.hideOverlay()}let s=!!this.editorGroupService.partOptions.splitOnDragAndDrop;this.isToggleSplitOperation(e)&&(s=!s),this.positionOverlay(e.offsetX,e.offsetY,t,s),this.cleanupOverlayScheduler.isScheduled()&&this.cleanupOverlayScheduler.cancel()},onDragLeave:e=>this.dispose(),onDragEnd:e=>this.dispose(),onDrop:e=>{w.zB.stop(e,!0),this.dispose(),this.currentDropOperation&&this.handleDrop(e,this.currentDropOperation.splitDirection)}})),this._register((0,w.nm)(e,w.tw.MOUSE_OVER,(()=>{this.cleanupOverlayScheduler.isScheduled()||this.cleanupOverlayScheduler.schedule()})))}isDropIntoActiveEditorEnabled(){return!!this.groupView.activeEditor?.hasCapability(128)}findSourceGroupView(){if(this.groupTransfer.hasData(G.r8.prototype)){const e=this.groupTransfer.getData(G.r8.prototype);if(Array.isArray(e))return this.accessor.getGroup(e[0].identifier)}else if(this.editorTransfer.hasData(G.L5.prototype)){const e=this.editorTransfer.getData(G.L5.prototype);if(Array.isArray(e))return this.accessor.getGroup(e[0].identifier.groupId)}}async handleDrop(e,t){const i=()=>{let e;return e="number"==typeof t?this.accessor.addGroup(this.groupView,t):this.groupView,e};if(this.groupTransfer.hasData(G.r8.prototype)){const i=this.groupTransfer.getData(G.r8.prototype);if(Array.isArray(i)){const o=this.accessor.getGroup(i[0].identifier);if(o){if("number"!=typeof t&&o===this.groupView)return;let i;if("number"==typeof t)i=this.isCopyOperation(e)?this.accessor.copyGroup(o,this.groupView,t):this.accessor.moveGroup(o,this.groupView,t);else{let t;this.isCopyOperation(e)&&(t={mode:0}),this.accessor.mergeGroup(o,this.groupView,t)}i&&this.accessor.activateGroup(i)}this.groupTransfer.clearData(G.r8.prototype)}}else if(this.editorTransfer.hasData(G.L5.prototype)){const o=this.editorTransfer.getData(G.L5.prototype);if(Array.isArray(o)){const s=o[0].identifier,n=this.accessor.getGroup(s.groupId);if(n){const o=this.isCopyOperation(e,s);let r;if(this.editorGroupService.partOptions.closeEmptyGroups&&1===n.count&&"number"==typeof t&&!o)r=this.accessor.moveGroup(n,this.groupView,t);else{if(r=i(),n===r)return;const e=(0,Hi.J8)(n,s.editor,{pinned:!0,sticky:n.isSticky(s.editor)});o?n.copyEditor(s.editor,r,e):n.moveEditor(s.editor,r,e)}r.focus()}this.editorTransfer.clearData(G.L5.prototype)}}else if(this.treeItemsTransfer.hasData(es.f.prototype)){const e=this.treeItemsTransfer.getData(es.f.prototype);if(Array.isArray(e)){const t=[];for(const i of e){const e=await this.treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(e){const i=await(0,G.W$)(e);t.push(...i.map((e=>({...e,options:{...e.options,pinned:!0}}))))}}t.length&&this.editorService.openEditors(t,i(),{validateTrust:!0})}this.treeItemsTransfer.clearData(es.f.prototype)}else this.instantiationService.createInstance(G.n5,{allowWorkspaceOpen:!Ke.$L||(0,gt.gC)(this.contextService.getWorkspace())}).handleDrop(e,(()=>i()),(e=>e?.focus()))}isCopyOperation(e,t){return!t?.editor.hasCapability(8)&&(e.ctrlKey&&!Ke.dz||e.altKey&&Ke.dz)}isToggleSplitOperation(e){return e.altKey&&!Ke.dz||e.shiftKey&&Ke.dz}positionOverlay(e,t,i,o){const s="right"===this.accessor.partOptions.openSideBySideDirection,n=this.groupView.element.clientWidth,r=this.groupView.element.clientHeight-this.getOverlayOffsetHeight();let a,c;o?(a=i&&s?.3:.1,c=i?s?.1:.3:.1):(a=0,c=0);const d=n*a,h=r*c,l=n/3,u=r/3;let p;switch(p=e>d&&e<n-d&&t>h&&t<r-h?void 0:s?e<l?2:e>2*l?3:t<r/2?0:1:t<u?0:t>2*u?1:e<n/2?2:3,p){case 0:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"50%"}),this.toggleDropIntoPrompt(!1);break;case 1:this.doPositionOverlay({top:"50%",left:"0",width:"100%",height:"50%"}),this.toggleDropIntoPrompt(!1);break;case 2:this.doPositionOverlay({top:"0",left:"0",width:"50%",height:"100%"}),this.toggleDropIntoPrompt(!1);break;case 3:this.doPositionOverlay({top:"0",left:"50%",width:"50%",height:"100%"}),this.toggleDropIntoPrompt(!1);break;default:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"100%"}),this.toggleDropIntoPrompt(!0)}const g=(0,y.cW)(this.overlay);g.style.opacity="1",setTimeout((()=>g.classList.add("overlay-move-transition")),0),this.currentDropOperation={splitDirection:p}}doPositionOverlay(e){const[t,i]=(0,y.ld)(this.container,this.overlay),o=this.getOverlayOffsetHeight();t.style.height=o?`calc(100% - ${o}px)`:"100%",i.style.top=e.top,i.style.left=e.left,i.style.width=e.width,i.style.height=e.height}getOverlayOffsetHeight(){return!this.groupView.isEmpty&&this.accessor.partOptions.showTabs?this.groupView.titleHeight.offset:0}hideOverlay(){const e=(0,y.cW)(this.overlay);this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"100%"}),e.style.opacity="0",e.classList.remove("overlay-move-transition"),this.currentDropOperation=void 0}toggleDropIntoPrompt(e){this.dropIntoPromptElement&&(this.dropIntoPromptElement.style.opacity=e?"1":"0")}contains(e){return e===this.container||e===this.overlay}dispose(){super.dispose(),this._disposed=!0}};Vs=(0,o.g)([(0,o.f)(2,M.XE),(0,o.f)(3,Ee.Ui),(0,o.f)(4,c.TG),(0,o.f)(5,oi.AR),(0,o.f)(6,Po.Qw),(0,o.f)(7,Zo.m),(0,o.f)(8,gt.ec)],Vs);let Ls=class extends M.bB{constructor(e,t,i,o,s,n){super(o),this.accessor=e,this.container=t,this.delegate=i,this.configurationService=s,this.instantiationService=n,this.counter=0,this.editorTransfer=Go.Ej.getInstance(),this.groupTransfer=Go.Ej.getInstance(),this.registerListeners()}get overlay(){if(this._overlay&&!this._overlay.disposed)return this._overlay}registerListeners(){this._register((0,w.nm)(this.container,w.tw.DRAG_ENTER,(e=>this.onDragEnter(e)))),this._register((0,w.nm)(this.container,w.tw.DRAG_LEAVE,(()=>this.onDragLeave()))),[this.container,window].forEach((e=>this._register((0,w.nm)(e,w.tw.DRAG_END,(()=>this.onDragEnd())))))}onDragEnter(e){if(Is(this.configurationService)&&Ts(e))return;if(this.counter++,!this.editorTransfer.hasData(G.L5.prototype)&&!this.groupTransfer.hasData(G.r8.prototype)&&e.dataTransfer){const t=h.B.as(Go.IP.DragAndDropContribution).getAll(),i=Array.from(t).map((e=>e.dataFormatKey));if(!(0,Go.Mq)(e,ji.go.FILES,Go.Km.FILES,ji.go.RESOURCES,Go.Km.EDITORS,...i))return void(e.dataTransfer.dropEffect="none")}this.updateContainer(!0);const t=e.target;if(t&&(this.overlay&&!this.overlay.contains(t)&&this.disposeOverlay(),!this.overlay)){const e=this.findTargetGroupView(t);e&&(this._overlay=this.instantiationService.createInstance(Vs,this.accessor,e))}}onDragLeave(){this.counter--,0===this.counter&&this.updateContainer(!1)}onDragEnd(){this.counter=0,this.updateContainer(!1),this.disposeOverlay()}findTargetGroupView(e){return this.accessor.groups.find((t=>(0,w.jg)(e,t.element)||this.delegate.containsGroup?.(t)))}updateContainer(e){this.container.classList.toggle("dragged-over",e)}dispose(){super.dispose(),this.disposeOverlay()}disposeOverlay(){this.overlay&&(this.overlay.dispose(),this._overlay=void 0)}};Ls=(0,o.g)([(0,o.f)(3,M.XE),(0,o.f)(4,Ee.Ui),(0,o.f)(5,c.TG)],Ls);const Rs={targetWidth:900,leftMarginRatio:.1909,rightMarginRatio:.1909},Os={type:"distribute"};function Ns(e){const t=(0,w.$)(".centered-layout-margin");return t.style.height="100%",e&&(t.style.backgroundColor=e.toString()),{element:t,layout:()=>{},minimumSize:60,maximumSize:Number.POSITIVE_INFINITY,onDidChange:g.ju.None}}class Ms{constructor(e,t,i={...Rs}){this.container=e,this.view=t,this.state=i,this.lastLayoutPosition={width:0,height:0,left:0,top:0},this.didLayout=!1,this.splitViewDisposables=new p.SL,this.centeredLayoutFixedWidth=!0,this._boundarySashes={},this.container.appendChild(this.view.element),this.container.style.overflow="hidden"}get minimumWidth(){return this.splitView?this.splitView.minimumSize:this.view.minimumWidth}get maximumWidth(){return this.splitView?this.splitView.maximumSize:this.view.maximumWidth}get minimumHeight(){return this.view.minimumHeight}get maximumHeight(){return this.view.maximumHeight}get onDidChange(){return this.view.onDidChange}get boundarySashes(){return this._boundarySashes}set boundarySashes(e){this._boundarySashes=e,this.splitView&&(this.splitView.orthogonalStartSash=e.top,this.splitView.orthogonalEndSash=e.bottom)}layout(e,t,i,o){this.lastLayoutPosition={width:e,height:t,top:i,left:o},this.splitView?(this.splitView.layout(e,this.lastLayoutPosition),this.didLayout&&!this.centeredLayoutFixedWidth||this.resizeSplitViews()):this.view.layout(e,t,i,o),this.didLayout=!0}resizeSplitViews(){if(this.splitView)if(this.centeredLayoutFixedWidth){const e=Math.min(this.lastLayoutPosition.width,this.state.targetWidth),t=(this.lastLayoutPosition.width-e)/2;this.splitView.resizeView(0,Math.floor(t)),this.splitView.resizeView(1,e),this.splitView.resizeView(2,Math.ceil(t))}else{const e=this.state.leftMarginRatio*this.lastLayoutPosition.width,t=this.state.rightMarginRatio*this.lastLayoutPosition.width,i=this.lastLayoutPosition.width-e-t;this.splitView.resizeView(0,e),this.splitView.resizeView(1,i),this.splitView.resizeView(2,t)}}setFixedWidth(e){this.centeredLayoutFixedWidth=e,this.splitView&&(this.updateState(),this.resizeSplitViews())}updateState(){this.splitView&&(this.state.targetWidth=this.splitView.getViewSize(1),this.state.leftMarginRatio=this.splitView.getViewSize(0)/this.lastLayoutPosition.width,this.state.rightMarginRatio=this.splitView.getViewSize(2)/this.lastLayoutPosition.width)}isActive(){return!!this.splitView}styles(e){this.style=e,this.splitView&&this.emptyViews&&(this.splitView.style(this.style),this.emptyViews[0].element.style.backgroundColor=this.style.background.toString(),this.emptyViews[1].element.style.backgroundColor=this.style.background.toString())}activate(e){var t,i;if(e!==this.isActive())if(e){this.container.removeChild(this.view.element),this.splitView=new mi.z(this.container,{inverseAltBehavior:!0,orientation:1,styles:this.style}),this.splitView.orthogonalStartSash=this.boundarySashes.top,this.splitView.orthogonalEndSash=this.boundarySashes.bottom,this.splitViewDisposables.add(this.splitView.onDidSashChange((()=>{this.splitView&&this.updateState()}))),this.splitViewDisposables.add(this.splitView.onDidSashReset((()=>{this.state={...Rs},this.resizeSplitViews()}))),this.splitView.layout(this.lastLayoutPosition.width,this.lastLayoutPosition);const e=this.style?this.style.background:void 0;this.emptyViews=[Ns(e),Ns(e)],this.splitView.addView(this.emptyViews[0],Os,0),this.splitView.addView((t=this.view,i=()=>this.lastLayoutPosition.height,{element:t.element,get maximumSize(){return t.maximumWidth},get minimumSize(){return t.minimumWidth},onDidChange:g.ju.map(t.onDidChange,(e=>e&&e.width)),layout:(e,o,s)=>t.layout(e,i(),s?.top??0,(s?.left??0)+o)}),Os,1),this.splitView.addView(this.emptyViews[1],Os,2),this.resizeSplitViews()}else this.splitView&&this.container.removeChild(this.splitView.el),this.splitViewDisposables.clear(),this.splitView?.dispose(),this.splitView=void 0,this.emptyViews=void 0,this.container.appendChild(this.view.element),this.view.layout(this.lastLayoutPosition.width,this.lastLayoutPosition.height,this.lastLayoutPosition.top,this.lastLayoutPosition.left)}isDefault(e){return this.centeredLayoutFixedWidth?e.targetWidth===Rs.targetWidth:e.leftMarginRatio===Rs.leftMarginRatio&&e.rightMarginRatio===Rs.rightMarginRatio}dispose(){this.splitViewDisposables.dispose(),this.splitView&&(this.splitView.dispose(),this.splitView=void 0)}}function Ps(e,t,i){const o=e.get(Po.Qw),s=function(e,t,i,o){let s;const n=(0,Gi.uc)(e)?e.editor:e,r=e.options;if(t&&"number"!=typeof t)s=t;else if("number"==typeof t&&t>=0)s=i.getGroup(t);else if(t===oi.O3){const e=(0,Po.Nl)(o);let t=i.findGroup({direction:e});t&&!Bs(t,n)||(t=i.addGroup(i.activeGroup,e)),s=t}else if(!r||"number"!=typeof r.index){const e=i.getGroups(1);if(r?.revealIfVisible)for(const t of e)if(Fs(t,n)){s=t;break}if(!s&&(r?.revealIfOpened||o.getValue("workbench.editor.revealIfOpen")||(0,Gi.Xl)(n)&&n.hasCapability(8))){let t,i;for(const o of e)if(Ws(o,n)&&(i||(i=o),!t&&o.isActive(n)&&(t=o)),i&&t)break;s=t||i}}if(!s){let e=i.activeGroup;if(Bs(e,n)){for(const t of i.getGroups(1))if(!Bs(t,n)){e=t;break}s=Bs(e,n)?i.addGroup(e,(0,Po.Nl)(o)):e}else s=e}return s}(t,i,o,e.get(Ee.Ui));let n;return o.activeGroup!==s&&t.options&&!t.options.inactive&&t.options.preserveFocus&&"number"!=typeof t.options.activation&&i!==oi.O3&&(n=Qo.kn.ACTIVATE),[s,n]}function Bs(e,t){return!!e.isLocked&&!Ws(e,t)}function Fs(e,t){return!!e.activeEditor&&e.activeEditor.matches(t)}function Ws(e,t){for(const i of e.editors)if(i.matches(t))return!0;return!1}class Hs{constructor(){this.element=(0,w.$)(".grid-view-container"),this._onDidChange=new g.ZD,this.onDidChange=this._onDidChange.event}get minimumWidth(){return this.gridWidget?this.gridWidget.minimumWidth:0}get maximumWidth(){return this.gridWidget?this.gridWidget.maximumWidth:Number.POSITIVE_INFINITY}get minimumHeight(){return this.gridWidget?this.gridWidget.minimumHeight:0}get maximumHeight(){return this.gridWidget?this.gridWidget.maximumHeight:Number.POSITIVE_INFINITY}get gridWidget(){return this._gridWidget}set gridWidget(e){this.element.innerText="",e?(this.element.appendChild(e.element),this._onDidChange.input=e.onDidChange):this._onDidChange.input=g.ju.None,this._gridWidget=e}layout(e,t,i,o){this.gridWidget?.layout(e,t,i,o)}dispose(){this._onDidChange.dispose()}}let zs=class e extends C{static{this.EDITOR_PART_UI_STATE_STORAGE_KEY="editorpart.state"}static{this.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY="editorpart.centeredview"}constructor(e,t,i,o,s){super("workbench.parts.editor",{hasTitle:!1},t,o,s),this.instantiationService=e,this.configurationService=i,this._onDidLayout=this._register(new g.Q5),this.onDidLayout=this._onDidLayout.event,this._onDidChangeActiveGroup=this._register(new g.Q5),this.onDidChangeActiveGroup=this._onDidChangeActiveGroup.event,this._onDidChangeGroupIndex=this._register(new g.Q5),this.onDidChangeGroupIndex=this._onDidChangeGroupIndex.event,this._onDidChangeGroupLocked=this._register(new g.Q5),this.onDidChangeGroupLocked=this._onDidChangeGroupLocked.event,this._onDidActivateGroup=this._register(new g.Q5),this.onDidActivateGroup=this._onDidActivateGroup.event,this._onDidAddGroup=this._register(new g.Q5),this.onDidAddGroup=this._onDidAddGroup.event,this._onDidRemoveGroup=this._register(new g.Q5),this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidMoveGroup=this._register(new g.Q5),this.onDidMoveGroup=this._onDidMoveGroup.event,this.onDidSetGridWidget=this._register(new g.Q5),this._onDidChangeSizeConstraints=this._register(new g.ZD),this.onDidChangeSizeConstraints=g.ju.any(this.onDidSetGridWidget.event,this._onDidChangeSizeConstraints.event),this._onDidScroll=this._register(new g.ZD),this.onDidScroll=g.ju.any(this.onDidSetGridWidget.event,this._onDidScroll.event),this._onDidChangeEditorPartOptions=this._register(new g.Q5),this.onDidChangeEditorPartOptions=this._onDidChangeEditorPartOptions.event,this.workspaceMemento=this.getMemento(1,1),this.profileMemento=this.getMemento(0,1),this.groupViews=new Map,this.mostRecentActiveGroups=[],this.gridWidgetView=this._register(new Hs),this.enforcedPartOptions=[],this._partOptions=(0,Hi._b)(this.configurationService,this.themeService),this._top=0,this._left=0,this.sideGroup={openEditor:(e,t)=>{const[i]=this.instantiationService.invokeFunction((i=>Ps(i,{editor:e,options:t},oi.O3)));return i.openEditor(e,t)}},this._isReady=!1,this.whenReadyPromise=new je.CR,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new je.CR,this.whenRestored=this.whenRestoredPromise.p,this.priority=2,this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>this.onConfigurationUpdated(e)))),this._register(this.themeService.onDidFileIconThemeChange((()=>this.handleChangedPartOptions())))}onConfigurationUpdated(e){(0,Hi.fj)(e)&&this.handleChangedPartOptions()}handleChangedPartOptions(){const e=this._partOptions,t=(0,Hi._b)(this.configurationService,this.themeService);for(const e of this.enforcedPartOptions)Object.assign(t,e);this._partOptions=t,this._onDidChangeEditorPartOptions.fire({oldPartOptions:e,newPartOptions:t})}get partOptions(){return this._partOptions}enforcePartOptions(e){return this.enforcedPartOptions.push(e),this.handleChangedPartOptions(),(0,p.OF)((()=>{this.enforcedPartOptions.splice(this.enforcedPartOptions.indexOf(e),1),this.handleChangedPartOptions()}))}get contentDimension(){return this._contentDimension}get activeGroup(){return this._activeGroup}get groups(){return Array.from(this.groupViews.values())}get count(){return this.groupViews.size}get orientation(){return this.gridWidget&&0===this.gridWidget.orientation?1:0}get isReady(){return this._isReady}get hasRestorableState(){return!!this.workspaceMemento[e.EDITOR_PART_UI_STATE_STORAGE_KEY]}getGroups(e=0){switch(e){case 0:return this.groups;case 1:{const e=(0,Y.kX)(this.mostRecentActiveGroups.map((e=>this.getGroup(e))));return(0,Y.EB)([...e,...this.groups])}case 2:{const e=[];return this.gridWidget&&this.fillGridNodes(e,this.gridWidget.getViews()),e}}}fillGridNodes(e,t){ki(t)?t.children.forEach((t=>this.fillGridNodes(e,t))):e.push(t.view)}getGroup(e){return this.groupViews.get(e)}findGroup(e,t=this.activeGroup,i){if("number"==typeof e.direction)return this.doFindGroupByDirection(e.direction,t,i);if("number"==typeof e.location)return this.doFindGroupByLocation(e.location,t,i);throw new Error("invalid arguments")}doFindGroupByDirection(e,t,i){const o=this.assertGroupView(t),s=this.gridWidget.getNeighborViews(o,this.toGridViewDirection(e),i);return s.sort(((e,t)=>this.mostRecentActiveGroups.indexOf(e.id)-this.mostRecentActiveGroups.indexOf(t.id))),s[0]}doFindGroupByLocation(e,t,i){const o=this.assertGroupView(t),s=this.getGroups(2),n=s.indexOf(o);switch(e){case 0:return s[0];case 1:return s[s.length-1];case 2:{let e=s[n+1];return!e&&i&&(e=this.doFindGroupByLocation(0,t)),e}case 3:{let e=s[n-1];return!e&&i&&(e=this.doFindGroupByLocation(1,t)),e}}}activateGroup(e){const t=this.assertGroupView(e);return this.doSetGroupActive(t),this._onDidActivateGroup.fire(t),t}restoreGroup(e){const t=this.assertGroupView(e);return this.doRestoreGroup(t),t}getSize(e){const t=this.assertGroupView(e);return this.gridWidget.getViewSize(t)}setSize(e,t){const i=this.assertGroupView(e);this.gridWidget.resizeView(i,t)}arrangeGroups(e,t=this.activeGroup){if(!(this.count<2)&&this.gridWidget)switch(e){case 1:this.gridWidget.distributeViewSizes();break;case 0:this.gridWidget.maximizeViewSize(t);break;case 2:this.isGroupMaximized(t)?this.arrangeGroups(1):this.arrangeGroups(0)}}isGroupMaximized(e){return this.gridWidget.isViewSizeMaximized(e)}setGroupOrientation(e){if(!this.gridWidget)return;const t=0===e?1:0;this.gridWidget.orientation!==t&&(this.gridWidget.orientation=t)}applyLayout(e){const t=this.shouldRestoreFocus(this.container);let i=0;!function e(t){for(const o of t)Array.isArray(o.groups)?e(o.groups):i++}(e.groups);let o=this.getGroups(2);if(i<o.length){const e=o[i-1];o.forEach(((t,o)=>{o>=i&&this.mergeGroup(t,e)})),o=this.getGroups(2)}const s=this.activeGroup,n=Wi({orientation:this.toGridViewOrientation(e.orientation,this.isTwoDimensionalGrid()?this.gridWidget.orientation:wi(this.gridWidget.orientation)),groups:e.groups});this.doCreateGridControlWithState(n,s.id,o),this.doLayout(this._contentDimension),this.updateContainer();for(const e of this.getGroups(2))o.includes(e)||this._onDidAddGroup.fire(e);this.notifyGroupIndexChange(),t&&this._activeGroup.focus()}getLayout(){const e=this.gridWidget.serialize();return{orientation:1===e.orientation?0:1,groups:this.serializedNodeToGroupLayoutArgument(e.root).groups}}serializedNodeToGroupLayoutArgument(e){return"branch"===e.type?{size:e.size,groups:e.data.map((e=>this.serializedNodeToGroupLayoutArgument(e)))}:{size:e.size}}shouldRestoreFocus(e){if(!e)return!1;const t=document.activeElement;return t===document.body||(0,w.jg)(t,e)}isTwoDimensionalGrid(){const e=this.gridWidget.getViews();return!!ki(e)&&e.children.some((e=>ki(e)))}addGroup(e,t,i){const o=this.assertGroupView(e),s=this.doAddGroup(o,t);return i?.activate&&this.doSetGroupActive(s),s}doAddGroup(e,t,i){const o=this.groupViews.size>1&&this.isGroupMaximized(e),s=this.doCreateGroupView(i);return this.gridWidget.addView(s,this.getSplitSizingStyle(),e,this.toGridViewDirection(t)),this.updateContainer(),this._onDidAddGroup.fire(s),this.notifyGroupIndexChange(),o&&this.arrangeGroups(0,s),s}getSplitSizingStyle(){switch(this._partOptions.splitSizing){case"distribute":return Ri.Distribute;case"split":return Ri.Split;default:return Ri.Auto}}doCreateGroupView(e){let t;t=e instanceof Ds?Ds.createCopy(e,this,this.count,this.instantiationService):(0,zi.Ti)(e)?Ds.createFromSerialized(e,this,this.count,this.instantiationService):Ds.createNew(this,this.count,this.instantiationService),this.groupViews.set(t.id,t);const i=new p.SL;return i.add(t.onDidFocus((()=>{this.doSetGroupActive(t)}))),i.add(t.onDidModelChange((e=>{switch(e.kind){case 2:this._onDidChangeGroupLocked.fire(t);break;case 1:this._onDidChangeGroupIndex.fire(t)}}))),i.add(t.onDidActiveEditorChange((()=>{this.updateContainer()}))),g.ju.once(t.onWillDispose)((()=>{(0,p.B9)(i),this.groupViews.delete(t.id),this.doUpdateMostRecentActive(t)})),t}doSetGroupActive(e){if(this._activeGroup===e)return;const t=this._activeGroup;this._activeGroup=e,this.doUpdateMostRecentActive(e,!0),t?.setActive(!1),e.setActive(!0),this.doRestoreGroup(e),this._onDidChangeActiveGroup.fire(e)}doRestoreGroup(e){if(this.gridWidget){const t=this.gridWidget.getViewSize(e);t.width!==e.minimumWidth&&t.height!==e.minimumHeight||this.arrangeGroups(0,e)}}doUpdateMostRecentActive(e,t){const i=this.mostRecentActiveGroups.indexOf(e.id);-1!==i&&this.mostRecentActiveGroups.splice(i,1),t&&this.mostRecentActiveGroups.unshift(e.id)}toGridViewDirection(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3}}toGridViewOrientation(e,t){return"number"==typeof e?0===e?1:0:t}removeGroup(e){const t=this.assertGroupView(e);if(1!==this.count)return t.isEmpty?this.doRemoveEmptyGroup(t):void this.doRemoveGroupWithEditors(t)}doRemoveGroupWithEditors(e){const t=this.getGroups(1);let i;i=this._activeGroup===e?t[1]:t[0],this.mergeGroup(e,i)}doRemoveEmptyGroup(e){const t=this.shouldRestoreFocus(this.container);if(this._activeGroup===e){const e=this.getGroups(1)[1];this.activateGroup(e)}this.gridWidget.removeView(e,this.getSplitSizingStyle()),e.dispose(),t&&this._activeGroup.focus(),this.notifyGroupIndexChange(),this.updateContainer(),1===this.count&&(0,Y.Xh)(this.groups)?.lock(!1),this._onDidRemoveGroup.fire(e)}moveGroup(e,t,i){const o=this.assertGroupView(e),s=this.assertGroupView(t);if(o.id===s.id)throw new Error("Cannot move group into its own");const n=this.shouldRestoreFocus(o.element);return this.gridWidget.moveView(o,this.getSplitSizingStyle(),s,this.toGridViewDirection(i)),n&&o.focus(),this._onDidMoveGroup.fire(o),this.notifyGroupIndexChange(),o}copyGroup(e,t,i){const o=this.assertGroupView(e),s=this.assertGroupView(t),n=this.shouldRestoreFocus(o.element),r=this.doAddGroup(s,i,o);return n&&r.focus(),r}mergeGroup(e,t,i){const o=this.assertGroupView(e),s=this.assertGroupView(t),n=[];let r=i&&"number"==typeof i.index?i.index:s.count;for(const e of o.editors){const t=!o.isActive(e)||this._activeGroup!==o,i={index:o.isSticky(e)?void 0:r,inactive:t,preserveFocus:t};n.push({editor:e,options:i}),r++}return 0===i?.mode?o.copyEditors(n,s):o.moveEditors(n,s),o.isEmpty&&!o.disposed&&this.removeGroup(o),s}mergeAllGroups(e=this.activeGroup){for(const t of this.getGroups(1))t!==e&&this.mergeGroup(t,e);return e}assertGroupView(e){let t;if(t="number"==typeof e?this.getGroup(e):e,!t)throw new Error("Invalid editor group provided!");return t}createEditorDropTarget(e,t){return this.instantiationService.createInstance(Ls,this,e,t)}get minimumWidth(){return Math.min(this.centeredLayoutWidget.minimumWidth,this.layoutService.getMaximumEditorDimensions().width)}get maximumWidth(){return this.centeredLayoutWidget.maximumWidth}get minimumHeight(){return Math.min(this.centeredLayoutWidget.minimumHeight,this.layoutService.getMaximumEditorDimensions().height)}get maximumHeight(){return this.centeredLayoutWidget.maximumHeight}get snap(){return"center"===this.layoutService.getPanelAlignment()}get onDidChange(){return g.ju.any(this.centeredLayoutWidget.onDidChange,this.onDidSetGridWidget.event)}get gridSeparatorBorder(){return this.theme.getColor(B.pp)||this.theme.getColor(P.lRK)||vi.Il.transparent}updateStyles(){(0,y.cW)(this.container).style.backgroundColor=this.getColor(P.cvW)||"";const e={separatorBorder:this.gridSeparatorBorder,background:this.theme.getColor(B.Qw)||vi.Il.transparent};this.gridWidget.style(e),this.centeredLayoutWidget.styles(e)}createContentArea(t,i){return this.element=t,this.container=document.createElement("div"),this.container.classList.add("content"),t.appendChild(this.container),this.doCreateGridControl(i),this.centeredLayoutWidget=this._register(new Ms(this.container,this.gridWidgetView,this.profileMemento[e.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY])),this._register(this.onDidChangeEditorPartOptions((e=>this.centeredLayoutWidget.setFixedWidth(e.newPartOptions.centeredLayoutFixedWidth??!1)))),this.setupDragAndDropSupport(t,this.container),this.whenReadyPromise.complete(),this._isReady=!0,je.jT.settled(this.groups.map((e=>e.whenRestored))).finally((()=>{this.whenRestoredPromise.complete()})),this.container}setupDragAndDropSupport(e,t){this._register(this.createEditorDropTarget(t,Object.create(null)));const i=document.createElement("div");let o,s,n,r;i.classList.add("drop-block-overlay"),e.appendChild(i),this._register((0,w.u0)(i,(()=>i.classList.remove("visible")))),this._register(G.Mi.INSTANCE.registerTarget(this.element,{onDragStart:e=>i.classList.add("visible"),onDragEnd:e=>i.classList.remove("visible")}));const a=e=>{this.layoutService.isVisible("workbench.parts.panel")||e!==this.layoutService.getPanelPosition()?this.layoutService.isVisible("workbench.parts.auxiliarybar")||e!==(1===this.layoutService.getSideBarPosition()?0:1)||this.layoutService.setPartHidden(!1,"workbench.parts.auxiliarybar"):this.layoutService.setPartHidden(!1,"workbench.parts.panel")},c=()=>{o&&(clearTimeout(o),o=void 0),s&&(clearTimeout(s),s=void 0)};this._register(G.Mi.INSTANCE.registerTarget(i,{onDragOver:e=>{w.zB.stop(e.eventData,!0),e.eventData.dataTransfer&&(e.eventData.dataTransfer.dropEffect="none");const t=i.getBoundingClientRect();let c,d;e.eventData.clientX<t.left+100&&(c=0),e.eventData.clientX>t.right-100&&(c=1),e.eventData.clientY>t.bottom-100&&(d=2),o&&c!==n&&(clearTimeout(o),o=void 0),s&&d!==r&&(clearTimeout(s),s=void 0),o||void 0===c||(n=c,o=setTimeout((()=>a(c)),200)),s||void 0===d||(r=d,s=setTimeout((()=>a(d)),200))},onDragLeave:()=>c(),onDragEnd:()=>c(),onDrop:()=>c()}))}centerLayout(e){this.centeredLayoutWidget.activate(e),this._activeGroup.focus()}isLayoutCentered(){return!!this.centeredLayoutWidget&&this.centeredLayoutWidget.isActive()}doCreateGridControl(e){let t=!1;if(e&&!e.restorePreviousState||(t=!this.doCreateGridControlWithPreviousState()),!this.gridWidget||t){const e=this.doCreateGroupView();this.doSetGridWidget(new Ni(e)),this.doSetGroupActive(e)}this.updateContainer(),this.notifyGroupIndexChange()}doCreateGridControlWithPreviousState(){const t=this.workspaceMemento[e.EDITOR_PART_UI_STATE_STORAGE_KEY];if(t?.serializedGrid)try{this.mostRecentActiveGroups=t.mostRecentActiveGroups,this.doCreateGridControlWithState(t.serializedGrid,t.activeGroup),this._activeGroup.focus()}catch(e){return(0,m.dL)(new Error(`Error restoring editor grid widget: ${e} (with state: ${JSON.stringify(t)})`)),this.groupViews.forEach((e=>e.dispose())),this.groupViews.clear(),this.mostRecentActiveGroups=[],!1}return!0}doCreateGridControlWithState(e,t,i){let o;o=i?i.slice(0):[];const s=[],n=Ni.deserialize(e,{fromJSON:e=>{let i;return i=o.length>0?o.shift():this.doCreateGroupView(e),s.push(i),i.id===t&&this.doSetGroupActive(i),i}},{styles:{separatorBorder:this.gridSeparatorBorder}});this._activeGroup||this.doSetGroupActive(s[0]),this.mostRecentActiveGroups.some((e=>!this.getGroup(e)))&&(this.mostRecentActiveGroups=s.map((e=>e.id))),this.doSetGridWidget(n)}doSetGridWidget(e){let t={};this.gridWidget&&(t=this.gridWidget.boundarySashes,this.gridWidget.dispose()),this.gridWidget=e,this.gridWidget.boundarySashes=t,this.gridWidgetView.gridWidget=e,this._onDidChangeSizeConstraints.input=e.onDidChange,this._onDidScroll.input=e.onDidScroll,this.onDidSetGridWidget.fire(void 0)}updateContainer(){(0,y.cW)(this.container).classList.toggle("empty",this.isEmpty)}notifyGroupIndexChange(){this.getGroups(2).forEach(((e,t)=>e.notifyIndexChanged(t)))}get isEmpty(){return 1===this.count&&this._activeGroup.isEmpty}setBoundarySashes(e){this.gridWidget.boundarySashes=e,this.centeredLayoutWidget.boundarySashes=e}layout(e,t,i,o){this._top=i,this._left=o;const s=super.layoutContents(e,t).contentSize;this.doLayout(w.Ro.lift(s),i,o)}doLayout(e,t=this._top,i=this._left){this._contentDimension=e,this.centeredLayoutWidget.layout(this._contentDimension.width,this._contentDimension.height,t,i),this._onDidLayout.fire(e)}saveState(){if(this.gridWidget){const t={serializedGrid:this.gridWidget.serialize(),activeGroup:this._activeGroup.id,mostRecentActiveGroups:this.mostRecentActiveGroups};this.isEmpty?delete this.workspaceMemento[e.EDITOR_PART_UI_STATE_STORAGE_KEY]:this.workspaceMemento[e.EDITOR_PART_UI_STATE_STORAGE_KEY]=t}if(this.centeredLayoutWidget){const t=this.centeredLayoutWidget.state;this.centeredLayoutWidget.isDefault(t)?delete this.profileMemento[e.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]:this.profileMemento[e.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]=t}super.saveState()}toJSON(){return{type:"workbench.parts.editor"}}dispose(){this.groupViews.forEach((e=>e.dispose())),this.groupViews.clear(),this.gridWidget?.dispose(),super.dispose()}};zs=(0,o.g)([(0,o.f)(0,c.TG),(0,o.f)(1,M.XE),(0,o.f)(2,Ee.Ui),(0,o.f)(3,R.Uy),(0,o.f)(4,V.ze)],zs);var Gs=i(26513),Us=i(88216),Ks=i(12454),$s=i(29102),js=i(11640),Xs=i(84527),Js=i(5826),Ys=i(64854),Qs=i(7169),qs=i(64805);ut.W.registerCommandAndKeybindingRule({weight:200,when:Gs.AB,primary:2051,mac:{primary:259},id:Ys.EL,handler:async(e,t)=>{const i=e.get(oi.AR),o=e.get(go.Lw),s=e.get(ft.sn),n=e.get(pi.gE),r=(0,pi.kn)(t,o,i,n);if(r.length){const e=r.filter((e=>e.scheme===mo.lg.untitled)),t=r.filter((e=>e.scheme!==mo.lg.untitled)),o=await Promise.all(t.map((async e=>n.findClosest(e)||await s.stat(e)))),a=o.filter((e=>!e.isDirectory)).map((e=>({resource:e.resource,options:{pinned:!0}}))).concat(...e.map((e=>({resource:e,options:{pinned:!0}}))));await i.openEditors(a,oi.O3)}}}),ut.W.registerCommandAndKeybindingRule({weight:210,when:H.Ao.and(Gs.Ie,Gs.W$.toNegated()),primary:3,mac:{primary:2066},id:"explorer.openAndPassFocus",handler:async(e,t)=>{const i=e.get(oi.AR),o=e.get(pi.gE).getContext(!0);o.length&&await i.openEditors(o.map((e=>({resource:e.resource,options:{preserveFocus:!1,pinned:!0}}))))}});const Zs="showModifications";let en,tn,on=[];async function sn(e,t,i,o,s){if(e.length){const n=Ke.ED?"\r\n":"\n";let r;if(t){const e=s.getValue("explorer.copyRelativePathSeparator");"/"!==e&&"\\"!==e||(r=e)}const a=e.map((e=>o.getUriLabel(e,{relative:t,noPrefix:!0,separator:r}))).join(n);await i.writeText(a)}}ut.W.registerCommandAndKeybindingRule({id:Ys.dR,when:void 0,weight:200,primary:(0,et.gx)(2089,34),handler:async(e,t)=>{const i=e.get(c.TG),o=e.get(Us.S),s=e.get(oi.AR),n=e.get(ft.sn);let r=!1;if(0===on.length){r=!0;const e=i.createInstance(Gs.C9);on.push(e),on.push(o.registerTextModelContentProvider(Zs,e))}const a=(0,pi.lq)(t,e.get(go.Lw),s);if(a&&n.hasProvider(a)){const e=(0,Q.EZ)(a),t=l.NC("modifiedLabel","{0} (in file)  {1}",e,e);try{await Gs.C9.open(a,Zs,t,s,{pinned:!0}),r&&on.push(s.onDidVisibleEditorsChange((()=>{s.editors.some((e=>!!Gi.zK.getCanonicalUri(e,{supportSideBySide:Gi.YX.SECONDARY,filterByScheme:Zs})))||(on=(0,p.B9)(on))})))}catch{on=(0,p.B9)(on)}}}}),ht.P.registerCommand({id:Ys.op,handler:(e,t)=>{const i=e.get(go.Lw);en=(0,pi.lq)(t,i,e.get(oi.AR)),tn||(tn=Ys.YV.bindTo(e.get(H.i6))),tn.set(!0)}}),ht.P.registerCommand({id:Ys.JH,handler:async(e,t)=>{const i=e.get(oi.AR),o=e.get(pi.gE),s=(0,pi.kn)(t,e.get(go.Lw),i,o);return 2!==s.length||i.openEditor({original:{resource:s[0]},modified:{resource:s[1]},options:{pinned:!0}})}}),ht.P.registerCommand({id:Ys.P3,handler:(e,t)=>{const i=e.get(oi.AR),o=e.get(go.Lw),s=(0,pi.lq)(t,o,i);en&&s&&i.openEditor({original:{resource:en},modified:{resource:s},options:{pinned:!0}})}});const nn=async(e,t)=>{const i=(0,pi.kn)(t,e.get(go.Lw),e.get(oi.AR),e.get(pi.gE));await sn(i,!1,e.get(ii.p),e.get(Xe.e),e.get(Ee.Ui))};ut.W.registerCommandAndKeybindingRule({weight:200,when:$s.u.focus.toNegated(),primary:2593,win:{primary:1569},id:Ys.$g,handler:nn}),ut.W.registerCommandAndKeybindingRule({weight:200,when:$s.u.focus,primary:(0,et.gx)(2089,2593),win:{primary:1569},id:Ys.$g,handler:nn});const rn=async(e,t)=>{const i=(0,pi.kn)(t,e.get(go.Lw),e.get(oi.AR),e.get(pi.gE));await sn(i,!0,e.get(ii.p),e.get(Xe.e),e.get(Ee.Ui))};async function an(e,t){const i=e.get(go.Lw),o=e.get(Po.Qw),s=e.get(js.$),n=e.get(Js.MM);let r=(0,pi.YQ)(i);if(!r){const e=o.activeGroup;e.activeEditor&&(r=[],e.activeEditor instanceof Ui.h&&!t?.saveAs&&!e.activeEditor.primary.hasCapability(4)&&!e.activeEditor.secondary.hasCapability(4)?(r.push({groupId:e.id,editor:e.activeEditor.primary}),r.push({groupId:e.id,editor:e.activeEditor.secondary})):r.push({groupId:e.id,editor:e.activeEditor}))}if(!r||0===r.length)return;await dn(e,r,t);const a=s.getFocusedCodeEditor();if(a instanceof Xs.Hn){const e=a.getModel()?.uri;if(e&&!r.some((({editor:t})=>(0,Q.Xy)(Gi.zK.getCanonicalUri(t,{supportSideBySide:Gi.YX.PRIMARY}),e)))){const i=n.files.get(e);i?.isReadonly()||await n.save(e,t)}}}function cn(e,t,i){const o=[];for(const e of t)for(const t of e.getEditors(0))t.isDirty()&&o.push({groupId:e.id,editor:t});return dn(e,o,i)}async function dn(e,t,i){const o=e.get(oi.AR),s=e.get(F.lT),n=e.get(c.TG);try{await o.save(t,i)}catch(e){(0,m.n2)(e)||s.notify({id:t.map((({editor:e})=>(0,Rt.vp)(e.resource?.toString()))).join(),severity:F.zb.Error,message:l.NC({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",t.map((({editor:e})=>e.getName())).join(", "),(0,ns.yJ)(e,!1)),actions:{primary:[(0,ye.xw)({id:"workbench.action.files.saveEditors",label:l.NC("retry","Retry"),run:()=>n.invokeFunction((e=>dn(e,t,i)))}),(0,ye.xw)({id:"workbench.action.files.revertEditors",label:l.NC("discard","Discard"),run:()=>o.revert(t)})]}})}}ut.W.registerCommandAndKeybindingRule({weight:200,when:$s.u.focus.toNegated(),primary:3617,win:{primary:(0,et.gx)(2089,3105)},id:Ys.Lv,handler:rn}),ut.W.registerCommandAndKeybindingRule({weight:200,when:$s.u.focus,primary:(0,et.gx)(2089,3617),win:{primary:(0,et.gx)(2089,3105)},id:Ys.Lv,handler:rn}),ut.W.registerCommandAndKeybindingRule({weight:200,when:void 0,primary:(0,et.gx)(2089,46),id:"workbench.action.files.copyPathOfActiveFile",handler:async e=>{const t=e.get(oi.AR).activeEditor,i=Gi.zK.getOriginalUri(t,{supportSideBySide:Gi.YX.PRIMARY}),o=i?[i]:[];await sn(o,!1,e.get(ii.p),e.get(Xe.e),e.get(Ee.Ui))}}),ht.P.registerCommand({id:Ys.UG,handler:async(e,t)=>{const i=e.get(r.qC),o=e.get(gt.ec),s=e.get(pi.gE),n=(0,pi.lq)(t,e.get(go.Lw),e.get(oi.AR));if(n&&o.isInsideWorkspace(n)){const e=await i.openView(Gs.nn,!1);e&&(e.setExpanded(!0),await s.select(n,"force"),e.focus())}else{const e=await i.openView(qs.M.ID,!1);e&&(e.setExpanded(!0),e.focus())}}}),ht.P.registerCommand({id:Ys.am,handler:async(e,t)=>{const i=e.get(oi.AR),o=(0,pi.lq)(t,e.get(go.Lw),e.get(oi.AR));if(o)return i.openEditor({resource:o,options:{override:Qo.Cs.PICK,source:Qo.vU.USER}})}}),ut.W.registerCommandAndKeybindingRule({when:void 0,weight:200,primary:2097,id:Ys.jq,handler:e=>an(e,{reason:1,force:!0})}),ut.W.registerCommandAndKeybindingRule({when:void 0,weight:200,primary:(0,et.gx)(2089,49),win:{primary:(0,et.gx)(2089,3121)},id:Ys.C0,handler:e=>an(e,{reason:1,force:!0,skipSaveParticipants:!0})}),ut.W.registerCommandAndKeybindingRule({id:Ys.W0,weight:200,when:void 0,primary:3121,handler:e=>an(e,{reason:1,saveAs:!0})}),ut.W.registerCommandAndKeybindingRule({when:void 0,weight:200,primary:void 0,mac:{primary:2609},win:{primary:(0,et.gx)(2089,49)},id:Ys.xu,handler:e=>cn(e,e.get(Po.Qw).getGroups(1),{reason:1})}),ht.P.registerCommand({id:Ys.WR,handler:(e,t,i)=>{const o=e.get(Po.Qw),s=(0,qo.I1)(i,e.get(go.Lw),e.get(Po.Qw));let n;return n=s.length?(0,Y.kX)(s.map((e=>o.getGroup(e.groupId)))):o.getGroups(1),cn(e,n,{reason:1})}}),ht.P.registerCommand({id:Ys.h5,handler:async e=>{const t=e.get(oi.AR);return(await t.saveAll({includeUntitled:!1,reason:1})).success}}),ht.P.registerCommand({id:Ys.tF,handler:async e=>{const t=e.get(F.lT),i=e.get(go.Lw),o=e.get(Po.Qw),s=e.get(oi.AR);let n=(0,pi.YQ)(i);if(!n){const e=o.activeGroup;e.activeEditor&&(n=[{groupId:e.id,editor:e.activeEditor}])}if(n&&0!==n.length)try{await s.revert(n.filter((({editor:e})=>!e.hasCapability(4))),{force:!0})}catch(e){t.error(l.NC("genericRevertError","Failed to revert '{0}': {1}",n.map((({editor:e})=>e.getName())).join(", "),(0,ns.yJ)(e,!1)))}}}),ht.P.registerCommand({id:Ys.HE,handler:(e,t)=>{const i=e.get(Ks.o),o=e.get(gt.ec),s=e.get(si.v),n=o.getWorkspace(),r=(0,pi.kn)(t,e.get(go.Lw),e.get(oi.AR),e.get(pi.gE)).filter((e=>n.folders.some((t=>s.extUri.isEqual(t.uri,e)))));return 0===r.length?e.get(ht.H).executeCommand(Qs.zM.ID):i.removeFolders(r)}}),ut.W.registerCommandAndKeybindingRule({weight:210,when:H.Ao.and(Gs.Ie,Gs.co,Gs.ob.negate()),primary:15,id:Ys.AO,handler:e=>{const t=e.get(ve.c).getActivePaneComposite(0);t?.getId()===Gs.f3&&t.getViewPaneContainer().getExplorerView().previousCompressedStat()}}),ut.W.registerCommandAndKeybindingRule({weight:210,when:H.Ao.and(Gs.Ie,Gs.co,Gs.VA.negate()),primary:17,id:Ys.L2,handler:e=>{const t=e.get(ve.c).getActivePaneComposite(0);t?.getId()===Gs.f3&&t.getViewPaneContainer().getExplorerView().nextCompressedStat()}}),ut.W.registerCommandAndKeybindingRule({weight:210,when:H.Ao.and(Gs.Ie,Gs.co,Gs.ob.negate()),primary:14,id:Ys.$2,handler:e=>{const t=e.get(ve.c).getActivePaneComposite(0);t?.getId()===Gs.f3&&t.getViewPaneContainer().getExplorerView().firstCompressedStat()}}),ut.W.registerCommandAndKeybindingRule({weight:210,when:H.Ao.and(Gs.Ie,Gs.co,Gs.VA.negate()),primary:13,id:Ys.Er,handler:e=>{const t=e.get(ve.c).getActivePaneComposite(0);t?.getId()===Gs.f3&&t.getViewPaneContainer().getExplorerView().lastCompressedStat()}}),ut.W.registerCommandAndKeybindingRule({weight:200,when:null,primary:Ke.$L?Ke.ED?(0,et.gx)(2089,44):2604:2092,secondary:Ke.$L?[2092]:void 0,id:Ys.mP,description:{description:Ys.RK,args:[{isOptional:!0,name:"New Untitled Text File arguments",description:"The editor view type or language ID if known",schema:{type:"object",properties:{viewType:{type:"string"},languageId:{type:"string"}}}}]},handler:async(e,t)=>{const i=e.get(oi.AR);await i.openEditor({resource:void 0,options:{override:t?.viewType,pinned:!0},languageId:t?.languageId})}}),ht.P.registerCommand({id:Ys.Hx,handler:async(e,t)=>{const i=e.get(oi.AR),o=e.get(Ct.Z$),s=e.get(ft.sn),n=l.NC("newFileCommand.saveLabel","Create File"),r=(0,Q.Vo)(await o.defaultFilePath(),t?.fileName??"Untitled.txt"),a=await o.showSaveDialog({saveLabel:n,title:n,defaultUri:r});a&&(await s.createFile(a,void 0,{overwrite:!0}),await i.openEditor({resource:a,options:{override:t?.viewType,pinned:!0},languageId:t?.languageId}))}});var hn=i(70864),ln=i(91983),un=i(61804),pn=i(37490),gn=i(71083);let mn=class e extends un.y{get typeId(){return Gs.MM}get editorId(){return Gi.Cr.id}get capabilities(){let e=32;return this.model?this.model.isReadonly()&&(e|=2):this.fileService.hasProvider(this.resource)?this.filesConfigurationService.isReadonly(this.resource)&&(e|=2):e|=4,2&e||(e|=128),e}constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,g,m,v){super(e,t,g,c,h,l,u),this.instantiationService=a,this.textModelResolverService=d,this.pathService=m,this.textResourceConfigurationService=v,this.forceOpenAs=0,this.model=void 0,this.cachedTextFileModelReference=void 0,this.modelListeners=this._register(new p.SL),this.model=this.textFileService.files.get(e),i&&this.setPreferredName(i),o&&this.setPreferredDescription(o),s&&this.setPreferredEncoding(s),n&&this.setPreferredLanguageId(n),"string"==typeof r&&this.setPreferredContents(r),this._register(this.textFileService.files.onDidCreate((e=>this.onDidCreateTextFileModel(e)))),this.model&&this.registerModelListeners(this.model)}onDidCreateTextFileModel(e){(0,Q.Xy)(e.resource,this.resource)&&(this.model=e,this.registerModelListeners(e))}registerModelListeners(e){this.modelListeners.clear(),this.modelListeners.add(e.onDidChangeDirty((()=>this._onDidChangeDirty.fire()))),this.modelListeners.add(e.onDidChangeReadonly((()=>this._onDidChangeCapabilities.fire()))),this.modelListeners.add(e.onDidSaveError((()=>this._onDidChangeDirty.fire()))),this.modelListeners.add(g.ju.once(e.onWillDispose)((()=>{this.modelListeners.clear(),this.model=void 0})))}getName(){return this.preferredName||super.getName()}setPreferredName(e){this.allowLabelOverride()&&this.preferredName!==e&&(this.preferredName=e,this._onDidChangeLabel.fire())}allowLabelOverride(){return this.resource.scheme!==this.pathService.defaultUriScheme&&this.resource.scheme!==mo.lg.vscodeUserData&&this.resource.scheme!==mo.lg.file&&this.resource.scheme!==mo.lg.vscodeRemote}getPreferredName(){return this.preferredName}isReadonly(){return this.model?this.model.isReadonly():this.filesConfigurationService.isReadonly(this.resource)}getDescription(e){return this.preferredDescription||super.getDescription(e)}setPreferredDescription(e){this.allowLabelOverride()&&this.preferredDescription!==e&&(this.preferredDescription=e,this._onDidChangeLabel.fire())}getPreferredDescription(){return this.preferredDescription}getEncoding(){return this.model?this.model.getEncoding():this.preferredEncoding}getPreferredEncoding(){return this.preferredEncoding}async setEncoding(e,t){return this.setPreferredEncoding(e),this.model?.setEncoding(e,t)}setPreferredEncoding(e){this.preferredEncoding=e,this.setForceOpenAsText()}getLanguageId(){return this.model?this.model.getLanguageId():this.preferredLanguageId}getPreferredLanguageId(){return this.preferredLanguageId}setLanguageId(e,t){this.setPreferredLanguageId(e),this.model?.setLanguageId(e,t)}setPreferredLanguageId(e){this.preferredLanguageId=e,this.setForceOpenAsText()}setPreferredContents(e){this.preferredContents=e,this.setForceOpenAsText()}setForceOpenAsText(){this.forceOpenAs=1}setForceOpenAsBinary(){this.forceOpenAs=2}isDirty(){return!!this.model?.isDirty()}isSaving(){return!(this.model?.hasState(0)||this.model?.hasState(3)||this.model?.hasState(5))&&(1===this.filesConfigurationService.getAutoSaveMode()||super.isSaving())}prefersEditorPane(e){return 2===this.forceOpenAs?e.find((e=>e.typeId===Gs.Tz)):e.find((e=>e.typeId===Gs.dD))}resolve(e){return 2===this.forceOpenAs?this.doResolveAsBinary():this.doResolveAsText(e)}async doResolveAsText(e){try{const t=this.preferredContents;this.preferredContents=void 0,await this.textFileService.files.resolve(this.resource,{languageId:this.preferredLanguageId,encoding:this.preferredEncoding,contents:"string"==typeof t?(0,gn.Xi)(t):void 0,reload:{async:!0},allowBinary:1===this.forceOpenAs,reason:1,limits:this.ensureLimits(e)}),this.cachedTextFileModelReference||(this.cachedTextFileModelReference=await this.textModelResolverService.createModelReference(this.resource));const i=this.cachedTextFileModelReference.object;return this.isDisposed()&&this.disposeModelReference(),i}catch(e){if(0===e.textFileOperationResult)return this.doResolveAsBinary();throw e}}ensureLimits(e){if(e?.limits)return e.limits;const t=(0,ft.t)(this.resource);let i;const o=this.textResourceConfigurationService.inspect(this.resource,null,"workbench.editorLargeFileConfirmation");return(0,Ee.lF)(o)&&(i=o.value*ft.Lk.MB),{size:i??t}}async doResolveAsBinary(){const e=this.instantiationService.createInstance(pn.N,this.preferredResource,this.getName());return await e.resolve(),e}isResolved(){return!!this.model}async rename(e,t){return{editor:{resource:t,encoding:this.getEncoding(),options:{viewState:(0,Gi.ow)(this,e,this.editorService)}}}}toUntyped(e){const t={resource:this.preferredResource,forceFile:!0,options:{override:this.editorId}};return"number"==typeof e?.preserveViewState&&(t.encoding=this.getEncoding(),t.languageId=this.getLanguageId(),t.contents=(()=>{const e=this.textFileService.files.get(this.resource);if(e?.isDirty())return e.textEditorModel.getValue()})(),t.options={...t.options,viewState:(0,Gi.ow)(this,e.preserveViewState,this.editorService)}),t}matches(t){return this===t||(t instanceof e?(0,Q.Xy)(t.resource,this.resource):!!(0,Gi.BR)(t)&&super.matches(t))}dispose(){this.model=void 0,this.disposeModelReference(),super.dispose()}disposeModelReference(){(0,p.B9)(this.cachedTextFileModelReference),this.cachedTextFileModelReference=void 0}};mn=(0,o.g)([(0,o.f)(7,c.TG),(0,o.f)(8,Js.MM),(0,o.f)(9,Us.S),(0,o.f)(10,Xe.e),(0,o.f)(11,ft.sn),(0,o.f)(12,di.LM),(0,o.f)(13,oi.AR),(0,o.f)(14,Xo.a),(0,o.f)(15,Eo.V)],mn);const vn="saveConflictResolutionContext",bn="conflictResolution",fn="learnMoreDirtyWriteError",wn=(0,l.NC)("userGuide","Use the actions in the editor tool bar to either undo your changes or overwrite the content of the file with your changes.");let yn=class extends p.JT{constructor(e,t,i,o,s,n,r){super(),this.notificationService=e,this.textFileService=t,this.contextKeyService=i,this.editorService=o,this.instantiationService=n,this.storageService=r,this.messages=new se.Y9,this.conflictResolutionContext=new H.uy(vn,!1,!0).bindTo(this.contextKeyService),this.activeConflictResolutionResource=void 0;const a=this._register(n.createInstance(Gs.C9));this._register(s.registerTextModelContentProvider(bn,a)),this.textFileService.files.saveErrorHandler=this,this.registerListeners()}registerListeners(){this._register(this.textFileService.files.onDidSave((e=>this.onFileSavedOrReverted(e.model.resource)))),this._register(this.textFileService.files.onDidRevert((e=>this.onFileSavedOrReverted(e.resource)))),this._register(this.editorService.onDidActiveEditorChange((()=>this.onActiveEditorChanged())))}onActiveEditorChanged(){let e,t=!1;const i=this.editorService.activeEditor;if(i instanceof ln.$){const o=i.original.resource;o?.scheme===bn&&(t=!0,e=i.modified.resource)}this.conflictResolutionContext.set(t),this.activeConflictResolutionResource=e}onFileSavedOrReverted(e){const t=this.messages.get(e);t&&(t.close(),this.messages.delete(e))}onSaveError(e,t){const i=e,o=t.resource;let s;const n=[],r=[];if(3===i.fileOperationResult)if(this.activeConflictResolutionResource&&(0,Q.Xy)(this.activeConflictResolutionResource,t.resource)){if(this.storageService.getBoolean(fn,-1))return;s=wn,n.push(this.instantiationService.createInstance(Cn)),r.push(this.instantiationService.createInstance(Sn))}else s=(0,l.NC)("staleSaveError","Failed to save '{0}': The content of the file is newer. Please compare your version with the file contents or overwrite the content of the file with your changes.",(0,Q.EZ)(o)),n.push(this.instantiationService.createInstance(_n,t)),n.push(this.instantiationService.createInstance(In,t)),r.push(this.instantiationService.createInstance(Tn));else{const r=5===i.fileOperationResult,a=r&&i.options?.unlock,c=6===i.fileOperationResult,d=o.scheme===mo.lg.file;d&&(c||a)?n.push(this.instantiationService.createInstance(En,t,!!a)):r?n.push(this.instantiationService.createInstance(An,t)):n.push(this.instantiationService.createInstance(xn,t)),n.push(this.instantiationService.createInstance(Dn,t)),n.push(this.instantiationService.createInstance(kn,t)),s=r?a&&d?Ke.ED?(0,l.NC)("readonlySaveErrorAdmin","Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",(0,Q.EZ)(o)):(0,l.NC)("readonlySaveErrorSudo","Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",(0,Q.EZ)(o)):(0,l.NC)("readonlySaveError","Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",(0,Q.EZ)(o)):d&&c?Ke.ED?(0,l.NC)("permissionDeniedSaveError","Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",(0,Q.EZ)(o)):(0,l.NC)("permissionDeniedSaveErrorSudo","Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",(0,Q.EZ)(o)):(0,l.NC)({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",(0,Q.EZ)(o),(0,ns.yJ)(e,!1))}const a={primary:n,secondary:r},c=this.notificationService.notify({id:`${(0,Rt.vp)(t.resource.toString())}`,severity:F.zb.Error,message:s,actions:a});g.ju.once(c.onDidClose)((()=>{(0,p.B9)(n),(0,p.B9)(r)})),this.messages.set(t.resource,c)}dispose(){super.dispose(),this.messages.clear()}};yn=(0,o.g)([(0,o.f)(0,F.lT),(0,o.f)(1,Js.MM),(0,o.f)(2,H.i6),(0,o.f)(3,oi.AR),(0,o.f)(4,Us.S),(0,o.f)(5,c.TG),(0,o.f)(6,R.Uy)],yn);let Cn=class extends ye.aU{constructor(e){super("workbench.files.action.resolveConflictLearnMore",(0,l.NC)("learnMore","Learn More")),this.openerService=e}async run(){await this.openerService.open(J.ov.parse("https://go.microsoft.com/fwlink/?linkid=868264"))}};Cn=(0,o.g)([(0,o.f)(0,Kt.v4)],Cn);let Sn=class extends ye.aU{constructor(e){super("workbench.files.action.resolveConflictLearnMoreDoNotShowAgain",(0,l.NC)("dontShowAgain","Don't Show Again")),this.storageService=e}async run(e){this.storageService.store(fn,!0,-1,0),e.dispose()}};Sn=(0,o.g)([(0,o.f)(0,R.Uy)],Sn);let _n=class extends ye.aU{constructor(e,t,i,o,s){super("workbench.files.action.resolveConflict",(0,l.NC)("compareChanges","Compare")),this.model=e,this.editorService=t,this.notificationService=i,this.instantiationService=o,this.productService=s}async run(){if(!this.model.isDisposed()){const e=this.model.resource,t=(0,Q.EZ)(e),i=(0,l.NC)("saveConflictDiffLabel","{0} (in file)  {1} (in {2}) - Resolve save conflict",t,t,this.productService.nameLong);await Gs.C9.open(e,bn,i,this.editorService,{pinned:!0});const o={primary:[this.instantiationService.createInstance(Cn)]},s=this.notificationService.notify({id:`${(0,Rt.vp)(e.toString())}`,severity:F.zb.Info,message:wn,actions:o,neverShowAgain:{id:fn,isSecondary:!0}});g.ju.once(s.onDidClose)((()=>(0,p.B9)(o.primary)))}}};_n=(0,o.g)([(0,o.f)(1,oi.AR),(0,o.f)(2,F.lT),(0,o.f)(3,c.TG),(0,o.f)(4,xe.a)],_n);class En extends ye.aU{constructor(e,t){super("workbench.files.action.saveModelElevated",t?Ke.ED?(0,l.NC)("overwriteElevated","Overwrite as Admin..."):(0,l.NC)("overwriteElevatedSudo","Overwrite as Sudo..."):Ke.ED?(0,l.NC)("saveElevated","Retry as Admin..."):(0,l.NC)("saveElevatedSudo","Retry as Sudo...")),this.model=e,this.triedToUnlock=t}async run(){this.model.isDisposed()||await this.model.save({writeElevated:!0,writeUnlock:this.triedToUnlock,reason:1})}}class xn extends ye.aU{constructor(e){super("workbench.files.action.saveModel",(0,l.NC)("retry","Retry")),this.model=e}async run(){this.model.isDisposed()||await this.model.save({reason:1})}}class kn extends ye.aU{constructor(e){super("workbench.files.action.discardModel",(0,l.NC)("discard","Discard")),this.model=e}async run(){this.model.isDisposed()||await this.model.revert()}}let Dn=class extends ye.aU{constructor(e,t){super("workbench.files.action.saveModelAs",Ys.ji),this.model=e,this.editorService=t}async run(){if(!this.model.isDisposed()){const e=this.findEditor();e&&await this.editorService.save(e,{saveAs:!0,reason:1})}}findEditor(){let e;const t=this.editorService.findEditors(this.model.resource,{supportSideBySide:Gi.YX.PRIMARY});for(const i of t){if(i.editor instanceof mn){e=i;break}e||(e=i)}return e}};Dn=(0,o.g)([(0,o.f)(1,oi.AR)],Dn);class An extends ye.aU{constructor(e){super("workbench.files.action.unlock",(0,l.NC)("overwrite","Overwrite")),this.model=e}async run(){this.model.isDisposed()||await this.model.save({writeUnlock:!0,reason:1})}}class In extends ye.aU{constructor(e){super("workbench.files.action.saveIgnoreModifiedSince",(0,l.NC)("overwrite","Overwrite")),this.model=e}async run(){this.model.isDisposed()||await this.model.save({ignoreModifiedSince:!0,reason:1})}}let Tn=class extends ye.aU{constructor(e){super("workbench.files.action.configureSaveConflict",(0,l.NC)("configure","Configure")),this.preferencesService=e}async run(){this.preferencesService.openSettings({query:"files.saveConflictResolution"})}};Tn=(0,o.g)([(0,o.f)(0,Ye.UP)],Tn);var Vn=i(3701);const Ln="renameFile";ut.W.registerCommandAndKeybindingRule({id:Ln,weight:210,when:H.Ao.and(Gs.Ie,Gs.RQ.toNegated(),Gs.lc),primary:60,mac:{primary:3},handler:hn.At});const Rn="moveFileToTrash";ut.W.registerCommandAndKeybindingRule({id:Rn,weight:210,when:H.Ao.and(Gs.Ie,Gs.lc,Gs.RL),primary:20,mac:{primary:2049,secondary:[20]},handler:hn.Cy});const On="deleteFile";ut.W.registerCommandAndKeybindingRule({id:On,weight:210,when:H.Ao.and(Gs.Ie,Gs.lc),primary:1044,mac:{primary:2561},handler:hn.ju}),ut.W.registerCommandAndKeybindingRule({id:On,weight:210,when:H.Ao.and(Gs.Ie,Gs.lc,Gs.RL.toNegated()),primary:20,mac:{primary:2049},handler:hn.ju});const Nn="filesExplorer.cut";ut.W.registerCommandAndKeybindingRule({id:Nn,weight:210,when:H.Ao.and(Gs.Ie,Gs.RQ.toNegated(),Gs.lc),primary:2102,handler:hn.vC});const Mn="filesExplorer.copy";ut.W.registerCommandAndKeybindingRule({id:Mn,weight:210,when:H.Ao.and(Gs.Ie,Gs.RQ.toNegated()),primary:2081,handler:hn.k0});const Pn="filesExplorer.paste";ut.W.registerCommandAndKeybindingRule({id:Pn,weight:210,when:H.Ao.and(Gs.Ie,Gs.lc),primary:2100,handler:hn.QE}),ut.W.registerCommandAndKeybindingRule({id:"filesExplorer.cancelCut",weight:210,when:H.Ao.and(Gs.Ie,Gs.pL),primary:9,handler:async e=>{const t=e.get(pi.gE);await t.setToCopy([],!0)}}),ut.W.registerCommandAndKeybindingRule({id:"filesExplorer.openFilePreserveFocus",weight:210,when:H.Ao.and(Gs.Ie,Gs.W$.toNegated()),primary:10,handler:hn.wS});const Bn={id:Ys.$g,title:l.NC("copyPath","Copy Path")},Fn={id:Ys.Lv,title:l.NC("copyRelativePath","Copy Relative Path")};function Wn(e,t,i,o,s){te.BH.appendMenuItem(te.eH.EditorTitleContext,{command:{id:e,title:t},when:i,group:o,order:s})}function Hn(e,t,i,o,s){te.BH.appendMenuItem(te.eH.EditorTitle,{command:{id:e,title:t,icon:i},when:H.Ao.equals(vn,!0),group:"navigation",order:o})}function zn(e,t,i,o){te.BH.appendMenuItem(te.eH.CommandPalette,{command:{id:e,title:t,category:i},when:o})}Wn(Ys.$g,Bn.title,L.f1.IsFileSystemResource,"1_cutcopypaste"),Wn(Ys.Lv,Fn.title,L.f1.IsFileSystemResource,"1_cutcopypaste"),Wn(Ys.UG,l.NC("revealInSideBar","Reveal in Explorer View"),L.f1.IsFileSystemResource,"2_files",1),Hn("workbench.files.action.acceptLocalChanges",l.NC("acceptLocalChanges","Use your changes and overwrite file contents"),Ze.lA.check,-10),Hn("workbench.files.action.revertLocalChanges",l.NC("revertLocalChanges","Discard your changes and revert to file contents"),Ze.lA.discard,-9),zn(Ys.$g,{value:l.NC("copyPathOfActive","Copy Path of Active File"),original:"Copy Path of Active File"},ie.R.File),zn(Ys.Lv,{value:l.NC("copyRelativePathOfActive","Copy Relative Path of Active File"),original:"Copy Relative Path of Active File"},ie.R.File),zn(Ys.jq,{value:Ys._L,original:"Save"},ie.R.File),zn(Ys.C0,{value:Ys.Ap,original:"Save without Formatting"},ie.R.File),zn(Ys.WR,{value:l.NC("saveAllInGroup","Save All in Group"),original:"Save All in Group"},ie.R.File),zn(Ys.h5,{value:l.NC("saveFiles","Save All Files"),original:"Save All Files"},ie.R.File),zn(Ys.tF,{value:l.NC("revert","Revert File"),original:"Revert File"},ie.R.File),zn(Ys.dR,{value:l.NC("compareActiveWithSaved","Compare Active File with Saved"),original:"Compare Active File with Saved"},ie.R.File),zn(Ys.W0,{value:Ys.ji,original:"Save As..."},ie.R.File),zn(hn.Hx,{value:hn.J3,original:"New File"},ie.R.File,L.Nz.notEqualsTo("0")),zn(hn.oC,{value:hn.wX,original:"New Folder"},ie.R.File,L.Nz.notEqualsTo("0")),zn(Ys.mP,{value:Ys.RK,original:"New Untitled Text File"},ie.R.File);const Gn=H.Ao.or(L.f1.IsFileSystemResource,L.f1.Scheme.isEqualTo(mo.lg.untitled)),Un={id:Ys.EL,title:l.NC("openToSide","Open to the Side")};te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"navigation",order:10,command:Un,when:Gn}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"1_open",order:10,command:{id:qo.NC,title:l.NC("reopenWith","Reopen Editor With...")},when:L.tK}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"1_cutcopypaste",order:10,command:Bn,when:L.f1.IsFileSystemResource}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"1_cutcopypaste",order:20,command:Fn,when:L.f1.IsFileSystemResource}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"2_save",order:10,command:{id:Ys.jq,title:Ys._L,precondition:Ys.TZ},when:H.Ao.or(L.f1.Scheme.isEqualTo(mo.lg.untitled),H.Ao.and(Ys.Tr.toNegated(),Ys.xd.toNegated(),di.MD.toNegated()))}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"2_save",order:20,command:{id:Ys.tF,title:l.NC("revert","Revert File"),precondition:Ys.TZ},when:H.Ao.and(Ys.Tr.toNegated(),Ys.xd.toNegated(),L.f1.Scheme.notEqualsTo(mo.lg.untitled),di.MD.toNegated())}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"2_save",order:30,command:{id:Ys.WR,title:l.NC("saveAll","Save All"),precondition:L.Y_},when:Ys.Tr}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"3_compare",order:10,command:{id:Ys.dR,title:l.NC("compareWithSaved","Compare with Saved"),precondition:Ys.TZ},when:H.Ao.and(L.f1.IsFileSystemResource,di.MD.toNegated(),go.DW.toNegated())});const Kn={id:Ys.P3,title:l.NC("compareWithSelected","Compare with Selected")};te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"3_compare",order:20,command:Kn,when:H.Ao.and(L.f1.HasResource,Ys.YV,Gn,go.DW.toNegated())});const $n={id:Ys.op,title:l.NC("compareSource","Select for Compare")};te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"3_compare",order:30,command:$n,when:H.Ao.and(L.f1.HasResource,Gn,go.DW.toNegated())});const jn={id:Ys.JH,title:l.NC("compareSelected","Compare Selected")};te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"3_compare",order:30,command:jn,when:H.Ao.and(L.f1.HasResource,go.DW,Gn)}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"4_close",order:10,command:{id:qo.$Z,title:l.NC("close","Close")},when:Ys.Tr.toNegated()}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"4_close",order:20,command:{id:qo.iX,title:l.NC("closeOthers","Close Others")},when:Ys.Tr.toNegated()}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"4_close",order:30,command:{id:qo.ZF,title:l.NC("closeSaved","Close Saved")}}),te.BH.appendMenuItem(te.eH.OpenEditorsContext,{group:"4_close",order:40,command:{id:qo.Hd,title:l.NC("closeAll","Close All")}}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"navigation",order:4,command:{id:hn.Hx,title:hn.J3,precondition:Gs.lc},when:Gs.W$}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"navigation",order:6,command:{id:hn.oC,title:hn.wX,precondition:Gs.lc},when:Gs.W$}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"navigation",order:10,command:Un,when:H.Ao.and(Gs.W$.toNegated(),L.f1.HasResource)}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"navigation",order:20,command:{id:Ys.am,title:l.NC("explorerOpenWith","Open With...")},when:H.Ao.and(Gs.W$.toNegated(),Gs.fB)}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"3_compare",order:20,command:Kn,when:H.Ao.and(Gs.W$.toNegated(),L.f1.HasResource,Ys.YV,go.DW.toNegated())}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"3_compare",order:30,command:$n,when:H.Ao.and(Gs.W$.toNegated(),L.f1.HasResource,go.DW.toNegated())}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"3_compare",order:30,command:jn,when:H.Ao.and(Gs.W$.toNegated(),L.f1.HasResource,go.DW)}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"5_cutcopypaste",order:8,command:{id:Nn,title:l.NC("cut","Cut")},when:H.Ao.and(Gs.RQ.toNegated(),Gs.lc)}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"5_cutcopypaste",order:10,command:{id:Mn,title:hn.qn},when:Gs.RQ.toNegated()}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"5_cutcopypaste",order:20,command:{id:Pn,title:hn.YT,precondition:H.Ao.and(Gs.lc,hn.KK)},when:Gs.W$}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"5b_importexport",order:10,command:{id:hn.Jh,title:hn.JD},when:H.Ao.or(H.Ao.and(dt.Pf.toNegated(),L.f1.Scheme.notEqualsTo(mo.lg.file)),H.Ao.and(dt.Pf,Gs.W$.toNegated(),Gs.RQ.toNegated()),H.Ao.and(dt.Pf,L.Qn))}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"5b_importexport",order:20,command:{id:hn.q7,title:hn.YU},when:H.Ao.and(dt.Pf,Gs.W$,Gs.lc)}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"6_copypath",order:10,command:Bn,when:L.f1.IsFileSystemResource}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"6_copypath",order:20,command:Fn,when:L.f1.IsFileSystemResource}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"2_workspace",order:10,command:{id:Vn._P,title:Vn.MA},when:H.Ao.and(Gs.RQ,H.Ao.or(L.ez,L.hX.isEqualTo("workspace")))}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"2_workspace",order:30,command:{id:Ys.HE,title:Ys.ov},when:H.Ao.and(Gs.RQ,Gs.W$,H.Ao.and(L.Nz.notEqualsTo("0"),H.Ao.or(L.ez,L.hX.isEqualTo("workspace"))))}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"7_modification",order:10,command:{id:Ln,title:hn.sh,precondition:Gs.lc},when:Gs.RQ.toNegated()}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"7_modification",order:20,command:{id:Rn,title:hn.pk,precondition:Gs.lc},alt:{id:On,title:l.NC("deleteFile","Delete Permanently"),precondition:Gs.lc},when:H.Ao.and(Gs.RQ.toNegated(),Gs.RL)}),te.BH.appendMenuItem(te.eH.ExplorerContext,{group:"7_modification",order:20,command:{id:On,title:l.NC("deleteFile","Delete Permanently"),precondition:Gs.lc},when:H.Ao.and(Gs.RQ.toNegated(),Gs.RL.toNegated())});for(const e of[te.eH.EmptyEditorGroupContext,te.eH.EditorTabsBarContext])te.BH.appendMenuItem(e,{command:{id:Ys.mP,title:l.NC("newFile","New Text File")},group:"1_file",order:10}),te.BH.appendMenuItem(e,{command:{id:"workbench.action.quickOpen",title:l.NC("openFile","Open File...")},group:"1_file",order:20});te.BH.appendMenuItem(te.eH.MenubarGoMenu,{group:"3_global_nav",command:{id:"workbench.action.quickOpen",title:l.NC({key:"miGotoFile",comment:["&& denotes a mnemonic"]},"Go to &&File...")},order:1});var Xn=i(44998);(0,d.Z)(".monaco-workbench .call-hierarchy .message,.monaco-workbench .call-hierarchy .results{display:none}.monaco-workbench .call-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .call-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .call-hierarchy .editor,.monaco-workbench .call-hierarchy .tree{height:100%}.monaco-editor .call-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-workbench .call-hierarchy .tree .callhierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .call-hierarchy .tree .callhierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-editor .call-hierarchy .call-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .call-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .call-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .call-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}",{});var Jn=i(52187),Yn=i(32107),Qn=i(96887),qn=i(24314);class Zn{constructor(e,t,i,o){this.item=e,this.locations=t,this.model=i,this.parent=o}static compare(e,t){let i=(0,tt.qu)(e.item.uri.toString(),t.item.uri.toString());return 0===i&&(i=qn.e.compareRangesUsingStarts(e.item.range,t.item.range)),i}}class er{constructor(e){this.getDirection=e}hasChildren(){return!0}async getChildren(e){if(e instanceof Xn.e)return e.roots.map((t=>new Zn(t,void 0,e,void 0)));const{model:t,item:i}=e;return"outgoingCalls"===this.getDirection()?(await t.resolveOutgoingCalls(i,ai.T.None)).map((o=>new Zn(o.to,o.fromRanges.map((e=>({range:e,uri:i.uri}))),t,e))):(await t.resolveIncomingCalls(i,ai.T.None)).map((i=>new Zn(i.from,i.fromRanges.map((e=>({range:e,uri:i.from.uri}))),t,e)))}}class tr{compare(e,t){return Zn.compare(e,t)}}class ir{constructor(e){this.getDirection=e}getId(e){let t=this.getDirection()+JSON.stringify(e.item.uri)+JSON.stringify(e.item.range);return e.parent&&(t+=this.getId(e.parent)),t}}class or{constructor(e,t){this.icon=e,this.label=t}}class sr{constructor(){this.templateId=sr.id}static{this.id="CallRenderer"}renderTemplate(e){e.classList.add("callhierarchy-element");const t=document.createElement("div");e.appendChild(t);const i=new Yn.g(e,{supportHighlights:!0});return new or(t,i)}renderElement(e,t,i){const{element:o,filterData:s}=e,n=o.item.tags?.includes(1);i.icon.className="",i.icon.classList.add("inline",...q.kS.asClassNameArray(Qn.uZ.toIcon(o.item.kind))),i.label.setLabel(o.item.name,o.item.detail,{labelEscapeNewLines:!0,matches:(0,Co.mB)(s),strikethrough:n})}disposeTemplate(e){e.label.dispose()}}class nr{getHeight(e){return 22}getTemplateId(e){return sr.id}}class rr{constructor(e){this.getDirection=e}getWidgetAriaLabel(){return(0,l.NC)("tree.aria","Call Hierarchy")}getAriaLabel(e){return"outgoingCalls"===this.getDirection()?(0,l.NC)("from","calls from {0}",e.item.name):(0,l.NC)("to","callers of {0}",e.item.name)}}var ar=i(84973),cr=i(60350);class dr{static store(e,t){t.store("callHierarchyPeekLayout",JSON.stringify(e),0,1)}static retrieve(e){const t=e.get("callHierarchyPeekLayout",0,"{}"),i={ratio:.7,height:17};try{return{...i,...JSON.parse(t)}}catch{return i}}constructor(e,t){this.ratio=e,this.height=t}}class hr extends go.ls{}let lr=class e extends Jn.vk{static{this.TitleMenu=new te.eH("callhierarchy/title")}constructor(e,t,i,o,s,n,r,a,c,d,h){super(e,{showFrame:!0,showArrow:!0,isResizeable:!0,isAccessible:!0},h),this._where=t,this._direction=i,this._peekViewService=s,this._editorService=n,this._textModelService=r,this._storageService=a,this._menuService=c,this._contextKeyService=d,this._instantiationService=h,this._treeViewStates=new Map,this._previewDisposable=new p.SL,this.create(),this._peekViewService.addExclusiveWidget(e,this),this._applyTheme(o.getColorTheme()),this._disposables.add(o.onDidColorThemeChange(this._applyTheme,this)),this._disposables.add(this._previewDisposable)}dispose(){dr.store(this._layoutInfo,this._storageService),this._splitView.dispose(),this._tree.dispose(),this._editor.dispose(),super.dispose()}get direction(){return this._direction}_applyTheme(e){const t=e.getColor(Jn.SC)||vi.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Jn.KY)||vi.Il.transparent,primaryHeadingColor:e.getColor(Jn.IH),secondaryHeadingColor:e.getColor(Jn.R7)})}_fillHead(t){super._fillHead(t,!0);const i=this._menuService.createMenu(e.TitleMenu,this._contextKeyService),o=()=>{const e=[];(0,x.vr)(i,void 0,e),this._actionbarWidget.clear(),this._actionbarWidget.push(e,{label:!1,icon:!0})};this._disposables.add(i),this._disposables.add(i.onDidChange(o)),o()}_fillBody(e){this._layoutInfo=dr.retrieve(this._storageService),this._dim=new w.Ro(0,0),this._parent=e,e.classList.add("call-hierarchy");const t=document.createElement("div");t.classList.add("message"),e.appendChild(t),this._message=t,this._message.tabIndex=0;const i=document.createElement("div");i.classList.add("results"),e.appendChild(i),this._splitView=new mi.z(i,{orientation:1});const o=document.createElement("div");o.classList.add("editor"),i.appendChild(o),this._editor=this._instantiationService.createInstance(Xs.Hn,o,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor);const s=document.createElement("div");s.classList.add("tree"),i.appendChild(s);const n={sorter:new tr,accessibilityProvider:new rr((()=>this._direction)),identityProvider:new ir((()=>this._direction)),expandOnlyOnTwistieClick:!0,overrideStyles:{listBackground:Jn.M8}};this._tree=this._instantiationService.createInstance(hr,"CallHierarchyPeek",s,new nr,[this._instantiationService.createInstance(sr)],this._instantiationService.createInstance(er,(()=>this._direction)),n),this._splitView.addView({onDidChange:g.ju.None,element:o,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._editor.layout({height:this._dim.height,width:e})}},mi.M.Distribute),this._splitView.addView({onDidChange:g.ju.None,element:s,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._tree.layout(this._dim.height,e)}},mi.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this._layoutInfo.ratio=this._splitView.getViewSize(0)/this._dim.width)}))),this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview,this)),this._disposables.add(this._editor.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const[o]=this._tree.getFocus();o&&(this.dispose(),this._editorService.openEditor({resource:o.item.uri,options:{selection:i.range}}))}))),this._disposables.add(this._tree.onMouseDblClick((e=>{e.target!==cr.sD.Twistie&&e.element&&(this.dispose(),this._editorService.openEditor({resource:e.element.item.uri,options:{selection:e.element.item.selectionRange,pinned:!0}}))}))),this._disposables.add(this._tree.onDidChangeSelection((e=>{const[t]=e.elements;t&&e.browserEvent instanceof KeyboardEvent&&(this.dispose(),this._editorService.openEditor({resource:t.item.uri,options:{selection:t.item.selectionRange,pinned:!0}}))})))}async _updatePreview(){const[e]=this._tree.getFocus();if(!e)return;this._previewDisposable.clear();const t={description:"call-hierarchy-decoration",stickiness:1,className:"call-decoration",overviewRuler:{color:(0,M.EN)(Jn.WL),position:ar.sh.Center}};let i;i="outgoingCalls"===this._direction?e.parent?e.parent.item.uri:e.model.root.uri:e.item.uri;const o=await this._textModelService.createModelReference(i);this._editor.setModel(o.object.textEditorModel);const s=[];let n,r=e.locations;r||(r=[{uri:e.item.uri,range:e.item.selectionRange}]);for(const e of r)e.uri.toString()===i.toString()&&(s.push({range:e.range,options:t}),n=n?qn.e.plusRange(e.range,n):e.range);if(n){this._editor.revealRangeInCenter(n,1);const e=this._editor.createDecorationsCollection(s);this._previewDisposable.add((0,p.OF)((()=>e.clear())))}this._previewDisposable.add(o);const a="outgoingCalls"===this._direction?(0,l.NC)("callFrom","Calls from '{0}'",e.model.root.name):(0,l.NC)("callsTo","Callers of '{0}'",e.model.root.name);this.setTitle(a)}showLoading(){this._parent.dataset.state="loading",this.setTitle((0,l.NC)("title.loading","Loading...")),this._show()}showMessage(e){this._parent.dataset.state="message",this.setTitle(""),this.setMetaTitle(""),this._message.innerText=e,this._show(),this._message.focus()}async showModel(e){this._show();const t=this._treeViewStates.get(this._direction);await this._tree.setInput(e,t);const i=this._tree.getNode(e).children[0];await this._tree.expand(i.element),0===i.children.length?this.showMessage("outgoingCalls"===this._direction?(0,l.NC)("empt.callsFrom","No calls from '{0}'",e.root.name):(0,l.NC)("empt.callsTo","No callers of '{0}'",e.root.name)):(this._parent.dataset.state="data",t&&0!==this._tree.getFocus().length||this._tree.setFocus([i.children[0].element]),this._tree.domFocus(),this._updatePreview())}getModel(){return this._tree.getInput()}getFocused(){return this._tree.getFocus()[0]}async updateDirection(e){const t=this._tree.getInput();t&&e!==this._direction&&(this._treeViewStates.set(this._direction,this._tree.getViewState()),this._direction=e,await this.showModel(t))}_show(){this._isShowing||(this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber,0),super.show(qn.e.fromPositions(this._where),this._layoutInfo.height))}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){this._dim.height===e&&this._dim.width===t||(super._doLayoutBody(e,t),this._dim=new w.Ro(t,e),this._layoutInfo.height=this._viewZone?this._viewZone.heightInLines:this._layoutInfo.height,this._splitView.layout(t),this._splitView.resizeView(0,t*this._layoutInfo.ratio))}};lr=(0,o.g)([(0,o.f)(3,M.XE),(0,o.f)(4,Jn.Fw),(0,o.f)(5,oi.AR),(0,o.f)(6,Us.S),(0,o.f)(7,R.Uy),(0,o.f)(8,te.co),(0,o.f)(9,H.i6),(0,o.f)(10,c.TG)],lr);var ur=i(16830);const pr=new H.uy("editorHasCallHierarchyProvider",!1,(0,l.NC)("editorHasCallHierarchyProvider","Whether a call hierarchy provider is available")),gr=new H.uy("callHierarchyVisible",!1,(0,l.NC)("callHierarchyVisible","Whether call hierarchy peek is currently showing")),mr=new H.uy("callHierarchyDirection",void 0,{type:"string",description:(0,l.NC)("callHierarchyDirection","Whether call hierarchy shows incoming or outgoing calls")});let vr=class e{static{this.Id="callHierarchy"}static get(t){return t.getContribution(e.Id)}static{this._StorageDirection="callHierarchy/defaultDirection"}constructor(e,t,i,o,s){this._editor=e,this._contextKeyService=t,this._storageService=i,this._editorService=o,this._instantiationService=s,this._dispoables=new p.SL,this._sessionDisposables=new p.SL,this._ctxIsVisible=gr.bindTo(this._contextKeyService),this._ctxHasProvider=pr.bindTo(this._contextKeyService),this._ctxDirection=mr.bindTo(this._contextKeyService),this._dispoables.add(g.ju.any(e.onDidChangeModel,e.onDidChangeModelLanguage,Xn.t.onDidChange)((()=>{this._ctxHasProvider.set(e.hasModel()&&Xn.t.has(e.getModel()))}))),this._dispoables.add(this._sessionDisposables)}dispose(){this._ctxHasProvider.reset(),this._ctxIsVisible.reset(),this._dispoables.dispose()}async startCallHierarchyFromEditor(){if(this._sessionDisposables.clear(),!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getPosition();if(!Xn.t.has(t))return;const o=new ai.A,s=Xn.e.create(t,i,o.token),n="outgoingCalls"===(r=this._storageService.get(e._StorageDirection,0,"incomingCalls"))||"incomingCalls"===r?r:"incomingCalls";var r;this._showCallHierarchyWidget(i,n,s,o)}async startCallHierarchyFromCallHierarchy(){if(!this._widget)return;const t=this._widget.getModel(),i=this._widget.getFocused();if(!i||!t)return;const o=await this._editorService.openCodeEditor({resource:i.item.uri},this._editor);if(!o)return;const s=t.fork(i.item);this._sessionDisposables.clear(),e.get(o)?._showCallHierarchyWidget(qn.e.lift(s.root.selectionRange).getStartPosition(),this._widget.direction,Promise.resolve(s),new ai.A)}_showCallHierarchyWidget(t,i,o,s){this._ctxIsVisible.set(!0),this._ctxDirection.set(i),g.ju.any(this._editor.onDidChangeModel,this._editor.onDidChangeModelLanguage)(this.endCallHierarchy,this,this._sessionDisposables),this._widget=this._instantiationService.createInstance(lr,this._editor,t,i),this._widget.showLoading(),this._sessionDisposables.add(this._widget.onDidClose((()=>{this.endCallHierarchy(),this._storageService.store(e._StorageDirection,this._widget.direction,0,0)}))),this._sessionDisposables.add({dispose(){s.dispose(!0)}}),this._sessionDisposables.add(this._widget),o.then((e=>{s.token.isCancellationRequested||(e?(this._sessionDisposables.add(e),this._widget.showModel(e)):this._widget.showMessage((0,l.NC)("no.item","No results")))})).catch((e=>{(0,m.n2)(e)?this.endCallHierarchy():this._widget.showMessage((0,l.NC)("error","Failed to show call hierarchy"))}))}showOutgoingCalls(){this._widget?.updateDirection("outgoingCalls"),this._ctxDirection.set("outgoingCalls")}showIncomingCalls(){this._widget?.updateDirection("incomingCalls"),this._ctxDirection.set("incomingCalls")}endCallHierarchy(){this._sessionDisposables.clear(),this._ctxIsVisible.set(!1),this._editor.focus()}};vr=(0,o.g)([(0,o.f)(1,H.i6),(0,o.f)(2,R.Uy),(0,o.f)(3,js.$),(0,o.f)(4,c.TG)],vr),(0,ur._K)(vr.Id,vr,0),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.showCallHierarchy",title:{value:(0,l.NC)("title","Peek Call Hierarchy"),original:"Peek Call Hierarchy"},menu:{id:te.eH.EditorContextPeek,group:"navigation",order:1e3,when:H.Ao.and(pr,Jn.Jy.notInPeekEditor)},keybinding:{when:$s.u.editorTextFocus,weight:200,primary:1574},precondition:H.Ao.and(pr,Jn.Jy.notInPeekEditor)})}async runEditorCommand(e,t){return vr.get(t)?.startCallHierarchyFromEditor()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.showIncomingCalls",title:{value:(0,l.NC)("title.incoming","Show Incoming Calls"),original:"Show Incoming Calls"},icon:(0,Lt.q5)("callhierarchy-incoming",Ze.lA.callIncoming,(0,l.NC)("showIncomingCallsIcons","Icon for incoming calls in the call hierarchy view.")),precondition:H.Ao.and(gr,mr.isEqualTo("outgoingCalls")),keybinding:{weight:200,primary:1574},menu:{id:lr.TitleMenu,when:mr.isEqualTo("outgoingCalls"),order:1}})}runEditorCommand(e,t){return vr.get(t)?.showIncomingCalls()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.showOutgoingCalls",title:{value:(0,l.NC)("title.outgoing","Show Outgoing Calls"),original:"Show Outgoing Calls"},icon:(0,Lt.q5)("callhierarchy-outgoing",Ze.lA.callOutgoing,(0,l.NC)("showOutgoingCallsIcon","Icon for outgoing calls in the call hierarchy view.")),precondition:H.Ao.and(gr,mr.isEqualTo("incomingCalls")),keybinding:{weight:200,primary:1574},menu:{id:lr.TitleMenu,when:mr.isEqualTo("incomingCalls"),order:1}})}runEditorCommand(e,t){return vr.get(t)?.showOutgoingCalls()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.refocusCallHierarchy",title:{value:(0,l.NC)("title.refocus","Refocus Call Hierarchy"),original:"Refocus Call Hierarchy"},precondition:gr,keybinding:{weight:200,primary:1027}})}async runEditorCommand(e,t){return vr.get(t)?.startCallHierarchyFromCallHierarchy()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.closeCallHierarchy",title:(0,l.NC)("close","Close"),icon:Ze.lA.close,precondition:gr,keybinding:{weight:210,primary:9,when:H.Ao.not("config.editor.stablePeek")},menu:{id:lr.TitleMenu,order:1e3}})}runEditorCommand(e,t){return vr.get(t)?.endCallHierarchy()}}),(0,d.Z)(".monaco-workbench .type-hierarchy .message,.monaco-workbench .type-hierarchy .results{display:none}.monaco-workbench .type-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .type-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .type-hierarchy .editor,.monaco-workbench .type-hierarchy .tree{height:100%}.monaco-editor .type-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-editor .type-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-workbench .type-hierarchy .tree .typehierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .type-hierarchy .tree .typehierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .type-hierarchy .type-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .type-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .type-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .type-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}",{});var br=i(79290);class fr{constructor(e,t,i){this.item=e,this.model=t,this.parent=i}static compare(e,t){let i=(0,tt.qu)(e.item.uri.toString(),t.item.uri.toString());return 0===i&&(i=qn.e.compareRangesUsingStarts(e.item.range,t.item.range)),i}}class wr{constructor(e){this.getDirection=e}hasChildren(){return!0}async getChildren(e){if(e instanceof br.S)return e.roots.map((t=>new fr(t,e,void 0)));const{model:t,item:i}=e;return"supertypes"===this.getDirection()?(await t.provideSupertypes(i,ai.T.None)).map((i=>new fr(i,t,e))):(await t.provideSubtypes(i,ai.T.None)).map((i=>new fr(i,t,e)))}}class yr{compare(e,t){return fr.compare(e,t)}}class Cr{constructor(e){this.getDirection=e}getId(e){let t=this.getDirection()+JSON.stringify(e.item.uri)+JSON.stringify(e.item.range);return e.parent&&(t+=this.getId(e.parent)),t}}class Sr{constructor(e,t){this.icon=e,this.label=t}}class _r{constructor(){this.templateId=_r.id}static{this.id="TypeRenderer"}renderTemplate(e){e.classList.add("typehierarchy-element");const t=document.createElement("div");e.appendChild(t);const i=new Yn.g(e,{supportHighlights:!0});return new Sr(t,i)}renderElement(e,t,i){const{element:o,filterData:s}=e,n=o.item.tags?.includes(1);i.icon.classList.add("inline",...q.kS.asClassNameArray(Qn.uZ.toIcon(o.item.kind))),i.label.setLabel(o.item.name,o.item.detail,{labelEscapeNewLines:!0,matches:(0,Co.mB)(s),strikethrough:n})}disposeTemplate(e){e.label.dispose()}}class Er{getHeight(e){return 22}getTemplateId(e){return _r.id}}class xr{constructor(e){this.getDirection=e}getWidgetAriaLabel(){return(0,l.NC)("tree.aria","Type Hierarchy")}getAriaLabel(e){return"supertypes"===this.getDirection()?(0,l.NC)("supertypes","supertypes of {0}",e.item.name):(0,l.NC)("subtypes","subtypes of {0}",e.item.name)}}class kr{static store(e,t){t.store("typeHierarchyPeekLayout",JSON.stringify(e),0,1)}static retrieve(e){const t=e.get("typeHierarchyPeekLayout",0,"{}"),i={ratio:.7,height:17};try{return{...i,...JSON.parse(t)}}catch{return i}}constructor(e,t){this.ratio=e,this.height=t}}class Dr extends go.ls{}let Ar=class e extends Jn.vk{static{this.TitleMenu=new te.eH("typehierarchy/title")}constructor(e,t,i,o,s,n,r,a,c,d,h){super(e,{showFrame:!0,showArrow:!0,isResizeable:!0,isAccessible:!0},h),this._where=t,this._direction=i,this._peekViewService=s,this._editorService=n,this._textModelService=r,this._storageService=a,this._menuService=c,this._contextKeyService=d,this._instantiationService=h,this._treeViewStates=new Map,this._previewDisposable=new p.SL,this.create(),this._peekViewService.addExclusiveWidget(e,this),this._applyTheme(o.getColorTheme()),this._disposables.add(o.onDidColorThemeChange(this._applyTheme,this)),this._disposables.add(this._previewDisposable)}dispose(){kr.store(this._layoutInfo,this._storageService),this._splitView.dispose(),this._tree.dispose(),this._editor.dispose(),super.dispose()}get direction(){return this._direction}_applyTheme(e){const t=e.getColor(Jn.SC)||vi.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Jn.KY)||vi.Il.transparent,primaryHeadingColor:e.getColor(Jn.IH),secondaryHeadingColor:e.getColor(Jn.R7)})}_fillHead(t){super._fillHead(t,!0);const i=this._menuService.createMenu(e.TitleMenu,this._contextKeyService),o=()=>{const e=[];(0,x.vr)(i,void 0,e),this._actionbarWidget.clear(),this._actionbarWidget.push(e,{label:!1,icon:!0})};this._disposables.add(i),this._disposables.add(i.onDidChange(o)),o()}_fillBody(e){this._layoutInfo=kr.retrieve(this._storageService),this._dim=new w.Ro(0,0),this._parent=e,e.classList.add("type-hierarchy");const t=document.createElement("div");t.classList.add("message"),e.appendChild(t),this._message=t,this._message.tabIndex=0;const i=document.createElement("div");i.classList.add("results"),e.appendChild(i),this._splitView=new mi.z(i,{orientation:1});const o=document.createElement("div");o.classList.add("editor"),i.appendChild(o),this._editor=this._instantiationService.createInstance(Xs.Hn,o,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor);const s=document.createElement("div");s.classList.add("tree"),i.appendChild(s);const n={sorter:new yr,accessibilityProvider:new xr((()=>this._direction)),identityProvider:new Cr((()=>this._direction)),expandOnlyOnTwistieClick:!0,overrideStyles:{listBackground:Jn.M8}};this._tree=this._instantiationService.createInstance(Dr,"TypeHierarchyPeek",s,new Er,[this._instantiationService.createInstance(_r)],this._instantiationService.createInstance(wr,(()=>this._direction)),n),this._splitView.addView({onDidChange:g.ju.None,element:o,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._editor.layout({height:this._dim.height,width:e})}},mi.M.Distribute),this._splitView.addView({onDidChange:g.ju.None,element:s,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._dim.height&&this._tree.layout(this._dim.height,e)}},mi.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this._layoutInfo.ratio=this._splitView.getViewSize(0)/this._dim.width)}))),this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview,this)),this._disposables.add(this._editor.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const[o]=this._tree.getFocus();o&&(this.dispose(),this._editorService.openEditor({resource:o.item.uri,options:{selection:i.range}}))}))),this._disposables.add(this._tree.onMouseDblClick((e=>{e.target!==cr.sD.Twistie&&e.element&&(this.dispose(),this._editorService.openEditor({resource:e.element.item.uri,options:{selection:e.element.item.selectionRange,pinned:!0}}))}))),this._disposables.add(this._tree.onDidChangeSelection((e=>{const[t]=e.elements;t&&e.browserEvent instanceof KeyboardEvent&&(this.dispose(),this._editorService.openEditor({resource:t.item.uri,options:{selection:t.item.selectionRange,pinned:!0}}))})))}async _updatePreview(){const[e]=this._tree.getFocus();if(!e)return;this._previewDisposable.clear();const t={description:"type-hierarchy-decoration",stickiness:1,className:"type-decoration",overviewRuler:{color:(0,M.EN)(Jn.WL),position:ar.sh.Center}};let i;i="supertypes"===this._direction?e.parent?e.parent.item.uri:e.model.root.uri:e.item.uri;const o=await this._textModelService.createModelReference(i);this._editor.setModel(o.object.textEditorModel);const s=[];let n;const r={uri:e.item.uri,range:e.item.selectionRange};if(r.uri.toString()===i.toString()&&(s.push({range:r.range,options:t}),n=n?qn.e.plusRange(r.range,n):r.range),n){this._editor.revealRangeInCenter(n,1);const e=this._editor.createDecorationsCollection(s);this._previewDisposable.add((0,p.OF)((()=>e.clear())))}this._previewDisposable.add(o);const a="supertypes"===this._direction?(0,l.NC)("supertypes","Supertypes of '{0}'",e.model.root.name):(0,l.NC)("subtypes","Subtypes of '{0}'",e.model.root.name);this.setTitle(a)}showLoading(){this._parent.dataset.state="loading",this.setTitle((0,l.NC)("title.loading","Loading...")),this._show()}showMessage(e){this._parent.dataset.state="message",this.setTitle(""),this.setMetaTitle(""),this._message.innerText=e,this._show(),this._message.focus()}async showModel(e){this._show();const t=this._treeViewStates.get(this._direction);await this._tree.setInput(e,t);const i=this._tree.getNode(e).children[0];await this._tree.expand(i.element),0===i.children.length?this.showMessage("supertypes"===this._direction?(0,l.NC)("empt.supertypes","No supertypes of '{0}'",e.root.name):(0,l.NC)("empt.subtypes","No subtypes of '{0}'",e.root.name)):(this._parent.dataset.state="data",t&&0!==this._tree.getFocus().length||this._tree.setFocus([i.children[0].element]),this._tree.domFocus(),this._updatePreview())}getModel(){return this._tree.getInput()}getFocused(){return this._tree.getFocus()[0]}async updateDirection(e){const t=this._tree.getInput();t&&e!==this._direction&&(this._treeViewStates.set(this._direction,this._tree.getViewState()),this._direction=e,await this.showModel(t))}_show(){this._isShowing||(this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber,0),super.show(qn.e.fromPositions(this._where),this._layoutInfo.height))}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){this._dim.height===e&&this._dim.width===t||(super._doLayoutBody(e,t),this._dim=new w.Ro(t,e),this._layoutInfo.height=this._viewZone?this._viewZone.heightInLines:this._layoutInfo.height,this._splitView.layout(t),this._splitView.resizeView(0,t*this._layoutInfo.ratio))}};Ar=(0,o.g)([(0,o.f)(3,M.XE),(0,o.f)(4,Jn.Fw),(0,o.f)(5,oi.AR),(0,o.f)(6,Us.S),(0,o.f)(7,R.Uy),(0,o.f)(8,te.co),(0,o.f)(9,H.i6),(0,o.f)(10,c.TG)],Ar);const Ir=new H.uy("editorHasTypeHierarchyProvider",!1,(0,l.NC)("editorHasTypeHierarchyProvider","Whether a type hierarchy provider is available")),Tr=new H.uy("typeHierarchyVisible",!1,(0,l.NC)("typeHierarchyVisible","Whether type hierarchy peek is currently showing")),Vr=new H.uy("typeHierarchyDirection",void 0,{type:"string",description:(0,l.NC)("typeHierarchyDirection","whether type hierarchy shows super types or subtypes")});let Lr=class e{static{this.Id="typeHierarchy"}static get(t){return t.getContribution(e.Id)}static{this._storageDirectionKey="typeHierarchy/defaultDirection"}constructor(e,t,i,o,s){this._editor=e,this._contextKeyService=t,this._storageService=i,this._editorService=o,this._instantiationService=s,this._disposables=new p.SL,this._sessionDisposables=new p.SL,this._ctxHasProvider=Ir.bindTo(this._contextKeyService),this._ctxIsVisible=Tr.bindTo(this._contextKeyService),this._ctxDirection=Vr.bindTo(this._contextKeyService),this._disposables.add(g.ju.any(e.onDidChangeModel,e.onDidChangeModelLanguage,br.T.onDidChange)((()=>{this._ctxHasProvider.set(e.hasModel()&&br.T.has(e.getModel()))}))),this._disposables.add(this._sessionDisposables)}dispose(){this._disposables.dispose()}async startTypeHierarchyFromEditor(){if(this._sessionDisposables.clear(),!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getPosition();if(!br.T.has(t))return;const o=new ai.A,s=br.S.create(t,i,o.token),n="subtypes"===(r=this._storageService.get(e._storageDirectionKey,0,"subtypes"))||"supertypes"===r?r:"subtypes";var r;this._showTypeHierarchyWidget(i,n,s,o)}_showTypeHierarchyWidget(t,i,o,s){this._ctxIsVisible.set(!0),this._ctxDirection.set(i),g.ju.any(this._editor.onDidChangeModel,this._editor.onDidChangeModelLanguage)(this.endTypeHierarchy,this,this._sessionDisposables),this._widget=this._instantiationService.createInstance(Ar,this._editor,t,i),this._widget.showLoading(),this._sessionDisposables.add(this._widget.onDidClose((()=>{this.endTypeHierarchy(),this._storageService.store(e._storageDirectionKey,this._widget.direction,0,0)}))),this._sessionDisposables.add({dispose(){s.dispose(!0)}}),this._sessionDisposables.add(this._widget),o.then((e=>{s.token.isCancellationRequested||(e?(this._sessionDisposables.add(e),this._widget.showModel(e)):this._widget.showMessage((0,l.NC)("no.item","No results")))})).catch((e=>{(0,m.n2)(e)?this.endTypeHierarchy():this._widget.showMessage((0,l.NC)("error","Failed to show type hierarchy"))}))}async startTypeHierarchyFromTypeHierarchy(){if(!this._widget)return;const t=this._widget.getModel(),i=this._widget.getFocused();if(!i||!t)return;const o=await this._editorService.openCodeEditor({resource:i.item.uri},this._editor);if(!o)return;const s=t.fork(i.item);this._sessionDisposables.clear(),e.get(o)?._showTypeHierarchyWidget(qn.e.lift(s.root.selectionRange).getStartPosition(),this._widget.direction,Promise.resolve(s),new ai.A)}showSupertypes(){this._widget?.updateDirection("supertypes"),this._ctxDirection.set("supertypes")}showSubtypes(){this._widget?.updateDirection("subtypes"),this._ctxDirection.set("subtypes")}endTypeHierarchy(){this._sessionDisposables.clear(),this._ctxIsVisible.set(!1),this._editor.focus()}};Lr=(0,o.g)([(0,o.f)(1,H.i6),(0,o.f)(2,R.Uy),(0,o.f)(3,js.$),(0,o.f)(4,c.TG)],Lr),(0,ur._K)(Lr.Id,Lr,0),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.showTypeHierarchy",title:{value:(0,l.NC)("title","Peek Type Hierarchy"),original:"Peek Type Hierarchy"},menu:{id:te.eH.EditorContextPeek,group:"navigation",order:1e3,when:H.Ao.and(Ir,Jn.Jy.notInPeekEditor)},precondition:H.Ao.and(Ir,Jn.Jy.notInPeekEditor)})}async runEditorCommand(e,t){return Lr.get(t)?.startTypeHierarchyFromEditor()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.showSupertypes",title:{value:(0,l.NC)("title.supertypes","Show Supertypes"),original:"Show Supertypes"},icon:Ze.lA.typeHierarchySuper,precondition:H.Ao.and(Tr,Vr.isEqualTo("subtypes")),keybinding:{weight:200,primary:1574},menu:{id:Ar.TitleMenu,when:Vr.isEqualTo("subtypes"),order:1}})}runEditorCommand(e,t){return Lr.get(t)?.showSupertypes()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.showSubtypes",title:{value:(0,l.NC)("title.subtypes","Show Subtypes"),original:"Show Subtypes"},icon:Ze.lA.typeHierarchySub,precondition:H.Ao.and(Tr,Vr.isEqualTo("supertypes")),keybinding:{weight:200,primary:1574},menu:{id:Ar.TitleMenu,when:Vr.isEqualTo("supertypes"),order:1}})}runEditorCommand(e,t){return Lr.get(t)?.showSubtypes()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.refocusTypeHierarchy",title:{value:(0,l.NC)("title.refocusTypeHierarchy","Refocus Type Hierarchy"),original:"Refocus Type Hierarchy"},precondition:Tr,keybinding:{weight:200,primary:1027}})}async runEditorCommand(e,t){return Lr.get(t)?.startTypeHierarchyFromTypeHierarchy()}}),(0,te.r1)(class extends ur.x1{constructor(){super({id:"editor.closeTypeHierarchy",title:(0,l.NC)("close","Close"),icon:Ze.lA.close,precondition:Tr,keybinding:{weight:210,primary:9,when:H.Ao.not("config.editor.stablePeek")},menu:{id:Ar.TitleMenu,order:1e3}})}runEditorCommand(e,t){return Lr.get(t)?.endTypeHierarchy()}});var Rr=i(63809);(0,d.Z)(".monaco-list .monaco-list-row.focused.selected .outline-element .monaco-highlighted-label,.monaco-list .monaco-list-row.focused.selected .outline-element-decoration{color:inherit!important}.monaco-list .outline-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-list .outline-element .monaco-highlighted-label{color:var(--outline-element-color)}.monaco-breadcrumbs .outline-element .outline-element-decoration,.monaco-list .outline-element .outline-element-decoration{color:var(--outline-element-color);font-size:90%;font-weight:600;margin-left:auto;opacity:.75;padding:0 12px 0 5px;text-align:center}.monaco-breadcrumbs .outline-element .monaco-icon-label-container .monaco-icon-description-container,.monaco-breadcrumbs .outline-element .outline-element-decoration{display:none}.monaco-list .outline-element .outline-element-decoration.bubble{font-family:codicon;font-size:14px;opacity:.4;padding-right:8px}.monaco-list .outline-element .outline-element-icon{margin-right:4px}",{});var Or=i(34650),Nr=i(30335),Mr=i(98674);class Pr{getKeyboardNavigationLabel(e){return e instanceof Nr.H3?e.label:e.symbol.name}}class Br{constructor(e){this._ariaLabel=e}getWidgetAriaLabel(){return this._ariaLabel}getAriaLabel(e){return e instanceof Nr.H3?e.label:(0,Qn.R4)(e.symbol.name,e.symbol.kind)}}class Fr{getId(e){return e.id}}class Wr{static{this.id="DocumentSymbolGroupTemplate"}constructor(e,t){this.labelContainer=e,this.label=t}}class Hr{static{this.id="DocumentSymbolTemplate"}constructor(e,t,i,o){this.container=e,this.iconLabel=t,this.iconClass=i,this.decoration=o}}class zr{getHeight(e){return 22}getTemplateId(e){return e instanceof Nr.H3?Wr.id:Hr.id}}class Gr{constructor(){this.templateId=Wr.id}renderTemplate(e){const t=w.$(".outline-element-label");return e.classList.add("outline-element"),w.R3(e,t),new Wr(t,new Or.q(t))}renderElement(e,t,i){i.label.set(e.element.label,(0,Co.mB)(e.filterData))}disposeTemplate(e){}}let Ur=class{constructor(e,t,i){this._renderMarker=e,this._configurationService=t,this._themeService=i,this.templateId=Hr.id}renderTemplate(e){e.classList.add("outline-element");const t=new Yn.g(e,{supportHighlights:!0}),i=w.$(".outline-element-icon"),o=w.$(".outline-element-decoration");return e.prepend(i),e.appendChild(o),new Hr(e,t,i,o)}renderElement(e,t,i){const{element:o}=e,s=["nowrap"],n={matches:(0,Co.mB)(e.filterData),labelEscapeNewLines:!0,extraClasses:s,title:(0,l.NC)("title.template","{0} ({1})",o.symbol.name,Qn.uR[o.symbol.kind])};this._configurationService.getValue("outline.icons")&&(i.iconClass.className="",i.iconClass.classList.add("outline-element-icon","inline",...q.kS.asClassNameArray(Qn.uZ.toIcon(o.symbol.kind)))),o.symbol.tags.indexOf(1)>=0&&(s.push("deprecated"),n.matches=[]),i.iconLabel.setLabel(o.symbol.name,o.symbol.detail,n),this._renderMarker&&this._renderMarkerInfo(o,i)}_renderMarkerInfo(e,t){if(!e.marker)return w.Cp(t.decoration),void t.container.style.removeProperty("--outline-element-color");const{count:i,topSev:o}=e.marker,s=this._themeService.getColorTheme().getColor(o===Mr.ZL.Error?P.fLH:P.J_Y),n=s?s.toString():"inherit";this._configurationService.getValue("outline.problems.colors")?t.container.style.setProperty("--outline-element-color",n):t.container.style.removeProperty("--outline-element-color"),this._configurationService.getValue("outline.problems.badges")?i>0?(w.$Z(t.decoration),t.decoration.classList.remove("bubble"),t.decoration.innerText=i<10?i.toString():"+9",t.decoration.title=1===i?(0,l.NC)("1.problem","1 problem in this element"):(0,l.NC)("N.problem","{0} problems in this element",i),t.decoration.style.setProperty("--outline-element-color",n)):(w.$Z(t.decoration),t.decoration.classList.add("bubble"),t.decoration.innerText="",t.decoration.title=(0,l.NC)("deep.problem","Contains elements with problems"),t.decoration.style.setProperty("--outline-element-color",n)):w.Cp(t.decoration)}disposeTemplate(e){e.iconLabel.dispose()}};Ur=(0,o.g)([(0,o.f)(1,Ee.Ui),(0,o.f)(2,M.XE)],Ur);let Kr=class e{static{this.kindToConfigName=Object.freeze({0:"showFiles",1:"showModules",2:"showNamespaces",3:"showPackages",4:"showClasses",5:"showMethods",6:"showProperties",7:"showFields",8:"showConstructors",9:"showEnums",10:"showInterfaces",11:"showFunctions",12:"showVariables",13:"showConstants",14:"showStrings",15:"showNumbers",16:"showBooleans",17:"showArrays",18:"showObjects",19:"showKeys",20:"showNull",21:"showEnumMembers",22:"showStructs",23:"showEvents",24:"showOperators",25:"showTypeParameters"})}constructor(e,t){this._prefix=e,this._textResourceConfigService=t}filter(t){const i=Nr.C3.get(t);if(!(t instanceof Nr.sT))return!0;const o=e.kindToConfigName[t.symbol.kind],s=`${this._prefix}.${o}`;return this._textResourceConfigService.getValue(i?.uri,s)}};Kr=(0,o.g)([(0,o.f)(1,Eo.V)],Kr);class $r{constructor(){this._collator=new je.Ue((()=>new Intl.Collator(void 0,{numeric:!0})))}compareByPosition(e,t){return e instanceof Nr.H3&&t instanceof Nr.H3?e.order-t.order:e instanceof Nr.sT&&t instanceof Nr.sT?qn.e.compareRangesUsingStarts(e.symbol.range,t.symbol.range)||this._collator.value.compare(e.symbol.name,t.symbol.name):0}compareByType(e,t){return e instanceof Nr.H3&&t instanceof Nr.H3?e.order-t.order:e instanceof Nr.sT&&t instanceof Nr.sT?e.symbol.kind-t.symbol.kind||this._collator.value.compare(e.symbol.name,t.symbol.name):0}compareByName(e,t){return e instanceof Nr.H3&&t instanceof Nr.H3?e.order-t.order:e instanceof Nr.sT&&t instanceof Nr.sT?this._collator.value.compare(e.symbol.name,t.symbol.name)||qn.e.compareRangesUsingStarts(e.symbol.range,t.symbol.range):0}}var jr=i(65520),Xr=i(36357),Jr=i(71922);let Yr=class{constructor(e,t){this._editor=e,this._textResourceConfigurationService=t,this._breadcrumbs=[]}getBreadcrumbElements(){return this._breadcrumbs}clear(){this._breadcrumbs=[]}update(e,t){const i=this._computeBreadcrumbs(e,t);this._breadcrumbs=i}_computeBreadcrumbs(e,t){let i=e.getItemEnclosingPosition(t);if(!i)return[];const o=[];for(;i;){o.push(i);const e=i.parent;if(e instanceof Nr.C3)break;if(e instanceof Nr.H3&&e.parent&&1===e.parent.children.size)break;i=e}const s=[];for(let e=o.length-1;e>=0;e--){const t=o[e];if(this._isFiltered(t))break;s.push(t)}return 0===s.length?[]:s}_isFiltered(e){if(!(e instanceof Nr.sT))return!1;const t=`breadcrumbs.${Kr.kindToConfigName[e.symbol.kind]}`;let i;return this._editor&&this._editor.getModel()&&(i=this._editor.getModel().uri),!this._textResourceConfigurationService.getValue(i,t)}};Yr=(0,o.g)([(0,o.f)(1,Eo.V)],Yr);let Qr=class{get activeElement(){const e=this._editor.getPosition();return e&&this._outlineModel?this._outlineModel.getItemEnclosingPosition(e):void 0}constructor(e,t,i,o,s,n,r,a,c,d){this._editor=e,this._languageFeaturesService=o,this._codeEditorService=s,this._outlineModelService=n,this._configurationService=r,this._markerDecorationsService=a,this._disposables=new p.SL,this._onDidChange=new g.Q5,this.onDidChange=this._onDidChange.event,this._outlineDisposables=new p.SL,this.outlineKind="documentSymbols",this._breadcrumbsDataSource=new Yr(e,c);const h=new zr,u=[new Gr,d.createInstance(Ur,!0)],m={getChildren:e=>e instanceof Nr.sT||e instanceof Nr.H3?e.children.values():e===this&&this._outlineModel?this._outlineModel.children.values():[]},v=new $r,b=c.getValue(e.getModel()?.uri,"outline.collapseItems"),f={collapseByDefault:2===t||1===t&&"alwaysCollapse"===b,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,identityProvider:new Fr,keyboardNavigationLabelProvider:new Pr,accessibilityProvider:new Br((0,l.NC)("document","Document Symbols")),filter:1===t?d.createInstance(Kr,"outline"):2===t?d.createInstance(Kr,"breadcrumbs"):void 0};this.config={breadcrumbsDataSource:this._breadcrumbsDataSource,delegate:h,renderers:u,treeDataSource:m,comparator:v,options:f,quickPickDataSource:{getQuickPickElements:()=>{throw new Error("not implemented")}}},this._disposables.add(o.documentSymbolProvider.onDidChange((e=>this._createOutline()))),this._disposables.add(this._editor.onDidChangeModel((e=>this._createOutline()))),this._disposables.add(this._editor.onDidChangeModelLanguage((e=>this._createOutline())));const w=new je._F;this._disposables.add(w),this._disposables.add(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();if(t){const i=n.getDebounceValue(t);w.cancelAndSet((()=>this._createOutline(e)),i)}}))),this._disposables.add(this._editor.onDidDispose((()=>this._outlineDisposables.clear()))),this._createOutline().finally((()=>i.open()))}dispose(){this._disposables.dispose(),this._outlineDisposables.dispose()}get isEmpty(){return!this._outlineModel||Nr._k.empty(this._outlineModel)}get uri(){return this._outlineModel?.uri}async reveal(e,t,i){const o=Nr.C3.get(e);o&&e instanceof Nr.sT&&await this._codeEditorService.openCodeEditor({resource:o.uri,options:{...t,selection:qn.e.collapseToStart(e.symbol.selectionRange),selectionRevealType:3}},this._editor,i)}preview(e){if(!(e instanceof Nr.sT))return p.JT.None;const{symbol:t}=e;this._editor.revealRangeInCenterIfOutsideViewport(t.range,0);const i=this._editor.createDecorationsCollection([{range:t.range,options:{description:"document-symbols-outline-range-highlight",className:"rangeHighlight",isWholeLine:!0}}]);return(0,p.OF)((()=>i.clear()))}captureViewState(){const e=this._editor.saveViewState();return(0,p.OF)((()=>{e&&this._editor.restoreViewState(e)}))}async _createOutline(e){if(this._outlineDisposables.clear(),e||this._setOutlineModel(void 0),!this._editor.hasModel())return;const t=this._editor.getModel();if(!this._languageFeaturesService.documentSymbolProvider.has(t))return;const i=new ai.A,o=t.getVersionId(),s=new je._F;this._outlineDisposables.add(s),this._outlineDisposables.add((0,p.OF)((()=>i.dispose(!0))));try{const n=await this._outlineModelService.getOrCreate(t,i.token);if(i.token.isCancellationRequested)return;if(Nr._k.empty(n)||!this._editor.hasModel())return void this._setOutlineModel(n);if(e&&this._outlineModel&&t.getLineCount()>=25){const o=Nr._k.size(n),s=t.getValueLength(),r=o/s,a=Nr._k.size(this._outlineModel)/(s-e.changes.reduce(((e,t)=>e+t.rangeLength),0));if((r<=.5*a||r>=1.5*a)&&!await(0,je.eP)((0,je.Vs)(2e3).then((()=>!0)),i.token,!1))return}this._applyMarkersToOutline(n),this._outlineDisposables.add(this._markerDecorationsService.onDidChangeMarker((e=>{(0,Q.Xy)(n.uri,e.uri)&&(this._applyMarkersToOutline(n),this._onDidChange.fire({}))}))),this._outlineDisposables.add(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("outline.problems.enabled")&&(this._configurationService.getValue("outline.problems.enabled")?this._applyMarkersToOutline(n):n.updateMarker([]),this._onDidChange.fire({})),e.affectsConfiguration("outline")&&this._onDidChange.fire({}),e.affectsConfiguration("breadcrumbs")&&this._editor.hasModel()&&(this._breadcrumbsDataSource.update(n,this._editor.getPosition()),this._onDidChange.fire({}))}))),this._outlineDisposables.add(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("outline.icons")&&this._onDidChange.fire({}),e.affectsConfiguration("outline")&&this._onDidChange.fire({})}))),this._outlineDisposables.add(this._editor.onDidChangeCursorPosition((e=>{s.cancelAndSet((()=>{!t.isDisposed()&&o===t.getVersionId()&&this._editor.hasModel()&&(this._breadcrumbsDataSource.update(n,this._editor.getPosition()),this._onDidChange.fire({affectOnlyActiveElement:!0}))}),150)}))),this._setOutlineModel(n)}catch(e){this._setOutlineModel(void 0),(0,m.dL)(e)}}_applyMarkersToOutline(e){if(!e||!this._configurationService.getValue("outline.problems.enabled"))return;const t=[];for(const[i,o]of this._markerDecorationsService.getLiveMarkers(e.uri))o.severity!==Mr.ZL.Error&&o.severity!==Mr.ZL.Warning||t.push({...i,severity:o.severity});e.updateMarker(t)}_setOutlineModel(e){const t=this._editor.getPosition();t&&e?(this._outlineModel?.merge(e)||(this._outlineModel=e),this._breadcrumbsDataSource.update(e,t)):(this._outlineModel=void 0,this._breadcrumbsDataSource.clear()),this._onDidChange.fire({})}};Qr=(0,o.g)([(0,o.f)(3,Jr.p),(0,o.f)(4,js.$),(0,o.f)(5,Nr.Je),(0,o.f)(6,Ee.Ui),(0,o.f)(7,Xr.i),(0,o.f)(8,Eo.V),(0,o.f)(9,c.TG)],Qr);let qr=class{constructor(e){const t=e.registerOutlineCreator(this);this.dispose=()=>t.dispose()}matches(e){const t=e.getControl();return(0,jr.CL)(t)||(0,jr.QI)(t)}async createOutline(e,t,i){const o=e.getControl();let s;if((0,jr.CL)(o)?s=o:(0,jr.QI)(o)&&(s=o.getModifiedEditor()),!s)return;const n=new je.U8,r=s.invokeWithinContext((e=>e.get(c.TG).createInstance(Qr,s,t,n)));return await n.wait(),r}};qr=(0,o.g)([(0,o.f)(0,vo.h)],qr),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(qr,4),(0,d.Z)(".monaco-workbench .outline-pane{display:flex;flex-direction:column}.monaco-workbench .outline-pane .outline-progress{height:2px;padding-bottom:3px;position:absolute;width:100%}.monaco-workbench .outline-pane .outline-progress .monaco-progress-container,.monaco-workbench .outline-pane .outline-progress .monaco-progress-container .progress-bit{height:2px}.monaco-workbench .outline-pane .outline-tree{height:100%}.monaco-workbench .outline-pane .outline-message{display:none;opacity:.5;padding:10px 22px 0;pointer-events:none;position:absolute;z-index:1}.monaco-workbench .outline-pane.message .outline-message{display:inherit}.monaco-workbench .outline-pane.message .outline-progress{display:none}",{});class Zr{constructor(){this._followCursor=!1,this._filterOnType=!0,this._sortBy=0,this._onDidChange=new g.Q5,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}set followCursor(e){e!==this._followCursor&&(this._followCursor=e,this._onDidChange.fire({followCursor:!0}))}get followCursor(){return this._followCursor}get filterOnType(){return this._filterOnType}set filterOnType(e){e!==this._filterOnType&&(this._filterOnType=e,this._onDidChange.fire({filterOnType:!0}))}set sortBy(e){e!==this._sortBy&&(this._sortBy=e,this._onDidChange.fire({sortBy:!0}))}get sortBy(){return this._sortBy}persist(e){e.store("outline/state",JSON.stringify({followCursor:this.followCursor,sortBy:this.sortBy,filterOnType:this.filterOnType}),1,1)}restore(e){const t=e.get("outline/state",1);if(!t)return;let i;try{i=JSON.parse(t)}catch(e){return}this.followCursor=i.followCursor,this.sortBy=i.sortBy??0,"boolean"==typeof i.filterOnType&&(this.filterOnType=i.filterOnType)}}var ea,ta=i(4490);!function(e){e.Id="outline"}(ea||(ea={}));const ia=new H.uy("outlineFollowsCursor",!1),oa=new H.uy("outlineFiltersOnType",!1),sa=new H.uy("outlineSortMode",0),na=new H.uy("outlineAllCollapsed",!1);class ra{constructor(e,t){this._comparator=e,this.order=t}compare(e,t){return 2===this.order?this._comparator.compareByType(e,t):1===this.order?this._comparator.compareByName(e,t):this._comparator.compareByPosition(e,t)}}let aa=class extends gi.qV{static{this.Id="outline"}constructor(e,t,i,o,s,n,r,a,c,d,h,l,u){super(e,a,d,r,c,o,i,h,l,u),this._outlineService=t,this._instantiationService=i,this._storageService=s,this._editorService=n,this._disposables=new p.SL,this._editorControlDisposables=new p.SL,this._editorPaneDisposables=new p.SL,this._outlineViewState=new Zr,this._editorListener=new p.XK,this._treeStates=new se.z6(10),this._outlineViewState.restore(this._storageService),this._disposables.add(this._outlineViewState),c.bufferChangeEvents((()=>{this._ctxFollowsCursor=ia.bindTo(c),this._ctxFilterOnType=oa.bindTo(c),this._ctxSortMode=sa.bindTo(c),this._ctxAllCollapsed=na.bindTo(c)}));const g=()=>{this._ctxFollowsCursor.set(this._outlineViewState.followCursor),this._ctxFilterOnType.set(this._outlineViewState.filterOnType),this._ctxSortMode.set(this._outlineViewState.sortBy)};g(),this._disposables.add(this._outlineViewState.onDidChange(g))}dispose(){this._disposables.dispose(),this._editorPaneDisposables.dispose(),this._editorControlDisposables.dispose(),this._editorListener.dispose(),super.dispose()}focus(){this._tree?.domFocus()}renderBody(e){super.renderBody(e),this._domNode=e,e.classList.add("outline-pane");const t=w.$(".outline-progress");this._message=w.$(".outline-message"),this._progressBar=new b.k(t,A.b5),this._treeContainer=w.$(".outline-tree"),w.R3(e,t,this._message,this._treeContainer),this._disposables.add(this.onDidChangeBodyVisibility((e=>{if(e){if(!this._editorListener.value){const e=g.ju.any(this._editorService.onDidActiveEditorChange,this._outlineService.onDidChange);this._editorListener.value=e((()=>this._handleEditorChanged(this._editorService.activeEditorPane))),this._handleEditorChanged(this._editorService.activeEditorPane)}}else this._editorListener.clear(),this._editorPaneDisposables.clear(),this._editorControlDisposables.clear()})))}layoutBody(e,t){super.layoutBody(e,t),this._tree?.layout(e,t),this._treeDimensions=new w.Ro(t,e)}collapseAll(){this._tree?.collapseAll()}expandAll(){this._tree?.expandAll()}get outlineViewState(){return this._outlineViewState}_showMessage(e){this._domNode.classList.add("message"),this._progressBar.stop().hide(),this._message.innerText=e}_captureViewState(e){if(this._tree){const t=this._tree.getInput();if(e||(e=t?.uri),t&&e)return this._treeStates.set(`${t.outlineKind}/${e}`,this._tree.getViewState()),!0}return!1}_handleEditorChanged(e){this._editorPaneDisposables.clear(),e&&this._editorPaneDisposables.add(e.onDidChangeControl((()=>{this._handleEditorControlChanged(e)}))),this._handleEditorControlChanged(e)}async _handleEditorControlChanged(e){const t=Gi.zK.getOriginalUri(e?.input),i=this._captureViewState();if(this._editorControlDisposables.clear(),!e||!this._outlineService.canCreateOutline(e)||!t)return this._showMessage((0,l.NC)("no-editor","The active editor cannot provide outline information."));let o;i||(o=new je._F((()=>{this._showMessage((0,l.NC)("loading","Loading document symbols for '{0}'...",(0,Q.EZ)(t)))}),100)),this._progressBar.infinite().show(500);const s=new ai.A;this._editorControlDisposables.add((0,p.OF)((()=>s.dispose(!0))));const n=await this._outlineService.createOutline(e,1,s.token);if(o?.dispose(),!n)return;if(s.token.isCancellationRequested)return void n?.dispose();this._editorControlDisposables.add(n),this._progressBar.stop().hide();const r=new ra(n.config.comparator,this._outlineViewState.sortBy),a=this._instantiationService.createInstance(go.C7,"OutlinePane",this._treeContainer,n.config.delegate,n.config.renderers,n.config.treeDataSource,{...n.config.options,sorter:r,expandOnDoubleClick:!1,expandOnlyOnTwistieClick:!0,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,defaultFindMode:this._outlineViewState.filterOnType?ta.sZ.Filter:ta.sZ.Highlight,overrideStyles:{listBackground:this.getBackgroundColor()}}),c=()=>{if(n.isEmpty)this._showMessage((0,l.NC)("no-symbols","No symbols found in document '{0}'",(0,Q.EZ)(t))),this._captureViewState(t),a.setInput(void 0);else if(a.getInput())this._domNode.classList.remove("message"),a.updateChildren();else{this._domNode.classList.remove("message");const e=this._treeStates.get(`${n.outlineKind}/${n.uri}`);a.setInput(n,e&&ta.I7.lift(e))}};c(),this._editorControlDisposables.add(n.onDidChange(c)),a.findMode=this._outlineViewState.filterOnType?ta.sZ.Filter:ta.sZ.Highlight,this._editorControlDisposables.add(this.viewDescriptorService.onDidChangeLocation((({views:e})=>{e.some((e=>e.id===this.id))&&a.updateOptions({overrideStyles:{listBackground:this.getBackgroundColor()}})}))),this._editorControlDisposables.add(a.onDidChangeFindMode((e=>this._outlineViewState.filterOnType=e===ta.sZ.Filter))),this._editorControlDisposables.add(a.onDidOpen((e=>n.reveal(e.element,e.editorOptions,e.sideBySide))));const d=()=>{if(!this._outlineViewState.followCursor||!n.activeElement)return;let e=n.activeElement;for(;e;){if(null===a.getRelativeTop(e)&&a.reveal(e,.5),null!==a.getRelativeTop(e)){a.setFocus([e]),a.setSelection([e]);break}e=a.getParentElement(e)}};let h;d(),this._editorControlDisposables.add(n.onDidChange(d)),this._editorControlDisposables.add(this._outlineViewState.onDidChange((e=>{this._outlineViewState.persist(this._storageService),e.filterOnType&&(a.findMode=this._outlineViewState.filterOnType?ta.sZ.Filter:ta.sZ.Highlight),e.followCursor&&d(),e.sortBy&&(r.order=this._outlineViewState.sortBy,a.resort())}))),this._editorControlDisposables.add(a.onDidChangeFindPattern((e=>{a.findMode!==ta.sZ.Highlight&&(!h&&e?(h=a.getViewState(),a.expandAll()):!e&&h&&(a.setInput(a.getInput(),h),h=void 0))})));const u=()=>{this._ctxAllCollapsed.set(a.getNode(null).children.every((e=>!e.collapsible||e.collapsed)))};this._editorControlDisposables.add(a.onDidChangeCollapseState(u)),this._editorControlDisposables.add(a.onDidChangeModel(u)),u(),a.layout(this._treeDimensions?.height,this._treeDimensions?.width),this._tree=a,this._editorControlDisposables.add((0,p.OF)((()=>{a.dispose(),this._tree=void 0})))}};aa=(0,o.g)([(0,o.f)(1,vo.h),(0,o.f)(2,c.TG),(0,o.f)(3,r.XH),(0,o.f)(4,R.Uy),(0,o.f)(5,oi.AR),(0,o.f)(6,Ee.Ui),(0,o.f)(7,N.d),(0,o.f)(8,H.i6),(0,o.f)(9,O.i),(0,o.f)(10,Kt.v4),(0,o.f)(11,M.XE),(0,o.f)(12,j.bU)],aa);var ca=i(23193),da=i(38984);const ha=(0,Lt.q5)("outline-view-icon",Ze.lA.symbolClass,(0,l.NC)("outlineViewIcon","View icon of the outline view."));h.B.as(r.IP.ViewsRegistry).registerViews([{id:ea.Id,name:(0,l.NC)("name","Outline"),containerIcon:ha,ctorDescriptor:new n.M(aa),canToggleVisibility:!0,canMoveView:!0,hideByDefault:!1,collapsed:!0,order:2,weight:30,focusCommand:{id:"outline.focus"}}],da.zM),h.B.as(ca.IP.Configuration).registerConfiguration({id:"outline",order:117,title:(0,l.NC)("outlineConfigurationTitle","Outline"),type:"object",properties:{"outline.icons":{description:(0,l.NC)("outline.showIcons","Render Outline elements with icons."),type:"boolean",default:!0},"outline.collapseItems":{description:(0,l.NC)("outline.initialState","Controls whether Outline items are collapsed or expanded."),type:"string",scope:5,enum:["alwaysCollapse","alwaysExpand"],enumDescriptions:[(0,l.NC)("outline.initialState.collapsed","Collapse all items."),(0,l.NC)("outline.initialState.expanded","Expand all items.")],default:"alwaysExpand"},"outline.problems.enabled":{description:(0,l.NC)("outline.showProblem","Show errors and warnings on Outline elements."),type:"boolean",default:!0},"outline.problems.colors":{description:(0,l.NC)("outline.problem.colors","Use colors for errors and warnings on Outline elements."),type:"boolean",default:!0},"outline.problems.badges":{description:(0,l.NC)("outline.problems.badges","Use badges for errors and warnings on Outline elements."),type:"boolean",default:!0},"outline.showFiles":{type:"boolean",scope:5,default:!0,markdownDescription:(0,l.NC)("filteredTypes.file","When enabled, Outline shows `file`-symbols.")},"outline.showModules":{type:"boolean",scope:5,default:!0,markdownDescription:(0,l.NC)("filteredTypes.module","When enabled, Outline shows `module`-symbols.")},"outline.showNamespaces":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.namespace","When enabled, Outline shows `namespace`-symbols.")},"outline.showPackages":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.package","When enabled, Outline shows `package`-symbols.")},"outline.showClasses":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.class","When enabled, Outline shows `class`-symbols.")},"outline.showMethods":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.method","When enabled, Outline shows `method`-symbols.")},"outline.showProperties":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.property","When enabled, Outline shows `property`-symbols.")},"outline.showFields":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.field","When enabled, Outline shows `field`-symbols.")},"outline.showConstructors":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.constructor","When enabled, Outline shows `constructor`-symbols.")},"outline.showEnums":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.enum","When enabled, Outline shows `enum`-symbols.")},"outline.showInterfaces":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.interface","When enabled, Outline shows `interface`-symbols.")},"outline.showFunctions":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.function","When enabled, Outline shows `function`-symbols.")},"outline.showVariables":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.variable","When enabled, Outline shows `variable`-symbols.")},"outline.showConstants":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.constant","When enabled, Outline shows `constant`-symbols.")},"outline.showStrings":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.string","When enabled, Outline shows `string`-symbols.")},"outline.showNumbers":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.number","When enabled, Outline shows `number`-symbols.")},"outline.showBooleans":{type:"boolean",scope:5,default:!0,markdownDescription:(0,l.NC)("filteredTypes.boolean","When enabled, Outline shows `boolean`-symbols.")},"outline.showArrays":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.array","When enabled, Outline shows `array`-symbols.")},"outline.showObjects":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.object","When enabled, Outline shows `object`-symbols.")},"outline.showKeys":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.key","When enabled, Outline shows `key`-symbols.")},"outline.showNull":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.null","When enabled, Outline shows `null`-symbols.")},"outline.showEnumMembers":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.enumMember","When enabled, Outline shows `enumMember`-symbols.")},"outline.showStructs":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.struct","When enabled, Outline shows `struct`-symbols.")},"outline.showEvents":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.event","When enabled, Outline shows `event`-symbols.")},"outline.showOperators":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.operator","When enabled, Outline shows `operator`-symbols.")},"outline.showTypeParameters":{type:"boolean",default:!0,scope:5,markdownDescription:(0,l.NC)("filteredTypes.typeParameter","When enabled, Outline shows `typeParameter`-symbols.")}}});var la=i(16252),ua=i(95210),pa=i(4903),ga=i(6126),ma=i(32481),va=i(1995);function ba(e){e&&e.getHTMLElement()!==document.activeElement&&e.domFocus()}async function fa(e,t){if(!e)return;await async function(e,t){if(!go.Cl.getValue(e.contextKeyService))return t(e);const i=e.getFocus(),o=e.getSelection();await t(e);const s=e.getFocus();if(o.length>1||!(0,Y.fS)(i,o)||(0,Y.fS)(i,s))return;const n=new KeyboardEvent("keydown");e.setSelection(s,n)}(e,t);const i=e.getFocus();i.length&&e.reveal(i[0]),e.setAnchor(i[0]),ba(e)}function wa(e,t){if(e instanceof la.aV||e instanceof ua.j||e instanceof va.i){const i=e,o=i.getFocus()?i.getFocus()[0]:void 0,s=i.getSelection();s&&"number"==typeof o&&s.indexOf(o)>=0?i.setSelection(s.filter((e=>e!==t))):"number"==typeof o&&i.setSelection(s.concat(o))}else if(e instanceof pa.H||e instanceof ma.u||e instanceof ga.c){const i=e,o=i.getFocus()?i.getFocus()[0]:void 0;if(t===o)return;const s=i.getSelection(),n=new KeyboardEvent("keydown",{shiftKey:!0});s&&s.indexOf(o)>=0?i.setSelection(s.filter((e=>e!==t)),n):i.setSelection(s.concat(o),n)}}function ya(e,t){const i=e.get(go.Lw).lastFocusedList,o=(0,go.gN)("keydown",t);if(i instanceof la.aV||i instanceof ua.j||i instanceof va.i){const e=i;e.setSelection(e.getFocus(),o),e.setAnchor(e.getFocus()[0])}else if(i instanceof pa.H||i instanceof ma.u||i instanceof ga.c){const e=i,t=e.getFocus();if(t.length>0){let i=!0;(!0===e.expandOnlyOnTwistieClick||"boolean"!=typeof e.expandOnlyOnTwistieClick&&e.expandOnlyOnTwistieClick(t[0]))&&(i=!1),i&&e.toggleCollapsed(t[0])}e.setSelection(t,o),e.setAnchor(t[0])}}ut.W.registerCommandAndKeybindingRule({id:"list.focusDown",weight:200,when:go.CQ,primary:18,mac:{primary:18,secondary:[300]},handler:(e,t)=>{fa(e.get(go.Lw).lastFocusedList,(async e=>{const i=new KeyboardEvent("keydown");await e.focusNext("number"==typeof t?t:1,!1,i)}))}}),ut.W.registerCommandAndKeybindingRule({id:"list.focusUp",weight:200,when:go.CQ,primary:16,mac:{primary:16,secondary:[302]},handler:(e,t)=>{fa(e.get(go.Lw).lastFocusedList,(async e=>{const i=new KeyboardEvent("keydown");await e.focusPrevious("number"==typeof t?t:1,!1,i)}))}}),ut.W.registerCommandAndKeybindingRule({id:"list.focusPageDown",weight:200,when:go.CQ,primary:12,handler:e=>{fa(e.get(go.Lw).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusNextPage(t)}))}}),ut.W.registerCommandAndKeybindingRule({id:"list.focusPageUp",weight:200,when:go.CQ,primary:11,handler:e=>{fa(e.get(go.Lw).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusPreviousPage(t)}))}}),ut.W.registerCommandAndKeybindingRule({id:"list.focusFirst",weight:200,when:go.CQ,primary:14,handler:e=>{fa(e.get(go.Lw).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusFirst(t)}))}}),ut.W.registerCommandAndKeybindingRule({id:"list.focusLast",weight:200,when:go.CQ,primary:13,handler:e=>{fa(e.get(go.Lw).lastFocusedList,(async e=>{const t=new KeyboardEvent("keydown");await e.focusLast(t)}))}}),ut.W.registerCommandAndKeybindingRule({id:"list.expandSelectionDown",weight:200,when:H.Ao.and(go.CQ,go.bn),primary:1042,handler:(e,t)=>{const i=e.get(go.Lw).lastFocusedList;if(!i)return;const o=i.getFocus()?i.getFocus()[0]:void 0,s=new KeyboardEvent("keydown");i.focusNext("number"==typeof t?t:1,!1,s),wa(i,o);const n=i.getFocus();n.length&&i.reveal(n[0]),ba(i)}}),ut.W.registerCommandAndKeybindingRule({id:"list.expandSelectionUp",weight:200,when:H.Ao.and(go.CQ,go.bn),primary:1040,handler:(e,t)=>{const i=e.get(go.Lw).lastFocusedList;if(!i)return;const o=i.getFocus()?i.getFocus()[0]:void 0,s=new KeyboardEvent("keydown");i.focusPrevious("number"==typeof t?t:1,!1,s),wa(i,o);const n=i.getFocus();n.length&&i.reveal(n[0]),ba(i)}}),ut.W.registerCommandAndKeybindingRule({id:"list.collapse",weight:200,when:H.Ao.and(go.CQ,H.Ao.or(go.PS,go.RM)),primary:15,mac:{primary:15,secondary:[2064]},handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(!t||!(t instanceof pa.H||t instanceof ma.u||t instanceof ga.c))return;const i=t,o=i.getFocus();if(0===o.length)return;const s=o[0];if(!i.collapse(s)){const e=i.getParentElement(s);e&&fa(t,(t=>{const i=new KeyboardEvent("keydown");t.setFocus([e],i)}))}}}),ut.W.registerCommandAndKeybindingRule({id:"list.collapseAll",weight:200,when:go.CQ,primary:2063,mac:{primary:2063,secondary:[3088]},handler:e=>{const t=e.get(go.Lw).lastFocusedList;t&&!(t instanceof la.aV||t instanceof ua.j||t instanceof va.i)&&t.collapseAll()}}),ut.W.registerCommandAndKeybindingRule({id:"list.collapseAllToFocus",weight:200,when:go.CQ,handler:e=>{const t=e.get(go.Lw).lastFocusedList,i=(0,go.gN)("keydown",!0);if(t instanceof pa.H||t instanceof ma.u||t instanceof ga.c){const e=t,o=e.getFocus();o.length>0&&e.collapse(o[0],!0),e.setSelection(o,i),e.setAnchor(o[0])}}}),ut.W.registerCommandAndKeybindingRule({id:"list.focusParent",weight:200,when:go.CQ,handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(!t||!(t instanceof pa.H||t instanceof ma.u||t instanceof ga.c))return;const i=t,o=i.getFocus();if(0===o.length)return;const s=o[0],n=i.getParentElement(s);n&&fa(t,(e=>{const t=new KeyboardEvent("keydown");e.setFocus([n],t)}))}}),ut.W.registerCommandAndKeybindingRule({id:"list.expand",weight:200,when:H.Ao.and(go.CQ,H.Ao.or(go.uJ,go.Zs)),primary:17,handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(t)if(t instanceof pa.H||t instanceof ma.u){const e=t.getFocus();if(0===e.length)return;const i=e[0];if(!t.expand(i)){const e=t.getFirstElementChild(i);e&&t.getNode(e).visible&&fa(t,(t=>{const i=new KeyboardEvent("keydown");t.setFocus([e],i)}))}}else if(t instanceof ga.c){const e=t.getFocus();if(0===e.length)return;const i=e[0];t.expand(i).then((e=>{if(i&&!e){const e=t.getFirstElementChild(i);e&&t.getNode(e).visible&&fa(t,(t=>{const i=new KeyboardEvent("keydown");t.setFocus([e],i)}))}}))}}}),ut.W.registerCommandAndKeybindingRule({id:"list.select",weight:200,when:go.CQ,primary:3,mac:{primary:3,secondary:[2066]},handler:e=>{ya(e,!1)}}),ut.W.registerCommandAndKeybindingRule({id:"list.selectAndPreserveFocus",weight:200,when:go.CQ,handler:e=>{ya(e,!0)}}),ut.W.registerCommandAndKeybindingRule({id:"list.selectAll",weight:200,when:H.Ao.and(go.CQ,go.bn),primary:2079,handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(t instanceof la.aV||t instanceof ua.j||t instanceof va.i){const e=t,i=new KeyboardEvent("keydown");e.setSelection((0,Y.w6)(e.length),i)}else if(t instanceof pa.H||t instanceof ma.u||t instanceof ga.c){const e=t,i=e.getFocus(),o=e.getSelection();let s,n;i.length>0&&(0===o.length||!o.includes(i[0]))&&(s=i[0]),!s&&o.length>0&&(s=o[0]),n=s?e.getParentElement(s):void 0;const r=[],a=e=>{for(const t of e.children)t.visible&&(r.push(t.element),t.collapsed||a(t))};a(e.getNode(n)),n&&o.length===r.length&&r.unshift(n);const c=new KeyboardEvent("keydown");e.setSelection(r,c)}}}),ut.W.registerCommandAndKeybindingRule({id:"list.toggleSelection",weight:200,when:go.CQ,primary:3075,handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(!t)return;const i=t.getFocus();if(0===i.length)return;const o=t.getSelection(),s=o.indexOf(i[0]);s>-1?t.setSelection([...o.slice(0,s),...o.slice(s+1)]):t.setSelection([...o,i[0]])}}),ut.W.registerCommandAndKeybindingRule({id:"list.toggleExpand",weight:200,when:go.CQ,primary:10,handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(t instanceof pa.H||t instanceof ma.u||t instanceof ga.c){const e=t,i=e.getFocus();if(i.length>0&&e.isCollapsible(i[0]))return void e.toggleCollapsed(i[0])}ya(e,!0)}}),ut.W.registerCommandAndKeybindingRule({id:"list.clear",weight:200,when:H.Ao.and(go.CQ,go.Eu),primary:9,handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(!t)return;const i=t.getSelection(),o=new KeyboardEvent("keydown");if(i.length>1)if(go.Cl.getValue(t.contextKeyService)){const e=t.getFocus();t.setSelection([e[0]],o)}else t.setSelection([],o);else t.setSelection([],o),t.setFocus([],o);t.setAnchor(void 0)}}),ht.P.registerCommand({id:"list.triggerTypeNavigation",handler:e=>{const t=e.get(go.Lw).lastFocusedList;t?.triggerTypeNavigation()}}),ht.P.registerCommand({id:"list.toggleFindMode",handler:e=>{const t=e.get(go.Lw).lastFocusedList;if(t instanceof ta.CH||t instanceof ga.c){const e=t;e.findMode=e.findMode===ta.sZ.Filter?ta.sZ.Highlight:ta.sZ.Filter}}}),ht.P.registerCommandAlias("list.toggleKeyboardNavigation","list.triggerTypeNavigation"),ht.P.registerCommandAlias("list.toggleFilterOnType","list.toggleFindMode"),ut.W.registerCommandAndKeybindingRule({id:"list.find",weight:200,when:H.Ao.and(go.s2,go.hR),primary:2084,secondary:[61],handler:e=>{const t=e.get(go.Lw).lastFocusedList;t instanceof la.aV||t instanceof ua.j||t instanceof va.i||(t instanceof ta.CH||t instanceof ga.c)&&t.openFind()}}),ut.W.registerCommandAndKeybindingRule({id:"list.closeFind",weight:200,when:H.Ao.and(go.s2,go.DG),primary:9,handler:e=>{const t=e.get(go.Lw).lastFocusedList;(t instanceof ta.CH||t instanceof ga.c)&&t.closeFind()}}),ut.W.registerCommandAndKeybindingRule({id:"list.scrollUp",weight:200,when:H.Ao.and(go.CQ,go.QE?.negate()),primary:2064,handler:e=>{const t=e.get(go.Lw).lastFocusedList;t&&(t.scrollTop-=10)}}),ut.W.registerCommandAndKeybindingRule({id:"list.scrollDown",weight:200,when:H.Ao.and(go.CQ,go.d1?.negate()),primary:2066,handler:e=>{const t=e.get(go.Lw).lastFocusedList;t&&(t.scrollTop+=10)}}),ut.W.registerCommandAndKeybindingRule({id:"list.scrollLeft",weight:200,when:go.CQ,handler:e=>{const t=e.get(go.Lw).lastFocusedList;t&&(t.scrollLeft-=10)}}),ut.W.registerCommandAndKeybindingRule({id:"list.scrollRight",weight:200,when:go.CQ,handler:e=>{const t=e.get(go.Lw).lastFocusedList;t&&(t.scrollLeft+=10)}}),(0,d.Z)('.file-icon-themable-tree .align-icon-with-twisty .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree .monaco-tl-twistie.force-no-twistie,.file-icon-themable-tree.align-icons-and-twisties .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree.hide-arrows .monaco-tl-twistie:not(.force-twistie){background-image:none!important;padding-right:0!important;visibility:hidden;width:0!important}.file-icon-themable-tree .monaco-list-row .content .monaco-highlighted-label .highlight,.monaco-tl-contents .monaco-highlighted-label .highlight{background-color:var(--vscode-list-filterMatchBackground);color:unset!important;outline:1px dotted var(--vscode-list-filterMatchBorder);outline-offset:-1px}.monaco-workbench .tree-explorer-viewlet-tree-view{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message{display:flex;padding:4px 12px 4px 18px;user-select:text;-webkit-user-select:text}.monaco-workbench .tree-explorer-viewlet-tree-view .message p{margin-bottom:0;margin-top:0;padding-bottom:4px}.monaco-workbench .tree-explorer-viewlet-tree-view .message ul{padding-left:24px}.monaco-workbench .tree-explorer-viewlet-tree-view .message a{color:var(--vscode-textLink-foreground)}.monaco-workbench .tree-explorer-viewlet-tree-view .message.hide{display:none}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree.hide{display:none}.monaco-workbench .pane>.pane-body>.welcome-view{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:100%}.monaco-workbench .pane>.pane-body.welcome>:not(.welcome-view),.monaco-workbench .pane>.pane-body:not(.welcome)>.welcome-view{display:none}.monaco-workbench .pane>.pane-body .welcome-view-content{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;padding:0 20px 1em}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container{max-width:300px;width:100%}.monaco-workbench:not(.reduce-motion) .pane>.pane-body .welcome-view-content>.button-container{transition:max-width .2s ease-out}.monaco-workbench .pane>.pane-body .welcome-view-content.wide>.button-container{max-width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container>.monaco-button{max-width:300px}.monaco-workbench .pane>.pane-body .welcome-view-content>p{width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>*{margin-block-end:0;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.customview-tree .monaco-list-row .monaco-tl-contents.align-icon-with-twisty:before{display:none}.customview-tree .monaco-list-row .monaco-tl-contents:not(.align-icon-with-twisty):before{display:inline-block}.customview-tree .monaco-list .monaco-list-row{padding-left:0;padding-right:12px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item{display:flex;flex:1;flex-wrap:nowrap;height:22px;line-height:22px;overflow:hidden;padding-left:3px;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-selectBackground);border:1px solid var(--vscode-checkbox-selectBorder)}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-background);border:1px solid var(--vscode-checkbox-border);height:16px;margin:3px 6px 3px 0;opacity:1;padding:0;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox.codicon{font-size:13px;line-height:15px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-inputbox{flex:1;line-height:normal}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel{flex:1;overflow:hidden;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-icon-label-container:after{content:"";display:block}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon,.timeline-tree-view .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-icon{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;align-items:center;background-position:0;background-repeat:no-repeat;background-size:16px;display:flex;height:22px;justify-content:center;padding-right:6px;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.disabled{opacity:.6}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon.codicon-modifier-spin{margin-left:-6px;padding-left:6px}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon{color:currentColor!important}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel:after{margin-right:4px;padding-right:0}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions{display:none}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions .action-label{padding:2px}.customview-tree .monaco-list .monaco-list-row.focused .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row:hover .custom-view-tree-node-item .actions{display:block}.viewpane-filter-container{cursor:default;display:flex}.viewpane-filter-container.grow{flex:1}.viewpane-filter-container>.viewpane-filter{align-items:center;display:flex;flex:1;position:relative}.viewpane-filter-container>.viewpane-filter .monaco-inputbox{flex:1;font-size:12px;height:24px}.pane-header .viewpane-filter-container>.viewpane-filter .monaco-inputbox .monaco-inputbox{height:20px;line-height:18px}.monaco-workbench.vs .viewpane-filter-container>.viewpane-filter .monaco-inputbox{height:25px}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls{align-items:center;bottom:0;display:flex;position:absolute;right:0;top:0}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge{border-radius:2px;margin:4px 0;padding:0 8px}.viewpane-filter.small>.viewpane-filter-controls>.viewpane-filter-badge,.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge.hidden{display:none}.viewpane-filter>.viewpane-filter-controls>.monaco-action-bar .action-item .action-label.codicon.filter{padding:2px}.panel>.title .monaco-action-bar .action-item.viewpane-filter-container{margin-right:10px;max-width:400px;min-width:150px}.pane-body .viewpane-filter-container:not(:empty){flex:1;height:auto;margin:10px 20px}.pane-body .viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-item{margin-right:4px}.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-label.codicon.codicon-filter.checked{background-color:var(--vscode-inputOption-activeBackground);border-color:var(--vscode-inputOption-activeBorder);color:var(--vscode-inputOption-activeForeground)}',{});var Ca=i(90553),Sa=i(96250),_a=i(76033);class Ea extends ye.aU{constructor(e,t){super("vs.tree.collapse",l.NC("collapse all","Collapse All"),"collapse-all",t),this.viewer=e}async run(){this.viewer.collapseAll(),this.viewer.setSelection([]),this.viewer.setFocus([])}}var xa=i(81170),ka=i(73278),Da=i(46444),Aa=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};function Ia(e){const t=e.path?J.ov.parse(e.path):void 0;return(0,ka.Ix)(e.name,t,(()=>Aa(this,void 0,void 0,(function*(){return new Uint8Array(yield e.arrayBuffer())}))))}const Ta=Object.freeze([Go.Km.EDITORS,Go.Km.FILES,ji.go.RESOURCES,ji.go.INTERNAL_URI_LIST]);function Va(e,t=!1){const i=function(e){const t=new ka.Hl;for(const i of e.items){const e=i.type;if("string"===i.kind){const o=new Promise((e=>i.getAsString(e)));t.append(e,(0,ka.ZO)(o))}else if("file"===i.kind){const o=i.getAsFile();o&&t.append(e,Ia(o))}}return t}(e),o=i.get(ji.go.INTERNAL_URI_LIST);if(o)i.replace(xa.vW.uriList,o);else if(t||!i.has(xa.vW.uriList)){const t=[];for(const i of e.items){const e=i.getAsFile();if(e){const i=e.path;try{i?t.push(J.ov.file(i).toString()):t.push(J.ov.parse(e.name,!0).toString())}catch(e){}}}t.length&&i.replace(xa.vW.uriList,(0,ka.ZO)(ka.Z0.create(t)))}for(const e of Ta)i.delete(e);return i}var La=i(51433),Ra=i(98892);class Oa extends p.JT{constructor(){super(...arguments),this._onDidChangeCheckboxState=this._register(new g.Q5),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event}setCheckboxState(e){this._onDidChangeCheckboxState.fire([e])}}class Na extends p.JT{static{this.checkboxClass="custom-view-tree-node-item-checkbox"}constructor(e,t,i){super(),this.checkboxStateHandler=t,this.hoverDelegate=i,this.isDisposed=!1,this._onDidChangeState=new g.Q5,this.onDidChangeState=this._onDidChangeState.event,this.checkboxContainer=e}render(e){e.checkbox&&(this.toggle?(this.toggle.checked=e.checkbox.isChecked,this.toggle.setIcon(this.toggle.checked?Ze.lA.check:void 0)):this.createCheckbox(e))}createCheckbox(e){e.checkbox&&(this.toggle=new Ra.ZD({isChecked:e.checkbox.isChecked,title:"",icon:e.checkbox.isChecked?Ze.lA.check:void 0,...A.pl}),this.setHover(e.checkbox),this.setAccessibilityInformation(e.checkbox),this.toggle.domNode.classList.add(Na.checkboxClass),w.R3(this.checkboxContainer,this.toggle.domNode),this.registerListener(e))}registerListener(e){this.toggle&&(this._register({dispose:()=>this.removeCheckbox()}),this._register(this.toggle),this._register(this.toggle.onChange((()=>{this.setCheckbox(e)}))))}setHover(e){this.toggle&&(this.hover?this.hover.update(e.tooltip):(this.hover=(0,La.g)(this.hoverDelegate,this.toggle.domNode,this.checkboxHoverContent(e)),this._register(this.hover)))}setCheckbox(e){this.toggle&&e.checkbox&&(e.checkbox.isChecked=this.toggle.checked,this.toggle.setIcon(this.toggle.checked?Ze.lA.check:void 0),this.setHover(e.checkbox),this.setAccessibilityInformation(e.checkbox),this.checkboxStateHandler.setCheckboxState(e))}checkboxHoverContent(e){return e.tooltip?e.tooltip:e.isChecked?(0,l.NC)("checked","Checked"):(0,l.NC)("unchecked","Unchecked")}setAccessibilityInformation(e){this.toggle&&e.accessibilityInformation&&(this.toggle.domNode.ariaLabel=e.accessibilityInformation.label,e.accessibilityInformation.role&&(this.toggle.domNode.role=e.accessibilityInformation.role))}removeCheckbox(){const e=this.checkboxContainer.children;for(const t of e)this.checkboxContainer.removeChild(t)}}let Ma=class extends gi.qV{constructor(e,t,i,o,s,n,a,c,d,l,u){super({...e,titleMenuId:te.eH.ViewTitle,donotForwardArgs:!1},t,i,o,s,n,a,c,d,l);const{treeView:g}=h.B.as(r.IP.ViewsRegistry).getView(e.id);this.treeView=g,this._register(this.treeView.onDidChangeActions((()=>this.updateActions()),this)),this._register(this.treeView.onDidChangeTitle((e=>this.updateTitle(e)))),this._register(this.treeView.onDidChangeDescription((e=>this.updateTitleDescription(e)))),this._register((0,p.OF)((()=>{this._container&&this.treeView.container&&this._container===this.treeView.container&&this.treeView.setVisibility(!1)}))),this._register(this.onDidChangeBodyVisibility((()=>this.updateTreeVisibility()))),this._register(this.treeView.onDidChangeWelcomeState((()=>this._onDidChangeViewWelcomeState.fire()))),e.title!==this.treeView.title&&this.updateTitle(this.treeView.title),e.titleDescription!==this.treeView.description&&this.updateTitleDescription(this.treeView.description),this._actionRunner=new Ja(u,(()=>this.treeView.getSelection())),this.updateTreeVisibility()}focus(){super.focus(),this.treeView.focus()}renderBody(e){this._container=e,super.renderBody(e),this.renderTreeView(e)}shouldShowWelcome(){return(void 0===this.treeView.dataProvider||!!this.treeView.dataProvider.isTreeEmpty)&&void 0===this.treeView.message}layoutBody(e,t){super.layoutBody(e,t),this.layoutTreeView(e,t)}getOptimalWidth(){return this.treeView.getOptimalWidth()}renderTreeView(e){this.treeView.show(e)}layoutTreeView(e,t){this.treeView.layout(e,t)}updateTreeVisibility(){this.treeView.setVisibility(this.isBodyVisible())}getActionRunner(){return this._actionRunner}getActionsContext(){return{$treeViewId:this.id,$focusedTreeItem:!0,$selectedTreeItems:!0}}};Ma=(0,o.g)([(0,o.f)(1,N.d),(0,o.f)(2,O.i),(0,o.f)(3,Ee.Ui),(0,o.f)(4,H.i6),(0,o.f)(5,r.XH),(0,o.f)(6,c.TG),(0,o.f)(7,Kt.v4),(0,o.f)(8,M.XE),(0,o.f)(9,j.bU),(0,o.f)(10,F.lT)],Ma);class Pa{constructor(){this.label={label:"root"},this.handle="0",this.parentHandle=void 0,this.collapsibleState=r.oC.Expanded,this.children=void 0}}function Ba(e,t){const i=ht.P.getCommand(e.originalId?e.originalId:e.id);if(i){const e=te.BH.getCommand(i.id),o=e&&e.precondition;if(o)return t.contextMatchesRules(o)}return!0}function Fa(e){return!!e&&"string"!=typeof e&&"element"in e&&"dispose"in e}const Wa=(0,l.NC)("no-dataprovider","There is no data provider registered that can provide view data."),Ha=new H.uy("customTreeView",!1);class za extends go.ls{}let Ga=class extends p.JT{constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,p,m){super(),this.id=e,this._title=t,this.themeService=i,this.instantiationService=o,this.commandService=s,this.configurationService=n,this.progressService=r,this.contextMenuService=a,this.keybindingService=c,this.notificationService=d,this.viewDescriptorService=h,this.hoverService=l,this.contextKeyService=u,this.activityService=p,this.logService=m,this.isVisible=!1,this._hasIconForParentNode=!1,this._hasIconForLeafNode=!1,this.focused=!1,this._canSelectMany=!1,this._manuallyManageCheckboxes=!1,this.elementsToRefresh=[],this.lastSelection=[],this._onDidExpandItem=this._register(new g.Q5),this.onDidExpandItem=this._onDidExpandItem.event,this._onDidCollapseItem=this._register(new g.Q5),this.onDidCollapseItem=this._onDidCollapseItem.event,this._onDidChangeSelectionAndFocus=this._register(new g.Q5),this.onDidChangeSelectionAndFocus=this._onDidChangeSelectionAndFocus.event,this._onDidChangeVisibility=this._register(new g.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDidChangeActions=this._register(new g.Q5),this.onDidChangeActions=this._onDidChangeActions.event,this._onDidChangeWelcomeState=this._register(new g.Q5),this.onDidChangeWelcomeState=this._onDidChangeWelcomeState.event,this._onDidChangeTitle=this._register(new g.Q5),this.onDidChangeTitle=this._onDidChangeTitle.event,this._onDidChangeDescription=this._register(new g.Q5),this.onDidChangeDescription=this._onDidChangeDescription.event,this._onDidChangeCheckboxState=this._register(new g.Q5),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidCompleteRefresh=this._register(new g.Q5),this._isInitialized=!1,this._height=0,this._width=0,this.refreshing=!1,this.root=new Pa,this.lastActive=this.root}initialize(){this._isInitialized||(this._isInitialized=!0,this.contextKeyService.bufferChangeEvents((()=>{this.initializeShowCollapseAllAction(),this.initializeCollapseAllToggle(),this.initializeShowRefreshAction()})),this.treeViewDnd=this.instantiationService.createInstance(qa,this.id),this._dragAndDropController&&(this.treeViewDnd.controller=this._dragAndDropController),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("explorer.decorations")&&this.doRefresh([this.root])}))),this._register(this.viewDescriptorService.onDidChangeLocation((({views:e,from:t,to:i})=>{e.some((e=>e.id===this.id))&&this.tree?.updateOptions({overrideStyles:{listBackground:1===this.viewLocation?B.v9:B.Qd}})}))),this.registerActions(),this.create())}get viewContainer(){return this.viewDescriptorService.getViewContainerByViewId(this.id)}get viewLocation(){return this.viewDescriptorService.getViewLocationById(this.id)}get dragAndDropController(){return this._dragAndDropController}set dragAndDropController(e){this._dragAndDropController=e,this.treeViewDnd&&(this.treeViewDnd.controller=e)}get dataProvider(){return this._dataProvider}set dataProvider(e){if(e){const t=this;this._dataProvider=new class{constructor(){this._isEmpty=!0,this._onDidChangeEmpty=new g.Q5,this.onDidChangeEmpty=this._onDidChangeEmpty.event}get isTreeEmpty(){return this._isEmpty}async getChildren(i){let o;const s=[];if(i&&i.children?o=i.children:((i=i??t.root).children=await(i instanceof Pa?e.getChildren():e.getChildren(i)),o=i.children??[],o.forEach((e=>{e.parent=i,t.manuallyManageCheckboxes||!0!==i?.checkbox?.isChecked||!1!==e.checkbox?.isChecked||(e.checkbox.isChecked=!0,s.push(e))}))),i instanceof Pa){const e=this._isEmpty;this._isEmpty=0===o.length,e!==this._isEmpty&&this._onDidChangeEmpty.fire()}return s.length>0&&t._onDidChangeCheckboxState.fire(s),o}},this._dataProvider.onDidChangeEmpty&&this._register(this._dataProvider.onDidChangeEmpty((()=>{this.updateCollapseAllToggle(),this._onDidChangeWelcomeState.fire()}))),this.updateMessage(),this.refresh()}else this._dataProvider=void 0,this.updateMessage();this._onDidChangeWelcomeState.fire()}get message(){return this._message}set message(e){this._message=e,this.updateMessage(),this._onDidChangeWelcomeState.fire()}get title(){return this._title}set title(e){this._title=e,this._onDidChangeTitle.fire(this._title)}get description(){return this._description}set description(e){this._description=e,this._onDidChangeDescription.fire(this._description)}get badge(){return this._badge}set badge(e){if((this._badge?.value!==e?.value||this._badge?.tooltip!==e?.tooltip)&&(this._badgeActivity&&(this._badgeActivity.dispose(),this._badgeActivity=void 0),this._badge=e,e)){const t={badge:new pe.mA(e.value,(()=>e.tooltip)),priority:50};this._badgeActivity=this.activityService.showViewActivity(this.id,t)}}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){const t=this._canSelectMany;this._canSelectMany=e,this._canSelectMany!==t&&this.tree?.updateOptions({multipleSelectionSupport:this.canSelectMany})}get manuallyManageCheckboxes(){return this._manuallyManageCheckboxes}set manuallyManageCheckboxes(e){this._manuallyManageCheckboxes=e}get hasIconForParentNode(){return this._hasIconForParentNode}get hasIconForLeafNode(){return this._hasIconForLeafNode}get visible(){return this.isVisible}initializeShowCollapseAllAction(e=!1){return this.collapseAllContext||(this.collapseAllContextKey=new H.uy(`treeView.${this.id}.enableCollapseAll`,e,(0,l.NC)("treeView.enableCollapseAll","Whether the the tree view with id {0} enables collapse all.",this.id)),this.collapseAllContext=this.collapseAllContextKey.bindTo(this.contextKeyService)),!0}get showCollapseAllAction(){return this.initializeShowCollapseAllAction(),!!this.collapseAllContext?.get()}set showCollapseAllAction(e){this.initializeShowCollapseAllAction(e),this.collapseAllContext?.set(e)}initializeShowRefreshAction(e=!1){this.refreshContext||(this.refreshContextKey=new H.uy(`treeView.${this.id}.enableRefresh`,e,(0,l.NC)("treeView.enableRefresh","Whether the tree view with id {0} enables refresh.",this.id)),this.refreshContext=this.refreshContextKey.bindTo(this.contextKeyService))}get showRefreshAction(){return this.initializeShowRefreshAction(),!!this.refreshContext?.get()}set showRefreshAction(e){this.initializeShowRefreshAction(e),this.refreshContext?.set(e)}registerActions(){const e=this;this._register((0,te.r1)(class extends te.Ke{constructor(){super({id:`workbench.actions.treeView.${e.id}.refresh`,title:(0,l.NC)("refresh","Refresh"),menu:{id:te.eH.ViewTitle,when:H.Ao.and(H.Ao.equals("view",e.id),e.refreshContextKey),group:"navigation",order:Number.MAX_SAFE_INTEGER-1},icon:Ze.lA.refresh})}async run(){return e.refresh()}})),this._register((0,te.r1)(class extends te.Ke{constructor(){super({id:`workbench.actions.treeView.${e.id}.collapseAll`,title:(0,l.NC)("collapseAll","Collapse All"),menu:{id:te.eH.ViewTitle,when:H.Ao.and(H.Ao.equals("view",e.id),e.collapseAllContextKey),group:"navigation",order:Number.MAX_SAFE_INTEGER},precondition:e.collapseAllToggleContextKey,icon:Ze.lA.collapseAll})}async run(){if(e.tree)return new Ea(e.tree,!0).run()}}))}setVisibility(e){this.initialize(),e=!!e,this.isVisible!==e&&(this.isVisible=e,this.tree&&(this.isVisible?w.$Z(this.tree.getHTMLElement()):w.Cp(this.tree.getHTMLElement()),this.isVisible&&this.elementsToRefresh.length&&this.dataProvider&&(this.doRefresh(this.elementsToRefresh),this.elementsToRefresh=[])),(0,Ke.fn)((()=>{this.dataProvider&&this._onDidChangeVisibility.fire(this.isVisible)})),this.visible&&this.activate())}focus(e=!0,t){if(this.tree&&this.root.children&&this.root.children.length>0){const i=t??this.tree.getSelection()[0];i&&e&&this.tree.reveal(i,.5),this.tree.domFocus()}else this.tree?this.tree.domFocus():this.domNode.focus()}show(e){this._container=e,w.R3(e,this.domNode)}create(){this.domNode=w.$(".tree-explorer-viewlet-tree-view"),this.messageElement=w.R3(this.domNode,w.$(".message")),this.updateMessage(),this.treeContainer=w.R3(this.domNode,w.$(".customview-tree")),this.treeContainer.classList.add("file-icon-themable-tree","show-file-icons");const e=this._register(w.go(this.domNode));this._register(e.onDidFocus((()=>this.focused=!0))),this._register(e.onDidBlur((()=>this.focused=!1)))}createTree(){const e=x.Id.bind(void 0,this.instantiationService),t=this._register(this.instantiationService.createInstance(Ya,this.id));this.treeLabels=this._register(this.instantiationService.createInstance($i.RX,this));const i=this.instantiationService.createInstance($a,this,(e=>this.progressService.withProgress({location:this.id},(()=>e)))),o=new Xa(this.themeService),s=this._register(new Oa),n=this.instantiationService.createInstance(ja,this.id,t,this.treeLabels,e,o,s,this.manuallyManageCheckboxes);this._register(n.onDidChangeCheckboxState((e=>this._onDidChangeCheckboxState.fire(e))));const a=this._title;this.tree=this._register(this.instantiationService.createInstance(za,this.id,this.treeContainer,new Ka,[n],i,{identityProvider:new Ua,accessibilityProvider:{getAriaLabel(e){if(e.accessibilityInformation)return e.accessibilityInformation.label;if((0,y.HD)(e.tooltip))return e.tooltip;{if(e.resourceUri&&!e.label)return null;let t="";return e.label&&(t+=e.label.label+" "),e.description&&(t+=e.description),t}},getRole:e=>e.accessibilityInformation?.role??"treeitem",getWidgetAriaLabel:()=>a},keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:e=>e.label?e.label.label:e.resourceUri?(0,Q.EZ)(J.ov.revive(e.resourceUri)):void 0},expandOnlyOnTwistieClick:e=>!!e.command||!!e.checkbox||"doubleClick"===this.configurationService.getValue("workbench.tree.expandMode"),collapseByDefault:e=>e.collapsibleState!==r.oC.Expanded,multipleSelectionSupport:this.canSelectMany,dnd:this.treeViewDnd,overrideStyles:{listBackground:1===this.viewLocation?B.v9:B.Qd}})),t.setContextKeyService(this.tree.contextKeyService),o.tree=this.tree;const c=new Ja(this.notificationService,(()=>this.tree.getSelection()));n.actionRunner=c,this.tree.contextKeyService.createKey(this.id,!0),Ha.bindTo(this.tree.contextKeyService).set(!0),this._register(this.tree.onContextMenu((e=>this.onContextMenu(t,e,c)))),this._register(this.tree.onDidChangeSelection((e=>{this.lastSelection=e.elements,this.lastActive=this.tree?.getFocus()[0]??this.lastActive,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive})}))),this._register(this.tree.onDidChangeFocus((e=>{e.elements.length&&e.elements[0]!==this.lastActive&&(this.lastActive=e.elements[0],this.lastSelection=this.tree?.getSelection()??this.lastSelection,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive}))}))),this._register(this.tree.onDidChangeCollapseState((e=>{if(!e.node.element)return;const t=Array.isArray(e.node.element.element)?e.node.element.element[0]:e.node.element.element;e.node.collapsed?this._onDidCollapseItem.fire(t):this._onDidExpandItem.fire(t)}))),this.tree.setInput(this.root).then((()=>this.updateContentAreas())),this._register(this.tree.onDidOpen((async e=>{if(!e.browserEvent)return;if(e.browserEvent.target&&e.browserEvent.target.classList.contains(Na.checkboxClass))return;const t=this.tree.getSelection(),i=await this.resolveCommand(1===t.length?t[0]:void 0);if(i&&Ba(i,this.contextKeyService)){let t=i.arguments||[];i.id!==qo.hg&&i.id!==qo.oj||(t=[...t,e]);try{await this.commandService.executeCommand(i.id,...t)}catch(e){this.notificationService.error(e)}}}))),this._register(t.onDidChange((e=>{this.tree?.hasNode(e)&&this.tree?.rerender(e)})))}async resolveCommand(e){let t=e?.command;return e&&!t&&e instanceof r.W6&&e.hasResolve&&(await e.resolve((new ai.A).token),t=e.command),t}onContextMenu(e,t,i){this.hoverService.hideHover();const o=t.element;if(null===o)return;const s=t.browserEvent;s.preventDefault(),s.stopPropagation(),this.tree.setFocus([o]);const n=e.getResourceContextActions(o);n.length&&this.contextMenuService.showContextMenu({getAnchor:()=>t.anchor,getActions:()=>n,getActionViewItem:e=>{const t=this.keybindingService.lookupKeybinding(e.id);if(t)return new _a.gU(e,e,{label:!0,keybinding:t.getLabel()})},onHide:e=>{e&&this.tree.domFocus()},getActionsContext:()=>({$treeViewId:this.id,$treeItemHandle:o.handle}),actionRunner:i})}updateMessage(){this._message?this.showMessage(this._message):this.dataProvider?this.hideMessage():this.showMessage(Wa),this.updateContentAreas()}showMessage(e){Fa(this._messageValue)&&this._messageValue.dispose(),(0,jt.Fr)(e)&&!this.markdownRenderer&&(this.markdownRenderer=this.instantiationService.createInstance($t.$,{})),this._messageValue=(0,jt.Fr)(e)?this.markdownRenderer.render(e):e,this.messageElement&&(this.messageElement.classList.remove("hide"),this.resetMessageElement(),"string"!=typeof this._messageValue||(0,tt.m5)(this._messageValue)?Fa(this._messageValue)&&this.messageElement.appendChild(this._messageValue.element):this.messageElement.textContent=this._messageValue,this.layout(this._height,this._width))}hideMessage(){this.resetMessageElement(),this.messageElement?.classList.add("hide"),this.layout(this._height,this._width)}resetMessageElement(){this.messageElement&&w.PO(this.messageElement)}layout(e,t){if(e&&t&&this.messageElement&&this.treeContainer){this._height=e,this._width=t;const i=e-w.wn(this.messageElement);this.treeContainer.style.height=i+"px",this.tree?.layout(i,t)}}getOptimalWidth(){if(this.tree){const e=this.tree.getHTMLElement(),t=[].slice.call(e.querySelectorAll(".outline-item-label > a"));return w.TW(e,t)}return 0}async refresh(e){if(this.dataProvider&&this.tree){this.refreshing&&await g.ju.toPromise(this._onDidCompleteRefresh.event),e||(e=[this.root],this.elementsToRefresh=[]);for(const t of e)t.children=void 0;if(this.isVisible)return this.doRefresh(e);if(this.elementsToRefresh.length){const t=new Set;this.elementsToRefresh.forEach((e=>t.add(e.handle)));for(const i of e)t.has(i.handle)||this.elementsToRefresh.push(i)}else this.elementsToRefresh.push(...e)}}async expand(e){const t=this.tree;if(t)try{e=Array.isArray(e)?e:[e];for(const i of e)await t.expand(i,!1)}catch(e){}}isCollapsed(e){return!!this.tree?.isCollapsed(e)}setSelection(e){this.tree?.setSelection(e)}getSelection(){return this.tree?.getSelection()??[]}setFocus(e){this.tree&&(e?(this.focus(!0,e),this.tree.setFocus([e])):this.tree.setFocus([]))}async reveal(e){if(this.tree)return this.tree.reveal(e)}async doRefresh(e){const t=this.tree;if(t&&this.visible){this.refreshing=!0;const i=t.getSelection();try{await Promise.all(e.map((e=>t.updateChildren(e,!0,!0))))}catch(e){this.logService.error(e)}const o=t.getSelection();(i.length!==o.length||i.some(((e,t)=>e.handle!==o[t].handle)))&&(this.lastSelection=o,this._onDidChangeSelectionAndFocus.fire({selection:this.lastSelection,focus:this.lastActive})),this.refreshing=!1,this._onDidCompleteRefresh.fire(),this.updateContentAreas(),this.focused&&this.focus(!1),this.updateCollapseAllToggle()}}initializeCollapseAllToggle(){this.collapseAllToggleContext||(this.collapseAllToggleContextKey=new H.uy(`treeView.${this.id}.toggleCollapseAll`,!1,(0,l.NC)("treeView.toggleCollapseAll","Whether collapse all is toggled for the tree view with id {0}.",this.id)),this.collapseAllToggleContext=this.collapseAllToggleContextKey.bindTo(this.contextKeyService))}updateCollapseAllToggle(){this.showCollapseAllAction&&(this.initializeCollapseAllToggle(),this.collapseAllToggleContext?.set(!!this.root.children&&this.root.children.length>0&&this.root.children.some((e=>e.collapsibleState!==r.oC.None))))}updateContentAreas(){const e=!this.root.children||0===this.root.children.length;this._messageValue&&e&&!this.refreshing&&this.treeContainer?(this.dragAndDropController||this.treeContainer.classList.add("hide"),this.domNode.setAttribute("tabindex","0")):this.treeContainer&&(this.treeContainer.classList.remove("hide"),this.domNode.removeAttribute("tabindex"))}get container(){return this._container}};Ga=(0,o.g)([(0,o.f)(2,M.XE),(0,o.f)(3,c.TG),(0,o.f)(4,ht.H),(0,o.f)(5,Ee.Ui),(0,o.f)(6,E.R9),(0,o.f)(7,O.i),(0,o.f)(8,N.d),(0,o.f)(9,F.lT),(0,o.f)(10,r.XH),(0,o.f)(11,ke.B),(0,o.f)(12,H.i6),(0,o.f)(13,pe.By),(0,o.f)(14,Z.VZ)],Ga);class Ua{getId(e){return e.handle}}class Ka{getHeight(e){return ja.ITEM_HEIGHT}getTemplateId(e){return ja.TREE_TEMPLATE_ID}}class $a{constructor(e,t){this.treeView=e,this.withProgress=t}hasChildren(e){return!!this.treeView.dataProvider&&e.collapsibleState!==r.oC.None}async getChildren(e){let t=[];if(this.treeView.dataProvider)try{t=await this.withProgress(this.treeView.dataProvider.getChildren(e))??[]}catch(e){if(!e.message.startsWith("Bad progress location:"))throw e}return t}}let ja=class e extends p.JT{static{this.ITEM_HEIGHT=22}static{this.TREE_TEMPLATE_ID="treeExplorer"}constructor(e,t,i,o,s,n,r,a,c,d,h,l,u){super(),this.treeViewId=e,this.menus=t,this.labels=i,this.actionViewItemProvider=o,this.aligner=s,this.checkboxStateHandler=n,this.manuallyManageCheckboxes=r,this.themeService=a,this.configurationService=c,this.labelService=d,this.hoverService=h,this.treeViewsService=l,this.contextKeyService=u,this._onDidChangeCheckboxState=this._register(new g.Q5),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._hasCheckbox=!1,this._renderedElements=new Map,this._hoverDelegate={showHover:e=>this.hoverService.showHover(e),delay:this.configurationService.getValue("workbench.hover.delay")},this._register(this.themeService.onDidFileIconThemeChange((()=>this.rerender()))),this._register(this.themeService.onDidColorThemeChange((()=>this.rerender()))),this._register(n.onDidChangeCheckboxState((e=>{this.updateCheckboxes(e)})))}get templateId(){return e.TREE_TEMPLATE_ID}set actionRunner(e){this._actionRunner=e}renderTemplate(e){e.classList.add("custom-view-tree-node-item");const t=w.R3(e,w.$("")),i=this.labels.create(e,{supportHighlights:!0,hoverDelegate:this._hoverDelegate}),o=w.Ce(i.element,w.$(".custom-view-tree-node-item-icon")),s=w.R3(i.element,w.$(".actions"));return{resourceLabel:i,icon:o,checkboxContainer:t,actionBar:new v.o(s,{actionViewItemProvider:this.actionViewItemProvider}),container:e,elementDisposable:new p.SL}}getHover(e,t,i){return i instanceof r.W6&&i.hasResolve?{markdown:"string"==typeof i.tooltip?i.tooltip:e=>new Promise((t=>{i.resolve(e).then((()=>t(i.tooltip)))})),markdownNotSupportedFallback:t?void 0:e??""}:t&&!i.tooltip?void 0:void 0===i.tooltip?e:(0,y.HD)(i.tooltip)?""!==i.tooltip?i.tooltip:void 0:{markdown:i.tooltip,markdownNotSupportedFallback:t?void 0:(0,Sa.DI)(i.tooltip)}}renderElement(e,t,i){const o=e.element,s=o.resourceUri?J.ov.revive(o.resourceUri):null,n=o.label?o.label:s?{label:(0,Q.EZ)(s)}:void 0,r=(0,y.HD)(o.description)?o.description:s&&!0===o.description?this.labelService.getUriLabel((0,Q.XX)(s),{relative:!0}):void 0,a=n?n.label:void 0,c=n&&n.highlights&&a?n.highlights.map((([e,t])=>{if(e<0&&(e=a.length+e),t<0&&(t=a.length+t),e>=a.length||t>a.length)return{start:0,end:0};if(e>t){const i=e;e=t,t=i}return{start:e,end:t}})):void 0,d=this.themeService.getColorTheme().type===Jo.eL.LIGHT?o.icon:o.iconDark,h=d?J.ov.revive(d):void 0,l=this.getHover(a,s,o);i.actionBar.clear(),i.icon.style.color="";let u=!0;if(o.command&&(u=Ba(o.command,this.contextKeyService)),this.renderCheckbox(o,i),s){const t=this.configurationService.getValue("explorer.decorations"),d=s||J.ov.parse("missing:_icon_resource");i.resourceLabel.setResource({name:a,description:r,resource:d},{fileKind:this.getFileKind(o),title:l,hideIcon:this.shouldHideResourceLabelIcon(h,o.themeIcon),fileDecorations:t,extraClasses:["custom-view-tree-node-item-resourceLabel"],matches:c||(0,Co.mB)(e.filterData),strikethrough:n?.strikethrough,disabledCommand:!u,labelEscapeNewLines:!0})}else i.resourceLabel.setResource({name:a,description:r},{title:l,hideIcon:!0,extraClasses:["custom-view-tree-node-item-resourceLabel"],matches:c||(0,Co.mB)(e.filterData),strikethrough:n?.strikethrough,disabledCommand:!u,labelEscapeNewLines:!0});if(h)i.icon.className="custom-view-tree-node-item-icon",i.icon.style.backgroundImage=w.wY(h);else{let e;this.shouldShowThemeIcon(!!s,o.themeIcon)&&(e=q.kS.asClassName(o.themeIcon),o.themeIcon.color&&(i.icon.style.color=this.themeService.getColorTheme().getColor(o.themeIcon.color.id)?.toString()??"")),i.icon.className=e?`custom-view-tree-node-item-icon ${e}`:"",i.icon.style.backgroundImage=""}u||(i.icon.className=i.icon.className+" disabled",i.container.parentElement&&(i.container.parentElement.className=i.container.parentElement.className+" disabled")),i.actionBar.context={$treeViewId:this.treeViewId,$treeItemHandle:o.handle};const p=this.menus.getResourceActions(o);p.menu&&i.elementDisposable.add(p.menu),i.actionBar.push(p.actions,{icon:!0,label:!1}),this._actionRunner&&(i.actionBar.actionRunner=this._actionRunner),this.setAlignment(i.container,o),this.treeViewsService.addRenderedTreeItemElement(o,i.container),this._renderedElements.set(e.element.handle,{original:e,rendered:i})}rerender(){const e=new Set(this._renderedElements.keys());for(const t of e){const e=this._renderedElements.get(t);e&&(this.disposeElement(e.original,0,e.rendered),this.renderElement(e.original,0,e.rendered))}}renderCheckbox(e,t){if(e.checkbox){if(this._hasCheckbox||(this._hasCheckbox=!0,this.rerender()),!t.checkbox){const e=new Na(t.checkboxContainer,this.checkboxStateHandler,this._hoverDelegate);t.checkbox=e}t.checkbox.render(e)}else t.checkbox&&(t.checkbox.dispose(),t.checkbox=void 0)}setAlignment(e,t){e.parentElement.classList.toggle("align-icon-with-twisty",!this._hasCheckbox&&this.aligner.alignIconWithTwisty(t))}shouldHideResourceLabelIcon(e,t){return!!e||!!t&&!this.isFileKindThemeIcon(t)}shouldShowThemeIcon(e,t){return!(!t||e&&this.isFileKindThemeIcon(t))}isFolderThemeIcon(e){return e?.id===M.gT.id}isFileKindThemeIcon(e){return!!e&&(e.id===M.Cs.id||this.isFolderThemeIcon(e))}getFileKind(e){if(e.themeIcon)switch(e.themeIcon.id){case M.Cs.id:return ft.RR.FILE;case M.gT.id:return ft.RR.FOLDER}return e.collapsibleState===r.oC.Collapsed||e.collapsibleState===r.oC.Expanded?ft.RR.FOLDER:ft.RR.FILE}updateCheckboxes(e){const t=[];if(!this.manuallyManageCheckboxes)for(const i of e)if(void 0!==i.checkbox){function o(e){for(const i of e.children??[])void 0!==i.checkbox&&void 0!==e.checkbox&&i.checkbox.isChecked!==e.checkbox.isChecked&&(i.checkbox.isChecked=e.checkbox.isChecked,t.push(i),o(i))}o(i);const s=new Set;function n(e){if(e.parent&&void 0!==e.parent.checkbox&&e.parent.children){if(s.has(e.parent))return;s.add(e.parent);let i=!1,o=!1;for(const t of e.parent.children){if(i&&o)break;void 0!==t.checkbox&&(t.checkbox.isChecked?o=!0:i=!0)}o&&!i&&!0!==e.parent.checkbox.isChecked?(e.parent.checkbox.isChecked=!0,t.push(e.parent),n(e.parent)):i&&!1!==e.parent.checkbox.isChecked&&(e.parent.checkbox.isChecked=!1,t.push(e.parent),n(e.parent))}}n(i)}(e=e.concat(t)).forEach((e=>{const t=this._renderedElements.get(e.handle);t&&t.rendered.checkbox?.render(e)})),this._onDidChangeCheckboxState.fire(e)}disposeElement(e,t,i){i.elementDisposable.clear(),this._renderedElements.delete(e.element.handle),this.treeViewsService.removeRenderedTreeItemElement(e.element),i.checkbox?.dispose(),i.checkbox=void 0}disposeTemplate(e){e.resourceLabel.dispose(),e.actionBar.dispose(),e.elementDisposable.dispose()}};ja=(0,o.g)([(0,o.f)(7,M.XE),(0,o.f)(8,Ee.Ui),(0,o.f)(9,Xe.e),(0,o.f)(10,ke.B),(0,o.f)(11,Da.C),(0,o.f)(12,H.i6)],ja);class Xa extends p.JT{constructor(e){super(),this.themeService=e}set tree(e){this._tree=e}alignIconWithTwisty(e){if(e.collapsibleState!==r.oC.None)return!1;if(!this.hasIcon(e))return!1;if(this._tree){const t=this._tree.getParentElement(e)||this._tree.getInput();return this.hasIcon(t)?!!t.children&&t.children.some((e=>e.collapsibleState!==r.oC.None&&!this.hasIcon(e))):!!t.children&&t.children.every((e=>e.collapsibleState===r.oC.None||!this.hasIcon(e)))}return!1}hasIcon(e){if(this.themeService.getColorTheme().type===Jo.eL.LIGHT?e.icon:e.iconDark)return!0;if(e.resourceUri||e.themeIcon){const t=this.themeService.getFileIconTheme();return(e.themeIcon?e.themeIcon.id===M.gT.id:e.collapsibleState!==r.oC.None)?t.hasFileIcons&&t.hasFolderIcons:t.hasFileIcons}return!1}}class Ja extends ye.Wi{constructor(e,t){super(),this.getSelectedResources=t,this._register(this.onDidRun((t=>{t.error&&!(0,m.n2)(t.error)&&e.error((0,l.NC)("command-error","Error running command {1}: {0}. This is likely caused by the extension that contributes {1}.",t.error.message,t.action.id))})))}async runAction(e,t){const i=this.getSelectedResources();let o,s=!1;i.length>1&&(o=i.map((e=>((e.handle===t.$treeItemHandle||t.$selectedTreeItems)&&(s=!0),{$treeViewId:t.$treeViewId,$treeItemHandle:e.handle})))),s||(o=void 0),await e.run(t,o)}}let Ya=class extends p.JT{constructor(e,t){super(),this.id=e,this.menuService=t,this._onDidChange=new g.Q5,this.onDidChange=this._onDidChange.event}getResourceActions(e){const t=this.getActions(te.eH.ViewItemContext,e,!0);return{menu:t.menu,actions:t.primary}}getResourceContextActions(e){return this.getActions(te.eH.ViewItemContext,e).secondary}setContextKeyService(e){this.contextKeyService=e}getActions(e,t,i=!1){if(!this.contextKeyService)return{primary:[],secondary:[]};const o=this.contextKeyService.createOverlay([["view",this.id],["viewItem",t.contextValue]]),s=this.menuService.createMenu(e,o),n={primary:[],secondary:[],menu:s};return(0,x.LJ)(s,{shouldForwardArgs:!0},n,"inline"),i?this._register(s.onDidChange((()=>this._onDidChange.fire(t)))):s.dispose(),n}dispose(){this.contextKeyService=void 0,super.dispose()}};Ya=(0,o.g)([(0,o.f)(1,te.co)],Ya);let Qa=class extends Ga{constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,p,g,m,v,b){super(e,t,o,s,n,r,a,c,d,h,l,p,u,m,b),this.extensionId=i,this.extensionService=g,this.telemetryService=v,this.activated=!1}activate(){this.activated||(this.telemetryService.publicLog2("Extension:ViewActivate",{extensionId:new ds.NE(this.extensionId),id:this.id}),this.createTree(),this.progressService.withProgress({location:this.id},(()=>this.extensionService.activateByEvent(`onView:${this.id}`))).then((()=>(0,je.Vs)(2e3))).then((()=>{this.updateMessage()})),this.activated=!0)}};Qa=(0,o.g)([(0,o.f)(3,M.XE),(0,o.f)(4,c.TG),(0,o.f)(5,ht.H),(0,o.f)(6,Ee.Ui),(0,o.f)(7,E.R9),(0,o.f)(8,O.i),(0,o.f)(9,N.d),(0,o.f)(10,F.lT),(0,o.f)(11,r.XH),(0,o.f)(12,H.i6),(0,o.f)(13,ke.B),(0,o.f)(14,z.QS),(0,o.f)(15,pe.By),(0,o.f)(16,j.bU),(0,o.f)(17,Z.VZ)],Qa);let qa=class{constructor(e,t,i,o,s){this.treeId=e,this.labelService=t,this.instantiationService=i,this.treeViewsDragAndDropService=o,this.logService=s,this.treeItemsTransfer=Go.Ej.getInstance(),this.treeMimeType=`application/vnd.code.tree.${e.toLowerCase()}`}set controller(e){this.dndController=e}handleDragAndLog(e,t,i,o){return e.handleDrag(t,i,o).then((t=>{if(t){const i=[];for(const o of t)o[0]!==this.treeMimeType&&e.dragMimeTypes.findIndex((e=>e===o[0]))<0&&i.push(o[0]);i.length&&this.logService.warn(`Drag and drop controller for tree ${this.treeId} adds the following data transfer types but does not declare them in dragMimeTypes: ${i.join(", ")}`)}return t}))}addExtensionProvidedTransferTypes(e,t){if(!e.dataTransfer||!this.dndController)return;const i=(0,X.R)();this.dragCancellationToken=new ai.A,this.treeViewsDragAndDropService.addDragOperationTransfer(i,this.handleDragAndLog(this.dndController,t,i,this.dragCancellationToken.token)),this.treeItemsTransfer.setData([new es.f(i)],es.f.prototype),e.dataTransfer.clearData(xa.vW.text),this.dndController.dragMimeTypes.find((e=>e===xa.vW.uriList))&&e.dataTransfer?.setData(ji.go.RESOURCES,""),this.dndController.dragMimeTypes.forEach((t=>{e.dataTransfer?.setData(t,"")}))}addResourceInfoToTransfer(e,t){if(t.length&&e.dataTransfer){this.instantiationService.invokeFunction((i=>(0,G.Gj)(i,t,e)));const i=t.filter((e=>e.scheme===mo.lg.file)).map((e=>e.fsPath));i.length&&e.dataTransfer.setData(Go.Km.FILES,JSON.stringify(i))}}onDragStart(e,t){if(t.dataTransfer){const i=e.getData(),o=[],s={id:this.treeId,itemHandles:[]};i.forEach((e=>{s.itemHandles.push(e.handle),e.resourceUri&&o.push(J.ov.revive(e.resourceUri))})),this.addResourceInfoToTransfer(t,o),this.addExtensionProvidedTransferTypes(t,s.itemHandles),t.dataTransfer.setData(this.treeMimeType,JSON.stringify(s))}}debugLog(e){e.size?this.logService.debug(`TreeView dragged mime types: ${Array.from(e).join(", ")}`):this.logService.debug("TreeView dragged with no supported mime types.")}onDragOver(e,t,i,o){const s=Va(o.dataTransfer),n=new Set(Array.from(s,(e=>e[0])));if(o.dataTransfer)for(const e of o.dataTransfer.items)if("file"===e.kind||e.type===ji.go.RESOURCES.toLowerCase()){n.add(xa.vW.uriList);break}this.debugLog(n);const r=this.dndController;return!(!r||!o.dataTransfer||0===r.dropMimeTypes.length)&&(!!Array.from(n).some(((e,t)=>e===this.treeMimeType||r.dropMimeTypes.indexOf(e)>=0))&&{accept:!0,bubble:0,autoExpand:!0})}getDragURI(e){return this.dndController?e.resourceUri?J.ov.revive(e.resourceUri).toString():e.handle:null}getDragLabel(e){if(!this.dndController)return;if(e.length>1)return String(e.length);const t=e[0];return t.label?t.label.label:t.resourceUri?this.labelService.getUriLabel(J.ov.revive(t.resourceUri)):void 0}async drop(e,t,i,o){const s=this.dndController;if(!o.dataTransfer||!s)return;let n,r;this.treeItemsTransfer.hasData(es.f.prototype)&&(r=this.treeItemsTransfer.getData(es.f.prototype)[0].identifier);const a=Va(o.dataTransfer,!0),c=new ka.Hl;for(const[e,t]of a)if((e===this.treeMimeType||s.dropMimeTypes.includes(e)||t.asFile()&&s.dropMimeTypes.includes(ji.go.FILES.toLowerCase()))&&(c.append(e,t),e===this.treeMimeType))try{n=JSON.parse(await t.asString())}catch{}const d=await this.treeViewsDragAndDropService.removeDragOperationTransfer(r);if(d)for(const[e,t]of d)c.append(e,t);return s.handleDrop(c,t,ai.T.None,r,n?.id,n?.itemHandles)}onDragEnd(e){"none"===e.dataTransfer?.dropEffect&&this.dragCancellationToken?.cancel()}};qa=(0,o.g)([(0,o.f)(1,Xe.e),(0,o.f)(2,c.TG),(0,o.f)(3,Zo.m),(0,o.f)(4,Z.VZ)],qa);var Za=i(29250),ec=(i(41644),i(99489),i(65914));const tc="workbench.view.remote";class ic extends p.JT{static{this.NOTIFY_COOL_DOWN=5e3}constructor(e,t,i,o,s,n,r,a){super(),this.notificationService=e,this.remoteExplorerService=t,this.openerService=i,this.externalOpenerService=o,this.tunnelService=s,this.hostService=n,this.logService=r,this.contextKeyService=a,this.alreadyOpenedOnce=new Set,this.lastNotifyTime=new Date,this.lastNotifyTime.setFullYear(this.lastNotifyTime.getFullYear()-1)}async doAction(e){this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Starting action for ${e[0]?.tunnelRemotePort}`),this.doActionTunnels=e;const t=await this.portNumberHeuristicDelay();if(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose ${t?.tunnelRemotePort}`),t){const e=await this.remoteExplorerService.tunnelModel.getAttributes([{port:t.tunnelRemotePort,host:t.tunnelRemoteHost}]),i=e?.get(t.tunnelRemotePort)?.onAutoForward;switch(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) onAutoForward action is ${i}`),i){case remoteExplorerService.Un.OpenBrowserOnce:if(this.alreadyOpenedOnce.has(t.localAddress))break;this.alreadyOpenedOnce.add(t.localAddress);case remoteExplorerService.Un.OpenBrowser:{const e=(0,remoteExplorerService.Tb)(t.tunnelRemoteHost,t.tunnelRemotePort);await tunnelView.nv.run(this.remoteExplorerService.tunnelModel,this.openerService,e);break}case remoteExplorerService.Un.OpenPreview:{const e=(0,remoteExplorerService.Tb)(t.tunnelRemoteHost,t.tunnelRemotePort);await tunnelView.DW.run(this.remoteExplorerService.tunnelModel,this.openerService,this.externalOpenerService,e);break}case remoteExplorerService.Un.Silent:break;default:{const e=(new Date).getTime()-this.lastNotifyTime.getTime();this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) time elapsed since last notification ${e} ms`),e>ic.NOTIFY_COOL_DOWN&&await this.showNotification(t)}}}}hide(e){this.doActionTunnels&&(this.doActionTunnels=this.doActionTunnels.filter((t=>!e.includes(t.tunnelRemotePort)))),this.lastShownPort&&e.indexOf(this.lastShownPort)>=0&&this.lastNotification?.close()}async portNumberHeuristicDelay(){if(this.logService.trace("ForwardedPorts: (OnAutoForwardedAction) Starting heuristic delay"),!this.doActionTunnels||0===this.doActionTunnels.length)return;this.doActionTunnels=this.doActionTunnels.sort(((e,t)=>e.tunnelRemotePort-t.tunnelRemotePort));const e=this.doActionTunnels.shift();return e.tunnelRemotePort%1e3==0?(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because % 1000: ${e.tunnelRemotePort}`),this.newerTunnel=e,e):e.tunnelRemotePort<1e4&&9229!==e.tunnelRemotePort?(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because < 10000: ${e.tunnelRemotePort}`),this.newerTunnel=e,e):(this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Waiting for "better" tunnel than ${e.tunnelRemotePort}`),this.newerTunnel=void 0,new Promise((t=>{setTimeout((()=>{this.newerTunnel?t(void 0):this.doActionTunnels?.includes(e)?t(e):t(void 0)}),3e3)})))}basicMessage(e){return l.NC("remote.tunnelsView.automaticForward","Your application running on port {0} is available.  ",e.tunnelRemotePort)}linkMessage(){return l.NC({key:"remote.tunnelsView.notificationLink2",comment:["[See all forwarded ports]({0}) is a link. Only translate `See all forwarded ports`. Do not change brackets and parentheses or {0}"]},"[See all forwarded ports]({0})",`command:${tunnelView.mx.ID}.focus`)}async showNotification(e){if(!await this.hostService.hadLastFocus())return;this.lastNotification?.close();let t=this.basicMessage(e);const i=[this.openBrowserChoice(e)];Ke.$L&&!tunnelView.oQ.getValue(this.contextKeyService)||i.push(this.openPreviewChoice(e)),e.tunnelLocalPort!==e.tunnelRemotePort&&this.tunnelService.canElevate&&this.tunnelService.isPortPrivileged(e.tunnelRemotePort)&&(l.NC("remote.tunnelsView.elevationMessage","You'll need to run as superuser to use port {0} locally.  ",e.tunnelRemotePort),i.unshift(this.elevateChoice(e))),e.privacy===ec.xh.Private&&Ke.$L&&this.tunnelService.canChangePrivacy&&i.push(this.makePublicChoice(e)),this.linkMessage(),this.lastNotification=this.notificationService.prompt(is.Z.Info,t,i,{neverShowAgain:{id:"remote.tunnelsView.autoForwardNeverShow",isSecondary:!0}}),this.lastShownPort=e.tunnelRemotePort,this.lastNotifyTime=new Date,this.lastNotification.onDidClose((()=>{this.lastNotification=void 0,this.lastShownPort=void 0}))}makePublicChoice(e){return{label:l.NC("remote.tunnelsView.makePublic","Make Public"),run:async()=>{const t=(0,remoteExplorerService.Mn)(this.remoteExplorerService.tunnelModel.forwarded,e.tunnelRemoteHost,e.tunnelRemotePort);return await this.remoteExplorerService.close({host:e.tunnelRemoteHost,port:e.tunnelRemotePort},remoteExplorerService.db.Other),this.remoteExplorerService.forward({remote:{host:e.tunnelRemoteHost,port:e.tunnelRemotePort},local:e.tunnelLocalPort,name:t?.name,elevateIfNeeded:!0,privacy:ec.xh.Public,source:t?.source})}}}openBrowserChoice(e){const t=(0,remoteExplorerService.Tb)(e.tunnelRemoteHost,e.tunnelRemotePort);return{label:tunnelView.nv.LABEL,run:()=>tunnelView.nv.run(this.remoteExplorerService.tunnelModel,this.openerService,t)}}openPreviewChoice(e){const t=(0,remoteExplorerService.Tb)(e.tunnelRemoteHost,e.tunnelRemotePort);return{label:tunnelView.DW.LABEL,run:()=>tunnelView.DW.run(this.remoteExplorerService.tunnelModel,this.openerService,this.externalOpenerService,t)}}elevateChoice(e){return{label:l.NC("remote.tunnelsView.elevationButton","Use Port {0} as Sudo...",e.tunnelRemotePort),run:async()=>{await this.remoteExplorerService.close({host:e.tunnelRemoteHost,port:e.tunnelRemotePort},remoteExplorerService.db.Other);const t=await this.remoteExplorerService.forward({remote:{host:e.tunnelRemoteHost,port:e.tunnelRemotePort},local:e.tunnelRemotePort,elevateIfNeeded:!0,source:remoteExplorerService.cS});t&&(this.lastNotification?.close(),this.lastShownPort=t.tunnelRemotePort,this.lastNotification=this.notificationService.prompt(is.Z.Info,this.basicMessage(t)+this.linkMessage(),[this.openBrowserChoice(t),this.openPreviewChoice(e)],{neverShowAgain:{id:"remote.tunnelsView.autoForwardNeverShow",isSecondary:!0}}),this.lastNotification.onDidClose((()=>{this.lastNotification=void 0,this.lastShownPort=void 0})))}}}}var oc=i(57858),sc=i(13994),nc=i(45267),rc=i(32457),ac=i(57441);const cc="webviewState";let dc=class e extends gi.qV{static getOriginStore(e){return this._originStore??=new nc.UE("webviewViews.origins",e),this._originStore}constructor(e,t,i,o,s,n,r,a,c,d,h,l,u,m,v,b,f){super({...e,titleMenuId:te.eH.ViewTitle,showActions:gi.f2.WhenExpanded},n,o,t,i,d,s,r,c,a),this.activityService=h,this.extensionService=l,this.progressService=u,this.storageService=m,this.viewService=v,this.webviewService=b,this.webviewViewService=f,this._webview=this._register(new p.XK),this._webviewDisposables=this._register(new p.SL),this._activated=!1,this._onDidChangeVisibility=this._register(new g.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDispose=this._register(new g.Q5),this.onDispose=this._onDispose.event,this.extensionId=e.fromExtensionId,this.defaultTitle=this.title,this.memento=new sc.N(`webviewView.${this.id}`,m),this.viewState=this.memento.getMemento(1,1),this._register(this.onDidChangeBodyVisibility((()=>this.updateTreeVisibility()))),this._register(this.webviewViewService.onNewResolverRegistered((e=>{e.viewType===this.id&&this.updateTreeVisibility()}))),this.updateTreeVisibility()}dispose(){this._onDispose.fire(),clearTimeout(this._repositionTimeout),super.dispose()}focus(){super.focus(),this._webview.value?.focus()}renderBody(e){super.renderBody(e),this._container=e,this._rootContainer=void 0,this._resizeObserver||(this._resizeObserver=new ResizeObserver((()=>{setTimeout((()=>{this.layoutWebview()}),0)})),this._register((0,p.OF)((()=>{this._resizeObserver.disconnect()}))),this._resizeObserver.observe(e))}saveState(){this._webview.value&&(this.viewState[cc]=this._webview.value.state),this.memento.saveMemento(),super.saveState()}layoutBody(e,t){super.layoutBody(e,t),this.layoutWebview(new w.Ro(t,e))}updateTreeVisibility(){this.isBodyVisible()?(this.activate(),this._webview.value?.claim(this,void 0)):this._webview.value?.release(this)}activate(){if(this._activated)return;this._activated=!0;const t=this.extensionId?e.getOriginStore(this.storageService).getOrigin(this.id,this.extensionId):void 0,i=this.webviewService.createWebviewOverlay({origin:t,providedViewType:this.id,title:this.title,options:{purpose:"webviewView"},contentOptions:{},extension:this.extensionId?{id:this.extensionId}:void 0});i.state=this.viewState[cc],this._webview.value=i,this._container&&this.layoutWebview(),this._webviewDisposables.add((0,p.OF)((()=>{this._webview.value?.release(this)}))),this._webviewDisposables.add(i.onDidUpdateState((()=>{this.viewState[cc]=i.state})));for(const e of[w.tw.DRAG,w.tw.DRAG_END,w.tw.DRAG_ENTER,w.tw.DRAG_LEAVE,w.tw.DRAG_START])this._webviewDisposables.add((0,w.nm)(this._webview.value.container,e,(e=>{e.preventDefault(),e.stopImmediatePropagation(),this.dropTargetElement.dispatchEvent(new DragEvent(e.type,e))})));this._webviewDisposables.add(new rc.b((()=>this._webview.value)));const o=this._webviewDisposables.add(new ai.A);this.withProgress((async()=>{await this.extensionService.activateByEvent(`onView:${this.id}`);const e=this,t={webview:i,onDidChangeVisibility:this.onDidChangeBodyVisibility,onDispose:this.onDispose,get title(){return e.setTitle},set title(t){e.updateTitle(t)},get description(){return e.titleDescription},set description(t){e.updateTitleDescription(t)},get badge(){return e.badge},set badge(t){e.updateBadge(t)},dispose:()=>{this._activated=!1,this._webview.clear(),this._webviewDisposables.clear()},show:e=>{this.viewService.openView(this.id,!e)}};await this.webviewViewService.resolve(this.id,t,o.token)}))}updateTitle(e){this.setTitle=e,super.updateTitle("string"==typeof e?e:this.defaultTitle)}updateBadge(e){if((this.badge?.value!==e?.value||this.badge?.tooltip!==e?.tooltip)&&(this.activity&&(this.activity.dispose(),this.activity=void 0),this.badge=e,e)){const t={badge:new pe.mA(e.value,(()=>e.tooltip)),priority:150};this.activityService.showViewActivity(this.id,t)}}async withProgress(e){return this.progressService.withProgress({location:this.id,delay:500},e)}onDidScrollRoot(){this.layoutWebview()}doLayoutWebview(e){const t=this._webview.value;this._container&&t&&(this._rootContainer&&this._rootContainer.isConnected||(this._rootContainer=this.findRootContainer(this._container)),t.layoutWebviewOverElement(this._container,e,this._rootContainer))}layoutWebview(e){this.doLayoutWebview(e),clearTimeout(this._repositionTimeout),this._repositionTimeout=setTimeout((()=>this.doLayoutWebview(e)),200)}findRootContainer(e){return(0,y.f6)((0,w.Fx)(e,"monaco-scrollable-element"))}};dc=(0,o.g)([(0,o.f)(1,Ee.Ui),(0,o.f)(2,H.i6),(0,o.f)(3,O.i),(0,o.f)(4,c.TG),(0,o.f)(5,N.d),(0,o.f)(6,Kt.v4),(0,o.f)(7,j.bU),(0,o.f)(8,M.XE),(0,o.f)(9,r.XH),(0,o.f)(10,pe.By),(0,o.f)(11,z.QS),(0,o.f)(12,E.R9),(0,o.f)(13,R.Uy),(0,o.f)(14,r.qC),(0,o.f)(15,nc.JN),(0,o.f)(16,ac.J)],dc);var hc=i(26963);const lc={type:"object",properties:{id:{description:(0,l.NC)({key:"vscode.extension.contributes.views.containers.id",comment:["Contribution refers to those that an extension contributes to VS Code through an extension/contribution point. "]},"Unique id used to identify the container in which views can be contributed using 'views' contribution point"),type:"string",pattern:"^[a-zA-Z0-9_-]+$"},title:{description:(0,l.NC)("vscode.extension.contributes.views.containers.title","Human readable string used to render the container"),type:"string"},icon:{description:(0,l.NC)("vscode.extension.contributes.views.containers.icon","Path to the container icon. Icons are 24x24 centered on a 50x40 block and have a fill color of 'rgb(215, 218, 224)' or '#d7dae0'. It is recommended that icons be in SVG, though any image file type is accepted."),type:"string"}},required:["id","title","icon"]},uc={description:(0,l.NC)("vscode.extension.contributes.viewsContainers","Contributes views containers to the editor"),type:"object",properties:{activitybar:{description:(0,l.NC)("views.container.activitybar","Contribute views containers to Activity Bar"),type:"array",items:lc},panel:{description:(0,l.NC)("views.container.panel","Contribute views containers to Panel"),type:"array",items:lc}}};var pc,gc;!function(e){e.Tree="tree",e.Webview="webview"}(pc||(pc={})),function(e){e.Visible="visible",e.Hidden="hidden",e.Collapsed="collapsed"}(gc||(gc={}));const mc={type:"object",required:["id","name"],defaultSnippets:[{body:{id:"${1:id}",name:"${2:name}"}}],properties:{type:{markdownDescription:(0,l.NC)("vscode.extension.contributes.view.type","Type of the view. This can either be `tree` for a tree view based view or `webview` for a webview based view. The default is `tree`."),type:"string",enum:["tree","webview"],markdownEnumDescriptions:[(0,l.NC)("vscode.extension.contributes.view.tree","The view is backed by a `TreeView` created by `createTreeView`."),(0,l.NC)("vscode.extension.contributes.view.webview","The view is backed by a `WebviewView` registered by `registerWebviewViewProvider`.")]},id:{markdownDescription:(0,l.NC)("vscode.extension.contributes.view.id","Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`."),type:"string"},name:{description:(0,l.NC)("vscode.extension.contributes.view.name","The human-readable name of the view. Will be shown"),type:"string"},when:{description:(0,l.NC)("vscode.extension.contributes.view.when","Condition which must be true to show this view"),type:"string"},icon:{description:(0,l.NC)("vscode.extension.contributes.view.icon","Path to the view icon. View icons are displayed when the name of the view cannot be shown. It is recommended that icons be in SVG, though any image file type is accepted."),type:"string"},contextualTitle:{description:(0,l.NC)("vscode.extension.contributes.view.contextualTitle","Human-readable context for when the view is moved out of its original location. By default, the view's container name will be used."),type:"string"},visibility:{description:(0,l.NC)("vscode.extension.contributes.view.initialState","Initial state of the view when the extension is first installed. Once the user has changed the view state by collapsing, moving, or hiding the view, the initial state will not be used again."),type:"string",enum:["visible","hidden","collapsed"],default:"visible",enumDescriptions:[(0,l.NC)("vscode.extension.contributes.view.initialState.visible","The default initial state for the view. In most containers the view will be expanded, however; some built-in containers (explorer, scm, and debug) show all contributed views collapsed regardless of the `visibility`."),(0,l.NC)("vscode.extension.contributes.view.initialState.hidden","The view will not be shown in the view container, but will be discoverable through the views menu and other view entry points and can be un-hidden by the user."),(0,l.NC)("vscode.extension.contributes.view.initialState.collapsed","The view will show in the view container, but will be collapsed.")]},initialSize:{type:"number",description:(0,l.NC)("vscode.extension.contributs.view.size","The initial size of the view. The size will behave like the css 'flex' property, and will set the initial size when the view is first shown. In the side bar, this is the height of the view. This value is only respected when the same extension owns both the view and the view container.")}}},vc={type:"object",required:["id","name"],properties:{id:{description:(0,l.NC)("vscode.extension.contributes.view.id","Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`."),type:"string"},name:{description:(0,l.NC)("vscode.extension.contributes.view.name","The human-readable name of the view. Will be shown"),type:"string"},when:{description:(0,l.NC)("vscode.extension.contributes.view.when","Condition which must be true to show this view"),type:"string"},group:{description:(0,l.NC)("vscode.extension.contributes.view.group","Nested group in the viewlet"),type:"string"},remoteName:{description:(0,l.NC)("vscode.extension.contributes.view.remoteName","The name of the remote type associated with this view"),type:["string","array"],items:{type:"string"}}}},bc={description:(0,l.NC)("vscode.extension.contributes.views","Contributes views to the editor"),type:"object",properties:{explorer:{description:(0,l.NC)("views.explorer","Contributes views to Explorer container in the Activity bar"),type:"array",items:mc,default:[]},debug:{description:(0,l.NC)("views.debug","Contributes views to Debug container in the Activity bar"),type:"array",items:mc,default:[]},scm:{description:(0,l.NC)("views.scm","Contributes views to SCM container in the Activity bar"),type:"array",items:mc,default:[]},test:{description:(0,l.NC)("views.test","Contributes views to Test container in the Activity bar"),type:"array",items:mc,default:[]},remote:{description:(0,l.NC)("views.remote","Contributes views to Remote container in the Activity bar. To contribute to this container, enableProposedApi needs to be turned on"),type:"array",items:vc,default:[]}},additionalProperties:{description:(0,l.NC)("views.contributed","Contributes views to contributed views container"),type:"array",items:mc,default:[]}},fc=hc.ut.registerExtensionPoint({extensionPoint:"viewsContainers",jsonSchema:uc}),wc=hc.ut.registerExtensionPoint({extensionPoint:"views",deps:[fc],jsonSchema:bc,activationEventsGenerator:(e,t)=>{for(const i of e)for(const e of Object.values(i))for(const i of e)i.id&&t.push(`onView:${i.id}`)}});let yc=class{constructor(e,t){this.instantiationService=e,this.logService=t,this.viewContainersRegistry=h.B.as(r.IP.ViewContainersRegistry),this.viewsRegistry=h.B.as(r.IP.ViewsRegistry),this.handleAndRegisterCustomViewContainers(),this.handleAndRegisterCustomViews();let i=new ai.A;ut.W.registerCommandAndKeybindingRule({id:"workbench.action.showTreeHover",handler:async(e,...t)=>{i.cancel(),i=new ai.A;const o=e.get(go.Lw),s=e.get(Da.C),n=e.get(ke.B),a=o.lastFocusedList;if(!(a instanceof ga.c))return;const c=a.getFocus();if(!c||0===c.length)return;const d=c[0];if(d instanceof r.W6&&await d.resolve(i.token),!d.tooltip)return;const h=s.getRenderedTreeElement(d);h&&n.showHover({content:d.tooltip,target:h,hoverPosition:2,hideOnHover:!1},!0)},weight:200,primary:(0,et.gx)(2089,2087),when:H.Ao.and(Ha,go.CQ)})}handleAndRegisterCustomViewContainers(){fc.setHandler(((e,{added:t,removed:i})=>{i.length&&this.removeCustomViewContainers(i),t.length&&this.addCustomViewContainers(t,this.viewContainersRegistry.all)}))}addCustomViewContainers(e,t){const i=h.B.as(r.IP.ViewContainersRegistry);let o=7+i.all.filter((e=>!!e.extensionId&&0===i.getViewContainerLocation(e))).length,s=5+i.all.filter((e=>!!e.extensionId&&1===i.getViewContainerLocation(e))).length+1;for(const{value:i,collector:n,description:r}of e)Object.entries(i).forEach((([e,i])=>{if(this.isValidViewsContainer(i,n))switch(e){case"activitybar":o=this.registerCustomViewContainers(i,r,o,t,0);break;case"panel":s=this.registerCustomViewContainers(i,r,s,t,1)}}))}removeCustomViewContainers(e){const t=h.B.as(r.IP.ViewContainersRegistry),i=e.reduce(((e,t)=>(e.add(t.description.identifier),e)),new Ca.o$);for(const e of t.all)if(e.extensionId&&i.has(e.extensionId)){const t=this.viewsRegistry.getViews(e);t.length&&this.viewsRegistry.moveViews(t,this.getDefaultViewContainer()),this.deregisterCustomViewContainer(e)}}isValidViewsContainer(e,t){if(!Array.isArray(e))return t.error((0,l.NC)("viewcontainer requirearray","views containers must be an array")),!1;for(const i of e){if("string"!=typeof i.id&&(0,tt.m5)(i.id))return t.error((0,l.NC)("requireidstring","property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.","id")),!1;if(!/^[a-z0-9_-]+$/i.test(i.id))return t.error((0,l.NC)("requireidstring","property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.","id")),!1;if("string"!=typeof i.title)return t.error((0,l.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","title")),!1;if("string"!=typeof i.icon)return t.error((0,l.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","icon")),!1;if((0,tt.m5)(i.title))return t.warn((0,l.NC)("requirenonemptystring","property `{0}` is mandatory and must be of type `string` with non-empty value","title")),!0}return!0}registerCustomViewContainers(e,t,i,o,s){return e.forEach((e=>{const n=q.kS.fromString(e.icon)||Q.Vo(t.extensionLocation,e.icon),r=`workbench.view.extension.${e.id}`,a=e.title||r,c=this.registerCustomViewContainer(r,a,n,i++,t.identifier,s);if(o.length){const t=[];for(const i of o)c!==i&&t.push(...this.viewsRegistry.getViews(i).filter((t=>t.originalContainerId===e.id)));t.length&&this.viewsRegistry.moveViews(t,c)}})),i}registerCustomViewContainer(e,t,i,o,s,r){let a=this.viewContainersRegistry.get(e);return a||(a=this.viewContainersRegistry.registerViewContainer({id:e,title:t,extensionId:s,ctorDescriptor:new n.M($.XV,[e,{mergeViewWithContainerWhenSingleView:!0}]),hideIfEmpty:!0,order:o,icon:i},r)),a}deregisterCustomViewContainer(e){this.viewContainersRegistry.deregisterViewContainer(e),h.B.as(T.IP.Viewlets).deregisterPaneComposite(e.id)}handleAndRegisterCustomViews(){wc.setHandler(((e,{added:t,removed:i})=>{i.length&&this.removeViews(i),t.length&&this.addViews(t)}))}addViews(e){const t=new Set,i=[];for(const o of e){const{value:e,collector:s}=o;Object.entries(e).forEach((([e,r])=>{if(!this.isValidViewDescriptors(r,s))return;if("remote"===e&&!(0,z.$x)(o.description,"contribViewsRemote"))return void s.warn((0,l.NC)("ViewContainerRequiresProposedAPI","View container '{0}' requires 'enabledApiProposals: [\"contribViewsRemote\"]' to be added to 'Remote'.",e));const a=this.getViewContainer(e);a||s.warn((0,l.NC)("ViewContainerDoesnotExist","View container '{0}' does not exist and all views registered to it will be added to 'Explorer'.",e));const c=a||this.getDefaultViewContainer(),d=[];for(let i=0;i<r.length;i++){const h=r[i];if(t.has(h.id)){s.error((0,l.NC)("duplicateView1","Cannot register multiple views with same id `{0}`",h.id));continue}if(null!==this.viewsRegistry.getView(h.id)){s.error((0,l.NC)("duplicateView2","A view with id `{0}` is already registered.",h.id));continue}const u=Ca.kP.equals(o.description.identifier,c.extensionId)?i+1:c.viewOrderDelegate?c.viewOrderDelegate.getOrder(h.group):void 0;let p;"string"==typeof h.icon&&(p=q.kS.fromString(h.icon)||Q.Vo(o.description.extensionLocation,h.icon));const g=this.convertInitialVisibility(h.visibility),m=this.getViewType(h.type);if(!m){s.error((0,l.NC)("unknownViewType","Unknown view type `{0}`.",h.type));continue}let v;"number"==typeof h.initialSize&&(c.extensionId?.value===o.description.identifier.value?v=h.initialSize:this.logService.warn(`${o.description.identifier.value} tried to set the view size of ${h.id} but it was ignored because the view container does not belong to it.`));const b={type:m,ctorDescriptor:m===pc.Tree?new n.M(Ma):new n.M(dc),id:h.id,name:h.name,when:H.Ao.deserialize(h.when),containerIcon:p||a?.icon,containerTitle:h.contextualTitle||a?.title,canToggleVisibility:!0,canMoveView:a?.id!==tc,treeView:m===pc.Tree?this.instantiationService.createInstance(Qa,h.id,h.name,o.description.identifier.value):void 0,collapsed:this.showCollapsed(c)||g===gc.Collapsed,order:u,extensionId:o.description.identifier,originalContainerId:e,group:h.group,remoteAuthority:h.remoteName||h.remoteAuthority,virtualWorkspace:h.virtualWorkspace,hideByDefault:g===gc.Hidden,workspace:a?.id===tc||void 0,weight:v};t.add(b.id),d.push(b)}i.push({viewContainer:c,views:d})}))}this.viewsRegistry.registerViews2(i)}getViewType(e){return e===pc.Webview?pc.Webview:e&&e!==pc.Tree?void 0:pc.Tree}getDefaultViewContainer(){return this.viewContainersRegistry.get(Gs.f3)}removeViews(e){const t=e.reduce(((e,t)=>(e.add(t.description.identifier),e)),new Ca.o$);for(const e of this.viewContainersRegistry.all){const i=this.viewsRegistry.getViews(e).filter((e=>e.extensionId&&t.has(e.extensionId)));if(i.length){this.viewsRegistry.deregisterViews(i,e);for(const e of i){const t=e;t.treeView&&t.treeView.dispose()}}}}convertInitialVisibility(e){if(Object.values(gc).includes(e))return e}isValidViewDescriptors(e,t){if(!Array.isArray(e))return t.error((0,l.NC)("requirearray","views must be an array")),!1;for(const i of e){if("string"!=typeof i.id)return t.error((0,l.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","id")),!1;if("string"!=typeof i.name)return t.error((0,l.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","name")),!1;if(i.when&&"string"!=typeof i.when)return t.error((0,l.NC)("optstring","property `{0}` can be omitted or must be of type `string`","when")),!1;if(i.icon&&"string"!=typeof i.icon)return t.error((0,l.NC)("optstring","property `{0}` can be omitted or must be of type `string`","icon")),!1;if(i.contextualTitle&&"string"!=typeof i.contextualTitle)return t.error((0,l.NC)("optstring","property `{0}` can be omitted or must be of type `string`","contextualTitle")),!1;if(i.visibility&&!this.convertInitialVisibility(i.visibility))return t.error((0,l.NC)("optenum","property `{0}` can be omitted or must be one of {1}","visibility",Object.values(gc).join(", "))),!1}return!0}getViewContainer(e){switch(e){case"explorer":return this.viewContainersRegistry.get(Gs.f3);case"debug":return this.viewContainersRegistry.get(Za.f3);case"scm":return this.viewContainersRegistry.get(oc.f3);case"remote":return this.viewContainersRegistry.get(tc);default:return this.viewContainersRegistry.get(`workbench.view.extension.${e}`)}}showCollapsed(e){switch(e.id){case Gs.f3:case oc.f3:case Za.f3:return!0}return!1}};yc=(0,o.g)([(0,o.f)(0,c.TG),(0,o.f)(1,Z.VZ)],yc),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(yc,1),i(29973),i(38823);var Cc=i(61021),Sc=i(19873),_c=i(78815),Ec=i(71346),xc=i(90722);let kc=class{static{this.ID=Ec.J.typeId}constructor(e){this._webviewWorkbenchService=e}canSerialize(e){return this._webviewWorkbenchService.shouldPersist(e)}serialize(e){if(!this._webviewWorkbenchService.shouldPersist(e))return;const t=this.toJson(e);try{return JSON.stringify(t)}catch{return}}deserialize(e,t){const i=this.fromJson(JSON.parse(t));return this._webviewWorkbenchService.openRevivedWebview({webviewInitInfo:{providedViewType:i.providedId,origin:i.origin,title:i.title,options:i.webviewOptions,contentOptions:i.contentOptions,extension:i.extension},viewType:i.viewType,title:i.title,iconPath:i.iconPath,state:i.state,group:i.group})}fromJson(e){return{...e,extension:Dc(e.extensionId,e.extensionLocation),iconPath:Ac(e.iconPath),state:(t=e.state,"string"==typeof t?t:void 0),webviewOptions:e.options,contentOptions:Tc(e.options)};var t}toJson(e){return{origin:e.webview.origin,viewType:e.viewType,providedId:e.providedId,title:e.getName(),options:{...e.webview.options,...e.webview.contentOptions},extensionLocation:e.extension?.location,extensionId:e.extension?.id.value,state:e.webview.state,iconPath:e.iconPath?{light:e.iconPath.light,dark:e.iconPath.dark}:void 0,group:e.group}}};function Dc(e,t){if(!e)return;const i=Ic(t);return i?{id:new Ca.kP(e),location:i}:void 0}function Ac(e){if(!e)return;const t=Ic(e.light),i=Ic(e.dark);return t&&i?{light:t,dark:i}:void 0}function Ic(e){if(e)try{return"string"==typeof e?J.ov.parse(e):J.ov.from(e)}catch{return}}function Tc(e){return{...e,localResourceRoots:e.localResourceRoots?.map((e=>Ic(e)))}}kc=(0,o.g)([(0,o.f)(0,xc.jo)],kc);var Vc=i(26827),Lc=i(44633);function Rc(e,t){const i=e.createWebviewOverlay({providedViewType:t.viewType,origin:t.origin,title:void 0,options:{purpose:"customEditor",enableFindWidget:t.webviewOptions.enableFindWidget,retainContextWhenHidden:t.webviewOptions.retainContextWhenHidden},contentOptions:t.contentOptions,extension:t.extension});return i.state=t.state,i}(class extends kc{static{this.ID=Cc.A.typeId}constructor(e,t,i){super(e),this._instantiationService=t,this._webviewService=i}serialize(e){const t=e.isDirty(),i={...this.toJson(e),editorResource:e.resource.toJSON(),dirty:t,backupId:t?e.backupId:void 0};try{return JSON.stringify(i)}catch{return}}fromJson(e){return{...super.fromJson(e),editorResource:J.ov.from(e.editorResource),dirty:e.dirty}}deserialize(e,t){const i=this.fromJson(JSON.parse(t)),o=Rc(this._webviewService,i),s=this._instantiationService.createInstance(Cc.A,{resource:i.editorResource,viewType:i.viewType},o,{startsDirty:i.dirty,backupId:i.backupId});return"number"==typeof i.group&&s.updateGroup(i.group),s}});let Oc=class extends p.JT{constructor(e,t,i,o,s){super(),this._instantiationService=e,this._workingCopyBackupService=i,this._webviewService=o,this._register(t.registerHandler(this))}handles(e){return e.resource.scheme===mo.lg.vscodeCustomEditor}isOpen(e,t){if(!this.handles(e))return!1;if("jupyter-notebook-ipynb"===e.resource.authority&&t instanceof _c.h)try{const i=JSON.parse(e.resource.query),o=J.ov.from(i);return(0,Q.Xy)(o,t.resource)}catch{return!1}if(!(t instanceof Cc.A))return!1;if(e.resource.authority!==t.viewType.replace(/[^a-z0-9\-_]/gi,"-").toLowerCase())return!1;try{const i=JSON.parse(e.resource.query),o=J.ov.from(i);return(0,Q.Xy)(o,t.resource)}catch{return!1}}async createEditor(e){const t=await this._workingCopyBackupService.resolve(e);if(!t?.meta)throw new Error(`No backup found for custom editor: ${e.resource}`);const i=t.meta,o=Dc(i.extension?.id,i.extension?.location),s=Rc(this._webviewService,{viewType:i.viewType,origin:i.webview.origin,webviewOptions:i.webview.options,contentOptions:Tc(i.webview.options),state:i.webview.state,extension:o}),n=this._instantiationService.createInstance(Cc.A,{resource:J.ov.revive(i.editorResource),viewType:i.viewType},s,{backupId:i.backupId});return n.updateGroup(0),n}};Oc=(0,o.g)([(0,o.f)(0,c.TG),(0,o.f)(1,Lc.i),(0,o.f)(2,Vc.n),(0,o.f)(3,nc.JN),(0,o.f)(4,Sc.TY)],Oc);var Nc=i(66350);h.B.as(Gi.bS.EditorPane).registerEditorPane(Ki.gS.create(Nc.i,Nc.i.ID,"Webview Editor"),[new n.M(Cc.A)]),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(Oc,1);const Mc=H.Ao.and(H.Ao.equals("activeEditor",Nc.i.ID),$s.u.focus.toNegated());class Pc extends te.Ke{static{this.ID="editor.action.webvieweditor.showFind"}static{this.LABEL=l.NC("editor.action.webvieweditor.showFind","Show find")}constructor(){super({id:Pc.ID,title:Pc.LABEL,keybinding:{when:H.Ao.and(Mc,nc.Ok),primary:2084,weight:100}})}run(e){zc(e)?.showFind()}}class Bc extends te.Ke{static{this.ID="editor.action.webvieweditor.hideFind"}static{this.LABEL=l.NC("editor.action.webvieweditor.hideFind","Stop find")}constructor(){super({id:Bc.ID,title:Bc.LABEL,keybinding:{when:H.Ao.and(Mc,nc.Zl),primary:9,weight:100}})}run(e){zc(e)?.hideFind()}}class Fc extends te.Ke{static{this.ID="editor.action.webvieweditor.findNext"}static{this.LABEL=l.NC("editor.action.webvieweditor.findNext","Find next")}constructor(){super({id:Fc.ID,title:Fc.LABEL,keybinding:{when:H.Ao.and(Mc,nc.nh),primary:3,weight:100}})}run(e){zc(e)?.runFindAction(!1)}}class Wc extends te.Ke{static{this.ID="editor.action.webvieweditor.findPrevious"}static{this.LABEL=l.NC("editor.action.webvieweditor.findPrevious","Find previous")}constructor(){super({id:Wc.ID,title:Wc.LABEL,keybinding:{when:H.Ao.and(Mc,nc.nh),primary:1027,weight:100}})}run(e){zc(e)?.runFindAction(!0)}}class Hc extends te.Ke{static{this.ID="workbench.action.webview.reloadWebviewAction"}static{this.LABEL=l.NC("refreshWebviewLabel","Reload Webviews")}constructor(){super({id:Hc.ID,title:{value:Hc.LABEL,original:"Reload Webviews"},category:ie.R.Developer,menu:[{id:te.eH.CommandPalette}]})}async run(e){const t=e.get(nc.JN);for(const e of t.webviews)e.reload()}}function zc(e){const t=e.get(oi.AR).activeEditor;return t instanceof Ec.J?t.webview:void 0}h.B.as(Gi.bS.EditorPane).registerEditorPane(Ki.gS.create(Nc.i,Nc.i.ID,(0,l.NC)("webview.editor.label","webview editor")),[new n.M(Ec.J)]);let Gc=class extends p.JT{constructor(e){super(),this.editorGroupService=e,this.editorGroupService.whenReady.then((()=>this.editorGroupService.groups.forEach((e=>{this.registerGroupListener(e)})))),this._register(this.editorGroupService.onDidAddGroup((e=>this.registerGroupListener(e))))}registerGroupListener(e){const t=e.onWillOpenEditor((t=>this.onEditorOpening(t.editor,e)));g.ju.once(e.onWillDispose)((()=>{t.dispose()}))}onEditorOpening(e,t){if(!(e instanceof Ec.J)||e.typeId!==Ec.J.typeId)return;if(t.contains(e))return;let i;const o=this.editorGroupService.groups;for(const t of o)if(t.contains(e)){i=t;break}i&&i.closeEditor(e)}};Gc=(0,o.g)([(0,o.f)(0,Po.Qw)],Gc),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(Gc,1),(0,te.r1)(Pc),(0,te.r1)(Bc),(0,te.r1)(Fc),(0,te.r1)(Wc),(0,te.r1)(Hc);var Uc=i(10114);h.B.as(ca.IP.Configuration).registerConfiguration(Uc.Yn),(0,d.Z)('@keyframes wiggle{0%{transform:rotate(0) scale(1)}15%,45%{transform:rotate(.04turn) scale(1.1)}30%,60%{transform:rotate(-.04turn) scale(1.2)}to{transform:rotate(0) scale(1)}}.monaco-workbench .statusbar DIV#status\\.languageStatus A>SPAN.codicon.wiggle{animation-duration:.8s;animation-iteration-count:1;animation-name:wiggle}@keyframes flash{0%{background-color:initial}50%{background-color:var(--vscode-statusBarItem-prominentBackground)}to{background-color:initial}}.monaco-workbench .statusbar DIV#status\\.languageStatus.flash A{animation-duration:.8s;animation-iteration-count:1;animation-name:flash}.monaco-workbench .hover-language-status{display:flex;padding:4px 8px}.monaco-workbench .hover-language-status:not(:last-child){border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench .hover-language-status>.severity{display:none;flex:1;margin:auto;padding-right:8px}.monaco-workbench .hover-language-status>.severity.sev3{color:var(--vscode-notificationsErrorIcon-foreground)}.monaco-workbench .hover-language-status>.severity.sev2{color:var(--vscode-notificationsInfoIcon-foreground)}.monaco-workbench .hover-language-status>.severity.show{display:inherit}.monaco-workbench .hover-language-status>.element{display:flex;flex-grow:100;justify-content:space-between;vertical-align:middle}.monaco-workbench .hover-language-status>.element>.left>.detail:not(:empty):before{content:"\\2013";opacity:.6;padding:0 4px}.monaco-workbench .hover-language-status>.element>.left>.label:empty{display:none}.monaco-workbench .hover-language-status>.element .left{margin:auto 0}.monaco-workbench .hover-language-status>.element .right{display:flex;margin:auto 0}.monaco-workbench .hover-language-status>.element .right:not(:empty){padding-left:16px}.monaco-workbench .hover-language-status>.element .right .monaco-link{margin:auto 0;white-space:nowrap}.monaco-workbench .hover-language-status>.element .right .monaco-action-bar:not(:first-child){padding-left:8px}',{});var Kc=i(56811),$c=i(58558),jc=i(29918),Xc=i(17676),Jc=i(99106);class Yc{constructor(e,t){this.combined=e,this.dedicated=t}isEqual(e){return(0,Y.fS)(this.combined,e.combined)&&(0,Y.fS)(this.dedicated,e.dedicated)}}let Qc=class{constructor(e,t){this._storageService=e,this._key=t}get value(){return this._storageService.getNumber(this._key,0,0)}increment(){const e=this.value+1;return this._storageService.store(this._key,e,0,1),e}};Qc=(0,o.g)([(0,o.f)(0,R.Uy)],Qc);let qc=class e{static{this._id="status.languageStatus"}static{this._keyDedicatedItems="languageStatus.dedicated"}constructor(e,t,i,o,s){this._languageStatusService=e,this._statusBarService=t,this._editorService=i,this._openerService=o,this._storageService=s,this._disposables=new p.SL,this._dedicated=new Set,this._dedicatedEntries=new Map,this._renderDisposables=new p.SL,s.onDidChangeValue(this._handleStorageChange,this,this._disposables),this._restoreState(),this._interactionCounter=new Qc(s,"languageStatus.interactCount"),e.onDidChange(this._update,this,this._disposables),i.onDidActiveEditorChange(this._update,this,this._disposables),this._update(),t.onDidChangeEntryVisibility((e=>{!e.visible&&this._dedicated.has(e.id)&&(this._dedicated.delete(e.id),this._update(),this._storeState())}),this._disposables)}dispose(){this._disposables.dispose(),this._combinedEntry?.dispose(),(0,p.B9)(this._dedicatedEntries.values()),this._renderDisposables.dispose()}_handleStorageChange(t){t.key===e._keyDedicatedItems&&(this._restoreState(),this._update())}_restoreState(){const t=this._storageService.get(e._keyDedicatedItems,0,"[]");try{const e=JSON.parse(t);this._dedicated=new Set(e)}catch{this._dedicated.clear()}}_storeState(){if(0===this._dedicated.size)this._storageService.remove(e._keyDedicatedItems,0);else{const t=JSON.stringify(Array.from(this._dedicated.keys()));this._storageService.store(e._keyDedicatedItems,t,0,0)}}_createViewModel(e){if(!e?.hasModel())return new Yc([],[]);const t=this._languageStatusService.getLanguageStatus(e.getModel()),i=[],o=[];for(const e of t)this._dedicated.has(e.id)&&o.push(e),i.push(e);return new Yc(i,o)}_update(){const t=(0,jr.Pi)(this._editorService.activeTextEditorControl),i=this._createViewModel(t);if(this._model?.isEqual(i))return;if(this._renderDisposables.clear(),this._model=i,t?.onDidChangeModelLanguage(this._update,this,this._renderDisposables),0===i.combined.length)this._combinedEntry?.dispose(),this._combinedEntry=void 0;else{const[t]=i.combined,o=t.severity>=is.Z.Warning,s=e._severityToComboCodicon(t.severity);let n=!1;const r=[],a=document.createElement("div");for(const e of i.combined){const t=i.dedicated.includes(e);a.appendChild(this._renderStatus(e,o,t,this._renderDisposables)),r.push(this._asAriaLabel(e)),n=n||!t&&e.busy}const c={name:(0,l.NC)("langStatus.name","Editor Language Status"),ariaLabel:(0,l.NC)("langStatus.aria","Editor Language Status: {0}",r.join(", next: ")),tooltip:a,command:jc.bB,text:n?`${s}$(sync~spin)`:s};this._combinedEntry?this._combinedEntry.update(c):this._combinedEntry=this._statusBarService.addEntry(c,e._id,1,{id:"status.editor.mode",alignment:0,compact:!0});const d=this._interactionCounter.value>=3,h=document.querySelector(".monaco-workbench .statusbar DIV#status\\.languageStatus A>SPAN.codicon"),u=document.querySelector(".monaco-workbench .statusbar DIV#status\\.languageStatus");if(h instanceof HTMLElement&&u){const e="wiggle",t="flash";n?(h.classList.remove(e),u.classList.remove(t)):(h.classList.toggle(e,o||!d),this._renderDisposables.add(w.nm(h,"animationend",(t=>h.classList.remove(e)))),u.classList.toggle(t,o),this._renderDisposables.add(w.nm(u,"animationend",(e=>u.classList.remove(t)))))}if(!d){const e=document.querySelector(".monaco-workbench .context-view");if(e instanceof HTMLElement){const t=new MutationObserver((()=>{document.contains(a)&&(this._interactionCounter.increment(),t.disconnect())}));t.observe(e,{childList:!0,subtree:!0}),this._renderDisposables.add((0,p.OF)((()=>t.disconnect())))}}}const o=new Map;for(const t of i.dedicated){const i=e._asStatusbarEntry(t);let s=this._dedicatedEntries.get(t.id);s?(s.update(i),this._dedicatedEntries.delete(t.id)):s=this._statusBarService.addEntry(i,t.id,1,{id:"status.editor.mode",alignment:1}),o.set(t.id,s)}(0,p.B9)(this._dedicatedEntries.values()),this._dedicatedEntries=o}_renderStatus(t,i,o,s){const n=document.createElement("div");n.classList.add("hover-language-status");const r=document.createElement("div");r.classList.add("severity",`sev${t.severity}`),r.classList.toggle("show",i);const a=e._severityToSingleCodicon(t.severity);w.R3(r,...(0,Kc.T)(a)),n.appendChild(r);const c=document.createElement("div");c.classList.add("element"),n.appendChild(c);const d=document.createElement("div");d.classList.add("left"),c.appendChild(d);const h=document.createElement("span");h.classList.add("label"),w.R3(h,...(0,Kc.T)(t.busy?`$(sync~spin)${t.label}`:t.label)),d.appendChild(h);const u=document.createElement("span");u.classList.add("detail"),this._renderTextPlus(u,t.detail,s),d.appendChild(u);const p=document.createElement("div");p.classList.add("right"),c.appendChild(p);const{command:g}=t;g&&s.add(new Jc.r(p,{label:g.title,title:g.tooltip,href:J.ov.from({scheme:"command",path:g.id,query:g.arguments&&JSON.stringify(g.arguments)}).toString()},void 0,this._openerService));const m=new v.o(p,{});let b;return s.add(m),b=o?new ye.aU("unpin",(0,l.NC)("unpin","Remove from Status Bar"),q.kS.asClassName(Ze.lA.pinned),!0,(()=>{this._dedicated.delete(t.id),this._statusBarService.updateEntryVisibility(t.id,!1),this._update(),this._storeState()})):new ye.aU("pin",(0,l.NC)("pin","Add to Status Bar"),q.kS.asClassName(Ze.lA.pin),!0,(()=>{this._dedicated.add(t.id),this._statusBarService.updateEntryVisibility(t.id,!0),this._update(),this._storeState()})),m.push(b,{icon:!0,label:!1}),s.add(b),n}static _severityToComboCodicon(e){switch(e){case is.Z.Error:return"$(bracket-error)";case is.Z.Warning:return"$(bracket-dot)";default:return"$(bracket)"}}static _severityToSingleCodicon(e){switch(e){case is.Z.Error:return"$(error)";case is.Z.Warning:return"$(info)";default:return"$(check)"}}_renderTextPlus(e,t,i){for(const o of(0,Xc.J)(t).nodes)if("string"==typeof o){const t=(0,Kc.T)(o);w.R3(e,...t)}else i.add(new Jc.r(e,o,void 0,this._openerService))}_asAriaLabel(e){return e.accessibilityInfo?e.accessibilityInfo.label:e.detail?(0,l.NC)("aria.1","{0}, {1}",e.label,e.detail):(0,l.NC)("aria.2","{0}",e.label)}static _asStatusbarEntry(e){let t,i;return e.severity===is.Z.Warning?(t=(0,M.EN)(B.xw),i=(0,M.EN)(B.uH)):e.severity===is.Z.Error&&(t=(0,M.EN)(B.qf),i=(0,M.EN)(B.pH)),{name:(0,l.NC)("name.pattern","{0} (Language Status)",e.name),text:e.busy?`${e.label}$(sync~spin)`:e.label,ariaLabel:e.accessibilityInfo?.label??e.label,role:e.accessibilityInfo?.role,tooltip:e.command?.tooltip||new jt.W5(e.detail,{isTrusted:!0,supportThemeIcons:!0}),color:t,backgroundColor:i,command:e.command}}};qc=(0,o.g)([(0,o.f)(0,$c.X),(0,o.f)(1,jc.iq),(0,o.f)(2,oi.AR),(0,o.f)(3,Kt.v4),(0,o.f)(4,R.Uy)],qc),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(qc,3),(0,te.r1)(class extends te.Ke{constructor(){super({id:"editor.inlayHints.Reset",title:{value:(0,l.NC)("reset","Reset Language Status Interaction Counter"),original:"Reset Language Status Interaction Counter"},category:ie.R.View,f1:!0})}run(e){e.get(R.Uy).remove("languageStatus.interactCount",0)}});var Zc=i(60520);const ed=new H.uy("notebookEditable",!0),td="editor.detectLanguage";let id=class e{static{this._id="status.languageDetectionStatus"}constructor(e,t,i,o,s,n){this._languageDetectionService=e,this._statusBarService=t,this._configurationService=i,this._editorService=o,this._languageService=s,this._keybindingService=n,this._disposables=new p.SL,this._delayer=new je.rH(1e3),this._renderDisposables=new p.SL,o.onDidActiveEditorChange((()=>this._update(!0)),this,this._disposables),this._update(!1)}dispose(){this._disposables.dispose(),this._delayer.dispose(),this._combinedEntry?.dispose(),this._renderDisposables.dispose()}_update(e){e&&(this._combinedEntry?.dispose(),this._combinedEntry=void 0),this._delayer.trigger((()=>this._doUpdate()))}async _doUpdate(){const t=(0,jr.Pi)(this._editorService.activeTextEditorControl);this._renderDisposables.clear(),t?.onDidChangeModelLanguage((()=>this._update(!0)),this,this._renderDisposables),t?.onDidChangeModelContent((()=>this._update(!1)),this,this._renderDisposables);const i=t?.getModel(),o=i?.uri,s=i?.getLanguageId(),n=this._configurationService.getValue("workbench.editor.languageDetectionHints");if("object"==typeof n&&n?.untitledEditors&&o?.scheme===mo.lg.untitled&&s&&o){const t=await this._languageDetectionService.detectLanguage(o),s={jsonc:"json"},n=i.getLanguageId();if(t&&t!==n&&s[n]!==t){const i=this._languageService.getLanguageName(t)||t;let o=(0,l.NC)("status.autoDetectLanguage","Accept Detected Language: {0}",i);const s=this._keybindingService.lookupKeybinding(td),n=s?.getLabel();n&&(o+=` (${n})`);const r={name:(0,l.NC)("langDetection.name","Language Detection"),ariaLabel:(0,l.NC)("langDetection.aria","Change to Detected Language: {0}",t),tooltip:o,command:td,text:"$(lightbulb-autofix)"};this._combinedEntry?this._combinedEntry.update(r):this._combinedEntry=this._statusBarService.addEntry(r,e._id,1,{id:"status.editor.mode",alignment:1,compact:!0})}else this._combinedEntry?.dispose(),this._combinedEntry=void 0}else this._combinedEntry?.dispose(),this._combinedEntry=void 0}};id=(0,o.g)([(0,o.f)(0,Zc.Kt),(0,o.f)(1,jc.iq),(0,o.f)(2,Ee.Ui),(0,o.f)(3,oi.AR),(0,o.f)(4,vt.O),(0,o.f)(5,N.d)],id),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(id,3),(0,te.r1)(class extends te.Ke{constructor(){super({id:td,title:{value:(0,l.NC)("detectlang","Detect Language from Content"),original:"Detect Language from Content"},f1:!0,precondition:H.Ao.and(ed.toNegated(),$s.u.editorTextFocus),keybinding:{primary:1570,weight:200}})}async run(e){const t=e.get(oi.AR),i=e.get(Zc.Kt),o=(0,jr.Pi)(t.activeTextEditorControl),s=e.get(F.lT),n=o?.getModel()?.uri;if(n){const e=await i.detectLanguage(n);e?o.getModel()?.setLanguage(e,Zc.BD):s.warn((0,l.NC)("noDetection","Unable to detect editor language"))}}}),i(76596);var od=i(74939);let sd=class extends p.JT{constructor(e,t,i,o,s,n,r){super(),this.editorService=e,this.textFileService=t,this.lifecycleService=i,this.hostService=o,this.codeEditorService=s,this.filesConfigurationService=n,this.workingCopyEditorService=r,this.ensureDirtyFilesAreOpenedWorker=this._register(new je.F7((e=>this.ensureDirtyTextFilesAreOpened(e)),this.getDirtyTextFileTrackerDelay())),this.registerListeners()}registerListeners(){this._register(this.textFileService.files.onDidChangeDirty((e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource)))),this._register(this.textFileService.files.onDidSaveError((e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource)))),this._register(this.textFileService.untitled.onDidChangeDirty((e=>this.ensureDirtyFilesAreOpenedWorker.work(e.resource)))),this._register(this.hostService.onDidChangeFocus((e=>e?this.reloadVisibleTextFileEditors():void 0))),this.lifecycleService.onDidShutdown((()=>this.dispose()))}getDirtyTextFileTrackerDelay(){return 800}ensureDirtyTextFilesAreOpened(e){this.doEnsureDirtyTextFilesAreOpened((0,Y.EB)(e.filter((e=>{if(!this.textFileService.isDirty(e))return!1;const t=this.textFileService.files.get(e);if(t?.hasState(2))return!1;if(e.scheme!==mo.lg.untitled&&1===this.filesConfigurationService.getAutoSaveMode()&&!t?.hasState(5))return!1;if(this.editorService.isOpened({resource:e,typeId:e.scheme===mo.lg.untitled?od.D.ID:Gs.MM,editorId:Gi.Cr.id}))return!1;const i=t??this.textFileService.untitled.get(e);return!i||!this.workingCopyEditorService.findEditor(i)})),(e=>e.toString())))}doEnsureDirtyTextFilesAreOpened(e){e.length&&this.editorService.openEditors(e.map((e=>({resource:e,options:{inactive:!0,pinned:!0,preserveFocus:!0}}))))}reloadVisibleTextFileEditors(){(0,Y.EB)((0,Y.kX)(this.codeEditorService.listCodeEditors().map((e=>{const t=e.getModel()?.uri;if(!t)return;const i=this.textFileService.files.get(t);return i&&!i.isDirty()&&i.isResolved()?i:void 0}))),(e=>e.resource.toString())).forEach((e=>this.textFileService.files.resolve(e.resource,{reload:{async:!0}})))}};sd=(0,o.g)([(0,o.f)(0,oi.AR),(0,o.f)(1,Js.MM),(0,o.f)(2,hs.g),(0,o.f)(3,at.$),(0,o.f)(4,js.$),(0,o.f)(5,di.LM),(0,o.f)(6,Lc.i)],sd);var nd=i(10986);let rd=class e extends nd.z{static{this.ID=Gs.Tz}constructor(t,i,o,s,n){super(e.ID,{openInternal:(e,t)=>this.openInternal(e,t)},t,i,s),this.editorResolverService=o,this.editorGroupService=n}async openInternal(e,t){if(e instanceof mn&&this.group?.activeEditor){const i=this.group.activeEditor,o=i?.toUntyped();if(!o)return;let s=await this.editorResolverService.resolveEditor({...o,options:{...t,override:Qo.Cs.PICK}},this.group);if(2===s)s=void 0;else if(1===s)return;if((0,Gi.uc)(s))for(const e of s.editor instanceof ln.$?[s.editor.original,s.editor.modified]:[s.editor])e instanceof mn&&(e.setForceOpenAsText(),e.setPreferredLanguageId(Gs.xH));await(this.group??this.editorGroupService.activeGroup).replaceEditors([{editor:i,replacement:s?.editor??e,options:{...s?.options??t}}])}}getTitle(){return this.input?this.input.getName():(0,l.NC)("binaryFileEditor","Binary File Viewer")}};rd=(0,o.g)([(0,o.f)(0,j.bU),(0,o.f)(1,M.XE),(0,o.f)(2,Uo.es),(0,o.f)(3,R.Uy),(0,o.f)(4,Po.Qw)],rd);var ad=i(38874);let cd=class extends p.JT{constructor(e,t,i,o,s,n,r){super(),this.fileService=e,this.configurationService=t,this.contextService=i,this.notificationService=o,this.openerService=s,this.uriIdentityService=n,this.hostService=r,this.watchedWorkspaces=new se.Y9((e=>this.uriIdentityService.extUri.getComparisonKey(e))),this.registerListeners(),this.refresh()}registerListeners(){this._register(this.contextService.onDidChangeWorkspaceFolders((e=>this.onDidChangeWorkspaceFolders(e)))),this._register(this.contextService.onDidChangeWorkbenchState((()=>this.onDidChangeWorkbenchState()))),this._register(this.configurationService.onDidChangeConfiguration((e=>this.onDidChangeConfiguration(e)))),this._register(this.fileService.onDidWatchError((e=>this.onDidWatchError(e))))}onDidChangeWorkspaceFolders(e){for(const t of e.removed)this.unwatchWorkspace(t);for(const t of e.added)this.watchWorkspace(t)}onDidChangeWorkbenchState(){this.refresh()}onDidChangeConfiguration(e){(e.affectsConfiguration("files.watcherExclude")||e.affectsConfiguration("files.watcherInclude"))&&this.refresh()}onDidWatchError(e){const t=e.toString();t.indexOf("ENOSPC")>=0?this.notificationService.prompt(F.zb.Warning,(0,l.NC)("enospcError","Unable to watch for file changes in this large workspace folder. Please follow the instructions link to resolve this issue."),[{label:(0,l.NC)("learnMore","Instructions"),run:()=>this.openerService.open(J.ov.parse("https://go.microsoft.com/fwlink/?linkid=867693"))}],{sticky:!0,neverShowAgain:{id:"ignoreEnospcError",isSecondary:!0,scope:F.YB.WORKSPACE}}):t.indexOf("EUNKNOWN")>=0&&this.notificationService.prompt(F.zb.Warning,(0,l.NC)("eshutdownError","File changes watcher stopped unexpectedly. A reload of the window may enable the watcher again unless the workspace cannot be watched for file changes."),[{label:(0,l.NC)("reload","Reload"),run:()=>this.hostService.reload()}],{sticky:!0,priority:F.RX.SILENT})}watchWorkspace(e){const t=[],i=this.configurationService.getValue({resource:e.uri});if(i.files?.watcherExclude)for(const e in i.files.watcherExclude)!0===i.files.watcherExclude[e]&&t.push(e);const o=new se.Y9((e=>this.uriIdentityService.extUri.getComparisonKey(e)));if(o.set(e.uri,e.uri),i.files?.watcherInclude)for(const t of i.files.watcherInclude)if(t)if((0,_o.YP)(t)){const i=J.ov.file(t).with({scheme:e.uri.scheme});this.uriIdentityService.extUri.isEqualOrParent(i,e.uri)&&o.set(i,i)}else{const i=e.toResource(t);o.set(i,i)}const s=new p.SL;for(const[,e]of o)s.add(this.fileService.watch(e,{recursive:!0,excludes:t}));this.watchedWorkspaces.set(e.uri,s)}unwatchWorkspace(e){this.watchedWorkspaces.has(e.uri)&&((0,p.B9)(this.watchedWorkspaces.get(e.uri)),this.watchedWorkspaces.delete(e.uri))}refresh(){this.unwatchWorkspaces();for(const e of this.contextService.getWorkspace().folders)this.watchWorkspace(e)}unwatchWorkspaces(){for(const[,e]of this.watchedWorkspaces)e.dispose();this.watchedWorkspaces.clear()}dispose(){super.dispose(),this.unwatchWorkspaces()}};cd=(0,o.g)([(0,o.f)(0,ad.o),(0,o.f)(1,Ee.Ui),(0,o.f)(2,gt.ec),(0,o.f)(3,F.lT),(0,o.f)(4,Kt.v4),(0,o.f)(5,si.v),(0,o.f)(6,at.$)],cd);var dd=i(63651);let hd=class extends p.JT{constructor(e,t,i,o){super(),this.lifecycleService=e,this.activityService=t,this.workingCopyService=i,this.filesConfigurationService=o,this.badgeHandle=this._register(new p.XK),this.lastKnownDirtyCount=0,this.updateActivityBadge(),this.registerListeners()}registerListeners(){this._register(this.workingCopyService.onDidChangeDirty((e=>this.onWorkingCopyDidChangeDirty(e)))),this.lifecycleService.onDidShutdown((()=>this.dispose()))}onWorkingCopyDidChangeDirty(e){const t=e.isDirty();(!t||2&e.capabilities||1!==this.filesConfigurationService.getAutoSaveMode())&&(t||this.lastKnownDirtyCount>0)&&this.updateActivityBadge()}updateActivityBadge(){const e=this.lastKnownDirtyCount=this.workingCopyService.dirtyCount;e>0?this.badgeHandle.value=this.activityService.showViewContainerActivity(Gs.f3,{badge:new pe.mA(e,(t=>1===t?l.NC("dirtyFile","1 unsaved file"):l.NC("dirtyFiles","{0} unsaved files",e))),clazz:"explorer-viewlet-label"}):this.badgeHandle.clear()}};hd=(0,o.g)([(0,o.f)(0,hs.g),(0,o.f)(1,pe.By),(0,o.f)(2,dd.C),(0,o.f)(3,di.LM)],hd);var ld=i(51219),ud=i(46334);let pd=class extends p.JT{constructor(e,t,i){super(),this.textEditorService=t,this.fileService=i,this._register(e.registerHandler(this))}handles(e){return e.typeId===ud.v&&this.fileService.canHandleResource(e.resource)}handlesSync(e){return e.typeId===ud.v&&this.fileService.hasProvider(e.resource)}isOpen(e,t){return!!this.handlesSync(e)&&(0,Q.Xy)(e.resource,t.resource)}createEditor(e){return this.textEditorService.createTextEditor({resource:e.resource,forceFile:!0})}};pd=(0,o.g)([(0,o.f)(0,Lc.i),(0,o.f)(1,ld.X),(0,o.f)(2,ft.sn)],pd);var gd=i(68801),md=i(14117),vd=i(20566),bd=i(69138);let fd=class e extends vd.e{static{this.ID=Gs.dD}constructor(t,i,o,s,n,r,a,c,d,h,l,u,p,g,m,v,b){super(e.ID,t,s,r,a,d,c,h,i),this.paneCompositeService=o,this.contextService=n,this.textFileService=l,this.explorerService=u,this.uriIdentityService=p,this.pathService=g,this.configurationService=m,this.preferencesService=v,this.hostService=b,this._register(this.fileService.onDidFilesChange((e=>this.onDidFilesChange(e)))),this._register(this.fileService.onDidRunOperation((e=>this.onDidRunOperation(e))))}onDidFilesChange(e){for(const t of e.rawDeleted)this.clearEditorViewState(t)}onDidRunOperation(e){2===e.operation&&e.target&&this.moveEditorViewState(e.resource,e.target.resource,this.uriIdentityService.extUri)}getTitle(){return this.input?this.input.getName():(0,l.NC)("textFileEditor","Text File Editor")}get input(){return this._input}async setInput(e,t,i,o){(0,md.B)("code/willSetInputToTextFileEditor"),await super.setInput(e,t,i,o);try{const s=await e.resolve(t);if(o.isCancellationRequested)return;if(s instanceof pn.N)return this.openAsBinary(e,t);const n=s,r=(0,y.cW)(this.editorControl);if(r.setModel(n.textEditorModel),!(0,Gi.EC)(t?.viewState)){const o=this.loadEditorViewState(e,i);o&&(t?.selection&&(o.cursorState=[]),r.restoreViewState(o))}t&&(0,bd.C)(t,r,1),r.updateOptions(this.getReadonlyConfiguration(n.isReadonly())),r.handleInitialized&&r.handleInitialized()}catch(i){await this.handleSetInputError(i,e,t)}(0,md.B)("code/didSetInputToTextFileEditor")}async handleSetInputError(e,t,i){if(0===e.textFileOperationResult)return this.openAsBinary(t,i);if(0===e.fileOperationResult){const e=[];throw e.push((0,ye.xw)({id:"workbench.files.action.openFolder",label:(0,l.NC)("openFolder","Open Folder"),run:async()=>this.hostService.openWindow([{folderUri:t.resource}],{forceNewWindow:!0})})),this.contextService.isInsideWorkspace(t.preferredResource)&&e.push((0,ye.xw)({id:"workbench.files.action.reveal",label:(0,l.NC)("reveal","Reveal Folder"),run:async()=>(await this.paneCompositeService.openPaneComposite(Gs.f3,0,!0),this.explorerService.select(t.preferredResource,!0))})),(0,Gi.X)((0,l.NC)("fileIsDirectory","The file is not displayed in the text editor because it is a directory."),e,{forceMessage:!0})}if(7===e.fileOperationResult&&this.group){let o;throw o=e instanceof ft.Hb?(0,l.NC)("fileTooLargeForHeapErrorWithSize","The file is not displayed in the text editor because it is very large ({0}).",ft.Lk.formatSize(e.size)):(0,l.NC)("fileTooLargeForHeapErrorWithoutSize","The file is not displayed in the text editor because it is very large."),(0,Gi.RG)(this.group,t,i,o,this.preferencesService)}if(1===e.fileOperationResult&&await this.pathService.hasValidBasename(t.preferredResource))throw(0,Gi.X)(new ft.Ym((0,l.NC)("unavailableResourceErrorEditorText","The editor could not be opened because the file was not found."),1),[(0,ye.xw)({id:"workbench.files.action.createMissingFile",label:(0,l.NC)("createFile","Create File"),run:async()=>(await this.textFileService.create([{resource:t.preferredResource}]),this.editorService.openEditor({resource:t.preferredResource,options:{pinned:!0}}))})],{allowDialog:!0});throw e}openAsBinary(e,t){const i=this.configurationService.getValue("workbench.editor.defaultBinaryEditor"),o=this.group??this.editorGroupService.activeGroup,s={...t,activation:Qo.kn.PRESERVE};i&&""!==i&&i!==Gi.Cr.id?this.doOpenAsBinaryInDifferentEditor(o,i,e,s):this.doOpenAsBinaryInSameEditor(o,i,e,s)}doOpenAsBinaryInDifferentEditor(e,t,i,o){this.editorService.replaceEditors([{editor:i,replacement:{resource:i.resource,options:{...o,override:t}}}],e)}doOpenAsBinaryInSameEditor(e,t,i,o){t===Gi.Cr.id?(i.setForceOpenAsText(),i.setPreferredLanguageId(Gs.xH),o={...o,forceReload:!0}):i.setForceOpenAsBinary(),e.openEditor(i,o)}clearInput(){super.clearInput(),this.editorControl?.setModel(null)}createEditorControl(e,t){(0,md.B)("code/willCreateTextFileEditorControl"),super.createEditorControl(e,t),(0,md.B)("code/didCreateTextFileEditorControl")}tracksEditorViewState(e){return e instanceof mn}tracksDisposedEditorViewState(){return!0}};fd=(0,o.g)([(0,o.f)(0,j.bU),(0,o.f)(1,ft.sn),(0,o.f)(2,ve.c),(0,o.f)(3,c.TG),(0,o.f)(4,gt.ec),(0,o.f)(5,R.Uy),(0,o.f)(6,Eo.V),(0,o.f)(7,oi.AR),(0,o.f)(8,M.XE),(0,o.f)(9,Po.Qw),(0,o.f)(10,Js.MM),(0,o.f)(11,pi.gE),(0,o.f)(12,si.v),(0,o.f)(13,Xo.a),(0,o.f)(14,Ee.Ui),(0,o.f)(15,Ye.UP),(0,o.f)(16,at.$)],fd);let wd=class{constructor(e){e.registerFormatter({scheme:mo.lg.file,formatting:{label:"${authority}${path}",separator:_o.ir,tildify:!Ke.ED,normalizeDriveLetter:Ke.ED,authorityPrefix:_o.ir+_o.ir,workspaceSuffix:""}})}};wd=(0,o.g)([(0,o.f)(0,Xe.e)],wd),h.B.as(Gi.bS.EditorPane).registerEditorPane(Ki.gS.create(fd,fd.ID,l.NC("textFileEditor","Text File Editor")),[new n.M(mn)]),h.B.as(Gi.bS.EditorPane).registerEditorPane(Ki.gS.create(rd,rd.ID,l.NC("binaryFileEditor","Binary File Editor")),[new n.M(mn)]),h.B.as(Gi.bS.EditorFactory).registerFileEditorFactory({typeId:Gs.MM,createFileEditor:(e,t,i,o,s,n,r,a)=>a.createInstance(mn,e,t,i,o,s,n,r),isFileEditor:e=>e instanceof mn}),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(pd,2),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(da.JS,1),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(sd,1),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(yn,1),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(wd,1),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(cd,3),h.B.as(Rr.I.Workbench).registerWorkbenchContribution(hd,1),ur.n_.addImplementation(110,"explorer",(e=>{const t=e.get(ri.tJ),i=e.get(pi.gE),o=e.get(Ee.Ui).getValue().explorer.enableUndo;return!!(i.hasViewFocus()&&t.canUndo(hi)&&o)&&(t.undo(hi),!0)})),ur.kz.addImplementation(110,"explorer",(e=>{const t=e.get(ri.tJ),i=e.get(pi.gE),o=e.get(Ee.Ui).getValue().explorer.enableUndo;return!!(i.hasViewFocus()&&t.canRedo(hi)&&o)&&(t.redo(hi),!0)})),gd.dQ.registerLanguage({id:Gs.xH,aliases:["Binary"],mimetypes:["text/x-code-binary"]});var yd=i(80563),Cd=i(27169);let Sd=class e extends p.JT{static{this.STORAGE_KEY="editors.mru"}get count(){return this.mostRecentEditorsMap.size}get editors(){return[...this.mostRecentEditorsMap.values()]}hasEditor(e){const t=this.editorsPerResourceCounter.get(e.resource);return t?.has(this.toIdentifier(e))??!1}hasEditors(e){return this.editorsPerResourceCounter.has(e)}toIdentifier(e,t){return"string"!=typeof e?this.toIdentifier(e.typeId,e.editorId):t?`${e}/${t}`:e}constructor(e,t){super(),this.editorGroupsService=e,this.storageService=t,this.keyMap=new Map,this.mostRecentEditorsMap=new se.lC,this.editorsPerResourceCounter=new se.Y9,this._onDidMostRecentlyActiveEditorsChange=this._register(new g.Q5),this.onDidMostRecentlyActiveEditorsChange=this._onDidMostRecentlyActiveEditorsChange.event,this.registerListeners()}registerListeners(){this._register(this.storageService.onWillSaveState((()=>this.saveState()))),this._register(this.editorGroupsService.onDidAddGroup((e=>this.onGroupAdded(e)))),this._register(this.editorGroupsService.onDidChangeEditorPartOptions((e=>this.onDidChangeEditorPartOptions(e)))),this.editorGroupsService.whenReady.then((()=>this.loadState()))}onGroupAdded(e){const t=e.getEditors(0);for(let i=t.length-1;i>=0;i--)this.addMostRecentEditor(e,t[i],!1,!0);this.editorGroupsService.activeGroup===e&&e.activeEditor&&this.addMostRecentEditor(e,e.activeEditor,!0,!1),this.registerGroupListeners(e)}registerGroupListeners(e){const t=new p.SL;t.add(e.onDidModelChange((t=>{switch(t.kind){case 0:this.editorGroupsService.activeGroup===e&&e.activeEditor&&this.addMostRecentEditor(e,e.activeEditor,!0,!1);break;case 3:t.editor&&(this.addMostRecentEditor(e,t.editor,!1,!0),this.ensureOpenedEditorsLimit({groupId:e.id,editor:t.editor},e.id))}}))),t.add(e.onDidCloseEditor((t=>{this.removeMostRecentEditor(e,t.editor)}))),t.add(e.onDidActiveEditorChange((t=>{t.editor&&this.addMostRecentEditor(e,t.editor,this.editorGroupsService.activeGroup===e,!1)}))),g.ju.once(e.onWillDispose)((()=>(0,p.B9)(t)))}onDidChangeEditorPartOptions(e){if(!(0,Yo.fS)(e.newPartOptions.limit,e.oldPartOptions.limit)){const e=this.editorGroupsService.activeGroup;let t;e.activeEditor&&(t={editor:e.activeEditor,groupId:e.id}),this.ensureOpenedEditorsLimit(t)}}addMostRecentEditor(e,t,i,o){const s=this.ensureKey(e,t),n=this.mostRecentEditorsMap.first;i||!n?this.mostRecentEditorsMap.set(s,s,n?1:void 0):(this.mostRecentEditorsMap.set(s,s,1),this.mostRecentEditorsMap.set(n,n,1)),o&&this.updateEditorResourcesMap(t,!0),this._onDidMostRecentlyActiveEditorsChange.fire()}updateEditorResourcesMap(e,t){let i,o,s;if(e instanceof Ui.h?(i=e.primary.resource,o=e.primary.typeId,s=e.primary.editorId):(i=e.resource,o=e.typeId,s=e.editorId),!i)return;const n=this.toIdentifier(o,s);if(t){let e=this.editorsPerResourceCounter.get(i);e||(e=new Map,this.editorsPerResourceCounter.set(i,e)),e.set(n,(e.get(n)??0)+1)}else{const e=this.editorsPerResourceCounter.get(i);if(e){const t=e.get(n)??0;t>1?e.set(n,t-1):(e.delete(n),0===e.size&&this.editorsPerResourceCounter.delete(i))}}}removeMostRecentEditor(e,t){this.updateEditorResourcesMap(t,!1);const i=this.findKey(e,t);if(i){this.mostRecentEditorsMap.delete(i);const t=this.keyMap.get(e.id);t&&t.delete(i.editor)&&0===t.size&&this.keyMap.delete(e.id),this._onDidMostRecentlyActiveEditorsChange.fire()}}findKey(e,t){const i=this.keyMap.get(e.id);if(i)return i.get(t)}ensureKey(e,t){let i=this.keyMap.get(e.id);i||(i=new Map,this.keyMap.set(e.id,i));let o=i.get(t);return o||(o={groupId:e.id,editor:t},i.set(t,o)),o}async ensureOpenedEditorsLimit(e,t){if(!this.editorGroupsService.partOptions.limit?.enabled||"number"!=typeof this.editorGroupsService.partOptions.limit.value||this.editorGroupsService.partOptions.limit.value<=0)return;const i=this.editorGroupsService.partOptions.limit.value;if(this.editorGroupsService.partOptions.limit?.perEditorGroup)if("number"==typeof t){const o=this.editorGroupsService.getGroup(t);o&&await this.doEnsureOpenedEditorsLimit(i,o.getEditors(0).map((e=>({editor:e,groupId:t}))),e)}else for(const t of this.editorGroupsService.groups)await this.ensureOpenedEditorsLimit(e,t.id);else await this.doEnsureOpenedEditorsLimit(i,[...this.mostRecentEditorsMap.values()],e)}async doEnsureOpenedEditorsLimit(e,t,i){let o;if(o=this.editorGroupsService.partOptions.limit?.excludeDirty?t.filter((({editor:e})=>!(e.isDirty()&&!e.isSaving()||e.hasCapability(512)))):t,e>=o.length)return;const s=o.reverse().filter((({editor:e,groupId:t})=>!(e.isDirty()&&!e.isSaving()||e.hasCapability(512)||i&&e===i.editor&&t===i.groupId||this.editorGroupsService.getGroup(t)?.isSticky(e))));let n=o.length-e;const r=new Map;for(const{groupId:e,editor:t}of s){let i=r.get(e);if(i||(i=[],r.set(e,i)),i.push(t),n--,0===n)break}for(const[e,t]of r){const i=this.editorGroupsService.getGroup(e);i&&await i.closeEditors(t,{preserveFocus:!0})}}saveState(){this.mostRecentEditorsMap.isEmpty()?this.storageService.remove(e.STORAGE_KEY,1):this.storageService.store(e.STORAGE_KEY,JSON.stringify(this.serialize()),1,1)}serialize(){const e=h.B.as(Gi.bS.EditorFactory),t=[...this.mostRecentEditorsMap.values()],i=new Map;return{entries:(0,Y.kX)(t.map((({editor:t,groupId:o})=>{const s=this.editorGroupsService.getGroup(o);if(!s)return;let n=i.get(s);n||(n=s.getEditors(1).filter((t=>{const i=e.getEditorSerializer(t);return i?.canSerialize(t)})),i.set(s,n));const r=n.indexOf(t);return-1!==r?{groupId:o,index:r}:void 0})))}}loadState(){const t=this.storageService.get(e.STORAGE_KEY,1);if(t)this.deserialize(JSON.parse(t));else{const e=this.editorGroupsService.getGroups(1);for(let t=e.length-1;t>=0;t--){const i=e[t],o=i.getEditors(0);for(let e=o.length-1;e>=0;e--)this.addMostRecentEditor(i,o[e],!0,!0)}}for(const e of this.editorGroupsService.groups)this.registerGroupListeners(e)}deserialize(e){const t=[];for(const{groupId:i,index:o}of e.entries){const e=this.editorGroupsService.getGroup(i);if(!e)continue;const s=e.getEditorByIndex(o);if(!s)continue;const n=this.ensureKey(e,s);t.push([n,n]),this.updateEditorResourcesMap(s,!0)}this.mostRecentEditorsMap.fromJSON(t)}};Sd=(0,o.g)([(0,o.f)(0,Po.Qw),(0,o.f)(1,R.Uy)],Sd);var _d=i(15527);let Ed=class extends p.JT{constructor(e,t,i,o,s,n,r,a,c,d){super(),this.editorGroupService=e,this.instantiationService=t,this.fileService=i,this.configurationService=o,this.contextService=s,this.uriIdentityService=n,this.editorResolverService=r,this.workspaceTrustRequestService=a,this.hostService=c,this.textEditorService=d,this._onDidActiveEditorChange=this._register(new g.Q5),this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this._onDidVisibleEditorsChange=this._register(new g.Q5),this.onDidVisibleEditorsChange=this._onDidVisibleEditorsChange.event,this._onDidEditorsChange=this._register(new g.Q5),this.onDidEditorsChange=this._onDidEditorsChange.event,this._onDidCloseEditor=this._register(new g.Q5),this.onDidCloseEditor=this._onDidCloseEditor.event,this._onDidOpenEditorFail=this._register(new g.Q5),this.onDidOpenEditorFail=this._onDidOpenEditorFail.event,this._onDidMostRecentlyActiveEditorsChange=this._register(new g.Q5),this.onDidMostRecentlyActiveEditorsChange=this._onDidMostRecentlyActiveEditorsChange.event,this.lastActiveEditor=void 0,this.activeOutOfWorkspaceWatchers=new se.Y9,this.closeOnFileDelete=!1,this.editorsObserver=this._register(this.instantiationService.createInstance(Sd)),this.onConfigurationUpdated(),this.registerListeners()}registerListeners(){this.editorGroupService.whenReady.then((()=>this.onEditorGroupsReady())),this.editorGroupService.onDidChangeActiveGroup((e=>this.handleActiveEditorChange(e))),this.editorGroupService.onDidAddGroup((e=>this.registerGroupListeners(e))),this.editorsObserver.onDidMostRecentlyActiveEditorsChange((()=>this._onDidMostRecentlyActiveEditorsChange.fire())),this._register(this.onDidVisibleEditorsChange((()=>this.handleVisibleEditorsChange()))),this._register(this.fileService.onDidRunOperation((e=>this.onDidRunFileOperation(e)))),this._register(this.fileService.onDidFilesChange((e=>this.onDidFilesChange(e)))),this._register(this.configurationService.onDidChangeConfiguration((e=>this.onConfigurationUpdated(e))))}onEditorGroupsReady(){for(const e of this.editorGroupService.groups)this.registerGroupListeners(e);this.activeEditor&&(this.doHandleActiveEditorChangeEvent(),this._onDidVisibleEditorsChange.fire())}handleActiveEditorChange(e){e===this.editorGroupService.activeGroup&&(this.lastActiveEditor||e.activeEditor)&&this.doHandleActiveEditorChangeEvent()}doHandleActiveEditorChangeEvent(){const e=this.editorGroupService.activeGroup;this.lastActiveEditor=(0,y.f6)(e.activeEditor),this._onDidActiveEditorChange.fire()}registerGroupListeners(e){const t=new p.SL;t.add(e.onDidModelChange((t=>{this._onDidEditorsChange.fire({groupId:e.id,event:t})}))),t.add(e.onDidActiveEditorChange((()=>{this.handleActiveEditorChange(e),this._onDidVisibleEditorsChange.fire()}))),t.add(e.onDidCloseEditor((e=>{this._onDidCloseEditor.fire(e)}))),t.add(e.onDidOpenEditorFail((t=>{this._onDidOpenEditorFail.fire({editor:t,groupId:e.id})}))),g.ju.once(e.onWillDispose)((()=>{(0,p.B9)(t)}))}handleVisibleEditorsChange(){const e=new se.XV;for(const t of this.visibleEditors){const i=(0,Y.EB)((0,Y.kX)([Gi.zK.getCanonicalUri(t,{supportSideBySide:Gi.YX.PRIMARY}),Gi.zK.getCanonicalUri(t,{supportSideBySide:Gi.YX.SECONDARY})]),(e=>e.toString()));for(const t of i)this.fileService.hasProvider(t)&&!this.contextService.isInsideWorkspace(t)&&e.add(t)}for(const t of this.activeOutOfWorkspaceWatchers.keys())e.has(t)||((0,p.B9)(this.activeOutOfWorkspaceWatchers.get(t)),this.activeOutOfWorkspaceWatchers.delete(t));for(const t of e.keys())if(!this.activeOutOfWorkspaceWatchers.get(t)){const e=this.fileService.watch(t);this.activeOutOfWorkspaceWatchers.set(t,e)}}async onDidRunFileOperation(e){e.isOperation(2)&&this.handleMovedFile(e.resource,e.target.resource),(e.isOperation(1)||e.isOperation(2))&&this.handleDeletedFile(e.resource,!1,e.target?e.target.resource:void 0)}onDidFilesChange(e){e.gotDeleted()&&this.handleDeletedFile(e,!0)}async handleMovedFile(e,t){for(const i of this.editorGroupService.groups){const o=[];for(const s of i.editors){const n=s.resource;if(!n||!this.uriIdentityService.extUri.isEqualOrParent(n,e))continue;let r;if(this.uriIdentityService.extUri.isEqual(e,n))r=t;else{const i=(0,_d.s4)(n.path,e.path,this.uriIdentityService.extUri.ignorePathCasing(n));r=(0,Q.Vo)(t,n.path.substr(i+e.path.length+1))}const a=await s.rename(i.id,r);if(!a)return;const c={preserveFocus:!0,pinned:i.isPinned(s),sticky:i.isSticky(s),index:i.getIndexOfEditor(s),inactive:!i.isActive(s)};(0,Gi.Xl)(a.editor)?o.push({editor:s,replacement:a.editor,options:{...a.options,...c}}):o.push({editor:s,replacement:{...a.editor,options:{...a.editor.options,...c}}})}o.length&&this.replaceEditors(o,i)}}onConfigurationUpdated(e){if(e&&!e.affectsConfiguration("workbench.editor.closeOnFileDelete"))return;const t=this.configurationService.getValue();"boolean"==typeof t.workbench?.editor?.closeOnFileDelete?this.closeOnFileDelete=t.workbench.editor.closeOnFileDelete:this.closeOnFileDelete=!1}handleDeletedFile(e,t,i){for(const o of this.getAllNonDirtyEditors({includeUntitled:!1,supportSideBySide:!0}))(async()=>{const s=o.resource;if(s&&(this.closeOnFileDelete||!t)){if(i&&this.uriIdentityService.extUri.isEqualOrParent(s,i))return;let n=!1;if(n=e instanceof ft.G9?e.contains(s,2):this.uriIdentityService.extUri.isEqualOrParent(s,e),!n)return;let r=!1;t&&this.fileService.hasProvider(s)&&(await(0,je.Vs)(100),r=await this.fileService.exists(s)),r||o.isDisposed()||o.dispose()}})()}getAllNonDirtyEditors(e){const t=[];function i(i){i.hasCapability(4)&&!e.includeUntitled||i.isDirty()||t.push(i)}for(const t of this.editors)e.supportSideBySide&&t instanceof Ui.h?(i(t.primary),i(t.secondary)):i(t);return t}get activeEditorPane(){return this.editorGroupService.activeGroup?.activeEditorPane}get activeTextEditorControl(){const e=this.activeEditorPane;if(e){const t=e.getControl();if((0,jr.CL)(t)||(0,jr.QI)(t))return t;if((0,jr.sd)(t)&&(0,jr.CL)(t.activeCodeEditor))return t.activeCodeEditor}}get activeTextEditorLanguageId(){let e;const t=this.activeTextEditorControl;return e=(0,jr.QI)(t)?t.getModifiedEditor():t,e?.getModel()?.getLanguageId()}get count(){return this.editorsObserver.count}get editors(){return this.getEditors(1).map((({editor:e})=>e))}getEditors(e,t){switch(e){case 0:return t?.excludeSticky?this.editorsObserver.editors.filter((({groupId:e,editor:t})=>!this.editorGroupService.getGroup(e)?.isSticky(t))):this.editorsObserver.editors;case 1:{const e=[];for(const i of this.editorGroupService.getGroups(2))e.push(...i.getEditors(1,t).map((e=>({editor:e,groupId:i.id}))));return e}}}get activeEditor(){const e=this.editorGroupService.activeGroup;return e?(0,y.f6)(e.activeEditor):void 0}get visibleEditorPanes(){return(0,Y.kX)(this.editorGroupService.groups.map((e=>e.activeEditorPane)))}get visibleTextEditorControls(){const e=[];for(const t of this.visibleEditorPanes){const i=t.getControl();((0,jr.CL)(i)||(0,jr.QI)(i))&&e.push(i)}return e}get visibleEditors(){return(0,Y.kX)(this.editorGroupService.groups.map((e=>e.activeEditor)))}async openEditor(e,t,i){let o,s,n=(0,Gi.Xl)(e)?t:e.options;if((0,oi.DY)(t)&&(i=t),!(0,Gi.Xl)(e)){const t=await this.editorResolverService.resolveEditor(e,i);if(1===t)return;(0,Gi.uF)(t)&&(o=t.editor,n=t.options,s=t.group)}if(o||(o=(0,Gi.Xl)(e)?e:await this.textEditorService.resolveTextEditor(e)),!s){let e;[s,e]=this.instantiationService.invokeFunction(Ps,{editor:o,options:n},i),e&&(n={...n,activation:e})}return s.openEditor(o,n)}async openEditors(e,t,i){if(i?.validateTrust&&!await this.handleWorkspaceTrust(e))return[];const o=new Map;for(const i of e){let e,s;if(!(0,Gi.uc)(i)){const o=await this.editorResolverService.resolveEditor(i,t);if(1===o)continue;(0,Gi.uF)(o)&&(e=o,s=o.group)}e||(e=(0,Gi.uc)(i)?i:{editor:await this.textEditorService.resolveTextEditor(i),options:i.options}),s||([s]=this.instantiationService.invokeFunction(Ps,e,t));let n=o.get(s);n||(n=[],o.set(s,n)),n.push(e)}const s=[];for(const[e,t]of o)s.push(e.openEditors(t));return(0,Y.kX)(await je.jT.settled(s))}async handleWorkspaceTrust(e){const{resources:t,diffMode:i,mergeMode:o}=this.extractEditorResources(e);switch(await this.workspaceTrustRequestService.requestOpenFilesTrust(t)){case 1:return!0;case 2:return await this.hostService.openWindow(t.map((e=>({fileUri:e}))),{forceNewWindow:!0,diffMode:i,mergeMode:o}),!1;case 3:return!1}}extractEditorResources(e){const t=new se.XV;let i=!1,o=!1;for(const s of e)if((0,Gi.uc)(s)){const e=Gi.zK.getOriginalUri(s.editor,{supportSideBySide:Gi.YX.BOTH});J.ov.isUri(e)?t.add(e):e&&(e.primary&&t.add(e.primary),e.secondary&&t.add(e.secondary),i=s.editor instanceof ln.$)}else(0,Gi.B)(s)&&(J.ov.isUri(s.input1)&&t.add(s.input1.resource),J.ov.isUri(s.input2)&&t.add(s.input2.resource),J.ov.isUri(s.base)&&t.add(s.base.resource),J.ov.isUri(s.result)&&t.add(s.result.resource),o=!0),(0,Gi.hG)(s)?(J.ov.isUri(s.original.resource)&&t.add(s.original.resource),J.ov.isUri(s.modified.resource)&&t.add(s.modified.resource),i=!0):(0,Gi.BR)(s)&&t.add(s.resource);return{resources:Array.from(t.keys()),diffMode:i,mergeMode:o}}isOpened(e){return this.editorsObserver.hasEditor({resource:this.uriIdentityService.asCanonicalUri(e.resource),typeId:e.typeId,editorId:e.editorId})}isVisible(e){for(const t of this.editorGroupService.groups)if(t.activeEditor?.matches(e))return!0;return!1}async closeEditor({editor:e,groupId:t},i){const o=this.editorGroupService.getGroup(t);await(o?.closeEditor(e,i))}async closeEditors(e,t){const i=new Map;for(const{editor:t,groupId:o}of e){const e=this.editorGroupService.getGroup(o);if(!e)continue;let s=i.get(e);s||(s=[],i.set(e,s)),s.push(t)}for(const[e,o]of i)await e.closeEditors(o,t)}findEditors(e,t,i){const o=J.ov.isUri(e)?e:e.resource,s=J.ov.isUri(e)?void 0:e.typeId;if(t?.supportSideBySide!==Gi.YX.ANY&&t?.supportSideBySide!==Gi.YX.SECONDARY&&!this.editorsObserver.hasEditors(o))return J.ov.isUri(e)||(0,y.o8)(i)?[]:void 0;if((0,y.o8)(i)){const i=[];for(const o of this.editorGroupService.getGroups(1)){const s=[];if(J.ov.isUri(e))s.push(...this.findEditors(e,t,o));else{const i=this.findEditors(e,t,o);i&&s.push(i)}i.push(...s.map((e=>({editor:e,groupId:o.id}))))}return i}{const n="number"==typeof i?this.editorGroupService.getGroup(i):i;if(J.ov.isUri(e))return n?n.findEditors(o,t):[];{if(!n)return;const e=n.findEditors(o,t);for(const t of e)if(t.typeId===s)return t;return}}}async replaceEditors(e,t){const i="number"==typeof t?this.editorGroupService.getGroup(t):t,o=[];for(const t of e){let e;if(!(0,Gi.Xl)(t.replacement)){const o=await this.editorResolverService.resolveEditor(t.replacement,i);if(1===o)continue;(0,Gi.uF)(o)&&(e={editor:t.editor,replacement:o.editor,options:o.options,forceReplaceDirty:t.forceReplaceDirty})}e||(e={editor:t.editor,replacement:(0,Po.XP)(t)?t.replacement:await this.textEditorService.resolveTextEditor(t.replacement),options:(0,Po.XP)(t)?t.options:t.replacement.options,forceReplaceDirty:t.forceReplaceDirty}),o.push(e)}return i?.replaceEditors(o)}async save(e,t){Array.isArray(e)||(e=[e]);const i=this.getUniqueEditors(e),o=[],s=[];if(t?.saveAs)s.push(...i);else for(const{groupId:e,editor:t}of i)t.hasCapability(4)?s.push({groupId:e,editor:t}):o.push({groupId:e,editor:t});const n=await je.jT.settled(o.map((({groupId:e,editor:i})=>(1===t?.reason&&this.editorGroupService.getGroup(e)?.pinEditor(i),i.save(e,t)))));for(const{groupId:e,editor:i}of s){if(i.isDisposed())continue;const o=await this.openEditor(i,e),s={pinned:!0,viewState:o?.getViewState()},r=t?.saveAs?await i.saveAs(e,t):await i.save(e,t);if(n.push(r),!r)break;if(!i.matches(r)){const t=i.hasCapability(4)?this.editorGroupService.groups.map((e=>e.id)):[e];for(const e of t)r instanceof Cd.Q?await this.replaceEditors([{editor:i,replacement:r,options:s}],e):await this.replaceEditors([{editor:i,replacement:{...r,options:s}}],e)}}return{success:n.every((e=>!!e)),editors:(0,Y.kX)(n)}}saveAll(e){return this.save(this.getAllModifiedEditors(e),e)}async revert(e,t){Array.isArray(e)||(e=[e]);const i=this.getUniqueEditors(e);return await je.jT.settled(i.map((async({groupId:e,editor:i})=>(this.editorGroupService.getGroup(e)?.pinEditor(i),i.revert(e,t))))),!i.some((({editor:e})=>e.isDirty()))}async revertAll(e){return this.revert(this.getAllModifiedEditors(e),e)}getAllModifiedEditors(e){const t=[];for(const i of this.editorGroupService.getGroups(1))for(const o of i.getEditors(0))o.isModified()&&("boolean"!=typeof e?.includeUntitled&&e?.includeUntitled?.includeScratchpad||!o.hasCapability(512))&&(!e?.includeUntitled&&o.hasCapability(4)||e?.excludeSticky&&i.isSticky(o)||t.push({groupId:i.id,editor:o}));return t}getUniqueEditors(e){const t=[];for(const{editor:i,groupId:o}of e)t.some((e=>e.editor.matches(i)))||t.push({editor:i,groupId:o});return t}dispose(){super.dispose(),this.activeOutOfWorkspaceWatchers.forEach((e=>(0,p.B9)(e))),this.activeOutOfWorkspaceWatchers.clear()}};Ed=(0,o.g)([(0,o.f)(0,Po.Qw),(0,o.f)(1,c.TG),(0,o.f)(2,ft.sn),(0,o.f)(3,Ee.Ui),(0,o.f)(4,gt.ec),(0,o.f)(5,si.v),(0,o.f)(6,Uo.es),(0,o.f)(7,os.N2),(0,o.f)(8,at.$),(0,o.f)(9,ld.X)],Ed);let xd=class e extends p.JT{static{this.configureDefaultID="promptOpenWith.configureDefault"}static{this.cacheStorageID="editorOverrideService.cache"}static{this.conflictingDefaultsStorageID="editorOverrideService.conflictingDefaults"}constructor(t,i,o,s,n,r,a,c,d){super(),this.editorGroupService=t,this.instantiationService=i,this.configurationService=o,this.quickInputService=s,this.notificationService=n,this.telemetryService=r,this.storageService=a,this.extensionService=c,this.logService=d,this._onDidChangeEditorRegistrations=this._register(new g.K3),this.onDidChangeEditorRegistrations=this._onDidChangeEditorRegistrations.event,this._editors=new Map,this._flattenedEditors=new Map,this._shouldReFlattenEditors=!0,this.cache=new Set(JSON.parse(this.storageService.get(e.cacheStorageID,0,JSON.stringify([])))),this.storageService.remove(e.cacheStorageID,0),this._register(this.storageService.onWillSaveState((()=>{this.cacheEditors()}))),this.extensionService.onDidRegisterExtensions((()=>{this.cache=void 0}))}resolveUntypedInputAndGroup(e,t){const i=e,[o,s]=this.instantiationService.invokeFunction(Ps,i,t);return[i,o,s]}async resolveEditor(e,t){if(this._flattenedEditors=this._flattenEditorsMap(),(0,Gi.eq)(e))return this.doResolveSideBySideEditor(e,t);const i=this.resolveUntypedInputAndGroup(e,t);if(!i)return 2;const[o,s,n]=i;n&&(o.options={...o.options,activation:n});let r=Gi.zK.getCanonicalUri(o,{supportSideBySide:Gi.YX.PRIMARY});if(this.cache&&r&&this.resourceMatchesCache(r)&&await this.extensionService.whenInstalledExtensionsRegistered(),void 0===r)r=J.ov.from({scheme:mo.lg.untitled});else if(void 0===r.scheme||null===r)return 2;if(o.options?.override===Qo.Cs.PICK){const e=await this.doPickEditor(o);if(!e)return 1;o.options=e}let{editor:a,conflictingDefault:c}=this.getEditor(r,o.options?.override);if(!a&&(o.options?.override||(0,Gi.uc)(e)))return 2;if(!a){const e=this.getEditor(r,Gi.Cr.id);if(a=e?.editor,c=e?.conflictingDefault,!a)return 2}if((0,Gi.hG)(o)&&void 0===o.options?.override){let e=Gi.zK.getCanonicalUri(o,{supportSideBySide:Gi.YX.SECONDARY});e||(e=J.ov.from({scheme:mo.lg.untitled}));const{editor:t}=this.getEditor(e,void 0);if(!t||a.editorInfo.id!==t.editorInfo.id){const{editor:e,conflictingDefault:t}=this.getEditor(r,Gi.Cr.id);a=e,c=t}if(!a)return 2}if(o.options={override:a.editorInfo.id,...o.options},void 0===a.editorFactoryObject.createDiffEditorInput&&(0,Gi.hG)(o))return 2;const d=await this.doResolveEditor(o,s,a);return c&&d&&await this.doHandleConflictingDefaults(r,a.editorInfo.label,o,d.editor,s),d?(this.sendEditorResolutionTelemetry(d.editor),d.editor.editorId!==a.editorInfo.id&&this.logService.warn(`Editor ID Mismatch: ${d.editor.editorId} !== ${a.editorInfo.id}. This will cause bugs. Please ensure editorInput.editorId matches the registered id`),{...d,group:s}):1}async doResolveSideBySideEditor(e,t){const i=await this.resolveEditor(e.primary,t);if(!(0,Gi.uF)(i))return 2;const o=await this.resolveEditor(e.secondary,i.group??t);return(0,Gi.uF)(o)?{group:i.group??o.group,editor:this.instantiationService.createInstance(Ui.h,e.label,e.description,o.editor,i.editor),options:e.options}:2}bufferChangeEvents(e){this._onDidChangeEditorRegistrations.pause();try{e()}finally{this._onDidChangeEditorRegistrations.resume()}}registerEditor(e,t,i,o){let s=this._editors.get(e);void 0===s&&(s=new Map,this._editors.set(e,s));let n=s.get(t.id);void 0===n&&(n=[]);const r=(0,Y.$T)(n,{globPattern:e,editorInfo:t,options:i,editorFactoryObject:o});return s.set(t.id,n),this._shouldReFlattenEditors=!0,this._onDidChangeEditorRegistrations.fire(),(0,p.OF)((()=>{r(),n&&0===n.length&&s?.delete(t.id),this._shouldReFlattenEditors=!0,this._onDidChangeEditorRegistrations.fire()}))}getAssociationsForResource(e){const t=this.getAllUserAssociations().filter((t=>t.filenamePattern&&(0,Uo.M9)(t.filenamePattern,e))),i=this._registeredEditors;return t.filter((e=>i.find((t=>t.editorInfo.id===e.viewType))))}getAllUserAssociations(){const e=this.configurationService.inspect(Uo.x8)||{},t=e.workspaceValue??{},i=e.userValue??{},o={...t};for(const[e,t]of Object.entries(i))void 0===o[e]&&(o[e]=t);const s=[];for(const[e,t]of Object.entries(o)){const i={filenamePattern:e,viewType:t};s.push(i)}return s}_flattenEditorsMap(){if(!this._shouldReFlattenEditors)return this._flattenedEditors;this._shouldReFlattenEditors=!1;const e=new Map;for(const[t,i]of this._editors){const o=[];for(const e of i.values()){let t;for(const i of e)t||(t={editorInfo:i.editorInfo,globPattern:i.globPattern,options:{},editorFactoryObject:{}}),t.options={...t.options,...i.options},t.editorFactoryObject={...t.editorFactoryObject,...i.editorFactoryObject};t&&o.push(t)}e.set(t,o)}return e}get _registeredEditors(){return(0,Y.xH)(Array.from(this._flattenedEditors.values()))}updateUserAssociations(e,t){const i={viewType:t,filenamePattern:e},o=this.getAllUserAssociations(),s=Object.create(null);for(const e of[...o,i])e.filenamePattern&&(s[e.filenamePattern]=e.viewType);this.configurationService.updateValue(Uo.x8,s)}findMatchingEditors(e){const t=this.getAssociationsForResource(e),i=[];for(const[o,s]of this._flattenedEditors)for(const n of s)(t.find((e=>e.viewType===n.editorInfo.id))&&n.editorInfo.priority!==Uo.OP.exclusive||(0,Uo.M9)(o,e))&&i.push(n);return i.sort(((e,t)=>(0,Uo.YV)(t.editorInfo.priority)===(0,Uo.YV)(e.editorInfo.priority)&&"string"==typeof t.globPattern&&"string"==typeof e.globPattern?t.globPattern.length-e.globPattern.length:(0,Uo.YV)(t.editorInfo.priority)-(0,Uo.YV)(e.editorInfo.priority)))}getEditors(e){if(this._flattenedEditors=this._flattenEditorsMap(),J.ov.isUri(e)){const t=this.findMatchingEditors(e);return t.find((e=>e.editorInfo.priority===Uo.OP.exclusive))?[]:t.map((e=>e.editorInfo))}return(0,Y.EB)(this._registeredEditors.map((e=>e.editorInfo)),(e=>e.id))}getEditor(e,t){const i=(t,i)=>t.find((t=>t.options&&void 0!==t.options.canSupportResource?t.editorInfo.id===i&&t.options.canSupportResource(e):t.editorInfo.id===i));if(t&&t!==Qo.Cs.EXCLUSIVE_ONLY)return{editor:i(this._registeredEditors,t),conflictingDefault:!1};const o=this.findMatchingEditors(e),s=this.getAssociationsForResource(e),n=t===Qo.Cs.EXCLUSIVE_ONLY?Uo.OP.exclusive:Uo.OP.builtin;let r=o.filter((e=>(0,Uo.YV)(e.editorInfo.priority)>=(0,Uo.YV)(n)&&e.editorInfo.id!==Gi.Cr.id));if(0===r.length)return{editor:s[0]&&n!==Uo.OP.exclusive?i(o,s[0].viewType):void 0,conflictingDefault:!1};const a=r[0].editorInfo.priority===Uo.OP.exclusive?r[0].editorInfo.id:s[0]?.viewType||r[0].editorInfo.id;let c=!1;return r=r.filter((e=>e.editorInfo.priority!==Uo.OP.exclusive)),0===s.length&&r.length>1&&(c=!0),{editor:i(o,a),conflictingDefault:c}}async doResolveEditor(e,t,i){let o=e.options;const s=Gi.zK.getCanonicalUri(e,{supportSideBySide:Gi.YX.PRIMARY});if(o&&void 0===o.activation&&(o={...o,activation:o.preserveFocus?Qo.kn.RESTORE:void 0}),(0,Gi.B)(e)){if(!i.editorFactoryObject.createMergeEditorInput)return;const s=await i.editorFactoryObject.createMergeEditorInput(e,t);return{editor:s.editor,options:s.options??o}}if((0,Gi.hG)(e)){if(!i.editorFactoryObject.createDiffEditorInput)return;const s=await i.editorFactoryObject.createDiffEditorInput(e,t);return{editor:s.editor,options:s.options??o}}if((0,Gi.eq)(e))throw new Error("Untyped side by side editor input not supported here.");if((0,Gi.Eg)(e)){if(!i.editorFactoryObject.createUntitledEditorInput)return;const s=await i.editorFactoryObject.createUntitledEditorInput(e,t);return{editor:s.editor,options:s.options??o}}if(void 0===s)throw new Error("Undefined resource on non untitled editor input.");if("function"==typeof i.options?.singlePerResource?i.options.singlePerResource():i.options?.singlePerResource){const e=await this.moveExistingEditorForResource(s,i.editorInfo.id,t);if(e)return{editor:e,options:o}}if(!i.editorFactoryObject.createEditorInput)return;const n=await i.editorFactoryObject.createEditorInput(e,t);return o=n.options??o,{editor:n.editor,options:o}}async moveExistingEditorForResource(e,t,i){const o=this.findExistingEditorsForResource(e,t);if(!o.length)return;const s=o[0];for(const{editor:e,group:t}of o)if(e!==s.editor&&!await t.closeEditor(e))return;return i.id!==s.group.id?(s.group.moveEditor(s.editor,i),s.editor):void 0}findExistingEditorsForResource(e,t){const i=[],o=(0,Y.EB)([...this.editorGroupService.groups]);for(const s of o)for(const o of s.editors)(0,Q.Xy)(o.resource,e)&&o.editorId===t&&i.push({editor:o,group:s});return i}async doHandleConflictingDefaults(t,i,o,s,n){const r=this.findMatchingEditors(t),a=JSON.parse(this.storageService.get(e.conflictingDefaultsStorageID,0,"{}")),c=`*${(0,Q.DZ)(t)}`,d=()=>{a[c]=[],r.forEach((e=>a[c].push(e.editorInfo.id))),this.storageService.store(e.conflictingDefaultsStorageID,JSON.stringify(a),0,1)};if(a[c]&&a[c].find((e=>e===s.editorId)))return;const h=this.notificationService.prompt(F.zb.Warning,(0,l.NC)("editorResolver.conflictingDefaults","There are multiple default editors available for the resource."),[{label:(0,l.NC)("editorResolver.configureDefault","Configure Default"),run:async()=>{const e=await this.doPickEditor(o,!0);if(!e)return;o.options=e;const t=await this.resolveEditor(o,n);1!==t&&2!==t&&n.replaceEditors([{editor:s,replacement:t.editor,options:t.options??e}])}},{label:(0,l.NC)("editorResolver.keepDefault","Keep {0}",i),run:d}]).onDidClose((()=>{d(),h.dispose()}))}mapEditorsToQuickPickEntry(t,i){const o=(0,Y.Xh)(this.editorGroupService.activeGroup.findEditors(t));let s=t.scheme===mo.lg.untitled?this._registeredEditors.filter((e=>e.editorInfo.priority!==Uo.OP.exclusive)):this.findMatchingEditors(t);s=(0,Y.EB)(s,(e=>e.editorInfo.id));const n=this.getAssociationsForResource(t)[0]?.viewType;s=s.sort(((e,t)=>e.editorInfo.id===Gi.Cr.id?-1:t.editorInfo.id===Gi.Cr.id?1:(0,Uo.YV)(t.editorInfo.priority)-(0,Uo.YV)(e.editorInfo.priority)));const r=[],a=(0,l.NC)("promptOpenWith.currentlyActive","Active"),c=(0,l.NC)("promptOpenWith.currentDefault","Default"),d=(0,l.NC)("promptOpenWith.currentDefaultAndActive","Active and Default");let h=n;if(!h&&s.length>2&&s[1]?.editorInfo.priority!==Uo.OP.option&&(h=s[1]?.editorInfo.id),h||(h=Gi.Cr.id),s.forEach((e=>{const t=o?.editorId??Gi.Cr.id,i=!!o&&e.editorInfo.id===t,s=e.editorInfo.id===h,n={id:e.editorInfo.id,label:e.editorInfo.label,description:i&&s?d:i?a:s?c:void 0,detail:e.editorInfo.detail??e.editorInfo.priority};r.push(n)})),!i&&""!==(0,Q.DZ)(t)){const i={type:"separator"};r.push(i);const o={id:e.configureDefaultID,label:(0,l.NC)("promptOpenWith.configureDefault","Configure default editor for '{0}'...",`*${(0,Q.DZ)(t)}`)};r.push(o)}return r}async doPickEditor(t,i){let o=Gi.zK.getOriginalUri(t,{supportSideBySide:Gi.YX.PRIMARY});void 0===o&&(o=J.ov.from({scheme:mo.lg.untitled}));const s=this.mapEditorsToQuickPickEntry(o,i),n=this.quickInputService.createQuickPick(),r=i?(0,l.NC)("promptOpenWith.updateDefaultPlaceHolder","Select new default editor for '{0}'",`*${(0,Q.DZ)(o)}`):(0,l.NC)("promptOpenWith.placeHolder","Select editor for '{0}'",(0,Q.EZ)(o));n.placeholder=r,n.canAcceptInBackground=!0,n.items=s;const a=n.items.find((e=>"item"===e.type));a&&(n.selectedItems=[a]);const c=await new Promise((e=>{n.onDidAccept((t=>{let s;1===n.selectedItems.length&&(s={item:n.selectedItems[0],keyMods:n.keyMods,openInBackground:t.inBackground}),o&&i&&s?.item.id&&this.updateUserAssociations(`*${(0,Q.DZ)(o)}`,s.item.id),e(s)})),n.onDidHide((()=>e(void 0))),n.onDidTriggerItemButton((t=>{e({item:t.item,openInBackground:!1}),o&&t.item&&t.item.id&&this.updateUserAssociations(`*${(0,Q.DZ)(o)}`,t.item.id)})),n.show()}));if(n.dispose(),c)return c.item.id===e.configureDefaultID?this.doPickEditor(t,!0):{...t.options,override:c.item.id,preserveFocus:c.openInBackground||t.options?.preserveFocus}}sendEditorResolutionTelemetry(e){e.editorId&&this.telemetryService.publicLog2("override.viewType",{viewType:e.editorId})}cacheEditors(){const t=new Set;for(const[e,i]of this._flattenedEditors)i.find((e=>e.editorInfo.priority!==Uo.OP.option&&e.editorInfo.id!==Gi.Cr.id))&&(So._U(e)?t.add(`${e.pattern}`):t.add(e));const i=this.getAllUserAssociations();for(const e of i)e.filenamePattern&&t.add(e.filenamePattern);this.storageService.store(e.cacheStorageID,JSON.stringify(Array.from(t)),0,1)}resourceMatchesCache(e){if(!this.cache)return!1;for(const t of this.cache)if((0,Uo.M9)(t,e))return!0;return!1}};xd=(0,o.g)([(0,o.f)(0,Po.Qw),(0,o.f)(1,c.TG),(0,o.f)(2,Ee.Ui),(0,o.f)(3,pt.eJ),(0,o.f)(4,F.lT),(0,o.f)(5,j.bU),(0,o.f)(6,R.Uy),(0,o.f)(7,z.QS),(0,o.f)(8,Z.VZ)],xd);var kd=i(44995),Dd=i(68118),Ad=i(86094);(0,d.Z)('.monaco-workbench .part.statusbar{box-sizing:border-box;cursor:default;display:flex;font-size:12px;height:22px;overflow:hidden;width:100%}.monaco-workbench:not(.reduce-motion) .part.statusbar{transition:background-color .15s ease-out}.monaco-workbench .part.statusbar.status-border-top:after{background-color:var(--status-border-top-color);content:"";height:1px;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:5}.monaco-workbench .part.statusbar>.left-items,.monaco-workbench .part.statusbar>.right-items{display:flex}.monaco-workbench .part.statusbar>.right-items{flex-direction:row-reverse;flex-wrap:wrap}.monaco-workbench .part.statusbar>.left-items{flex-grow:1}.monaco-workbench .part.statusbar>.items-container>.statusbar-item{display:inline-block;font-variant-numeric:tabular-nums;height:100%;line-height:22px;max-width:40vw;vertical-align:top}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak{position:relative}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container{height:5px;left:calc(50% - 5px);position:absolute;top:-5px;width:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container:before{border-bottom-style:solid;border-bottom-width:5px;border-left:5px solid transparent;border-right:5px solid transparent;content:"";position:fixed}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{margin-left:3px;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label{margin-left:0;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{margin-left:3px;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.left.first-visible-item{padding-left:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.right.last-visible-item{margin-right:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.left.first-visible-item,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.right.last-visible-item{padding-left:0;padding-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color>.statusbar-item-label{margin-left:0;margin-right:0;padding-left:10px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.has-background-color>.statusbar-item-label{padding-left:3px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right.has-background-color>.statusbar-item-label{padding-left:10px;padding-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{align-items:center;cursor:pointer;display:flex;height:100%;outline-width:0;overflow:hidden;padding:0 5px;text-overflow:ellipsis;white-space:pre}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{padding:0 3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a:hover:not(.disabled){text-decoration:none}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a.disabled{cursor:default}.monaco-workbench .part.statusbar>.items-container>.statusbar-item span.codicon{color:inherit;font-size:14px;text-align:center}.monaco-workbench .part.statusbar>.items-container>.statusbar-item .status-bar-info{background-color:var(--vscode-statusBarItem-prominentBackground);color:var(--vscode-statusBarItem-prominentForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a.status-bar-info:hover:not(.disabled){background-color:var(--vscode-statusBarItem-prominentHoverBackground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){outline:1px solid var(--vscode-contrastActiveBorder)!important;outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){background-color:var(--vscode-statusBarItem-activeBackground)!important}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){outline:1px dashed var(--vscode-contrastActiveBorder);outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-hoverBackground)}',{});class Id extends ye.aU{constructor(e,t,i){super(e,t,void 0,!0),this.model=i,this.checked=!i.isHidden(e)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}}class Td extends ye.aU{constructor(e,t,i){super(e,(0,l.NC)("hide","Hide '{0}'",t),void 0,!0),this.model=i}async run(){this.model.hide(this.id)}}ut.W.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:200,primary:15,secondary:[16],when:L.RP,handler:e=>{e.get(jc.iq).focusPreviousEntry()}}),ut.W.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:200,primary:17,secondary:[18],when:L.RP,handler:e=>{e.get(jc.iq).focusNextEntry()}}),ut.W.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:200,primary:14,when:L.RP,handler:e=>{const t=e.get(jc.iq);t.focus(!1),t.focusNextEntry()}}),ut.W.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:200,primary:13,when:L.RP,handler:e=>{const t=e.get(jc.iq);t.focus(!1),t.focusPreviousEntry()}}),ut.W.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:200,primary:9,when:L.RP,handler:e=>{const t=e.get(jc.iq),i=e.get(oi.AR);t.isEntryFocused()?t.focus(!1):i.activeEditorPane&&i.activeEditorPane.focus()}});class Vd extends te.Ke{constructor(){super({id:"workbench.action.focusStatusBar",title:{value:(0,l.NC)("focusStatusBar","Focus Status Bar"),original:"Focus Status Bar"},category:ie.R.View,f1:!0})}async run(e){e.get(V.ze).focusPart("workbench.parts.statusbar")}}(0,te.r1)(Vd);class Ld extends p.JT{static{this.HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden"}get entries(){return this._entries.slice(0)}get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}constructor(e){super(),this.storageService=e,this._onDidChangeEntryVisibility=this._register(new g.Q5),this.onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event,this._entries=[],this.hidden=new Set,this.restoreState(),this.registerListeners()}restoreState(){const e=this.storageService.get(Ld.HIDDEN_ENTRIES_KEY,0);if(e)try{const t=JSON.parse(e);this.hidden=new Set(t)}catch(e){}}registerListeners(){this._register(this.storageService.onDidChangeValue((e=>this.onDidStorageValueChange(e))))}onDidStorageValueChange(e){if(e.key===Ld.HIDDEN_ENTRIES_KEY&&0===e.scope){const e=new Set(this.hidden);this.hidden.clear(),this.restoreState();const t=new Set;for(const i of e)this.hidden.has(i)||t.add(i);for(const i of this.hidden)e.has(i)||t.add(i);if(t.size>0)for(const e of this._entries)t.has(e.id)&&(this.updateVisibility(e.id,!0),t.delete(e.id))}}add(e){this._entries.push(e),this.updateVisibility(e,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(e){const t=this._entries.indexOf(e);t>=0&&(this._entries.splice(t,1),this._entries.some((t=>(0,jc.iV)(t.priority.primary)&&t.priority.primary.id===e.id))&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(e){return this.hidden.has(e)}hide(e){this.hidden.has(e)||(this.hidden.add(e),this.updateVisibility(e,!0),this.saveState())}show(e){this.hidden.has(e)&&(this.hidden.delete(e),this.updateVisibility(e,!0),this.saveState())}findEntry(e){return this._entries.find((t=>t.container===e))}getEntries(e){return this._entries.filter((t=>t.alignment===e))}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find((e=>(0,w.jg)(document.activeElement,e.container)))}focusEntry(e,t){const i=t=>{let i=t,o=i>=0&&i<this._entries.length?this._entries[i]:void 0;for(;o&&this.isHidden(o.id);)i+=e,o=i>=0&&i<this._entries.length?this._entries[i]:void 0;return o},o=this.getFocusedEntry();if(o){const t=i(this._entries.indexOf(o)+e);if(t)return this._lastFocusedEntry=t,void t.labelContainer.focus()}const s=i(t);s&&(this._lastFocusedEntry=s,s.labelContainer.focus())}updateVisibility(e,t){if("string"==typeof e){const i=e;for(const e of this._entries)e.id===i&&this.updateVisibility(e,t)}else{const i=e,o=this.isHidden(i.id);o?(0,w.Cp)(i.container):(0,w.$Z)(i.container),t&&this._onDidChangeEntryVisibility.fire({id:i.id,visible:!o}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(Ld.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),0,0):this.storageService.remove(Ld.HIDDEN_ENTRIES_KEY,0)}sort(){const e=new Map,t=new Map;for(let i=0;i<this._entries.length;i++){const o=this._entries[i];if("number"==typeof o.priority.primary)e.set(o,i);else{let e=t.get(o.priority.primary.id);e||(e=[],t.set(o.priority.primary.id,e)),e.push(o)}}const i=Array.from(e.keys());let o;if(i.sort(((t,i)=>t.alignment===i.alignment?t.priority.primary!==i.priority.primary?Number(i.priority.primary)-Number(t.priority.primary):t.priority.secondary!==i.priority.secondary?i.priority.secondary-t.priority.secondary:e.get(t)-e.get(i):0===t.alignment?-1:0===i.alignment?1:0)),t.size>0){o=[];for(const e of i){const i=t.get(e.id);i&&o.push(...i.filter((e=>(0,jc.iV)(e.priority.primary)&&0===e.priority.primary.alignment))),o.push(e),i&&o.push(...i.filter((e=>(0,jc.iV)(e.priority.primary)&&1===e.priority.primary.alignment))),t.delete(e.id)}for(const[,e]of t)o.push(...e)}else o=i;this._entries=o}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(0)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(1))}doMarkFirstLastVisibleStatusbarItem(e){let t,i;for(const o of e)o.container.classList.remove("first-visible-item","last-visible-item"),!this.isHidden(o.id)&&(t||(t=o),i=o);t?.container.classList.add("first-visible-item"),i?.container.classList.add("last-visible-item")}}var Rd=i(19882),Od=i(96518);let Nd=class extends p.JT{get name(){return(0,y.cW)(this.entry).name}get hasCommand(){return void 0!==this.entry?.command}constructor(e,t,i,o,s,n,r){super(),this.container=e,this.hoverDelegate=i,this.commandService=o,this.notificationService=s,this.telemetryService=n,this.themeService=r,this.entry=void 0,this.foregroundListener=this._register(new p.XK),this.backgroundListener=this._register(new p.XK),this.commandMouseListener=this._register(new p.XK),this.commandTouchListener=this._register(new p.XK),this.commandKeyboardListener=this._register(new p.XK),this.hover=void 0,this.labelContainer=document.createElement("a"),this.labelContainer.tabIndex=-1,this.labelContainer.setAttribute("role","button"),this.labelContainer.className="statusbar-item-label",this._register(U.o.addTarget(this.labelContainer)),this.label=new Md(this.labelContainer),this.container.appendChild(this.labelContainer),this.beakContainer=document.createElement("div"),this.beakContainer.className="status-bar-item-beak-container",this.container.appendChild(this.beakContainer),this.update(t)}update(e){if(this.label.showProgress=e.showProgress??!1,this.entry&&e.text===this.entry.text||(this.label.text=e.text,e.text?(0,w.$Z)(this.labelContainer):(0,w.Cp)(this.labelContainer)),this.entry&&e.ariaLabel===this.entry.ariaLabel||(this.container.setAttribute("aria-label",e.ariaLabel),this.labelContainer.setAttribute("aria-label",e.ariaLabel)),this.entry&&e.role===this.entry.role||this.labelContainer.setAttribute("role",e.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,e)){const t=(0,jt.Fr)(e.tooltip)?{markdown:e.tooltip,markdownNotSupportedFallback:void 0}:e.tooltip;this.hover?this.hover.update(t):this.hover=this._register((0,La.g)(this.hoverDelegate,this.container,t))}if(!this.entry||e.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();const t=e.command;t&&(t!==jc.bB||this.hover)?(this.commandMouseListener.value=(0,w.nm)(this.labelContainer,w.tw.CLICK,(()=>this.executeCommand(t))),this.commandTouchListener.value=(0,w.nm)(this.labelContainer,U.t.Tap,(()=>this.executeCommand(t))),this.commandKeyboardListener.value=(0,w.nm)(this.labelContainer,w.tw.KEY_DOWN,(e=>{const i=new we.y1(e);(i.equals(10)||i.equals(3))&&(w.zB.stop(e),this.executeCommand(t))})),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}this.entry&&e.showBeak===this.entry.showBeak||(e.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak")),this.entry&&e.color===this.entry.color||this.applyColor(this.labelContainer,e.color),this.entry&&e.backgroundColor===this.entry.backgroundColor||(this.container.classList.toggle("has-background-color",!!e.backgroundColor),this.applyColor(this.container,e.backgroundColor,!0)),this.entry=e}isEqualTooltip({tooltip:e},{tooltip:t}){return void 0===e?void 0===t:(0,jt.Fr)(e)?(0,jt.Fr)(t)&&(0,jt.g_)(e,t):e===t}async executeCommand(e){if(e===jc.bB)this.hover?.show(!0);else{const t="string"==typeof e?e:e.id,i="string"==typeof e?[]:e.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:t,from:"status bar"});try{await this.commandService.executeCommand(t,...i)}catch(e){this.notificationService.error((0,ns.yJ)(e))}}}applyColor(e,t,i){let o;if(i?this.backgroundListener.clear():this.foregroundListener.clear(),t)if((0,Od.I)(t)){o=this.themeService.getColorTheme().getColor(t.id)?.toString();const s=this.themeService.onDidColorThemeChange((o=>{const s=o.getColor(t.id)?.toString();i?e.style.backgroundColor=s??"":e.style.color=s??""}));i?this.backgroundListener.value=s:this.foregroundListener.value=s}else o=t;i?e.style.backgroundColor=o??"":e.style.color=o??""}};Nd=(0,o.g)([(0,o.f)(3,ht.H),(0,o.f)(4,F.lT),(0,o.f)(5,j.bU),(0,o.f)(6,M.XE)],Nd);class Md extends Rd.C{constructor(e){super(e),this.container=e,this.progressCodicon=(0,Kc.h)(Lt.cW),this.currentText="",this.currentShowProgress=!1}set showProgress(e){this.currentShowProgress!==e&&(this.currentShowProgress=e,this.progressCodicon=(0,Kc.h)("loading"===e?Lt.Tk:Lt.cW),this.text=this.currentText)}set text(e){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(const e of Array.from(this.container.childNodes))e!==this.progressCodicon&&e.remove();let t=e??"";t&&(t=` ${t}`),(0,w.R3)(this.container,...(0,Kc.T)(t))}else super.text=e}}let Pd=class extends C{constructor(e,t,i,o,s,n,r,a,c){super("workbench.parts.statusbar",{hasTitle:!1},t,o,s),this.instantiationService=e,this.contextService=i,this.storageService=o,this.contextMenuService=n,this.contextKeyService=r,this.hoverService=a,this.configurationService=c,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=22,this.maximumHeight=22,this.pendingEntries=[],this.viewModel=this._register(new Ld(this.storageService)),this.onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility,this.hoverDelegate=new class{get delay(){return Date.now()-this.lastHoverHideTime<200?0:this.configurationService.getValue("workbench.hover.delay")}constructor(e,t){this.configurationService=e,this.hoverService=t,this.lastHoverHideTime=0,this.placement="element"}showHover(e,t){return this.hoverService.showHover({...e,hideOnKeyDown:!0},t)}onDidHideHover(){this.lastHoverHideTime=Date.now()}}(this.configurationService,this.hoverService),this.compactEntriesDisposable=this._register(new p.XK),this.styleOverrides=new Set,this.registerListeners()}registerListeners(){this._register(this.onDidChangeEntryVisibility((()=>this.updateCompactEntries()))),this._register(this.contextService.onDidChangeWorkbenchState((()=>this.updateStyles())))}addEntry(e,t,i,o=0){let s;return s=(0,jc.Qj)(o)?o:{primary:o,secondary:(0,Rt.vp)(t)},this.element?this.doAddEntry(e,t,i,s):this.doAddPendingEntry(e,t,i,s)}doAddPendingEntry(e,t,i,o){const s={entry:e,id:t,alignment:i,priority:o};this.pendingEntries.push(s);const n={update:e=>{s.accessor?s.accessor.update(e):s.entry=e},dispose:()=>{s.accessor?s.accessor.dispose():this.pendingEntries=this.pendingEntries.filter((e=>e!==s))}};return n}doAddEntry(e,t,i,o){const s=this.doCreateStatusItem(t,i,...(0,Y.kX)([e.showBeak?"has-beak":void 0])),n=this.instantiationService.createInstance(Nd,s,e,this.hoverDelegate),r=new class{constructor(){this.id=t,this.alignment=i,this.priority=o,this.container=s,this.labelContainer=n.labelContainer}get name(){return n.name}get hasCommand(){return n.hasCommand}},{needsFullRefresh:a}=this.doAddOrRemoveModelEntry(r,!0);return a?this.appendStatusbarEntries():this.appendStatusbarEntry(r),{update:e=>{n.update(e)},dispose:()=>{const{needsFullRefresh:e}=this.doAddOrRemoveModelEntry(r,!1);e?this.appendStatusbarEntries():s.remove(),(0,p.B9)(n)}}}doCreateStatusItem(e,t,...i){const o=document.createElement("div");return o.id=e,o.classList.add("statusbar-item"),i&&o.classList.add(...i),1===t?o.classList.add("right"):o.classList.add("left"),o}doAddOrRemoveModelEntry(e,t){const i=this.viewModel.entries;t?this.viewModel.add(e):this.viewModel.remove(e);const o=this.viewModel.entries;return t?i.splice(o.indexOf(e),0,e):i.splice(i.indexOf(e),1),{needsFullRefresh:!(0,Y.fS)(i,o)}}isEntryVisible(e){return!this.viewModel.isHidden(e)}updateEntryVisibility(e,t){t?this.viewModel.show(e):this.viewModel.hide(e)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(e=!0){this.getContainer()?.focus();const t=this.viewModel.lastFocusedEntry;e&&t&&setTimeout((()=>t.labelContainer.focus()),0)}createContentArea(e){this.element=e;const t=this.contextKeyService.createScoped(this.element);return L.RP.bindTo(t).set(!0),this.leftItemsContainer=document.createElement("div"),this.leftItemsContainer.classList.add("left-items","items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=document.createElement("div"),this.rightItemsContainer.classList.add("right-items","items-container"),this.element.appendChild(this.rightItemsContainer),this._register((0,w.nm)(e,w.tw.CONTEXT_MENU,(e=>this.showContextMenu(e)))),this._register(U.o.addTarget(e)),this._register((0,w.nm)(e,U.t.Contextmenu,(e=>this.showContextMenu(e)))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){const e=this.pendingEntries.shift();e&&(e.accessor=this.addEntry(e.entry,e.id,e.alignment,e.priority.primary))}}appendStatusbarEntries(){const e=(0,y.cW)(this.leftItemsContainer),t=(0,y.cW)(this.rightItemsContainer);(0,w.PO)(e),(0,w.PO)(t);for(const i of[...this.viewModel.getEntries(0),...this.viewModel.getEntries(1).reverse()])(0===i.alignment?e:t).appendChild(i.container);this.updateCompactEntries()}appendStatusbarEntry(e){const t=this.viewModel.getEntries(e.alignment);1===e.alignment&&t.reverse();const i=(0,y.cW)(0===e.alignment?this.leftItemsContainer:this.rightItemsContainer),o=t.indexOf(e);o+1===t.length?i.appendChild(e.container):i.insertBefore(e.container,t[o+1].container),this.updateCompactEntries()}updateCompactEntries(){const e=this.viewModel.entries,t=new Map;for(const i of e)this.viewModel.isHidden(i.id)||t.set(i.id,i),i.container.classList.remove("compact-left","compact-right");const i=new Map;for(const e of t.values())if((0,jc.iV)(e.priority.primary)&&e.priority.primary.compact){const o=e.priority.primary.id,s=t.get(o);if(!s)continue;let n=i.get(o);n?n.add(e):(n=new Set([e,s]),i.set(o,n)),0===e.priority.primary.alignment?(s.container.classList.add("compact-left"),e.container.classList.add("compact-right")):(s.container.classList.add("compact-right"),e.container.classList.add("compact-left"))}const o=this.getColor(B.b$),s=this.getColor(B.YR);if(this.compactEntriesDisposable.value=new p.SL,o&&s&&!(0,Jo.c3)(this.theme.type))for(const[,e]of i)for(const t of e)t.hasCommand&&(this.compactEntriesDisposable.value.add((0,w.nm)(t.labelContainer,w.tw.MOUSE_OVER,(()=>{e.forEach((e=>e.labelContainer.style.backgroundColor=o)),t.labelContainer.style.backgroundColor=s}))),this.compactEntriesDisposable.value.add((0,w.nm)(t.labelContainer,w.tw.MOUSE_OUT,(()=>{e.forEach((e=>e.labelContainer.style.backgroundColor=""))}))))}showContextMenu(e){w.zB.stop(e,!0);const t=new W.nV(e);let i;this.contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>(i=this.getContextMenuActions(t),i),onHide:()=>{i&&(0,p.ex)(i)}})}getContextMenuActions(e){const t=[];t.push((0,ye.xw)({id:Fe.FY.ID,label:(0,l.NC)("hideStatusBar","Hide Status Bar"),run:()=>this.instantiationService.invokeFunction((e=>(new Fe.FY).run(e)))})),t.push(new ye.Z0);const i=new Set;for(const e of this.viewModel.entries)i.has(e.id)||(t.push(new Id(e.id,e.name,this.viewModel)),i.add(e.id));let o;for(let t=e.target;t;t=t.parentElement){const e=this.viewModel.findEntry(t);if(e){o=e;break}}return o&&(t.push(new ye.Z0),t.push(new Td(o.id,o.name,this.viewModel))),t}updateStyles(){super.updateStyles();const e=(0,y.cW)(this.getContainer()),t=[...this.styleOverrides].sort(((e,t)=>e.priority-t.priority))[0],i=this.getColor(t?.background??(1!==this.contextService.getWorkbenchState()?B.$B:B.$))||"";e.style.backgroundColor=i;const o=this.getColor(t?.foreground??(1!==this.contextService.getWorkbenchState()?B.he:B.w0))||"";e.style.color=o;const s=this.getColor(B.pb),n=this.getColor(t?.border??(1!==this.contextService.getWorkbenchState()?B.g4:B.fE))||this.getColor(P.lRK);n?(e.classList.add("status-border-top"),e.style.setProperty("--status-border-top-color",n)):(e.classList.remove("status-border-top"),e.style.removeProperty("--status-border-top-color"));const r=this.getColor(B.cf);this.styleElement||(this.styleElement=(0,w.dS)(e)),this.styleElement.textContent=`\n\n\t\t\t\t/* Status bar focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar:focus {\n\t\t\t\t\toutline-color: ${r};\n\t\t\t\t}\n\n\t\t\t\t/* Status bar item focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible:not(.disabled) {\n\t\t\t\t\toutline: 1px solid ${this.getColor(P.xL1)??s};\n\t\t\t\t\toutline-offset: ${n?"-2px":"-1px"};\n\t\t\t\t}\n\n\t\t\t\t/* Notification Beak */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {\n\t\t\t\t\tborder-bottom-color: ${i};\n\t\t\t\t}\n\t\t\t`}layout(e,t,i,o){super.layout(e,t,i,o),super.layoutContents(e,t)}overrideStyle(e){return this.styleOverrides.add(e),this.updateStyles(),(0,p.OF)((()=>{this.styleOverrides.delete(e),this.updateStyles()}))}toJSON(){return{type:"workbench.parts.statusbar"}}};Pd=(0,o.g)([(0,o.f)(0,c.TG),(0,o.f)(1,M.XE),(0,o.f)(2,gt.ec),(0,o.f)(3,R.Uy),(0,o.f)(4,V.ze),(0,o.f)(5,O.i),(0,o.f)(6,H.i6),(0,o.f)(7,ke.B),(0,o.f)(8,Ee.Ui)],Pd);var Bd=i(39582),Fd=i(43202),Wd=i(82524);let Hd=class e extends p.JT{static{this.MOUSE_NAVIGATION_SETTING="workbench.editor.mouseBackForwardToNavigate"}static{this.NAVIGATION_SCOPE_SETTING="workbench.editor.navigationScope"}constructor(e,t,i,o,s,n,r,a,c,d){super(),this.editorService=e,this.editorGroupService=t,this.contextService=i,this.storageService=o,this.configurationService=s,this.fileService=n,this.workspacesService=r,this.instantiationService=a,this.layoutService=c,this.contextKeyService=d,this.activeEditorListeners=this._register(new p.SL),this.lastActiveEditor=void 0,this.editorHelper=this.instantiationService.createInstance($d),this.canNavigateBackContextKey=new H.uy("canNavigateBack",!1,(0,l.NC)("canNavigateBack","Whether it is possible to navigate back in editor history")).bindTo(this.contextKeyService),this.canNavigateForwardContextKey=new H.uy("canNavigateForward",!1,(0,l.NC)("canNavigateForward","Whether it is possible to navigate forward in editor history")).bindTo(this.contextKeyService),this.canNavigateBackInNavigationsContextKey=new H.uy("canNavigateBackInNavigationLocations",!1,(0,l.NC)("canNavigateBackInNavigationLocations","Whether it is possible to navigate back in editor navigation locations history")).bindTo(this.contextKeyService),this.canNavigateForwardInNavigationsContextKey=new H.uy("canNavigateForwardInNavigationLocations",!1,(0,l.NC)("canNavigateForwardInNavigationLocations","Whether it is possible to navigate forward in editor navigation locations history")).bindTo(this.contextKeyService),this.canNavigateToLastNavigationLocationContextKey=new H.uy("canNavigateToLastNavigationLocation",!1,(0,l.NC)("canNavigateToLastNavigationLocation","Whether it is possible to navigate to the last editor navigation location")).bindTo(this.contextKeyService),this.canNavigateBackInEditsContextKey=new H.uy("canNavigateBackInEditLocations",!1,(0,l.NC)("canNavigateBackInEditLocations","Whether it is possible to navigate back in editor edit locations history")).bindTo(this.contextKeyService),this.canNavigateForwardInEditsContextKey=new H.uy("canNavigateForwardInEditLocations",!1,(0,l.NC)("canNavigateForwardInEditLocations","Whether it is possible to navigate forward in editor edit locations history")).bindTo(this.contextKeyService),this.canNavigateToLastEditLocationContextKey=new H.uy("canNavigateToLastEditLocation",!1,(0,l.NC)("canNavigateToLastEditLocation","Whether it is possible to navigate to the last editor edit location")).bindTo(this.contextKeyService),this.canReopenClosedEditorContextKey=new H.uy("canReopenClosedEditor",!1,(0,l.NC)("canReopenClosedEditor","Whether it is possible to reopen the last closed editor")).bindTo(this.contextKeyService),this._onDidChangeEditorNavigationStack=this._register(new g.Q5),this.onDidChangeEditorNavigationStack=this._onDidChangeEditorNavigationStack.event,this.defaultScopedEditorNavigationStack=void 0,this.editorGroupScopedNavigationStacks=new Map,this.editorScopedNavigationStacks=new Map,this.editorNavigationScope=0,this.recentlyUsedEditorsStack=void 0,this.recentlyUsedEditorsStackIndex=0,this.recentlyUsedEditorsInGroupStack=void 0,this.recentlyUsedEditorsInGroupStackIndex=0,this.navigatingInRecentlyUsedEditorsStack=!1,this.navigatingInRecentlyUsedEditorsInGroupStack=!1,this.recentlyClosedEditors=[],this.ignoreEditorCloseEvent=!1,this.history=void 0,this.editorHistoryListeners=new Map,this.resourceExcludeMatcher=this._register(new je.Ue((()=>{const e=this._register(this.instantiationService.createInstance(ci.Q,(e=>(0,Wd.$C)(e?this.configurationService.getValue({resource:e}):this.configurationService.getValue())||Object.create(null)),(e=>e.affectsConfiguration(ft.Au)||e.affectsConfiguration(Wd.XG))));return this._register(e.onExpressionChange((()=>this.removeExcludedFromHistory()))),e}))),this.registerListeners(),this.editorService.activeEditorPane&&this.onDidActiveEditorChange()}registerListeners(){this.registerMouseNavigationListener(),this._register(this.editorService.onDidActiveEditorChange((()=>this.onDidActiveEditorChange()))),this._register(this.editorService.onDidOpenEditorFail((e=>this.remove(e.editor)))),this._register(this.editorService.onDidCloseEditor((e=>this.onDidCloseEditor(e)))),this._register(this.editorService.onDidMostRecentlyActiveEditorsChange((()=>this.handleEditorEventInRecentEditorsStack()))),this._register(this.editorGroupService.onDidRemoveGroup((e=>this.onDidRemoveGroup(e)))),this._register(this.fileService.onDidFilesChange((e=>this.onDidFilesChange(e)))),this._register(this.fileService.onDidRunOperation((e=>this.onDidFilesChange(e)))),this._register(this.storageService.onWillSaveState((()=>this.saveState()))),this.registerEditorNavigationScopeChangeListener(),this._register(this.onDidChangeEditorNavigationStack((()=>this.updateContextKeys()))),this._register(this.editorGroupService.onDidChangeActiveGroup((()=>this.updateContextKeys())))}onDidCloseEditor(e){this.handleEditorCloseEventInHistory(e),this.handleEditorCloseEventInReopen(e)}registerMouseNavigationListener(){const t=this._register(new p.SL),i=()=>{t.clear(),this.configurationService.getValue(e.MOUSE_NAVIGATION_SETTING)&&(t.add((0,w.nm)(this.layoutService.container,w.tw.MOUSE_DOWN,(e=>this.onMouseDownOrUp(e,!0)))),t.add((0,w.nm)(this.layoutService.container,w.tw.MOUSE_UP,(e=>this.onMouseDownOrUp(e,!1)))))};this._register(this.configurationService.onDidChangeConfiguration((t=>{t.affectsConfiguration(e.MOUSE_NAVIGATION_SETTING)&&i()}))),i()}onMouseDownOrUp(e,t){switch(e.button){case 3:w.zB.stop(e),t&&this.goBack();break;case 4:w.zB.stop(e),t&&this.goForward()}}onDidRemoveGroup(e){this.handleEditorGroupRemoveInNavigationStacks(e)}onDidActiveEditorChange(){const e=this.editorGroupService.activeGroup,t=e.activeEditorPane;this.lastActiveEditor&&this.editorHelper.matchesEditorIdentifier(this.lastActiveEditor,t)||(this.lastActiveEditor=t?.input&&t.group?{editor:t.input,groupId:t.group.id}:void 0,this.activeEditorListeners.clear(),this.handleActiveEditorChange(e,t),(0,Gi.fE)(t)&&this.activeEditorListeners.add(t.onDidChangeSelection((i=>this.handleActiveEditorSelectionChangeEvent(e,t,i)))),this.updateContextKeys())}onDidFilesChange(e){e instanceof ft.G9?e.gotDeleted()&&this.remove(e):e.isOperation(1)?this.remove(e):e.isOperation(2)&&e.target.isFile&&this.move(e)}handleActiveEditorChange(e,t){this.handleActiveEditorChangeInHistory(t),this.handleActiveEditorChangeInNavigationStacks(e,t)}handleActiveEditorSelectionChangeEvent(e,t,i){this.handleActiveEditorSelectionChangeInNavigationStacks(e,t,i)}move(e){this.moveInHistory(e),this.moveInEditorNavigationStacks(e)}remove(e){this.removeFromHistory(e),this.removeFromEditorNavigationStacks(e),this.removeFromRecentlyClosedEditors(e),this.removeFromRecentlyOpened(e)}removeFromRecentlyOpened(e){let t;(0,Gi.Xl)(e)?t=Gi.zK.getOriginalUri(e):e instanceof ft.G9||(t=e.resource),t&&this.workspacesService.removeRecentlyOpened([t])}clear(){this.clearRecentlyOpened(),this.clearEditorNavigationStacks(),this.recentlyClosedEditors=[],this.updateContextKeys()}updateContextKeys(){this.contextKeyService.bufferChangeEvents((()=>{const e=this.getStack();this.canNavigateBackContextKey.set(e.canGoBack(0)),this.canNavigateForwardContextKey.set(e.canGoForward(0)),this.canNavigateBackInNavigationsContextKey.set(e.canGoBack(2)),this.canNavigateForwardInNavigationsContextKey.set(e.canGoForward(2)),this.canNavigateToLastNavigationLocationContextKey.set(e.canGoLast(2)),this.canNavigateBackInEditsContextKey.set(e.canGoBack(1)),this.canNavigateForwardInEditsContextKey.set(e.canGoForward(1)),this.canNavigateToLastEditLocationContextKey.set(e.canGoLast(1)),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0)}))}registerEditorNavigationScopeChangeListener(){const t=()=>{this.disposeEditorNavigationStacks();const t=this.configurationService.getValue(e.NAVIGATION_SCOPE_SETTING);this.editorNavigationScope="editorGroup"===t?1:"editor"===t?2:0};this._register(this.configurationService.onDidChangeConfiguration((i=>{i.affectsConfiguration(e.NAVIGATION_SCOPE_SETTING)&&t()}))),t()}getStack(e=this.editorGroupService.activeGroup,t=e.activeEditor){switch(this.editorNavigationScope){case 2:{if(!t)return new Ud;let i=this.editorScopedNavigationStacks.get(e.id);i||(i=new Map,this.editorScopedNavigationStacks.set(e.id,i));let o=i.get(t)?.stack;if(!o){const e=new p.SL;o=e.add(this.instantiationService.createInstance(Gd,2)),e.add(o.onDidChange((()=>this._onDidChangeEditorNavigationStack.fire()))),i.set(t,{stack:o,disposable:e})}return o}case 1:{let t=this.editorGroupScopedNavigationStacks.get(e.id)?.stack;if(!t){const i=new p.SL;t=i.add(this.instantiationService.createInstance(Gd,1)),i.add(t.onDidChange((()=>this._onDidChangeEditorNavigationStack.fire()))),this.editorGroupScopedNavigationStacks.set(e.id,{stack:t,disposable:i})}return t}case 0:return this.defaultScopedEditorNavigationStack||(this.defaultScopedEditorNavigationStack=this._register(this.instantiationService.createInstance(Gd,0)),this._register(this.defaultScopedEditorNavigationStack.onDidChange((()=>this._onDidChangeEditorNavigationStack.fire())))),this.defaultScopedEditorNavigationStack}}goForward(e){return this.getStack().goForward(e)}goBack(e){return this.getStack().goBack(e)}goPrevious(e){return this.getStack().goPrevious(e)}goLast(e){return this.getStack().goLast(e)}handleActiveEditorChangeInNavigationStacks(e,t){this.getStack(e,t?.input).handleActiveEditorChange(t)}handleActiveEditorSelectionChangeInNavigationStacks(e,t,i){this.getStack(e,t.input).handleActiveEditorSelectionChange(t,i)}handleEditorCloseEventInHistory(e){const t=this.editorScopedNavigationStacks.get(e.groupId);if(t){const i=t.get(e.editor);i&&(i.disposable.dispose(),t.delete(e.editor)),0===t.size&&this.editorScopedNavigationStacks.delete(e.groupId)}}handleEditorGroupRemoveInNavigationStacks(e){this.defaultScopedEditorNavigationStack?.remove(e.id);const t=this.editorGroupScopedNavigationStacks.get(e.id);t&&(t.disposable.dispose(),this.editorGroupScopedNavigationStacks.delete(e.id))}clearEditorNavigationStacks(){this.withEachEditorNavigationStack((e=>e.clear()))}removeFromEditorNavigationStacks(e){this.withEachEditorNavigationStack((t=>t.remove(e)))}moveInEditorNavigationStacks(e){this.withEachEditorNavigationStack((t=>t.move(e)))}withEachEditorNavigationStack(e){this.defaultScopedEditorNavigationStack&&e(this.defaultScopedEditorNavigationStack);for(const[,t]of this.editorGroupScopedNavigationStacks)e(t.stack);for(const[,t]of this.editorScopedNavigationStacks)for(const[,i]of t)e(i.stack)}disposeEditorNavigationStacks(){this.defaultScopedEditorNavigationStack?.dispose(),this.defaultScopedEditorNavigationStack=void 0;for(const[,e]of this.editorGroupScopedNavigationStacks)e.disposable.dispose();this.editorGroupScopedNavigationStacks.clear();for(const[,e]of this.editorScopedNavigationStacks)for(const[,t]of e)t.disposable.dispose();this.editorScopedNavigationStacks.clear()}openNextRecentlyUsedEditor(e){const[t,i]=this.ensureRecentlyUsedStack((e=>e-1),e);return this.doNavigateInRecentlyUsedEditorsStack(t[i],e)}openPreviouslyUsedEditor(e){const[t,i]=this.ensureRecentlyUsedStack((e=>e+1),e);return this.doNavigateInRecentlyUsedEditorsStack(t[i],e)}async doNavigateInRecentlyUsedEditorsStack(e,t){if(e){const i="number"!=typeof t||!this.editorGroupService.getGroup(t);i?this.navigatingInRecentlyUsedEditorsStack=!0:this.navigatingInRecentlyUsedEditorsInGroupStack=!0;const o=this.editorGroupService.getGroup(e.groupId)??this.editorGroupService.activeGroup;try{await o.openEditor(e.editor)}finally{i?this.navigatingInRecentlyUsedEditorsStack=!1:this.navigatingInRecentlyUsedEditorsInGroupStack=!1}}}ensureRecentlyUsedStack(e,t){let i,o;const s="number"==typeof t?this.editorGroupService.getGroup(t):void 0;s?(i=this.recentlyUsedEditorsInGroupStack||s.getEditors(0).map((e=>({groupId:s.id,editor:e}))),o=this.recentlyUsedEditorsInGroupStackIndex):(i=this.recentlyUsedEditorsStack||this.editorService.getEditors(0),o=this.recentlyUsedEditorsStackIndex);let n=e(o);return n<0?n=0:n>i.length-1&&(n=i.length-1),s?(this.recentlyUsedEditorsInGroupStack=i,this.recentlyUsedEditorsInGroupStackIndex=n):(this.recentlyUsedEditorsStack=i,this.recentlyUsedEditorsStackIndex=n),[i,n]}handleEditorEventInRecentEditorsStack(){this.navigatingInRecentlyUsedEditorsStack||(this.recentlyUsedEditorsStack=void 0,this.recentlyUsedEditorsStackIndex=0),this.navigatingInRecentlyUsedEditorsInGroupStack||(this.recentlyUsedEditorsInGroupStack=void 0,this.recentlyUsedEditorsInGroupStackIndex=0)}static{this.MAX_RECENTLY_CLOSED_EDITORS=20}handleEditorCloseEventInReopen(t){if(this.ignoreEditorCloseEvent)return;const{editor:i,context:o}=t;if(o===Gi.Bb.REPLACE||o===Gi.Bb.MOVE)return;const s=i.toUntyped();if(!s)return;const n=[],r=Gi.zK.getOriginalUri(i,{supportSideBySide:Gi.YX.BOTH});J.ov.isUri(r)?n.push(r):r&&n.push(...(0,Y.kX)([r.primary,r.secondary])),this.removeFromRecentlyClosedEditors(i),this.recentlyClosedEditors.push({editorId:i.editorId,editor:s,resource:Gi.zK.getOriginalUri(i),associatedResources:n,index:t.index,sticky:t.sticky}),this.recentlyClosedEditors.length>e.MAX_RECENTLY_CLOSED_EDITORS&&this.recentlyClosedEditors.shift(),this.canReopenClosedEditorContextKey.set(!0)}async reopenLastClosedEditor(){const e=this.recentlyClosedEditors.pop();let t;return e&&(t=this.doReopenLastClosedEditor(e)),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0),t}async doReopenLastClosedEditor(e){const t={pinned:!0,sticky:e.sticky,index:e.index,ignoreError:!0};let i;if((e.sticky&&!this.editorGroupService.activeGroup.isSticky(e.index)||!e.sticky&&this.editorGroupService.activeGroup.isSticky(e.index))&&(t.index=void 0),!this.editorGroupService.activeGroup.contains(e.editor)){this.ignoreEditorCloseEvent=!0;try{i=await this.editorService.openEditor({...e.editor,options:{...e.editor.options,...t}})}finally{this.ignoreEditorCloseEvent=!1}}i||((0,Y.Od)(this.recentlyClosedEditors,e),this.reopenLastClosedEditor())}removeFromRecentlyClosedEditors(e){this.recentlyClosedEditors=this.recentlyClosedEditors.filter((t=>!((!(0,Gi.Xl)(e)||t.editorId===e.editorId)&&(t.resource&&this.editorHelper.matchesFile(t.resource,e)||t.associatedResources.some((t=>this.editorHelper.matchesFile(t,e))))))),this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length>0)}static{this.MAX_HISTORY_ITEMS=200}static{this.HISTORY_STORAGE_KEY="history.entries"}handleActiveEditorChangeInHistory(e){const t=e?.input;t&&!t.isDisposed()&&this.includeInHistory(t)&&(this.removeFromHistory(t),this.addToHistory(t))}addToHistory(t,i=!0){this.ensureHistoryLoaded(this.history);const o=this.editorHelper.preferResourceEditorInput(t);o&&(i?this.history.unshift(o):this.history.push(o),this.history.length>e.MAX_HISTORY_ITEMS&&this.editorHelper.clearOnEditorDispose(this.history.pop(),this.editorHistoryListeners),(0,Gi.Xl)(o)&&this.editorHelper.onEditorDispose(o,(()=>this.updateHistoryOnEditorDispose(o)),this.editorHistoryListeners))}updateHistoryOnEditorDispose(e){if((0,Gi.G$)(e)){const t=[],i=e.primary.matches(e.secondary)?[e.primary]:[e.primary,e.secondary];for(const e of i){const i=this.editorHelper.preferResourceEditorInput(e);(0,Gi.BR)(i)&&t.push(i)}this.replaceInHistory(e,...t)}else this.removeFromHistory(e)}includeInHistory(e){return!!(0,Gi.Xl)(e)||!this.resourceExcludeMatcher.value.matches(e.resource)}removeExcludedFromHistory(){this.ensureHistoryLoaded(this.history),this.history=this.history.filter((e=>{const t=this.includeInHistory(e);return t||this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),t}))}moveInHistory(e){e.isOperation(2)&&this.removeFromHistory(e)&&this.addToHistory({resource:e.target.resource})}removeFromHistory(e){let t=!1;return this.ensureHistoryLoaded(this.history),this.history=this.history.filter((i=>{const o=this.editorHelper.matchesEditor(e,i);return o&&(this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),t=!0),!o})),t}replaceInHistory(e,...t){this.ensureHistoryLoaded(this.history);let i=!1;const o=[];for(const s of this.history)this.editorHelper.matchesEditor(e,s)?(this.editorHelper.clearOnEditorDispose(e,this.editorHistoryListeners),i||(o.push(...t),i=!0)):t.some((e=>this.editorHelper.matchesEditor(e,s)))||o.push(s);i||o.push(...t),this.history=o}clearRecentlyOpened(){this.history=[];for(const[,e]of this.editorHistoryListeners)(0,p.B9)(e);this.editorHistoryListeners.clear()}getHistory(){return this.ensureHistoryLoaded(this.history),this.history}ensureHistoryLoaded(e){this.history||(this.history=[],this.editorGroupService.isReady?this.loadHistory():(async()=>{await this.editorGroupService.whenReady,this.loadHistory()})())}loadHistory(){this.history=[];const e=this.loadHistoryFromStorage(),t=[...this.editorService.getEditors(0)].reverse(),i=new Set;for(const{editor:e}of t)this.includeInHistory(e)&&(this.addToHistory(e),e.resource&&i.add(`${e.resource.toString()}/${e.editorId}`));for(const t of e)i.has(`${t.resource.toString()}/${t.options?.override}`)||this.addToHistory(t,!1)}loadHistoryFromStorage(){const t=[],i=this.storageService.get(e.HISTORY_STORAGE_KEY,1);if(i)try{const e=JSON.parse(i);for(const i of e)if(i.editor&&i.editor.resource)try{t.push({...i.editor,resource:"string"==typeof i.editor.resource?J.ov.parse(i.editor.resource):J.ov.from(i.editor.resource)})}catch(e){(0,m.dL)(e)}}catch(e){(0,m.dL)(e)}return t}saveState(){if(!this.history)return;const t=[];for(const e of this.history)!(0,Gi.Xl)(e)&&(0,Gi.BR)(e)&&t.push({editor:{...e,resource:e.resource.toString()}});this.storageService.store(e.HISTORY_STORAGE_KEY,JSON.stringify(t),1,1)}getLastActiveWorkspaceRoot(e){const t=this.contextService.getWorkspace().folders;if(0!==t.length){if(1===t.length){const i=t[0].uri;return e&&i.scheme!==e?void 0:i}for(const t of this.getHistory()){if((0,Gi.Xl)(t))continue;if(e&&t.resource.scheme!==e)continue;const i=this.contextService.getWorkspaceFolder(t.resource);if(i)return i.uri}for(const i of t){const t=i.uri;if(!e||t.scheme===e)return t}}}getLastActiveFile(e){for(const t of this.getHistory()){let i;if(i=(0,Gi.Xl)(t)?Gi.zK.getOriginalUri(t,{filterByScheme:e}):t.resource,i?.scheme===e)return i}}};Hd=(0,o.g)([(0,o.f)(0,oi.AR),(0,o.f)(1,Po.Qw),(0,o.f)(2,gt.ec),(0,o.f)(3,R.Uy),(0,o.f)(4,Ee.Ui),(0,o.f)(5,ft.sn),(0,o.f)(6,$e.Dc),(0,o.f)(7,c.TG),(0,o.f)(8,V.ze),(0,o.f)(9,H.i6)],Hd);class zd{constructor(e,t,i){this.editorIdentifier=e,this.selection=t,this.reason=i}justifiesNewNavigationEntry(e){if(this.editorIdentifier.groupId!==e.editorIdentifier.groupId)return!0;if(!this.editorIdentifier.editor.matches(e.editorIdentifier.editor))return!0;if(!this.selection||!e.selection)return!0;const t=this.selection.compare(e.selection);return 2===t&&(4===e.reason||5===e.reason)||3===t}}let Gd=class extends p.JT{constructor(e,t){super(),this.scope=e,this.instantiationService=t,this.selectionsStack=this._register(this.instantiationService.createInstance(Kd,0,this.scope)),this.editsStack=this._register(this.instantiationService.createInstance(Kd,1,this.scope)),this.navigationsStack=this._register(this.instantiationService.createInstance(Kd,2,this.scope)),this.stacks=[this.selectionsStack,this.editsStack,this.navigationsStack],this.onDidChange=g.ju.any(this.selectionsStack.onDidChange,this.editsStack.onDidChange,this.navigationsStack.onDidChange)}canGoForward(e){return this.getStack(e).canGoForward()}goForward(e){return this.getStack(e).goForward()}canGoBack(e){return this.getStack(e).canGoBack()}goBack(e){return this.getStack(e).goBack()}goPrevious(e){return this.getStack(e).goPrevious()}canGoLast(e){return this.getStack(e).canGoLast()}goLast(e){return this.getStack(e).goLast()}getStack(e=0){switch(e){case 0:return this.selectionsStack;case 1:return this.editsStack;case 2:return this.navigationsStack}}handleActiveEditorChange(e){this.selectionsStack.notifyNavigation(e)}handleActiveEditorSelectionChange(e,t){const i=this.selectionsStack.current;this.selectionsStack.notifyNavigation(e,t),3===t.reason?this.editsStack.notifyNavigation(e,t):4!==t.reason&&5!==t.reason||this.selectionsStack.isNavigating()||(5!==t.reason||this.navigationsStack.isNavigating()||i&&this.navigationsStack.addOrReplace(i.groupId,i.editor,i.selection),this.navigationsStack.notifyNavigation(e,t))}clear(){for(const e of this.stacks)e.clear()}remove(e){for(const t of this.stacks)t.remove(e)}move(e){for(const t of this.stacks)t.move(e)}};Gd=(0,o.g)([(0,o.f)(1,c.TG)],Gd);class Ud{constructor(){this.onDidChange=g.ju.None}canGoForward(){return!1}async goForward(){}canGoBack(){return!1}async goBack(){}async goPrevious(){}canGoLast(){return!1}async goLast(){}handleActiveEditorChange(){}handleActiveEditorSelectionChange(){}clear(){}remove(){}move(){}dispose(){}}let Kd=class e extends p.JT{static{this.MAX_STACK_SIZE=50}get current(){return this.stack[this.index]}set current(e){e&&(this.stack[this.index]=e)}constructor(e,t,i,o,s,n){super(),this.filter=e,this.scope=t,this.instantiationService=i,this.editorService=o,this.editorGroupService=s,this.logService=n,this._onDidChange=this._register(new g.Q5),this.onDidChange=this._onDidChange.event,this.mapEditorToDisposable=new Map,this.mapGroupToDisposable=new Map,this.editorHelper=this.instantiationService.createInstance($d),this.stack=[],this.index=-1,this.previousIndex=-1,this.navigating=!1,this.currentSelectionState=void 0,this.registerListeners()}registerListeners(){this._register(this.onDidChange((()=>this.traceStack()))),this._register(this.logService.onDidChangeLogLevel((()=>this.traceStack())))}traceStack(){if(this.logService.getLevel()!==Z.in.Trace)return;const e=[];for(const t of this.stack)"function"==typeof t.selection?.log?e.push(`- group: ${t.groupId}, editor: ${t.editor.resource?.toString()}, selection: ${t.selection.log()}`):e.push(`- group: ${t.groupId}, editor: ${t.editor.resource?.toString()}, selection: <none>`);0===e.length?this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}: <empty>`):this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}\n${e.join("\n")}\n\t\t\t`)}trace(e,t=null,i){if(this.logService.getLevel()!==Z.in.Trace)return;let o,s;switch(this.filter){case 0:o="global";break;case 1:o="edits";break;case 2:o="navigation"}switch(this.scope){case 0:s="default";break;case 1:s="editorGroup";break;case 2:s="editor"}null!==t?this.logService.trace(`[History stack ${o}-${s}]: ${e} (editor: ${t?.resource?.toString()}, event: ${this.traceEvent(i)})`):this.logService.trace(`[History stack ${o}-${s}]: ${e}`)}traceEvent(e){if(!e)return"<none>";switch(e.reason){case 3:return"edit";case 4:return"navigation";case 5:return"jump";case 1:return"programmatic";case 2:return"user"}}registerGroupListeners(e){if(!this.mapGroupToDisposable.has(e)){const t=this.editorGroupService.getGroup(e);t&&this.mapGroupToDisposable.set(e,t.onWillMoveEditor((e=>this.onWillMoveEditor(e))))}}onWillMoveEditor(e){if(this.trace("onWillMoveEditor()",e.editor),1!==this.scope)for(const t of this.stack)t.groupId===e.groupId&&this.editorHelper.matchesEditor(e.editor,t.editor)&&(t.groupId=e.target)}notifyNavigation(e,t){this.trace("notifyNavigation()",e?.input,t);const i=(0,Gi.fE)(e),o=e?.group&&e.input&&!e.input.isDisposed();this.navigating?(this.trace("notifyNavigation() ignoring (navigating)",e?.input,t),i&&o?(this.trace("notifyNavigation() updating current selection state",e?.input,t),this.currentSelectionState=new zd({groupId:e.group.id,editor:e.input},e.getSelection(),t?.reason)):(this.trace("notifyNavigation() dropping current selection state",e?.input,t),this.currentSelectionState=void 0)):(this.trace("notifyNavigation() not ignoring",e?.input,t),i&&o?this.onSelectionAwareEditorNavigation(e.group.id,e.input,e.getSelection(),t):(this.currentSelectionState=void 0,o&&this.onNonSelectionAwareEditorNavigation(e.group.id,e.input)))}onSelectionAwareEditorNavigation(e,t,i,o){if(this.current?.groupId===e&&!i&&this.editorHelper.matchesEditor(this.current.editor,t))return;this.trace("onSelectionAwareEditorNavigation()",t,o);const s=new zd({groupId:e,editor:t},i,o?.reason);!this.currentSelectionState||this.currentSelectionState.justifiesNewNavigationEntry(s)?this.doAdd(e,t,s.selection):this.doReplace(e,t,s.selection),this.currentSelectionState=s}onNonSelectionAwareEditorNavigation(e,t){this.current?.groupId===e&&this.editorHelper.matchesEditor(this.current.editor,t)||(this.trace("onNonSelectionAwareEditorNavigation()",t),this.doAdd(e,t))}doAdd(e,t,i){this.navigating||this.addOrReplace(e,t,i)}doReplace(e,t,i){this.navigating||this.addOrReplace(e,t,i,!0)}addOrReplace(t,i,o,s){this.registerGroupListeners(t);let n=!1;this.current&&(s||this.shouldReplaceStackEntry(this.current,{groupId:t,editor:i,selection:o}))&&(n=!0);const r=this.editorHelper.preferResourceEditorInput(i);if(!r)return;n?this.trace("replace()",r):this.trace("add()",r);const a={groupId:t,editor:r,selection:o},c=[];if(n)this.current&&c.push(this.current),this.current=a;else{if(this.stack.length>this.index+1){for(let e=this.index+1;e<this.stack.length;e++)c.push(this.stack[e]);this.stack=this.stack.slice(0,this.index+1)}this.stack.splice(this.index+1,0,a),this.stack.length>e.MAX_STACK_SIZE?(c.push(this.stack.shift()),this.previousIndex>=0&&this.previousIndex--):this.setIndex(this.index+1,!0)}for(const e of c)this.editorHelper.clearOnEditorDispose(e.editor,this.mapEditorToDisposable);(0,Gi.Xl)(r)&&this.editorHelper.onEditorDispose(r,(()=>this.remove(r)),this.mapEditorToDisposable),this._onDidChange.fire()}shouldReplaceStackEntry(e,t){return e.groupId===t.groupId&&!!this.editorHelper.matchesEditor(e.editor,t.editor)&&(!e.selection||!!t.selection&&1===e.selection.compare(t.selection))}move(e){if(e.isOperation(2))for(const t of this.stack)this.editorHelper.matchesEditor(e,t.editor)&&(t.editor={resource:e.target.resource})}remove(e){this.stack=this.stack.filter((t=>{const i="number"==typeof e?t.groupId===e:this.editorHelper.matchesEditor(e,t.editor);return i&&this.editorHelper.clearOnEditorDispose(t.editor,this.mapEditorToDisposable),!i})),this.flatten(),this.index=this.stack.length-1,this.previousIndex=-1,"number"==typeof e&&(this.mapGroupToDisposable.get(e)?.dispose(),this.mapGroupToDisposable.delete(e)),this._onDidChange.fire()}flatten(){const e=[];let t;for(const i of this.stack)t&&this.shouldReplaceStackEntry(i,t)||(t=i,e.push(i));this.stack=e}clear(){this.index=-1,this.previousIndex=-1,this.stack.splice(0);for(const[,e]of this.mapEditorToDisposable)(0,p.B9)(e);this.mapEditorToDisposable.clear();for(const[,e]of this.mapGroupToDisposable)(0,p.B9)(e);this.mapGroupToDisposable.clear()}dispose(){super.dispose(),this.clear()}canGoForward(){return this.stack.length>this.index+1}async goForward(){if(!await this.maybeGoCurrent()&&this.canGoForward())return this.setIndex(this.index+1),this.navigate()}canGoBack(){return this.index>0}async goBack(){if(!await this.maybeGoCurrent()&&this.canGoBack())return this.setIndex(this.index-1),this.navigate()}async goPrevious(){if(!await this.maybeGoCurrent())return-1===this.previousIndex?this.goBack():(this.setIndex(this.previousIndex),this.navigate())}canGoLast(){return this.stack.length>0}async goLast(){if(this.canGoLast())return this.setIndex(this.stack.length-1),this.navigate()}async maybeGoCurrent(){return 0!==this.filter&&!this.isCurrentSelectionActive()&&(await this.navigate(),!0)}isCurrentSelectionActive(){if(!this.current?.selection)return!1;const e=this.editorService.activeEditorPane;if(!(0,Gi.fE)(e))return!1;if(e.group?.id!==this.current.groupId)return!1;if(!e.input||!this.editorHelper.matchesEditor(e.input,this.current.editor))return!1;const t=e.getSelection();return!!t&&1===t.compare(this.current.selection)}setIndex(e,t){this.previousIndex=this.index,this.index=e,t||this._onDidChange.fire()}async navigate(){this.navigating=!0;try{this.current&&await this.doNavigate(this.current)}finally{this.navigating=!1}}doNavigate(e){let t=Object.create(null);return e.selection&&(t=e.selection.restore(t)),(0,Gi.Xl)(e.editor)?this.editorService.openEditor(e.editor,t,e.groupId):this.editorService.openEditor({...e.editor,options:{...e.editor.options,...t}},e.groupId)}isNavigating(){return this.navigating}};Kd=(0,o.g)([(0,o.f)(2,c.TG),(0,o.f)(3,oi.AR),(0,o.f)(4,Po.Qw),(0,o.f)(5,Z.VZ)],Kd);let $d=class{constructor(e,t,i,o){this.uriIdentityService=e,this.lifecycleService=t,this.fileService=i,this.pathService=o}preferResourceEditorInput(e){const t=Gi.zK.getOriginalUri(e);if(t?.scheme===mo.lg.file||t?.scheme===mo.lg.vscodeRemote||t?.scheme===mo.lg.vscodeUserData||t?.scheme===this.pathService.defaultUriScheme){if((0,Gi.Xl)(e)){const t=e.toUntyped();if((0,Gi.BR)(t))return t}return e}return(0,Gi.Xl)(e)?e:void 0}matchesEditor(e,t){return e instanceof ft.G9||e instanceof ft.Zk?!(0,Gi.Xl)(t)&&(e instanceof ft.G9?e.contains(t.resource,2):this.matchesFile(t.resource,e)):(0,Gi.Xl)(e)?(0,Gi.Xl)(t)?e.matches(t):this.matchesFile(t.resource,e):(0,Gi.Xl)(t)?this.matchesFile(e.resource,t):e&&t&&this.uriIdentityService.extUri.isEqual(e.resource,t.resource)}matchesFile(e,t){if(t instanceof ft.G9)return t.contains(e,2);if(t instanceof ft.Zk)return this.uriIdentityService.extUri.isEqualOrParent(e,t.resource);if((0,Gi.Xl)(t)){const i=t.resource;return!!i&&!(this.lifecycleService.phase>=3&&!this.fileService.hasProvider(i))&&this.uriIdentityService.extUri.isEqual(i,e)}return this.uriIdentityService.extUri.isEqual(t?.resource,e)}matchesEditorIdentifier(e,t){return!!t?.group&&e.groupId===t.group.id&&!!t.input&&e.editor.matches(t.input)}onEditorDispose(e,t,i){const o=g.ju.once(e.onWillDispose)((()=>t()));let s=i.get(e);s||(s=new p.SL,i.set(e,s)),s.add(o)}clearOnEditorDispose(e,t){if(!(0,Gi.Xl)(e))return;const i=t.get(e);i&&((0,p.B9)(i),t.delete(e))}};$d=(0,o.g)([(0,o.f)(0,si.v),(0,o.f)(1,hs.g),(0,o.f)(2,ft.sn),(0,o.f)(3,Xo.a)],$d);var jd=i(91741);class Xd{constructor(){this._factories=new jd.S,this._onDidChange=new g.Q5,this.onDidChange=this._onDidChange.event}canCreateOutline(e){for(const t of this._factories)if(t.matches(e))return!0;return!1}async createOutline(e,t,i){for(const o of this._factories)if(o.matches(e))return await o.createOutline(e,t,i)}registerOutlineCreator(e){const t=this._factories.push(e);return this._onDidChange.fire(),(0,p.OF)((()=>{t(),this._onDidChange.fire()}))}}(0,d.Z)(".webview.modified{box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow)}",{});var Jd=i(88289);class Yd{constructor(){this._references=new Map}async getAllModels(e){const t=`${e.toString()}@@@`,i=[];for(const[e,o]of this._references)e.startsWith(t)&&o.model&&i.push(await o.model);return i}async get(e,t){const i=this.key(e,t),o=this._references.get(i);return o?.model}tryRetain(e,t){const i=this.key(e,t),o=this._references.get(i);if(o)return o.counter++,o.model.then((e=>({object:e,dispose:(0,Jd.I)((()=>{--o.counter<=0&&(o.model.then((e=>e.dispose())),this._references.delete(i))}))})))}add(e,t,i){const o=this.key(e,t);if(this._references.get(o))throw new Error("Model already exists");return this._references.set(o,{viewType:t,model:i,counter:0}),this.tryRetain(e,t)}disposeAllModelsForView(e){for(const[t,i]of this._references)i.viewType===e&&(i.model.then((e=>e.dispose())),this._references.delete(t))}key(e,t){return`${e.toString()}@@@${t}`}}var Qd=i(33292);const qd=Object.freeze({viewType:"viewType",displayName:"displayName",selector:"selector",priority:"priority"}),Zd={description:l.NC("contributes.customEditors","Contributed custom editors."),type:"array",defaultSnippets:[{body:[{[qd.viewType]:"$1",[qd.displayName]:"$2",[qd.selector]:[{filenamePattern:"$3"}]}]}],items:{type:"object",required:[qd.viewType,qd.displayName,qd.selector],properties:{[qd.viewType]:{type:"string",markdownDescription:l.NC("contributes.viewType","Identifier for the custom editor. This must be unique across all custom editors, so we recommend including your extension id as part of `viewType`. The `viewType` is used when registering custom editors with `vscode.registerCustomEditorProvider` and in the `onCustomEditor:${id}` [activation event](https://code.visualstudio.com/api/references/activation-events).")},[qd.displayName]:{type:"string",description:l.NC("contributes.displayName","Human readable name of the custom editor. This is displayed to users when selecting which editor to use.")},[qd.selector]:{type:"array",description:l.NC("contributes.selector","Set of globs that the custom editor is enabled for."),items:{type:"object",defaultSnippets:[{body:{filenamePattern:"$1"}}],properties:{filenamePattern:{type:"string",description:l.NC("contributes.selector.filenamePattern","Glob that the custom editor is enabled for.")}}}},[qd.priority]:{type:"string",markdownDeprecationMessage:l.NC("contributes.priority","Controls if the custom editor is enabled automatically when the user opens a file. This may be overridden by users using the `workbench.editorAssociations` setting."),enum:["default","option"],markdownEnumDescriptions:[l.NC("contributes.priority.default","The editor is automatically used when the user opens a resource, provided that no other default custom editors are registered for that resource."),l.NC("contributes.priority.option","The editor is not automatically used when the user opens a resource, but a user can switch to the editor using the `Reopen With` command.")],default:"default"}}}},eh=hc.ut.registerExtensionPoint({extensionPoint:"customEditors",deps:[Qd.O],jsonSchema:Zd,activationEventsGenerator:(e,t)=>{for(const i of e){const e=i[qd.viewType];e&&t.push(`onCustomEditor:${e}`)}}});class th extends p.JT{static{this.CUSTOM_EDITORS_STORAGE_ID="customEditors"}static{this.CUSTOM_EDITORS_ENTRY_ID="editors"}constructor(e){super(),this._editors=new Map,this._onChange=this._register(new g.Q5),this.onChange=this._onChange.event,this._memento=new sc.N(th.CUSTOM_EDITORS_STORAGE_ID,e);const t=this._memento.getMemento(0,1);for(const e of t[th.CUSTOM_EDITORS_ENTRY_ID]||[])this.add(new Sc.G4(e));eh.setHandler((e=>{this.update(e)}))}update(e){this._editors.clear();for(const t of e)for(const e of t.value)this.add(new Sc.G4({id:e.viewType,displayName:e.displayName,providerDisplayName:t.description.isBuiltin?l.NC("builtinProviderDisplayName","Built-in"):t.description.displayName||t.description.identifier.value,selector:e.selector||[],priority:ih(e,t.description)}));this._memento.getMemento(0,1)[th.CUSTOM_EDITORS_ENTRY_ID]=Array.from(this._editors.values()),this._memento.saveMemento(),this._onChange.fire()}[Symbol.iterator](){return this._editors.values()}get(e){return this._editors.get(e)}getContributedEditors(e){return Array.from(this._editors.values()).filter((t=>t.matches(e)))}add(e){this._editors.has(e.id)?console.error(`Custom editor with id '${e.id}' already registered`):this._editors.set(e.id,e)}}function ih(e,t){switch(e.priority){case Uo.OP.default:case Uo.OP.option:return e.priority;case Uo.OP.builtin:return t.isBuiltin?Uo.OP.builtin:Uo.OP.default;default:return Uo.OP.default}}let oh=class extends p.JT{constructor(e,t,i,o,s,n,r,a){super(),this.editorService=o,this.editorGroupService=s,this.instantiationService=n,this.uriIdentityService=r,this.editorResolverService=a,this._untitledCounter=0,this._editorResolverDisposables=this._register(new p.SL),this._editorCapabilities=new Map,this._models=new Yd,this._onDidChangeEditorTypes=this._register(new g.Q5),this.onDidChangeEditorTypes=this._onDidChangeEditorTypes.event,this._fileEditorFactory=h.B.as(Gi.bS.EditorFactory).getFileEditorFactory(),this._activeCustomEditorId=Sc.TC.bindTo(e),this._focusedCustomEditorIsEditable=Sc.PG.bindTo(e),this._contributedEditors=this._register(new th(i)),this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this)),this._register(this._contributedEditors.onChange((()=>{this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this)),this.updateContexts(),this._onDidChangeEditorTypes.fire()}))),this._register(this.editorService.onDidActiveEditorChange((()=>this.updateContexts()))),this._register(t.onDidRunOperation((e=>{e.isOperation(2)&&this.handleMovedFileInOpenedFileEditors(e.resource,this.uriIdentityService.asCanonicalUri(e.target.resource))}))),this._register(ur.n_.addImplementation(105,"custom-editor",(()=>this.withActiveCustomEditor((e=>e.undo()))))),this._register(ur.kz.addImplementation(105,"custom-editor",(()=>this.withActiveCustomEditor((e=>e.redo()))))),this.updateContexts()}getEditorTypes(){return[...this._contributedEditors]}withActiveCustomEditor(e){const t=this.editorService.activeEditor;if(t instanceof Cc.A){return e(t)||!0}return!1}registerContributionPoints(){this._editorResolverDisposables.clear();for(const e of this._contributedEditors)for(const t of e.selector)t.filenamePattern&&this._editorResolverDisposables.add(this.editorResolverService.registerEditor(t.filenamePattern,{id:e.id,label:e.displayName,detail:e.providerDisplayName,priority:e.priority},{singlePerResource:()=>!this.getCustomEditorCapabilities(e.id)?.supportsMultipleEditorsPerDocument??!0},{createEditorInput:({resource:t},i)=>({editor:Cc.A.create(this.instantiationService,t,e.id,i.id)}),createUntitledEditorInput:({resource:t},i)=>({editor:Cc.A.create(this.instantiationService,t??J.ov.from({scheme:mo.lg.untitled,authority:"Untitled-"+this._untitledCounter++}),e.id,i.id)}),createDiffEditorInput:(t,i)=>({editor:this.createDiffEditorInput(t,e.id,i)})}))}createDiffEditorInput(e,t,i){const o=Cc.A.create(this.instantiationService,(0,y.cW)(e.modified.resource),t,i.id,{customClasses:"modified"}),s=Cc.A.create(this.instantiationService,(0,y.cW)(e.original.resource),t,i.id,{customClasses:"original"});return this.instantiationService.createInstance(ln.$,e.label,e.description,s,o,!0)}get models(){return this._models}getCustomEditor(e){return this._contributedEditors.get(e)}getContributedCustomEditors(e){return new Sc.aJ(this._contributedEditors.getContributedEditors(e))}getUserConfiguredCustomEditors(e){const t=this.editorResolverService.getAssociationsForResource(e);return new Sc.aJ((0,Y.kX)(t.map((e=>this._contributedEditors.get(e.viewType)))))}getAllCustomEditors(e){return new Sc.aJ([...this.getUserConfiguredCustomEditors(e).allEditors,...this.getContributedCustomEditors(e).allEditors])}registerCustomEditorCapabilities(e,t){if(this._editorCapabilities.has(e))throw new Error(`Capabilities for ${e} already set`);return this._editorCapabilities.set(e,t),(0,p.OF)((()=>{this._editorCapabilities.delete(e)}))}getCustomEditorCapabilities(e){return this._editorCapabilities.get(e)}updateContexts(){const e=this.editorService.activeEditorPane,t=e?.input?.resource;if(!t)return this._activeCustomEditorId.reset(),void this._focusedCustomEditorIsEditable.reset();this._activeCustomEditorId.set(e?.input instanceof Cc.A?e.input.viewType:""),this._focusedCustomEditorIsEditable.set(e?.input instanceof Cc.A)}async handleMovedFileInOpenedFileEditors(e,t){if((0,Q.DZ)(e).toLowerCase()===(0,Q.DZ)(t).toLowerCase())return;const i=this.getAllCustomEditors(t);if(!i.allEditors.some((e=>e.priority!==Uo.OP.option)))return;const o=new Map;for(const e of this.editorGroupService.groups)for(const i of e.editors)if(this._fileEditorFactory.isFileEditor(i)&&!(i instanceof Cc.A)&&(0,Q.Xy)(i.resource,t)){let t=o.get(e.id);t||(t=[],o.set(e.id,t)),t.push(i)}if(o.size)for(const[e,s]of o)this.editorService.replaceEditors(s.map((o=>{let s;if(i.defaultEditor){const o=i.defaultEditor.id;s=Cc.A.create(this.instantiationService,t,o,e)}else s={resource:t,options:{override:Gi.Cr.id}};return{editor:o,replacement:s,options:{preserveFocus:!0}}})),e)}};oh=(0,o.g)([(0,o.f)(0,H.i6),(0,o.f)(1,ft.sn),(0,o.f)(2,R.Uy),(0,o.f)(3,oi.AR),(0,o.f)(4,Po.Qw),(0,o.f)(5,c.TG),(0,o.f)(6,si.v),(0,o.f)(7,Uo.es)],oh);var sh=i(50868),nh=i(12427);let rh=class extends p.JT{constructor(e,t){super(),this._themeService=e,this._configurationService=t,this._cachedWebViewThemeData=void 0,this._onThemeDataChanged=this._register(new g.Q5),this.onThemeDataChanged=this._onThemeDataChanged.event,this._register(this._themeService.onDidColorThemeChange((()=>{this._reset()})));const i=["editor.fontFamily","editor.fontWeight","editor.fontSize"];this._register(this._configurationService.onDidChangeConfiguration((e=>{i.some((t=>e.affectsConfiguration(t)))&&this._reset()})))}getTheme(){return this._themeService.getColorTheme()}getWebviewThemeData(){if(!this._cachedWebViewThemeData){const e=this._configurationService.getValue("editor"),t=e.fontFamily||Gt.hL.fontFamily,i=e.fontWeight||Gt.hL.fontWeight,o=e.fontSize||Gt.hL.fontSize,s=this._themeService.getColorTheme(),n=P.JI_().getColors().reduce(((e,t)=>{const i=s.getColor(t.id);return i&&(e["vscode-"+t.id.replace(".","-")]=i.toString()),e}),{}),r={"vscode-font-family":nh.r,"vscode-font-weight":"normal","vscode-font-size":"13px","vscode-editor-font-family":t,"vscode-editor-font-weight":i,"vscode-editor-font-size":o+"px",...n},a=ah.fromTheme(s);this._cachedWebViewThemeData={styles:r,activeTheme:a,themeLabel:s.label,themeId:s.settingsId}}return this._cachedWebViewThemeData}_reset(){this._cachedWebViewThemeData=void 0,this._onThemeDataChanged.fire()}};var ah;rh=(0,o.g)([(0,o.f)(0,sh.Dc),(0,o.f)(1,Ee.Ui)],rh),function(e){e.light="vscode-light",e.dark="vscode-dark",e.highContrast="vscode-high-contrast",e.highContrastLight="vscode-high-contrast-light"}(ah||(ah={})),function(e){e.fromTheme=function(t){switch(t.type){case Jo.eL.LIGHT:return e.light;case Jo.eL.DARK:return e.dark;case Jo.eL.HIGH_CONTRAST_DARK:return e.highContrast;case Jo.eL.HIGH_CONTRAST_LIGHT:return e.highContrastLight}}}(ah||(ah={}));var ch=i(53060),dh=i(55673);class hh{constructor(e,t,i){this._getExtensionLocation=e,this._getMappings=t,this.tunnelService=i,this._tunnels=new Map}async getRedirect(e,t){const i=J.ov.parse(t),o=(0,ec.kn)(i);if(o)for(const t of this._getMappings())if(t.webviewPort===o.port){const s=this._getExtensionLocation();if(s&&s.scheme===mo.lg.vscodeRemote){const o=e&&await this.getOrCreateTunnel(e,t.extensionHostPort);if(o){if(o.tunnelLocalPort===t.webviewPort)return;return encodeURI(i.with({authority:`127.0.0.1:${o.tunnelLocalPort}`}).toString(!0))}}if(t.webviewPort!==t.extensionHostPort)return encodeURI(i.with({authority:`${o.address}:${t.extensionHostPort}`}).toString(!0))}}async dispose(){for(const e of this._tunnels.values())await e.dispose();this._tunnels.clear()}async getOrCreateTunnel(e,t){const i=this._tunnels.get(t);if(i)return i;const o=await this.tunnelService.openTunnel({getAddress:async()=>e},void 0,t);return o&&this._tunnels.set(t,o),o}}var lh=i(22873);const uh=new Map([[".svg","image/svg+xml"],[".txt",xa.vW.text],[".css","text/css"],[".js","application/javascript"],[".cjs","application/javascript"],[".mjs","application/javascript"],[".json","application/json"],[".html","text/html"],[".htm","text/html"],[".xhtml","application/xhtml+xml"],[".oft","font/otf"],[".xml","application/xml"],[".wasm","application/wasm"]]);function ph(e){const t=(0,_o.DZ)(e.fsPath).toLowerCase();return uh.get(t)||(0,xa.yC)(e.fsPath)||xa.vW.unknown}var gh;function mh(e,t){if(e.scheme!==t.scheme)return!1;let i=(0,_o.Fv)(t.fsPath),o=(0,_o.Fv)(e.fsPath+(e.fsPath.endsWith(_o.ir)?"":_o.ir));return(0,_d._g)(e.fsPath)&&(0,_d._g)(t.fsPath)&&(o=o.toLowerCase(),i=i.toLowerCase()),i.startsWith(o)}!function(e){let t;!function(e){e[e.Success=0]="Success",e[e.Failed=1]="Failed",e[e.AccessDenied=2]="AccessDenied",e[e.NotModified=3]="NotModified"}(t=e.Type||(e.Type={})),e.StreamSuccess=class{constructor(e,i,o,s){this.stream=e,this.etag=i,this.mtime=o,this.mimeType=s,this.type=t.Success}},e.Failed={type:t.Failed},e.AccessDenied={type:t.AccessDenied},e.NotModified=class{constructor(e,i){this.mimeType=e,this.mtime=i,this.type=t.NotModified}}}(gh||(gh={})),(0,d.Z)(".monaco-workbench .simple-find-part-wrapper{max-width:calc(100% - 64px);overflow:hidden;padding:0 10px 10px;pointer-events:none;position:absolute;right:18px;top:0;z-index:10}.simple-find-part .monaco-inputbox>.ibwrapper>input{text-overflow:clip}.monaco-workbench .simple-find-part{align-items:center;background-color:var(--vscode-editorWidget-background)!important;border:1px solid var(--vscode-contrastBorder);border-bottom-left-radius:4px;border-bottom-right-radius:4px;box-shadow:0 0 8px 2px var(--vscode-widget-shadow);color:var(--vscode-editorWidget-foreground);display:flex;font-size:12px;padding:4px;pointer-events:all;position:relative;top:-45px;transition:top .2s linear;visibility:hidden;z-index:10}.monaco-workbench.reduce-motion .monaco-editor .find-widget{transition:top 0ms linear}.monaco-workbench .simple-find-part.visible{visibility:visible}.monaco-workbench .simple-find-part.suppress-transition{transition:none}.monaco-workbench .simple-find-part.visible-transition{top:0}.monaco-workbench .simple-find-part .monaco-findInput{flex:1}.monaco-workbench .simple-find-part .matchesCount{max-width:73px;min-width:73px;padding-left:5px;width:73px}.monaco-workbench .simple-find-part.reduced-find-widget .matchesCount{display:none}.monaco-workbench .simple-find-part .button{background-position:50%;background-repeat:no-repeat;cursor:pointer;display:flex;flex:initial;height:20px;justify-content:center;line-height:20px;margin-left:3px;min-width:20px;width:20px}.monaco-workbench div.simple-find-part div.button.disabled{cursor:default;opacity:.3!important}div.simple-find-part-wrapper div.button{border-radius:5px}.no-results.matchesCount{color:var(--vscode-errorForeground)}div.simple-find-part-wrapper div.button:hover:not(.disabled){background-color:var(--vscode-toolbar-hoverBackground);outline:1px dashed var(--vscode-toolbar-hoverOutline);outline-offset:-1px}",{});var vh=i(51730),bh=i(90667),fh=i(22980),wh=i(97532),yh=i(56346);const Ch=l.NC("label.find","Find"),Sh=l.NC("placeholder.find","Find ( for history)"),_h=l.NC("label.previousMatchButton","Previous Match"),Eh=l.NC("label.nextMatchButton","Next Match"),xh=l.NC("label.closeButton","Close");class kh extends We.${constructor(e,t,i,o){super(),this._keybindingService=o,this._isVisible=!1,this._foundMatch=!1,this._width=0,this.state=new vh.P,this._matchesLimit=e.matchesLimit??Number.MAX_SAFE_INTEGER,this._findInput=this._register(new fh.Yb(null,t,{label:Ch,placeholder:Sh,validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return null}catch(e){return this._foundMatch=!1,this.updateButtons(this._foundMatch),{content:e.message}}},showCommonFindToggles:e.showCommonFindToggles,appendCaseSensitiveLabel:e.appendCaseSensitiveActionId?this._getKeybinding(e.appendCaseSensitiveActionId):void 0,appendRegexLabel:e.appendRegexActionId?this._getKeybinding(e.appendRegexActionId):void 0,appendWholeWordsLabel:e.appendWholeWordsActionId?this._getKeybinding(e.appendWholeWordsActionId):void 0,showHistoryHint:()=>(0,wh.u)(o),inputBoxStyles:A.Hc,toggleStyles:A.pl},i)),this._updateHistoryDelayer=new je.vp(500),this._register(this._findInput.onInput((async t=>{e.checkImeCompletionState&&this._findInput.isImeSessionInProgress||(this._foundMatch=this._onInputChanged(),e.showResultCount&&await this.updateResultCount(),this.updateButtons(this._foundMatch),this.focusFindBox(),this._delayedUpdateHistory())}))),this._findInput.setRegex(!!this.state.isRegex),this._findInput.setCaseSensitive(!!this.state.matchCase),this._findInput.setWholeWords(!!this.state.wholeWord),this._register(this._findInput.onDidOptionChange((()=>{this.state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)}))),this._register(this.state.onFindReplaceStateChange((()=>{this._findInput.setRegex(this.state.isRegex),this._findInput.setWholeWords(this.state.wholeWord),this._findInput.setCaseSensitive(this.state.matchCase),this.findFirst()}))),this.prevBtn=this._register(new bh.rF({label:_h+(e.previousMatchActionId?this._getKeybinding(e.previousMatchActionId):""),icon:bh.BD,onTrigger:()=>{this.find(!0)}})),this.nextBtn=this._register(new bh.rF({label:Eh+(e.nextMatchActionId?this._getKeybinding(e.nextMatchActionId):""),icon:bh.v0,onTrigger:()=>{this.find(!1)}}));const s=this._register(new bh.rF({label:xh+(e.closeWidgetActionId?this._getKeybinding(e.closeWidgetActionId):""),icon:Lt.s_,onTrigger:()=>{this.hide()}}));this._innerDomNode=document.createElement("div"),this._innerDomNode.classList.add("simple-find-part"),this._innerDomNode.appendChild(this._findInput.domNode),this._innerDomNode.appendChild(this.prevBtn.domNode),this._innerDomNode.appendChild(this.nextBtn.domNode),this._innerDomNode.appendChild(s.domNode),this._domNode=document.createElement("div"),this._domNode.classList.add("simple-find-part-wrapper"),this._domNode.appendChild(this._innerDomNode),this.onkeyup(this._innerDomNode,(e=>{if(e.equals(9))return this.hide(),void e.preventDefault()})),this._focusTracker=this._register(w.go(this._innerDomNode)),this._register(this._focusTracker.onDidFocus(this._onFocusTrackerFocus.bind(this))),this._register(this._focusTracker.onDidBlur(this._onFocusTrackerBlur.bind(this))),this._findInputFocusTracker=this._register(w.go(this._findInput.domNode)),this._register(this._findInputFocusTracker.onDidFocus(this._onFindInputFocusTrackerFocus.bind(this))),this._register(this._findInputFocusTracker.onDidBlur(this._onFindInputFocusTrackerBlur.bind(this))),this._register(w.nm(this._innerDomNode,"click",(e=>{e.stopPropagation()}))),e?.showResultCount&&(this._domNode.classList.add("result-count"),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._findInput.domNode.insertAdjacentElement("afterend",this._matchesCount),this._register(this._findInput.onDidChange((async()=>{await this.updateResultCount()}))),this._register(this._findInput.onDidOptionChange((async()=>{this._foundMatch=this._onInputChanged(),await this.updateResultCount(),this.focusFindBox(),this._delayedUpdateHistory()}))))}get inputValue(){return this._findInput.getValue()}get focusTracker(){return this._focusTracker}_getKeybinding(e){const t=this._keybindingService?.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){super.dispose(),this._domNode&&this._domNode.parentElement&&this._domNode.parentElement.removeChild(this._domNode)}isVisible(){return this._isVisible}getDomNode(){return this._domNode}reveal(e,t=!0){e&&this._findInput.setValue(e),this._isVisible?this._findInput.select():(this._isVisible=!0,this.updateResultCount(),this.layout(),setTimeout((()=>{this._innerDomNode.classList.toggle("suppress-transition",!t),this._innerDomNode.classList.add("visible","visible-transition"),this._innerDomNode.setAttribute("aria-hidden","false"),this._findInput.select(),t||setTimeout((()=>{this._innerDomNode.classList.remove("suppress-transition")}),0)}),0))}show(e){e&&!this._isVisible&&this._findInput.setValue(e),this._isVisible=!0,this.layout(),setTimeout((()=>{this._innerDomNode.classList.add("visible","visible-transition"),this._innerDomNode.setAttribute("aria-hidden","false")}),0)}hide(e=!0){this._isVisible&&(this._innerDomNode.classList.toggle("suppress-transition",!e),this._innerDomNode.classList.remove("visible-transition"),this._innerDomNode.setAttribute("aria-hidden","true"),setTimeout((()=>{this._isVisible=!1,this.updateButtons(this._foundMatch),this._innerDomNode.classList.remove("visible","suppress-transition")}),e?200:0))}layout(e=this._width){if(this._width=e,this._isVisible&&this._matchesCount){let t=!1;411>=e&&(t=!0),this._innerDomNode.classList.toggle("reduced-find-widget",t)}}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this))}_updateHistory(){this._findInput.inputBox.addToHistory()}_getRegexValue(){return this._findInput.getRegex()}_getWholeWordValue(){return this._findInput.getWholeWords()}_getCaseSensitiveValue(){return this._findInput.getCaseSensitive()}updateButtons(e){const t=this.inputValue.length>0;this.prevBtn.setEnabled(this._isVisible&&t&&e),this.nextBtn.setEnabled(this._isVisible&&t&&e)}focusFindBox(){this.nextBtn.focus(),this._findInput.inputBox.focus()}async updateResultCount(){if(!this._matchesCount)return void this.updateButtons(this._foundMatch);const e=await this._getResultCount();this._matchesCount.innerText="";const t=this.inputValue.length>0&&0===e?.resultCount;this._matchesCount.classList.toggle("no-results",t);let i="";if(e?.resultCount){let t=String(e.resultCount);e.resultCount>=this._matchesLimit&&(t+="+");let o=String(e.resultIndex+1);"0"===o&&(o="?"),i=tt.WU(bh.Hx,o,t)}else i=bh.Wt;(0,yh.i7)(this._announceSearchResults(i,this.inputValue)),this._matchesCount.appendChild(document.createTextNode(i)),this._foundMatch=!!e&&e.resultCount>0,this.updateButtons(this._foundMatch)}changeState(e){this.state.change(e,!1)}_announceSearchResults(e,t){return t?e===bh.Wt?""===t?l.NC("ariaSearchNoResultEmpty","{0} found",e):l.NC("ariaSearchNoResult","{0} found for '{1}'",e,t):l.NC("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,t):l.NC("ariaSearchNoInput","Enter search input")}}let Dh=class extends kh{async _getResultCount(e){}constructor(e,t,i,o){super({showCommonFindToggles:!1,checkImeCompletionState:e.checkImeCompletionState},t,i,o),this._delegate=e,this._findWidgetFocused=nc.nh.bindTo(i),this._register(e.hasFindResult((e=>{this.updateButtons(e),this.focusFindBox()}))),this._register(e.onDidStopFind((()=>{this.updateButtons(!1)})))}find(e){const t=this.inputValue;t&&this._delegate.find(t,e)}hide(e=!0){super.hide(e),this._delegate.stopFind(!0),this._delegate.focus()}_onInputChanged(){const e=this.inputValue;return e?this._delegate.updateFind(e):this._delegate.stopFind(!1),!1}_onFocusTrackerFocus(){this._findWidgetFocused.set(!0)}_onFocusTrackerBlur(){this._findWidgetFocused.reset()}_onFindInputFocusTrackerFocus(){}_onFindInputFocusTrackerBlur(){}findFirst(){}};Dh=(0,o.g)([(0,o.f)(1,O.u),(0,o.f)(2,H.i6),(0,o.f)(3,N.d)],Dh);var Ah,Ih=i(90220);!function(e){!function(e){e[e.Initializing=0]="Initializing",e[e.Ready=1]="Ready"}(e.Type||(e.Type={})),e.Initializing=class{constructor(e){this.pendingMessages=e,this.type=0}},e.Ready={type:1}}(Ah||(Ah={}));let Th=class extends p.JT{get platform(){return"browser"}get element(){return this._element}get isFocused(){return!(!this._focused||document.activeElement&&document.activeElement!==this.element)}constructor(e,t,i,o,s,n,r,a,c,d,h,u,p){super(),this.webviewThemeDataProvider=t,this._environmentService=n,this._fileService=r,this._logService=a,this._remoteAuthorityResolverService=c,this._telemetryService=d,this._tunnelService=h,this._accessibilityService=p,this.id=(0,X.R)(),this._expectedServiceWorkerVersion=4,this._state=new Ah.Initializing([]),this._resourceLoadingCts=this._register(new ai.A),this._focusDelayer=this._register(new je.rH(50)),this._onDidHtmlChange=this._register(new g.Q5),this.onDidHtmlChange=this._onDidHtmlChange.event,this._messageHandlers=new Map,this.checkImeCompletionState=!0,this._disposed=!1,this._onMissingCsp=this._register(new g.Q5),this.onMissingCsp=this._onMissingCsp.event,this._onDidClickLink=this._register(new g.Q5),this.onDidClickLink=this._onDidClickLink.event,this._onDidReload=this._register(new g.Q5),this.onDidReload=this._onDidReload.event,this._onMessage=this._register(new g.Q5),this.onMessage=this._onMessage.event,this._onDidScroll=this._register(new g.Q5),this.onDidScroll=this._onDidScroll.event,this._onDidWheel=this._register(new g.Q5),this.onDidWheel=this._onDidWheel.event,this._onDidUpdateState=this._register(new g.Q5),this.onDidUpdateState=this._onDidUpdateState.event,this._onDidFocus=this._register(new g.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new g.Q5),this.onDidBlur=this._onDidBlur.event,this._onFatalError=this._register(new g.Q5),this.onFatalError=this._onFatalError.event,this._onDidDispose=this._register(new g.Q5),this.onDidDispose=this._onDidDispose.event,this._hasAlertedAboutMissingCsp=!1,this._hasFindResult=this._register(new g.Q5),this.hasFindResult=this._hasFindResult.event,this._onDidStopFind=this._register(new g.Q5),this.onDidStopFind=this._onDidStopFind.event,this.providedViewType=e.providedViewType,this.origin=e.origin??this.id,this._encodedWebviewOriginPromise=(0,lh.a)(window.origin,this.origin).then((e=>this._encodedWebviewOrigin=e)),this._options=e.options,this.extension=e.extension,this._content={html:"",title:e.title,options:e.contentOptions,state:void 0},this._portMappingManager=this._register(new hh((()=>this.extension?.location),(()=>this._content.options.portMapping||[]),this._tunnelService)),this._element=this._createElement(e.options,e.contentOptions);const m=this._register((0,w.nm)(window,"message",(e=>{if(this._encodedWebviewOrigin&&e?.data?.target===this.id&&"webview-ready"===e.data.channel){if(this._messagePort)return;this._logService.debug(`Webview(${this.id}): webview ready`),this._messagePort=e.ports[0],this._messagePort.onmessage=e=>{const t=this._messageHandlers.get(e.data.channel);t?t?.forEach((t=>t(e.data.data,e))):console.log(`No handlers found for '${e.data.channel}'`)},this.element?.classList.add("ready"),0===this._state.type&&this._state.pendingMessages.forEach((({channel:e,data:t})=>this.doPostMessage(e,t))),this._state=Ah.Ready,m.dispose()}})));this._register(this.on("no-csp-found",(()=>{this.handleNoCspFound()}))),this._register(this.on("did-click-link",(({uri:e})=>{this._onDidClickLink.fire(e)}))),this._register(this.on("onmessage",(({message:e,transfer:t})=>{this._onMessage.fire({message:e,transfer:t})}))),this._register(this.on("did-scroll",(({scrollYPercentage:e})=>{this._onDidScroll.fire({scrollYPercentage:e})}))),this._register(this.on("do-reload",(()=>{this.reload()}))),this._register(this.on("do-update-state",(e=>{this.state=e,this._onDidUpdateState.fire(e)}))),this._register(this.on("did-focus",(()=>{this.handleFocusChange(!0)}))),this._register(this.on("did-blur",(()=>{this.handleFocusChange(!1)}))),this._register(this.on("did-scroll-wheel",(e=>{this._onDidWheel.fire(e)}))),this._register(this.on("did-find",(({didFind:e})=>{this._hasFindResult.fire(e)}))),this._register(this.on("fatal-error",(e=>{s.error((0,l.NC)("fatalErrorMessage","Error loading webview: {0}",e.message)),this._onFatalError.fire({message:e.message})}))),this._register(this.on("did-keydown",(e=>{this.handleKeyEvent("keydown",e)}))),this._register(this.on("did-keyup",(e=>{this.handleKeyEvent("keyup",e)}))),this._register(this.on("did-context-menu",(e=>{if(!this.element)return;if(!this._contextKeyService)return;const t=this.element.getBoundingClientRect(),i=this._contextKeyService.createOverlay([...Object.entries(e.context),["webviewId",this.providedViewType]]);o.showContextMenu({menuId:te.eH.WebviewContext,menuActionOptions:{shouldForwardArgs:!0},contextKeyService:i,getActionsContext:()=>({...e.context,webview:this.providedViewType}),getAnchor:()=>({x:t.x+e.clientX,y:t.y+e.clientY})})}))),this._register(this.on("load-resource",(async e=>{try{const t=(0,Ih.Um)(e.authority),i=J.ov.from({scheme:e.scheme,authority:t,path:decodeURIComponent(e.path),query:e.query?decodeURIComponent(e.query):e.query});this.loadResource(e.id,i,e.ifNoneMatch)}catch(t){this._send("did-load-resource",{id:e.id,status:404,path:e.path})}}))),this._register(this.on("load-localhost",(e=>{this.localLocalhost(e.id,e.origin)}))),this._register(g.ju.runAndSubscribe(t.onThemeDataChanged,(()=>this.style()))),this._register(p.onDidChangeReducedMotion((()=>this.style()))),this._register(p.onDidChangeScreenReaderOptimized((()=>this.style()))),this._register(o.onDidShowContextMenu((()=>this._send("set-context-menu-visible",{visible:!0})))),this._register(o.onDidHideContextMenu((()=>this._send("set-context-menu-visible",{visible:!1})))),this._confirmBeforeClose=i.getValue("window.confirmBeforeClose"),this._register(i.onDidChangeConfiguration((e=>{e.affectsConfiguration("window.confirmBeforeClose")&&(this._confirmBeforeClose=i.getValue("window.confirmBeforeClose"),this._send("set-confirm-before-close",this._confirmBeforeClose))}))),this._register(this.on("drag-start",(()=>{this._startBlockingIframeDragEvents()}))),e.options.enableFindWidget&&(this._webviewFindWidget=this._register(u.createInstance(Dh,this))),this._encodedWebviewOriginPromise.then((e=>{this._disposed||this._initElement(e,this.extension,this._options)}))}dispose(){if(this._disposed=!0,this.element?.remove(),this._element=void 0,this._messagePort=void 0,0===this._state.type){for(const e of this._state.pendingMessages)e.resolve(!1);this._state.pendingMessages=[]}this._onDidDispose.fire(),this._resourceLoadingCts.dispose(!0),super.dispose()}setContextKeyService(e){this._contextKeyService=e}postMessage(e,t){return this._send("message",{message:e,transfer:t})}async _send(e,t,i=[]){if(0===this._state.type){let o;const s=new Promise((e=>o=e));return this._state.pendingMessages.push({channel:e,data:t,transferable:i,resolve:o}),s}return this.doPostMessage(e,t,i)}_createElement(e,t){const i=document.createElement("iframe");i.name=this.id,i.className=`webview ${e.customClasses||""}`,i.sandbox.add("allow-scripts","allow-same-origin","allow-forms","allow-pointer-lock","allow-downloads");const o=["cross-origin-isolated","autoplay"];return Qe.vU||o.push("clipboard-read","clipboard-write"),i.setAttribute("allow",o.join("; ")),i.style.border="none",i.style.width="100%",i.style.height="100%",i.focus=()=>{this._doFocus()},i}_initElement(e,t,i){const o={id:this.id,origin:this.origin,swVersion:String(this._expectedServiceWorkerVersion),extensionId:t?.id.value??"",platform:this.platform,"vscode-resource-base-authority":Ih.gm,parentOrigin:window.origin};this._options.disableServiceWorker&&(o.disableServiceWorker="true"),this._environmentService.remoteAuthority&&(o.remoteAuthority=this._environmentService.remoteAuthority),i.purpose&&(o.purpose=i.purpose),o.serviceWorkerUri=mo.Gi.asBrowserUri("vs/workbench/contrib/webview/browser/pre/service-worker.js").toString(!0),o.fakeHtmlUri=mo.Gi.asBrowserUri("vs/workbench/contrib/webview/browser/pre/fake.html").toString(!0),mo.S9.addSearchParam(o,!0,!0);const s=new URLSearchParams(o).toString(),n=Qe.vU?"index-no-csp.html":"index.html",r=mo.Gi.asBrowserUri(`vs/workbench/contrib/webview/browser/pre/${n}`);this.element.setAttribute("src",`${r.toString(!0)}?${s}`)}mountTo(e){if(this.element){this._webviewFindWidget&&e.appendChild(this._webviewFindWidget.getDomNode());for(const t of[w.tw.MOUSE_DOWN,w.tw.MOUSE_MOVE,w.tw.DROP])this._register((0,w.nm)(e,t,(()=>{this._stopBlockingIframeDragEvents()})));for(const t of[e,window])this._register((0,w.nm)(t,w.tw.DRAG_END,(()=>{this._stopBlockingIframeDragEvents()})));e.id=this.id,e.appendChild(this.element)}}_startBlockingIframeDragEvents(){this.element&&(this.element.style.pointerEvents="none")}_stopBlockingIframeDragEvents(){this.element&&(this.element.style.pointerEvents="auto")}webviewContentEndpoint(e){const t=this._environmentService.webviewExternalEndpoint;if(!t)throw new Error("'webviewExternalEndpoint' has not been configured. Webviews will not work!");const i=t.replace("{{uuid}}",e);return"/"===i[i.length-1]?i.slice(0,i.length-1):i}doPostMessage(e,t,i=[]){return!(!this.element||!this._messagePort||(this._messagePort.postMessage({channel:e,args:t},i),0))}on(e,t){let i=this._messageHandlers.get(e);return i||(i=new Set,this._messageHandlers.set(e,i)),i.add(t),(0,p.OF)((()=>{this._messageHandlers.get(e)?.delete(t)}))}handleNoCspFound(){if(!this._hasAlertedAboutMissingCsp&&(this._hasAlertedAboutMissingCsp=!0,this.extension?.id)){this._environmentService.isExtensionDevelopment&&this._onMissingCsp.fire(this.extension.id);const e={extension:this.extension.id.value};this._telemetryService.publicLog2("webviewMissingCsp",e)}}reload(){this.doUpdateContent(this._content);const e=this._register(this.on("did-load",(()=>{this._onDidReload.fire(),e.dispose()})))}setHtml(e){this.doUpdateContent({...this._content,html:e}),this._onDidHtmlChange.fire(e)}setTitle(e){this._content={...this._content,title:e},this._send("set-title",e)}set contentOptions(e){this._logService.debug(`Webview(${this.id}): will update content options`),(0,nc.ux)(e,this._content.options)?this._logService.debug(`Webview(${this.id}): skipping content options update`):this.doUpdateContent({...this._content,options:e})}set localResourcesRoot(e){this._content={...this._content,options:{...this._content.options,localResourceRoots:e}}}set state(e){this._content={...this._content,state:e}}set initialScrollProgress(e){this._send("initial-scroll-position",e)}doUpdateContent(e){this._logService.debug(`Webview(${this.id}): will update content`),this._content=e;const t=!!this._content.options.allowScripts;this._send("content",{contents:this._content.html,title:this._content.title,options:{allowMultipleAPIAcquire:!!this._content.options.allowMultipleAPIAcquire,allowScripts:t,allowForms:this._content.options.allowForms??t},state:this._content.state,cspSource:Ih.Ii,confirmBeforeClose:this._confirmBeforeClose})}style(){let{styles:e,activeTheme:t,themeLabel:i,themeId:o}=this.webviewThemeDataProvider.getWebviewThemeData();this._options.transformCssVariables&&(e=this._options.transformCssVariables(e));const s=this._accessibilityService.isMotionReduced(),n=this._accessibilityService.isScreenReaderOptimized();this._send("styles",{styles:e,activeTheme:t,themeId:o,themeLabel:i,reduceMotion:s,screenReader:n})}handleFocusChange(e){this._focused=e,e?this._onDidFocus.fire():this._onDidBlur.fire()}handleKeyEvent(e,t){const i=new KeyboardEvent(e,t);Object.defineProperty(i,"target",{get:()=>this.element}),window.dispatchEvent(i)}windowDidDragStart(){this._startBlockingIframeDragEvents()}windowDidDragEnd(){this._stopBlockingIframeDragEvents()}selectAll(){this.execCommand("selectAll")}copy(){this.execCommand("copy")}paste(){this.execCommand("paste")}cut(){this.execCommand("cut")}undo(){this.execCommand("undo")}redo(){this.execCommand("redo")}execCommand(e){this.element&&this._send("execCommand",e)}async loadResource(e,t,i){try{const o=await async function(e,t,i,o,s){o.debug(`loadLocalResource - begin. requestUri=${e}`);const n=function(e,t){for(const o of t)if(mh(o,e))return(i=e).scheme===mo.lg.vscodeRemote?J.ov.from({scheme:mo.lg.vscodeRemote,authority:i.authority,path:"/vscode-resource",query:JSON.stringify({requestResourcePath:i.path})}):i;var i}(e,t.roots);if(o.debug(`loadLocalResource - found resource to load. requestUri=${e}, resourceToLoad=${n}`),!n)return gh.AccessDenied;const r=ph(e);try{const e=await i.readFileStream(n,{etag:t.ifNoneMatch},s);return new gh.StreamSuccess(e.value,e.etag,e.mtime,r)}catch(t){return t instanceof ft.Ym&&2===t.fileOperationResult?new gh.NotModified(r,t.options?.mtime):(o.debug(`loadLocalResource - Error using fileReader. requestUri=${e}`),console.log(t),gh.Failed)}}(t,{ifNoneMatch:i,roots:this._content.options.localResourceRoots||[]},this._fileService,this._logService,this._resourceLoadingCts.token);switch(o.type){case gh.Type.Success:{const i=await this.streamToBuffer(o.stream);return this._send("did-load-resource",{id:e,status:200,path:t.path,mime:o.mimeType,data:i,etag:o.etag,mtime:o.mtime},[i])}case gh.Type.NotModified:return this._send("did-load-resource",{id:e,status:304,path:t.path,mime:o.mimeType,mtime:o.mtime});case gh.Type.AccessDenied:return this._send("did-load-resource",{id:e,status:401,path:t.path})}}catch{}return this._send("did-load-resource",{id:e,status:404,path:t.path})}async streamToBuffer(e){return(await(0,ch.Mv)(e)).buffer.buffer}async localLocalhost(e,t){const i=this._environmentService.remoteAuthority,o=i?await this._remoteAuthorityResolverService.resolveAuthority(i):void 0,s=o?await this._portMappingManager.getRedirect(o.authority,t):void 0;return this._send("did-load-localhost",{id:e,origin:t,location:s})}focus(){this._doFocus(),this.handleFocusChange(!0)}_doFocus(){if(this.element){try{this.element.contentWindow?.focus()}catch{}this._focusDelayer.trigger((async()=>{this.isFocused&&this.element&&(document.activeElement&&document.activeElement!==this.element&&"BODY"!==document.activeElement?.tagName||this._send("focus",void 0))}))}}find(e,t){this.element&&this._send("find",{value:e,previous:t})}updateFind(e){e&&this.element&&this._send("find",{value:e})}stopFind(e){this.element&&(this._send("find-stop",{clearSelection:!e}),this._onDidStopFind.fire())}showFind(e=!0){this._webviewFindWidget?.reveal(void 0,e)}hideFind(e=!0){this._webviewFindWidget?.hide(e)}runFindAction(e){this._webviewFindWidget?.find(e)}};Th=(0,o.g)([(0,o.f)(2,Ee.Ui),(0,o.f)(3,O.i),(0,o.f)(4,F.lT),(0,o.f)(5,ee.n),(0,o.f)(6,ft.sn),(0,o.f)(7,Z.VZ),(0,o.f)(8,dh.SR),(0,o.f)(9,j.bU),(0,o.f)(10,ec.XN),(0,o.f)(11,c.TG),(0,o.f)(12,rt.F7)],Th);var Vh=i(38626),Lh=i(34277);let Rh=class extends p.JT{constructor(e,t,i,o){super(),this._layoutService=t,this._webviewService=i,this._baseContextKeyService=o,this._isFirstLoad=!0,this._firstLoadPendingMessages=new Set,this._webview=this._register(new p.XK),this._webviewEvents=this._register(new p.SL),this._html="",this._initialScrollProgress=0,this._state=void 0,this._owner=void 0,this._scopedContextKeyService=this._register(new p.XK),this._shouldShowFindWidgetOnRestore=!1,this._isDisposed=!1,this._onDidDispose=this._register(new g.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidFocus=this._register(new g.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new g.Q5),this.onDidBlur=this._onDidBlur.event,this._onDidClickLink=this._register(new g.Q5),this.onDidClickLink=this._onDidClickLink.event,this._onDidReload=this._register(new g.Q5),this.onDidReload=this._onDidReload.event,this._onDidScroll=this._register(new g.Q5),this.onDidScroll=this._onDidScroll.event,this._onDidUpdateState=this._register(new g.Q5),this.onDidUpdateState=this._onDidUpdateState.event,this._onMessage=this._register(new g.Q5),this.onMessage=this._onMessage.event,this._onMissingCsp=this._register(new g.Q5),this.onMissingCsp=this._onMissingCsp.event,this._onDidWheel=this._register(new g.Q5),this.onDidWheel=this._onDidWheel.event,this._onFatalError=this._register(new g.Q5),this.onFatalError=this._onFatalError.event,this.providedViewType=e.providedViewType,this.origin=e.origin??(0,X.R)(),this._title=e.title,this._extension=e.extension,this._options=e.options,this._contentOptions=e.contentOptions}get isFocused(){return!!this._webview.value?.isFocused}dispose(){this._isDisposed=!0,this._container?.domNode.remove(),this._container=void 0;for(const e of this._firstLoadPendingMessages)e.resolve(!1);this._firstLoadPendingMessages.clear(),this._onDidDispose.fire(),super.dispose()}get container(){if(this._isDisposed)throw new Error("OverlayWebview has been disposed");if(!this._container){const e=document.createElement("div");e.style.position="absolute",e.style.overflow="hidden",this._container=new Vh.Z(e),this._container.setVisibility("hidden"),this._layoutService.container.appendChild(e)}return this._container.domNode}claim(e,t){if(this._isDisposed)return;const i=this._owner;if(this._owner=e,this._show(),i!==e){const e=t||this._baseContextKeyService;this._scopedContextKeyService.clear(),this._scopedContextKeyService.value=e.createScoped(this.container);const i=this._findWidgetVisible?.get();this._findWidgetVisible?.reset(),this._findWidgetVisible=nc.Zl.bindTo(e),this._findWidgetVisible.set(!!i),this._findWidgetEnabled?.reset(),this._findWidgetEnabled=nc.Ok.bindTo(e),this._findWidgetEnabled.set(!!this.options.enableFindWidget),this._webview.value?.setContextKeyService(this._scopedContextKeyService.value)}}release(e){this._owner===e&&(this._scopedContextKeyService.clear(),this._owner=void 0,this._container&&this._container.setVisibility("hidden"),this._options.retainContextWhenHidden?(this._shouldShowFindWidgetOnRestore=!!this._findWidgetVisible?.get(),this.hideFind(!1)):(this._webview.clear(),this._webviewEvents.clear()))}layoutWebviewOverElement(e,t,i){if(!this._container||!this._container.domNode.parentElement)return;const o=e.getBoundingClientRect(),s=this._container.domNode.parentElement.getBoundingClientRect(),n=(s.height-this._container.domNode.parentElement.clientHeight)/2,r=(s.width-this._container.domNode.parentElement.clientWidth)/2;if(this._container.setTop(o.top-s.top-n),this._container.setLeft(o.left-s.left-r),this._container.setWidth(t?t.width:o.width),this._container.setHeight(t?t.height:o.height),i){const{top:e,left:t,right:s,bottom:n}=function(e,t){const i=t.getBoundingClientRect();return{top:Math.max(i.top-e.top,0),right:Math.max(e.width-(e.right-i.right),0),bottom:Math.max(e.height-(e.bottom-i.bottom),0),left:Math.max(i.left-e.left,0)}}(o,i);this._container.domNode.style.clipPath=`polygon(${t}px ${e}px, ${s}px ${e}px, ${s}px ${n}px, ${t}px ${n}px)`}}_show(){if(this._isDisposed)throw new Error("OverlayWebview is disposed");if(!this._webview.value){const e=this._webviewService.createWebviewElement({providedViewType:this.providedViewType,origin:this.origin,title:this._title,options:this._options,contentOptions:this._contentOptions,extension:this.extension});this._webview.value=e,e.state=this._state,this._scopedContextKeyService.value&&this._webview.value.setContextKeyService(this._scopedContextKeyService.value),this._html&&e.setHtml(this._html),this._options.tryRestoreScrollPosition&&(e.initialScrollProgress=this._initialScrollProgress),this._findWidgetEnabled?.set(!!this.options.enableFindWidget),e.mountTo(this.container),this._webviewEvents.clear(),this._webviewEvents.add(e.onDidFocus((()=>{this._onDidFocus.fire()}))),this._webviewEvents.add(e.onDidBlur((()=>{this._onDidBlur.fire()}))),this._webviewEvents.add(e.onDidClickLink((e=>{this._onDidClickLink.fire(e)}))),this._webviewEvents.add(e.onMessage((e=>{this._onMessage.fire(e)}))),this._webviewEvents.add(e.onMissingCsp((e=>{this._onMissingCsp.fire(e)}))),this._webviewEvents.add(e.onDidWheel((e=>{this._onDidWheel.fire(e)}))),this._webviewEvents.add(e.onDidReload((()=>{this._onDidReload.fire()}))),this._webviewEvents.add(e.onFatalError((e=>{this._onFatalError.fire(e)}))),this._webviewEvents.add(e.onDidScroll((e=>{this._initialScrollProgress=e.scrollYPercentage,this._onDidScroll.fire(e)}))),this._webviewEvents.add(e.onDidUpdateState((e=>{this._state=e,this._onDidUpdateState.fire(e)}))),this._isFirstLoad&&this._firstLoadPendingMessages.forEach((async t=>{t.resolve(await e.postMessage(t.message,t.transfer))})),this._isFirstLoad=!1,this._firstLoadPendingMessages.clear()}this.options.retainContextWhenHidden&&this._shouldShowFindWidgetOnRestore&&(this.showFind(!1),this._shouldShowFindWidgetOnRestore=!1),this._container?.setVisibility("visible")}setHtml(e){this._html=e,this._withWebview((t=>t.setHtml(e)))}setTitle(e){this._title=e,this._withWebview((t=>t.setTitle(e)))}get initialScrollProgress(){return this._initialScrollProgress}set initialScrollProgress(e){this._initialScrollProgress=e,this._withWebview((t=>t.initialScrollProgress=e))}get state(){return this._state}set state(e){this._state=e,this._withWebview((t=>t.state=e))}get extension(){return this._extension}set extension(e){this._extension=e,this._withWebview((t=>t.extension=e))}get options(){return this._options}set options(e){this._options={customClasses:this._options.customClasses,...e}}get contentOptions(){return this._contentOptions}set contentOptions(e){this._contentOptions=e,this._withWebview((t=>t.contentOptions=e))}set localResourcesRoot(e){this._withWebview((t=>t.localResourcesRoot=e))}async postMessage(e,t){if(this._webview.value)return this._webview.value.postMessage(e,t);if(this._isFirstLoad){let i;const o=new Promise((e=>i=e));return this._firstLoadPendingMessages.add({message:e,transfer:t,resolve:i}),o}return!1}focus(){this._webview.value?.focus()}reload(){this._webview.value?.reload()}selectAll(){this._webview.value?.selectAll()}copy(){this._webview.value?.copy()}paste(){this._webview.value?.paste()}cut(){this._webview.value?.cut()}undo(){this._webview.value?.undo()}redo(){this._webview.value?.redo()}showFind(e=!0){this._webview.value&&(this._webview.value.showFind(e),this._findWidgetVisible?.set(!0))}hideFind(e=!0){this._findWidgetVisible?.reset(),this._webview.value?.hideFind(e)}runFindAction(e){this._webview.value?.runFindAction(e)}_withWebview(e){this._webview.value&&e(this._webview.value)}windowDidDragStart(){this._webview.value?.windowDidDragStart()}windowDidDragEnd(){this._webview.value?.windowDidDragEnd()}setContextKeyService(e){this._webview.value?.setContextKeyService(e)}};Rh=(0,o.g)([(0,o.f)(1,Lh.F),(0,o.f)(2,nc.JN),(0,o.f)(3,H.i6)],Rh);let Oh=class extends p.JT{constructor(e){super(),this._instantiationService=e,this._webviews=new Set,this._onDidChangeActiveWebview=this._register(new g.Q5),this.onDidChangeActiveWebview=this._onDidChangeActiveWebview.event,this._webviewThemeDataProvider=this._instantiationService.createInstance(rh)}get activeWebview(){return this._activeWebview}_updateActiveWebview(e){e!==this._activeWebview&&(this._activeWebview=e,this._onDidChangeActiveWebview.fire(e))}get webviews(){return this._webviews.values()}createWebviewElement(e){const t=this._instantiationService.createInstance(Th,e,this._webviewThemeDataProvider);return this.registerNewWebview(t),t}createWebviewOverlay(e){const t=this._instantiationService.createInstance(Rh,e);return this.registerNewWebview(t),t}registerNewWebview(e){this._webviews.add(e),e.onDidFocus((()=>{this._updateActiveWebview(e)}));const t=()=>{this._activeWebview===e&&this._updateActiveWebview(void 0)};e.onDidBlur(t),e.onDidDispose((()=>{t(),this._webviews.delete(e)}))}};Oh=(0,o.g)([(0,o.f)(0,c.TG)],Oh);var Nh=i(44627),Mh=i(55090),Ph=i(67007),Bh=i(75318);class Fh{constructor(){this.uris=[]}async perform(){return this}toString(){return"(noop)"}}class Wh{constructor(e,t,i){this.newUri=e,this.oldUri=t,this.options=i,this.type="rename"}}let Hh=class e{constructor(e,t,i,o){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o}get uris(){return this._edits.map((e=>[e.newUri,e.oldUri])).flat()}async perform(t){const i=[],o=[];for(const e of this._edits)void 0===e.options.overwrite&&e.options.ignoreIfExists&&await this._fileService.exists(e.newUri)||(i.push({file:{source:e.oldUri,target:e.newUri},overwrite:e.options.overwrite}),o.push(new Wh(e.oldUri,e.newUri,e.options)));return 0===i.length?new Fh:(await this._workingCopyFileService.move(i,t,this._undoRedoInfo),new e(o,{isUndoing:!0},this._workingCopyFileService,this._fileService))}toString(){return`(rename ${this._edits.map((e=>`${e.oldUri} to ${e.newUri}`)).join(", ")})`}};Hh=(0,o.g)([(0,o.f)(2,Bh.I),(0,o.f)(3,ft.sn)],Hh);class zh{constructor(e,t,i){this.newUri=e,this.oldUri=t,this.options=i,this.type="copy"}}let Gh=class{constructor(e,t,i,o,s){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o,this._instaService=s}get uris(){return this._edits.map((e=>[e.newUri,e.oldUri])).flat()}async perform(e){const t=[];for(const e of this._edits)void 0===e.options.overwrite&&e.options.ignoreIfExists&&await this._fileService.exists(e.newUri)||t.push({file:{source:e.oldUri,target:e.newUri},overwrite:e.options.overwrite});if(0===t.length)return new Fh;const i=await this._workingCopyFileService.copy(t,e,this._undoRedoInfo),o=[];for(let e=0;e<i.length;e++){const t=i[e],s=this._edits[e];o.push(new $h(t.resource,{recursive:!0,folder:this._edits[e].options.folder||t.isDirectory,...s.options},!1))}return this._instaService.createInstance(jh,o,{isUndoing:!0})}toString(){return`(copy ${this._edits.map((e=>`${e.oldUri} to ${e.newUri}`)).join(", ")})`}};Gh=(0,o.g)([(0,o.f)(2,Bh.I),(0,o.f)(3,ft.sn),(0,o.f)(4,c.TG)],Gh);class Uh{constructor(e,t,i){this.newUri=e,this.options=t,this.contents=i,this.type="create"}}let Kh=class{constructor(e,t,i,o,s,n){this._edits=e,this._undoRedoInfo=t,this._fileService=i,this._workingCopyFileService=o,this._instaService=s,this._textFileService=n}get uris(){return this._edits.map((e=>e.newUri))}async perform(e){const t=[],i=[],o=[];for(const e of this._edits)if(void 0!==e.options.overwrite||!e.options.ignoreIfExists||!await this._fileService.exists(e.newUri)){if(e.options.folder)t.push({resource:e.newUri});else{const t=void 0!==e.contents?e.contents:await this._textFileService.getEncodedReadable(e.newUri);i.push({resource:e.newUri,contents:t,overwrite:e.options.overwrite})}o.push(new $h(e.newUri,e.options,!e.options.folder&&!e.contents))}return 0===t.length&&0===i.length?new Fh:(await this._workingCopyFileService.createFolder(t,e,this._undoRedoInfo),await this._workingCopyFileService.create(i,e,this._undoRedoInfo),this._instaService.createInstance(jh,o,{isUndoing:!0}))}toString(){return`(create ${this._edits.map((e=>e.options.folder?`folder ${e.newUri}`:`file ${e.newUri} with ${e.contents?.byteLength||0} bytes`)).join(", ")})`}};Kh=(0,o.g)([(0,o.f)(2,ft.sn),(0,o.f)(3,Bh.I),(0,o.f)(4,c.TG),(0,o.f)(5,Js.MM)],Kh);class $h{constructor(e,t,i){this.oldUri=e,this.options=t,this.undoesCreate=i,this.type="delete"}}let jh=class{constructor(e,t,i,o,s,n,r){this._edits=e,this._undoRedoInfo=t,this._workingCopyFileService=i,this._fileService=o,this._configurationService=s,this._instaService=n,this._logService=r}get uris(){return this._edits.map((e=>e.oldUri))}async perform(e){const t=[],i=[];for(const e of this._edits){let o,s;try{o=await this._fileService.resolve(e.oldUri,{resolveMetadata:!0})}catch(t){if(!e.options.ignoreIfNotExists)throw new Error(`${e.oldUri} does not exist and can not be deleted`);continue}if(t.push({resource:e.oldUri,recursive:e.options.recursive,useTrash:!e.options.skipTrashBin&&this._fileService.hasCapability(e.oldUri,4096)&&this._configurationService.getValue("files.enableTrash")}),!(e.undoesCreate||e.options.folder||"number"==typeof e.options.maxSize&&o.size>e.options.maxSize))try{s=await this._fileService.readFile(e.oldUri)}catch(e){this._logService.error(e)}void 0!==s&&i.push(new Uh(e.oldUri,e.options,s.value))}return 0===t.length?new Fh:(await this._workingCopyFileService.delete(t,e,this._undoRedoInfo),0===i.length?new Fh:this._instaService.createInstance(Kh,i,{isUndoing:!0}))}toString(){return`(delete ${this._edits.map((e=>e.oldUri)).join(", ")})`}};jh=(0,o.g)([(0,o.f)(2,Bh.I),(0,o.f)(3,ft.sn),(0,o.f)(4,Ee.Ui),(0,o.f)(5,c.TG),(0,o.f)(6,Z.VZ)],jh);class Xh{constructor(e,t,i,o){this.label=e,this.code=t,this.operations=i,this.confirmBeforeUndo=o,this.type=1,this.resources=i.map((e=>e.uris)).flat()}async undo(){await this._reverse()}async redo(){await this._reverse()}async _reverse(){for(let e=0;e<this.operations.length;e++){const t=this.operations[e],i=await t.perform(ai.T.None);this.operations[e]=i}}toString(){return this.operations.map((e=>String(e))).join(", ")}}let Jh=class{constructor(e,t,i,o,s,n,r,a,c,d){this._label=e,this._code=t,this._undoRedoGroup=i,this._undoRedoSource=o,this._confirmBeforeUndo=s,this._progress=n,this._token=r,this._edits=a,this._instaService=c,this._undoRedoService=d}async apply(){const e=[],t={undoRedoGroupId:this._undoRedoGroup.id},i=[];for(const e of this._edits)e.newResource&&e.oldResource&&!e.options?.copy?i.push(new Wh(e.newResource,e.oldResource,e.options??{})):e.newResource&&e.oldResource&&e.options?.copy?i.push(new zh(e.newResource,e.oldResource,e.options??{})):!e.newResource&&e.oldResource?i.push(new $h(e.oldResource,e.options??{},!1)):e.newResource&&!e.oldResource&&i.push(new Uh(e.newResource,e.options??{},await e.options.contents));if(0===i.length)return[];const o=[];o[0]=[i[0]];for(let e=1;e<i.length;e++){const t=i[e],s=(0,Y.eJ)(o);s[0].type===t.type?s.push(t):o.push([t])}for(const i of o){if(this._token.isCancellationRequested)break;let o;switch(i[0].type){case"rename":o=this._instaService.createInstance(Hh,i,t);break;case"copy":o=this._instaService.createInstance(Gh,i,t);break;case"delete":o=this._instaService.createInstance(jh,i,t);break;case"create":o=this._instaService.createInstance(Kh,i,t)}if(o){const t=await o.perform(this._token);e.push(t)}this._progress.report(void 0)}const s=new Xh(this._label,this._code,e,this._confirmBeforeUndo);return this._undoRedoService.pushElement(s,this._undoRedoGroup,this._undoRedoSource),s.resources}};Jh=(0,o.g)([(0,o.f)(8,c.TG),(0,o.f)(9,ri.tJ)],Jh);var Yh=i(69386),Qh=i(85215),qh=i(95215),Zh=i(97711),el=i(35084);class tl{constructor(e){this._modelReference=e,this.model=this._modelReference.object.textEditorModel,this._edits=[]}dispose(){this._modelReference.dispose()}isNoOp(){return!(this._edits.length>0||void 0!==this._newEol&&this._newEol!==this.model.getEndOfLineSequence())}addEdit(e){this._expectedModelVersionId=e.versionId;const{textEdit:t}=e;if("number"==typeof t.eol&&(this._newEol=t.eol),!t.range&&!t.text)return;if(qn.e.isEmpty(t.range)&&!t.text)return;let i;i=t.range?qn.e.lift(t.range):this.model.getFullModelRange(),this._edits.push({...Yh.h.replaceMove(i,t.text),insertAsSnippet:t.insertAsSnippet})}validate(){return void 0===this._expectedModelVersionId||this.model.getVersionId()===this._expectedModelVersionId?{canApply:!0}:{canApply:!1,reason:this.model.uri}}getBeforeCursorState(){return null}apply(){this._edits.length>0&&(this._edits=this._edits.map(this._transformSnippetStringToInsertText,this).sort(((e,t)=>qn.e.compareRangesUsingStarts(e.range,t.range))),this.model.pushEditOperations(null,this._edits,(()=>null))),void 0!==this._newEol&&this.model.pushEOL(this._newEol)}_transformSnippetStringToInsertText(e){if(!e.insertAsSnippet)return e;if(!e.text)return e;const t=el.Yj.asInsertText(e.text);return{...e,insertAsSnippet:!1,text:t}}}class il extends tl{constructor(e,t){super(e),this._editor=t}getBeforeCursorState(){return this._canUseEditor()?this._editor.getSelections():null}apply(){if(this._canUseEditor()){if(this._edits.length>0){const e=Zh.f.get(this._editor);if(e&&this._edits.some((e=>e.insertAsSnippet))){const t=[];for(const e of this._edits)e.range&&null!==e.text&&t.push({range:qn.e.lift(e.range),template:e.insertAsSnippet?e.text:el.Yj.escape(e.text)});e.apply(t,{undoStopBefore:!1,undoStopAfter:!1})}else this._edits=this._edits.map(this._transformSnippetStringToInsertText,this).sort(((e,t)=>qn.e.compareRangesUsingStarts(e.range,t.range))),this._editor.executeEdits("",this._edits)}void 0!==this._newEol&&this._editor.hasModel()&&this._editor.getModel().pushEOL(this._newEol)}else super.apply()}_canUseEditor(){return this._editor?.getModel()?.uri.toString()===this.model.uri.toString()}}let ol=class{constructor(e,t,i,o,s,n,r,a,c,d,h,l){this._label=e,this._code=t,this._editor=i,this._undoRedoGroup=o,this._undoRedoSource=s,this._progress=n,this._token=r,this._editorWorker=c,this._modelService=d,this._textModelResolverService=h,this._undoRedoService=l,this._edits=new se.Y9;for(const e of a){let t=this._edits.get(e.resource);t||(t=[],this._edits.set(e.resource,t)),t.push(e)}}_validateBeforePrepare(){for(const e of this._edits.values())for(const t of e)if("number"==typeof t.versionId){const e=this._modelService.getModel(t.resource);if(e&&e.getVersionId()!==t.versionId)throw new Error(`${e.uri.toString()} has changed in the meantime`)}}async _createEditsTasks(){const e=[],t=[];for(const[i,o]of this._edits){const s=this._textModelResolverService.createModelReference(i).then((async t=>{let i,s=!1;this._editor?.getModel()?.uri.toString()===t.object.textEditorModel.uri.toString()?(i=new il(t,this._editor),s=!0):i=new tl(t);for(const e of o)if(s&&!e.textEdit.insertAsSnippet){const t=await this._editorWorker.computeMoreMinimalEdits(e.resource,[e.textEdit]);if(t)for(const o of t)i.addEdit(new ni.Gl(e.resource,o,e.versionId,e.metadata));else i.addEdit(e)}else i.addEdit(e);e.push(i)}));t.push(s)}return await Promise.all(t),e}_validateTasks(e){for(const t of e){const e=t.validate();if(!e.canApply)return e}return{canApply:!0}}async apply(){this._validateBeforePrepare();const e=await this._createEditsTasks();try{if(this._token.isCancellationRequested)return[];const t=[],i=this._validateTasks(e);if(!i.canApply)throw new Error(`${i.reason.toString()} has changed in the meantime`);if(1===e.length){const i=e[0];if(!i.isNoOp()){const e=new qh.vi(this._label,this._code,i.model,i.getBeforeCursorState());this._undoRedoService.pushElement(e,this._undoRedoGroup,this._undoRedoSource),i.apply(),e.close(),t.push(i.model.uri)}this._progress.report(void 0)}else{const i=new qh.z5(this._label,this._code,e.map((e=>new qh.vi(this._label,this._code,e.model,e.getBeforeCursorState()))));this._undoRedoService.pushElement(i,this._undoRedoGroup,this._undoRedoSource);for(const i of e)i.apply(),this._progress.report(void 0),t.push(i.model.uri);i.close()}return t}finally{(0,p.B9)(e)}}};ol=(0,o.g)([(0,o.f)(8,Qh.p),(0,o.f)(9,mt.q),(0,o.f)(10,Us.S),(0,o.f)(11,ri.tJ)],ol);let sl=class{constructor(e,t,i,o,s,n,r,a,c,d,h){this._label=e,this._code=t,this._editor=i,this._progress=o,this._token=s,this._edits=n,this._undoRedoGroup=r,this._undoRedoSource=a,this._confirmBeforeUndo=c,this._instaService=d,this._logService=h}ariaMessage(){const e=new se.Y9,t=new se.Y9;let i=0;for(const o of this._edits)o instanceof ni.Gl?(i+=1,t.set(o.resource,!0)):o instanceof ni.pH&&e.set(o.oldResource??o.newResource,!0);return 0===this._edits.length?(0,l.NC)("summary.0","Made no edits"):0===e.size?i>1&&t.size>1?(0,l.NC)("summary.nm","Made {0} text edits in {1} files",i,t.size):(0,l.NC)("summary.n0","Made {0} text edits in one file",i):(0,l.NC)("summary.textFiles","Made {0} text edits in {1} files, also created or deleted {2} files",i,t.size,e.size)}async perform(){if(0===this._edits.length)return[];const e=[1];for(let t=1;t<this._edits.length;t++)Object.getPrototypeOf(this._edits[t-1])===Object.getPrototypeOf(this._edits[t])?e[e.length-1]++:e.push(1);const t=this._edits.length>1?0:void 0;this._progress.report({increment:t,total:100});const i={report:e=>this._progress.report({increment:100/this._edits.length})},o=[];let s=0;for(const t of e){if(this._token.isCancellationRequested)break;const e=this._edits.slice(s,s+t);e[0]instanceof ni.pH?o.push(await this._performFileEdits(e,this._undoRedoGroup,this._undoRedoSource,this._confirmBeforeUndo,i)):e[0]instanceof ni.Gl?o.push(await this._performTextEdits(e,this._undoRedoGroup,this._undoRedoSource,i)):e[0]instanceof Ph.t?o.push(await this._performCellEdits(e,this._undoRedoGroup,this._undoRedoSource,i)):console.log("UNKNOWN EDIT"),s+=t}return o.flat()}async _performFileEdits(e,t,i,o,s){this._logService.debug("_performFileEdits",JSON.stringify(e));const n=this._instaService.createInstance(Jh,this._label||(0,l.NC)("workspaceEdit","Workspace Edit"),this._code||"undoredo.workspaceEdit",t,i,o,s,this._token,e);return await n.apply()}async _performTextEdits(e,t,i,o){this._logService.debug("_performTextEdits",JSON.stringify(e));const s=this._instaService.createInstance(ol,this._label||(0,l.NC)("workspaceEdit","Workspace Edit"),this._code||"undoredo.workspaceEdit",this._editor,t,i,o,this._token,e);return await s.apply()}async _performCellEdits(e,t,i,o){this._logService.debug("_performCellEdits",JSON.stringify(e));const s=this._instaService.createInstance(Ph.s,t,i,o,this._token,e);return await s.apply()}};sl=(0,o.g)([(0,o.f)(9,c.TG),(0,o.f)(10,Z.VZ)],sl);let nl=class{constructor(e,t,i,o,s,n,r){this._instaService=e,this._logService=t,this._editorService=i,this._lifecycleService=o,this._dialogService=s,this._workingCopyService=n,this._configService=r,this._activeUndoRedoGroups=new jd.S}setPreviewHandler(e){return this._previewHandler=e,(0,p.OF)((()=>{this._previewHandler===e&&(this._previewHandler=void 0)}))}hasPreviewHandler(){return Boolean(this._previewHandler)}async apply(e,t){let i=function(e){return e.map((e=>{if(ni.Gl.is(e))return ni.Gl.lift(e);if(ni.pH.is(e))return ni.pH.lift(e);if(Ph.t.is(e))return Ph.t.lift(e);throw new Error("Unsupported edit")}))}(Array.isArray(e)?e:e.edits);if(0===i.length)return{ariaSummary:(0,l.NC)("nothing","Made no edits"),isApplied:!1};this._previewHandler&&(t?.showPreview||i.some((e=>e.metadata?.needsConfirmation)))&&(i=await this._previewHandler(i,t));let o,s=t?.editor;if(!s){const e=this._editorService.activeTextEditorControl;(0,jr.CL)(e)&&(s=e)}s&&s.getOption(89)&&(s=void 0);let n=()=>{};if("number"==typeof t?.undoRedoGroupId)for(const e of this._activeUndoRedoGroups)if(e.id===t.undoRedoGroupId){o=e;break}o||(o=new ri.Xt,n=this._activeUndoRedoGroups.push(o));const r=t?.quotableLabel||t?.label,a=this._instaService.createInstance(sl,r,t?.code,s,t?.progress??E.Ex.None,t?.token??ai.T.None,i,o,t?.undoRedoSource,!!t?.confirmBeforeUndo);let c;try{c=this._lifecycleService.onBeforeShutdown((e=>e.veto(this._shouldVeto(r,e.reason),"veto.blukEditService")));const e=await a.perform();return t?.respectAutoSaveConfig&&!0===this._configService.getValue(rl)&&e.length>1&&await this._saveAll(e),{ariaSummary:a.ariaMessage(),isApplied:i.length>0}}catch(e){throw this._logService.error(e),e}finally{c?.dispose(),n()}}async _saveAll(e){const t=new se.XV(e),i=this._workingCopyService.dirtyWorkingCopies.map((async e=>{t.has(e.resource)&&await e.save()})),o=await Promise.allSettled(i);for(const e of o)"rejected"===e.status&&this._logService.warn(e.reason)}async _shouldVeto(e,t){let i,o;switch(t){case 1:i=(0,l.NC)("closeTheWindow.message","Are you sure you want to close the window?"),o=(0,l.NC)({key:"closeTheWindow",comment:["&& denotes a mnemonic"]},"&&Close Window");break;case 4:i=(0,l.NC)("changeWorkspace.message","Are you sure you want to change the workspace?"),o=(0,l.NC)({key:"changeWorkspace",comment:["&& denotes a mnemonic"]},"Change &&Workspace");break;case 3:i=(0,l.NC)("reloadTheWindow.message","Are you sure you want to reload the window?"),o=(0,l.NC)({key:"reloadTheWindow",comment:["&& denotes a mnemonic"]},"&&Reload Window");break;default:i=(0,l.NC)("quit.message","Are you sure you want to quit?"),o=(0,l.NC)({key:"quit",comment:["&& denotes a mnemonic"]},"&&Quit")}return!(await this._dialogService.confirm({message:i,detail:(0,l.NC)("areYouSureQuiteBulkEdit.detail","'{0}' is in progress.",e||(0,l.NC)("fileOperation","File operation")),primaryButton:o})).confirmed}};nl=(0,o.g)([(0,o.f)(0,c.TG),(0,o.f)(1,Z.VZ),(0,o.f)(2,oi.AR),(0,o.f)(3,hs.g),(0,o.f)(4,Ct.Ss),(0,o.f)(5,dd.C),(0,o.f)(6,Ee.Ui)],nl);const rl="files.refactoring.autoSave";h.B.as(ca.IP.Configuration).registerConfiguration({id:"files",properties:{[rl]:{description:(0,l.NC)("refactoring.autoSave","Controls if files that were part of a refactoring are saved automatically"),default:!0,type:"boolean"}}});var al=i(76779),cl=i(43288),dl=i(26340),hl=i(51893),ll=i(75560);function ul(e,t,i){const o=document.createElement("status"===t?"footer":"div");return o.classList.add("part",...i),o.id=e,o.setAttribute("role",t),"status"===t&&o.setAttribute("aria-live","off"),o}function pl(e){const t=e.getContainer()?.parentNode;null!=t&&e.layout(Math.max(e.minimumWidth,Math.min(e.maximumWidth,t.offsetWidth)),Math.max(e.minimumHeight,Math.min(e.maximumHeight,t.offsetHeight)),0,0)}function gl(e,t){function i(){pl(t)}e.oncontextmenu=()=>!1,t.onDidVisibilityChange((e=>{e&&i()})),i()}function ml(e){return s.IO.get(Lh.F).getPart(e)}function vl(e,t){return function(e,t){t.append(e.getContainer());const i=new ResizeObserver((()=>pl(e)));return i.observe(t),{dispose:()=>i.disconnect()}}(ml(e),t)}function bl(e,t){return ml(e).onDidVisibilityChange(t)}function fl(e){return s.IO.get(V.ze).isVisible(e)}function wl(e,t){s.IO.get(V.ze).setPartHidden(!t,e)}function yl(e){return vl("workbench.parts.activitybar",e)}function Cl(e){return vl("workbench.parts.sidebar",e)}function Sl(e){return vl("workbench.parts.panel",e)}function _l(e){return vl("workbench.parts.auxiliarybar",e)}function El(e){return vl("workbench.parts.editor",e)}function xl(e){return vl("workbench.parts.statusbar",e)}function kl(e){let t=class extends Xi.J{constructor(t,i,o){super(e.id,t,i,o)}createEditor(t){this.content=(0,w.$)(".editor-pane-content"),this.content.style.display="flex",this.content.style.alignItems="stretch",(0,w.R3)(t,this.content),this._register(e.renderBody(this.content))}layout(e){this.content.style.height=`${e.height}px`,this.content.style.width=`${e.width}px`}};t=(0,o.g)([(0,o.f)(0,j.bU),(0,o.f)(1,M.XE),(0,o.f)(2,R.Uy)],t);class i extends Cd.Q{constructor(t){super(),this.closeHandler=t,this.name=e.name,this.title=e.name,this.description=e.name,this.dirty=!1}get typeId(){return i.ID}get resource(){}setName(e){this.name=e,this._onDidChangeLabel.fire()}setTitle(e){this.title=e,this._onDidChangeLabel.fire()}setDescription(e){this.description=e,this._onDidChangeLabel.fire()}getLabelValue(e,t){if("string"==typeof e)return e;switch(t){case 0:return e.short;case 2:return e.long;default:return e.medium}}getName(){return this.name}getTitle(e){return this.getLabelValue(this.title,e)}getDescription(e){return this.getLabelValue(this.description,e)}isDirty(){return this.dirty}setDirty(e){this.dirty=e,this._onDidChangeDirty.fire()}}return i.ID=`workbench.editors.${e.id}Input`,{disposable:h.B.as(Gi.bS.EditorPane).registerEditorPane(Ki.gS.create(t,e.id,e.name),[new n.M(i)]),CustomEditorInput:i}}function Dl(e){const t=null!=e.icon?J.ov.parse(e.icon):void 0,i=h.B.as(r.IP.ViewContainersRegistry).registerViewContainer({id:e.id,title:e.name,order:e.order,ctorDescriptor:new n.M($.XV,[e.id,{mergeViewWithContainerWhenSingleView:!0}]),hideIfEmpty:!0,icon:t},e.location),o=[{id:e.id,name:e.name,canToggleVisibility:!1,ctorDescriptor:new n.M(class extends gi.qV{renderBody(t){super.renderBody(t),this.content=(0,w.$)(".view-pane-content"),this.content.style.display="flex",this.content.style.alignItems="stretch",(0,w.R3)(t,this.content),this._register(e.renderBody(this.content))}getActionViewItem(t,i){const o=(e.actions??[]).find((e=>e.id===t.id));return null!=o?.render?new class extends _a.YH{constructor(){super(null,t),this.render=o.render}}:super.getActionViewItem(t,i)}layoutBody(e,t){this.content.style.height=`${e}px`,this.content.style.width=`${t}px`}}),canMoveView:e.canMoveView??!0,containerIcon:t}];h.B.as(r.IP.ViewsRegistry).registerViews(o,i),e.default&&s.IO.get(hs.g).when(4).then((()=>{s.IO.get(r.qC).openViewContainer(e.id)}));const a=new p.SL;a.add({dispose(){h.B.as(r.IP.ViewsRegistry).deregisterViews(o,i),h.B.as(r.IP.ViewContainersRegistry).deregisterViewContainer(i)}});for(const t of e.actions??[])a.add((0,te.r1)(class extends te.Ke{constructor(){super({id:t.id,title:{value:t.title,original:t.title},category:ie.R.View,menu:[{id:te.eH.ViewTitle,when:H.Ao.equals("view",e.id),group:"navigation",order:t.order},{id:te.eH.CommandPalette}],tooltip:t.tooltip,icon:null!=t.icon?Ze.lA[t.icon]:void 0}),this.run=t.run??(async()=>{})}}));return a}let Al=class{constructor(e){this.editorPart=e}createEditorDropTarget(e,t){return this.editorPart.createEditorDropTarget(e,t)}};function Il(){const e=s.IO.get(Po.Qw).getContainer();return null!=e&&!!(t=e).isConnected&&(null!=t.checkVisibility?t.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):t.offsetHeight>0&&t.offsetWidth>0);var t}Al=(0,o.g)([(0,o.f)(0,Po.Qw)],Al);let Tl,Vl=class extends Ed{constructor(e,t,i,o,s,n,r,a,c,d,h,l){super(t,i,o,s,n,r,a,c,d,h),this.openEditor=(0,Mh.D)(l,this.openEditor.bind(this),e)}get activeTextEditorControl(){const e=s.IO.get(js.$).getFocusedCodeEditor();return null!=e&&e instanceof Nh.gh?e:super.activeTextEditorControl}async openEditor(e,t,i){if(Il())return super.openEditor(e,t,i)}};function Ll(e,t){return null!=t&&(Tl=t),{...(0,al.Z)(),[ni.vu.toString()]:new n.M(nl,[],!0),...(0,cl.Z)({isKeybindingConfigurationVisible:Il,shouldUseGlobalPicker:Il}),[r.qC.toString()]:new n.M(a.h,[],!1),[r.XH.toString()]:new n.M(ue,[],!0),[pe.By.toString()]:new n.M(fe,[],!0),[ve.c.toString()]:new n.M(zt,[],!0),[ke.B.toString()]:new n.M(qt,[],!0),[pi.gE.toString()]:new n.M(li,[],!0),[js.$.toString()]:new n.M(Dd.h,[],!0),[ld.X.toString()]:new n.M(ld.a,[],!1),[Po.Qw.toString()]:new n.M(zs,[],!1),[jc.iq.toString()]:new n.M(Pd,[],!1),[yd.u.toString()]:new n.M(Al,[],!0),[oi.AR.toString()]:new n.M(Vl,[e],!1),[Uo.es.toString()]:new n.M(xd,[],!1),[Ji._4.toString()]:new n.M(Ji.dN,[],!0),[O.u.toString()]:new n.M(kd.g,[],!0),[Ad.a.toString()]:new n.M(Ad.e,[],!0),[Bd.g.toString()]:new n.M(Bd.R,[],!0),[Fd.CE.toString()]:new n.M(Hd,[],!1),[vo.h.toString()]:new n.M(Xd,[],!0),[Sc.TY.toString()]:new n.M(oh,[],!0),[nc.JN.toString()]:new n.M(Oh,[],!0),[ac.J.toString()]:new n.M(ac.H,[],!0),[xc.jo.toString()]:new n.M(xc.Rs,[],!0)}}Vl=(0,o.g)([(0,o.f)(1,Po.Qw),(0,o.f)(2,c.TG),(0,o.f)(3,ft.sn),(0,o.f)(4,Ee.Ui),(0,o.f)(5,gt.ec),(0,o.f)(6,si.v),(0,o.f)(7,Uo.es),(0,o.f)(8,os.N2),(0,o.f)(9,at.$),(0,o.f)(10,ld.X),(0,o.f)(11,Us.S)],Vl),(0,hl.l)({"vs/workbench/contrib/webview/browser/pre/service-worker.js":()=>(0,dl.T)(new URL(i(86055),i.b).href,Tl),"vs/workbench/contrib/webview/browser/pre/index.html":()=>(0,dl.T)(new URL(i(25608),i.b).href,Tl),"vs/workbench/contrib/webview/browser/pre/index-no-csp.html":()=>(0,dl.T)(new URL(i(39568),i.b).href,Tl),"vs/workbench/contrib/webview/browser/pre/fake.html":()=>(0,dl.T)(new URL(i(52094),i.b).href,Tl)}),(0,ll.zV)((async e=>{const t=e.get(ve.c),i=e.get(r.XH);e.get(jc.iq),t.getPaneComposites(1);const o=e.get(Lh.F),s=document.createElement("div");s.style.display="none",document.body.append(s);for(const{id:e,role:t,classes:i,options:n}of[{id:"workbench.parts.activitybar",role:"none",classes:["activitybar","left"]},{id:"workbench.parts.sidebar",role:"none",classes:["sidebar","left"]},{id:"workbench.parts.editor",role:"main",classes:["editor"],options:{restorePreviousState:!1}},{id:"workbench.parts.panel",role:"none",classes:["panel","basepanel",(0,V.Y8)(2)]},{id:"workbench.parts.auxiliarybar",role:"none",classes:["auxiliarybar","basepanel","right"]},{id:"workbench.parts.statusbar",role:"status",classes:["statusbar"]}]){const r=ul(e,t,i),a=o.getPart(e);a.create(r,n),gl(r,a),s.append(r)}await t.openPaneComposite(i.getDefaultViewContainer(0)?.id,0),await t.openPaneComposite(i.getDefaultViewContainer(1)?.id,1),await t.openPaneComposite(i.getDefaultViewContainer(2)?.id,2)}))},67245:(e,t,i)=>{i.d(t,{ET:()=>a,Ux:()=>s,fi:()=>r,pS:()=>n});var o=i(1432);function s(e){return!!e.workspaceUri}function n(e){return!!e.fileUri}function r(e){const t=a(e),i=e.getValue("window.menuBarVisibility");return"default"===i||"native"===t&&"compact"===i||o.dz&&o.tY?"classic":i}function a(e){if(o.$L)return"custom";const t=e.getValue("window");if(t){if(o.dz&&!0===t.nativeTabs)return"native";if(o.dz&&!1===t.nativeFullScreen)return"native";const e=t.titleBarStyle;if("native"===e||"custom"===e)return e}return o.IJ?"native":"custom"}},12427:(e,t,i)=>{i.d(t,{r:()=>d});var o=i(97781),s=i(88550),n=i(1432),r=i(65321),a=i(16268),c=i(73910);(0,o.Ic)(((e,t)=>{const i=(0,s.Xp)(e);t.addRule(`.monaco-workbench { background-color: ${i}; }`);const o=e.getColor(c.TBF);if(o&&t.addRule(`.monaco-workbench ::selection { background-color: ${o}; }`),n.$L){const t=e.getColor(s.Z1);if(t){const e="monaco-workbench-meta-theme-color";let i=document.getElementById(e);i||(i=(0,r.wL)(),i.name="theme-color",i.id=e),i.content=t.toString()}}a.G6&&t.addRule("\n\t\t\tbody.web {\n\t\t\t\ttouch-action: none;\n\t\t\t}\n\t\t\t.monaco-workbench .monaco-editor .view-lines {\n\t\t\t\tuser-select: text;\n\t\t\t\t-webkit-user-select: text;\n\t\t\t}\n\t\t"),n.gn&&(0,a.$W)()&&t.addRule(`body { background-color: ${i}; }`)}));const d=n.ED?'"Segoe WPC", "Segoe UI", sans-serif':n.dz?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif'}}]);
//# sourceMappingURL=583.bundle.js.map