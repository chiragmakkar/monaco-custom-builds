"use strict";(self.webpackChunkmonaco_custom_bundle=self.webpackChunkmonaco_custom_bundle||[]).push([[894],{64306:(e,t,i)=>{i.d(t,{CK:()=>ie,u6:()=>te,xY:()=>$});var n=i(80855),s=i(65321),o=i(10553),a=i(90317),r=i(32107),c=i(90573),d=i(74741),l=i(9488),u=i(15393),p=i(73046),h=i(59365),g=i(5976),b=i(95935),m=i(65520),k=i(72042),f=i(63580),v=i(60961),C=i(84144),S=i(33108),w=i(93983),B=i(5606),y=i(72065),I=i(91847),x=i(44349),D=i(32414),N=i(50988),A=i(10829),E=i(86253),R=i(97781),T=i(25670),F=i(70590),L=i(8321),V=i(5104),M=i(29250),O=i(91825),_=i(92714),q=i(24448),H=i(22713);const P=s.$;function U(e){const t=P("input");return t.type="checkbox",t.tabIndex=-1,e.push(o.o.ignoreTarget(t)),t}function W(e,t,i){const n=e.getBreakpoints().length+e.getExceptionBreakpointsForSession(t).length+e.getFunctionBreakpoints().length+e.getDataBreakpoints().length+e.getInstructionBreakpoints().length;return 22*Math.min(i,n)}let $=class extends F.qV{constructor(e,t,i,n,s,o,a,r,c,d,l,p,h,g,b,m,k){super(e,n,t,c,l,d,s,p,o,h),this.debugService=i,this.editorService=a,this.contextViewService=r,this.labelService=g,this.hoverService=m,this.languageService=k,this.needsRefresh=!1,this.needsStateChange=!1,this.ignoreLayout=!1,this.autoFocusedIndex=-1,this.menu=b.createMenu(C.eH.DebugBreakpointsContext,l),this._register(this.menu),this.breakpointItemType=M.vL.bindTo(l),this.breakpointSupportsCondition=M.tY.bindTo(l),this.breakpointInputFocused=M.fq.bindTo(l),this._register(this.debugService.getModel().onDidChangeBreakpoints((()=>this.onBreakpointsChange()))),this._register(this.debugService.getViewModel().onDidFocusSession((()=>this.onBreakpointsChange()))),this._register(this.debugService.onDidChangeState((()=>this.onStateChange()))),this.hintDelayer=this._register(new u.pY((()=>this.updateBreakpointsHint(!0)),4e3))}renderBody(e){super.renderBody(e),this.element.classList.add("debug-pane"),e.classList.add("debug-breakpoints");const t=new K(this);this.list=this.instantiationService.createInstance(D.ev,"Breakpoints",e,t,[this.instantiationService.createInstance(z,this.menu,this.breakpointSupportsCondition,this.breakpointItemType),new j(this.menu,this.breakpointSupportsCondition,this.breakpointItemType,this.debugService),new Z(this,this.debugService,this.contextViewService),this.instantiationService.createInstance(Q,this.menu,this.breakpointSupportsCondition,this.breakpointItemType),this.instantiationService.createInstance(Y),new G(this,this.debugService,this.contextViewService,this.labelService),this.instantiationService.createInstance(X)],{identityProvider:{getId:e=>e.getId()},multipleSelectionSupport:!1,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:e=>e},accessibilityProvider:new ee(this.debugService,this.labelService),overrideStyles:{listBackground:this.getBackgroundColor()}}),M.Wp.bindTo(this.list.contextKeyService),this._register(this.list.onContextMenu(this.onListContextMenu,this)),this.list.onMouseMiddleClick((async({element:e})=>{e instanceof O.Uo?await this.debugService.removeBreakpoints(e.getId()):e instanceof O.Tp?await this.debugService.removeFunctionBreakpoints(e.getId()):e instanceof O.K1?await this.debugService.removeDataBreakpoints(e.getId()):e instanceof O.k9&&await this.debugService.removeInstructionBreakpoints(e.instructionReference)})),this._register(this.list.onDidOpen((async e=>{!e.element||e.browserEvent instanceof MouseEvent&&1===e.browserEvent.button||(e.element instanceof O.Uo&&te(e.element,e.sideBySide,e.editorOptions.preserveFocus||!1,e.editorOptions.pinned||!e.editorOptions.preserveFocus,this.debugService,this.editorService),e.element instanceof O.k9&&(await this.editorService.openEditor(_.n.instance)).goToAddress(e.element.instructionReference,e.browserEvent instanceof MouseEvent&&2===e.browserEvent.detail),e.browserEvent instanceof MouseEvent&&2===e.browserEvent.detail&&e.element instanceof O.Tp&&e.element!==this.inputBoxData?.breakpoint&&this.renderInputBox({breakpoint:e.element,type:"name"}))}))),this.list.splice(0,this.list.length,this.elements),this._register(this.onDidChangeBodyVisibility((e=>{e&&(this.needsRefresh&&this.onBreakpointsChange(),this.needsStateChange&&this.onStateChange())})));const i=this.viewDescriptorService.getViewContainerModel(this.viewDescriptorService.getViewContainerByViewId(this.id));this._register(i.onDidChangeAllViewDescriptors((()=>{this.updateSize()})))}renderHeaderTitle(e,t){super.renderHeaderTitle(e,t);const i=s.R3(e,P("span.breakpoint-warning"));this.hintContainer=this._register(new r.g(i,{supportIcons:!0,hoverDelegate:{showHover:(e,t)=>this.hoverService.showHover({content:e.content,target:this.hintContainer.element},t),delay:this.configurationService.getValue("workbench.hover.delay")}})),s.Cp(this.hintContainer.element)}focus(){super.focus(),this.list?.domFocus()}renderInputBox(e){this._inputBoxData=e,this.onBreakpointsChange(),this._inputBoxData=void 0}get inputBoxData(){return this._inputBoxData}layoutBody(e,t){if(!this.ignoreLayout){super.layoutBody(e,t),this.list?.layout(e,t);try{this.ignoreLayout=!0,this.updateSize()}finally{this.ignoreLayout=!1}}}onListContextMenu(e){const t=e.element,i=t instanceof O.Uo?"breakpoint":t instanceof O.hO?"exceptionBreakpoint":t instanceof O.Tp?"functionBreakpoint":t instanceof O.K1?"dataBreakpoint":t instanceof O.k9?"instructionBreakpoint":void 0;this.breakpointItemType.set(i);const n=this.debugService.getViewModel().focusedSession,s=t instanceof O.hO?t.supportsCondition:!n||!!n.capabilities.supportsConditionalBreakpoints;this.breakpointSupportsCondition.set(s);const o=[];(0,v.LJ)(this.menu,{arg:e.element,shouldForwardArgs:!1},{primary:[],secondary:o},"inline"),this.contextMenuService.showContextMenu({getAnchor:()=>e.anchor,getActions:()=>o,getActionsContext:()=>t})}updateSize(){const e=this.viewDescriptorService.getViewContainerModel(this.viewDescriptorService.getViewContainerByViewId(this.id)),t=this.debugService.getViewModel().focusedSession?.getId();this.minimumBodySize=0===this.orientation?W(this.debugService.getModel(),t,9):170,this.maximumBodySize=0===this.orientation&&e.visibleViewDescriptors.length>1?W(this.debugService.getModel(),t,Number.POSITIVE_INFINITY):Number.POSITIVE_INFINITY}updateBreakpointsHint(e=!1){if(!this.hintContainer)return;const t=this.debugService.getViewModel().focusedSession?.configuration.type,i=t?this.debugService.getAdapterManager().getDebugger(t):void 0,n=i?.strings?.[M.hN.UnverifiedBreakpoints],o=n&&this.debugService.getModel().getBreakpoints().filter((e=>{if(e.verified||!e.enabled)return!1;const t=this.languageService.guessLanguageIdByFilepathOrFirstLine(e.uri);return t&&i.interestedInLanguage(t)}));if(n&&o?.length&&this.debugService.getModel().areBreakpointsActivated())if(e){const e=new h.W5(void 0,{isTrusted:!0}).appendMarkdown(n);this.hintContainer.setLabel("$(warning)",void 0,{title:{markdown:e,markdownNotSupportedFallback:n}}),s.$Z(this.hintContainer.element)}else this.hintDelayer.schedule();else s.Cp(this.hintContainer.element)}onBreakpointsChange(){if(this.isBodyVisible()){if(this.updateSize(),this.list){const e=this.list.getFocus()[0],t=e&&!this.elements.includes(this.list.element(e));this.list.splice(0,this.list.length,this.elements),this.needsRefresh=!1,t&&this.list.focusNth(Math.min(e,this.list.length-1))}this.updateBreakpointsHint()}else this.needsRefresh=!0}onStateChange(){if(this.isBodyVisible()){this.needsStateChange=!1;const e=this.debugService.getViewModel().focusedThread;let t=!1;if(e&&e.stoppedDetails&&e.stoppedDetails.hitBreakpointIds&&e.stoppedDetails.hitBreakpointIds.length>0){const i=e.stoppedDetails.hitBreakpointIds,n=this.elements.findIndex((t=>{const n=t.getIdFromAdapter(e.session.getId());return"number"==typeof n&&-1!==i.indexOf(n)}));n>=0&&(this.list.setFocus([n]),this.list.setSelection([n]),t=!0,this.autoFocusedIndex=n)}if(!t){const e=this.list.getFocus(),t=this.list.getSelection();this.autoFocusedIndex>=0&&(0,l.fS)(e,t)&&e.indexOf(this.autoFocusedIndex)>=0&&(this.list.setFocus([]),this.list.setSelection([])),this.autoFocusedIndex=-1}this.updateBreakpointsHint()}else this.needsStateChange=!0}get elements(){const e=this.debugService.getModel(),t=this.debugService.getViewModel().focusedSession?.getId();return e.getExceptionBreakpointsForSession(t).concat(e.getFunctionBreakpoints()).concat(e.getDataBreakpoints()).concat(e.getBreakpoints()).concat(e.getInstructionBreakpoints())}};$=(0,n.g)([(0,n.f)(1,B.i),(0,n.f)(2,M.tn),(0,n.f)(3,I.d),(0,n.f)(4,y.TG),(0,n.f)(5,R.XE),(0,n.f)(6,q.AR),(0,n.f)(7,B.u),(0,n.f)(8,S.Ui),(0,n.f)(9,L.XH),(0,n.f)(10,w.i6),(0,n.f)(11,N.v4),(0,n.f)(12,A.bU),(0,n.f)(13,x.e),(0,n.f)(14,C.co),(0,n.f)(15,H.B),(0,n.f)(16,k.O)],$);class K{constructor(e){this.view=e}getHeight(e){return 22}getTemplateId(e){if(e instanceof O.Uo)return z.ID;if(e instanceof O.Tp){const t=this.view.inputBoxData?.breakpoint;return!e.name||t&&t.getId()===e.getId()?G.ID:Q.ID}if(e instanceof O.hO){const t=this.view.inputBoxData?.breakpoint;return t&&t.getId()===e.getId()?Z.ID:j.ID}return e instanceof O.K1?Y.ID:e instanceof O.k9?X.ID:""}}const J=new Map;let z=class e{constructor(e,t,i,n,s){this.menu=e,this.breakpointSupportsCondition=t,this.breakpointItemType=i,this.debugService=n,this.labelService=s}static{this.ID="breakpoints"}get templateId(){return e.ID}renderTemplate(e){const t=Object.create(null);t.toDispose=[],t.breakpoint=s.R3(e,P(".breakpoint")),t.icon=P(".icon"),t.checkbox=U(t.toDispose),t.toDispose.push(s.mu(t.checkbox,"change",(e=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)}))),s.R3(t.breakpoint,t.icon),s.R3(t.breakpoint,t.checkbox),t.name=s.R3(t.breakpoint,P("span.name")),t.filePath=s.R3(t.breakpoint,P("span.file-path")),t.actionBar=new a.o(t.breakpoint),t.toDispose.push(t.actionBar);const i=s.R3(t.breakpoint,P(".line-number-container"));return t.lineNumber=s.R3(i,P("span.line-number.monaco-count-badge")),t}renderElement(e,t,i){i.context=e,i.breakpoint.classList.toggle("disabled",!this.debugService.getModel().areBreakpointsActivated()),i.name.textContent=b.Hx(e.uri),i.lineNumber.textContent=e.lineNumber.toString(),e.column&&(i.lineNumber.textContent+=`:${e.column}`),i.filePath.textContent=this.labelService.getUriLabel(b.XX(e.uri),{relative:!0}),i.checkbox.checked=e.enabled;const{message:n,icon:s}=ie(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=T.kS.asClassName(s),i.breakpoint.title=e.message||n||"",(3===this.debugService.state||2===this.debugService.state)&&!e.verified&&i.breakpoint.classList.add("disabled");const o=[],a=this.debugService.getViewModel().focusedSession;this.breakpointSupportsCondition.set(!a||!!a.capabilities.supportsConditionalBreakpoints),this.breakpointItemType.set("breakpoint"),(0,v.vr)(this.menu,{arg:e,shouldForwardArgs:!0},{primary:o,secondary:[]},"inline"),i.actionBar.clear(),i.actionBar.push(o,{icon:!0,label:!1}),J.set(e.getId(),i.actionBar.domNode)}disposeTemplate(e){(0,g.B9)(e.toDispose)}};z=(0,n.g)([(0,n.f)(3,M.tn),(0,n.f)(4,x.e)],z);class j{constructor(e,t,i,n){this.menu=e,this.breakpointSupportsCondition=t,this.breakpointItemType=i,this.debugService=n}static{this.ID="exceptionbreakpoints"}get templateId(){return j.ID}renderTemplate(e){const t=Object.create(null);return t.toDispose=[],t.breakpoint=s.R3(e,P(".breakpoint")),t.checkbox=U(t.toDispose),t.toDispose.push(s.mu(t.checkbox,"change",(e=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)}))),s.R3(t.breakpoint,t.checkbox),t.name=s.R3(t.breakpoint,P("span.name")),t.condition=s.R3(t.breakpoint,P("span.condition")),t.breakpoint.classList.add("exception"),t.actionBar=new a.o(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(e,t,i){i.context=e,i.name.textContent=e.label||`${e.filter} exceptions`,i.breakpoint.title=e.verified?e.description||i.name.textContent:e.message||(0,f.NC)("unverifiedExceptionBreakpoint","Unverified Exception Breakpoint"),i.breakpoint.classList.toggle("disabled",!e.verified),i.checkbox.checked=e.enabled,i.condition.textContent=e.condition||"",i.condition.title=(0,f.NC)("expressionCondition","Expression condition: {0}",e.condition);const n=[];this.breakpointSupportsCondition.set(e.supportsCondition),this.breakpointItemType.set("exceptionBreakpoint"),(0,v.vr)(this.menu,{arg:e,shouldForwardArgs:!0},{primary:n,secondary:[]},"inline"),i.actionBar.clear(),i.actionBar.push(n,{icon:!0,label:!1}),J.set(e.getId(),i.actionBar.domNode)}disposeTemplate(e){(0,g.B9)(e.toDispose)}}let Q=class e{constructor(e,t,i,n,s){this.menu=e,this.breakpointSupportsCondition=t,this.breakpointItemType=i,this.debugService=n,this.labelService=s}static{this.ID="functionbreakpoints"}get templateId(){return e.ID}renderTemplate(e){const t=Object.create(null);return t.toDispose=[],t.breakpoint=s.R3(e,P(".breakpoint")),t.icon=P(".icon"),t.checkbox=U(t.toDispose),t.toDispose.push(s.mu(t.checkbox,"change",(e=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)}))),s.R3(t.breakpoint,t.icon),s.R3(t.breakpoint,t.checkbox),t.name=s.R3(t.breakpoint,P("span.name")),t.condition=s.R3(t.breakpoint,P("span.condition")),t.actionBar=new a.o(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(e,t,i){i.context=e,i.name.textContent=e.name;const{icon:n,message:s}=ie(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=T.kS.asClassName(n),i.icon.title=s||"",i.checkbox.checked=e.enabled,i.breakpoint.title=s||"",e.condition&&e.hitCondition?i.condition.textContent=(0,f.NC)("expressionAndHitCount","Expression: {0} | Hit Count: {1}",e.condition,e.hitCondition):i.condition.textContent=e.condition||e.hitCondition||"";const o=this.debugService.getViewModel().focusedSession;i.breakpoint.classList.toggle("disabled",o&&!o.capabilities.supportsFunctionBreakpoints||!this.debugService.getModel().areBreakpointsActivated()),o&&!o.capabilities.supportsFunctionBreakpoints&&(i.breakpoint.title=(0,f.NC)("functionBreakpointsNotSupported","Function breakpoints are not supported by this debug type"));const a=[];this.breakpointSupportsCondition.set(!o||!!o.capabilities.supportsConditionalBreakpoints),this.breakpointItemType.set("functionBreakpoint"),(0,v.vr)(this.menu,{arg:e,shouldForwardArgs:!0},{primary:a,secondary:[]},"inline"),i.actionBar.clear(),i.actionBar.push(a,{icon:!0,label:!1}),J.set(e.getId(),i.actionBar.domNode)}disposeTemplate(e){(0,g.B9)(e.toDispose)}};Q=(0,n.g)([(0,n.f)(3,M.tn),(0,n.f)(4,x.e)],Q);let Y=class e{constructor(e,t){this.debugService=e,this.labelService=t}static{this.ID="databreakpoints"}get templateId(){return e.ID}renderTemplate(e){const t=Object.create(null);return t.breakpoint=s.R3(e,P(".breakpoint")),t.toDispose=[],t.icon=P(".icon"),t.checkbox=U(t.toDispose),t.toDispose.push(s.mu(t.checkbox,"change",(e=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)}))),s.R3(t.breakpoint,t.icon),s.R3(t.breakpoint,t.checkbox),t.name=s.R3(t.breakpoint,P("span.name")),t.accessType=s.R3(t.breakpoint,P("span.access-type")),t}renderElement(e,t,i){i.context=e,i.name.textContent=e.description;const{icon:n,message:s}=ie(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=T.kS.asClassName(n),i.icon.title=s||"",i.checkbox.checked=e.enabled,i.breakpoint.title=s||"";const o=this.debugService.getViewModel().focusedSession;if(i.breakpoint.classList.toggle("disabled",o&&!o.capabilities.supportsDataBreakpoints||!this.debugService.getModel().areBreakpointsActivated()),o&&!o.capabilities.supportsDataBreakpoints&&(i.breakpoint.title=(0,f.NC)("dataBreakpointsNotSupported","Data breakpoints are not supported by this debug type")),e.accessType){const t="read"===e.accessType?(0,f.NC)("read","Read"):"write"===e.accessType?(0,f.NC)("write","Write"):(0,f.NC)("access","Access");i.accessType.textContent=t}else i.accessType.textContent=""}disposeTemplate(e){(0,g.B9)(e.toDispose)}};Y=(0,n.g)([(0,n.f)(0,M.tn),(0,n.f)(1,x.e)],Y);let X=class e{constructor(e,t){this.debugService=e,this.labelService=t}static{this.ID="instructionBreakpoints"}get templateId(){return e.ID}renderTemplate(e){const t=Object.create(null);return t.toDispose=[],t.breakpoint=s.R3(e,P(".breakpoint")),t.icon=P(".icon"),t.checkbox=U(t.toDispose),t.toDispose.push(s.mu(t.checkbox,"change",(e=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)}))),s.R3(t.breakpoint,t.icon),s.R3(t.breakpoint,t.checkbox),t.name=s.R3(t.breakpoint,P("span.name")),t.address=s.R3(t.breakpoint,P("span.file-path")),t.actionBar=new a.o(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(e,t,i){i.context=e,i.breakpoint.classList.toggle("disabled",!this.debugService.getModel().areBreakpointsActivated()),i.name.textContent=e.instructionReference,i.checkbox.checked=e.enabled;const{message:n,icon:s}=ie(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=T.kS.asClassName(s),i.breakpoint.title=e.message||n||"",(3===this.debugService.state||2===this.debugService.state)&&!e.verified&&i.breakpoint.classList.add("disabled")}disposeTemplate(e){(0,g.B9)(e.toDispose)}};X=(0,n.g)([(0,n.f)(0,M.tn),(0,n.f)(1,x.e)],X);class G{constructor(e,t,i,n){this.view=e,this.debugService=t,this.contextViewService=i,this.labelService=n}static{this.ID="functionbreakpointinput"}get templateId(){return G.ID}renderTemplate(e){const t=Object.create(null),i=[],n=s.R3(e,P(".breakpoint"));t.icon=P(".icon"),t.checkbox=U(i),s.R3(n,t.icon),s.R3(n,t.checkbox),this.view.breakpointInputFocused.set(!0);const o=s.R3(n,P(".inputBoxContainer")),a=new c.Wz(o,this.contextViewService,{inputBoxStyles:E.Hc}),r=e=>{t.updating=!0;try{this.view.breakpointInputFocused.set(!1);const i=t.breakpoint.getId();e?("name"===t.type&&this.debugService.updateFunctionBreakpoint(i,{name:a.value}),"condition"===t.type&&this.debugService.updateFunctionBreakpoint(i,{condition:a.value}),"hitCount"===t.type&&this.debugService.updateFunctionBreakpoint(i,{hitCondition:a.value})):"name"!==t.type||t.breakpoint.name?this.view.renderInputBox(void 0):this.debugService.removeFunctionBreakpoints(i)}finally{t.updating=!1}};return i.push(s.mu(a.inputElement,"keydown",(e=>{const t=e.equals(9),i=e.equals(3);(t||i)&&(e.preventDefault(),e.stopPropagation(),r(i))}))),i.push(s.nm(a.inputElement,"blur",(()=>{t.updating||r(!!a.value)}))),t.inputBox=a,t.toDispose=i,t}renderElement(e,t,i){i.breakpoint=e,i.type=this.view.inputBoxData?.type||"name";const{icon:n,message:s}=ie(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService);i.icon.className=T.kS.asClassName(n),i.icon.title=s||"",i.checkbox.checked=e.enabled,i.checkbox.disabled=!0,i.inputBox.value=e.name||"";let o=(0,f.NC)("functionBreakpointPlaceholder","Function to break on"),a=(0,f.NC)("functionBreakPointInputAriaLabel","Type function breakpoint.");"condition"===i.type?(i.inputBox.value=e.condition||"",o=(0,f.NC)("functionBreakpointExpressionPlaceholder","Break when expression evaluates to true"),a=(0,f.NC)("functionBreakPointExpresionAriaLabel","Type expression. Function breakpoint will break when expression evaluates to true")):"hitCount"===i.type&&(i.inputBox.value=e.hitCondition||"",o=(0,f.NC)("functionBreakpointHitCountPlaceholder","Break when hit count is met"),a=(0,f.NC)("functionBreakPointHitCountAriaLabel","Type hit count. Function breakpoint will break when hit count is met.")),i.inputBox.setAriaLabel(a),i.inputBox.setPlaceHolder(o),setTimeout((()=>{i.inputBox.focus(),i.inputBox.select()}),0)}disposeTemplate(e){(0,g.B9)(e.toDispose)}}class Z{constructor(e,t,i){this.view=e,this.debugService=t,this.contextViewService=i}static{this.ID="exceptionbreakpointinput"}get templateId(){return Z.ID}renderTemplate(e){const t=Object.create(null),i=[],n=s.R3(e,P(".breakpoint"));n.classList.add("exception"),t.checkbox=U(i),s.R3(n,t.checkbox),this.view.breakpointInputFocused.set(!0);const o=s.R3(n,P(".inputBoxContainer")),a=new c.Wz(o,this.contextViewService,{ariaLabel:(0,f.NC)("exceptionBreakpointAriaLabel","Type exception breakpoint condition"),inputBoxStyles:E.Hc}),r=e=>{this.view.breakpointInputFocused.set(!1);let i=t.breakpoint.condition;e&&(i=""!==a.value?a.value:void 0),this.debugService.setExceptionBreakpointCondition(t.breakpoint,i)};return i.push(s.mu(a.inputElement,"keydown",(e=>{const t=e.equals(9),i=e.equals(3);(t||i)&&(e.preventDefault(),e.stopPropagation(),r(i))}))),i.push(s.nm(a.inputElement,"blur",(()=>{setTimeout((()=>{r(!0)}))}))),t.inputBox=a,t.toDispose=i,t}renderElement(e,t,i){const n=e.conditionDescription||(0,f.NC)("exceptionBreakpointPlaceholder","Break when expression evaluates to true");i.inputBox.setPlaceHolder(n),i.breakpoint=e,i.checkbox.checked=e.enabled,i.checkbox.disabled=!0,i.inputBox.value=e.condition||"",setTimeout((()=>{i.inputBox.focus(),i.inputBox.select()}),0)}disposeTemplate(e){(0,g.B9)(e.toDispose)}}class ee{constructor(e,t){this.debugService=e,this.labelService=t}getWidgetAriaLabel(){return(0,f.NC)("breakpoints","Breakpoints")}getRole(){return"checkbox"}isChecked(e){return e.enabled}getAriaLabel(e){if(e instanceof O.hO)return e.toString();const{message:t}=ie(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),e,this.labelService),i=e.toString();return t?`${i}, ${t}`:i}}function te(e,t,i,n,s,o){if(e.uri.scheme===M.lR&&0===s.state)return Promise.resolve(void 0);const a=e.endLineNumber?{startLineNumber:e.lineNumber,endLineNumber:e.endLineNumber,startColumn:e.column||1,endColumn:e.endColumn||1073741824}:{startLineNumber:e.lineNumber,startColumn:e.column||1,endLineNumber:e.lineNumber,endColumn:e.column||1073741824};return o.openEditor({resource:e.uri,options:{preserveFocus:i,selection:a,revealIfOpened:!0,selectionRevealType:1,pinned:n}},t?q.O3:q.LP)}function ie(e,t,i,n){const s=3===e||2===e,o=i instanceof O.K1?V.OZ:i instanceof O.Tp?V._0:i.logMessage?V.Ef:V.eq;if(!i.enabled||!t)return{icon:o.disabled,message:i.logMessage?(0,f.NC)("disabledLogpoint","Disabled Logpoint"):(0,f.NC)("disabledBreakpoint","Disabled Breakpoint")};const a=e=>"message"in i&&i.message?e.concat(", "+i.message):e;if(s&&!i.verified)return{icon:o.unverified,message:"message"in i&&i.message?i.message:i.logMessage?(0,f.NC)("unverifiedLogpoint","Unverified Logpoint"):(0,f.NC)("unverifiedBreakpoint","Unverified Breakpoint"),showAdapterUnverifiedMessage:!0};if(i instanceof O.K1)return i.supported?{icon:o.regular,message:i.message||(0,f.NC)("dataBreakpoint","Data Breakpoint")}:{icon:o.unverified,message:(0,f.NC)("dataBreakpointUnsupported","Data breakpoints not supported by this debug type")};if(i instanceof O.Tp){if(!i.supported)return{icon:o.unverified,message:(0,f.NC)("functionBreakpointUnsupported","Function breakpoints not supported by this debug type")};const e=[];return e.push(i.message||(0,f.NC)("functionBreakpoint","Function Breakpoint")),i.condition&&e.push((0,f.NC)("expression","Expression condition: {0}",i.condition)),i.hitCondition&&e.push((0,f.NC)("hitCount","Hit Count: {0}",i.hitCondition)),{icon:o.regular,message:a(e.join("\n"))}}if(i instanceof O.k9){if(!i.supported)return{icon:o.unverified,message:(0,f.NC)("instructionBreakpointUnsupported","Instruction breakpoints not supported by this debug type")};const e=[];return i.message?e.push(i.message):i.instructionReference?e.push((0,f.NC)("instructionBreakpointAtAddress","Instruction breakpoint at address {0}",i.instructionReference)):e.push((0,f.NC)("instructionBreakpoint","Instruction breakpoint")),i.hitCondition&&e.push((0,f.NC)("hitCount","Hit Count: {0}",i.hitCondition)),{icon:o.regular,message:a(e.join("\n"))}}if(i.logMessage||i.condition||i.hitCondition){const e=[];return i.supported?(i.logMessage&&e.push((0,f.NC)("logMessage","Log Message: {0}",i.logMessage)),i.condition&&e.push((0,f.NC)("expression","Expression condition: {0}",i.condition)),i.hitCondition&&e.push((0,f.NC)("hitCount","Hit Count: {0}",i.hitCondition)),{icon:i.logMessage?V.Ef.regular:V.nk.regular,message:a(e.join("\n"))}):{icon:V.CI,message:(0,f.NC)("breakpointUnsupported","Breakpoints of this type are not supported by the debugger")}}const r="message"in i&&i.message?i.message:i instanceof O.Uo&&n?n.getUriLabel(i.uri):(0,f.NC)("breakpoint","Breakpoint");return{icon:o.regular,message:r}}(0,C.r1)(class extends C.Ke{constructor(){super({id:"workbench.debug.viewlet.action.addFunctionBreakpointAction",title:{value:(0,f.NC)("addFunctionBreakpoint","Add Function Breakpoint"),original:"Add Function Breakpoint",mnemonicTitle:(0,f.NC)({key:"miFunctionBreakpoint",comment:["&& denotes a mnemonic"]},"&&Function Breakpoint...")},f1:!0,icon:V.q_,menu:[{id:C.eH.ViewTitle,group:"navigation",order:10,when:w.Ao.equals("view",M.Ww)},{id:C.eH.MenubarNewBreakpointMenu,group:"1_breakpoints",order:3,when:M.Qe}]})}run(e){e.get(M.tn).addFunctionBreakpoint()}}),(0,C.r1)(class extends C.Ke{constructor(){super({id:"workbench.debug.viewlet.action.toggleBreakpointsActivatedAction",title:{value:(0,f.NC)("activateBreakpoints","Toggle Activate Breakpoints"),original:"Toggle Activate Breakpoints"},f1:!0,icon:V.aE,menu:{id:C.eH.ViewTitle,group:"navigation",order:20,when:w.Ao.equals("view",M.Ww)}})}run(e){const t=e.get(M.tn);t.setBreakpointsActivated(!t.getModel().areBreakpointsActivated())}}),(0,C.r1)(class extends C.Ke{constructor(){super({id:"workbench.debug.viewlet.action.removeBreakpoint",title:(0,f.NC)("removeBreakpoint","Remove Breakpoint"),icon:p.lA.removeClose,menu:[{id:C.eH.DebugBreakpointsContext,group:"3_modification",order:10,when:M.vL.notEqualsTo("exceptionBreakpoint")},{id:C.eH.DebugBreakpointsContext,group:"inline",order:20,when:M.vL.notEqualsTo("exceptionBreakpoint")}]})}async run(e,t){const i=e.get(M.tn);t instanceof O.Uo?await i.removeBreakpoints(t.getId()):t instanceof O.Tp?await i.removeFunctionBreakpoints(t.getId()):t instanceof O.K1?await i.removeDataBreakpoints(t.getId()):t instanceof O.k9&&await i.removeInstructionBreakpoints(t.instructionReference)}}),(0,C.r1)(class extends C.Ke{constructor(){super({id:"workbench.debug.viewlet.action.removeAllBreakpoints",title:{original:"Remove All Breakpoints",value:(0,f.NC)("removeAllBreakpoints","Remove All Breakpoints"),mnemonicTitle:(0,f.NC)({key:"miRemoveAllBreakpoints",comment:["&& denotes a mnemonic"]},"Remove &&All Breakpoints")},f1:!0,icon:V.vb,menu:[{id:C.eH.ViewTitle,group:"navigation",order:30,when:w.Ao.equals("view",M.Ww)},{id:C.eH.DebugBreakpointsContext,group:"3_modification",order:20,when:w.Ao.and(M.LK,M.vL.notEqualsTo("exceptionBreakpoint"))},{id:C.eH.MenubarDebugMenu,group:"5_breakpoints",order:3,when:M.Qe}]})}run(e){const t=e.get(M.tn);t.removeBreakpoints(),t.removeFunctionBreakpoints(),t.removeDataBreakpoints(),t.removeInstructionBreakpoints()}}),(0,C.r1)(class extends C.Ke{constructor(){super({id:"workbench.debug.viewlet.action.enableAllBreakpoints",title:{original:"Enable All Breakpoints",value:(0,f.NC)("enableAllBreakpoints","Enable All Breakpoints"),mnemonicTitle:(0,f.NC)({key:"miEnableAllBreakpoints",comment:["&& denotes a mnemonic"]},"&&Enable All Breakpoints")},f1:!0,precondition:M.Qe,menu:[{id:C.eH.DebugBreakpointsContext,group:"z_commands",order:10,when:w.Ao.and(M.LK,M.vL.notEqualsTo("exceptionBreakpoint"))},{id:C.eH.MenubarDebugMenu,group:"5_breakpoints",order:1,when:M.Qe}]})}async run(e){const t=e.get(M.tn);await t.enableOrDisableBreakpoints(!0)}}),(0,C.r1)(class extends C.Ke{constructor(){super({id:"workbench.debug.viewlet.action.disableAllBreakpoints",title:{original:"Disable All Breakpoints",value:(0,f.NC)("disableAllBreakpoints","Disable All Breakpoints"),mnemonicTitle:(0,f.NC)({key:"miDisableAllBreakpoints",comment:["&& denotes a mnemonic"]},"Disable A&&ll Breakpoints")},f1:!0,precondition:M.Qe,menu:[{id:C.eH.DebugBreakpointsContext,group:"z_commands",order:20,when:w.Ao.and(M.LK,M.vL.notEqualsTo("exceptionBreakpoint"))},{id:C.eH.MenubarDebugMenu,group:"5_breakpoints",order:2,when:M.Qe}]})}async run(e){const t=e.get(M.tn);await t.enableOrDisableBreakpoints(!1)}}),(0,C.r1)(class extends C.Ke{constructor(){super({id:"workbench.debug.viewlet.action.reapplyBreakpointsAction",title:{value:(0,f.NC)("reapplyAllBreakpoints","Reapply All Breakpoints"),original:"Reapply All Breakpoints"},f1:!0,precondition:M.hO,menu:[{id:C.eH.DebugBreakpointsContext,group:"z_commands",order:30,when:w.Ao.and(M.LK,M.vL.notEqualsTo("exceptionBreakpoint"))}]})}async run(e){const t=e.get(M.tn);await t.setBreakpointsActivated(!0)}}),(0,C.r1)(class extends F.Nx{constructor(){super({id:"debug.editBreakpoint",viewId:M.Ww,title:(0,f.NC)("editCondition","Edit Condition..."),icon:p.lA.edit,precondition:M.tY,menu:[{id:C.eH.DebugBreakpointsContext,group:"navigation",order:10},{id:C.eH.DebugBreakpointsContext,group:"inline",order:10}]})}async runInView(e,t,i){const n=e.get(M.tn),s=e.get(q.AR);if(i instanceof O.Uo){const e=await te(i,!1,!1,!0,n,s);if(e){const t=e.getControl();(0,m.CL)(t)&&t.getContribution(M.KI)?.showBreakpointWidget(i.lineNumber,i.column)}}else if(i instanceof O.Tp){const n=e.get(B.i),s=[new d.aU("breakpoint.editCondition",(0,f.NC)("editCondition","Edit Condition..."),void 0,!0,(async()=>t.renderInputBox({breakpoint:i,type:"condition"}))),new d.aU("breakpoint.editCondition",(0,f.NC)("editHitCount","Edit Hit Count..."),void 0,!0,(async()=>t.renderInputBox({breakpoint:i,type:"hitCount"})))],o=J.get(i.getId());o&&n.showContextMenu({getActions:()=>s,getAnchor:()=>o,onHide:()=>(0,g.B9)(s)})}else t.renderInputBox({breakpoint:i,type:"condition"})}}),(0,C.r1)(class extends F.Nx{constructor(){super({id:"debug.editFunctionBreakpoint",viewId:M.Ww,title:(0,f.NC)("editBreakpoint","Edit Function Breakpoint..."),menu:[{id:C.eH.DebugBreakpointsContext,group:"1_breakpoints",order:10,when:M.vL.isEqualTo("functionBreakpoint")}]})}runInView(e,t,i){t.renderInputBox({breakpoint:i,type:"name"})}}),(0,C.r1)(class extends F.Nx{constructor(){super({id:"debug.editFunctionBreakpointHitCount",viewId:M.Ww,title:(0,f.NC)("editHitCount","Edit Hit Count..."),precondition:M.tY,menu:[{id:C.eH.DebugBreakpointsContext,group:"navigation",order:20,when:M.vL.isEqualTo("functionBreakpoint")}]})}runInView(e,t,i){t.renderInputBox({breakpoint:i,type:"hitCount"})}})},67894:(e,t,i)=>{i.d(t,{Ee:()=>L,Py:()=>pe,W4:()=>Fe,IW:()=>ge,Hp:()=>Ve,M1:()=>ue,fD:()=>Te,QY:()=>he,SX:()=>Le,ZI:()=>Y,pl:()=>Ie,p3:()=>M,w1:()=>be,TP:()=>ne,cG:()=>Ne,OD:()=>qe,uT:()=>_e,bj:()=>se,O0:()=>z,SI:()=>Be,Sb:()=>J,XV:()=>we,jg:()=>oe,Hn:()=>X,or:()=>Z,M2:()=>xe,rg:()=>G,Ob:()=>ce,zr:()=>Ae,ss:()=>Re,rd:()=>K,eW:()=>Se,fH:()=>de,vJ:()=>Ee,Vf:()=>re,U8:()=>Q,Yl:()=>me,_M:()=>q,YD:()=>O,w8:()=>ee,xn:()=>De,QE:()=>te,I4:()=>Me,G:()=>ie,Ox:()=>Oe,Xg:()=>ae,Re:()=>le,rY:()=>_,Xs:()=>U,DP:()=>fe,WW:()=>W,Sf:()=>ve,GL:()=>$,lG:()=>Ce,xw:()=>P,kj:()=>ke,De:()=>j,yk:()=>ye,ST:()=>H,NT:()=>V});var n=i(63580),s=i(16252),o=i(49989),a=i(32414),r=i(29250),c=i(91825),d=i(65520),l=i(84144),u=i(24448),p=i(29102),h=i(93983),g=i(64306),b=i(59422),m=i(39282),k=i(88813),f=i(94565),v=i(71765),C=i(84972),S=i(33108),w=i(41157),B=i(8321),y=i(1432),I=i(75392),x=i(22016),D=i(73733),N=i(72042),A=i(5976),E=i(95935),R=i(44349);async function T(e,t,i,n,s,o){const a=[],r=await Promise.all(t.map((t=>async function(e,t,i,n,s,o){const a=[];return a.push({type:"separator",label:e.name}),(await e.getLoadedSources()).forEach((e=>{const r=function(e,t,i,n,s,o){const a=o.getUriBasenameLabel(e.uri),r=o.getUriLabel((0,E.XX)(e.uri)),c=(0,I.Oh)(t,a,!0),d=(0,I.Oh)(t,r,!0);if(c||d)return{label:a,description:"."===r?void 0:r,highlights:{label:c??void 0,description:d??void 0},iconClasses:(0,x.r)(n,s,e.uri),accept:()=>{e.available&&e.openInEditor(i,{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0})}}}(e,t,i,n,s,o);r&&a.push(r)})),a}(t,e,i,n,s,o))));for(const e of r)for(const t of e)a.push(t);return a}function F(e,t,i,s,o){const a=[],c=[],d=i.getViewModel().focusedSession,l=i.getModel().getSessions(!1),u=[];l.forEach((e=>{e.compact&&e.parentSession&&c.push(e.parentSession)})),l.forEach((t=>{const o=c.includes(t);if(t.parentSession||a.push({type:"separator",label:o?t.name:void 0}),!o){const o=function(e,t,i,s,o){const a=function(e){const t=e.configuration.name.length?e.configuration.name:e.name,i=e.compact?void 0:e.parentSession?.configuration.name;let s="",o="";return i&&(o=n.NC("workbench.action.debug.spawnFrom","Session {0} spawned from {1}",t,i),s=i),{label:t,description:s,ariaLabel:o}}(e),c=(0,I.Oh)(t,a.label,!0);if(c)return{label:a.label,description:a.description,ariaLabel:a.ariaLabel,highlights:{label:c},accept:()=>{i.focusStackFrame(void 0,void 0,e,{explicit:!0}),s.isViewVisible(r.FT)||s.openView(r.FT,!0)}}}(t,e,i,s);o&&(a.push(o),t.getId()===d?.getId()&&u.push(o))}})),a.length&&a.push({type:"separator"});const p=n.NC("workbench.action.debug.startDebug","Start a New Debug Session");return a.push({label:`$(plus) ${p}`,ariaLabel:p,accept:()=>o.executeCommand(t)}),{picks:a,activeItems:u}}const L="debug.addConfiguration",V="editor.debug.action.toggleInlineBreakpoint",M="debug.copyStackTrace",O="workbench.action.debug.reverseContinue",_="workbench.action.debug.stepBack",q="workbench.action.debug.restart",H="workbench.action.debug.terminateThread",P="workbench.action.debug.stepOver",U="workbench.action.debug.stepInto",W="workbench.action.debug.stepIntoTarget",$="workbench.action.debug.stepOut",K="workbench.action.debug.pause",J="workbench.action.debug.disconnect",z="workbench.action.debug.disconnectAndSuspend",j="workbench.action.debug.stop",Q="workbench.action.debug.restartFrame",Y="workbench.action.debug.continue",X="workbench.debug.action.focusRepl",G="debug.jumpToCursor",Z="workbench.action.debug.focusProcess",ee="workbench.action.debug.selectandstart",te="workbench.action.debug.selectDebugConsole",ie="workbench.action.debug.selectDebugSession",ne="workbench.action.debug.configure",se="workbench.action.debug.start",oe="debug.renameWatchExpression",ae="debug.setWatchExpression",re="debug.removeWatchExpression",ce="workbench.action.debug.nextConsole",de="workbench.action.debug.prevConsole",le="workbench.action.debug.showLoadedScripts",ue="workbench.action.debug.callStackTop",pe="workbench.action.debug.callStackBottom",he="workbench.action.debug.callStackUp",ge="workbench.action.debug.callStackDown",be={original:"Debug",value:n.NC("debug","Debug")},me={value:n.NC("restartDebug","Restart"),original:"Restart"},ke={value:n.NC("stepOverDebug","Step Over"),original:"Step Over"},fe={value:n.NC("stepIntoDebug","Step Into"),original:"Step Into"},ve={value:n.NC("stepIntoTargetDebug","Step Into Target"),original:"Step Into Target"},Ce={value:n.NC("stepOutDebug","Step Out"),original:"Step Out"},Se={value:n.NC("pauseDebug","Pause"),original:"Pause"},we={value:n.NC("disconnect","Disconnect"),original:"Disconnect"},Be={value:n.NC("disconnectSuspend","Disconnect and Suspend"),original:"Disconnect and Suspend"},ye={value:n.NC("stop","Stop"),original:"Stop"},Ie={value:n.NC("continueDebug","Continue"),original:"Continue"},xe={value:n.NC("focusSession","Focus Session"),original:"Focus Session"},De={value:n.NC("selectAndStartDebugging","Select and Start Debugging"),original:"Select and Start Debugging"},Ne=n.NC("openLaunchJson","Open '{0}'","launch.json"),Ae={value:n.NC("nextDebugConsole","Focus Next Debug Console"),original:"Focus Next Debug Console"},Ee={value:n.NC("prevDebugConsole","Focus Previous Debug Console"),original:"Focus Previous Debug Console"},Re={value:n.NC("openLoadedScript","Open Loaded Script..."),original:"Open Loaded Script..."},Te={value:n.NC("callStackTop","Navigate to Top of Call Stack"),original:"Navigate to Top of Call Stack"},Fe={value:n.NC("callStackBottom","Navigate to Bottom of Call Stack"),original:"Navigate to Bottom of Call Stack"},Le={value:n.NC("callStackUp","Navigate Up Call Stack"),original:"Navigate Up Call Stack"},Ve={value:n.NC("callStackDown","Navigate Down Call Stack"),original:"Navigate Down Call Stack"},Me={value:n.NC("selectDebugConsole","Select Debug Console"),original:"Select Debug Console"},Oe={value:n.NC("selectDebugSession","Select Debug Session"),original:"Select Debug Session"},_e="debug ",qe="debug consoles ";async function He(e,t,i){const n=e.get(r.tn);let s;if((o=t)&&"string"==typeof o.sessionId&&"string"==typeof o.threadId){const e=n.getModel().getSession(t.sessionId);e&&(s=e.getAllThreads().find((e=>e.getId()===t.threadId)))}else if(Ue(t)){const e=n.getModel().getSession(t.sessionId);if(e){const t=e.getAllThreads();s=t.length>0?t[0]:void 0}}var o;if(!s&&(s=n.getViewModel().focusedThread,!s)){const e=n.getViewModel().focusedSession,t=e?e.getAllThreads():void 0;s=t&&t.length?t[0]:void 0}s&&await i(s)}function Pe(e,t){if(!(i=t)||"string"!=typeof i.sessionId||"string"!=typeof i.threadId||"string"!=typeof i.frameId)return e.getViewModel().focusedStackFrame;{const i=e.getModel().getSession(t.sessionId);if(i){const e=i.getAllThreads().find((e=>e.getId()===t.threadId));if(e)return e.getCallStack().find((e=>e.getId()===t.frameId))}}var i}function Ue(e){return e&&"string"==typeof e.sessionId}async function We(e,t){const i=e.get(r.tn),n=e.get(B.qC),s=i.getModel().getSessions(!0).filter((e=>e.hasSeparateRepl()));let o=i.getViewModel().focusedSession,a=0;if(s.length>0&&o){for(;o&&!o.hasSeparateRepl();)o=o.parentSession;if(o){const e=s.indexOf(o);a=t?e===s.length-1?0:e+1:0===e?s.length-1:e-1}}await i.focusStackFrame(void 0,void 0,s[a],{explicit:!0}),n.isViewVisible(r.FT)||await n.openView(r.FT,!0)}async function $e(e,t){const i=e.getViewModel().focusedStackFrame;if(i){let n,s=i.thread.getCallStack(),o=s.findIndex((e=>e.frameId===i.frameId));if(t){if(o>=s.length-1){if(i.thread.reachedEndOfCallStack)return void Je(e);await e.getModel().fetchCallstack(i.thread,20),s=i.thread.getCallStack(),o=s.findIndex((e=>e.frameId===i.frameId))}n=ze(!0,s,o)}else{if(o<=0)return void Ke(e);n=ze(!1,s,o)}n&&e.focusStackFrame(n)}}async function Ke(e){const t=e.getViewModel().focusedThread;if(t){await e.getModel().fetchCallstack(t);const i=t.getCallStack();if(i.length>0){const t=ze(!1,i,0);t&&e.focusStackFrame(t)}}}function Je(e){const t=e.getViewModel().focusedThread;t&&e.focusStackFrame(t.getTopStackFrame())}function ze(e,t,i){i>=t.length?i=t.length-1:i<0&&(i=0);let n,s=i;do{if(e?s===t.length-1?s=0:s++:0===s?s=t.length-1:s--,n=t[s],"deemphasize"!==n.source.presentationHint&&"deemphasize"!==n.presentationHint)return n}while(s!==i)}f.P.registerCommand({id:M,handler:async(e,t,i)=>{const n=e.get(v.y),s=e.get(C.p),o=Pe(e.get(r.tn),i);if(o){const e=n.getEOL(o.source.uri);await s.writeText(o.thread.getCallStack().map((e=>e.toString())).join(e))}}}),f.P.registerCommand({id:O,handler:async(e,t,i)=>{await He(e,i,(e=>e.reverseContinue()))}}),f.P.registerCommand({id:_,handler:async(e,t,i)=>{const n=e.get(h.i6);r.oN.getValue(n)?await He(e,i,(e=>e.stepBack("instruction"))):await He(e,i,(e=>e.stepBack()))}}),f.P.registerCommand({id:H,handler:async(e,t,i)=>{await He(e,i,(e=>e.terminate()))}}),f.P.registerCommand({id:G,handler:async e=>{const t=e.get(r.tn).getViewModel().focusedStackFrame,i=e.get(u.AR).activeTextEditorControl,s=e.get(b.lT),o=e.get(w.eJ);if(t&&(0,d.CL)(i)&&i.hasModel()){const e=i.getPosition(),a=i.getModel().uri,r=t.thread.session.getSourceForUri(a);if(r){const i=await t.thread.session.gotoTargets(r.raw,e.lineNumber,e.column),a=i?.body.targets;if(a&&a.length){let e=a[0].id;if(a.length>1){const t=a.map((e=>({label:e.label,_id:e.id}))),i=await o.pick(t,{placeHolder:n.NC("chooseLocation","Choose the specific location")});if(!i)return;e=i._id}return await t.thread.session.goto(t.thread.threadId,e).catch((e=>s.warn(e)))}}}return s.warn(n.NC("noExecutableCode","No executable code is associated at the current cursor position."))}}),f.P.registerCommand({id:ue,handler:async(e,t,i)=>{Je(e.get(r.tn))}}),f.P.registerCommand({id:pe,handler:async(e,t,i)=>{const n=e.get(r.tn);await Ke(n)}}),f.P.registerCommand({id:he,handler:async(e,t,i)=>{$e(e.get(r.tn),!1)}}),f.P.registerCommand({id:ge,handler:async(e,t,i)=>{$e(e.get(r.tn),!0)}}),l.BH.appendMenuItem(l.eH.EditorContext,{command:{id:G,title:n.NC("jumpToCursor","Jump to Cursor"),category:be},when:h.Ao.and(r.dr,p.u.editorTextFocus),group:"debug",order:3}),o.W.registerCommandAndKeybindingRule({id:ce,weight:201,when:r.AN,primary:2060,mac:{primary:3166},handler:async(e,t,i)=>{We(e,!0)}}),o.W.registerCommandAndKeybindingRule({id:de,weight:201,when:r.AN,primary:2059,mac:{primary:3164},handler:async(e,t,i)=>{We(e,!1)}}),o.W.registerCommandAndKeybindingRule({id:q,weight:200,primary:3135,when:r.hO,handler:async(e,t,i)=>{const n=e.get(r.tn),s=e.get(S.Ui);let o;if(o=Ue(i)?n.getModel().getSession(i.sessionId):n.getViewModel().focusedSession,o){const e=s.getValue("debug").showSubSessionsInToolBar;for(;!e&&o.lifecycleManagedByParent&&o.parentSession;)o=o.parentSession;o.removeReplExpressions(),await n.restartSession(o)}else{const{launch:e,name:t}=n.getConfigurationManager().selectedConfiguration;await n.startDebugging(e,t,{noDebug:!1,startedByUser:!0})}}}),o.W.registerCommandAndKeybindingRule({id:P,weight:200,primary:68,secondary:y.$L?[580]:void 0,when:r.KA.isEqualTo("stopped"),handler:async(e,t,i)=>{const n=e.get(h.i6);r.oN.getValue(n)?await He(e,i,(e=>e.next("instruction"))):await He(e,i,(e=>e.next()))}});const je=y.$L&&y.ED?581:69;async function Qe(e,t,i,n,s){const o=e.get(r.tn);let a;a=Ue(i)?o.getModel().getSession(i.sessionId):o.getViewModel().focusedSession;const c=e.get(S.Ui).getValue("debug").showSubSessionsInToolBar;for(;!c&&a&&a.lifecycleManagedByParent&&a.parentSession;)a=a.parentSession;await o.stopSession(a,n,s)}o.W.registerCommandAndKeybindingRule({id:U,weight:210,primary:je,when:r.KA.notEqualsTo("inactive"),handler:async(e,t,i)=>{const n=e.get(h.i6);r.oN.getValue(n)?await He(e,i,(e=>e.stepIn("instruction"))):await He(e,i,(e=>e.stepIn()))}}),o.W.registerCommandAndKeybindingRule({id:$,weight:200,primary:1093,when:r.KA.isEqualTo("stopped"),handler:async(e,t,i)=>{const n=e.get(h.i6);r.oN.getValue(n)?await He(e,i,(e=>e.stepOut("instruction"))):await He(e,i,(e=>e.stepOut()))}}),o.W.registerCommandAndKeybindingRule({id:K,weight:202,primary:64,when:r.KA.isEqualTo("running"),handler:async(e,t,i)=>{await He(e,i,(e=>e.pause()))}}),o.W.registerCommandAndKeybindingRule({id:W,primary:2048|je,when:h.Ao.and(r.o8,r.hO,r.KA.isEqualTo("stopped")),weight:200,handler:async(e,t,i)=>{const s=e.get(w.eJ),o=e.get(r.tn),a=o.getViewModel().focusedSession,c=o.getViewModel().focusedStackFrame;if(!c||!a)return;const l=await e.get(u.AR).openEditor({resource:c.source.uri,options:{revealIfOpened:!0}});let p;if(l){const e=l?.getControl();(0,d.CL)(e)&&(p=e)}const h=s.createQuickPick();h.busy=!0,h.show(),h.onDidChangeActive((([e])=>{p&&e&&void 0!==e.target.line&&(p.revealLineInCenterIfOutsideViewport(e.target.line),p.setSelection({startLineNumber:e.target.line,startColumn:e.target.column||1,endLineNumber:e.target.endLine||e.target.line,endColumn:e.target.endColumn||e.target.column||1}))})),h.onDidAccept((()=>{h.activeItems.length&&a.stepIn(c.thread.threadId,h.activeItems[0].target.id)})),h.onDidHide((()=>h.dispose())),a.stepInTargets(c.frameId).then((e=>{h.busy=!1,e?.length?h.items=e?.map((e=>({target:e,label:e.label}))):h.placeholder=n.NC("editor.debug.action.stepIntoTargets.none","No step targets available")}))}}),o.W.registerCommandAndKeybindingRule({id:J,weight:200,primary:1087,when:h.Ao.and(r.dU,r.hO),handler:(e,t,i)=>Qe(e,0,i,!0)}),f.P.registerCommand({id:z,handler:(e,t,i)=>Qe(e,0,i,!0,!0)}),o.W.registerCommandAndKeybindingRule({id:j,weight:200,primary:1087,when:h.Ao.and(r.dU.toNegated(),r.hO),handler:(e,t,i)=>Qe(e,0,i,!1)}),f.P.registerCommand({id:Q,handler:async(e,t,i)=>{const n=e.get(r.tn),s=e.get(b.lT),o=Pe(n,i);if(o)try{await o.restart()}catch(e){s.error(e)}}}),o.W.registerCommandAndKeybindingRule({id:Y,weight:210,primary:63,when:r.KA.isEqualTo("stopped"),handler:async(e,t,i)=>{await He(e,i,(e=>e.continue()))}}),f.P.registerCommand({id:le,handler:async e=>{await async function(e){const t=e.get(w.eJ),i=e.get(r.tn),s=e.get(u.AR),o=i.getModel().getSessions(!1),a=e.get(D.q),c=e.get(N.O),d=e.get(R.e),l=new A.SL,p=t.createQuickPick();l.add(p),p.matchOnLabel=p.matchOnDescription=p.matchOnDetail=p.sortByLabel=!1,p.placeholder=n.NC("moveFocusedView.selectView","Search loaded scripts by name"),p.items=await T(p.value,o,s,a,c,d),l.add(p.onDidChangeValue((async()=>{p.items=await T(p.value,o,s,a,c,d)}))),l.add(p.onDidAccept((()=>{p.selectedItems[0].accept(),p.hide(),l.dispose()}))),p.show()}(e)}}),f.P.registerCommand({id:X,handler:async e=>{const t=e.get(B.qC);await t.openView(r.FT,!0)}}),f.P.registerCommand({id:"debug.startFromConfig",handler:async(e,t)=>{const i=e.get(r.tn);await i.startDebugging(void 0,t)}}),f.P.registerCommand({id:Z,handler:async(e,t)=>{const i=e.get(r.tn),n=e.get(u.AR),s=i.getModel().getSessions().find((e=>e.parentSession===t&&2===e.state));s&&2!==t.state&&(t=s),await i.focusStackFrame(void 0,void 0,t,{explicit:!0});const o=i.getViewModel().focusedStackFrame;o&&await o.openInEditor(n,!0)}}),f.P.registerCommand({id:ee,handler:async e=>{e.get(w.eJ).quickAccess.show(_e)}}),f.P.registerCommand({id:te,handler:async e=>{e.get(w.eJ).quickAccess.show(qe)}}),f.P.registerCommand({id:ie,handler:async e=>{!async function(e,t){const i=e.get(w.eJ),s=e.get(r.tn),o=e.get(B.qC),a=e.get(f.H),c=new A.SL,d=i.createQuickPick();c.add(d),d.matchOnLabel=d.matchOnDescription=d.matchOnDetail=d.sortByLabel=!1,d.placeholder=n.NC("moveFocusedView.selectView","Search debug sessions by name");const l=F(d.value,t,s,o,a);d.items=l.picks,d.activeItems=l.activeItems,c.add(d.onDidChangeValue((async()=>{d.items=F(d.value,t,s,o,a).picks}))),c.add(d.onDidAccept((()=>{d.selectedItems[0].accept(),d.hide(),c.dispose()}))),d.show()}(e,ee)}}),o.W.registerCommandAndKeybindingRule({id:"debug.toggleBreakpoint",weight:205,when:h.Ao.and(r.Wp,m.Ul.toNegated()),primary:10,handler:e=>{const t=e.get(a.Lw),i=e.get(r.tn),n=t.lastFocusedList;if(n instanceof s.aV){const e=n.getFocusedElements();e&&e.length&&i.enableOrDisableBreakpoints(!e[0].enabled,e[0])}}}),o.W.registerCommandAndKeybindingRule({id:"debug.enableOrDisableBreakpoint",weight:200,primary:void 0,when:p.u.editorTextFocus,handler:e=>{const t=e.get(r.tn),i=e.get(u.AR).activeTextEditorControl;if((0,d.CL)(i)){const e=i.getModel();if(e){const n=i.getPosition();if(n){const i=t.getModel().getBreakpoints({uri:e.uri,lineNumber:n.lineNumber});i.length&&t.enableOrDisableBreakpoints(!i[0].enabled,i[0])}}}}}),o.W.registerCommandAndKeybindingRule({id:oe,weight:205,when:r.D5,primary:60,mac:{primary:3},handler:(e,t)=>{const i=e.get(r.tn);if(!(t instanceof c.A2)){const i=e.get(a.Lw).lastFocusedList;if(i){const e=i.getFocus();Array.isArray(e)&&e[0]instanceof c.A2&&(t=e[0])}}t instanceof c.A2&&i.getViewModel().setSelectedExpression(t,!1)}}),f.P.registerCommand({id:ae,handler:async(e,t)=>{const i=e.get(r.tn);(t instanceof c.A2||t instanceof c._w)&&i.getViewModel().setSelectedExpression(t,!0)}}),o.W.registerCommandAndKeybindingRule({id:"debug.setVariable",weight:205,when:r.$l,primary:60,mac:{primary:3},handler:e=>{const t=e.get(a.Lw),i=e.get(r.tn),n=t.lastFocusedList;if(n){const e=n.getFocus();Array.isArray(e)&&e[0]instanceof c._w&&i.getViewModel().setSelectedExpression(e[0],!1)}}}),o.W.registerCommandAndKeybindingRule({id:re,weight:200,when:h.Ao.and(r.D5,r.xT.toNegated()),primary:20,mac:{primary:2049},handler:(e,t)=>{const i=e.get(r.tn);if(t instanceof c.A2)return void i.removeWatchExpressions(t.getId());const n=e.get(a.Lw).lastFocusedList;if(n){let e=n.getFocus();if(Array.isArray(e)&&e[0]instanceof c.A2){const t=n.getSelection();t&&t.indexOf(e[0])>=0&&(e=t),e.forEach((e=>i.removeWatchExpressions(e.getId())))}}}}),o.W.registerCommandAndKeybindingRule({id:"debug.removeBreakpoint",weight:200,when:h.Ao.and(r.Wp,r.fq.toNegated()),primary:20,mac:{primary:2049},handler:e=>{const t=e.get(a.Lw),i=e.get(r.tn),n=t.lastFocusedList;if(n instanceof s.aV){const e=n.getFocusedElements(),t=e.length?e[0]:void 0;t instanceof c.Uo?i.removeBreakpoints(t.getId()):t instanceof c.Tp?i.removeFunctionBreakpoints(t.getId()):t instanceof c.K1&&i.removeDataBreakpoints(t.getId())}}}),o.W.registerCommandAndKeybindingRule({weight:200,primary:1091,when:p.u.editorTextFocus,id:V,handler:e=>{const t=e.get(r.tn),i=e.get(u.AR).activeTextEditorControl;if((0,d.CL)(i)){const e=i.getPosition();if(e&&i.hasModel()&&t.canSetBreakpointsIn(i.getModel())){const n=i.getModel().uri;t.getModel().getBreakpoints({lineNumber:e.lineNumber,uri:n}).some((t=>t.sessionAgnosticData.column===e.column||!t.column&&e.column<=1))||t.addBreakpoints(n,[{lineNumber:e.lineNumber,column:e.column>1?e.column:void 0}])}}}}),l.BH.appendMenuItem(l.eH.EditorContext,{command:{id:V,title:n.NC("addInlineBreakpoint","Add Inline Breakpoint"),category:be},when:h.Ao.and(r.hO,k.dX.toNegated(),p.u.editorTextFocus),group:"debug",order:1}),o.W.registerCommandAndKeybindingRule({id:"debug.openBreakpointToSide",weight:200,when:r.Wp,primary:2051,secondary:[515],handler:e=>{const t=e.get(a.Lw).lastFocusedList;if(t instanceof s.aV){const i=t.getFocusedElements();if(i.length&&i[0]instanceof c.Uo)return(0,g.u6)(i[0],!0,!1,!0,e.get(r.tn),e.get(u.AR))}}})},5104:(e,t,i)=>{i.d(t,{BU:()=>H,CI:()=>v,DI:()=>x,Dt:()=>l,Ef:()=>k,Gx:()=>p,Hp:()=>E,IO:()=>L,K$:()=>q,Lh:()=>_,NA:()=>M,OZ:()=>m,Qx:()=>S,Tl:()=>F,UO:()=>u,WF:()=>d,Wd:()=>r,Ws:()=>w,Yi:()=>Q,Z5:()=>A,_0:()=>g,_L:()=>W,_d:()=>y,_i:()=>C,aE:()=>J,cJ:()=>T,eC:()=>P,eq:()=>h,fC:()=>c,fR:()=>I,gv:()=>D,iO:()=>U,kc:()=>B,kd:()=>z,l5:()=>j,nk:()=>b,oF:()=>R,os:()=>f,q_:()=>$,us:()=>O,v1:()=>a,vb:()=>K,xc:()=>V,xv:()=>N});var n=i(73046),s=i(63580),o=i(59554);const a=(0,o.q5)("debug-console-view-icon",n.lA.debugConsole,(0,s.NC)("debugConsoleViewIcon","View icon of the debug console view.")),r=(0,o.q5)("run-view-icon",n.lA.debugAlt,(0,s.NC)("runViewIcon","View icon of the run view.")),c=(0,o.q5)("variables-view-icon",n.lA.debugAlt,(0,s.NC)("variablesViewIcon","View icon of the variables view.")),d=(0,o.q5)("watch-view-icon",n.lA.debugAlt,(0,s.NC)("watchViewIcon","View icon of the watch view.")),l=(0,o.q5)("callstack-view-icon",n.lA.debugAlt,(0,s.NC)("callStackViewIcon","View icon of the call stack view.")),u=(0,o.q5)("breakpoints-view-icon",n.lA.debugAlt,(0,s.NC)("breakpointsViewIcon","View icon of the breakpoints view.")),p=(0,o.q5)("loaded-scripts-view-icon",n.lA.debugAlt,(0,s.NC)("loadedScriptsViewIcon","View icon of the loaded scripts view.")),h={regular:(0,o.q5)("debug-breakpoint",n.lA.debugBreakpoint,(0,s.NC)("debugBreakpoint","Icon for breakpoints.")),disabled:(0,o.q5)("debug-breakpoint-disabled",n.lA.debugBreakpointDisabled,(0,s.NC)("debugBreakpointDisabled","Icon for disabled breakpoints.")),unverified:(0,o.q5)("debug-breakpoint-unverified",n.lA.debugBreakpointUnverified,(0,s.NC)("debugBreakpointUnverified","Icon for unverified breakpoints."))},g={regular:(0,o.q5)("debug-breakpoint-function",n.lA.debugBreakpointFunction,(0,s.NC)("debugBreakpointFunction","Icon for function breakpoints.")),disabled:(0,o.q5)("debug-breakpoint-function-disabled",n.lA.debugBreakpointFunctionDisabled,(0,s.NC)("debugBreakpointFunctionDisabled","Icon for disabled function breakpoints.")),unverified:(0,o.q5)("debug-breakpoint-function-unverified",n.lA.debugBreakpointFunctionUnverified,(0,s.NC)("debugBreakpointFunctionUnverified","Icon for unverified function breakpoints."))},b={regular:(0,o.q5)("debug-breakpoint-conditional",n.lA.debugBreakpointConditional,(0,s.NC)("debugBreakpointConditional","Icon for conditional breakpoints.")),disabled:(0,o.q5)("debug-breakpoint-conditional-disabled",n.lA.debugBreakpointConditionalDisabled,(0,s.NC)("debugBreakpointConditionalDisabled","Icon for disabled conditional breakpoints.")),unverified:(0,o.q5)("debug-breakpoint-conditional-unverified",n.lA.debugBreakpointConditionalUnverified,(0,s.NC)("debugBreakpointConditionalUnverified","Icon for unverified conditional breakpoints."))},m={regular:(0,o.q5)("debug-breakpoint-data",n.lA.debugBreakpointData,(0,s.NC)("debugBreakpointData","Icon for data breakpoints.")),disabled:(0,o.q5)("debug-breakpoint-data-disabled",n.lA.debugBreakpointDataDisabled,(0,s.NC)("debugBreakpointDataDisabled","Icon for disabled data breakpoints.")),unverified:(0,o.q5)("debug-breakpoint-data-unverified",n.lA.debugBreakpointDataUnverified,(0,s.NC)("debugBreakpointDataUnverified","Icon for unverified data breakpoints."))},k={regular:(0,o.q5)("debug-breakpoint-log",n.lA.debugBreakpointLog,(0,s.NC)("debugBreakpointLog","Icon for log breakpoints.")),disabled:(0,o.q5)("debug-breakpoint-log-disabled",n.lA.debugBreakpointLogDisabled,(0,s.NC)("debugBreakpointLogDisabled","Icon for disabled log breakpoint.")),unverified:(0,o.q5)("debug-breakpoint-log-unverified",n.lA.debugBreakpointLogUnverified,(0,s.NC)("debugBreakpointLogUnverified","Icon for unverified log breakpoints."))},f=(0,o.q5)("debug-hint",n.lA.debugHint,(0,s.NC)("debugBreakpointHint","Icon for breakpoint hints shown on hover in editor glyph margin.")),v=(0,o.q5)("debug-breakpoint-unsupported",n.lA.debugBreakpointUnsupported,(0,s.NC)("debugBreakpointUnsupported","Icon for unsupported breakpoints.")),C=[h,g,b,m,k],S=(0,o.q5)("debug-stackframe",n.lA.debugStackframe,(0,s.NC)("debugStackframe","Icon for a stackframe shown in the editor glyph margin.")),w=(0,o.q5)("debug-stackframe-focused",n.lA.debugStackframeFocused,(0,s.NC)("debugStackframeFocused","Icon for a focused stackframe  shown in the editor glyph margin.")),B=(0,o.q5)("debug-gripper",n.lA.gripper,(0,s.NC)("debugGripper","Icon for the debug bar gripper.")),y=(0,o.q5)("debug-restart-frame",n.lA.debugRestartFrame,(0,s.NC)("debugRestartFrame","Icon for the debug restart frame action.")),I=(0,o.q5)("debug-stop",n.lA.debugStop,(0,s.NC)("debugStop","Icon for the debug stop action.")),x=(0,o.q5)("debug-disconnect",n.lA.debugDisconnect,(0,s.NC)("debugDisconnect","Icon for the debug disconnect action.")),D=(0,o.q5)("debug-restart",n.lA.debugRestart,(0,s.NC)("debugRestart","Icon for the debug restart action.")),N=(0,o.q5)("debug-step-over",n.lA.debugStepOver,(0,s.NC)("debugStepOver","Icon for the debug step over action.")),A=(0,o.q5)("debug-step-into",n.lA.debugStepInto,(0,s.NC)("debugStepInto","Icon for the debug step into action.")),E=(0,o.q5)("debug-step-out",n.lA.debugStepOut,(0,s.NC)("debugStepOut","Icon for the debug step out action.")),R=(0,o.q5)("debug-step-back",n.lA.debugStepBack,(0,s.NC)("debugStepBack","Icon for the debug step back action.")),T=(0,o.q5)("debug-pause",n.lA.debugPause,(0,s.NC)("debugPause","Icon for the debug pause action.")),F=(0,o.q5)("debug-continue",n.lA.debugContinue,(0,s.NC)("debugContinue","Icon for the debug continue action.")),L=(0,o.q5)("debug-reverse-continue",n.lA.debugReverseContinue,(0,s.NC)("debugReverseContinue","Icon for the debug reverse continue action.")),V=(0,o.q5)("debug-run",n.lA.run,(0,s.NC)("debugRun","Icon for the run or debug action.")),M=(0,o.q5)("debug-start",n.lA.debugStart,(0,s.NC)("debugStart","Icon for the debug start action.")),O=(0,o.q5)("debug-configure",n.lA.gear,(0,s.NC)("debugConfigure","Icon for the debug configure action."));(0,o.q5)("debug-console",n.lA.gear,(0,s.NC)("debugConsole","Icon for the debug console open action."));const _=(0,o.q5)("debug-remove-config",n.lA.trash,(0,s.NC)("debugRemoveConfig","Icon for removing debug configurations."));(0,o.q5)("debug-collapse-all",n.lA.collapseAll,(0,s.NC)("debugCollapseAll","Icon for the collapse all action in the debug views."));const q=(0,o.q5)("callstack-view-session",n.lA.bug,(0,s.NC)("callstackViewSession","Icon for the session icon in the call stack view.")),H=(0,o.q5)("debug-console-clear-all",n.lA.clearAll,(0,s.NC)("debugConsoleClearAll","Icon for the clear all action in the debug console.")),P=(0,o.q5)("watch-expressions-remove-all",n.lA.closeAll,(0,s.NC)("watchExpressionsRemoveAll","Icon for the Remove All action in the watch view.")),U=(0,o.q5)("watch-expression-remove",n.lA.removeClose,(0,s.NC)("watchExpressionRemove","Icon for the Remove action in the watch view.")),W=(0,o.q5)("watch-expressions-add",n.lA.add,(0,s.NC)("watchExpressionsAdd","Icon for the add action in the watch view.")),$=(0,o.q5)("watch-expressions-add-function-breakpoint",n.lA.add,(0,s.NC)("watchExpressionsAddFuncBreakpoint","Icon for the add function breakpoint action in the watch view.")),K=(0,o.q5)("breakpoints-remove-all",n.lA.closeAll,(0,s.NC)("breakpointsRemoveAll","Icon for the Remove All action in the breakpoints view.")),J=(0,o.q5)("breakpoints-activate",n.lA.activateBreakpoints,(0,s.NC)("breakpointsActivate","Icon for the activate action in the breakpoints view.")),z=(0,o.q5)("debug-console-evaluation-input",n.lA.arrowSmallRight,(0,s.NC)("debugConsoleEvaluationInput","Icon for the debug evaluation input marker.")),j=(0,o.q5)("debug-console-evaluation-prompt",n.lA.chevronRight,(0,s.NC)("debugConsoleEvaluationPrompt","Icon for the debug evaluation prompt.")),Q=(0,o.q5)("debug-inspect-memory",n.lA.fileBinary,(0,s.NC)("debugInspectMemory","Icon for the inspect memory action."))},91825:(e,t,i)=>{i.d(t,{A2:()=>x,Br:()=>F,Di:()=>E,FP:()=>A,K1:()=>q,Ly:()=>y,Tp:()=>_,Uo:()=>O,_w:()=>D,hO:()=>H,jz:()=>R,k9:()=>P,ko:()=>T,l_:()=>U,nR:()=>W,sX:()=>N});var n=i(80855),s=i(9488),o=i(15393),a=i(53060),r=i(71050),c=i(89954),d=i(4669),l=i(5976),u=i(36248),p=i(95935),h=i(98401),g=i(70666),b=i(98e3),m=i(24314),k=i(63580),f=i(48205),v=i(29250),C=i(76743),S=i(92714),w=i(5826),B=i(43557);class y{static{this.allValues=new Map}static{this.BASE_CHUNK_SIZE=100}constructor(e,t,i,n,s=0,o=0,a=void 0,r=0,c=void 0){this.session=e,this.threadId=t,this._reference=i,this.id=n,this.namedVariables=s,this.indexedVariables=o,this.memoryReference=a,this.startOfVariables=r,this.presentationHint=c,this.valueChanged=!1,this._value=""}get reference(){return this._reference}set reference(e){this._reference=e,this.children=void 0}async evaluateLazy(){if(void 0===this.reference)return;const e=await this.session.variables(this.reference,this.threadId,void 0,void 0,void 0);if(!e||!e.body||!e.body.variables||1!==e.body.variables.length)return;const t=e.body.variables[0];this.reference=t.variablesReference,this._value=t.value,this.namedVariables=t.namedVariables,this.indexedVariables=t.indexedVariables,this.memoryReference=t.memoryReference,this.presentationHint=t.presentationHint,this.adoptLazyResponse(t)}adoptLazyResponse(e){}getChildren(){return this.children||(this.children=this.doGetChildren()),this.children}async doGetChildren(){if(!this.hasChildren)return[];if(!this.getChildrenInChunks)return this.fetchVariables(void 0,void 0,void 0);const e=this.namedVariables?await this.fetchVariables(void 0,void 0,"named"):[];let t=y.BASE_CHUNK_SIZE;for(;this.indexedVariables&&this.indexedVariables>t*y.BASE_CHUNK_SIZE;)t*=y.BASE_CHUNK_SIZE;if(this.indexedVariables&&this.indexedVariables>t){const i=Math.ceil(this.indexedVariables/t);for(let n=0;n<i;n++){const i=(this.startOfVariables||0)+n*t,s=Math.min(t,this.indexedVariables-n*t);e.push(new D(this.session,this.threadId,this,this.reference,`[${i}..${i+s-1}]`,"","",void 0,s,void 0,{kind:"virtual"},void 0,void 0,!0,i))}return e}const i=await this.fetchVariables(this.startOfVariables,this.indexedVariables,"indexed");return e.concat(i)}getId(){return this.id}getSession(){return this.session}get value(){return this._value}get hasChildren(){return!!this.reference&&this.reference>0&&!this.presentationHint?.lazy}async fetchVariables(e,t,i){try{const n=await this.session.variables(this.reference||0,this.threadId,i,e,t);if(!n||!n.body||!n.body.variables)return[];const s=new Map,o=n.body.variables.filter((e=>!!e)).map((e=>{if((0,h.HD)(e.value)&&(0,h.HD)(e.name)&&"number"==typeof e.variablesReference){const t=s.get(e.name)||0,i=t>0?t.toString():"";return s.set(e.name,t+1),new D(this.session,this.threadId,this,e.variablesReference,e.name,e.evaluateName,e.value,e.namedVariables,e.indexedVariables,e.memoryReference,e.presentationHint,e.type,e.__vscodeVariableMenuContext,!0,0,i)}return new D(this.session,this.threadId,this,0,"",void 0,k.NC("invalidVariableAttributes","Invalid variable attributes"),0,0,void 0,{kind:"virtual"},void 0,void 0,!1)}));return this.session.autoExpandLazyVariables&&await Promise.all(o.map((e=>e.presentationHint?.lazy&&e.evaluateLazy()))),o}catch(e){return[new D(this.session,this.threadId,this,0,"",void 0,e.message,0,0,void 0,{kind:"virtual"},void 0,void 0,!1)]}}get getChildrenInChunks(){return!!this.indexedVariables}set value(e){this._value=e,this.valueChanged=!!y.allValues.get(this.getId())&&y.allValues.get(this.getId())!==x.DEFAULT_VALUE&&y.allValues.get(this.getId())!==e,y.allValues.set(this.getId(),e)}toString(){return this.value}async evaluateExpression(e,t,i,n,s=!1){if(!t||!i&&"repl"!==n)return this.value="repl"===n?k.NC("startDebugFirst","Please start a debug session to evaluate expressions"):x.DEFAULT_VALUE,this.reference=0,!1;this.session=t;try{const o=await t.evaluate(e,i?i.frameId:void 0,n);return!(!o||!o.body||(this.value=o.body.result||"",this.reference=o.body.variablesReference,this.namedVariables=o.body.namedVariables,this.indexedVariables=o.body.indexedVariables,this.memoryReference=o.body.memoryReference,this.type=o.body.type||this.type,this.presentationHint=o.body.presentationHint,!s&&o.body.presentationHint?.lazy&&await this.evaluateLazy(),0))}catch(e){return this.value=e.message||"",this.reference=0,!1}}}function I(e,t){t&&t.body&&(e.value=t.body.value||"",e.type=t.body.type||e.type,e.reference=t.body.variablesReference,e.namedVariables=t.body.namedVariables,e.indexedVariables=t.body.indexedVariables)}class x extends y{static{this.DEFAULT_VALUE=k.NC("notAvailable","not available")}constructor(e,t=(0,b.R)()){super(void 0,void 0,0,t),this.name=e,this.available=!1,e&&(this.value=x.DEFAULT_VALUE)}async evaluate(e,t,i,n){this.available=await this.evaluateExpression(this.name,e,t,i,n)}toString(){return`${this.name}\n${this.value}`}async setExpression(e,t){this.session&&I(this,await this.session.setExpression(t.frameId,this.name,e))}}class D extends y{constructor(e,t,i,n,s,o,a,r,c,d,l,u=void 0,p=void 0,h=!0,g=0,b=""){super(e,t,n,`variable:${i.getId()}:${s}:${b}`,r,c,d,g,l),this.parent=i,this.name=s,this.evaluateName=o,this.variableMenuContext=p,this.available=h,this.value=a||"",this.type=u}async setVariable(e,t){if(this.session)try{if(this.session.capabilities.supportsSetExpression&&!this.session.capabilities.supportsSetVariable&&this.evaluateName)return this.setExpression(e,t);I(this,await this.session.setVariable(this.parent.reference,this.name,e))}catch(e){this.errorMessage=e.message}}async setExpression(e,t){this.session&&this.evaluateName&&I(this,await this.session.setExpression(t.frameId,this.evaluateName,e))}toString(){return this.name?`${this.name}: ${this.value}`:this.value}adoptLazyResponse(e){this.evaluateName=e.evaluateName}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,memoryReference:this.memoryReference,value:this.value,evaluateName:this.evaluateName}}}class N extends y{constructor(e,t,i,n,s,o,a,r){super(e.thread.session,e.thread.threadId,n,`scope:${i}:${t}`,o,a),this.name=i,this.expensive=s,this.range=r}toString(){return this.name}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,expensive:this.expensive}}}class A extends N{constructor(e,t,i){super(e,t,i,0,!1)}toString(){return this.name}}class E{constructor(e,t,i,n,s,o,a,r,c){this.thread=e,this.frameId=t,this.source=i,this.name=n,this.presentationHint=s,this.range=o,this.index=a,this.canRestart=r,this.instructionPointerReference=c}getId(){return`stackframe:${this.thread.getId()}:${this.index}:${this.source.name}`}getScopes(){return this.scopes||(this.scopes=this.thread.session.scopes(this.frameId,this.thread.threadId).then((e=>{if(!e||!e.body||!e.body.scopes)return[];const t=new Set;return e.body.scopes.map((e=>{let i=0;do{i=(0,c.Cv)(`${e.name}:${e.line}:${e.column}`,i)}while(t.has(i));return t.add(i),new N(this,i,e.name,e.variablesReference,e.expensive,e.namedVariables,e.indexedVariables,e.line&&e.column&&e.endLine&&e.endColumn?new m.e(e.line,e.column,e.endLine,e.endColumn):void 0)}))}),(e=>[new A(this,0,e.message)]))),this.scopes}async getMostSpecificScopes(e){const t=(await this.getScopes()).filter((e=>!e.expensive));if(!t.some((e=>!!e.range)))return t;const i=t.filter((t=>t.range&&m.e.containsRange(t.range,e))).sort(((e,t)=>e.range.endLineNumber-e.range.startLineNumber-(t.range.endLineNumber-t.range.startLineNumber)));return i.length?i:t}restart(){return this.thread.session.restartFrame(this.frameId,this.thread.threadId)}forgetScopes(){this.scopes=void 0}toString(){const e="number"==typeof this.range.startLineNumber?`:${this.range.startLineNumber}`:"",t=`${this.source.inMemory?this.source.name:this.source.uri.fsPath}${e}`;return t===C.id?this.name:`${this.name} (${t})`}async openInEditor(e,t,i,n){const s=this.thread.stoppedDetails?.reason;return this.instructionPointerReference&&("instruction breakpoint"===s||"step"===s&&"instruction"===this.thread.lastSteppingGranularity)?e.openEditor(S.n.instance,{pinned:!0}):this.source.available?this.source.openInEditor(e,this.range,t,i,n):void 0}equals(e){return this.name===e.name&&e.thread===this.thread&&this.frameId===e.frameId&&e.source===this.source&&m.e.equalsRange(this.range,e.range)}}class R{constructor(e,t,i){this.session=e,this.name=t,this.threadId=i,this.callStackCancellationTokens=[],this.reachedEndOfCallStack=!1,this.callStack=[],this.staleCallStack=[],this.stopped=!1}getId(){return`thread:${this.session.getId()}:${this.threadId}`}clearCallStack(){this.callStack.length&&(this.staleCallStack=this.callStack),this.callStack=[],this.callStackCancellationTokens.forEach((e=>e.dispose(!0))),this.callStackCancellationTokens=[]}getCallStack(){return this.callStack}getStaleCallStack(){return this.staleCallStack}getTopStackFrame(){return this.getCallStack().find((e=>!!(e&&("instruction breakpoint"===this.stoppedDetails?.reason||"step"===this.stoppedDetails?.reason&&"instruction"===this.lastSteppingGranularity)&&e.instructionPointerReference||e.source&&e.source.available&&"deemphasize"!==e.source.presentationHint)))}get stateLabel(){return this.stoppedDetails?this.stoppedDetails.description||(this.stoppedDetails.reason?k.NC({key:"pausedOn",comment:["indicates reason for program being paused"]},"Paused on {0}",this.stoppedDetails.reason):k.NC("paused","Paused")):k.NC({key:"running",comment:["indicates state"]},"Running")}async fetchCallStack(e=20){if(this.stopped){const t=this.callStack.length,i=await this.getCallStackImpl(t,e);this.reachedEndOfCallStack=i.length<e,t<this.callStack.length&&this.callStack.splice(t,this.callStack.length-t),this.callStack=this.callStack.concat(i||[]),"number"==typeof this.stoppedDetails?.totalFrames&&this.stoppedDetails.totalFrames===this.callStack.length&&(this.reachedEndOfCallStack=!0)}}async getCallStackImpl(e,t){try{const i=new r.A;this.callStackCancellationTokens.push(i);const n=await this.session.stackTrace(this.threadId,e,t,i.token);return n&&n.body&&!i.token.isCancellationRequested?(this.stoppedDetails&&(this.stoppedDetails.totalFrames=n.body.totalFrames),n.body.stackFrames.map(((t,i)=>{const n=this.session.getSource(t.source);return new E(this,t.id,n,t.name,t.presentationHint,new m.e(t.line,t.column,t.endLine||t.line,t.endColumn||t.column),e+i,"boolean"!=typeof t.canRestart||t.canRestart,t.instructionPointerReference)}))):[]}catch(e){return this.stoppedDetails&&(this.stoppedDetails.framesErrorMessage=e.message),[]}}get exceptionInfo(){return this.stoppedDetails&&"exception"===this.stoppedDetails.reason?this.session.capabilities.supportsExceptionInfoRequest?this.session.exceptionInfo(this.threadId):Promise.resolve({description:this.stoppedDetails.text,breakMode:null}):Promise.resolve(void 0)}next(e){return this.session.next(this.threadId,e)}stepIn(e){return this.session.stepIn(this.threadId,void 0,e)}stepOut(e){return this.session.stepOut(this.threadId,e)}stepBack(e){return this.session.stepBack(this.threadId,e)}continue(){return this.session.continue(this.threadId)}pause(){return this.session.pause(this.threadId)}terminate(){return this.session.terminateThreads([this.threadId])}reverseContinue(){return this.session.reverseContinue(this.threadId)}}const T=(e,t,i,n="memory")=>g.ov.from({scheme:v.Sb,authority:e,path:"/"+encodeURIComponent(t)+`/${encodeURIComponent(n)}.bin`,query:i?`?range=${i.fromOffset}:${i.toOffset}`:void 0});class F extends l.JT{constructor(e,t){super(),this.memoryReference=e,this.session=t,this.invalidateEmitter=this._register(new d.Q5),this.onDidInvalidate=this.invalidateEmitter.event,this.writable=!!this.session.capabilities.supportsWriteMemoryRequest,this._register(t.onDidInvalidateMemory((t=>{t.body.memoryReference===e&&this.invalidate(t.body.offset,t.body.count-t.body.offset)})))}async read(e,t){const i=t-e,n=e,s=await this.session.readMemory(this.memoryReference,n,i);if(void 0===s||!s.body?.data)return[{type:1,offset:n,length:i}];let o;try{o=(0,a.NV)(s.body.data)}catch{return[{type:2,offset:n,length:i,error:"Invalid base64 data from debug adapter"}]}const r=s.body.unreadableBytes||0,c=i-r;if(o.byteLength<c){const e=a.KN.alloc(c-o.byteLength);e.buffer.fill(0),o=a.KN.concat([o,e],c)}else o.byteLength>c&&(o=o.slice(0,c));return r?[{type:0,offset:n,length:c,data:o},{type:1,offset:n+c,length:r}]:[{type:0,offset:n,length:i,data:o}]}async write(e,t){const i=await this.session.writeMemory(this.memoryReference,e,(0,a.oF)(t),!0),n=i?.body?.bytesWritten??t.byteLength;return this.invalidate(e,e+n),n}dispose(){super.dispose()}invalidate(e,t){this.invalidateEmitter.fire({fromOffset:e,toOffset:t})}}class L{constructor(e,t){this.enabled=e,this.id=t}getId(){return this.id}}function V(e,t){return(0,u.jB)({supportsConditionalBreakpoints:!!t.supportsConditionalBreakpoints,supportsHitConditionalBreakpoints:!!t.supportsHitConditionalBreakpoints,supportsLogPoints:!!t.supportsLogPoints,supportsFunctionBreakpoints:!!t.supportsFunctionBreakpoints,supportsDataBreakpoints:!!t.supportsDataBreakpoints,supportsInstructionBreakpoints:!!t.supportsInstructionBreakpoints},e)}class M extends L{constructor(e,t,i,n,s){super(e,s),this.hitCondition=t,this.condition=i,this.logMessage=n,this.sessionData=new Map,void 0===e&&(this.enabled=!0)}setSessionData(e,t){t?(t.sessionId=e,this.sessionData.set(e,t)):this.sessionData.delete(e);const i=Array.from(this.sessionData.values()),n=(0,s.EB)(i.filter((e=>e.verified)),(e=>`${e.line}:${e.column}`));n.length?this.data=1===n.length?n[0]:void 0:this.data=i.length?i[0]:void 0}get message(){if(this.data)return this.data.message}get verified(){return!this.data||this.data.verified}get sessionsThatVerified(){const e=[];for(const[t,i]of this.sessionData)i.verified&&e.push(t);return e}getIdFromAdapter(e){const t=this.sessionData.get(e);return t?t.id:void 0}getDebugProtocolBreakpoint(e){const t=this.sessionData.get(e);if(t)return{id:t.id,verified:t.verified,message:t.message,source:t.source,line:t.line,column:t.column,endLine:t.endLine,endColumn:t.endColumn,instructionReference:t.instructionReference,offset:t.offset}}toJSON(){const e=Object.create(null);return e.id=this.getId(),e.enabled=this.enabled,e.condition=this.condition,e.hitCondition=this.hitCondition,e.logMessage=this.logMessage,e}}class O extends M{constructor(e,t,i,n,s,o,a,r,c,d,l,u=(0,b.R)()){super(n,o,s,a,u),this._uri=e,this._lineNumber=t,this._column=i,this._adapterData=r,this.textFileService=c,this.uriIdentityService=d,this.logService=l}get originalUri(){return this._uri}get lineNumber(){return this.verified&&this.data&&"number"==typeof this.data.line?this.data.line:this._lineNumber}get verified(){return!this.data||this.data.verified&&!this.textFileService.isDirty(this._uri)}get uri(){return this.verified&&this.data&&this.data.source?(0,C.UQ)(this.data.source,this.data.source.path,this.data.sessionId,this.uriIdentityService,this.logService):this._uri}get column(){return this.verified&&this.data&&"number"==typeof this.data.column?this.data.column:this._column}get message(){return this.textFileService.isDirty(this.uri)?k.NC("breakpointDirtydHover","Unverified breakpoint. File is modified, please restart debug session."):super.message}get adapterData(){return this.data&&this.data.source&&this.data.source.adapterData?this.data.source.adapterData:this._adapterData}get endLineNumber(){return this.verified&&this.data?this.data.endLine:void 0}get endColumn(){return this.verified&&this.data?this.data.endColumn:void 0}get sessionAgnosticData(){return{lineNumber:this._lineNumber,column:this._column}}get supported(){return!(this.data&&(this.logMessage&&!this.data.supportsLogPoints||this.condition&&!this.data.supportsConditionalBreakpoints||this.hitCondition&&!this.data.supportsHitConditionalBreakpoints))}setSessionData(e,t){super.setSessionData(e,t),this._adapterData||(this._adapterData=this.adapterData)}toJSON(){const e=super.toJSON();return e.uri=this._uri,e.lineNumber=this._lineNumber,e.column=this._column,e.adapterData=this.adapterData,e}toString(){return`${p.Hx(this.uri)} ${this.lineNumber}`}update(e){(0,h.Jp)(e.lineNumber)||(this._lineNumber=e.lineNumber),(0,h.Jp)(e.column)||(this._column=e.column),(0,h.Jp)(e.condition)||(this.condition=e.condition),(0,h.Jp)(e.hitCondition)||(this.hitCondition=e.hitCondition),(0,h.Jp)(e.logMessage)||(this.logMessage=e.logMessage)}}class _ extends M{constructor(e,t,i,n,s,o=(0,b.R)()){super(t,i,n,s,o),this.name=e}toJSON(){const e=super.toJSON();return e.name=this.name,e}get supported(){return!this.data||this.data.supportsFunctionBreakpoints}toString(){return this.name}}class q extends M{constructor(e,t,i,n,s,o,a,r,c,d=(0,b.R)()){super(n,s,o,a,d),this.description=e,this.dataId=t,this.canPersist=i,this.accessTypes=r,this.accessType=c}toJSON(){const e=super.toJSON();return e.description=this.description,e.dataId=this.dataId,e.accessTypes=this.accessTypes,e.accessType=this.accessType,e}get supported(){return!this.data||this.data.supportsDataBreakpoints}toString(){return this.description}}class H extends M{constructor(e,t,i,n,s,o,a,r=!1){super(i,void 0,s,void 0,(0,b.R)()),this.filter=e,this.label=t,this.supportsCondition=n,this.description=o,this.conditionDescription=a,this.fallback=r,this.supportedSessions=new Set}toJSON(){const e=Object.create(null);return e.filter=this.filter,e.label=this.label,e.enabled=this.enabled,e.supportsCondition=this.supportsCondition,e.conditionDescription=this.conditionDescription,e.condition=this.condition,e.fallback=this.fallback,e.description=this.description,e}setSupportedSession(e,t){t?this.supportedSessions.add(e):this.supportedSessions.delete(e)}setFallback(e){this.fallback=e}get supported(){return!0}isSupportedSession(e){return e?this.supportedSessions.has(e):this.fallback}matches(e){return this.filter===e.filter&&this.label===e.label&&this.supportsCondition===!!e.supportsCondition&&this.conditionDescription===e.conditionDescription&&this.description===e.description}toString(){return this.label}}class P extends M{constructor(e,t,i,n,s,o,a,r=(0,b.R)()){super(n,s,o,a,r),this.instructionReference=e,this.offset=t,this.canPersist=i}toJSON(){const e=super.toJSON();return e.instructionReference=this.instructionReference,e.offset=this.offset,e}get supported(){return!this.data||this.data.supportsInstructionBreakpoints}toString(){return this.instructionReference}}class U{constructor(e,t){this.sessionId=e,this.threadId=t}getId(){return`${this.sessionId}:${this.threadId}`}}let W=class{constructor(e,t,i,n){this.textFileService=t,this.uriIdentityService=i,this.logService=n,this.schedulers=new Map,this.breakpointsActivated=!0,this._onDidChangeBreakpoints=new d.Q5,this._onDidChangeCallStack=new d.Q5,this._onDidChangeWatchExpressions=new d.Q5,this.breakpoints=e.loadBreakpoints(),this.functionBreakpoints=e.loadFunctionBreakpoints(),this.exceptionBreakpoints=e.loadExceptionBreakpoints(),this.dataBreakpoints=e.loadDataBreakpoints(),this.watchExpressions=e.loadWatchExpressions(),this.instructionBreakpoints=[],this.sessions=[]}getId(){return"root"}getSession(e,t=!1){if(e)return this.getSessions(t).find((t=>t.getId()===e))}getSessions(e=!1){return this.sessions.filter((t=>e||0!==t.state))}addSession(e){this.sessions=this.sessions.filter((t=>t.getId()!==e.getId()&&(0!==t.state||t.configuration.name!==e.configuration.name)));let t=1;for(;this.sessions.some((t=>t.getLabel()===e.getLabel()));)e.setName(`${e.configuration.name} ${++t}`);let i=-1;e.parentSession&&(i=(0,s.vk)(this.sessions,(t=>t.parentSession===e.parentSession||t===e.parentSession))),i>=0?this.sessions.splice(i+1,0,e):this.sessions.push(e),this._onDidChangeCallStack.fire(void 0)}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get onDidChangeCallStack(){return this._onDidChangeCallStack.event}get onDidChangeWatchExpressions(){return this._onDidChangeWatchExpressions.event}rawUpdate(e){const t=this.sessions.find((t=>t.getId()===e.sessionId));t&&(t.rawUpdate(e),this._onDidChangeCallStack.fire(void 0))}clearThreads(e,t,i=void 0){const n=this.sessions.find((t=>t.getId()===e));this.schedulers.forEach((e=>{e.scheduler.dispose(),e.completeDeferred.complete()})),this.schedulers.clear(),n&&(n.clearThreads(t,i),this._onDidChangeCallStack.fire(void 0))}async fetchCallstack(e,t){if(e.reachedEndOfCallStack)return;const i=e.stoppedDetails?.totalFrames,n="number"==typeof i?i-e.getCallStack().length:void 0;(!t||n&&t>n)&&(t=n),t&&t>0&&(await e.fetchCallStack(t),this._onDidChangeCallStack.fire())}refreshTopOfCallstack(e){if(e.session.capabilities.supportsDelayedStackTraceLoading){let t=Promise.resolve();const i=new Promise(((i,n)=>{t=e.fetchCallStack(1).then((()=>{if(!this.schedulers.has(e.getId())){const t=new o.CR;this.schedulers.set(e.getId(),{completeDeferred:t,scheduler:new o.pY((()=>{e.fetchCallStack(19).then((()=>{const t=e.getStaleCallStack(),i=e.getCallStack();let n=t.length!==i.length;for(let e=1;e<t.length&&!n;e++)n=!t[e].equals(i[e]);n&&this._onDidChangeCallStack.fire()})).finally((()=>{t.complete(),this.schedulers.delete(e.getId())}))}),420)})}const t=this.schedulers.get(e.getId());t.scheduler.schedule(),t.completeDeferred.p.then(i,n),this._onDidChangeCallStack.fire()}))}));return{topCallStack:t,wholeCallStack:i}}const t=e.fetchCallStack();return{wholeCallStack:t,topCallStack:t}}getBreakpoints(e){if(e){const t=e.uri?.toString(),i=e.originalUri?.toString();return this.breakpoints.filter((n=>!(t&&n.uri.toString()!==t||i&&n.originalUri.toString()!==i||e.lineNumber&&n.lineNumber!==e.lineNumber||e.column&&n.column!==e.column||!(!e.enabledOnly||this.breakpointsActivated&&n.enabled))))}return this.breakpoints}getFunctionBreakpoints(){return this.functionBreakpoints}getDataBreakpoints(){return this.dataBreakpoints}getExceptionBreakpoints(){return this.exceptionBreakpoints}getExceptionBreakpointsForSession(e){return this.exceptionBreakpoints.filter((t=>t.isSupportedSession(e)))}getInstructionBreakpoints(){return this.instructionBreakpoints}setExceptionBreakpointsForSession(e,t){if(t){let i=!1;t.forEach((t=>{let n=this.exceptionBreakpoints.filter((e=>e.matches(t))).pop();n||(i=!0,n=new H(t.filter,t.label,!!t.default,!!t.supportsCondition,void 0,t.description,t.conditionDescription),this.exceptionBreakpoints.push(n)),n.setSupportedSession(e,!0)})),i&&this._onDidChangeBreakpoints.fire(void 0)}}removeExceptionBreakpointsForSession(e){this.exceptionBreakpoints.forEach((t=>t.setSupportedSession(e,!1)))}setExceptionBreakpointFallbackSession(e){this.exceptionBreakpoints.forEach((t=>t.setFallback(t.isSupportedSession(e))))}setExceptionBreakpointCondition(e,t){e.condition=t,this._onDidChangeBreakpoints.fire(void 0)}areBreakpointsActivated(){return this.breakpointsActivated}setBreakpointsActivated(e){this.breakpointsActivated=e,this._onDidChangeBreakpoints.fire(void 0)}addBreakpoints(e,t,i=!0){const n=t.map((t=>new O(e,t.lineNumber,t.column,!1!==t.enabled,t.condition,t.hitCondition,t.logMessage,void 0,this.textFileService,this.uriIdentityService,this.logService,t.id)));return this.breakpoints=this.breakpoints.concat(n),this.breakpointsActivated=!0,this.sortAndDeDup(),i&&this._onDidChangeBreakpoints.fire({added:n,sessionOnly:!1}),n}removeBreakpoints(e){this.breakpoints=this.breakpoints.filter((t=>!e.some((e=>e.getId()===t.getId())))),this._onDidChangeBreakpoints.fire({removed:e,sessionOnly:!1})}updateBreakpoints(e){const t=[];this.breakpoints.forEach((i=>{const n=e.get(i.getId());n&&(i.update(n),t.push(i))})),this.sortAndDeDup(),this._onDidChangeBreakpoints.fire({changed:t,sessionOnly:!1})}setBreakpointSessionData(e,t,i){this.breakpoints.forEach((n=>{if(i){const s=i.get(n.getId());s&&n.setSessionData(e,V(s,t))}else n.setSessionData(e,void 0)})),this.functionBreakpoints.forEach((n=>{if(i){const s=i.get(n.getId());s&&n.setSessionData(e,V(s,t))}else n.setSessionData(e,void 0)})),this.dataBreakpoints.forEach((n=>{if(i){const s=i.get(n.getId());s&&n.setSessionData(e,V(s,t))}else n.setSessionData(e,void 0)})),this.exceptionBreakpoints.forEach((n=>{if(i){const s=i.get(n.getId());s&&n.setSessionData(e,V(s,t))}else n.setSessionData(e,void 0)})),this.instructionBreakpoints.forEach((n=>{if(i){const s=i.get(n.getId());s&&n.setSessionData(e,V(s,t))}else n.setSessionData(e,void 0)})),this._onDidChangeBreakpoints.fire({sessionOnly:!0})}getDebugProtocolBreakpoint(e,t){const i=this.breakpoints.find((t=>t.getId()===e));if(i)return i.getDebugProtocolBreakpoint(t)}sortAndDeDup(){this.breakpoints=this.breakpoints.sort(((e,t)=>e.uri.toString()!==t.uri.toString()?p.Hx(e.uri).localeCompare(p.Hx(t.uri)):e.lineNumber===t.lineNumber?e.column&&t.column?e.column-t.column:1:e.lineNumber-t.lineNumber)),this.breakpoints=(0,s.EB)(this.breakpoints,(e=>`${e.uri.toString()}:${e.lineNumber}:${e.column}`))}setEnablement(e,t){if(e instanceof O||e instanceof _||e instanceof H||e instanceof q||e instanceof P){const i=[];e.enabled!==t&&(e instanceof O||e instanceof _||e instanceof q||e instanceof P)&&i.push(e),e.enabled=t,t&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:i,sessionOnly:!1})}}enableOrDisableAllBreakpoints(e){const t=[];this.breakpoints.forEach((i=>{i.enabled!==e&&t.push(i),i.enabled=e})),this.functionBreakpoints.forEach((i=>{i.enabled!==e&&t.push(i),i.enabled=e})),this.dataBreakpoints.forEach((i=>{i.enabled!==e&&t.push(i),i.enabled=e})),this.instructionBreakpoints.forEach((i=>{i.enabled!==e&&t.push(i),i.enabled=e})),e&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:t,sessionOnly:!1})}addFunctionBreakpoint(e,t){const i=new _(e,!0,void 0,void 0,void 0,t);return this.functionBreakpoints.push(i),this._onDidChangeBreakpoints.fire({added:[i],sessionOnly:!1}),i}updateFunctionBreakpoint(e,t){const i=this.functionBreakpoints.find((t=>t.getId()===e));i&&("string"==typeof t.name&&(i.name=t.name),"string"==typeof t.condition&&(i.condition=t.condition),"string"==typeof t.hitCondition&&(i.hitCondition=t.hitCondition),this._onDidChangeBreakpoints.fire({changed:[i],sessionOnly:!1}))}removeFunctionBreakpoints(e){let t;e?(t=this.functionBreakpoints.filter((t=>t.getId()===e)),this.functionBreakpoints=this.functionBreakpoints.filter((t=>t.getId()!==e))):(t=this.functionBreakpoints,this.functionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}addDataBreakpoint(e,t,i,n,s){const o=new q(e,t,i,!0,void 0,void 0,void 0,n,s);this.dataBreakpoints.push(o),this._onDidChangeBreakpoints.fire({added:[o],sessionOnly:!1})}removeDataBreakpoints(e){let t;e?(t=this.dataBreakpoints.filter((t=>t.getId()===e)),this.dataBreakpoints=this.dataBreakpoints.filter((t=>t.getId()!==e))):(t=this.dataBreakpoints,this.dataBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}addInstructionBreakpoint(e,t,i,n){const s=new P(e,t,!1,!0,n,i,void 0);this.instructionBreakpoints.push(s),this._onDidChangeBreakpoints.fire({added:[s],sessionOnly:!0})}removeInstructionBreakpoints(e){let t;e?(t=this.instructionBreakpoints.filter((t=>t.instructionReference===e)),this.instructionBreakpoints=this.instructionBreakpoints.filter((t=>t.instructionReference!==e))):(t=this.instructionBreakpoints,this.instructionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}getWatchExpressions(){return this.watchExpressions}addWatchExpression(e){const t=new x(e||"");return this.watchExpressions.push(t),this._onDidChangeWatchExpressions.fire(t),t}renameWatchExpression(e,t){const i=this.watchExpressions.filter((t=>t.getId()===e));1===i.length&&(i[0].name=t,this._onDidChangeWatchExpressions.fire(i[0]))}removeWatchExpressions(e=null){this.watchExpressions=e?this.watchExpressions.filter((t=>t.getId()!==e)):[],this._onDidChangeWatchExpressions.fire(void 0)}moveWatchExpression(e,t){const i=this.watchExpressions.find((t=>t.getId()===e));i&&(this.watchExpressions=this.watchExpressions.filter((t=>t.getId()!==e)),this.watchExpressions=this.watchExpressions.slice(0,t).concat(i,this.watchExpressions.slice(t)),this._onDidChangeWatchExpressions.fire(void 0))}sourceIsNotAvailable(e){this.sessions.forEach((t=>{const i=t.getSourceForUri(e);i&&(i.available=!1)})),this._onDidChangeCallStack.fire(void 0)}};W=(0,n.g)([(0,n.f)(1,w.MM),(0,n.f)(2,f.v),(0,n.f)(3,B.VZ)],W)},76743:(e,t,i)=>{i.d(t,{Hw:()=>p,UQ:()=>h,id:()=>u});var n=i(63580),s=i(70666),o=i(82663),a=i(95935),r=i(29250),c=i(24448),d=i(66663),l=i(6684);const u=n.NC("unknownSource","Unknown Source");class p{constructor(e,t,i,n){let s;e?(this.raw=e,s=this.raw.path||this.raw.name||"",this.available=!0):(this.raw={name:u},this.available=!1,s=`${r.lR}:${u}`),this.uri=h(this.raw,s,t,i,n)}get name(){return this.raw.name||a.Hx(this.uri)}get origin(){return this.raw.origin}get presentationHint(){return this.raw.presentationHint}get reference(){return this.raw.sourceReference}get inMemory(){return this.uri.scheme===r.lR}openInEditor(e,t,i,n,s){return this.available?e.openEditor({resource:this.uri,description:this.origin,options:{preserveFocus:i,selection:t,revealIfOpened:!0,selectionRevealType:1,pinned:s}},n?c.O3:c.LP):Promise.resolve(void 0)}static getEncodedDebugData(e){let t,i,n;switch(e.scheme){case d.lg.file:t=(0,o.Fv)(e.fsPath);break;case r.lR:if(t=e.path,e.query){const t=e.query.split("&");for(const e of t){const t=e.split("=");if(2===t.length)switch(t[0]){case"session":n=t[1];break;case"ref":i=parseInt(t[1])}}}break;default:t=e.toString()}return{name:a.Hx(e),path:t,sourceReference:i,sessionId:n}}}function h(e,t,i,n,a){const c=t=>"number"==typeof e.sourceReference&&e.sourceReference>0?s.ov.from({scheme:r.lR,path:t,query:`session=${i}&ref=${e.sourceReference}`}):t&&(0,l.p3)(t)?n.asCanonicalUri(s.ov.parse(t)):t&&(0,o.YP)(t)?n.asCanonicalUri(s.ov.file(t)):n.asCanonicalUri(s.ov.from({scheme:r.lR,path:t,query:`session=${i}`}));try{return c(t)}catch(e){return a.error("Invalid path from debug adapter: "+t),c("/invalidDebugSource")}}},92714:(e,t,i)=>{i.d(t,{n:()=>o});var n=i(27169),s=i(63580);class o extends n.Q{constructor(){super(...arguments),this.resource=void 0}static{this.ID="debug.disassemblyView.input"}get typeId(){return o.ID}static get instance(){return o._instance&&!o._instance.isDisposed()||(o._instance=new o),o._instance}getName(){return(0,s.NC)("disassemblyInputName","Disassembly")}matches(e){return e instanceof o}}}}]);
//# sourceMappingURL=894.bundle.js.map