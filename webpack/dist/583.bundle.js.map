{"version":3,"file":"583.bundle.js","mappings":"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","sources":["webpack://monaco-custom-bundle/./node_modules/monaco-editor/esm/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.css","webpack://monaco-custom-bundle/./node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hover.css","webpack://monaco-custom-bundle/./node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hover.css?37e7","webpack://monaco-custom-bundle/./node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/sidebar/media/sidebarpart.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/media/compositepart.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/media/part.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/part.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/compositePart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/sidebar/sidebarPart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/views/common/viewContainerModel.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/views/browser/viewDescriptorService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/common/activity.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/activity/browser/activityService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/activitybar/media/activitybarpart.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/activitybar/media/activityaction.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/activitybar/activitybarActions.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/compositeBar.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/titlebar/media/menubarControl.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/base/browser/ui/menu/menubar.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/base/browser/ui/menu/menubar.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/platform/backup/common/backup.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/actions/windowActions.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/titlebar/menubarControl.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/activitybar/activitybarPart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/auxiliarybar/media/auxiliaryBarPart.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/panel/media/basepanelpart.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/panel/panelPart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/auxiliarybar/auxiliaryBarPart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/paneCompositePart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/hover/browser/media/hover.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/hover/browser/hoverWidget.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/hover/browser/hoverService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/explorerService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/base/browser/ui/grid/gridview.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/base/browser/ui/grid/gridview.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/base/browser/ui/grid/grid.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/media/editorgroupview.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/media/tabstitlecontrol.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/media/titlecontrol.css.js","webpack://monaco-custom-bundle/./node_modules/monaco-editor/esm/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.css?a49b","webpack://monaco-custom-bundle/./node_modules/monaco-editor/esm/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/media/breadcrumbscontrol.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/breadcrumbsModel.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/breadcrumbsPicker.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/breadcrumbsControl.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/titleControl.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/tabsTitleControl.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/editorPanes.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/media/notabstitlecontrol.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/noTabsTitleControl.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/editorGroupWatermark.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/editorGroupView.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/media/editordroptarget.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/editorDropTarget.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/base/browser/ui/centered/centeredViewLayout.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/editor/common/editorGroupFinder.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/editorPart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/fileCommands.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/editors/fileEditorInput.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/editors/textFileSaveErrorHandler.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/fileActions.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/callHierarchy/browser/media/callHierarchy.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/callHierarchy/browser/callHierarchyTree.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/callHierarchy/browser/callHierarchyPeek.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/callHierarchy/browser/callHierarchy.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/typeHierarchy/browser/media/typeHierarchy.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/typeHierarchy/browser/typeHierarchyTree.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/typeHierarchy/browser/typeHierarchyPeek.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/typeHierarchy/browser/typeHierarchy.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/codeEditor/browser/outline/documentSymbolsTree.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/codeEditor/browser/outline/documentSymbolsTree.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/codeEditor/browser/outline/documentSymbolsOutline.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/outline/browser/outlinePane.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/outline/browser/outlineViewState.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/outline/browser/outline.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/outline/browser/outlinePane.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/outline/browser/outline.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/actions/listCommands.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/views/media/views.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/base/browser/ui/tree/treeDefaults.js","webpack://monaco-custom-bundle/./node_modules/monaco-editor/esm/vs/editor/browser/dnd.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/views/checkbox.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/views/treeView.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/remote/browser/remoteExplorer.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webviewView/browser/webviewViewPane.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/api/browser/viewsExtensionPoint.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webviewPanel/browser/webviewEditorInputSerializer.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/customEditor/browser/customEditorInputFactory.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/customEditor/browser/customEditor.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webviewPanel/browser/webviewCommands.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webviewPanel/browser/webviewPanel.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/externalUriOpener/common/externalUriOpener.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/languageStatus/browser/media/languageStatus.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/languageStatus/browser/languageStatus.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/notebook/common/notebookContextKeys.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/languageDetection/browser/languageDetection.contribution.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/editors/textFileEditorTracker.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/editors/binaryFileEditor.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/workspaceWatcher.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/common/dirtyFilesIndicator.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/editors/fileEditorHandler.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/editors/textFileEditor.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/files/browser/files.contribution2.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/editor/editorsObserver.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/editor/browser/editorService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/editor/browser/editorResolverService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/statusbar/media/statusbarpart.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/statusbar/statusbarActions.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/statusbar/statusbarModel.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/statusbar/statusbarItem.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/parts/statusbar/statusbarPart.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/history/browser/historyService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/services/outline/browser/outlineService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/customEditor/browser/media/customEditor.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/customEditor/common/customEditorModelManager.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/customEditor/common/extensionPoint.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/customEditor/common/contributedCustomEditors.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/customEditor/browser/customEditors.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webview/browser/themeing.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/platform/webview/common/webviewPortMapping.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/platform/webview/common/mimeTypes.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webview/browser/resourceLoading.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/codeEditor/browser/find/simpleFindWidget.css.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/codeEditor/browser/find/simpleFindWidget.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webview/browser/webviewFindWidget.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webview/browser/webviewElement.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webview/browser/overlayWebview.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/webview/browser/webviewService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/bulkEdit/browser/bulkFileEdits.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/bulkEdit/browser/bulkTextEdits.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/contrib/bulkEdit/browser/bulkEditService.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/service-override/views.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/service-override/bulkEdit.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/platform/window/common/window.js","webpack://monaco-custom-bundle/./node_modules/vscode/dist/vscode/vs/workbench/browser/style.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-breadcrumbs {\n\tuser-select: none;\n\t-webkit-user-select: none;\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: nowrap;\n\tjustify-content: flex-start;\n\toutline-style: none;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item {\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 0 1 auto;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\talign-self: center;\n\theight: 100%;\n\toutline: none;\n}\n.monaco-breadcrumbs.disabled .monaco-breadcrumb-item {\n\tcursor: default;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item .codicon-breadcrumb-separator {\n\tcolor: inherit;\n}\n\n.monaco-breadcrumbs .monaco-breadcrumb-item:first-of-type::before {\n\tcontent: ' ';\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/monaco-editor/esm/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.css\"],\"names\":[],\"mappings\":\"AAAA;;;+FAG+F;;AAE/F;CACC,iBAAiB;CACjB,yBAAyB;CACzB,aAAa;CACb,mBAAmB;CACnB,iBAAiB;CACjB,2BAA2B;CAC3B,mBAAmB;AACpB;;AAEA;CACC,aAAa;CACb,mBAAmB;CACnB,cAAc;CACd,mBAAmB;CACnB,eAAe;CACf,kBAAkB;CAClB,YAAY;CACZ,aAAa;AACd;AACA;CACC,eAAe;AAChB;;AAEA;CACC,cAAc;AACf;;AAEA;CACC,YAAY;AACb\",\"sourcesContent\":[\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\n.monaco-breadcrumbs {\\n\\tuser-select: none;\\n\\t-webkit-user-select: none;\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tflex-wrap: nowrap;\\n\\tjustify-content: flex-start;\\n\\toutline-style: none;\\n}\\n\\n.monaco-breadcrumbs .monaco-breadcrumb-item {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tflex: 0 1 auto;\\n\\twhite-space: nowrap;\\n\\tcursor: pointer;\\n\\talign-self: center;\\n\\theight: 100%;\\n\\toutline: none;\\n}\\n.monaco-breadcrumbs.disabled .monaco-breadcrumb-item {\\n\\tcursor: default;\\n}\\n\\n.monaco-breadcrumbs .monaco-breadcrumb-item .codicon-breadcrumb-separator {\\n\\tcolor: inherit;\\n}\\n\\n.monaco-breadcrumbs .monaco-breadcrumb-item:first-of-type::before {\\n\\tcontent: ' ';\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-hover {\n\tcursor: default;\n\tposition: absolute;\n\toverflow: hidden;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tbox-sizing: border-box;\n\tanimation: fadein 100ms linear;\n\tline-height: 1.5em;\n}\n\n.monaco-hover.hidden {\n\tdisplay: none;\n}\n\n.monaco-hover a:hover:not(.disabled) {\n\tcursor: pointer;\n}\n\n.monaco-hover .hover-contents:not(.html-hover-contents) {\n\tpadding: 4px 8px;\n}\n\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) {\n\tmax-width: var(--hover-maxWidth, 500px);\n\tword-wrap: break-word;\n}\n\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) hr {\n\tmin-width: 100%;\n}\n\n.monaco-hover p,\n.monaco-hover .code,\n.monaco-hover ul,\n.monaco-hover h1,\n.monaco-hover h2,\n.monaco-hover h3,\n.monaco-hover h4,\n.monaco-hover h5,\n.monaco-hover h6 {\n\tmargin: 8px 0;\n}\n\n.monaco-hover h1,\n.monaco-hover h2,\n.monaco-hover h3,\n.monaco-hover h4,\n.monaco-hover h5,\n.monaco-hover h6 {\n\tline-height: 1.1;\n}\n\n.monaco-hover code {\n\tfont-family: var(--monaco-monospace-font);\n}\n\n.monaco-hover hr {\n\tbox-sizing: border-box;\n\tborder-left: 0px;\n\tborder-right: 0px;\n\tmargin-top: 4px;\n\tmargin-bottom: -4px;\n\tmargin-left: -8px;\n\tmargin-right: -8px;\n\theight: 1px;\n}\n\n.monaco-hover p:first-child,\n.monaco-hover .code:first-child,\n.monaco-hover ul:first-child {\n\tmargin-top: 0;\n}\n\n.monaco-hover p:last-child,\n.monaco-hover .code:last-child,\n.monaco-hover ul:last-child {\n\tmargin-bottom: 0;\n}\n\n/* MarkupContent Layout */\n.monaco-hover ul {\n\tpadding-left: 20px;\n}\n.monaco-hover ol {\n\tpadding-left: 20px;\n}\n\n.monaco-hover li > p {\n\tmargin-bottom: 0;\n}\n\n.monaco-hover li > ul {\n\tmargin-top: 0;\n}\n\n.monaco-hover code {\n\tborder-radius: 3px;\n\tpadding: 0 0.4em;\n}\n\n.monaco-hover .monaco-tokenized-source {\n\twhite-space: pre-wrap;\n}\n\n.monaco-hover .hover-row.status-bar {\n\tfont-size: 12px;\n\tline-height: 22px;\n}\n\n.monaco-hover .hover-row.status-bar .info {\n\tfont-style: italic;\n\tpadding: 0px 8px;\n}\n\n.monaco-hover .hover-row.status-bar .actions {\n\tdisplay: flex;\n\tpadding: 0px 8px;\n}\n\n.monaco-hover .hover-row.status-bar .actions .action-container {\n\tmargin-right: 16px;\n\tcursor: pointer;\n}\n\n.monaco-hover .hover-row.status-bar .actions .action-container .action .icon {\n\tpadding-right: 4px;\n}\n\n.monaco-hover .markdown-hover .hover-contents .codicon {\n\tcolor: inherit;\n\tfont-size: inherit;\n\tvertical-align: middle;\n}\n\n.monaco-hover .hover-contents a.code-link:hover,\n.monaco-hover .hover-contents a.code-link {\n\tcolor: inherit;\n}\n\n.monaco-hover .hover-contents a.code-link:before {\n\tcontent: '(';\n}\n\n.monaco-hover .hover-contents a.code-link:after {\n\tcontent: ')';\n}\n\n.monaco-hover .hover-contents a.code-link > span {\n\ttext-decoration: underline;\n\t/** Hack to force underline to show **/\n\tborder-bottom: 1px solid transparent;\n\ttext-underline-position: under;\n\tcolor: var(--vscode-textLink-foreground);\n}\n\n.monaco-hover .hover-contents a.code-link > span:hover {\n\tcolor: var(--vscode-textLink-activeForeground);\n}\n\n/** Spans in markdown hovers need a margin-bottom to avoid looking cramped: https://github.com/microsoft/vscode/issues/101496 **/\n.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span {\n\tmargin-bottom: 4px;\n\tdisplay: inline-block;\n}\n\n.monaco-hover-content .action-container a {\n\t-webkit-user-select: none;\n\tuser-select: none;\n}\n\n.monaco-hover-content .action-container.disabled {\n\tpointer-events: none;\n\topacity: 0.4;\n\tcursor: default;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hover.css\"],\"names\":[],\"mappings\":\"AAAA;;;+FAG+F;;AAE/F;CACC,eAAe;CACf,kBAAkB;CAClB,gBAAgB;CAChB,iBAAiB;CACjB,yBAAyB;CACzB,sBAAsB;CACtB,8BAA8B;CAC9B,kBAAkB;AACnB;;AAEA;CACC,aAAa;AACd;;AAEA;CACC,eAAe;AAChB;;AAEA;CACC,gBAAgB;AACjB;;AAEA;CACC,uCAAuC;CACvC,qBAAqB;AACtB;;AAEA;CACC,eAAe;AAChB;;AAEA;;;;;;;;;CASC,aAAa;AACd;;AAEA;;;;;;CAMC,gBAAgB;AACjB;;AAEA;CACC,yCAAyC;AAC1C;;AAEA;CACC,sBAAsB;CACtB,gBAAgB;CAChB,iBAAiB;CACjB,eAAe;CACf,mBAAmB;CACnB,iBAAiB;CACjB,kBAAkB;CAClB,WAAW;AACZ;;AAEA;;;CAGC,aAAa;AACd;;AAEA;;;CAGC,gBAAgB;AACjB;;AAEA,yBAAyB;AACzB;CACC,kBAAkB;AACnB;AACA;CACC,kBAAkB;AACnB;;AAEA;CACC,gBAAgB;AACjB;;AAEA;CACC,aAAa;AACd;;AAEA;CACC,kBAAkB;CAClB,gBAAgB;AACjB;;AAEA;CACC,qBAAqB;AACtB;;AAEA;CACC,eAAe;CACf,iBAAiB;AAClB;;AAEA;CACC,kBAAkB;CAClB,gBAAgB;AACjB;;AAEA;CACC,aAAa;CACb,gBAAgB;AACjB;;AAEA;CACC,kBAAkB;CAClB,eAAe;AAChB;;AAEA;CACC,kBAAkB;AACnB;;AAEA;CACC,cAAc;CACd,kBAAkB;CAClB,sBAAsB;AACvB;;AAEA;;CAEC,cAAc;AACf;;AAEA;CACC,YAAY;AACb;;AAEA;CACC,YAAY;AACb;;AAEA;CACC,0BAA0B;CAC1B,sCAAsC;CACtC,oCAAoC;CACpC,8BAA8B;CAC9B,wCAAwC;AACzC;;AAEA;CACC,8CAA8C;AAC/C;;AAEA,gIAAgI;AAChI;CACC,kBAAkB;CAClB,qBAAqB;AACtB;;AAEA;CACC,yBAAyB;CACzB,iBAAiB;AAClB;;AAEA;CACC,oBAAoB;CACpB,YAAY;CACZ,eAAe;AAChB\",\"sourcesContent\":[\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\n.monaco-hover {\\n\\tcursor: default;\\n\\tposition: absolute;\\n\\toverflow: hidden;\\n\\tuser-select: text;\\n\\t-webkit-user-select: text;\\n\\tbox-sizing: border-box;\\n\\tanimation: fadein 100ms linear;\\n\\tline-height: 1.5em;\\n}\\n\\n.monaco-hover.hidden {\\n\\tdisplay: none;\\n}\\n\\n.monaco-hover a:hover:not(.disabled) {\\n\\tcursor: pointer;\\n}\\n\\n.monaco-hover .hover-contents:not(.html-hover-contents) {\\n\\tpadding: 4px 8px;\\n}\\n\\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) {\\n\\tmax-width: var(--hover-maxWidth, 500px);\\n\\tword-wrap: break-word;\\n}\\n\\n.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) hr {\\n\\tmin-width: 100%;\\n}\\n\\n.monaco-hover p,\\n.monaco-hover .code,\\n.monaco-hover ul,\\n.monaco-hover h1,\\n.monaco-hover h2,\\n.monaco-hover h3,\\n.monaco-hover h4,\\n.monaco-hover h5,\\n.monaco-hover h6 {\\n\\tmargin: 8px 0;\\n}\\n\\n.monaco-hover h1,\\n.monaco-hover h2,\\n.monaco-hover h3,\\n.monaco-hover h4,\\n.monaco-hover h5,\\n.monaco-hover h6 {\\n\\tline-height: 1.1;\\n}\\n\\n.monaco-hover code {\\n\\tfont-family: var(--monaco-monospace-font);\\n}\\n\\n.monaco-hover hr {\\n\\tbox-sizing: border-box;\\n\\tborder-left: 0px;\\n\\tborder-right: 0px;\\n\\tmargin-top: 4px;\\n\\tmargin-bottom: -4px;\\n\\tmargin-left: -8px;\\n\\tmargin-right: -8px;\\n\\theight: 1px;\\n}\\n\\n.monaco-hover p:first-child,\\n.monaco-hover .code:first-child,\\n.monaco-hover ul:first-child {\\n\\tmargin-top: 0;\\n}\\n\\n.monaco-hover p:last-child,\\n.monaco-hover .code:last-child,\\n.monaco-hover ul:last-child {\\n\\tmargin-bottom: 0;\\n}\\n\\n/* MarkupContent Layout */\\n.monaco-hover ul {\\n\\tpadding-left: 20px;\\n}\\n.monaco-hover ol {\\n\\tpadding-left: 20px;\\n}\\n\\n.monaco-hover li > p {\\n\\tmargin-bottom: 0;\\n}\\n\\n.monaco-hover li > ul {\\n\\tmargin-top: 0;\\n}\\n\\n.monaco-hover code {\\n\\tborder-radius: 3px;\\n\\tpadding: 0 0.4em;\\n}\\n\\n.monaco-hover .monaco-tokenized-source {\\n\\twhite-space: pre-wrap;\\n}\\n\\n.monaco-hover .hover-row.status-bar {\\n\\tfont-size: 12px;\\n\\tline-height: 22px;\\n}\\n\\n.monaco-hover .hover-row.status-bar .info {\\n\\tfont-style: italic;\\n\\tpadding: 0px 8px;\\n}\\n\\n.monaco-hover .hover-row.status-bar .actions {\\n\\tdisplay: flex;\\n\\tpadding: 0px 8px;\\n}\\n\\n.monaco-hover .hover-row.status-bar .actions .action-container {\\n\\tmargin-right: 16px;\\n\\tcursor: pointer;\\n}\\n\\n.monaco-hover .hover-row.status-bar .actions .action-container .action .icon {\\n\\tpadding-right: 4px;\\n}\\n\\n.monaco-hover .markdown-hover .hover-contents .codicon {\\n\\tcolor: inherit;\\n\\tfont-size: inherit;\\n\\tvertical-align: middle;\\n}\\n\\n.monaco-hover .hover-contents a.code-link:hover,\\n.monaco-hover .hover-contents a.code-link {\\n\\tcolor: inherit;\\n}\\n\\n.monaco-hover .hover-contents a.code-link:before {\\n\\tcontent: '(';\\n}\\n\\n.monaco-hover .hover-contents a.code-link:after {\\n\\tcontent: ')';\\n}\\n\\n.monaco-hover .hover-contents a.code-link > span {\\n\\ttext-decoration: underline;\\n\\t/** Hack to force underline to show **/\\n\\tborder-bottom: 1px solid transparent;\\n\\ttext-underline-position: under;\\n\\tcolor: var(--vscode-textLink-foreground);\\n}\\n\\n.monaco-hover .hover-contents a.code-link > span:hover {\\n\\tcolor: var(--vscode-textLink-activeForeground);\\n}\\n\\n/** Spans in markdown hovers need a margin-bottom to avoid looking cramped: https://github.com/microsoft/vscode/issues/101496 **/\\n.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span {\\n\\tmargin-bottom: 4px;\\n\\tdisplay: inline-block;\\n}\\n\\n.monaco-hover-content .action-container a {\\n\\t-webkit-user-select: none;\\n\\tuser-select: none;\\n}\\n\\n.monaco-hover-content .action-container.disabled {\\n\\tpointer-events: none;\\n\\topacity: 0.4;\\n\\tcursor: default;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../css-loader/dist/cjs.js!./hover.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../css-loader/dist/cjs.js!./hover.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hover.css';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            actionOptions.run(this.actionContainer);\n        }));\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                e.stopPropagation();\n                e.preventDefault();\n                actionOptions.run(this.actionContainer);\n            }\n        }));\n        this.setEnabled(true);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench.nosidebar>.part.sidebar{display:none!important;visibility:hidden!important}.monaco-workbench .part.sidebar .title-actions .actions-container{justify-content:flex-end}.monaco-workbench .part.sidebar .title-actions .action-item{margin-right:4px}.monaco-workbench .part.sidebar>.title>.title-label h2{text-transform:uppercase}.monaco-workbench .viewlet .collapsible.header .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .viewlet .collapsible.header .actions{width:0}.monaco-workbench .viewlet .collapsible.header.focused .actions,.monaco-workbench .viewlet .split-view-view:hover>.header .actions{flex:1;width:auto}.monaco-workbench .viewlet .collapsible.header .actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;height:22px;margin-right:0;width:28px}.monaco-workbench .viewlet .collapsible.header .actions .action-label .label,.monaco-workbench .viewlet .collapsible.header.collapsed .actions{display:none}.monaco-workbench .viewlet .collapsible.header .action-label{background-repeat:no-repeat;height:16px;margin-right:.2em;width:16px}\";\nn(css,{});\nexport { css, css as default };\n","import n from '../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part>.content>.composite{height:100%}.monaco-workbench .part>.composite.title{display:flex}.monaco-workbench .part>.composite.title>.title-actions{flex:1;padding-left:5px}\";\nn(css,{});\nexport { css, css as default };\n","import n from '../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part{box-sizing:border-box;overflow:hidden}.monaco-workbench .part>.drop-block-overlay.visible{visibility:visible}.monaco-workbench .part>.drop-block-overlay{height:100%;opacity:0;position:absolute;top:0;visibility:hidden;width:100%;z-index:12}.monaco-workbench .part>.title{box-sizing:border-box;display:none;display:flex;height:35px;overflow:hidden;padding-left:8px;padding-right:8px}.monaco-workbench .part>.title>.title-label{line-height:35px;overflow:hidden;padding-left:12px;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label h2{cursor:default;font-size:11px;font-weight:400;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part>.title>.title-label a{cursor:default;font-size:13px;text-decoration:none}.monaco-workbench .part>.title>.title-actions{flex:1;height:35px;padding-left:5px}.monaco-workbench .part>.title>.title-actions .action-label{background-position:50%;background-repeat:no-repeat;background-size:16px;display:block}.monaco-workbench .part>.title>.title-actions .action-label .label{display:none}.monaco-workbench .part>.title>.title-actions .action-label.codicon{color:inherit}.monaco-workbench .part>.content{font-size:13px}.monaco-workbench .part.editor>.content .monaco-progress-container,.monaco-workbench .part>.content>.monaco-progress-container{height:2px;left:0;position:absolute;top:33px;z-index:5}.monaco-workbench\\n\\t.part.editor>.content\\n\\t.monaco-progress-container\\n\\t.progress-bit,.monaco-workbench .part>.content>.monaco-progress-container .progress-bit{height:2px}\";\nn(css,{});\nexport { css, css as default };\n","import './media/part.css.js';\nimport { Component } from '../common/component.js';\nimport { size, Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nclass Part extends Component {\n    get dimension() { return this._dimension; }\n    constructor(id, options, themeService, storageService, layoutService) {\n        super(id, themeService, storageService);\n        this.options = options;\n        this.layoutService = layoutService;\n        this._onDidVisibilityChange = this._register(( new Emitter()));\n        this.onDidVisibilityChange = this._onDidVisibilityChange.event;\n        this._onDidChange = this._register(( new Emitter()));\n        layoutService.registerPart(this);\n    }\n    onThemeChange(theme) {\n        if (this.parent) {\n            super.onThemeChange(theme);\n        }\n    }\n    updateStyles() {\n        super.updateStyles();\n    }\n    create(parent, options) {\n        this.parent = parent;\n        this.titleArea = this.createTitleArea(parent, options);\n        this.contentArea = this.createContentArea(parent, options);\n        this.partLayout = ( new PartLayout(this.options, this.contentArea));\n        this.updateStyles();\n    }\n    getContainer() {\n        return this.parent;\n    }\n    createTitleArea(parent, options) {\n        return undefined;\n    }\n    getTitleArea() {\n        return this.titleArea;\n    }\n    createContentArea(parent, options) {\n        return undefined;\n    }\n    getContentArea() {\n        return this.contentArea;\n    }\n    layoutContents(width, height) {\n        const partLayout = assertIsDefined(this.partLayout);\n        return partLayout.layout(width, height);\n    }\n    get onDidChange() { return this._onDidChange.event; }\n    layout(width, height, _top, _left) {\n        this._dimension = ( new Dimension(width, height));\n    }\n    setVisible(visible) {\n        this._onDidVisibilityChange.fire(visible);\n    }\n}\nclass PartLayout {\n    static { this.TITLE_HEIGHT = 35; }\n    constructor(options, contentArea) {\n        this.options = options;\n        this.contentArea = contentArea;\n    }\n    layout(width, height) {\n        let titleSize;\n        if (this.options.hasTitle) {\n            titleSize = ( new Dimension(width, Math.min(height, PartLayout.TITLE_HEIGHT)));\n        }\n        else {\n            titleSize = Dimension.None;\n        }\n        let contentWidth = width;\n        if (this.options && typeof this.options.borderWidth === 'function') {\n            contentWidth -= this.options.borderWidth();\n        }\n        const contentSize = ( new Dimension(contentWidth, height - titleSize.height));\n        if (this.contentArea) {\n            size(this.contentArea, contentSize.width, contentSize.height);\n        }\n        return { titleSize, contentSize };\n    }\n}\nexport { Part };\n","import './media/compositepart.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { defaultGenerator } from 'monaco-editor/esm/vs/base/common/idGenerator.js';\nimport { MutableDisposable, dispose, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { isCancellationError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { prepareActions } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { ProgressBar } from 'monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js';\nimport { Part } from '../part.js';\nimport { ServiceCollection } from 'monaco-editor/esm/vs/platform/instantiation/common/serviceCollection.js';\nimport { IEditorProgressService } from 'monaco-editor/esm/vs/platform/progress/common/progress.js';\nimport { $, show, hide, append, Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { assertIsDefined, withNullAsUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { createActionViewItem } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nimport { ScopedProgressIndicator, AbstractProgressScope } from '../../services/progress/browser/progressIndicator.js';\nimport { WorkbenchToolBar } from 'monaco-editor/esm/vs/platform/actions/browser/toolbar.js';\nimport { defaultProgressBarStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nclass CompositePart extends Part {\n    constructor(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, registry, activeCompositeSettingsKey, defaultCompositeId, nameForTelemetry, compositeCSSClass, titleForegroundColor, id, options) {\n        super(id, options, themeService, storageService, layoutService);\n        this.notificationService = notificationService;\n        this.storageService = storageService;\n        this.contextMenuService = contextMenuService;\n        this.keybindingService = keybindingService;\n        this.instantiationService = instantiationService;\n        this.registry = registry;\n        this.activeCompositeSettingsKey = activeCompositeSettingsKey;\n        this.defaultCompositeId = defaultCompositeId;\n        this.nameForTelemetry = nameForTelemetry;\n        this.compositeCSSClass = compositeCSSClass;\n        this.titleForegroundColor = titleForegroundColor;\n        this.onDidCompositeOpen = this._register(( new Emitter()));\n        this.onDidCompositeClose = this._register(( new Emitter()));\n        this.mapCompositeToCompositeContainer = ( new Map());\n        this.mapActionsBindingToComposite = ( new Map());\n        this.instantiatedCompositeItems = ( new Map());\n        this.actionsListener = this._register(( new MutableDisposable()));\n        this.lastActiveCompositeId = storageService.get(activeCompositeSettingsKey, 1 , this.defaultCompositeId);\n    }\n    openComposite(id, focus) {\n        if (this.activeComposite?.getId() === id) {\n            if (focus) {\n                this.activeComposite.focus();\n            }\n            return this.activeComposite;\n        }\n        if (!this.element) {\n            return;\n        }\n        return this.doOpenComposite(id, focus);\n    }\n    doOpenComposite(id, focus = false) {\n        const currentCompositeOpenToken = defaultGenerator.nextId();\n        this.currentCompositeOpenToken = currentCompositeOpenToken;\n        if (this.activeComposite) {\n            this.hideActiveComposite();\n        }\n        this.updateTitle(id);\n        const composite = this.createComposite(id, true);\n        if ((this.currentCompositeOpenToken !== currentCompositeOpenToken) || (this.activeComposite && this.activeComposite.getId() !== composite.getId())) {\n            return undefined;\n        }\n        if (this.activeComposite?.getId() === composite.getId()) {\n            if (focus) {\n                composite.focus();\n            }\n            this.onDidCompositeOpen.fire({ composite, focus });\n            return composite;\n        }\n        this.showComposite(composite);\n        if (focus) {\n            composite.focus();\n        }\n        if (composite) {\n            this.onDidCompositeOpen.fire({ composite, focus });\n        }\n        return composite;\n    }\n    createComposite(id, isActive) {\n        const compositeItem = this.instantiatedCompositeItems.get(id);\n        if (compositeItem) {\n            return compositeItem.composite;\n        }\n        const compositeDescriptor = this.registry.getComposite(id);\n        if (compositeDescriptor) {\n            const that = this;\n            const compositeProgressIndicator = ( new ScopedProgressIndicator(\n                assertIsDefined(this.progressBar),\n                new (class extends AbstractProgressScope {\n                    constructor() {\n                        super(compositeDescriptor.id, !!isActive);\n                        this._register(that.onDidCompositeOpen.event(e => this.onScopeOpened(e.composite.getId())));\n                        this._register(that.onDidCompositeClose.event(e => this.onScopeClosed(e.getId())));\n                    }\n                })()\n            ));\n            const compositeInstantiationService = this.instantiationService.createChild(( new ServiceCollection(\n                [IEditorProgressService, compositeProgressIndicator]\n            )));\n            const composite = compositeDescriptor.instantiate(compositeInstantiationService);\n            const disposable = ( new DisposableStore());\n            this.instantiatedCompositeItems.set(id, { composite, disposable, progress: compositeProgressIndicator });\n            disposable.add(composite.onTitleAreaUpdate(() => this.onTitleAreaUpdate(composite.getId()), this));\n            return composite;\n        }\n        throw new Error(`Unable to find composite with id ${id}`);\n    }\n    showComposite(composite) {\n        this.activeComposite = composite;\n        const id = this.activeComposite.getId();\n        if (id !== this.defaultCompositeId) {\n            this.storageService.store(this.activeCompositeSettingsKey, id, 1 , 1 );\n        }\n        else {\n            this.storageService.remove(this.activeCompositeSettingsKey, 1 );\n        }\n        this.lastActiveCompositeId = this.activeComposite.getId();\n        let compositeContainer = this.mapCompositeToCompositeContainer.get(composite.getId());\n        if (!compositeContainer) {\n            compositeContainer = $('.composite');\n            compositeContainer.classList.add(...this.compositeCSSClass.split(' '));\n            compositeContainer.id = composite.getId();\n            composite.create(compositeContainer);\n            composite.updateStyles();\n            this.mapCompositeToCompositeContainer.set(composite.getId(), compositeContainer);\n        }\n        if (!this.activeComposite || composite.getId() !== this.activeComposite.getId()) {\n            return undefined;\n        }\n        const contentArea = this.getContentArea();\n        contentArea?.appendChild(compositeContainer);\n        show(compositeContainer);\n        const toolBar = assertIsDefined(this.toolBar);\n        toolBar.actionRunner = composite.getActionRunner();\n        const descriptor = this.registry.getComposite(composite.getId());\n        if (descriptor && descriptor.name !== composite.getTitle()) {\n            this.updateTitle(composite.getId(), composite.getTitle());\n        }\n        let actionsBinding = this.mapActionsBindingToComposite.get(composite.getId());\n        if (!actionsBinding) {\n            actionsBinding = this.collectCompositeActions(composite);\n            this.mapActionsBindingToComposite.set(composite.getId(), actionsBinding);\n        }\n        actionsBinding();\n        this.actionsListener.value = toolBar.actionRunner.onDidRun(e => {\n            if (e.error && !isCancellationError(e.error)) {\n                this.notificationService.error(e.error);\n            }\n        });\n        composite.setVisible(true);\n        if (!this.activeComposite || composite.getId() !== this.activeComposite.getId()) {\n            return;\n        }\n        if (this.contentAreaSize) {\n            composite.layout(this.contentAreaSize);\n        }\n        if (this.boundarySashes) {\n            composite.setBoundarySashes(this.boundarySashes);\n        }\n    }\n    onTitleAreaUpdate(compositeId) {\n        const composite = this.instantiatedCompositeItems.get(compositeId);\n        if (composite) {\n            this.updateTitle(compositeId, composite.composite.getTitle());\n        }\n        if (this.activeComposite?.getId() === compositeId) {\n            const actionsBinding = this.collectCompositeActions(this.activeComposite);\n            this.mapActionsBindingToComposite.set(this.activeComposite.getId(), actionsBinding);\n            actionsBinding();\n        }\n        else {\n            this.mapActionsBindingToComposite.delete(compositeId);\n        }\n    }\n    updateTitle(compositeId, compositeTitle) {\n        const compositeDescriptor = this.registry.getComposite(compositeId);\n        if (!compositeDescriptor || !this.titleLabel) {\n            return;\n        }\n        if (!compositeTitle) {\n            compositeTitle = compositeDescriptor.name;\n        }\n        const keybinding = this.keybindingService.lookupKeybinding(compositeId);\n        this.titleLabel.updateTitle(compositeId, compositeTitle, withNullAsUndefined(keybinding?.getLabel()));\n        const toolBar = assertIsDefined(this.toolBar);\n        toolBar.setAriaLabel(( localize('ariaCompositeToolbarLabel', \"{0} actions\", compositeTitle)));\n    }\n    collectCompositeActions(composite) {\n        const menuIds = composite?.getMenuIds();\n        const primaryActions = composite?.getActions().slice(0) || [];\n        const secondaryActions = composite?.getSecondaryActions().slice(0) || [];\n        const toolBar = assertIsDefined(this.toolBar);\n        toolBar.context = this.actionsContextProvider();\n        return () => toolBar.setActions(prepareActions(primaryActions), prepareActions(secondaryActions), menuIds);\n    }\n    getActiveComposite() {\n        return this.activeComposite;\n    }\n    getLastActiveCompositeId() {\n        return this.lastActiveCompositeId;\n    }\n    hideActiveComposite() {\n        if (!this.activeComposite) {\n            return undefined;\n        }\n        const composite = this.activeComposite;\n        this.activeComposite = undefined;\n        const compositeContainer = this.mapCompositeToCompositeContainer.get(composite.getId());\n        composite.setVisible(false);\n        if (compositeContainer) {\n            compositeContainer.remove();\n            hide(compositeContainer);\n        }\n        this.progressBar?.stop().hide();\n        if (this.toolBar) {\n            this.collectCompositeActions()();\n        }\n        this.onDidCompositeClose.fire(composite);\n        return composite;\n    }\n    createTitleArea(parent) {\n        const titleArea = append(parent, $('.composite'));\n        titleArea.classList.add('title');\n        this.titleLabel = this.createTitleLabel(titleArea);\n        const titleActionsContainer = append(titleArea, $('.title-actions'));\n        this.toolBar = this._register(this.instantiationService.createInstance(WorkbenchToolBar, titleActionsContainer, {\n            actionViewItemProvider: action => this.actionViewItemProvider(action),\n            orientation: 0 ,\n            getKeyBinding: action => this.keybindingService.lookupKeybinding(action.id),\n            anchorAlignmentProvider: () => this.getTitleAreaDropDownAnchorAlignment(),\n            toggleMenuTitle: ( localize('viewsAndMoreActions', \"Views and More Actions...\")),\n            telemetrySource: this.nameForTelemetry\n        }));\n        this.collectCompositeActions()();\n        return titleArea;\n    }\n    createTitleLabel(parent) {\n        const titleContainer = append(parent, $('.title-label'));\n        const titleLabel = append(titleContainer, $('h2'));\n        this.titleLabelElement = titleLabel;\n        const $this = this;\n        return {\n            updateTitle: (id, title, keybinding) => {\n                if (!this.activeComposite || this.activeComposite.getId() === id) {\n                    titleLabel.innerText = title;\n                    titleLabel.title = keybinding ? ( localize('titleTooltip', \"{0} ({1})\", title, keybinding)) : title;\n                }\n            },\n            updateStyles: () => {\n                titleLabel.style.color = $this.titleForegroundColor ? $this.getColor($this.titleForegroundColor) || '' : '';\n            }\n        };\n    }\n    updateStyles() {\n        super.updateStyles();\n        const titleLabel = assertIsDefined(this.titleLabel);\n        titleLabel.updateStyles();\n    }\n    actionViewItemProvider(action) {\n        if (this.activeComposite) {\n            return this.activeComposite.getActionViewItem(action);\n        }\n        return createActionViewItem(this.instantiationService, action);\n    }\n    actionsContextProvider() {\n        if (this.activeComposite) {\n            return this.activeComposite.getActionsContext();\n        }\n        return null;\n    }\n    createContentArea(parent) {\n        const contentContainer = append(parent, $('.content'));\n        this.progressBar = this._register(( new ProgressBar(contentContainer, defaultProgressBarStyles)));\n        this.progressBar.hide();\n        return contentContainer;\n    }\n    getProgressIndicator(id) {\n        const compositeItem = this.instantiatedCompositeItems.get(id);\n        return compositeItem ? compositeItem.progress : undefined;\n    }\n    getTitleAreaDropDownAnchorAlignment() {\n        return 1 ;\n    }\n    layout(width, height, top, left) {\n        super.layout(width, height, top, left);\n        this.contentAreaSize = Dimension.lift(super.layoutContents(width, height).contentSize);\n        this.activeComposite?.layout(this.contentAreaSize);\n    }\n    setBoundarySashes(sashes) {\n        this.boundarySashes = sashes;\n        this.activeComposite?.setBoundarySashes(sashes);\n    }\n    removeComposite(compositeId) {\n        if (this.activeComposite?.getId() === compositeId) {\n            return false;\n        }\n        this.mapCompositeToCompositeContainer.delete(compositeId);\n        this.mapActionsBindingToComposite.delete(compositeId);\n        const compositeItem = this.instantiatedCompositeItems.get(compositeId);\n        if (compositeItem) {\n            compositeItem.composite.dispose();\n            dispose(compositeItem.disposable);\n            this.instantiatedCompositeItems.delete(compositeId);\n        }\n        return true;\n    }\n    dispose() {\n        this.mapCompositeToCompositeContainer.clear();\n        this.mapActionsBindingToComposite.clear();\n        this.instantiatedCompositeItems.forEach(compositeItem => {\n            compositeItem.composite.dispose();\n            dispose(compositeItem.disposable);\n        });\n        this.instantiatedCompositeItems.clear();\n        super.dispose();\n    }\n}\nexport { CompositePart };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/sidebarpart.css.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { CompositePart } from '../compositePart.js';\nimport { Extensions } from '../../panecomposite.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { SidebarFocusContext, ActiveViewletContext } from '../../../common/contextkeys.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { Event, Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { contrastBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { SIDE_BAR_TITLE_FOREGROUND, SIDE_BAR_BORDER, SIDE_BAR_BACKGROUND, SIDE_BAR_FOREGROUND, SIDE_BAR_DRAG_AND_DROP_BACKGROUND } from '../../../common/theme.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { trackFocus, addDisposableListener, EventType } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { CompositeDragAndDropObserver } from '../../dnd.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { Gesture, EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nlet SidebarPart = class SidebarPart extends CompositePart {\n    static { this.activeViewletSettingsKey = 'workbench.sidebar.activeviewletid'; }\n    get preferredWidth() {\n        const viewlet = this.getActivePaneComposite();\n        if (!viewlet) {\n            return;\n        }\n        const width = viewlet.getOptimalWidth();\n        if (typeof width !== 'number') {\n            return;\n        }\n        return Math.max(width, 300);\n    }\n    get onDidPaneCompositeRegister() { return this.viewletRegistry.onDidRegister; }\n    get onDidPaneCompositeOpen() { return ( Event.map(this.onDidCompositeOpen.event, compositeEvent => compositeEvent.composite)); }\n    get onDidPaneCompositeClose() { return this.onDidCompositeClose.event; }\n    constructor(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, viewDescriptorService, contextKeyService, extensionService) {\n        super(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, ( Registry.as(Extensions.Viewlets)), SidebarPart.activeViewletSettingsKey, viewDescriptorService.getDefaultViewContainer(0 ).id, 'sideBar', 'viewlet', SIDE_BAR_TITLE_FOREGROUND, \"workbench.parts.sidebar\" , { hasTitle: true, borderWidth: () => (this.getColor(SIDE_BAR_BORDER) || this.getColor(contrastBorder)) ? 1 : 0 });\n        this.viewDescriptorService = viewDescriptorService;\n        this.contextKeyService = contextKeyService;\n        this.extensionService = extensionService;\n        this.minimumWidth = 170;\n        this.maximumWidth = Number.POSITIVE_INFINITY;\n        this.minimumHeight = 0;\n        this.maximumHeight = Number.POSITIVE_INFINITY;\n        this.priority = 1 ;\n        this.snap = true;\n        this._onDidViewletDeregister = this._register(( new Emitter()));\n        this.onDidPaneCompositeDeregister = this._onDidViewletDeregister.event;\n        this.viewletRegistry = ( Registry.as(Extensions.Viewlets));\n        this.sideBarFocusContextKey = SidebarFocusContext.bindTo(this.contextKeyService);\n        this.activeViewletContextKey = ActiveViewletContext.bindTo(this.contextKeyService);\n        this.blockOpeningViewlet = false;\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.onDidPaneCompositeOpen(viewlet => {\n            this.activeViewletContextKey.set(viewlet.getId());\n        }));\n        this._register(this.onDidPaneCompositeClose(viewlet => {\n            if (this.activeViewletContextKey.get() === viewlet.getId()) {\n                this.activeViewletContextKey.reset();\n            }\n        }));\n        this._register(this.registry.onDidDeregister(async (viewletDescriptor) => {\n            const activeContainers = this.viewDescriptorService.getViewContainersByLocation(0 )\n                .filter(container => this.viewDescriptorService.getViewContainerModel(container).activeViewDescriptors.length > 0);\n            if (activeContainers.length) {\n                if (this.getActiveComposite()?.getId() === viewletDescriptor.id) {\n                    const defaultViewletId = this.viewDescriptorService.getDefaultViewContainer(0 )?.id;\n                    const containerToOpen = activeContainers.filter(c => c.id === defaultViewletId)[0] || activeContainers[0];\n                    await this.openPaneComposite(containerToOpen.id);\n                }\n            }\n            else {\n                this.layoutService.setPartHidden(true, \"workbench.parts.sidebar\" );\n            }\n            this.removeComposite(viewletDescriptor.id);\n            this._onDidViewletDeregister.fire(viewletDescriptor);\n        }));\n    }\n    create(parent) {\n        this.element = parent;\n        super.create(parent);\n        const focusTracker = this._register(trackFocus(parent));\n        this._register(focusTracker.onDidFocus(() => this.sideBarFocusContextKey.set(true)));\n        this._register(focusTracker.onDidBlur(() => this.sideBarFocusContextKey.set(false)));\n    }\n    createTitleArea(parent) {\n        const titleArea = super.createTitleArea(parent);\n        this._register(addDisposableListener(titleArea, EventType.CONTEXT_MENU, e => {\n            this.onTitleAreaContextMenu(( new StandardMouseEvent(e)));\n        }));\n        this._register(Gesture.addTarget(titleArea));\n        this._register(addDisposableListener(titleArea, EventType$1.Contextmenu, e => {\n            this.onTitleAreaContextMenu(( new StandardMouseEvent(e)));\n        }));\n        this.titleLabelElement.draggable = true;\n        const draggedItemProvider = () => {\n            const activeViewlet = this.getActivePaneComposite();\n            return { type: 'composite', id: activeViewlet.getId() };\n        };\n        this._register(CompositeDragAndDropObserver.INSTANCE.registerDraggable(this.titleLabelElement, draggedItemProvider, {}));\n        return titleArea;\n    }\n    updateStyles() {\n        super.updateStyles();\n        const container = assertIsDefined(this.getContainer());\n        container.style.backgroundColor = this.getColor(SIDE_BAR_BACKGROUND) || '';\n        container.style.color = this.getColor(SIDE_BAR_FOREGROUND) || '';\n        const borderColor = this.getColor(SIDE_BAR_BORDER) || this.getColor(contrastBorder);\n        const isPositionLeft = this.layoutService.getSideBarPosition() === 0 ;\n        container.style.borderRightWidth = borderColor && isPositionLeft ? '1px' : '';\n        container.style.borderRightStyle = borderColor && isPositionLeft ? 'solid' : '';\n        container.style.borderRightColor = isPositionLeft ? borderColor || '' : '';\n        container.style.borderLeftWidth = borderColor && !isPositionLeft ? '1px' : '';\n        container.style.borderLeftStyle = borderColor && !isPositionLeft ? 'solid' : '';\n        container.style.borderLeftColor = !isPositionLeft ? borderColor || '' : '';\n        container.style.outlineColor = this.getColor(SIDE_BAR_DRAG_AND_DROP_BACKGROUND) ?? '';\n    }\n    layout(width, height, top, left) {\n        if (!this.layoutService.isVisible(\"workbench.parts.sidebar\" )) {\n            return;\n        }\n        super.layout(width, height, top, left);\n    }\n    getActivePaneComposite() {\n        return this.getActiveComposite();\n    }\n    getLastActivePaneCompositeId() {\n        return this.getLastActiveCompositeId();\n    }\n    hideActivePaneComposite() {\n        this.hideActiveComposite();\n    }\n    async openPaneComposite(id, focus) {\n        if (typeof id === 'string' && this.getPaneComposite(id)) {\n            return this.doOpenViewlet(id, focus);\n        }\n        await this.extensionService.whenInstalledExtensionsRegistered();\n        if (typeof id === 'string' && this.getPaneComposite(id)) {\n            return this.doOpenViewlet(id, focus);\n        }\n        return undefined;\n    }\n    getPaneComposites() {\n        return this.viewletRegistry.getPaneComposites().sort((v1, v2) => {\n            if (typeof v1.order !== 'number') {\n                return -1;\n            }\n            if (typeof v2.order !== 'number') {\n                return 1;\n            }\n            return v1.order - v2.order;\n        });\n    }\n    getPaneComposite(id) {\n        return this.getPaneComposites().filter(viewlet => viewlet.id === id)[0];\n    }\n    doOpenViewlet(id, focus) {\n        if (this.blockOpeningViewlet) {\n            return undefined;\n        }\n        if (!this.layoutService.isVisible(\"workbench.parts.sidebar\" )) {\n            try {\n                this.blockOpeningViewlet = true;\n                this.layoutService.setPartHidden(false, \"workbench.parts.sidebar\" );\n            }\n            finally {\n                this.blockOpeningViewlet = false;\n            }\n        }\n        return this.openComposite(id, focus);\n    }\n    getTitleAreaDropDownAnchorAlignment() {\n        return this.layoutService.getSideBarPosition() === 0  ? 0  : 1 ;\n    }\n    onTitleAreaContextMenu(event) {\n        const activeViewlet = this.getActivePaneComposite();\n        if (activeViewlet) {\n            const contextMenuActions = activeViewlet ? activeViewlet.getContextMenuActions() : [];\n            if (contextMenuActions.length) {\n                this.contextMenuService.showContextMenu({\n                    getAnchor: () => event,\n                    getActions: () => contextMenuActions.slice(),\n                    getActionViewItem: action => this.actionViewItemProvider(action),\n                    actionRunner: activeViewlet.getActionRunner(),\n                    skipTelemetry: true\n                });\n            }\n        }\n    }\n    toJSON() {\n        return {\n            type: \"workbench.parts.sidebar\"\n        };\n    }\n};\nSidebarPart = ( __decorate([\n    ( __param(0, INotificationService)),\n    ( __param(1, IStorageService)),\n    ( __param(2, IContextMenuService)),\n    ( __param(3, IWorkbenchLayoutService)),\n    ( __param(4, IKeybindingService)),\n    ( __param(5, IInstantiationService)),\n    ( __param(6, IThemeService)),\n    ( __param(7, IViewDescriptorService)),\n    ( __param(8, IContextKeyService)),\n    ( __param(9, IExtensionService))\n], SidebarPart));\nexport { SidebarPart };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { defaultViewIcon, Extensions } from '../../../common/views.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { Emitter, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { coalesce, move } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { isUndefinedOrNull, isUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { joinPath, isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { ILoggerService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { registerAction2, Action2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nimport { IOutputService } from '../../output/common/output.js';\nimport { CounterSet } from 'monaco-editor/esm/vs/base/common/map.js';\nconst VIEWS_LOG_ID = 'viewsLog';\nconst VIEWS_LOG_NAME = ( (localize('views log', \"Views\")));\nfunction getViewsLogFile(environmentService) { return joinPath(environmentService.windowLogsPath, 'views.log'); }\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: '_workbench.output.showViewsLog',\n            title: { value: 'Show Views Log', original: 'Show Views Log' },\n            category: Categories.Developer,\n            f1: true\n        });\n    }\n    async run(servicesAccessor) {\n        const loggerService = servicesAccessor.get(ILoggerService);\n        const outputService = servicesAccessor.get(IOutputService);\n        const environmentService = servicesAccessor.get(IWorkbenchEnvironmentService);\n        loggerService.setVisibility(getViewsLogFile(environmentService), true);\n        outputService.showChannel(VIEWS_LOG_ID);\n    }\n});\nfunction getViewsStateStorageId(viewContainerStorageId) { return `${viewContainerStorageId}.hidden`; }\nlet ViewDescriptorsState = class ViewDescriptorsState extends Disposable {\n    constructor(viewContainerStorageId, viewContainerName, storageService, loggerService, workbenchEnvironmentService) {\n        super();\n        this.viewContainerName = viewContainerName;\n        this.storageService = storageService;\n        this._onDidChangeStoredState = this._register(( (new Emitter())));\n        this.onDidChangeStoredState = this._onDidChangeStoredState.event;\n        this.logger = loggerService.createLogger(getViewsLogFile(workbenchEnvironmentService), { id: VIEWS_LOG_ID, name: VIEWS_LOG_NAME, hidden: true });\n        this.globalViewsStateStorageId = getViewsStateStorageId(viewContainerStorageId);\n        this.workspaceViewsStateStorageId = viewContainerStorageId;\n        this._register(this.storageService.onDidChangeValue(e => this.onDidStorageChange(e)));\n        this.state = this.initialize();\n    }\n    set(id, state) {\n        this.state.set(id, state);\n    }\n    get(id) {\n        return this.state.get(id);\n    }\n    updateState(viewDescriptors) {\n        this.updateWorkspaceState(viewDescriptors);\n        this.updateGlobalState(viewDescriptors);\n    }\n    updateWorkspaceState(viewDescriptors) {\n        const storedViewsStates = this.getStoredWorkspaceState();\n        for (const viewDescriptor of viewDescriptors) {\n            const viewState = this.get(viewDescriptor.id);\n            if (viewState) {\n                storedViewsStates[viewDescriptor.id] = {\n                    collapsed: !!viewState.collapsed,\n                    isHidden: !viewState.visibleWorkspace,\n                    size: viewState.size,\n                    order: viewDescriptor.workspace && viewState ? viewState.order : undefined\n                };\n            }\n        }\n        if (( (Object.keys(storedViewsStates))).length > 0) {\n            this.storageService.store(this.workspaceViewsStateStorageId, JSON.stringify(storedViewsStates), 1 , 1 );\n        }\n        else {\n            this.storageService.remove(this.workspaceViewsStateStorageId, 1 );\n        }\n    }\n    updateGlobalState(viewDescriptors) {\n        const storedGlobalState = this.getStoredGlobalState();\n        for (const viewDescriptor of viewDescriptors) {\n            const state = this.get(viewDescriptor.id);\n            storedGlobalState.set(viewDescriptor.id, {\n                id: viewDescriptor.id,\n                isHidden: state && viewDescriptor.canToggleVisibility ? !state.visibleGlobal : false,\n                order: !viewDescriptor.workspace && state ? state.order : undefined\n            });\n        }\n        this.setStoredGlobalState(storedGlobalState);\n    }\n    onDidStorageChange(e) {\n        if (e.key === this.globalViewsStateStorageId && e.scope === 0\n            && this.globalViewsStatesValue !== this.getStoredGlobalViewsStatesValue() ) {\n            this._globalViewsStatesValue = undefined;\n            const storedViewsVisibilityStates = this.getStoredGlobalState();\n            const storedWorkspaceViewsStates = this.getStoredWorkspaceState();\n            const changedStates = [];\n            for (const [id, storedState] of storedViewsVisibilityStates) {\n                const state = this.get(id);\n                if (state) {\n                    if (state.visibleGlobal !== !storedState.isHidden) {\n                        if (!storedState.isHidden) {\n                            this.logger.info(`View visibility state changed: ${id} is now visible`, this.viewContainerName);\n                        }\n                        changedStates.push({ id, visible: !storedState.isHidden });\n                    }\n                }\n                else {\n                    const workspaceViewState = storedWorkspaceViewsStates[id];\n                    this.set(id, {\n                        active: false,\n                        visibleGlobal: !storedState.isHidden,\n                        visibleWorkspace: isUndefined(workspaceViewState?.isHidden) ? undefined : !workspaceViewState?.isHidden,\n                        collapsed: workspaceViewState?.collapsed,\n                        order: workspaceViewState?.order,\n                        size: workspaceViewState?.size,\n                    });\n                }\n            }\n            if (changedStates.length) {\n                this._onDidChangeStoredState.fire(changedStates);\n                for (const changedState of changedStates) {\n                    const state = this.get(changedState.id);\n                    if (state) {\n                        state.visibleGlobal = changedState.visible;\n                    }\n                }\n            }\n        }\n    }\n    initialize() {\n        const viewStates = ( (new Map()));\n        const workspaceViewsStates = this.getStoredWorkspaceState();\n        for (const id of ( (Object.keys(workspaceViewsStates)))) {\n            const workspaceViewState = workspaceViewsStates[id];\n            viewStates.set(id, {\n                active: false,\n                visibleGlobal: undefined,\n                visibleWorkspace: isUndefined(workspaceViewState.isHidden) ? undefined : !workspaceViewState.isHidden,\n                collapsed: workspaceViewState.collapsed,\n                order: workspaceViewState.order,\n                size: workspaceViewState.size,\n            });\n        }\n        const value = this.storageService.get(this.globalViewsStateStorageId, 1 , '[]');\n        const { state: workspaceVisibilityStates } = this.parseStoredGlobalState(value);\n        if (workspaceVisibilityStates.size > 0) {\n            for (const { id, isHidden } of ( (workspaceVisibilityStates.values()))) {\n                const viewState = viewStates.get(id);\n                if (viewState) {\n                    if (isUndefined(viewState.visibleWorkspace)) {\n                        viewState.visibleWorkspace = !isHidden;\n                    }\n                }\n                else {\n                    viewStates.set(id, {\n                        active: false,\n                        collapsed: undefined,\n                        visibleGlobal: undefined,\n                        visibleWorkspace: !isHidden,\n                    });\n                }\n            }\n            this.storageService.remove(this.globalViewsStateStorageId, 1 );\n        }\n        const { state, hasDuplicates } = this.parseStoredGlobalState(this.globalViewsStatesValue);\n        if (hasDuplicates) {\n            this.setStoredGlobalState(state);\n        }\n        for (const { id, isHidden, order } of ( (state.values()))) {\n            const viewState = viewStates.get(id);\n            if (viewState) {\n                viewState.visibleGlobal = !isHidden;\n                if (!isUndefined(order)) {\n                    viewState.order = order;\n                }\n            }\n            else {\n                viewStates.set(id, {\n                    active: false,\n                    visibleGlobal: !isHidden,\n                    order,\n                    collapsed: undefined,\n                    visibleWorkspace: undefined,\n                });\n            }\n        }\n        return viewStates;\n    }\n    getStoredWorkspaceState() {\n        return JSON.parse(this.storageService.get(this.workspaceViewsStateStorageId, 1 , '{}'));\n    }\n    getStoredGlobalState() {\n        return this.parseStoredGlobalState(this.globalViewsStatesValue).state;\n    }\n    setStoredGlobalState(storedGlobalState) {\n        this.globalViewsStatesValue = JSON.stringify([...( (storedGlobalState.values()))]);\n    }\n    parseStoredGlobalState(value) {\n        const storedValue = JSON.parse(value);\n        let hasDuplicates = false;\n        const state = storedValue.reduce((result, storedState) => {\n            if (typeof storedState === 'string' ) {\n                hasDuplicates = hasDuplicates || ( (result.has(storedState)));\n                result.set(storedState, { id: storedState, isHidden: true });\n            }\n            else {\n                hasDuplicates = hasDuplicates || ( (result.has(storedState.id)));\n                result.set(storedState.id, storedState);\n            }\n            return result;\n        }, ( (new Map())));\n        return { state, hasDuplicates };\n    }\n    get globalViewsStatesValue() {\n        if (!this._globalViewsStatesValue) {\n            this._globalViewsStatesValue = this.getStoredGlobalViewsStatesValue();\n        }\n        return this._globalViewsStatesValue;\n    }\n    set globalViewsStatesValue(globalViewsStatesValue) {\n        if (this.globalViewsStatesValue !== globalViewsStatesValue) {\n            this._globalViewsStatesValue = globalViewsStatesValue;\n            this.setStoredGlobalViewsStatesValue(globalViewsStatesValue);\n        }\n    }\n    getStoredGlobalViewsStatesValue() {\n        return this.storageService.get(this.globalViewsStateStorageId, 0 , '[]');\n    }\n    setStoredGlobalViewsStatesValue(value) {\n        this.storageService.store(this.globalViewsStateStorageId, value, 0 , 0 );\n    }\n};\nViewDescriptorsState = ( (__decorate([\n    ( (__param(2, IStorageService))),\n    ( (__param(3, ILoggerService))),\n    ( (__param(4, IWorkbenchEnvironmentService)))\n], ViewDescriptorsState)));\nlet ViewContainerModel = class ViewContainerModel extends Disposable {\n    get title() { return this._title; }\n    get icon() { return this._icon; }\n    get keybindingId() { return this._keybindingId; }\n    get allViewDescriptors() { return (\n         (this.viewDescriptorItems.map(item => item.viewDescriptor))\n    ); }\n    get activeViewDescriptors() { return (\n         (this.viewDescriptorItems.filter(item => item.state.active).map(item => item.viewDescriptor))\n    ); }\n    get visibleViewDescriptors() { return (\n         (this.viewDescriptorItems.filter(item => this.isViewDescriptorVisible(item)).map(item => item.viewDescriptor))\n    ); }\n    constructor(viewContainer, instantiationService, contextKeyService, loggerService, workbenchEnvironmentService) {\n        super();\n        this.viewContainer = viewContainer;\n        this.contextKeyService = contextKeyService;\n        this.contextKeys = ( (new CounterSet()));\n        this.viewDescriptorItems = [];\n        this._onDidChangeContainerInfo = this._register(( (new Emitter())));\n        this.onDidChangeContainerInfo = this._onDidChangeContainerInfo.event;\n        this._onDidChangeAllViewDescriptors = this._register(( (new Emitter())));\n        this.onDidChangeAllViewDescriptors = this._onDidChangeAllViewDescriptors.event;\n        this._onDidChangeActiveViewDescriptors = this._register(( (new Emitter())));\n        this.onDidChangeActiveViewDescriptors = this._onDidChangeActiveViewDescriptors.event;\n        this._onDidAddVisibleViewDescriptors = this._register(( (new Emitter())));\n        this.onDidAddVisibleViewDescriptors = this._onDidAddVisibleViewDescriptors.event;\n        this._onDidRemoveVisibleViewDescriptors = this._register(( (new Emitter())));\n        this.onDidRemoveVisibleViewDescriptors = this._onDidRemoveVisibleViewDescriptors.event;\n        this._onDidMoveVisibleViewDescriptors = this._register(( (new Emitter())));\n        this.onDidMoveVisibleViewDescriptors = this._onDidMoveVisibleViewDescriptors.event;\n        this.logger = loggerService.createLogger(getViewsLogFile(workbenchEnvironmentService), { id: VIEWS_LOG_ID, name: VIEWS_LOG_NAME, hidden: true });\n        this._register(Event.filter(contextKeyService.onDidChangeContext, e => e.affectsSome(this.contextKeys))(() => this.onDidChangeContext()));\n        this.viewDescriptorsState = this._register(instantiationService.createInstance(ViewDescriptorsState, viewContainer.storageId || `${viewContainer.id}.state`, typeof viewContainer.title === 'string' ? viewContainer.title : viewContainer.title.original));\n        this._register(this.viewDescriptorsState.onDidChangeStoredState(items => this.updateVisibility(items)));\n        this.updateContainerInfo();\n    }\n    updateContainerInfo() {\n        const useDefaultContainerInfo = this.viewContainer.alwaysUseContainerInfo || this.visibleViewDescriptors.length === 0 || ( (this.visibleViewDescriptors.some(\n            v => ( (Registry.as(Extensions.ViewsRegistry))).getViewContainer(v.id) === this.viewContainer\n        )));\n        const title = useDefaultContainerInfo ? (typeof this.viewContainer.title === 'string' ? this.viewContainer.title : this.viewContainer.title.value) : this.visibleViewDescriptors[0]?.containerTitle || this.visibleViewDescriptors[0]?.name || '';\n        let titleChanged = false;\n        if (this._title !== title) {\n            this._title = title;\n            titleChanged = true;\n        }\n        const icon = useDefaultContainerInfo ? this.viewContainer.icon : this.visibleViewDescriptors[0]?.containerIcon || defaultViewIcon;\n        let iconChanged = false;\n        if (!this.isEqualIcon(icon)) {\n            this._icon = icon;\n            iconChanged = true;\n        }\n        const keybindingId = this.viewContainer.openCommandActionDescriptor?.id ?? this.activeViewDescriptors.find(v => v.openCommandActionDescriptor)?.openCommandActionDescriptor?.id;\n        let keybindingIdChanged = false;\n        if (this._keybindingId !== keybindingId) {\n            this._keybindingId = keybindingId;\n            keybindingIdChanged = true;\n        }\n        if (titleChanged || iconChanged || keybindingIdChanged) {\n            this._onDidChangeContainerInfo.fire({ title: titleChanged, icon: iconChanged, keybindingId: keybindingIdChanged });\n        }\n    }\n    isEqualIcon(icon) {\n        if (URI.isUri(icon)) {\n            return URI.isUri(this._icon) && isEqual(icon, this._icon);\n        }\n        else if (ThemeIcon.isThemeIcon(icon)) {\n            return ThemeIcon.isThemeIcon(this._icon) && ThemeIcon.isEqual(icon, this._icon);\n        }\n        return icon === this._icon;\n    }\n    isVisible(id) {\n        const viewDescriptorItem = this.viewDescriptorItems.find(v => v.viewDescriptor.id === id);\n        if (!viewDescriptorItem) {\n            throw new Error(`Unknown view ${id}`);\n        }\n        return this.isViewDescriptorVisible(viewDescriptorItem);\n    }\n    setVisible(id, visible) {\n        this.updateVisibility([{ id, visible }]);\n    }\n    updateVisibility(viewDescriptors) {\n        const viewDescriptorItemsToHide = coalesce(( (viewDescriptors.filter(({ visible }) => !visible)\n            .map(({ id }) => this.findAndIgnoreIfNotFound(id)))));\n        const removed = [];\n        for (const { viewDescriptorItem, visibleIndex } of viewDescriptorItemsToHide) {\n            if (this.updateViewDescriptorItemVisibility(viewDescriptorItem, false)) {\n                removed.push({ viewDescriptor: viewDescriptorItem.viewDescriptor, index: visibleIndex });\n            }\n        }\n        if (removed.length) {\n            this.broadCastRemovedVisibleViewDescriptors(removed);\n        }\n        const added = [];\n        for (const { id, visible } of viewDescriptors) {\n            if (!visible) {\n                continue;\n            }\n            const foundViewDescriptor = this.findAndIgnoreIfNotFound(id);\n            if (!foundViewDescriptor) {\n                continue;\n            }\n            const { viewDescriptorItem, visibleIndex } = foundViewDescriptor;\n            if (this.updateViewDescriptorItemVisibility(viewDescriptorItem, true)) {\n                added.push({ index: visibleIndex, viewDescriptor: viewDescriptorItem.viewDescriptor, size: viewDescriptorItem.state.size, collapsed: !!viewDescriptorItem.state.collapsed });\n            }\n        }\n        if (added.length) {\n            this.broadCastAddedVisibleViewDescriptors(added);\n        }\n    }\n    updateViewDescriptorItemVisibility(viewDescriptorItem, visible) {\n        if (!viewDescriptorItem.viewDescriptor.canToggleVisibility) {\n            return false;\n        }\n        if (this.isViewDescriptorVisibleWhenActive(viewDescriptorItem) === visible) {\n            return false;\n        }\n        if (viewDescriptorItem.viewDescriptor.workspace) {\n            viewDescriptorItem.state.visibleWorkspace = visible;\n        }\n        else {\n            viewDescriptorItem.state.visibleGlobal = visible;\n            if (visible) {\n                this.logger.info(`Showing view ${viewDescriptorItem.viewDescriptor.id} in the container ${this.viewContainer.id}`);\n            }\n        }\n        return this.isViewDescriptorVisible(viewDescriptorItem) === visible;\n    }\n    isCollapsed(id) {\n        return !!this.find(id).viewDescriptorItem.state.collapsed;\n    }\n    setCollapsed(id, collapsed) {\n        const { viewDescriptorItem } = this.find(id);\n        if (viewDescriptorItem.state.collapsed !== collapsed) {\n            viewDescriptorItem.state.collapsed = collapsed;\n        }\n        this.viewDescriptorsState.updateState(this.allViewDescriptors);\n    }\n    getSize(id) {\n        return this.find(id).viewDescriptorItem.state.size;\n    }\n    setSizes(newSizes) {\n        for (const { id, size } of newSizes) {\n            const { viewDescriptorItem } = this.find(id);\n            if (viewDescriptorItem.state.size !== size) {\n                viewDescriptorItem.state.size = size;\n            }\n        }\n        this.viewDescriptorsState.updateState(this.allViewDescriptors);\n    }\n    move(from, to) {\n        const fromIndex = this.viewDescriptorItems.findIndex(v => v.viewDescriptor.id === from);\n        const toIndex = this.viewDescriptorItems.findIndex(v => v.viewDescriptor.id === to);\n        const fromViewDescriptor = this.viewDescriptorItems[fromIndex];\n        const toViewDescriptor = this.viewDescriptorItems[toIndex];\n        move(this.viewDescriptorItems, fromIndex, toIndex);\n        for (let index = 0; index < this.viewDescriptorItems.length; index++) {\n            this.viewDescriptorItems[index].state.order = index;\n        }\n        this.broadCastMovedViewDescriptors({ index: fromIndex, viewDescriptor: fromViewDescriptor.viewDescriptor }, { index: toIndex, viewDescriptor: toViewDescriptor.viewDescriptor });\n    }\n    add(addedViewDescriptorStates) {\n        const addedItems = [];\n        for (const addedViewDescriptorState of addedViewDescriptorStates) {\n            const viewDescriptor = addedViewDescriptorState.viewDescriptor;\n            if (viewDescriptor.when) {\n                for (const key of ( (viewDescriptor.when.keys()))) {\n                    this.contextKeys.add(key);\n                }\n            }\n            let state = this.viewDescriptorsState.get(viewDescriptor.id);\n            if (state) {\n                if (viewDescriptor.workspace) {\n                    state.visibleWorkspace = isUndefinedOrNull(addedViewDescriptorState.visible) ? (isUndefinedOrNull(state.visibleWorkspace) ? !viewDescriptor.hideByDefault : state.visibleWorkspace) : addedViewDescriptorState.visible;\n                }\n                else {\n                    const isVisible = state.visibleGlobal;\n                    state.visibleGlobal = isUndefinedOrNull(addedViewDescriptorState.visible) ? (isUndefinedOrNull(state.visibleGlobal) ? !viewDescriptor.hideByDefault : state.visibleGlobal) : addedViewDescriptorState.visible;\n                    if (state.visibleGlobal && !isVisible) {\n                        this.logger.info(`Added view ${viewDescriptor.id} in the container ${this.viewContainer.id} and showing it.`, `${isVisible}`, `${viewDescriptor.hideByDefault}`, `${addedViewDescriptorState.visible}`);\n                    }\n                }\n                state.collapsed = isUndefinedOrNull(addedViewDescriptorState.collapsed) ? (isUndefinedOrNull(state.collapsed) ? !!viewDescriptor.collapsed : state.collapsed) : addedViewDescriptorState.collapsed;\n            }\n            else {\n                state = {\n                    active: false,\n                    visibleGlobal: isUndefinedOrNull(addedViewDescriptorState.visible) ? !viewDescriptor.hideByDefault : addedViewDescriptorState.visible,\n                    visibleWorkspace: isUndefinedOrNull(addedViewDescriptorState.visible) ? !viewDescriptor.hideByDefault : addedViewDescriptorState.visible,\n                    collapsed: isUndefinedOrNull(addedViewDescriptorState.collapsed) ? !!viewDescriptor.collapsed : addedViewDescriptorState.collapsed,\n                };\n            }\n            this.viewDescriptorsState.set(viewDescriptor.id, state);\n            state.active = this.contextKeyService.contextMatchesRules(viewDescriptor.when);\n            addedItems.push({ viewDescriptor, state });\n        }\n        this.viewDescriptorItems.push(...addedItems);\n        this.viewDescriptorItems.sort(this.compareViewDescriptors.bind(this));\n        this._onDidChangeAllViewDescriptors.fire({ added: ( (addedItems.map(({ viewDescriptor }) => viewDescriptor))), removed: [] });\n        const addedActiveItems = [];\n        for (const viewDescriptorItem of addedItems) {\n            if (viewDescriptorItem.state.active) {\n                addedActiveItems.push({ viewDescriptorItem, visible: this.isViewDescriptorVisible(viewDescriptorItem) });\n            }\n        }\n        if (addedActiveItems.length) {\n            this._onDidChangeActiveViewDescriptors.fire(({ added: ( (addedActiveItems.map(({ viewDescriptorItem }) => viewDescriptorItem.viewDescriptor))), removed: [] }));\n        }\n        const addedVisibleDescriptors = [];\n        for (const { viewDescriptorItem, visible } of addedActiveItems) {\n            if (visible && this.isViewDescriptorVisible(viewDescriptorItem)) {\n                const { visibleIndex } = this.find(viewDescriptorItem.viewDescriptor.id);\n                addedVisibleDescriptors.push({ index: visibleIndex, viewDescriptor: viewDescriptorItem.viewDescriptor, size: viewDescriptorItem.state.size, collapsed: !!viewDescriptorItem.state.collapsed });\n            }\n        }\n        this.broadCastAddedVisibleViewDescriptors(addedVisibleDescriptors);\n    }\n    remove(viewDescriptors) {\n        const removed = [];\n        const removedItems = [];\n        const removedActiveDescriptors = [];\n        const removedVisibleDescriptors = [];\n        for (const viewDescriptor of viewDescriptors) {\n            if (viewDescriptor.when) {\n                for (const key of ( (viewDescriptor.when.keys()))) {\n                    this.contextKeys.delete(key);\n                }\n            }\n            const index = this.viewDescriptorItems.findIndex(i => i.viewDescriptor.id === viewDescriptor.id);\n            if (index !== -1) {\n                removed.push(viewDescriptor);\n                const viewDescriptorItem = this.viewDescriptorItems[index];\n                if (viewDescriptorItem.state.active) {\n                    removedActiveDescriptors.push(viewDescriptorItem.viewDescriptor);\n                }\n                if (this.isViewDescriptorVisible(viewDescriptorItem)) {\n                    const { visibleIndex } = this.find(viewDescriptorItem.viewDescriptor.id);\n                    removedVisibleDescriptors.push({ index: visibleIndex, viewDescriptor: viewDescriptorItem.viewDescriptor });\n                }\n                removedItems.push(viewDescriptorItem);\n            }\n        }\n        removedItems.forEach(item => this.viewDescriptorItems.splice(this.viewDescriptorItems.indexOf(item), 1));\n        this.broadCastRemovedVisibleViewDescriptors(removedVisibleDescriptors);\n        if (removedActiveDescriptors.length) {\n            this._onDidChangeActiveViewDescriptors.fire(({ added: [], removed: removedActiveDescriptors }));\n        }\n        if (removed.length) {\n            this._onDidChangeAllViewDescriptors.fire({ added: [], removed });\n        }\n    }\n    onDidChangeContext() {\n        const addedActiveItems = [];\n        const removedActiveItems = [];\n        for (const item of this.viewDescriptorItems) {\n            const wasActive = item.state.active;\n            const isActive = this.contextKeyService.contextMatchesRules(item.viewDescriptor.when);\n            if (wasActive !== isActive) {\n                if (isActive) {\n                    addedActiveItems.push({ item, visibleWhenActive: this.isViewDescriptorVisibleWhenActive(item) });\n                }\n                else {\n                    removedActiveItems.push(item);\n                }\n            }\n        }\n        const removedVisibleDescriptors = [];\n        for (const item of removedActiveItems) {\n            if (this.isViewDescriptorVisible(item)) {\n                const { visibleIndex } = this.find(item.viewDescriptor.id);\n                removedVisibleDescriptors.push({ index: visibleIndex, viewDescriptor: item.viewDescriptor });\n            }\n        }\n        removedActiveItems.forEach(item => item.state.active = false);\n        addedActiveItems.forEach(({ item }) => item.state.active = true);\n        this.broadCastRemovedVisibleViewDescriptors(removedVisibleDescriptors);\n        if (addedActiveItems.length || removedActiveItems.length) {\n            this._onDidChangeActiveViewDescriptors.fire(({ added: ( (addedActiveItems.map(({ item }) => item.viewDescriptor))), removed: ( (removedActiveItems.map(item => item.viewDescriptor))) }));\n        }\n        const addedVisibleDescriptors = [];\n        for (const { item, visibleWhenActive } of addedActiveItems) {\n            if (visibleWhenActive && this.isViewDescriptorVisible(item)) {\n                const { visibleIndex } = this.find(item.viewDescriptor.id);\n                addedVisibleDescriptors.push({ index: visibleIndex, viewDescriptor: item.viewDescriptor, size: item.state.size, collapsed: !!item.state.collapsed });\n            }\n        }\n        this.broadCastAddedVisibleViewDescriptors(addedVisibleDescriptors);\n    }\n    broadCastAddedVisibleViewDescriptors(added) {\n        if (added.length) {\n            this._onDidAddVisibleViewDescriptors.fire(added.sort((a, b) => a.index - b.index));\n            this.updateState(`Added views:${( ( added.map(v => v.viewDescriptor.id))).join(',')} in ${this.viewContainer.id}`);\n        }\n    }\n    broadCastRemovedVisibleViewDescriptors(removed) {\n        if (removed.length) {\n            this._onDidRemoveVisibleViewDescriptors.fire(removed.sort((a, b) => b.index - a.index));\n            this.updateState(`Removed views:${( ( removed.map(v => v.viewDescriptor.id))).join(',')} from ${this.viewContainer.id}`);\n        }\n    }\n    broadCastMovedViewDescriptors(from, to) {\n        this._onDidMoveVisibleViewDescriptors.fire({ from, to });\n        this.updateState(`Moved view ${from.viewDescriptor.id} to ${to.viewDescriptor.id} in ${this.viewContainer.id}`);\n    }\n    updateState(reason) {\n        this.logger.info(reason);\n        this.viewDescriptorsState.updateState(this.allViewDescriptors);\n        this.updateContainerInfo();\n    }\n    isViewDescriptorVisible(viewDescriptorItem) {\n        if (!viewDescriptorItem.state.active) {\n            return false;\n        }\n        return this.isViewDescriptorVisibleWhenActive(viewDescriptorItem);\n    }\n    isViewDescriptorVisibleWhenActive(viewDescriptorItem) {\n        if (viewDescriptorItem.viewDescriptor.workspace) {\n            return !!viewDescriptorItem.state.visibleWorkspace;\n        }\n        return !!viewDescriptorItem.state.visibleGlobal;\n    }\n    find(id) {\n        const result = this.findAndIgnoreIfNotFound(id);\n        if (result) {\n            return result;\n        }\n        throw new Error(`view descriptor ${id} not found`);\n    }\n    findAndIgnoreIfNotFound(id) {\n        for (let i = 0, visibleIndex = 0; i < this.viewDescriptorItems.length; i++) {\n            const viewDescriptorItem = this.viewDescriptorItems[i];\n            if (viewDescriptorItem.viewDescriptor.id === id) {\n                return { index: i, visibleIndex, viewDescriptorItem: viewDescriptorItem };\n            }\n            if (this.isViewDescriptorVisible(viewDescriptorItem)) {\n                visibleIndex++;\n            }\n        }\n        return undefined;\n    }\n    compareViewDescriptors(a, b) {\n        if (a.viewDescriptor.id === b.viewDescriptor.id) {\n            return 0;\n        }\n        return (this.getViewOrder(a) - this.getViewOrder(b)) || this.getGroupOrderResult(a.viewDescriptor, b.viewDescriptor);\n    }\n    getViewOrder(viewDescriptorItem) {\n        const viewOrder = typeof viewDescriptorItem.state.order === 'number' ? viewDescriptorItem.state.order : viewDescriptorItem.viewDescriptor.order;\n        return typeof viewOrder === 'number' ? viewOrder : Number.MAX_VALUE;\n    }\n    getGroupOrderResult(a, b) {\n        if (!a.group || !b.group) {\n            return 0;\n        }\n        if (a.group === b.group) {\n            return 0;\n        }\n        return a.group < b.group ? -1 : 1;\n    }\n};\nViewContainerModel = ( (__decorate([\n    ( (__param(1, IInstantiationService))),\n    ( (__param(2, IContextKeyService))),\n    ( (__param(3, ILoggerService))),\n    ( (__param(4, IWorkbenchEnvironmentService)))\n], ViewContainerModel)));\nexport { ViewContainerModel, getViewsStateStorageId };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Extensions, ViewVisibilityState, defaultViewIcon, ViewContainerLocationToString } from '../../../common/views.js';\nimport { ContextKeyExpr, RawContextKey, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { Disposable, DisposableMap, toDisposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ViewPaneContainer, ViewPaneContainerAction, ViewsSubMenu } from '../../../browser/parts/views/viewPaneContainer.js';\nimport { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { Emitter, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { generateUuid } from 'monaco-editor/esm/vs/base/common/uuid.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { getViewsStateStorageId, ViewContainerModel } from '../common/viewContainerModel.js';\nimport { registerAction2, MenuId, Action2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nfunction getViewContainerStorageId(viewContainerId) { return `${viewContainerId}.state`; }\nlet ViewDescriptorService = class ViewDescriptorService extends Disposable {\n    static { this.VIEWS_CUSTOMIZATIONS = 'views.customizations'; }\n    static { this.COMMON_CONTAINER_ID_PREFIX = 'workbench.views.service'; }\n    get viewContainers() { return this.viewContainersRegistry.all; }\n    constructor(instantiationService, contextKeyService, storageService, extensionService, telemetryService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.storageService = storageService;\n        this.extensionService = extensionService;\n        this.telemetryService = telemetryService;\n        this._onDidChangeContainer = this._register(( new Emitter()));\n        this.onDidChangeContainer = this._onDidChangeContainer.event;\n        this._onDidChangeLocation = this._register(( new Emitter()));\n        this.onDidChangeLocation = this._onDidChangeLocation.event;\n        this._onDidChangeContainerLocation = this._register(( new Emitter()));\n        this.onDidChangeContainerLocation = this._onDidChangeContainerLocation.event;\n        this.viewContainerModels = this._register(( new DisposableMap()));\n        this.viewsVisibilityActionDisposables = this._register(( new DisposableMap()));\n        this._onDidChangeViewContainers = this._register(( new Emitter()));\n        this.onDidChangeViewContainers = this._onDidChangeViewContainers.event;\n        this.activeViewContextKeys = ( new Map());\n        this.movableViewContextKeys = ( new Map());\n        this.defaultViewLocationContextKeys = ( new Map());\n        this.defaultViewContainerLocationContextKeys = ( new Map());\n        this.viewContainersRegistry = ( Registry.as(Extensions.ViewContainersRegistry));\n        this.viewsRegistry = ( Registry.as(Extensions.ViewsRegistry));\n        this.migrateToViewsCustomizationsStorage();\n        this.viewContainersCustomLocations = ( new Map(Object.entries(this.viewCustomizations.viewContainerLocations)));\n        this.viewDescriptorsCustomLocations = ( new Map(Object.entries(this.viewCustomizations.viewLocations)));\n        this.viewContainerBadgeEnablementStates = ( new Map(Object.entries(this.viewCustomizations.viewContainerBadgeEnablementStates)));\n        this.viewContainers.forEach(viewContainer => this.onDidRegisterViewContainer(viewContainer));\n        this._register(this.viewsRegistry.onViewsRegistered(views => this.onDidRegisterViews(views)));\n        this._register(this.viewsRegistry.onViewsDeregistered(({ views, viewContainer }) => this.onDidDeregisterViews(views, viewContainer)));\n        this._register(this.viewsRegistry.onDidChangeContainer(({ views, from, to }) => this.onDidChangeDefaultContainer(views, from, to)));\n        this._register(this.viewContainersRegistry.onDidRegister(({ viewContainer }) => {\n            this.onDidRegisterViewContainer(viewContainer);\n            this._onDidChangeViewContainers.fire({ added: [{ container: viewContainer, location: this.getViewContainerLocation(viewContainer) }], removed: [] });\n        }));\n        this._register(this.viewContainersRegistry.onDidDeregister(({ viewContainer }) => {\n            this.onDidDeregisterViewContainer(viewContainer);\n            this._onDidChangeViewContainers.fire({ removed: [{ container: viewContainer, location: this.getViewContainerLocation(viewContainer) }], added: [] });\n        }));\n        this._register(this.storageService.onDidChangeValue((e) => { this.onDidStorageChange(e); }));\n        this.extensionService.whenInstalledExtensionsRegistered().then(() => this.whenExtensionsRegistered());\n    }\n    migrateToViewsCustomizationsStorage() {\n        if (this.storageService.get(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, 0 )) {\n            return;\n        }\n        const viewContainerLocationsValue = this.storageService.get('views.cachedViewContainerLocations', 0 );\n        const viewDescriptorLocationsValue = this.storageService.get('views.cachedViewPositions', 0 );\n        if (!viewContainerLocationsValue && !viewDescriptorLocationsValue) {\n            return;\n        }\n        const viewContainerLocations = viewContainerLocationsValue ? JSON.parse(viewContainerLocationsValue) : [];\n        const viewDescriptorLocations = viewDescriptorLocationsValue ? JSON.parse(viewDescriptorLocationsValue) : [];\n        const viewsCustomizations = {\n            viewContainerLocations: viewContainerLocations.reduce((result, [id, location]) => { result[id] = location; return result; }, {}),\n            viewLocations: viewDescriptorLocations.reduce((result, [id, { containerId }]) => { result[id] = containerId; return result; }, {}),\n            viewContainerBadgeEnablementStates: {}\n        };\n        this.storageService.store(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, JSON.stringify(viewsCustomizations), 0 , 0 );\n        this.storageService.remove('views.cachedViewContainerLocations', 0 );\n        this.storageService.remove('views.cachedViewPositions', 0 );\n    }\n    registerGroupedViews(groupedViews) {\n        for (const [containerId, views] of groupedViews.entries()) {\n            const viewContainer = this.viewContainersRegistry.get(containerId);\n            if (!viewContainer || !( this.viewContainerModels.has(viewContainer))) {\n                if (this.isGeneratedContainerId(containerId)) {\n                    const viewContainerLocation = this.viewContainersCustomLocations.get(containerId);\n                    if (viewContainerLocation !== undefined) {\n                        this.registerGeneratedViewContainer(viewContainerLocation, containerId);\n                    }\n                }\n                continue;\n            }\n            const viewsToAdd = views.filter(view => this.getViewContainerModel(viewContainer).allViewDescriptors.filter(vd => vd.id === view.id).length === 0);\n            this.addViews(viewContainer, viewsToAdd);\n        }\n    }\n    deregisterGroupedViews(groupedViews) {\n        for (const [viewContainerId, views] of groupedViews.entries()) {\n            const viewContainer = this.viewContainersRegistry.get(viewContainerId);\n            if (!viewContainer || !( this.viewContainerModels.has(viewContainer))) {\n                continue;\n            }\n            this.removeViews(viewContainer, views);\n        }\n    }\n    moveOrphanViewsToDefaultLocation() {\n        for (const [viewId, containerId] of this.viewDescriptorsCustomLocations.entries()) {\n            if (this.viewContainersRegistry.get(containerId)) {\n                continue;\n            }\n            const viewContainer = this.viewsRegistry.getViewContainer(viewId);\n            const viewDescriptor = this.getViewDescriptorById(viewId);\n            if (viewContainer && viewDescriptor) {\n                this.addViews(viewContainer, [viewDescriptor]);\n            }\n        }\n    }\n    whenExtensionsRegistered() {\n        this.moveOrphanViewsToDefaultLocation();\n        for (const viewContainerId of [...( this.viewContainersCustomLocations.keys())]) {\n            this.cleanUpGeneratedViewContainer(viewContainerId);\n        }\n        this.saveViewCustomizations();\n        this.registerViewsVisibilityActions();\n    }\n    onDidRegisterViews(views) {\n        this.contextKeyService.bufferChangeEvents(() => {\n            views.forEach(({ views, viewContainer }) => {\n                const regroupedViews = this.regroupViews(viewContainer.id, views);\n                this.registerGroupedViews(regroupedViews);\n                views.forEach(viewDescriptor => this.getOrCreateMovableViewContextKey(viewDescriptor).set(!!viewDescriptor.canMoveView));\n            });\n        });\n    }\n    isGeneratedContainerId(id) {\n        return id.startsWith(ViewDescriptorService.COMMON_CONTAINER_ID_PREFIX);\n    }\n    onDidDeregisterViews(views, viewContainer) {\n        const regroupedViews = this.regroupViews(viewContainer.id, views);\n        this.deregisterGroupedViews(regroupedViews);\n        this.contextKeyService.bufferChangeEvents(() => {\n            views.forEach(viewDescriptor => this.getOrCreateMovableViewContextKey(viewDescriptor).set(false));\n        });\n    }\n    regroupViews(containerId, views) {\n        const viewsByContainer = ( new Map());\n        for (const viewDescriptor of views) {\n            const correctContainerId = this.viewDescriptorsCustomLocations.get(viewDescriptor.id) ?? containerId;\n            let containerViews = viewsByContainer.get(correctContainerId);\n            if (!containerViews) {\n                viewsByContainer.set(correctContainerId, containerViews = []);\n            }\n            containerViews.push(viewDescriptor);\n        }\n        return viewsByContainer;\n    }\n    getViewDescriptorById(viewId) {\n        return this.viewsRegistry.getView(viewId);\n    }\n    getViewLocationById(viewId) {\n        const container = this.getViewContainerByViewId(viewId);\n        if (container === null) {\n            return null;\n        }\n        return this.getViewContainerLocation(container);\n    }\n    getViewContainerByViewId(viewId) {\n        const containerId = this.viewDescriptorsCustomLocations.get(viewId);\n        return containerId ?\n            this.viewContainersRegistry.get(containerId) ?? null :\n            this.getDefaultContainerById(viewId);\n    }\n    getViewContainerLocation(viewContainer) {\n        return this.viewContainersCustomLocations.get(viewContainer.id) ?? this.getDefaultViewContainerLocation(viewContainer);\n    }\n    getDefaultViewContainerLocation(viewContainer) {\n        return this.viewContainersRegistry.getViewContainerLocation(viewContainer);\n    }\n    getDefaultContainerById(viewId) {\n        return this.viewsRegistry.getViewContainer(viewId) ?? null;\n    }\n    getViewContainerModel(container) {\n        return this.getOrRegisterViewContainerModel(container);\n    }\n    getViewContainerById(id) {\n        return this.viewContainersRegistry.get(id) || null;\n    }\n    getViewContainersByLocation(location) {\n        return this.viewContainers.filter(v => this.getViewContainerLocation(v) === location);\n    }\n    getDefaultViewContainer(location) {\n        return this.viewContainersRegistry.getDefaultViewContainer(location);\n    }\n    moveViewContainerToLocation(viewContainer, location, requestedIndex) {\n        this.moveViewContainerToLocationWithoutSaving(viewContainer, location, requestedIndex);\n        this.saveViewCustomizations();\n    }\n    getViewContainerBadgeEnablementState(id) {\n        return this.viewContainerBadgeEnablementStates.get(id) ?? true;\n    }\n    setViewContainerBadgeEnablementState(id, badgesEnabled) {\n        this.viewContainerBadgeEnablementStates.set(id, badgesEnabled);\n        this.saveViewCustomizations();\n    }\n    moveViewToLocation(view, location) {\n        const container = this.registerGeneratedViewContainer(location);\n        this.moveViewsToContainer([view], container);\n    }\n    moveViewsToContainer(views, viewContainer, visibilityState) {\n        if (!views.length) {\n            return;\n        }\n        const from = this.getViewContainerByViewId(views[0].id);\n        const to = viewContainer;\n        if (from && to && from !== to) {\n            this.moveViewsWithoutSaving(views, from, to, visibilityState);\n            this.cleanUpGeneratedViewContainer(from.id);\n            this.saveViewCustomizations();\n            this.reportMovedViews(views, from, to);\n        }\n    }\n    reset() {\n        for (const viewContainer of this.viewContainers) {\n            const viewContainerModel = this.getViewContainerModel(viewContainer);\n            for (const viewDescriptor of viewContainerModel.allViewDescriptors) {\n                const defaultContainer = this.getDefaultContainerById(viewDescriptor.id);\n                const currentContainer = this.getViewContainerByViewId(viewDescriptor.id);\n                if (currentContainer && defaultContainer && currentContainer !== defaultContainer) {\n                    this.moveViewsWithoutSaving([viewDescriptor], currentContainer, defaultContainer);\n                }\n            }\n            const defaultContainerLocation = this.getDefaultViewContainerLocation(viewContainer);\n            const currentContainerLocation = this.getViewContainerLocation(viewContainer);\n            if (defaultContainerLocation !== null && currentContainerLocation !== defaultContainerLocation) {\n                this.moveViewContainerToLocationWithoutSaving(viewContainer, defaultContainerLocation);\n            }\n            this.cleanUpGeneratedViewContainer(viewContainer.id);\n        }\n        this.viewContainersCustomLocations.clear();\n        this.viewDescriptorsCustomLocations.clear();\n        this.saveViewCustomizations();\n    }\n    isViewContainerRemovedPermanently(viewContainerId) {\n        return this.isGeneratedContainerId(viewContainerId) && !( this.viewContainersCustomLocations.has(viewContainerId));\n    }\n    onDidChangeDefaultContainer(views, from, to) {\n        const viewsToMove = views.filter(view => !( this.viewDescriptorsCustomLocations.has(view.id))\n            || (!this.viewContainers.includes(from) && this.viewDescriptorsCustomLocations.get(view.id) === from.id)\n        );\n        if (viewsToMove.length) {\n            this.moveViewsWithoutSaving(viewsToMove, from, to);\n        }\n    }\n    reportMovedViews(views, from, to) {\n        const containerToString = (container) => {\n            if (container.id.startsWith(ViewDescriptorService.COMMON_CONTAINER_ID_PREFIX)) {\n                return 'custom';\n            }\n            if (!container.extensionId) {\n                return container.id;\n            }\n            return 'extension';\n        };\n        const oldLocation = this.getViewContainerLocation(from);\n        const newLocation = this.getViewContainerLocation(to);\n        const viewCount = views.length;\n        const fromContainer = containerToString(from);\n        const toContainer = containerToString(to);\n        const fromLocation = oldLocation === 1  ? 'panel' : 'sidebar';\n        const toLocation = newLocation === 1  ? 'panel' : 'sidebar';\n        this.telemetryService.publicLog2('viewDescriptorService.moveViews', { viewCount, fromContainer, toContainer, fromLocation, toLocation });\n    }\n    moveViewsWithoutSaving(views, from, to, visibilityState = ViewVisibilityState.Expand) {\n        this.removeViews(from, views);\n        this.addViews(to, views, visibilityState);\n        const oldLocation = this.getViewContainerLocation(from);\n        const newLocation = this.getViewContainerLocation(to);\n        if (oldLocation !== newLocation) {\n            this._onDidChangeLocation.fire({ views, from: oldLocation, to: newLocation });\n        }\n        this._onDidChangeContainer.fire({ views, from, to });\n    }\n    moveViewContainerToLocationWithoutSaving(viewContainer, location, requestedIndex) {\n        const from = this.getViewContainerLocation(viewContainer);\n        const to = location;\n        if (from !== to) {\n            const isGeneratedViewContainer = this.isGeneratedContainerId(viewContainer.id);\n            const isDefaultViewContainerLocation = to === this.getDefaultViewContainerLocation(viewContainer);\n            if (isGeneratedViewContainer || !isDefaultViewContainerLocation) {\n                this.viewContainersCustomLocations.set(viewContainer.id, to);\n            }\n            else {\n                this.viewContainersCustomLocations.delete(viewContainer.id);\n            }\n            this.getOrCreateDefaultViewContainerLocationContextKey(viewContainer).set(isGeneratedViewContainer || isDefaultViewContainerLocation);\n            viewContainer.requestedIndex = requestedIndex;\n            this._onDidChangeContainerLocation.fire({ viewContainer, from, to });\n            const views = this.getViewsByContainer(viewContainer);\n            this._onDidChangeLocation.fire({ views, from, to });\n        }\n    }\n    cleanUpGeneratedViewContainer(viewContainerId) {\n        if (!this.isGeneratedContainerId(viewContainerId)) {\n            return;\n        }\n        const viewContainer = this.getViewContainerById(viewContainerId);\n        if (viewContainer && this.getViewContainerModel(viewContainer)?.allViewDescriptors.length) {\n            return;\n        }\n        if ([...( this.viewDescriptorsCustomLocations.values())].includes(viewContainerId)) {\n            return;\n        }\n        if (viewContainer) {\n            this.viewContainersRegistry.deregisterViewContainer(viewContainer);\n        }\n        this.viewContainersCustomLocations.delete(viewContainerId);\n        this.viewContainerBadgeEnablementStates.delete(viewContainerId);\n        this.storageService.remove(getViewsStateStorageId(viewContainer?.storageId || getViewContainerStorageId(viewContainerId)), 0 );\n    }\n    registerGeneratedViewContainer(location, existingId) {\n        const id = existingId || this.generateContainerId(location);\n        const container = this.viewContainersRegistry.registerViewContainer({\n            id,\n            ctorDescriptor: ( new SyncDescriptor(ViewPaneContainer, [id, { mergeViewWithContainerWhenSingleView: true }])),\n            title: id,\n            icon: location === 0  ? defaultViewIcon : undefined,\n            storageId: getViewContainerStorageId(id),\n            hideIfEmpty: true\n        }, location, { doNotRegisterOpenCommand: true });\n        if (this.viewContainersCustomLocations.get(container.id) !== location) {\n            this.viewContainersCustomLocations.set(container.id, location);\n        }\n        this.getOrCreateDefaultViewContainerLocationContextKey(container).set(true);\n        return container;\n    }\n    onDidStorageChange(e) {\n        if (e.key === ViewDescriptorService.VIEWS_CUSTOMIZATIONS && e.scope === 0\n            && JSON.stringify(this.viewCustomizations) !== this.getStoredViewCustomizationsValue() ) {\n            this.onDidViewCustomizationsStorageChange();\n        }\n    }\n    onDidViewCustomizationsStorageChange() {\n        this._viewCustomizations = undefined;\n        const newViewContainerCustomizations = ( new Map(Object.entries(this.viewCustomizations.viewContainerLocations)));\n        const newViewDescriptorCustomizations = ( new Map(Object.entries(this.viewCustomizations.viewLocations)));\n        const viewContainersToMove = [];\n        const viewsToMove = [];\n        for (const [containerId, location] of newViewContainerCustomizations.entries()) {\n            const container = this.getViewContainerById(containerId);\n            if (container) {\n                if (location !== this.getViewContainerLocation(container)) {\n                    viewContainersToMove.push([container, location]);\n                }\n            }\n            else if (this.isGeneratedContainerId(containerId)) {\n                this.registerGeneratedViewContainer(location, containerId);\n            }\n        }\n        for (const viewContainer of this.viewContainers) {\n            if (!( newViewContainerCustomizations.has(viewContainer.id))) {\n                const currentLocation = this.getViewContainerLocation(viewContainer);\n                const defaultLocation = this.getDefaultViewContainerLocation(viewContainer);\n                if (currentLocation !== defaultLocation) {\n                    viewContainersToMove.push([viewContainer, defaultLocation]);\n                }\n            }\n        }\n        for (const [viewId, viewContainerId] of newViewDescriptorCustomizations.entries()) {\n            const viewDescriptor = this.getViewDescriptorById(viewId);\n            if (viewDescriptor) {\n                const prevViewContainer = this.getViewContainerByViewId(viewId);\n                const newViewContainer = this.viewContainersRegistry.get(viewContainerId);\n                if (prevViewContainer && newViewContainer && newViewContainer !== prevViewContainer) {\n                    viewsToMove.push({ views: [viewDescriptor], from: prevViewContainer, to: newViewContainer });\n                }\n            }\n        }\n        for (const viewContainer of this.viewContainers) {\n            const viewContainerModel = this.getViewContainerModel(viewContainer);\n            for (const viewDescriptor of viewContainerModel.allViewDescriptors) {\n                if (!( newViewDescriptorCustomizations.has(viewDescriptor.id))) {\n                    const currentContainer = this.getViewContainerByViewId(viewDescriptor.id);\n                    const defaultContainer = this.getDefaultContainerById(viewDescriptor.id);\n                    if (currentContainer && defaultContainer && currentContainer !== defaultContainer) {\n                        viewsToMove.push({ views: [viewDescriptor], from: currentContainer, to: defaultContainer });\n                    }\n                }\n            }\n        }\n        for (const [container, location] of viewContainersToMove) {\n            this.moveViewContainerToLocationWithoutSaving(container, location);\n        }\n        for (const { views, from, to } of viewsToMove) {\n            this.moveViewsWithoutSaving(views, from, to, ViewVisibilityState.Default);\n        }\n        this.viewContainersCustomLocations = newViewContainerCustomizations;\n        this.viewDescriptorsCustomLocations = newViewDescriptorCustomizations;\n    }\n    generateContainerId(location) {\n        return `${ViewDescriptorService.COMMON_CONTAINER_ID_PREFIX}.${ViewContainerLocationToString(location)}.${generateUuid()}`;\n    }\n    saveViewCustomizations() {\n        const viewCustomizations = { viewContainerLocations: {}, viewLocations: {}, viewContainerBadgeEnablementStates: {} };\n        for (const [containerId, location] of this.viewContainersCustomLocations) {\n            const container = this.getViewContainerById(containerId);\n            if (container && !this.isGeneratedContainerId(containerId) && location === this.getDefaultViewContainerLocation(container)) {\n                continue;\n            }\n            viewCustomizations.viewContainerLocations[containerId] = location;\n        }\n        for (const [viewId, viewContainerId] of this.viewDescriptorsCustomLocations) {\n            const viewContainer = this.getViewContainerById(viewContainerId);\n            if (viewContainer) {\n                const defaultContainer = this.getDefaultContainerById(viewId);\n                if (defaultContainer?.id === viewContainer.id) {\n                    continue;\n                }\n            }\n            viewCustomizations.viewLocations[viewId] = viewContainerId;\n        }\n        for (const [viewContainerId, badgeEnablementState] of this.viewContainerBadgeEnablementStates) {\n            if (badgeEnablementState === false) {\n                viewCustomizations.viewContainerBadgeEnablementStates[viewContainerId] = badgeEnablementState;\n            }\n        }\n        this.viewCustomizations = viewCustomizations;\n    }\n    get viewCustomizations() {\n        if (!this._viewCustomizations) {\n            this._viewCustomizations = JSON.parse(this.getStoredViewCustomizationsValue());\n            this._viewCustomizations.viewContainerLocations = this._viewCustomizations.viewContainerLocations ?? {};\n            this._viewCustomizations.viewLocations = this._viewCustomizations.viewLocations ?? {};\n            this._viewCustomizations.viewContainerBadgeEnablementStates = this._viewCustomizations.viewContainerBadgeEnablementStates ?? {};\n        }\n        return this._viewCustomizations;\n    }\n    set viewCustomizations(viewCustomizations) {\n        const value = JSON.stringify(viewCustomizations);\n        if (JSON.stringify(this.viewCustomizations) !== value) {\n            this._viewCustomizations = viewCustomizations;\n            this.setStoredViewCustomizationsValue(value);\n        }\n    }\n    getStoredViewCustomizationsValue() {\n        return this.storageService.get(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, 0 , '{}');\n    }\n    setStoredViewCustomizationsValue(value) {\n        this.storageService.store(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, value, 0 , 0 );\n    }\n    getViewsByContainer(viewContainer) {\n        const result = this.viewsRegistry.getViews(viewContainer).filter(viewDescriptor => {\n            const viewDescriptorViewContainerId = this.viewDescriptorsCustomLocations.get(viewDescriptor.id) ?? viewContainer.id;\n            return viewDescriptorViewContainerId === viewContainer.id;\n        });\n        for (const [viewId, viewContainerId] of this.viewDescriptorsCustomLocations.entries()) {\n            if (viewContainerId !== viewContainer.id) {\n                continue;\n            }\n            if (this.viewsRegistry.getViewContainer(viewId) === viewContainer) {\n                continue;\n            }\n            const viewDescriptor = this.getViewDescriptorById(viewId);\n            if (viewDescriptor) {\n                result.push(viewDescriptor);\n            }\n        }\n        return result;\n    }\n    onDidRegisterViewContainer(viewContainer) {\n        const defaultLocation = this.isGeneratedContainerId(viewContainer.id) ? true : this.getViewContainerLocation(viewContainer) === this.getDefaultViewContainerLocation(viewContainer);\n        this.getOrCreateDefaultViewContainerLocationContextKey(viewContainer).set(defaultLocation);\n        this.getOrRegisterViewContainerModel(viewContainer);\n    }\n    getOrRegisterViewContainerModel(viewContainer) {\n        let viewContainerModel = this.viewContainerModels.get(viewContainer)?.viewContainerModel;\n        if (!viewContainerModel) {\n            const disposables = ( new DisposableStore());\n            viewContainerModel = disposables.add(this.instantiationService.createInstance(ViewContainerModel, viewContainer));\n            this.onDidChangeActiveViews({ added: viewContainerModel.activeViewDescriptors, removed: [] });\n            viewContainerModel.onDidChangeActiveViewDescriptors(changed => this.onDidChangeActiveViews(changed), this, disposables);\n            this.onDidChangeVisibleViews({ added: [...viewContainerModel.visibleViewDescriptors], removed: [] });\n            viewContainerModel.onDidAddVisibleViewDescriptors(added => this.onDidChangeVisibleViews({ added: ( added.map(({ viewDescriptor }) => viewDescriptor)), removed: [] }), this, disposables);\n            viewContainerModel.onDidRemoveVisibleViewDescriptors(removed => this.onDidChangeVisibleViews({ added: [], removed: ( removed.map(({ viewDescriptor }) => viewDescriptor)) }), this, disposables);\n            disposables.add(toDisposable(() => this.viewsVisibilityActionDisposables.deleteAndDispose(viewContainer)));\n            disposables.add(this.registerResetViewContainerAction(viewContainer));\n            this.viewContainerModels.set(viewContainer, { viewContainerModel: viewContainerModel, disposables, dispose: () => disposables.dispose() });\n            this.onDidRegisterViews([{ views: this.viewsRegistry.getViews(viewContainer), viewContainer }]);\n            const viewsToRegister = this.getViewsByContainer(viewContainer).filter(view => this.getDefaultContainerById(view.id) !== viewContainer);\n            if (viewsToRegister.length) {\n                this.addViews(viewContainer, viewsToRegister);\n                this.contextKeyService.bufferChangeEvents(() => {\n                    viewsToRegister.forEach(viewDescriptor => this.getOrCreateMovableViewContextKey(viewDescriptor).set(!!viewDescriptor.canMoveView));\n                });\n            }\n        }\n        return viewContainerModel;\n    }\n    onDidDeregisterViewContainer(viewContainer) {\n        this.viewContainerModels.deleteAndDispose(viewContainer);\n    }\n    onDidChangeActiveViews({ added, removed }) {\n        this.contextKeyService.bufferChangeEvents(() => {\n            added.forEach(viewDescriptor => this.getOrCreateActiveViewContextKey(viewDescriptor).set(true));\n            removed.forEach(viewDescriptor => this.getOrCreateActiveViewContextKey(viewDescriptor).set(false));\n        });\n    }\n    onDidChangeVisibleViews({ added, removed }) {\n        this.contextKeyService.bufferChangeEvents(() => {\n            added.forEach(viewDescriptor => this.getOrCreateVisibleViewContextKey(viewDescriptor).set(true));\n            removed.forEach(viewDescriptor => this.getOrCreateVisibleViewContextKey(viewDescriptor).set(false));\n        });\n    }\n    registerViewsVisibilityActions() {\n        for (const [viewContainer, { viewContainerModel, disposables }] of this.viewContainerModels) {\n            this.viewsVisibilityActionDisposables.set(viewContainer, this.registerViewsVisibilityActionsForContainer(viewContainerModel));\n            disposables.add(Event.any(viewContainerModel.onDidChangeActiveViewDescriptors, viewContainerModel.onDidAddVisibleViewDescriptors, viewContainerModel.onDidRemoveVisibleViewDescriptors, viewContainerModel.onDidMoveVisibleViewDescriptors)(e => this.viewsVisibilityActionDisposables.set(viewContainer, this.registerViewsVisibilityActionsForContainer(viewContainerModel))));\n        }\n    }\n    registerViewsVisibilityActionsForContainer(viewContainerModel) {\n        const disposables = ( new DisposableStore());\n        viewContainerModel.activeViewDescriptors.forEach((viewDescriptor, index) => {\n            if (!viewDescriptor.remoteAuthority) {\n                disposables.add(registerAction2(class extends ViewPaneContainerAction {\n                    constructor() {\n                        super({\n                            id: `${viewDescriptor.id}.toggleVisibility`,\n                            viewPaneContainerId: viewContainerModel.viewContainer.id,\n                            precondition: viewDescriptor.canToggleVisibility && (!viewContainerModel.isVisible(viewDescriptor.id) || viewContainerModel.visibleViewDescriptors.length > 1) ? ContextKeyExpr.true() : ContextKeyExpr.false(),\n                            toggled: ( ContextKeyExpr.has(`${viewDescriptor.id}.visible`)),\n                            title: viewDescriptor.name,\n                            menu: [{\n                                    id: ViewsSubMenu,\n                                    group: '1_toggleViews',\n                                    when: ( ContextKeyExpr.and(( ContextKeyExpr.equals('viewContainer', viewContainerModel.viewContainer.id)), ( ContextKeyExpr.equals(\n                                        'viewContainerLocation',\n                                        ViewContainerLocationToString(0 )\n                                    )))),\n                                    order: index,\n                                }, {\n                                    id: MenuId.ViewContainerTitleContext,\n                                    when: ( ContextKeyExpr.and(( ContextKeyExpr.equals('viewContainer', viewContainerModel.viewContainer.id)))),\n                                    order: index,\n                                    group: '1_toggleVisibility'\n                                }, {\n                                    id: MenuId.ViewTitleContext,\n                                    when: ( ContextKeyExpr.and(viewContainerModel.visibleViewDescriptors.length > 1 ? ( ContextKeyExpr.or(...( viewContainerModel.visibleViewDescriptors.map(v => ( ContextKeyExpr.equals('view', v.id)))))) : ContextKeyExpr.false())),\n                                    order: index,\n                                    group: '2_toggleVisibility'\n                                }]\n                        });\n                    }\n                    async runInViewPaneContainer(serviceAccessor, viewPaneContainer) {\n                        viewPaneContainer.toggleViewVisibility(viewDescriptor.id);\n                    }\n                }));\n                disposables.add(registerAction2(class extends ViewPaneContainerAction {\n                    constructor() {\n                        super({\n                            id: `${viewDescriptor.id}.removeView`,\n                            viewPaneContainerId: viewContainerModel.viewContainer.id,\n                            title: ( localize('hideView', \"Hide '{0}'\", viewDescriptor.name)),\n                            precondition: viewDescriptor.canToggleVisibility && (!viewContainerModel.isVisible(viewDescriptor.id) || viewContainerModel.visibleViewDescriptors.length > 1) ? ContextKeyExpr.true() : ContextKeyExpr.false(),\n                            menu: [{\n                                    id: MenuId.ViewTitleContext,\n                                    when: ( ContextKeyExpr.and(( ContextKeyExpr.equals('view', viewDescriptor.id)), ( ContextKeyExpr.has(`${viewDescriptor.id}.visible`)))),\n                                    group: '1_hide',\n                                    order: 1\n                                }]\n                        });\n                    }\n                    async runInViewPaneContainer(serviceAccessor, viewPaneContainer) {\n                        viewPaneContainer.toggleViewVisibility(viewDescriptor.id);\n                    }\n                }));\n            }\n        });\n        return disposables;\n    }\n    registerResetViewContainerAction(viewContainer) {\n        const that = this;\n        return registerAction2(class ResetViewLocationAction extends Action2 {\n            constructor() {\n                super({\n                    id: `${viewContainer.id}.resetViewContainerLocation`,\n                    title: {\n                        original: 'Reset Location',\n                        value: ( localize('resetViewLocation', \"Reset Location\"))\n                    },\n                    menu: [{\n                            id: MenuId.ViewContainerTitleContext,\n                            when: ( ContextKeyExpr.or(( ContextKeyExpr.and(( ContextKeyExpr.equals('viewContainer', viewContainer.id)), ( ContextKeyExpr.equals(`${viewContainer.id}.defaultViewContainerLocation`, false))))))\n                        }],\n                });\n            }\n            run() {\n                that.moveViewContainerToLocation(viewContainer, that.getDefaultViewContainerLocation(viewContainer));\n            }\n        });\n    }\n    addViews(container, views, visibilityState = ViewVisibilityState.Default) {\n        this.contextKeyService.bufferChangeEvents(() => {\n            views.forEach(view => {\n                const isDefaultContainer = this.getDefaultContainerById(view.id) === container;\n                this.getOrCreateDefaultViewLocationContextKey(view).set(isDefaultContainer);\n                if (isDefaultContainer) {\n                    this.viewDescriptorsCustomLocations.delete(view.id);\n                }\n                else {\n                    this.viewDescriptorsCustomLocations.set(view.id, container.id);\n                }\n            });\n        });\n        this.getViewContainerModel(container).add(( views.map(view => {\n            return {\n                viewDescriptor: view,\n                collapsed: visibilityState === ViewVisibilityState.Default ? undefined : false,\n                visible: visibilityState === ViewVisibilityState.Default ? undefined : true\n            };\n        })));\n    }\n    removeViews(container, views) {\n        this.contextKeyService.bufferChangeEvents(() => {\n            views.forEach(view => {\n                if (this.viewDescriptorsCustomLocations.get(view.id) === container.id) {\n                    this.viewDescriptorsCustomLocations.delete(view.id);\n                }\n                this.getOrCreateDefaultViewLocationContextKey(view).set(false);\n            });\n        });\n        this.getViewContainerModel(container).remove(views);\n    }\n    getOrCreateActiveViewContextKey(viewDescriptor) {\n        const activeContextKeyId = `${viewDescriptor.id}.active`;\n        let contextKey = this.activeViewContextKeys.get(activeContextKeyId);\n        if (!contextKey) {\n            contextKey = ( new RawContextKey(activeContextKeyId, false)).bindTo(this.contextKeyService);\n            this.activeViewContextKeys.set(activeContextKeyId, contextKey);\n        }\n        return contextKey;\n    }\n    getOrCreateVisibleViewContextKey(viewDescriptor) {\n        const activeContextKeyId = `${viewDescriptor.id}.visible`;\n        let contextKey = this.activeViewContextKeys.get(activeContextKeyId);\n        if (!contextKey) {\n            contextKey = ( new RawContextKey(activeContextKeyId, false)).bindTo(this.contextKeyService);\n            this.activeViewContextKeys.set(activeContextKeyId, contextKey);\n        }\n        return contextKey;\n    }\n    getOrCreateMovableViewContextKey(viewDescriptor) {\n        const movableViewContextKeyId = `${viewDescriptor.id}.canMove`;\n        let contextKey = this.movableViewContextKeys.get(movableViewContextKeyId);\n        if (!contextKey) {\n            contextKey = ( new RawContextKey(movableViewContextKeyId, false)).bindTo(this.contextKeyService);\n            this.movableViewContextKeys.set(movableViewContextKeyId, contextKey);\n        }\n        return contextKey;\n    }\n    getOrCreateDefaultViewLocationContextKey(viewDescriptor) {\n        const defaultViewLocationContextKeyId = `${viewDescriptor.id}.defaultViewLocation`;\n        let contextKey = this.defaultViewLocationContextKeys.get(defaultViewLocationContextKeyId);\n        if (!contextKey) {\n            contextKey = ( new RawContextKey(defaultViewLocationContextKeyId, false)).bindTo(this.contextKeyService);\n            this.defaultViewLocationContextKeys.set(defaultViewLocationContextKeyId, contextKey);\n        }\n        return contextKey;\n    }\n    getOrCreateDefaultViewContainerLocationContextKey(viewContainer) {\n        const defaultViewContainerLocationContextKeyId = `${viewContainer.id}.defaultViewContainerLocation`;\n        let contextKey = this.defaultViewContainerLocationContextKeys.get(defaultViewContainerLocationContextKeyId);\n        if (!contextKey) {\n            contextKey = ( new RawContextKey(defaultViewContainerLocationContextKeyId, false)).bindTo(this.contextKeyService);\n            this.defaultViewContainerLocationContextKeys.set(defaultViewContainerLocationContextKeyId, contextKey);\n        }\n        return contextKey;\n    }\n};\nViewDescriptorService = ( __decorate([\n    ( __param(0, IInstantiationService)),\n    ( __param(1, IContextKeyService)),\n    ( __param(2, IStorageService)),\n    ( __param(3, IExtensionService)),\n    ( __param(4, ITelemetryService))\n], ViewDescriptorService));\nexport { ViewDescriptorService };\n","const GLOBAL_ACTIVITY_ID = 'workbench.action.globalActivity';\nconst ACCOUNTS_ACTIVITY_ID = 'workbench.action.accountsActivity';\nexport { ACCOUNTS_ACTIVITY_ID, GLOBAL_ACTIVITY_ID };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { IActivityService } from '../common/activity.js';\nimport { Disposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { ACCOUNTS_ACTIVITY_ID, GLOBAL_ACTIVITY_ID } from '../../../common/activity.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IPaneCompositePartService } from '../../panecomposite/browser/panecomposite.js';\nlet ViewContainerActivityByView = class ViewContainerActivityByView extends Disposable {\n    constructor(viewId, viewDescriptorService, activityService) {\n        super();\n        this.viewId = viewId;\n        this.viewDescriptorService = viewDescriptorService;\n        this.activityService = activityService;\n        this.activity = undefined;\n        this.activityDisposable = Disposable.None;\n        this._register(Event.filter(this.viewDescriptorService.onDidChangeContainer, e => ( e.views.some(view => view.id === viewId)))(() => this.update()));\n        this._register(Event.filter(this.viewDescriptorService.onDidChangeLocation, e => ( e.views.some(view => view.id === viewId)))(() => this.update()));\n    }\n    setActivity(activity) {\n        this.activity = activity;\n        this.update();\n    }\n    clearActivity() {\n        this.activity = undefined;\n        this.update();\n    }\n    update() {\n        this.activityDisposable.dispose();\n        const container = this.viewDescriptorService.getViewContainerByViewId(this.viewId);\n        if (container && this.activity) {\n            this.activityDisposable = this.activityService.showViewContainerActivity(container.id, this.activity);\n        }\n    }\n    dispose() {\n        this.activityDisposable.dispose();\n    }\n};\nViewContainerActivityByView = ( __decorate([\n    ( __param(1, IViewDescriptorService)),\n    ( __param(2, IActivityService))\n], ViewContainerActivityByView));\nlet ActivityService = class ActivityService {\n    constructor(paneCompositeService, viewDescriptorService, instantiationService) {\n        this.paneCompositeService = paneCompositeService;\n        this.viewDescriptorService = viewDescriptorService;\n        this.instantiationService = instantiationService;\n        this.viewActivities = ( new Map());\n    }\n    showViewContainerActivity(viewContainerId, { badge, clazz, priority }) {\n        const viewContainer = this.viewDescriptorService.getViewContainerById(viewContainerId);\n        if (viewContainer) {\n            const location = this.viewDescriptorService.getViewContainerLocation(viewContainer);\n            if (location !== null) {\n                return this.paneCompositeService.showActivity(viewContainer.id, location, badge, clazz, priority);\n            }\n        }\n        return Disposable.None;\n    }\n    showViewActivity(viewId, activity) {\n        let maybeItem = this.viewActivities.get(viewId);\n        if (maybeItem) {\n            maybeItem.id++;\n        }\n        else {\n            maybeItem = {\n                id: 1,\n                activity: this.instantiationService.createInstance(ViewContainerActivityByView, viewId)\n            };\n            this.viewActivities.set(viewId, maybeItem);\n        }\n        const id = maybeItem.id;\n        maybeItem.activity.setActivity(activity);\n        const item = maybeItem;\n        return toDisposable(() => {\n            if (item.id === id) {\n                item.activity.dispose();\n                this.viewActivities.delete(viewId);\n            }\n        });\n    }\n    showAccountsActivity({ badge, clazz, priority }) {\n        return this.paneCompositeService.showActivity(ACCOUNTS_ACTIVITY_ID, 0 , badge, clazz, priority);\n    }\n    showGlobalActivity({ badge, clazz, priority }) {\n        return this.paneCompositeService.showActivity(GLOBAL_ACTIVITY_ID, 0 , badge, clazz, priority);\n    }\n};\nActivityService = ( __decorate([\n    ( __param(0, IPaneCompositePartService)),\n    ( __param(1, IViewDescriptorService)),\n    ( __param(2, IInstantiationService))\n], ActivityService));\nexport { ActivityService };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.activitybar{height:100%;width:48px}.monaco-workbench .activitybar.bordered:before{border-color:inherit;box-sizing:border-box;content:\\\"\\\";float:left;height:100%;position:absolute;width:0}.monaco-workbench .activitybar.left.bordered:before{border-right-style:solid;border-right-width:1px;right:0}.monaco-workbench .activitybar.right.bordered:before{border-left-style:solid;border-left-width:1px;left:0}.monaco-workbench .activitybar>.content{display:flex;flex-direction:column;height:100%;justify-content:space-between}.monaco-workbench .activitybar>.content .monaco-action-bar{background-color:inherit;text-align:left}.monaco-workbench .activitybar .action-item:focus{outline:0!important}.monaco-workbench .activitybar>.content>.composite-bar{margin-bottom:auto}.monaco-workbench .activitybar .menubar,.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more{height:35px;width:100%}\";\nn(css,{});\nexport { css, css as default };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item{display:block;position:relative}.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content .composite-bar>.monaco-action-bar .action-item:before{background-color:transparent;content:\\\"\\\";display:none;height:2px;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:background-color;width:48px}.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:after,.monaco-workbench .activitybar>.content.dragged-over .composite-bar>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:before{margin-top:-2px;top:1px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:after{bottom:1px;margin-bottom:-2px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:first-of-type:before{margin-top:-2px;top:2px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:last-of-type:after{bottom:2px;margin-bottom:-2px}.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before{transition-delay:0s}.monaco-workbench .activitybar>.content.dragged-over-head>.composite-bar>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .activitybar>.content.dragged-over-tail>.composite-bar>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.bottom+.action-item:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item.top:before,.monaco-workbench .activitybar>.content>.composite-bar>.monaco-action-bar .action-item:last-of-type.bottom:after{background-color:var(--insert-border-color)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label{box-sizing:border-box;display:flex;height:48px;margin-right:0;overflow:hidden;position:relative;width:48px;z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label:not(.codicon){font-size:15px;line-height:40px;padding:0 0 0 48px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-label.codicon{align-items:center;font-size:24px;justify-content:center}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.codicon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.codicon{color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.active .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .action-label.uri-icon,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .action-label.uri-icon{background-color:var(--vscode-activityBar-foreground)!important}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-left:2px solid;content:\\\"\\\";height:100%;position:absolute;top:0;width:0;z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked .active-item-indicator:before{height:100%;top:0}.monaco-workbench.hc-black .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator.action-item,.monaco-workbench.hc-light .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.checked:not(:focus) .active-item-indicator{display:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item.clicked:focus:before{border-left:none!important}.monaco-workbench .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{left:0}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item .active-item-indicator:before{right:0}.monaco-workbench.hc-black .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-black .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.left>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before,.monaco-workbench.hc-light .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus:before{outline:none}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge{z-index:2}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{z-index:1}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{pointer-events:none}.monaco-workbench.border .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .active-item-indicator{left:-2px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .badge-content{border-radius:20px;font-size:9px;font-weight:600;height:16px;line-height:16px;min-width:8px;padding:0 4px;position:absolute;right:8px;text-align:center;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge .profile-badge-content{background-color:var(--vscode-profileBadge-background);border:2px solid var(--vscode-activityBar-background);border-radius:7px;color:var(--vscode-profileBadge-foreground);font-size:9px;font-weight:600;line-height:10px;padding:2px 3px;position:absolute;right:6px;top:24px}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:active .profile-badge-content,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:focus .profile-badge-content,.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .action-item:hover .profile-badge-content{color:var(--vscode-activityBar-foreground)}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content{font-size:12px;font-weight:unset;justify-content:center;padding:0}.monaco-workbench .activitybar>.content :not(.monaco-menu)>.monaco-action-bar .badge .codicon.badge-content:before{text-align:center;vertical-align:baseline}.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .badge,.monaco-workbench .activitybar.right>.content :not(.monaco-menu)>.monaco-action-bar .profile-badge{left:auto;right:0}\";\nn(css,{});\nexport { css, css as default };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/activityaction.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { append, $, clearNode, hide, show, addDisposableListener, EventType, EventHelper } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { StandardKeyboardEvent } from 'monaco-editor/esm/vs/base/browser/keyboardEvent.js';\nimport { EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nimport { Action, Separator, toAction, SubmenuAction } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { MenuId, registerAction2, Action2, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { activeContrastBorder, focusBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { ActivityAction, ToggleCompositePinnedAction, ToggleCompositeBadgeAction, ActivityActionViewItem } from '../compositeBarActions.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nimport { ACTIVITY_BAR_ACTIVE_BORDER, ACTIVITY_BAR_ACTIVE_FOCUS_BORDER, ACTIVITY_BAR_ACTIVE_BACKGROUND } from '../../../common/theme.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { createAndFillInActionBarActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nimport { getCurrentAuthenticationSessionInfo } from '../../../services/authentication/browser/authenticationService.js';\nimport { IAuthenticationService } from '../../../services/authentication/common/authentication.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IProductService } from 'monaco-editor/esm/vs/platform/product/common/productService.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IHoverService } from '../../../services/hover/browser/hover.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { IPaneCompositePartService } from '../../../services/panecomposite/browser/panecomposite.js';\nimport { ICredentialsService } from '../../../../platform/credentials/common/credentials.js';\nimport { IUserDataProfileService } from '../../../services/userDataProfile/common/userDataProfile.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { ISecretStorageService } from '../../../../platform/secrets/common/secrets.js';\nlet ViewContainerActivityAction = class ViewContainerActivityAction extends ActivityAction {\n    static { this.preventDoubleClickDelay = 300; }\n    constructor(activity, paneCompositePart, layoutService, telemetryService, configurationService) {\n        super(activity);\n        this.paneCompositePart = paneCompositePart;\n        this.layoutService = layoutService;\n        this.telemetryService = telemetryService;\n        this.configurationService = configurationService;\n        this.lastRun = 0;\n    }\n    updateActivity(activity) {\n        this.activity = activity;\n    }\n    async run(event) {\n        if (event instanceof MouseEvent && event.button === 2) {\n            return;\n        }\n        const now = Date.now();\n        if (now > this.lastRun  && now - this.lastRun < ViewContainerActivityAction.preventDoubleClickDelay) {\n            return;\n        }\n        this.lastRun = now;\n        const sideBarVisible = this.layoutService.isVisible(\"workbench.parts.sidebar\" );\n        const activeViewlet = this.paneCompositePart.getActivePaneComposite();\n        const focusBehavior = this.configurationService.getValue('workbench.activityBar.iconClickBehavior');\n        const focus = (event && 'preserveFocus' in event) ? !event.preserveFocus : true;\n        if (sideBarVisible && activeViewlet?.getId() === this.activity.id) {\n            switch (focusBehavior) {\n                case 'focus':\n                    this.logAction('refocus');\n                    this.paneCompositePart.openPaneComposite(this.activity.id, focus);\n                    break;\n                case 'toggle':\n                default:\n                    this.logAction('hide');\n                    this.layoutService.setPartHidden(true, \"workbench.parts.sidebar\" );\n                    break;\n            }\n            return;\n        }\n        this.logAction('show');\n        await this.paneCompositePart.openPaneComposite(this.activity.id, focus);\n        return this.activate();\n    }\n    logAction(action) {\n        this.telemetryService.publicLog2('activityBarAction', { viewletId: this.activity.id, action });\n    }\n};\nViewContainerActivityAction = ( __decorate([\n    ( __param(2, IWorkbenchLayoutService)),\n    ( __param(3, ITelemetryService)),\n    ( __param(4, IConfigurationService))\n], ViewContainerActivityAction));\nlet AbstractGlobalActivityActionViewItem = class AbstractGlobalActivityActionViewItem extends ActivityActionViewItem {\n    constructor(action, contextMenuActionsProvider, options, themeService, hoverService, menuService, contextMenuService, contextKeyService, configurationService, environmentService, keybindingService) {\n        super(action, options, () => true, themeService, hoverService, configurationService, keybindingService);\n        this.contextMenuActionsProvider = contextMenuActionsProvider;\n        this.menuService = menuService;\n        this.contextMenuService = contextMenuService;\n        this.contextKeyService = contextKeyService;\n        this.environmentService = environmentService;\n    }\n    render(container) {\n        super.render(container);\n        this._register(addDisposableListener(this.container, EventType.MOUSE_DOWN, async (e) => {\n            EventHelper.stop(e, true);\n            const isLeftClick = e?.button !== 2;\n            if (isLeftClick) {\n                this.run();\n            }\n        }));\n        this._register(addDisposableListener(this.container, EventType.CONTEXT_MENU, async (e) => {\n            const disposables = ( new DisposableStore());\n            const actions = await this.resolveContextMenuActions(disposables);\n            const event = ( new StandardMouseEvent(e));\n            this.contextMenuService.showContextMenu({\n                getAnchor: () => event,\n                getActions: () => actions,\n                onHide: () => disposables.dispose()\n            });\n        }));\n        this._register(addDisposableListener(this.container, EventType.KEY_UP, (e) => {\n            const event = ( new StandardKeyboardEvent(e));\n            if (event.equals(3 ) || event.equals(10 )) {\n                EventHelper.stop(e, true);\n                this.run();\n            }\n        }));\n        this._register(addDisposableListener(this.container, EventType$1.Tap, (e) => {\n            EventHelper.stop(e, true);\n            this.run();\n        }));\n    }\n    async resolveContextMenuActions(disposables) {\n        return this.contextMenuActionsProvider();\n    }\n};\nAbstractGlobalActivityActionViewItem = ( __decorate([\n    ( __param(3, IThemeService)),\n    ( __param(4, IHoverService)),\n    ( __param(5, IMenuService)),\n    ( __param(6, IContextMenuService)),\n    ( __param(7, IContextKeyService)),\n    ( __param(8, IConfigurationService)),\n    ( __param(9, IWorkbenchEnvironmentService)),\n    ( __param(10, IKeybindingService))\n], AbstractGlobalActivityActionViewItem));\nlet MenuActivityActionViewItem = class MenuActivityActionViewItem extends AbstractGlobalActivityActionViewItem {\n    constructor(menuId, action, contextMenuActionsProvider, icon, colors, hoverOptions, themeService, hoverService, menuService, contextMenuService, contextKeyService, configurationService, environmentService, keybindingService) {\n        super(action, contextMenuActionsProvider, { draggable: false, colors, icon, hasPopup: true, hoverOptions }, themeService, hoverService, menuService, contextMenuService, contextKeyService, configurationService, environmentService, keybindingService);\n        this.menuId = menuId;\n    }\n    async run() {\n        const disposables = ( new DisposableStore());\n        const menu = disposables.add(this.menuService.createMenu(this.menuId, this.contextKeyService));\n        const actions = await this.resolveMainMenuActions(menu, disposables);\n        this.contextMenuService.showContextMenu({\n            getAnchor: () => this.container,\n            anchorAlignment: this.configurationService.getValue('workbench.sideBar.location') === 'left' ? 1  : 0 ,\n            anchorAxisAlignment: 1 ,\n            getActions: () => actions,\n            onHide: () => disposables.dispose(),\n            menuActionOptions: { renderShortTitle: true },\n        });\n    }\n    async resolveMainMenuActions(menu, _disposable) {\n        const actions = [];\n        createAndFillInActionBarActions(menu, { renderShortTitle: true }, { primary: [], secondary: actions });\n        return actions;\n    }\n};\nMenuActivityActionViewItem = ( __decorate([\n    ( __param(6, IThemeService)),\n    ( __param(7, IHoverService)),\n    ( __param(8, IMenuService)),\n    ( __param(9, IContextMenuService)),\n    ( __param(10, IContextKeyService)),\n    ( __param(11, IConfigurationService)),\n    ( __param(12, IWorkbenchEnvironmentService)),\n    ( __param(13, IKeybindingService))\n], MenuActivityActionViewItem));\nlet AccountsActivityActionViewItem = class AccountsActivityActionViewItem extends MenuActivityActionViewItem {\n    static { this.ACCOUNTS_VISIBILITY_PREFERENCE_KEY = 'workbench.activity.showAccounts'; }\n    constructor(action, contextMenuActionsProvider, colors, activityHoverOptions, themeService, hoverService, contextMenuService, menuService, contextKeyService, authenticationService, environmentService, productService, configurationService, storageService, keybindingService, secretStorageService, credentialsService, logService) {\n        super(MenuId.AccountsContext, action, contextMenuActionsProvider, true, colors, activityHoverOptions, themeService, hoverService, menuService, contextMenuService, contextKeyService, configurationService, environmentService, keybindingService);\n        this.authenticationService = authenticationService;\n        this.productService = productService;\n        this.storageService = storageService;\n        this.secretStorageService = secretStorageService;\n        this.credentialsService = credentialsService;\n        this.logService = logService;\n        this.groupedAccounts = ( new Map());\n        this.problematicProviders = ( new Set());\n        this.initialized = false;\n        this.sessionFromEmbedder = getCurrentAuthenticationSessionInfo(this.credentialsService, this.secretStorageService, this.productService);\n        this.registerListeners();\n        this.initialize();\n    }\n    registerListeners() {\n        this._register(this.authenticationService.onDidRegisterAuthenticationProvider(async (e) => {\n            await this.addAccountsFromProvider(e.id);\n        }));\n        this._register(this.authenticationService.onDidUnregisterAuthenticationProvider((e) => {\n            this.groupedAccounts.delete(e.id);\n            this.problematicProviders.delete(e.id);\n        }));\n        this._register(this.authenticationService.onDidChangeSessions(async (e) => {\n            for (const changed of [...e.event.changed, ...e.event.added]) {\n                try {\n                    await this.addOrUpdateAccount(e.providerId, changed.account);\n                }\n                catch (e) {\n                    this.logService.error(e);\n                }\n            }\n            for (const removed of e.event.removed) {\n                this.removeAccount(e.providerId, removed.account);\n            }\n        }));\n    }\n    async initialize() {\n        const providerIds = this.authenticationService.getProviderIds();\n        const results = await Promise.allSettled(( providerIds.map(providerId => this.addAccountsFromProvider(providerId))));\n        for (const result of results) {\n            if (result.status === 'rejected') {\n                this.logService.error(result.reason);\n            }\n        }\n        this.initialized = true;\n    }\n    async resolveMainMenuActions(accountsMenu, disposables) {\n        await super.resolveMainMenuActions(accountsMenu, disposables);\n        const providers = this.authenticationService.getProviderIds();\n        const otherCommands = accountsMenu.getActions();\n        let menus = [];\n        for (const providerId of providers) {\n            if (!this.initialized) {\n                const noAccountsAvailableAction = disposables.add(( new Action('noAccountsAvailable', ( localize('loading', \"Loading...\")), undefined, false)));\n                menus.push(noAccountsAvailableAction);\n                break;\n            }\n            const providerLabel = this.authenticationService.getLabel(providerId);\n            const accounts = this.groupedAccounts.get(providerId);\n            if (!accounts) {\n                if (( this.problematicProviders.has(providerId))) {\n                    const providerUnavailableAction = disposables.add(( new Action('providerUnavailable', ( localize('authProviderUnavailable', '{0} is currently unavailable', providerLabel)), undefined, false)));\n                    menus.push(providerUnavailableAction);\n                    try {\n                        await this.addAccountsFromProvider(providerId);\n                    }\n                    catch (e) {\n                        this.logService.error(e);\n                    }\n                }\n                continue;\n            }\n            for (const account of accounts) {\n                const manageExtensionsAction = disposables.add(( new Action(`configureSessions${account.label}`, ( localize('manageTrustedExtensions', \"Manage Trusted Extensions\")), undefined, true, () => {\n                    return this.authenticationService.manageTrustedExtensionsForAccount(providerId, account.label);\n                })));\n                const providerSubMenuActions = [manageExtensionsAction];\n                if (account.canSignOut) {\n                    const signOutAction = disposables.add(( new Action('signOut', ( localize('signOut', \"Sign Out\")), undefined, true, async () => {\n                        const allSessions = await this.authenticationService.getSessions(providerId);\n                        const sessionsForAccount = allSessions.filter(s => s.account.id === account.id);\n                        return await this.authenticationService.removeAccountSessions(providerId, account.label, sessionsForAccount);\n                    })));\n                    providerSubMenuActions.push(signOutAction);\n                }\n                const providerSubMenu = ( new SubmenuAction(\n                    'activitybar.submenu',\n                    `${account.label} (${providerLabel})`,\n                    providerSubMenuActions\n                ));\n                menus.push(providerSubMenu);\n            }\n        }\n        if (providers.length && !menus.length) {\n            const noAccountsAvailableAction = disposables.add(( new Action('noAccountsAvailable', ( localize('noAccounts', \"You are not signed in to any accounts\")), undefined, false)));\n            menus.push(noAccountsAvailableAction);\n        }\n        if (menus.length && otherCommands.length) {\n            menus.push(( new Separator()));\n        }\n        otherCommands.forEach((group, i) => {\n            const actions = group[1];\n            menus = menus.concat(actions);\n            if (i !== otherCommands.length - 1) {\n                menus.push(( new Separator()));\n            }\n        });\n        return menus;\n    }\n    async resolveContextMenuActions(disposables) {\n        const actions = await super.resolveContextMenuActions(disposables);\n        actions.unshift(...[\n            toAction({ id: 'hideAccounts', label: ( localize('hideAccounts', \"Hide Accounts\")), run: () => this.storageService.store(AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY, false, 0 , 0 ) }),\n            ( new Separator())\n        ]);\n        return actions;\n    }\n    async addOrUpdateAccount(providerId, account) {\n        let accounts = this.groupedAccounts.get(providerId);\n        if (accounts) {\n            const existingAccount = accounts.find(a => a.id === account.id);\n            if (existingAccount) {\n                if (existingAccount.label !== account.label) {\n                    existingAccount.label = account.label;\n                }\n                return;\n            }\n        }\n        else {\n            accounts = [];\n            this.groupedAccounts.set(providerId, accounts);\n        }\n        const sessionFromEmbedder = await this.sessionFromEmbedder;\n        let canSignOut = !!sessionFromEmbedder?.canSignOut;\n        if (!canSignOut) {\n            if (sessionFromEmbedder?.id) {\n                const sessions = (await this.authenticationService.getSessions(providerId)).filter(s => s.account.id === account.id);\n                canSignOut = !( sessions.some(s => s.id === sessionFromEmbedder.id));\n            }\n            else {\n                canSignOut = true;\n            }\n        }\n        accounts.push({ ...account, canSignOut });\n    }\n    removeAccount(providerId, account) {\n        const accounts = this.groupedAccounts.get(providerId);\n        if (!accounts) {\n            return;\n        }\n        const index = accounts.findIndex(a => a.id === account.id);\n        if (index === -1) {\n            return;\n        }\n        accounts.splice(index, 1);\n        if (accounts.length === 0) {\n            this.groupedAccounts.delete(providerId);\n        }\n    }\n    async addAccountsFromProvider(providerId) {\n        try {\n            const sessions = await this.authenticationService.getSessions(providerId);\n            this.problematicProviders.delete(providerId);\n            for (const session of sessions) {\n                try {\n                    await this.addOrUpdateAccount(providerId, session.account);\n                }\n                catch (e) {\n                    this.logService.error(e);\n                }\n            }\n        }\n        catch (e) {\n            this.logService.error(e);\n            this.problematicProviders.add(providerId);\n        }\n    }\n};\nAccountsActivityActionViewItem = ( __decorate([\n    ( __param(4, IThemeService)),\n    ( __param(5, IHoverService)),\n    ( __param(6, IContextMenuService)),\n    ( __param(7, IMenuService)),\n    ( __param(8, IContextKeyService)),\n    ( __param(9, IAuthenticationService)),\n    ( __param(10, IWorkbenchEnvironmentService)),\n    ( __param(11, IProductService)),\n    ( __param(12, IConfigurationService)),\n    ( __param(13, IStorageService)),\n    ( __param(14, IKeybindingService)),\n    ( __param(15, ISecretStorageService)),\n    ( __param(16, ICredentialsService)),\n    ( __param(17, ILogService))\n], AccountsActivityActionViewItem));\nlet GlobalActivityActionViewItem = class GlobalActivityActionViewItem extends MenuActivityActionViewItem {\n    constructor(action, contextMenuActionsProvider, colors, activityHoverOptions, userDataProfileService, themeService, hoverService, menuService, contextMenuService, contextKeyService, configurationService, environmentService, keybindingService) {\n        super(MenuId.GlobalActivity, action, contextMenuActionsProvider, true, colors, activityHoverOptions, themeService, hoverService, menuService, contextMenuService, contextKeyService, configurationService, environmentService, keybindingService);\n        this.userDataProfileService = userDataProfileService;\n        this._register(this.userDataProfileService.onDidChangeCurrentProfile(() => this.updateProfileBadge()));\n    }\n    render(container) {\n        super.render(container);\n        this.profileBadge = append(container, $('.profile-badge'));\n        this.profileBadgeContent = append(this.profileBadge, $('.profile-badge-content'));\n        this.updateProfileBadge();\n    }\n    updateProfileBadge() {\n        if (!this.profileBadge || !this.profileBadgeContent) {\n            return;\n        }\n        clearNode(this.profileBadgeContent);\n        hide(this.profileBadge);\n        if (this.userDataProfileService.currentProfile.isDefault) {\n            return;\n        }\n        if (this.action.getBadge()) {\n            return;\n        }\n        this.profileBadgeContent.textContent = this.userDataProfileService.currentProfile.name.substring(0, 2).toUpperCase();\n        show(this.profileBadge);\n    }\n    updateBadge() {\n        super.updateBadge();\n        this.updateProfileBadge();\n    }\n    computeTitle() {\n        return this.userDataProfileService.currentProfile.isDefault ? super.computeTitle() : ( localize(\n            'manage',\n            \"Manage {0} (Profile)\",\n            this.userDataProfileService.currentProfile.name\n        ));\n    }\n};\nGlobalActivityActionViewItem = ( __decorate([\n    ( __param(4, IUserDataProfileService)),\n    ( __param(5, IThemeService)),\n    ( __param(6, IHoverService)),\n    ( __param(7, IMenuService)),\n    ( __param(8, IContextMenuService)),\n    ( __param(9, IContextKeyService)),\n    ( __param(10, IConfigurationService)),\n    ( __param(11, IWorkbenchEnvironmentService)),\n    ( __param(12, IKeybindingService))\n], GlobalActivityActionViewItem));\nclass PlaceHolderViewContainerActivityAction extends ViewContainerActivityAction {\n}\nclass PlaceHolderToggleCompositePinnedAction extends ToggleCompositePinnedAction {\n    constructor(id, compositeBar) {\n        super({ id, name: id, classNames: undefined }, compositeBar);\n    }\n    setActivity(activity) {\n        this.label = activity.name;\n    }\n}\nclass PlaceHolderToggleCompositeBadgeAction extends ToggleCompositeBadgeAction {\n    constructor(id, compositeBar) {\n        super({ id, name: id, classNames: undefined }, compositeBar);\n    }\n    setActivity(activity) {\n        this.label = activity.name;\n    }\n}\nclass SwitchSideBarViewAction extends Action2 {\n    constructor(desc, offset) {\n        super(desc);\n        this.offset = offset;\n    }\n    async run(accessor) {\n        const paneCompositeService = accessor.get(IPaneCompositePartService);\n        const visibleViewletIds = paneCompositeService.getVisiblePaneCompositeIds(0 );\n        const activeViewlet = paneCompositeService.getActivePaneComposite(0 );\n        if (!activeViewlet) {\n            return;\n        }\n        let targetViewletId;\n        for (let i = 0; i < visibleViewletIds.length; i++) {\n            if (visibleViewletIds[i] === activeViewlet.getId()) {\n                targetViewletId = visibleViewletIds[(i + visibleViewletIds.length + this.offset) % visibleViewletIds.length];\n                break;\n            }\n        }\n        await paneCompositeService.openPaneComposite(targetViewletId, 0 , true);\n    }\n}\nregisterAction2(class PreviousSideBarViewAction extends SwitchSideBarViewAction {\n    constructor() {\n        super({\n            id: 'workbench.action.previousSideBarView',\n            title: { value: ( localize('previousSideBarView', \"Previous Primary Side Bar View\")), original: 'Previous Primary Side Bar View' },\n            category: Categories.View,\n            f1: true\n        }, -1);\n    }\n});\nregisterAction2(class NextSideBarViewAction extends SwitchSideBarViewAction {\n    constructor() {\n        super({\n            id: 'workbench.action.nextSideBarView',\n            title: { value: ( localize('nextSideBarView', \"Next Primary Side Bar View\")), original: 'Next Primary Side Bar View' },\n            category: Categories.View,\n            f1: true\n        }, 1);\n    }\n});\nregisterAction2(class FocusActivityBarAction extends Action2 {\n    constructor() {\n        super({\n            id: 'workbench.action.focusActivityBar',\n            title: { value: ( localize('focusActivityBar', \"Focus Activity Bar\")), original: 'Focus Activity Bar' },\n            category: Categories.View,\n            f1: true\n        });\n    }\n    async run(accessor) {\n        const layoutService = accessor.get(IWorkbenchLayoutService);\n        layoutService.setPartHidden(false, \"workbench.parts.activitybar\" );\n        layoutService.focusPart(\"workbench.parts.activitybar\" );\n    }\n});\nregisterThemingParticipant((theme, collector) => {\n    const activityBarActiveBorderColor = theme.getColor(ACTIVITY_BAR_ACTIVE_BORDER);\n    if (activityBarActiveBorderColor) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator:before {\n\t\t\t\tborder-left-color: ${activityBarActiveBorderColor};\n\t\t\t}\n\t\t`);\n    }\n    const activityBarActiveFocusBorderColor = theme.getColor(ACTIVITY_BAR_ACTIVE_FOCUS_BORDER);\n    if (activityBarActiveFocusBorderColor) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus::before {\n\t\t\t\tvisibility: hidden;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:focus .active-item-indicator:before {\n\t\t\t\tvisibility: visible;\n\t\t\t\tborder-left-color: ${activityBarActiveFocusBorderColor};\n\t\t\t}\n\t\t`);\n    }\n    const activityBarActiveBackgroundColor = theme.getColor(ACTIVITY_BAR_ACTIVE_BACKGROUND);\n    if (activityBarActiveBackgroundColor) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked .active-item-indicator {\n\t\t\t\tz-index: 0;\n\t\t\t\tbackground-color: ${activityBarActiveBackgroundColor};\n\t\t\t}\n\t\t`);\n    }\n    const outline = theme.getColor(activeContrastBorder);\n    if (outline) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:before {\n\t\t\t\tcontent: \"\";\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 8px;\n\t\t\t\tleft: 8px;\n\t\t\t\theight: 32px;\n\t\t\t\twidth: 32px;\n\t\t\t\tz-index: 1;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.profile-activity-item:before {\n\t\t\t\ttop: -6px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:hover:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:hover:before {\n\t\t\t\toutline: 1px solid;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:hover:before {\n\t\t\t\toutline: 1px dashed;\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator:before {\n\t\t\t\tborder-left-color: ${outline};\n\t\t\t}\n\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.active:hover:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item.checked:hover:before,\n\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:hover:before {\n\t\t\t\toutline-color: ${outline};\n\t\t\t}\n\t\t`);\n    }\n    else {\n        const focusBorderColor = theme.getColor(focusBorder);\n        if (focusBorderColor) {\n            collector.addRule(`\n\t\t\t\t.monaco-workbench .activitybar > .content :not(.monaco-menu) > .monaco-action-bar .action-item:focus .active-item-indicator:before {\n\t\t\t\t\t\tborder-left-color: ${focusBorderColor};\n\t\t\t\t\t}\n\t\t\t\t`);\n        }\n    }\n});\nexport { AccountsActivityActionViewItem, GlobalActivityActionViewItem, PlaceHolderToggleCompositeBadgeAction, PlaceHolderToggleCompositePinnedAction, PlaceHolderViewContainerActivityAction, ViewContainerActivityAction };\n","import { __decorate, __param } from '../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { toAction } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { illegalArgument } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { ActionBar } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { CompositeOverflowActivityAction, CompositeActionViewItem, CompositeOverflowActivityActionViewItem } from './compositeBarActions.js';\nimport { $, addDisposableListener, EventType, isAncestor, EventHelper } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { Widget } from 'monaco-editor/esm/vs/base/browser/ui/widget.js';\nimport { isUndefinedOrNull } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IViewDescriptorService } from '../../common/views.js';\nimport { CompositeDragAndDropObserver, toggleDropEffect } from '../dnd.js';\nimport { Gesture, EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nclass CompositeDragAndDrop {\n    constructor(viewDescriptorService, targetContainerLocation, openComposite, moveComposite, getItems) {\n        this.viewDescriptorService = viewDescriptorService;\n        this.targetContainerLocation = targetContainerLocation;\n        this.openComposite = openComposite;\n        this.moveComposite = moveComposite;\n        this.getItems = getItems;\n    }\n    drop(data, targetCompositeId, originalEvent, before) {\n        const dragData = data.getData();\n        if (dragData.type === 'composite') {\n            const currentContainer = this.viewDescriptorService.getViewContainerById(dragData.id);\n            const currentLocation = this.viewDescriptorService.getViewContainerLocation(currentContainer);\n            if (currentLocation === this.targetContainerLocation) {\n                if (targetCompositeId) {\n                    this.moveComposite(dragData.id, targetCompositeId, before);\n                }\n            }\n            else {\n                const viewsToMove = this.viewDescriptorService.getViewContainerModel(currentContainer).allViewDescriptors;\n                if (( viewsToMove.some(v => !v.canMoveView))) {\n                    return;\n                }\n                this.viewDescriptorService.moveViewContainerToLocation(currentContainer, this.targetContainerLocation, this.getTargetIndex(targetCompositeId, before));\n            }\n        }\n        if (dragData.type === 'view') {\n            const viewToMove = this.viewDescriptorService.getViewDescriptorById(dragData.id);\n            if (viewToMove && viewToMove.canMoveView) {\n                this.viewDescriptorService.moveViewToLocation(viewToMove, this.targetContainerLocation);\n                const newContainer = this.viewDescriptorService.getViewContainerByViewId(viewToMove.id);\n                if (targetCompositeId) {\n                    this.moveComposite(newContainer.id, targetCompositeId, before);\n                }\n                this.openComposite(newContainer.id, true).then(composite => {\n                    composite?.openView(viewToMove.id, true);\n                });\n            }\n        }\n    }\n    onDragEnter(data, targetCompositeId, originalEvent) {\n        return this.canDrop(data, targetCompositeId);\n    }\n    onDragOver(data, targetCompositeId, originalEvent) {\n        return this.canDrop(data, targetCompositeId);\n    }\n    getTargetIndex(targetId, before2d) {\n        if (!targetId) {\n            return undefined;\n        }\n        const items = this.getItems();\n        const before = this.targetContainerLocation === 1  ? before2d?.horizontallyBefore : before2d?.verticallyBefore;\n        return items.filter(item => item.visible).findIndex(item => item.id === targetId) + (before ? 0 : 1);\n    }\n    canDrop(data, targetCompositeId) {\n        const dragData = data.getData();\n        if (dragData.type === 'composite') {\n            const currentContainer = this.viewDescriptorService.getViewContainerById(dragData.id);\n            const currentLocation = this.viewDescriptorService.getViewContainerLocation(currentContainer);\n            if (currentLocation === this.targetContainerLocation) {\n                return dragData.id !== targetCompositeId;\n            }\n            const draggedViews = this.viewDescriptorService.getViewContainerModel(currentContainer).allViewDescriptors;\n            return !( draggedViews.some(view => !view.canMoveView));\n        }\n        else {\n            const viewDescriptor = this.viewDescriptorService.getViewDescriptorById(dragData.id);\n            if (!viewDescriptor || !viewDescriptor.canMoveView) {\n                return false;\n            }\n            return true;\n        }\n    }\n}\nlet CompositeBar = class CompositeBar extends Widget {\n    constructor(items, options, instantiationService, contextMenuService, viewDescriptorService) {\n        super();\n        this.options = options;\n        this.instantiationService = instantiationService;\n        this.contextMenuService = contextMenuService;\n        this.viewDescriptorService = viewDescriptorService;\n        this._onDidChange = this._register(( new Emitter()));\n        this.onDidChange = this._onDidChange.event;\n        this.model = ( new CompositeBarModel(items, options));\n        this.visibleComposites = [];\n        this.compositeSizeInBar = ( new Map());\n        this.computeSizes(this.model.visibleItems);\n    }\n    getCompositeBarItems() {\n        return [...this.model.items];\n    }\n    setCompositeBarItems(items) {\n        if (this.model.setItems(items)) {\n            this.updateCompositeSwitcher();\n        }\n    }\n    getPinnedComposites() {\n        return this.model.pinnedItems;\n    }\n    getVisibleComposites() {\n        return this.model.visibleItems;\n    }\n    create(parent) {\n        const actionBarDiv = parent.appendChild($('.composite-bar'));\n        this.compositeSwitcherBar = this._register(( new ActionBar(actionBarDiv, {\n            actionViewItemProvider: action => {\n                if (action instanceof CompositeOverflowActivityAction) {\n                    return this.compositeOverflowActionViewItem;\n                }\n                const item = this.model.findItem(action.id);\n                return item && this.instantiationService.createInstance(CompositeActionViewItem, { draggable: true, colors: this.options.colors, icon: this.options.icon, hoverOptions: this.options.activityHoverOptions }, action, item.pinnedAction, item.toggleBadgeAction, compositeId => this.options.getContextMenuActionsForComposite(compositeId), () => this.getContextMenuActions(), this.options.dndHandler, this);\n            },\n            orientation: this.options.orientation,\n            ariaLabel: ( localize('activityBarAriaLabel', \"Active View Switcher\")),\n            ariaRole: 'tablist',\n            animated: false,\n            preventLoopNavigation: this.options.preventLoopNavigation,\n            triggerKeys: { keyDown: true }\n        })));\n        this._register(addDisposableListener(parent, EventType.CONTEXT_MENU, e => this.showContextMenu(e)));\n        this._register(Gesture.addTarget(parent));\n        this._register(addDisposableListener(parent, EventType$1.Contextmenu, e => this.showContextMenu(e)));\n        let insertDropBefore = undefined;\n        this._register(CompositeDragAndDropObserver.INSTANCE.registerTarget(parent, {\n            onDragOver: (e) => {\n                const visibleItems = this.getVisibleComposites();\n                if (!visibleItems.length || (e.eventData.target && isAncestor(e.eventData.target, actionBarDiv))) {\n                    insertDropBefore = this.updateFromDragging(parent, false, false, true);\n                    return;\n                }\n                const insertAtFront = this.insertAtFront(actionBarDiv, e.eventData);\n                const target = insertAtFront ? visibleItems[0] : visibleItems[visibleItems.length - 1];\n                const validDropTarget = this.options.dndHandler.onDragOver(e.dragAndDropData, target.id, e.eventData);\n                toggleDropEffect(e.eventData.dataTransfer, 'move', validDropTarget);\n                insertDropBefore = this.updateFromDragging(parent, validDropTarget, insertAtFront, true);\n            },\n            onDragLeave: (e) => {\n                insertDropBefore = this.updateFromDragging(parent, false, false, false);\n            },\n            onDragEnd: (e) => {\n                insertDropBefore = this.updateFromDragging(parent, false, false, false);\n            },\n            onDrop: (e) => {\n                const visibleItems = this.getVisibleComposites();\n                if (visibleItems.length) {\n                    const target = this.insertAtFront(actionBarDiv, e.eventData) ? visibleItems[0] : visibleItems[visibleItems.length - 1];\n                    this.options.dndHandler.drop(e.dragAndDropData, target.id, e.eventData, insertDropBefore);\n                }\n                insertDropBefore = this.updateFromDragging(parent, false, false, false);\n            }\n        }));\n        return actionBarDiv;\n    }\n    insertAtFront(element, event) {\n        const rect = element.getBoundingClientRect();\n        const posX = event.clientX;\n        const posY = event.clientY;\n        switch (this.options.orientation) {\n            case 0 :\n                return posX < rect.left;\n            case 1 :\n                return posY < rect.top;\n        }\n    }\n    updateFromDragging(element, showFeedback, front, isDragging) {\n        element.classList.toggle('dragged-over', isDragging);\n        element.classList.toggle('dragged-over-head', showFeedback && front);\n        element.classList.toggle('dragged-over-tail', showFeedback && !front);\n        if (!showFeedback) {\n            return undefined;\n        }\n        return { verticallyBefore: front, horizontallyBefore: front };\n    }\n    focus(index) {\n        this.compositeSwitcherBar?.focus(index);\n    }\n    recomputeSizes() {\n        this.computeSizes(this.model.visibleItems);\n    }\n    layout(dimension) {\n        this.dimension = dimension;\n        if (dimension.height === 0 || dimension.width === 0) {\n            return;\n        }\n        if (this.compositeSizeInBar.size === 0) {\n            this.computeSizes(this.model.visibleItems);\n        }\n        this.updateCompositeSwitcher();\n    }\n    addComposite({ id, name, order, requestedIndex }) {\n        if (this.model.add(id, name, order, requestedIndex)) {\n            this.computeSizes([this.model.findItem(id)]);\n            this.updateCompositeSwitcher();\n        }\n    }\n    removeComposite(id) {\n        if (this.isPinned(id)) {\n            this.unpin(id);\n        }\n        if (this.model.remove(id)) {\n            this.updateCompositeSwitcher();\n        }\n    }\n    hideComposite(id) {\n        if (this.model.hide(id)) {\n            this.resetActiveComposite(id);\n            this.updateCompositeSwitcher();\n        }\n    }\n    activateComposite(id) {\n        const previousActiveItem = this.model.activeItem;\n        if (this.model.activate(id)) {\n            if (this.visibleComposites.indexOf(id) === -1 || (!!this.model.activeItem && !this.model.activeItem.pinned) || (previousActiveItem && !previousActiveItem.pinned)) {\n                this.updateCompositeSwitcher();\n            }\n        }\n    }\n    deactivateComposite(id) {\n        const previousActiveItem = this.model.activeItem;\n        if (this.model.deactivate()) {\n            if (previousActiveItem && !previousActiveItem.pinned) {\n                this.updateCompositeSwitcher();\n            }\n        }\n    }\n    showActivity(compositeId, badge, clazz, priority) {\n        if (!badge) {\n            throw illegalArgument('badge');\n        }\n        if (typeof priority !== 'number') {\n            priority = 0;\n        }\n        const activity = { badge, clazz, priority };\n        this.model.addActivity(compositeId, activity);\n        return toDisposable(() => this.model.removeActivity(compositeId, activity));\n    }\n    async pin(compositeId, open) {\n        if (this.model.setPinned(compositeId, true)) {\n            this.updateCompositeSwitcher();\n            if (open) {\n                await this.options.openComposite(compositeId);\n                this.activateComposite(compositeId);\n            }\n        }\n    }\n    unpin(compositeId) {\n        if (this.model.setPinned(compositeId, false)) {\n            this.updateCompositeSwitcher();\n            this.resetActiveComposite(compositeId);\n        }\n    }\n    areBadgesEnabled(compositeId) {\n        return this.viewDescriptorService.getViewContainerBadgeEnablementState(compositeId);\n    }\n    toggleBadgeEnablement(compositeId) {\n        this.viewDescriptorService.setViewContainerBadgeEnablementState(compositeId, !this.areBadgesEnabled(compositeId));\n        this.updateCompositeSwitcher();\n        const item = this.model.findItem(compositeId);\n        if (item) {\n            item.activityAction.setBadge(item.activityAction.getBadge(), item.activityAction.getClass());\n        }\n    }\n    resetActiveComposite(compositeId) {\n        const defaultCompositeId = this.options.getDefaultCompositeId();\n        if (!this.model.activeItem || this.model.activeItem.id !== compositeId) {\n            return;\n        }\n        this.deactivateComposite(compositeId);\n        if (defaultCompositeId && defaultCompositeId !== compositeId && this.isPinned(defaultCompositeId)) {\n            this.options.openComposite(defaultCompositeId, true);\n        }\n        else {\n            this.options.openComposite(this.visibleComposites.filter(cid => cid !== compositeId)[0]);\n        }\n    }\n    isPinned(compositeId) {\n        const item = this.model.findItem(compositeId);\n        return item?.pinned;\n    }\n    move(compositeId, toCompositeId, before) {\n        if (before !== undefined) {\n            const fromIndex = this.model.items.findIndex(c => c.id === compositeId);\n            let toIndex = this.model.items.findIndex(c => c.id === toCompositeId);\n            if (fromIndex >= 0 && toIndex >= 0) {\n                if (!before && fromIndex > toIndex) {\n                    toIndex++;\n                }\n                if (before && fromIndex < toIndex) {\n                    toIndex--;\n                }\n                if (toIndex < this.model.items.length && toIndex >= 0 && toIndex !== fromIndex) {\n                    if (this.model.move(this.model.items[fromIndex].id, this.model.items[toIndex].id)) {\n                        setTimeout(() => this.updateCompositeSwitcher(), 0);\n                    }\n                }\n            }\n        }\n        else {\n            if (this.model.move(compositeId, toCompositeId)) {\n                setTimeout(() => this.updateCompositeSwitcher(), 0);\n            }\n        }\n    }\n    getAction(compositeId) {\n        const item = this.model.findItem(compositeId);\n        return item?.activityAction;\n    }\n    computeSizes(items) {\n        const size = this.options.compositeSize;\n        if (size) {\n            items.forEach(composite => this.compositeSizeInBar.set(composite.id, size));\n        }\n        else {\n            const compositeSwitcherBar = this.compositeSwitcherBar;\n            if (compositeSwitcherBar && this.dimension && this.dimension.height !== 0 && this.dimension.width !== 0) {\n                const currentItemsLength = compositeSwitcherBar.viewItems.length;\n                compositeSwitcherBar.push(( items.map(composite => composite.activityAction)));\n                items.forEach((composite, index) => this.compositeSizeInBar.set(composite.id, this.options.orientation === 1\n                    ? compositeSwitcherBar.getHeight(currentItemsLength + index)\n                    : compositeSwitcherBar.getWidth(currentItemsLength + index)));\n                items.forEach(() => compositeSwitcherBar.pull(compositeSwitcherBar.viewItems.length - 1));\n            }\n        }\n    }\n    updateCompositeSwitcher() {\n        const compositeSwitcherBar = this.compositeSwitcherBar;\n        if (!compositeSwitcherBar || !this.dimension) {\n            return;\n        }\n        let compositesToShow = ( this.model.visibleItems.filter(item => item.pinned\n            || (this.model.activeItem && this.model.activeItem.id === item.id) ).map(item => item.id));\n        let maxVisible = compositesToShow.length;\n        const totalComposites = compositesToShow.length;\n        let size = 0;\n        const limit = this.options.orientation === 1  ? this.dimension.height : this.dimension.width;\n        for (let i = 0; i < compositesToShow.length; i++) {\n            const compositeSize = this.compositeSizeInBar.get(compositesToShow[i]);\n            if (size + compositeSize > limit) {\n                maxVisible = i;\n                break;\n            }\n            size += compositeSize;\n        }\n        if (totalComposites > maxVisible) {\n            compositesToShow = compositesToShow.slice(0, maxVisible);\n        }\n        if (this.model.activeItem && compositesToShow.every(compositeId => !!this.model.activeItem && compositeId !== this.model.activeItem.id)) {\n            size += this.compositeSizeInBar.get(this.model.activeItem.id);\n            compositesToShow.push(this.model.activeItem.id);\n        }\n        while (size > limit && compositesToShow.length) {\n            const removedComposite = compositesToShow.length > 1 ? compositesToShow.splice(compositesToShow.length - 2, 1)[0] : compositesToShow.pop();\n            size -= this.compositeSizeInBar.get(removedComposite);\n        }\n        if (totalComposites > compositesToShow.length) {\n            size += this.options.overflowActionSize;\n        }\n        while (size > limit && compositesToShow.length) {\n            const removedComposite = compositesToShow.length > 1 && compositesToShow[compositesToShow.length - 1] === this.model.activeItem?.id ?\n                compositesToShow.splice(compositesToShow.length - 2, 1)[0] : compositesToShow.pop();\n            size -= this.compositeSizeInBar.get(removedComposite);\n        }\n        if (totalComposites === compositesToShow.length && this.compositeOverflowAction) {\n            compositeSwitcherBar.pull(compositeSwitcherBar.length() - 1);\n            this.compositeOverflowAction.dispose();\n            this.compositeOverflowAction = undefined;\n            this.compositeOverflowActionViewItem?.dispose();\n            this.compositeOverflowActionViewItem = undefined;\n        }\n        const compositesToRemove = [];\n        this.visibleComposites.forEach((compositeId, index) => {\n            if (!compositesToShow.includes(compositeId)) {\n                compositesToRemove.push(index);\n            }\n        });\n        compositesToRemove.reverse().forEach(index => {\n            const actionViewItem = compositeSwitcherBar.viewItems[index];\n            compositeSwitcherBar.pull(index);\n            actionViewItem.dispose();\n            this.visibleComposites.splice(index, 1);\n        });\n        compositesToShow.forEach((compositeId, newIndex) => {\n            const currentIndex = this.visibleComposites.indexOf(compositeId);\n            if (newIndex !== currentIndex) {\n                if (currentIndex !== -1) {\n                    const actionViewItem = compositeSwitcherBar.viewItems[currentIndex];\n                    compositeSwitcherBar.pull(currentIndex);\n                    actionViewItem.dispose();\n                    this.visibleComposites.splice(currentIndex, 1);\n                }\n                compositeSwitcherBar.push(this.model.findItem(compositeId).activityAction, { label: true, icon: this.options.icon, index: newIndex });\n                this.visibleComposites.splice(newIndex, 0, compositeId);\n            }\n        });\n        if (totalComposites > compositesToShow.length && !this.compositeOverflowAction) {\n            this.compositeOverflowAction = this.instantiationService.createInstance(CompositeOverflowActivityAction, () => {\n                this.compositeOverflowActionViewItem?.showMenu();\n            });\n            this.compositeOverflowActionViewItem = this.instantiationService.createInstance(CompositeOverflowActivityActionViewItem, this.compositeOverflowAction, () => this.getOverflowingComposites(), () => this.model.activeItem ? this.model.activeItem.id : undefined, compositeId => {\n                const item = this.model.findItem(compositeId);\n                return item?.activity[0]?.badge;\n            }, this.options.getOnCompositeClickAction, this.options.colors, this.options.activityHoverOptions);\n            compositeSwitcherBar.push(this.compositeOverflowAction, { label: false, icon: true });\n        }\n        this._onDidChange.fire();\n    }\n    getOverflowingComposites() {\n        let overflowingIds = ( this.model.visibleItems.filter(item => item.pinned).map(item => item.id));\n        if (this.model.activeItem && !this.model.activeItem.pinned) {\n            overflowingIds.push(this.model.activeItem.id);\n        }\n        overflowingIds = overflowingIds.filter(compositeId => !this.visibleComposites.includes(compositeId));\n        return ( this.model.visibleItems.filter(c => overflowingIds.includes(c.id)).map(\n            item => { return { id: item.id, name: this.getAction(item.id)?.label || item.name }; }\n        ));\n    }\n    showContextMenu(e) {\n        EventHelper.stop(e, true);\n        const event = ( new StandardMouseEvent(e));\n        this.contextMenuService.showContextMenu({\n            getAnchor: () => event,\n            getActions: () => this.getContextMenuActions(e)\n        });\n    }\n    getContextMenuActions(e) {\n        const actions = ( this.model.visibleItems\n            .map(({ id, name, activityAction }) => (toAction({\n            id,\n            label: this.getAction(id).label || name || id,\n            checked: this.isPinned(id),\n            enabled: activityAction.enabled,\n            run: () => {\n                if (this.isPinned(id)) {\n                    this.unpin(id);\n                }\n                else {\n                    this.pin(id, true);\n                }\n            }\n        }))));\n        return actions;\n    }\n};\nCompositeBar = ( __decorate([\n    ( __param(2, IInstantiationService)),\n    ( __param(3, IContextMenuService)),\n    ( __param(4, IViewDescriptorService))\n], CompositeBar));\nclass CompositeBarModel {\n    get items() { return this._items; }\n    constructor(items, options) {\n        this._items = [];\n        this.options = options;\n        this.setItems(items);\n    }\n    setItems(items) {\n        const result = [];\n        let hasChanges = false;\n        if (!this.items || this.items.length === 0) {\n            this._items = ( items.map(\n                i => this.createCompositeBarItem(i.id, i.name, i.order, i.pinned, i.visible)\n            ));\n            hasChanges = true;\n        }\n        else {\n            const existingItems = this.items;\n            for (let index = 0; index < items.length; index++) {\n                const newItem = items[index];\n                const existingItem = existingItems.filter(({ id }) => id === newItem.id)[0];\n                if (existingItem) {\n                    if (existingItem.pinned !== newItem.pinned ||\n                        index !== existingItems.indexOf(existingItem)) {\n                        existingItem.pinned = newItem.pinned;\n                        result.push(existingItem);\n                        hasChanges = true;\n                    }\n                    else {\n                        result.push(existingItem);\n                    }\n                }\n                else {\n                    result.push(this.createCompositeBarItem(newItem.id, newItem.name, newItem.order, newItem.pinned, newItem.visible));\n                    hasChanges = true;\n                }\n            }\n            this._items = result;\n        }\n        return hasChanges;\n    }\n    get visibleItems() {\n        return this.items.filter(item => item.visible);\n    }\n    get pinnedItems() {\n        return this.items.filter(item => item.visible && item.pinned);\n    }\n    createCompositeBarItem(id, name, order, pinned, visible) {\n        const options = this.options;\n        return {\n            id, name, pinned, order, visible,\n            activity: [],\n            get activityAction() {\n                return options.getActivityAction(id);\n            },\n            get pinnedAction() {\n                return options.getCompositePinnedAction(id);\n            },\n            get toggleBadgeAction() {\n                return options.getCompositeBadgeAction(id);\n            }\n        };\n    }\n    add(id, name, order, requestedIndex) {\n        const item = this.findItem(id);\n        if (item) {\n            let changed = false;\n            item.name = name;\n            if (!isUndefinedOrNull(order)) {\n                changed = item.order !== order;\n                item.order = order;\n            }\n            if (!item.visible) {\n                item.visible = true;\n                changed = true;\n            }\n            return changed;\n        }\n        else {\n            const item = this.createCompositeBarItem(id, name, order, true, true);\n            if (!isUndefinedOrNull(requestedIndex)) {\n                let index = 0;\n                let rIndex = requestedIndex;\n                while (rIndex > 0 && index < this.items.length) {\n                    if (this.items[index++].visible) {\n                        rIndex--;\n                    }\n                }\n                this.items.splice(index, 0, item);\n            }\n            else if (isUndefinedOrNull(order)) {\n                this.items.push(item);\n            }\n            else {\n                let index = 0;\n                while (index < this.items.length && typeof this.items[index].order === 'number' && this.items[index].order < order) {\n                    index++;\n                }\n                this.items.splice(index, 0, item);\n            }\n            return true;\n        }\n    }\n    remove(id) {\n        for (let index = 0; index < this.items.length; index++) {\n            if (this.items[index].id === id) {\n                this.items.splice(index, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n    hide(id) {\n        for (const item of this.items) {\n            if (item.id === id) {\n                if (item.visible) {\n                    item.visible = false;\n                    return true;\n                }\n                return false;\n            }\n        }\n        return false;\n    }\n    move(compositeId, toCompositeId) {\n        const fromIndex = this.findIndex(compositeId);\n        const toIndex = this.findIndex(toCompositeId);\n        if (fromIndex === -1 || toIndex === -1) {\n            return false;\n        }\n        const sourceItem = this.items.splice(fromIndex, 1)[0];\n        this.items.splice(toIndex, 0, sourceItem);\n        sourceItem.pinned = true;\n        return true;\n    }\n    setPinned(id, pinned) {\n        for (const item of this.items) {\n            if (item.id === id) {\n                if (item.pinned !== pinned) {\n                    item.pinned = pinned;\n                    return true;\n                }\n                return false;\n            }\n        }\n        return false;\n    }\n    addActivity(id, activity) {\n        const item = this.findItem(id);\n        if (item) {\n            const stack = item.activity;\n            for (let i = 0; i <= stack.length; i++) {\n                if (i === stack.length) {\n                    stack.push(activity);\n                    break;\n                }\n                else if (stack[i].priority <= activity.priority) {\n                    stack.splice(i, 0, activity);\n                    break;\n                }\n            }\n            this.updateActivity(id);\n            return true;\n        }\n        return false;\n    }\n    removeActivity(id, activity) {\n        const item = this.findItem(id);\n        if (item) {\n            const index = item.activity.indexOf(activity);\n            if (index !== -1) {\n                item.activity.splice(index, 1);\n                this.updateActivity(id);\n                return true;\n            }\n        }\n        return false;\n    }\n    updateActivity(id) {\n        const item = this.findItem(id);\n        if (item) {\n            if (item.activity.length) {\n                const [{ badge, clazz }] = item.activity;\n                item.activityAction.setBadge(badge, clazz);\n            }\n            else {\n                item.activityAction.setBadge(undefined);\n            }\n        }\n    }\n    activate(id) {\n        if (!this.activeItem || this.activeItem.id !== id) {\n            if (this.activeItem) {\n                this.deactivate();\n            }\n            for (const item of this.items) {\n                if (item.id === id) {\n                    this.activeItem = item;\n                    this.activeItem.activityAction.activate();\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    deactivate() {\n        if (this.activeItem) {\n            this.activeItem.activityAction.deactivate();\n            this.activeItem = undefined;\n            return true;\n        }\n        return false;\n    }\n    findItem(id) {\n        return this.items.filter(item => item.id === id)[0];\n    }\n    findIndex(id) {\n        for (let index = 0; index < this.items.length; index++) {\n            if (this.items[index].id === id) {\n                return index;\n            }\n        }\n        return -1;\n    }\n}\nexport { CompositeBar, CompositeDragAndDrop };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .menubar .toolbar-toggle-more,.monaco-workbench .menubar>.menubar-menu-button{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .activitybar .menubar.compact .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button{color:var(--vscode-activityBar-inactiveForeground)}.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover,.monaco-workbench .activitybar .menubar.compact:not(:focus-within)>.menubar-menu-button:hover .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus,.monaco-workbench .activitybar .menubar.compact>.menubar-menu-button:focus .toolbar-toggle-more{color:var(--vscode-activityBar-foreground)}.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button,.monaco-workbench .menubar.inactive:not(.compact)>.menubar-menu-button .toolbar-toggle-more{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .toolbar-toggle-more,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .toolbar-toggle-more,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .toolbar-toggle-more{color:var(--vscode-menubar-selectionForeground)}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar:not(:focus-within):not(.compact)>.menubar-menu-button:hover .menubar-menu-title{background-color:var(--vscode-menubar-selectionBackground)}.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline:dashed 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title{outline:solid 1px var(--vscode-menubar-selectionBorder)}.monaco-workbench .menubar>.menubar-menu-button.open .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:focus .menubar-menu-title,.monaco-workbench .menubar>.menubar-menu-button:hover .menubar-menu-title{outline-color:var(--vscode-menubar-selectionBorder);outline-offset:-1px}\";\nn(css,{});\nexport { css, css as default };\n","import n from '../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".menubar{box-sizing:border-box;display:flex;flex-shrink:1;height:100%;overflow:hidden}.menubar.overflow-menu-only{width:38px}.fullscreen .menubar:not(.compact){margin:0;padding:4px 5px}.menubar>.menubar-menu-button{-webkit-app-region:no-drag;zoom:1;align-items:center;box-sizing:border-box;cursor:default;display:flex;outline:0!important;white-space:nowrap}.monaco-workbench .menubar:not(.compact)>.menubar-menu-button:focus .menubar-menu-title{outline-color:var(--vscode-focusBorder);outline-offset:-1px;outline-style:solid;outline-width:1px}.menubar.compact{flex-shrink:0;overflow:visible}.menubar.compact>.menubar-menu-button{height:100%;padding:0;width:100%}.menubar-menu-title{border-radius:5px;padding:0 8px}.menubar .menubar-menu-items-holder{left:0;opacity:1;position:fixed;z-index:2000}.menubar.compact .menubar-menu-items-holder{position:fixed}.menubar .menubar-menu-items-holder.monaco-menu-container{border:none;outline:0}.menubar .menubar-menu-items-holder.monaco-menu-container :focus{outline:0}.menubar .toolbar-toggle-more{align-items:center;display:flex;height:22px;justify-content:center;padding:0 8px;vertical-align:sub;width:22px}.menubar.compact .toolbar-toggle-more{align-items:center;cursor:pointer;display:flex;justify-content:center;left:0;position:relative;top:0;width:100%}.menubar.compact .toolbar-toggle-more:before,.menubar:not(.compact) .menubar-menu-button:first-child .toolbar-toggle-more:before{content:\\\"\\\\eb94\\\"!important}.menubar.compact>.menubar-menu-button.open .menubar-menu-title,.menubar.compact>.menubar-menu-button:focus .menubar-menu-title,.menubar.compact>.menubar-menu-button:hover .menubar-menu-title{outline-offset:-8px!important;outline-width:1px!important}\";\nn(css,{});\nexport { css, css as default };\n","import * as browser from 'monaco-editor/esm/vs/base/browser/browser.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { StandardKeyboardEvent } from 'monaco-editor/esm/vs/base/browser/keyboardEvent.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { Gesture, EventType } from 'monaco-editor/esm/vs/base/browser/touch.js';\nimport { cleanMnemonic, MENU_MNEMONIC_REGEX, MENU_ESCAPED_MNEMONIC_REGEX, Direction, Menu } from 'monaco-editor/esm/vs/base/browser/ui/menu/menu.js';\nimport { ActionRunner, SubmenuAction, Separator } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { asArray } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { RunOnceScheduler } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { ScanCodeUtils } from 'monaco-editor/esm/vs/base/common/keyCodes.js';\nimport { Disposable, dispose } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { isMacintosh } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport * as strings from 'monaco-editor/esm/vs/base/common/strings.js';\nimport { withNullAsUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport './menubar.css.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nconst $ = dom.$;\nvar MenubarState;\n( (function(MenubarState) {\n    MenubarState[MenubarState[\"HIDDEN\"] = 0] = \"HIDDEN\";\n    MenubarState[MenubarState[\"VISIBLE\"] = 1] = \"VISIBLE\";\n    MenubarState[MenubarState[\"FOCUSED\"] = 2] = \"FOCUSED\";\n    MenubarState[MenubarState[\"OPEN\"] = 3] = \"OPEN\";\n})(MenubarState || (MenubarState = {})));\nclass MenuBar extends Disposable {\n    static { this.OVERFLOW_INDEX = -1; }\n    constructor(container, options, menuStyle) {\n        super();\n        this.container = container;\n        this.options = options;\n        this.menuStyle = menuStyle;\n        this._mnemonicsInUse = false;\n        this.openedViaKeyboard = false;\n        this.awaitingAltRelease = false;\n        this.ignoreNextMouseUp = false;\n        this.updatePending = false;\n        this.numMenusShown = 0;\n        this.overflowLayoutScheduled = undefined;\n        this.container.setAttribute('role', 'menubar');\n        if (this.isCompact) {\n            this.container.classList.add('compact');\n        }\n        this.menus = [];\n        this.mnemonics = ( new Map());\n        this._focusState = MenubarState.VISIBLE;\n        this._onVisibilityChange = this._register(( new Emitter()));\n        this._onFocusStateChange = this._register(( new Emitter()));\n        this.createOverflowMenu();\n        this.menuUpdater = this._register(( new RunOnceScheduler(() => this.update(), 200)));\n        this.actionRunner = this.options.actionRunner ?? this._register(( new ActionRunner()));\n        this._register(this.actionRunner.onWillRun(() => {\n            this.setUnfocusedState();\n        }));\n        this._register(dom.ModifierKeyEmitter.getInstance().event(this.onModifierKeyToggled, this));\n        this._register(dom.addDisposableListener(this.container, dom.EventType.KEY_DOWN, (e) => {\n            const event = ( new StandardKeyboardEvent(e));\n            let eventHandled = true;\n            const key = !!e.key ? e.key.toLocaleLowerCase() : '';\n            const tabNav = isMacintosh && !this.isCompact;\n            if (event.equals(15 ) || (tabNav && event.equals(2  | 1024 ))) {\n                this.focusPrevious();\n            }\n            else if (event.equals(17 ) || (tabNav && event.equals(2 ))) {\n                this.focusNext();\n            }\n            else if (event.equals(9 ) && this.isFocused && !this.isOpen) {\n                this.setUnfocusedState();\n            }\n            else if (!this.isOpen && !event.ctrlKey && this.options.enableMnemonics && this.mnemonicsInUse && ( this.mnemonics.has(key))) {\n                const menuIndex = this.mnemonics.get(key);\n                this.onMenuTriggered(menuIndex, false);\n            }\n            else {\n                eventHandled = false;\n            }\n            if (!this.isCompact && (event.equals(2  | 1024 ) || event.equals(2 ))) {\n                event.preventDefault();\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        this._register(dom.addDisposableListener(window, dom.EventType.MOUSE_DOWN, () => {\n            if (this.isFocused) {\n                this.setUnfocusedState();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.container, dom.EventType.FOCUS_IN, (e) => {\n            const event = e;\n            if (event.relatedTarget) {\n                if (!this.container.contains(event.relatedTarget)) {\n                    this.focusToReturn = event.relatedTarget;\n                }\n            }\n        }));\n        this._register(dom.addDisposableListener(this.container, dom.EventType.FOCUS_OUT, (e) => {\n            const event = e;\n            if (!event.relatedTarget) {\n                this.setUnfocusedState();\n            }\n            else if (event.relatedTarget && !this.container.contains(event.relatedTarget)) {\n                this.focusToReturn = undefined;\n                this.setUnfocusedState();\n            }\n        }));\n        this._register(dom.addDisposableListener(window, dom.EventType.KEY_DOWN, (e) => {\n            if (!this.options.enableMnemonics || !e.altKey || e.ctrlKey || e.defaultPrevented) {\n                return;\n            }\n            const key = e.key.toLocaleLowerCase();\n            if (!( this.mnemonics.has(key))) {\n                return;\n            }\n            this.mnemonicsInUse = true;\n            this.updateMnemonicVisibility(true);\n            const menuIndex = this.mnemonics.get(key);\n            this.onMenuTriggered(menuIndex, false);\n        }));\n        this.setUnfocusedState();\n    }\n    push(arg) {\n        const menus = asArray(arg);\n        menus.forEach((menuBarMenu) => {\n            const menuIndex = this.menus.length;\n            const cleanMenuLabel = cleanMnemonic(menuBarMenu.label);\n            const mnemonicMatches = MENU_MNEMONIC_REGEX.exec(menuBarMenu.label);\n            if (mnemonicMatches) {\n                const mnemonic = !!mnemonicMatches[1] ? mnemonicMatches[1] : mnemonicMatches[3];\n                this.registerMnemonic(this.menus.length, mnemonic);\n            }\n            if (this.isCompact) {\n                this.menus.push(menuBarMenu);\n            }\n            else {\n                const buttonElement = $('div.menubar-menu-button', { 'role': 'menuitem', 'tabindex': -1, 'aria-label': cleanMenuLabel, 'aria-haspopup': true });\n                const titleElement = $('div.menubar-menu-title', { 'role': 'none', 'aria-hidden': true });\n                buttonElement.appendChild(titleElement);\n                this.container.insertBefore(buttonElement, this.overflowMenu.buttonElement);\n                this.updateLabels(titleElement, buttonElement, menuBarMenu.label);\n                this._register(dom.addDisposableListener(buttonElement, dom.EventType.KEY_UP, (e) => {\n                    const event = ( new StandardKeyboardEvent(e));\n                    let eventHandled = true;\n                    if ((event.equals(18 ) || event.equals(3 )) && !this.isOpen) {\n                        this.focusedMenu = { index: menuIndex };\n                        this.openedViaKeyboard = true;\n                        this.focusState = MenubarState.OPEN;\n                    }\n                    else {\n                        eventHandled = false;\n                    }\n                    if (eventHandled) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                    }\n                }));\n                this._register(Gesture.addTarget(buttonElement));\n                this._register(dom.addDisposableListener(buttonElement, EventType.Tap, (e) => {\n                    if (this.isOpen && this.focusedMenu && this.focusedMenu.holder && dom.isAncestor(e.initialTarget, this.focusedMenu.holder)) {\n                        return;\n                    }\n                    this.ignoreNextMouseUp = false;\n                    this.onMenuTriggered(menuIndex, true);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                this._register(dom.addDisposableListener(buttonElement, dom.EventType.MOUSE_DOWN, (e) => {\n                    const mouseEvent = ( new StandardMouseEvent(e));\n                    if (!mouseEvent.leftButton) {\n                        e.preventDefault();\n                        return;\n                    }\n                    if (!this.isOpen) {\n                        this.ignoreNextMouseUp = true;\n                        this.onMenuTriggered(menuIndex, true);\n                    }\n                    else {\n                        this.ignoreNextMouseUp = false;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                this._register(dom.addDisposableListener(buttonElement, dom.EventType.MOUSE_UP, (e) => {\n                    if (e.defaultPrevented) {\n                        return;\n                    }\n                    if (!this.ignoreNextMouseUp) {\n                        if (this.isFocused) {\n                            this.onMenuTriggered(menuIndex, true);\n                        }\n                    }\n                    else {\n                        this.ignoreNextMouseUp = false;\n                    }\n                }));\n                this._register(dom.addDisposableListener(buttonElement, dom.EventType.MOUSE_ENTER, () => {\n                    if (this.isOpen && !this.isCurrentMenu(menuIndex)) {\n                        buttonElement.focus();\n                        this.cleanupCustomMenu();\n                        this.showCustomMenu(menuIndex, false);\n                    }\n                    else if (this.isFocused && !this.isOpen) {\n                        this.focusedMenu = { index: menuIndex };\n                        buttonElement.focus();\n                    }\n                }));\n                this.menus.push({\n                    label: menuBarMenu.label,\n                    actions: menuBarMenu.actions,\n                    buttonElement: buttonElement,\n                    titleElement: titleElement\n                });\n            }\n        });\n    }\n    createOverflowMenu() {\n        const label = this.isCompact ? ( nls.localize('mAppMenu', 'Application Menu')) : ( nls.localize('mMore', 'More'));\n        const buttonElement = $('div.menubar-menu-button', { 'role': 'menuitem', 'tabindex': this.isCompact ? 0 : -1, 'aria-label': label, 'aria-haspopup': true });\n        const titleElement = $('div.menubar-menu-title.toolbar-toggle-more' + ThemeIcon.asCSSSelector(Codicon.menuBarMore), { 'role': 'none', 'aria-hidden': true });\n        buttonElement.appendChild(titleElement);\n        this.container.appendChild(buttonElement);\n        buttonElement.style.visibility = 'hidden';\n        this._register(dom.addDisposableListener(buttonElement, dom.EventType.KEY_UP, (e) => {\n            const event = ( new StandardKeyboardEvent(e));\n            let eventHandled = true;\n            const triggerKeys = [3 ];\n            if (!this.isCompact) {\n                triggerKeys.push(18 );\n            }\n            else {\n                triggerKeys.push(10 );\n                if (this.options.compactMode === Direction.Right) {\n                    triggerKeys.push(17 );\n                }\n                else if (this.options.compactMode === Direction.Left) {\n                    triggerKeys.push(15 );\n                }\n            }\n            if ((( triggerKeys.some(k => event.equals(k))) && !this.isOpen)) {\n                this.focusedMenu = { index: MenuBar.OVERFLOW_INDEX };\n                this.openedViaKeyboard = true;\n                this.focusState = MenubarState.OPEN;\n            }\n            else {\n                eventHandled = false;\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        this._register(Gesture.addTarget(buttonElement));\n        this._register(dom.addDisposableListener(buttonElement, EventType.Tap, (e) => {\n            if (this.isOpen && this.focusedMenu && this.focusedMenu.holder && dom.isAncestor(e.initialTarget, this.focusedMenu.holder)) {\n                return;\n            }\n            this.ignoreNextMouseUp = false;\n            this.onMenuTriggered(MenuBar.OVERFLOW_INDEX, true);\n            e.preventDefault();\n            e.stopPropagation();\n        }));\n        this._register(dom.addDisposableListener(buttonElement, dom.EventType.MOUSE_DOWN, (e) => {\n            const mouseEvent = ( new StandardMouseEvent(e));\n            if (!mouseEvent.leftButton) {\n                e.preventDefault();\n                return;\n            }\n            if (!this.isOpen) {\n                this.ignoreNextMouseUp = true;\n                this.onMenuTriggered(MenuBar.OVERFLOW_INDEX, true);\n            }\n            else {\n                this.ignoreNextMouseUp = false;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n        }));\n        this._register(dom.addDisposableListener(buttonElement, dom.EventType.MOUSE_UP, (e) => {\n            if (e.defaultPrevented) {\n                return;\n            }\n            if (!this.ignoreNextMouseUp) {\n                if (this.isFocused) {\n                    this.onMenuTriggered(MenuBar.OVERFLOW_INDEX, true);\n                }\n            }\n            else {\n                this.ignoreNextMouseUp = false;\n            }\n        }));\n        this._register(dom.addDisposableListener(buttonElement, dom.EventType.MOUSE_ENTER, () => {\n            if (this.isOpen && !this.isCurrentMenu(MenuBar.OVERFLOW_INDEX)) {\n                this.overflowMenu.buttonElement.focus();\n                this.cleanupCustomMenu();\n                this.showCustomMenu(MenuBar.OVERFLOW_INDEX, false);\n            }\n            else if (this.isFocused && !this.isOpen) {\n                this.focusedMenu = { index: MenuBar.OVERFLOW_INDEX };\n                buttonElement.focus();\n            }\n        }));\n        this.overflowMenu = {\n            buttonElement: buttonElement,\n            titleElement: titleElement,\n            label: 'More',\n            actions: []\n        };\n    }\n    updateMenu(menu) {\n        const menuToUpdate = this.menus.filter(menuBarMenu => menuBarMenu.label === menu.label);\n        if (menuToUpdate && menuToUpdate.length) {\n            menuToUpdate[0].actions = menu.actions;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.menus.forEach(menuBarMenu => {\n            menuBarMenu.titleElement?.remove();\n            menuBarMenu.buttonElement?.remove();\n        });\n        this.overflowMenu.titleElement.remove();\n        this.overflowMenu.buttonElement.remove();\n        dispose(this.overflowLayoutScheduled);\n        this.overflowLayoutScheduled = undefined;\n    }\n    blur() {\n        this.setUnfocusedState();\n    }\n    getWidth() {\n        if (!this.isCompact && this.menus) {\n            const left = this.menus[0].buttonElement.getBoundingClientRect().left;\n            const right = this.hasOverflow ? this.overflowMenu.buttonElement.getBoundingClientRect().right : this.menus[this.menus.length - 1].buttonElement.getBoundingClientRect().right;\n            return right - left;\n        }\n        return 0;\n    }\n    getHeight() {\n        return this.container.clientHeight;\n    }\n    toggleFocus() {\n        if (!this.isFocused && this.options.visibility !== 'hidden') {\n            this.mnemonicsInUse = true;\n            this.focusedMenu = { index: this.numMenusShown > 0 ? 0 : MenuBar.OVERFLOW_INDEX };\n            this.focusState = MenubarState.FOCUSED;\n        }\n        else if (!this.isOpen) {\n            this.setUnfocusedState();\n        }\n    }\n    updateOverflowAction() {\n        if (!this.menus || !this.menus.length) {\n            return;\n        }\n        const overflowMenuOnlyClass = 'overflow-menu-only';\n        this.container.classList.toggle(overflowMenuOnlyClass, false);\n        const sizeAvailable = this.container.offsetWidth;\n        let currentSize = 0;\n        let full = this.isCompact;\n        const prevNumMenusShown = this.numMenusShown;\n        this.numMenusShown = 0;\n        const showableMenus = this.menus.filter(menu => menu.buttonElement !== undefined && menu.titleElement !== undefined);\n        for (const menuBarMenu of showableMenus) {\n            if (!full) {\n                const size = menuBarMenu.buttonElement.offsetWidth;\n                if (currentSize + size > sizeAvailable) {\n                    full = true;\n                }\n                else {\n                    currentSize += size;\n                    this.numMenusShown++;\n                    if (this.numMenusShown > prevNumMenusShown) {\n                        menuBarMenu.buttonElement.style.visibility = 'visible';\n                    }\n                }\n            }\n            if (full) {\n                menuBarMenu.buttonElement.style.visibility = 'hidden';\n            }\n        }\n        if (this.numMenusShown - 1 <= showableMenus.length / 2) {\n            for (const menuBarMenu of showableMenus) {\n                menuBarMenu.buttonElement.style.visibility = 'hidden';\n            }\n            full = true;\n            this.numMenusShown = 0;\n            currentSize = 0;\n        }\n        if (this.isCompact) {\n            this.overflowMenu.actions = [];\n            for (let idx = this.numMenusShown; idx < this.menus.length; idx++) {\n                this.overflowMenu.actions.push(( new SubmenuAction(\n                    `menubar.submenu.${this.menus[idx].label}`,\n                    this.menus[idx].label,\n                    this.menus[idx].actions || []\n                )));\n            }\n            const compactMenuActions = this.options.getCompactMenuActions?.();\n            if (compactMenuActions && compactMenuActions.length) {\n                this.overflowMenu.actions.push(( new Separator()));\n                this.overflowMenu.actions.push(...compactMenuActions);\n            }\n            this.overflowMenu.buttonElement.style.visibility = 'visible';\n        }\n        else if (full) {\n            while (currentSize + this.overflowMenu.buttonElement.offsetWidth > sizeAvailable && this.numMenusShown > 0) {\n                this.numMenusShown--;\n                const size = showableMenus[this.numMenusShown].buttonElement.offsetWidth;\n                showableMenus[this.numMenusShown].buttonElement.style.visibility = 'hidden';\n                currentSize -= size;\n            }\n            this.overflowMenu.actions = [];\n            for (let idx = this.numMenusShown; idx < showableMenus.length; idx++) {\n                this.overflowMenu.actions.push(( new SubmenuAction(\n                    `menubar.submenu.${showableMenus[idx].label}`,\n                    showableMenus[idx].label,\n                    showableMenus[idx].actions || []\n                )));\n            }\n            if (this.overflowMenu.buttonElement.nextElementSibling !== showableMenus[this.numMenusShown].buttonElement) {\n                this.overflowMenu.buttonElement.remove();\n                this.container.insertBefore(this.overflowMenu.buttonElement, showableMenus[this.numMenusShown].buttonElement);\n            }\n            this.overflowMenu.buttonElement.style.visibility = 'visible';\n        }\n        else {\n            this.overflowMenu.buttonElement.remove();\n            this.container.appendChild(this.overflowMenu.buttonElement);\n            this.overflowMenu.buttonElement.style.visibility = 'hidden';\n        }\n        this.container.classList.toggle(overflowMenuOnlyClass, this.numMenusShown === 0);\n    }\n    updateLabels(titleElement, buttonElement, label) {\n        const cleanMenuLabel = cleanMnemonic(label);\n        if (this.options.enableMnemonics) {\n            const cleanLabel = strings.escape(label);\n            MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n            let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(cleanLabel);\n            while (escMatch && escMatch[1]) {\n                escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(cleanLabel);\n            }\n            const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n            if (escMatch) {\n                titleElement.innerText = '';\n                titleElement.append(strings.ltrim(replaceDoubleEscapes(cleanLabel.substr(0, escMatch.index)), ' '), $('mnemonic', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(cleanLabel.substr(escMatch.index + escMatch[0].length)), ' '));\n            }\n            else {\n                titleElement.innerText = replaceDoubleEscapes(cleanLabel).trim();\n            }\n        }\n        else {\n            titleElement.innerText = cleanMenuLabel.replace(/&&/g, '&');\n        }\n        const mnemonicMatches = MENU_MNEMONIC_REGEX.exec(label);\n        if (mnemonicMatches) {\n            const mnemonic = !!mnemonicMatches[1] ? mnemonicMatches[1] : mnemonicMatches[3];\n            if (this.options.enableMnemonics) {\n                buttonElement.setAttribute('aria-keyshortcuts', 'Alt+' + mnemonic.toLocaleLowerCase());\n            }\n            else {\n                buttonElement.removeAttribute('aria-keyshortcuts');\n            }\n        }\n    }\n    update(options) {\n        if (options) {\n            this.options = options;\n        }\n        if (this.isFocused) {\n            this.updatePending = true;\n            return;\n        }\n        this.menus.forEach(menuBarMenu => {\n            if (!menuBarMenu.buttonElement || !menuBarMenu.titleElement) {\n                return;\n            }\n            this.updateLabels(menuBarMenu.titleElement, menuBarMenu.buttonElement, menuBarMenu.label);\n        });\n        if (!this.overflowLayoutScheduled) {\n            this.overflowLayoutScheduled = dom.scheduleAtNextAnimationFrame(() => {\n                this.updateOverflowAction();\n                this.overflowLayoutScheduled = undefined;\n            });\n        }\n        this.setUnfocusedState();\n    }\n    registerMnemonic(menuIndex, mnemonic) {\n        this.mnemonics.set(mnemonic.toLocaleLowerCase(), menuIndex);\n    }\n    hideMenubar() {\n        if (this.container.style.display !== 'none') {\n            this.container.style.display = 'none';\n            this._onVisibilityChange.fire(false);\n        }\n    }\n    showMenubar() {\n        if (this.container.style.display !== 'flex') {\n            this.container.style.display = 'flex';\n            this._onVisibilityChange.fire(true);\n            this.updateOverflowAction();\n        }\n    }\n    get focusState() {\n        return this._focusState;\n    }\n    set focusState(value) {\n        if (this._focusState >= MenubarState.FOCUSED && value < MenubarState.FOCUSED) {\n            if (this.updatePending) {\n                this.menuUpdater.schedule();\n                this.updatePending = false;\n            }\n        }\n        if (value === this._focusState) {\n            return;\n        }\n        const isVisible = this.isVisible;\n        const isOpen = this.isOpen;\n        const isFocused = this.isFocused;\n        this._focusState = value;\n        switch (value) {\n            case MenubarState.HIDDEN:\n                if (isVisible) {\n                    this.hideMenubar();\n                }\n                if (isOpen) {\n                    this.cleanupCustomMenu();\n                }\n                if (isFocused) {\n                    this.focusedMenu = undefined;\n                    if (this.focusToReturn) {\n                        this.focusToReturn.focus();\n                        this.focusToReturn = undefined;\n                    }\n                }\n                break;\n            case MenubarState.VISIBLE:\n                if (!isVisible) {\n                    this.showMenubar();\n                }\n                if (isOpen) {\n                    this.cleanupCustomMenu();\n                }\n                if (isFocused) {\n                    if (this.focusedMenu) {\n                        if (this.focusedMenu.index === MenuBar.OVERFLOW_INDEX) {\n                            this.overflowMenu.buttonElement.blur();\n                        }\n                        else {\n                            this.menus[this.focusedMenu.index].buttonElement?.blur();\n                        }\n                    }\n                    this.focusedMenu = undefined;\n                    if (this.focusToReturn) {\n                        this.focusToReturn.focus();\n                        this.focusToReturn = undefined;\n                    }\n                }\n                break;\n            case MenubarState.FOCUSED:\n                if (!isVisible) {\n                    this.showMenubar();\n                }\n                if (isOpen) {\n                    this.cleanupCustomMenu();\n                }\n                if (this.focusedMenu) {\n                    if (this.focusedMenu.index === MenuBar.OVERFLOW_INDEX) {\n                        this.overflowMenu.buttonElement.focus();\n                    }\n                    else {\n                        this.menus[this.focusedMenu.index].buttonElement?.focus();\n                    }\n                }\n                break;\n            case MenubarState.OPEN:\n                if (!isVisible) {\n                    this.showMenubar();\n                }\n                if (this.focusedMenu) {\n                    this.showCustomMenu(this.focusedMenu.index, this.openedViaKeyboard);\n                }\n                break;\n        }\n        this._focusState = value;\n        this._onFocusStateChange.fire(this.focusState >= MenubarState.FOCUSED);\n    }\n    get isVisible() {\n        return this.focusState >= MenubarState.VISIBLE;\n    }\n    get isFocused() {\n        return this.focusState >= MenubarState.FOCUSED;\n    }\n    get isOpen() {\n        return this.focusState >= MenubarState.OPEN;\n    }\n    get hasOverflow() {\n        return this.isCompact || this.numMenusShown < this.menus.length;\n    }\n    get isCompact() {\n        return this.options.compactMode !== undefined;\n    }\n    setUnfocusedState() {\n        if (this.options.visibility === 'toggle' || this.options.visibility === 'hidden') {\n            this.focusState = MenubarState.HIDDEN;\n        }\n        else if (this.options.visibility === 'classic' && browser.isFullscreen()) {\n            this.focusState = MenubarState.HIDDEN;\n        }\n        else {\n            this.focusState = MenubarState.VISIBLE;\n        }\n        this.ignoreNextMouseUp = false;\n        this.mnemonicsInUse = false;\n        this.updateMnemonicVisibility(false);\n    }\n    focusPrevious() {\n        if (!this.focusedMenu || this.numMenusShown === 0) {\n            return;\n        }\n        let newFocusedIndex = (this.focusedMenu.index - 1 + this.numMenusShown) % this.numMenusShown;\n        if (this.focusedMenu.index === MenuBar.OVERFLOW_INDEX) {\n            newFocusedIndex = this.numMenusShown - 1;\n        }\n        else if (this.focusedMenu.index === 0 && this.hasOverflow) {\n            newFocusedIndex = MenuBar.OVERFLOW_INDEX;\n        }\n        if (newFocusedIndex === this.focusedMenu.index) {\n            return;\n        }\n        if (this.isOpen) {\n            this.cleanupCustomMenu();\n            this.showCustomMenu(newFocusedIndex);\n        }\n        else if (this.isFocused) {\n            this.focusedMenu.index = newFocusedIndex;\n            if (newFocusedIndex === MenuBar.OVERFLOW_INDEX) {\n                this.overflowMenu.buttonElement.focus();\n            }\n            else {\n                this.menus[newFocusedIndex].buttonElement?.focus();\n            }\n        }\n    }\n    focusNext() {\n        if (!this.focusedMenu || this.numMenusShown === 0) {\n            return;\n        }\n        let newFocusedIndex = (this.focusedMenu.index + 1) % this.numMenusShown;\n        if (this.focusedMenu.index === MenuBar.OVERFLOW_INDEX) {\n            newFocusedIndex = 0;\n        }\n        else if (this.focusedMenu.index === this.numMenusShown - 1) {\n            newFocusedIndex = MenuBar.OVERFLOW_INDEX;\n        }\n        if (newFocusedIndex === this.focusedMenu.index) {\n            return;\n        }\n        if (this.isOpen) {\n            this.cleanupCustomMenu();\n            this.showCustomMenu(newFocusedIndex);\n        }\n        else if (this.isFocused) {\n            this.focusedMenu.index = newFocusedIndex;\n            if (newFocusedIndex === MenuBar.OVERFLOW_INDEX) {\n                this.overflowMenu.buttonElement.focus();\n            }\n            else {\n                this.menus[newFocusedIndex].buttonElement?.focus();\n            }\n        }\n    }\n    updateMnemonicVisibility(visible) {\n        if (this.menus) {\n            this.menus.forEach(menuBarMenu => {\n                if (menuBarMenu.titleElement && menuBarMenu.titleElement.children.length) {\n                    const child = menuBarMenu.titleElement.children.item(0);\n                    if (child) {\n                        child.style.textDecoration = (this.options.alwaysOnMnemonics || visible) ? 'underline' : '';\n                    }\n                }\n            });\n        }\n    }\n    get mnemonicsInUse() {\n        return this._mnemonicsInUse;\n    }\n    set mnemonicsInUse(value) {\n        this._mnemonicsInUse = value;\n    }\n    get shouldAltKeyFocus() {\n        if (isMacintosh) {\n            return false;\n        }\n        if (!this.options.disableAltFocus) {\n            return true;\n        }\n        if (this.options.visibility === 'toggle') {\n            return true;\n        }\n        return false;\n    }\n    get onVisibilityChange() {\n        return this._onVisibilityChange.event;\n    }\n    get onFocusStateChange() {\n        return this._onFocusStateChange.event;\n    }\n    onMenuTriggered(menuIndex, clicked) {\n        if (this.isOpen) {\n            if (this.isCurrentMenu(menuIndex)) {\n                this.setUnfocusedState();\n            }\n            else {\n                this.cleanupCustomMenu();\n                this.showCustomMenu(menuIndex, this.openedViaKeyboard);\n            }\n        }\n        else {\n            this.focusedMenu = { index: menuIndex };\n            this.openedViaKeyboard = !clicked;\n            this.focusState = MenubarState.OPEN;\n        }\n    }\n    onModifierKeyToggled(modifierKeyStatus) {\n        const allModifiersReleased = !modifierKeyStatus.altKey && !modifierKeyStatus.ctrlKey && !modifierKeyStatus.shiftKey && !modifierKeyStatus.metaKey;\n        if (this.options.visibility === 'hidden') {\n            return;\n        }\n        if (modifierKeyStatus.event && this.shouldAltKeyFocus) {\n            if (ScanCodeUtils.toEnum(modifierKeyStatus.event.code) === 159 ) {\n                modifierKeyStatus.event.preventDefault();\n            }\n        }\n        if (this.isFocused && modifierKeyStatus.lastKeyPressed === 'alt' && modifierKeyStatus.altKey) {\n            this.setUnfocusedState();\n            this.mnemonicsInUse = false;\n            this.awaitingAltRelease = true;\n        }\n        if (allModifiersReleased && modifierKeyStatus.lastKeyPressed === 'alt' && modifierKeyStatus.lastKeyReleased === 'alt') {\n            if (!this.awaitingAltRelease) {\n                if (!this.isFocused && this.shouldAltKeyFocus) {\n                    this.mnemonicsInUse = true;\n                    this.focusedMenu = { index: this.numMenusShown > 0 ? 0 : MenuBar.OVERFLOW_INDEX };\n                    this.focusState = MenubarState.FOCUSED;\n                }\n                else if (!this.isOpen) {\n                    this.setUnfocusedState();\n                }\n            }\n        }\n        if (!modifierKeyStatus.altKey && modifierKeyStatus.lastKeyReleased === 'alt') {\n            this.awaitingAltRelease = false;\n        }\n        if (this.options.enableMnemonics && this.menus && !this.isOpen) {\n            this.updateMnemonicVisibility((!this.awaitingAltRelease && modifierKeyStatus.altKey) || this.mnemonicsInUse);\n        }\n    }\n    isCurrentMenu(menuIndex) {\n        if (!this.focusedMenu) {\n            return false;\n        }\n        return this.focusedMenu.index === menuIndex;\n    }\n    cleanupCustomMenu() {\n        if (this.focusedMenu) {\n            if (this.focusedMenu.index === MenuBar.OVERFLOW_INDEX) {\n                this.overflowMenu.buttonElement.focus();\n            }\n            else {\n                this.menus[this.focusedMenu.index].buttonElement?.focus();\n            }\n            if (this.focusedMenu.holder) {\n                this.focusedMenu.holder.parentElement?.classList.remove('open');\n                this.focusedMenu.holder.remove();\n            }\n            this.focusedMenu.widget?.dispose();\n            this.focusedMenu = { index: this.focusedMenu.index };\n        }\n    }\n    showCustomMenu(menuIndex, selectFirst = true) {\n        const actualMenuIndex = menuIndex >= this.numMenusShown ? MenuBar.OVERFLOW_INDEX : menuIndex;\n        const customMenu = actualMenuIndex === MenuBar.OVERFLOW_INDEX ? this.overflowMenu : this.menus[actualMenuIndex];\n        if (!customMenu.actions || !customMenu.buttonElement || !customMenu.titleElement) {\n            return;\n        }\n        const menuHolder = $('div.menubar-menu-items-holder', { 'title': '' });\n        customMenu.buttonElement.classList.add('open');\n        const titleBoundingRect = customMenu.titleElement.getBoundingClientRect();\n        const titleBoundingRectZoom = dom.getDomNodeZoomLevel(customMenu.titleElement);\n        if (this.options.compactMode === Direction.Right) {\n            menuHolder.style.top = `${titleBoundingRect.top}px`;\n            menuHolder.style.left = `${titleBoundingRect.left + this.container.clientWidth}px`;\n        }\n        else if (this.options.compactMode === Direction.Left) {\n            menuHolder.style.top = `${titleBoundingRect.top}px`;\n            menuHolder.style.right = `${this.container.clientWidth}px`;\n            menuHolder.style.left = 'auto';\n        }\n        else {\n            menuHolder.style.top = `${titleBoundingRect.bottom * titleBoundingRectZoom}px`;\n            menuHolder.style.left = `${titleBoundingRect.left * titleBoundingRectZoom}px`;\n        }\n        customMenu.buttonElement.appendChild(menuHolder);\n        const menuOptions = {\n            getKeyBinding: this.options.getKeybinding,\n            actionRunner: this.actionRunner,\n            enableMnemonics: this.options.alwaysOnMnemonics || (this.mnemonicsInUse && this.options.enableMnemonics),\n            ariaLabel: withNullAsUndefined(customMenu.buttonElement.getAttribute('aria-label')),\n            expandDirection: this.isCompact ? this.options.compactMode : Direction.Right,\n            useEventAsContext: true\n        };\n        const menuWidget = this._register(( new Menu(menuHolder, customMenu.actions, menuOptions, this.menuStyle)));\n        this._register(menuWidget.onDidCancel(() => {\n            this.focusState = MenubarState.FOCUSED;\n        }));\n        if (actualMenuIndex !== menuIndex) {\n            menuWidget.trigger(menuIndex - this.numMenusShown);\n        }\n        else {\n            menuWidget.focus(selectFirst);\n        }\n        this.focusedMenu = {\n            index: actualMenuIndex,\n            holder: menuHolder,\n            widget: menuWidget\n        };\n    }\n}\nexport { MenuBar };\n","function isFolderBackupInfo(curr) {\n    return curr && curr.hasOwnProperty('folderUri');\n}\nfunction isWorkspaceBackupInfo(curr) {\n    return curr && curr.hasOwnProperty('workspace');\n}\nexport { isFolderBackupInfo, isWorkspaceBackupInfo };\n","import { localize } from 'monaco-editor/esm/vs/nls.js';\nimport '../../../../../override/vs/platform/dialogs/common/dialogs.js';\nimport { MenuId, Action2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IsDevelopmentContext } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkeys.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nimport { KeybindingsRegistry } from 'monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js';\nimport { IQuickInputService } from 'monaco-editor/esm/vs/platform/quickinput/common/quickInput.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { ILabelService } from 'monaco-editor/esm/vs/platform/label/common/label.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { IModelService } from 'monaco-editor/esm/vs/editor/common/services/model.js';\nimport { ILanguageService } from 'monaco-editor/esm/vs/editor/common/languages/language.js';\nimport { IWorkspacesService, isRecentFolder, isRecentWorkspace } from '../../../platform/workspaces/common/workspaces.js';\nimport { getIconClasses } from 'monaco-editor/esm/vs/editor/common/services/getIconClasses.js';\nimport { FileKind } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { splitRecentLabel } from 'monaco-editor/esm/vs/base/common/labels.js';\nimport { isMacintosh } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { getQuickNavigateHandler, inQuickPickContext } from '../quickaccess.js';\nimport { IHostService } from '../../services/host/browser/host.js';\nimport { ResourceMap } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { CommandsRegistry } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { isFolderBackupInfo, isWorkspaceBackupInfo } from '../../../platform/backup/common/backup.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nconst inRecentFilesPickerContextKey = 'inRecentFilesPicker';\nclass BaseOpenRecentAction extends Action2 {\n    constructor(desc) {\n        super(desc);\n        this.removeFromRecentlyOpened = {\n            iconClass: ThemeIcon.asClassName(Codicon.removeClose),\n            tooltip: ( localize('remove', \"Remove from Recently Opened\"))\n        };\n        this.dirtyRecentlyOpenedFolder = {\n            iconClass: 'dirty-workspace ' + ThemeIcon.asClassName(Codicon.closeDirty),\n            tooltip: ( localize('dirtyRecentlyOpenedFolder', \"Folder With Unsaved Files\")),\n            alwaysVisible: true\n        };\n        this.dirtyRecentlyOpenedWorkspace = {\n            ...this.dirtyRecentlyOpenedFolder,\n            tooltip: ( localize('dirtyRecentlyOpenedWorkspace', \"Workspace With Unsaved Files\")),\n        };\n    }\n    async run(accessor) {\n        const workspacesService = accessor.get(IWorkspacesService);\n        const quickInputService = accessor.get(IQuickInputService);\n        const contextService = accessor.get(IWorkspaceContextService);\n        const labelService = accessor.get(ILabelService);\n        const keybindingService = accessor.get(IKeybindingService);\n        const modelService = accessor.get(IModelService);\n        const languageService = accessor.get(ILanguageService);\n        const hostService = accessor.get(IHostService);\n        const dialogService = accessor.get(IDialogService);\n        const recentlyOpened = await workspacesService.getRecentlyOpened();\n        const dirtyWorkspacesAndFolders = await workspacesService.getDirtyWorkspaces();\n        let hasWorkspaces = false;\n        const dirtyFolders = ( new ResourceMap());\n        const dirtyWorkspaces = ( new ResourceMap());\n        for (const dirtyWorkspace of dirtyWorkspacesAndFolders) {\n            if (isFolderBackupInfo(dirtyWorkspace)) {\n                dirtyFolders.set(dirtyWorkspace.folderUri, true);\n            }\n            else {\n                dirtyWorkspaces.set(dirtyWorkspace.workspace.configPath, dirtyWorkspace.workspace);\n                hasWorkspaces = true;\n            }\n        }\n        const recentFolders = ( new ResourceMap());\n        const recentWorkspaces = ( new ResourceMap());\n        for (const recent of recentlyOpened.workspaces) {\n            if (isRecentFolder(recent)) {\n                recentFolders.set(recent.folderUri, true);\n            }\n            else {\n                recentWorkspaces.set(recent.workspace.configPath, recent.workspace);\n                hasWorkspaces = true;\n            }\n        }\n        const workspacePicks = [];\n        for (const recent of recentlyOpened.workspaces) {\n            const isDirty = isRecentFolder(recent) ? ( dirtyFolders.has(recent.folderUri)) : ( dirtyWorkspaces.has(recent.workspace.configPath));\n            workspacePicks.push(this.toQuickPick(modelService, languageService, labelService, recent, isDirty));\n        }\n        for (const dirtyWorkspaceOrFolder of dirtyWorkspacesAndFolders) {\n            if (isFolderBackupInfo(dirtyWorkspaceOrFolder) && !( recentFolders.has(dirtyWorkspaceOrFolder.folderUri))) {\n                workspacePicks.push(this.toQuickPick(modelService, languageService, labelService, dirtyWorkspaceOrFolder, true));\n            }\n            else if (isWorkspaceBackupInfo(dirtyWorkspaceOrFolder) && !( recentWorkspaces.has(dirtyWorkspaceOrFolder.workspace.configPath))) {\n                workspacePicks.push(this.toQuickPick(modelService, languageService, labelService, dirtyWorkspaceOrFolder, true));\n            }\n        }\n        const filePicks = ( recentlyOpened.files.map(\n            p => this.toQuickPick(modelService, languageService, labelService, p, false)\n        ));\n        const firstEntry = recentlyOpened.workspaces[0];\n        const autoFocusSecondEntry = firstEntry && contextService.isCurrentWorkspace(isRecentWorkspace(firstEntry) ? firstEntry.workspace : firstEntry.folderUri);\n        let keyMods;\n        const workspaceSeparator = { type: 'separator', label: hasWorkspaces ? ( localize('workspacesAndFolders', \"folders & workspaces\")) : ( localize('folders', \"folders\")) };\n        const fileSeparator = { type: 'separator', label: ( localize('files', \"files\")) };\n        const picks = [workspaceSeparator, ...workspacePicks, fileSeparator, ...filePicks];\n        const pick = await quickInputService.pick(picks, {\n            contextKey: inRecentFilesPickerContextKey,\n            activeItem: [...workspacePicks, ...filePicks][autoFocusSecondEntry ? 1 : 0],\n            placeHolder: isMacintosh ? ( localize(\n                'openRecentPlaceholderMac',\n                \"Select to open (hold Cmd-key to force new window or Option-key for same window)\"\n            )) : ( localize(\n                'openRecentPlaceholder',\n                \"Select to open (hold Ctrl-key to force new window or Alt-key for same window)\"\n            )),\n            matchOnDescription: true,\n            onKeyMods: mods => keyMods = mods,\n            quickNavigate: this.isQuickNavigate() ? { keybindings: keybindingService.lookupKeybindings(this.desc.id) } : undefined,\n            hideInput: this.isQuickNavigate(),\n            onDidTriggerItemButton: async (context) => {\n                if (context.button === this.removeFromRecentlyOpened) {\n                    await workspacesService.removeRecentlyOpened([context.item.resource]);\n                    context.removeItem();\n                }\n                else if (context.button === this.dirtyRecentlyOpenedFolder || context.button === this.dirtyRecentlyOpenedWorkspace) {\n                    const isDirtyWorkspace = context.button === this.dirtyRecentlyOpenedWorkspace;\n                    const { confirmed } = await dialogService.confirm({\n                        title: isDirtyWorkspace ? ( localize('dirtyWorkspace', \"Workspace with Unsaved Files\")) : ( localize('dirtyFolder', \"Folder with Unsaved Files\")),\n                        message: isDirtyWorkspace ? ( localize(\n                            'dirtyWorkspaceConfirm',\n                            \"Do you want to open the workspace to review the unsaved files?\"\n                        )) : ( localize(\n                            'dirtyFolderConfirm',\n                            \"Do you want to open the folder to review the unsaved files?\"\n                        )),\n                        detail: isDirtyWorkspace ? ( localize(\n                            'dirtyWorkspaceConfirmDetail',\n                            \"Workspaces with unsaved files cannot be removed until all unsaved files have been saved or reverted.\"\n                        )) : ( localize(\n                            'dirtyFolderConfirmDetail',\n                            \"Folders with unsaved files cannot be removed until all unsaved files have been saved or reverted.\"\n                        ))\n                    });\n                    if (confirmed) {\n                        hostService.openWindow([context.item.openable], {\n                            remoteAuthority: context.item.remoteAuthority || null\n                        });\n                        quickInputService.cancel();\n                    }\n                }\n            }\n        });\n        if (pick) {\n            return hostService.openWindow([pick.openable], {\n                forceNewWindow: keyMods?.ctrlCmd,\n                forceReuseWindow: keyMods?.alt,\n                remoteAuthority: pick.remoteAuthority || null\n            });\n        }\n    }\n    toQuickPick(modelService, languageService, labelService, recent, isDirty) {\n        let openable;\n        let iconClasses;\n        let fullLabel;\n        let resource;\n        let isWorkspace = false;\n        if (isRecentFolder(recent)) {\n            resource = recent.folderUri;\n            iconClasses = getIconClasses(modelService, languageService, resource, FileKind.FOLDER);\n            openable = { folderUri: resource };\n            fullLabel = recent.label || labelService.getWorkspaceLabel(resource, { verbose: 2  });\n        }\n        else if (isRecentWorkspace(recent)) {\n            resource = recent.workspace.configPath;\n            iconClasses = getIconClasses(modelService, languageService, resource, FileKind.ROOT_FOLDER);\n            openable = { workspaceUri: resource };\n            fullLabel = recent.label || labelService.getWorkspaceLabel(recent.workspace, { verbose: 2  });\n            isWorkspace = true;\n        }\n        else {\n            resource = recent.fileUri;\n            iconClasses = getIconClasses(modelService, languageService, resource, FileKind.FILE);\n            openable = { fileUri: resource };\n            fullLabel = recent.label || labelService.getUriLabel(resource);\n        }\n        const { name, parentPath } = splitRecentLabel(fullLabel);\n        return {\n            iconClasses,\n            label: name,\n            ariaLabel: isDirty ? isWorkspace ? ( localize(\n                'recentDirtyWorkspaceAriaLabel',\n                \"{0}, workspace with unsaved changes\",\n                name\n            )) : ( localize('recentDirtyFolderAriaLabel', \"{0}, folder with unsaved changes\", name)) : name,\n            description: parentPath,\n            buttons: isDirty ? [isWorkspace ? this.dirtyRecentlyOpenedWorkspace : this.dirtyRecentlyOpenedFolder] : [this.removeFromRecentlyOpened],\n            openable,\n            resource,\n            remoteAuthority: recent.remoteAuthority\n        };\n    }\n}\nclass OpenRecentAction extends BaseOpenRecentAction {\n    static { this.ID = 'workbench.action.openRecent'; }\n    constructor() {\n        super({\n            id: OpenRecentAction.ID,\n            title: {\n                value: ( localize('openRecent', \"Open Recent...\")),\n                mnemonicTitle: ( localize({ key: 'miMore', comment: ['&& denotes a mnemonic'] }, \"&&More...\")),\n                original: 'Open Recent...'\n            },\n            category: Categories.File,\n            f1: true,\n            keybinding: {\n                weight: 200 ,\n                primary: 2048  | 48 ,\n                mac: { primary: 256  | 48  }\n            },\n            menu: {\n                id: MenuId.MenubarRecentMenu,\n                group: 'y_more',\n                order: 1\n            }\n        });\n    }\n    isQuickNavigate() {\n        return false;\n    }\n}\nclass ReloadWindowAction extends Action2 {\n    static { this.ID = 'workbench.action.reloadWindow'; }\n    constructor() {\n        super({\n            id: ReloadWindowAction.ID,\n            title: { value: ( localize('reloadWindow', \"Reload Window\")), original: 'Reload Window' },\n            category: Categories.Developer,\n            f1: true,\n            keybinding: {\n                weight: 200  + 50,\n                when: IsDevelopmentContext,\n                primary: 2048  | 48\n            }\n        });\n    }\n    run(accessor) {\n        const hostService = accessor.get(IHostService);\n        return hostService.reload();\n    }\n}\nconst recentFilesPickerContext = ( ContextKeyExpr.and(inQuickPickContext, ( ContextKeyExpr.has(inRecentFilesPickerContextKey))));\nconst quickPickNavigateNextInRecentFilesPickerId = 'workbench.action.quickOpenNavigateNextInRecentFilesPicker';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: quickPickNavigateNextInRecentFilesPickerId,\n    weight: 200  + 50,\n    handler: getQuickNavigateHandler(quickPickNavigateNextInRecentFilesPickerId, true),\n    when: recentFilesPickerContext,\n    primary: 2048  | 48 ,\n    mac: { primary: 256  | 48  }\n});\nconst quickPickNavigatePreviousInRecentFilesPicker = 'workbench.action.quickOpenNavigatePreviousInRecentFilesPicker';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: quickPickNavigatePreviousInRecentFilesPicker,\n    weight: 200  + 50,\n    handler: getQuickNavigateHandler(quickPickNavigatePreviousInRecentFilesPicker, false),\n    when: recentFilesPickerContext,\n    primary: 2048  | 1024  | 48 ,\n    mac: { primary: 256  | 1024  | 48  }\n});\nCommandsRegistry.registerCommand('workbench.action.toggleConfirmBeforeClose', accessor => {\n    const configurationService = accessor.get(IConfigurationService);\n    const setting = configurationService.inspect('window.confirmBeforeClose').userValue;\n    return configurationService.updateValue('window.confirmBeforeClose', setting === 'never' ? 'keyboardOnly' : 'never');\n});\nexport { OpenRecentAction, ReloadWindowAction, inRecentFilesPickerContextKey };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/menubarControl.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { MenuRegistry, MenuId, SubmenuItemAction, registerAction2, Action2, MenuItemAction, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { getMenuBarVisibility, getTitleBarStyle } from '../../../../platform/window/common/window.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { Separator, Action, ActionRunner, SubmenuAction } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { addDisposableListener, EventType, Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { isMacintosh, isNative, isWeb, isIOS } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { isRecentFolder, isRecentWorkspace, IWorkspacesService } from '../../../../platform/workspaces/common/workspaces.js';\nimport { RunOnceScheduler } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { ILabelService } from 'monaco-editor/esm/vs/platform/label/common/label.js';\nimport { IUpdateService } from '../../../../platform/update/common/update.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { Severity, INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { MenuBar } from '../../../../base/browser/ui/menu/menubar.js';\nimport { Direction } from 'monaco-editor/esm/vs/base/browser/ui/menu/menu.js';\nimport { unmnemonicLabel, mnemonicMenuLabel } from 'monaco-editor/esm/vs/base/common/labels.js';\nimport { IAccessibilityService } from 'monaco-editor/esm/vs/platform/accessibility/common/accessibility.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { isFullscreen } from 'monaco-editor/esm/vs/base/browser/browser.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { BrowserFeatures } from 'monaco-editor/esm/vs/base/browser/canIUse.js';\nimport { IsMacNativeContext, IsWebContext } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkeys.js';\nimport { ICommandService } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { OpenRecentAction } from '../../actions/windowActions.js';\nimport { isICommandActionToggleInfo } from 'monaco-editor/esm/vs/platform/action/common/action.js';\nimport { createAndFillInContextMenuActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nimport { defaultMenuStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarFileMenu,\n    title: {\n        value: 'File',\n        original: 'File',\n        mnemonicTitle: ( localize({ key: 'mFile', comment: ['&& denotes a mnemonic'] }, \"&&File\")),\n    },\n    order: 1\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarEditMenu,\n    title: {\n        value: 'Edit',\n        original: 'Edit',\n        mnemonicTitle: ( localize({ key: 'mEdit', comment: ['&& denotes a mnemonic'] }, \"&&Edit\"))\n    },\n    order: 2\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarSelectionMenu,\n    title: {\n        value: 'Selection',\n        original: 'Selection',\n        mnemonicTitle: ( localize({ key: 'mSelection', comment: ['&& denotes a mnemonic'] }, \"&&Selection\"))\n    },\n    order: 3\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarViewMenu,\n    title: {\n        value: 'View',\n        original: 'View',\n        mnemonicTitle: ( localize({ key: 'mView', comment: ['&& denotes a mnemonic'] }, \"&&View\"))\n    },\n    order: 4\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarGoMenu,\n    title: {\n        value: 'Go',\n        original: 'Go',\n        mnemonicTitle: ( localize({ key: 'mGoto', comment: ['&& denotes a mnemonic'] }, \"&&Go\"))\n    },\n    order: 5\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarTerminalMenu,\n    title: {\n        value: 'Terminal',\n        original: 'Terminal',\n        mnemonicTitle: ( localize({ key: 'mTerminal', comment: ['&& denotes a mnemonic'] }, \"&&Terminal\"))\n    },\n    order: 7\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarHelpMenu,\n    title: {\n        value: 'Help',\n        original: 'Help',\n        mnemonicTitle: ( localize({ key: 'mHelp', comment: ['&& denotes a mnemonic'] }, \"&&Help\"))\n    },\n    order: 8\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n    submenu: MenuId.MenubarPreferencesMenu,\n    title: {\n        value: 'Preferences',\n        original: 'Preferences',\n        mnemonicTitle: ( localize({ key: 'mPreferences', comment: ['&& denotes a mnemonic'] }, \"Preferences\"))\n    },\n    when: IsMacNativeContext,\n    order: 9\n});\nclass MenubarControl extends Disposable {\n    static { this.MAX_MENU_RECENT_ENTRIES = 10; }\n    constructor(menuService, workspacesService, contextKeyService, keybindingService, configurationService, labelService, updateService, storageService, notificationService, preferencesService, environmentService, accessibilityService, hostService, commandService) {\n        super();\n        this.menuService = menuService;\n        this.workspacesService = workspacesService;\n        this.contextKeyService = contextKeyService;\n        this.keybindingService = keybindingService;\n        this.configurationService = configurationService;\n        this.labelService = labelService;\n        this.updateService = updateService;\n        this.storageService = storageService;\n        this.notificationService = notificationService;\n        this.preferencesService = preferencesService;\n        this.environmentService = environmentService;\n        this.accessibilityService = accessibilityService;\n        this.hostService = hostService;\n        this.commandService = commandService;\n        this.keys = [\n            'window.menuBarVisibility',\n            'window.enableMenuBarMnemonics',\n            'window.customMenuBarAltFocus',\n            'workbench.sideBar.location',\n            'window.nativeTabs'\n        ];\n        this.menus = {};\n        this.topLevelTitles = {};\n        this.recentlyOpened = { files: [], workspaces: [] };\n        this.mainMenu = this._register(this.menuService.createMenu(MenuId.MenubarMainMenu, this.contextKeyService));\n        this.mainMenuDisposables = this._register(( new DisposableStore()));\n        this.setupMainMenu();\n        this.menuUpdater = this._register(( new RunOnceScheduler(() => this.doUpdateMenubar(false), 200)));\n        this.notifyUserOfCustomMenubarAccessibility();\n    }\n    registerListeners() {\n        this._register(this.hostService.onDidChangeFocus(e => this.onDidChangeWindowFocus(e)));\n        this._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n        this.updateService.onStateChange(() => this.onUpdateStateChange());\n        this._register(this.workspacesService.onDidChangeRecentlyOpened(() => { this.onDidChangeRecentlyOpened(); }));\n        this._register(this.keybindingService.onDidUpdateKeybindings(() => this.updateMenubar()));\n        this._register(this.labelService.onDidChangeFormatters(() => { this.onDidChangeRecentlyOpened(); }));\n        this._register(this.mainMenu.onDidChange(() => { this.setupMainMenu(); this.doUpdateMenubar(true); }));\n    }\n    setupMainMenu() {\n        this.mainMenuDisposables.clear();\n        this.menus = {};\n        this.topLevelTitles = {};\n        const [, mainMenuActions] = this.mainMenu.getActions()[0];\n        for (const mainMenuAction of mainMenuActions) {\n            if (mainMenuAction instanceof SubmenuItemAction && typeof mainMenuAction.item.title !== 'string') {\n                this.menus[mainMenuAction.item.title.original] = this.mainMenuDisposables.add(this.menuService.createMenu(mainMenuAction.item.submenu, this.contextKeyService, { emitEventsForSubmenuChanges: true }));\n                this.topLevelTitles[mainMenuAction.item.title.original] = mainMenuAction.item.title.mnemonicTitle ?? mainMenuAction.item.title.value;\n            }\n        }\n    }\n    updateMenubar() {\n        this.menuUpdater.schedule();\n    }\n    calculateActionLabel(action) {\n        const label = action.label;\n        return label;\n    }\n    onUpdateStateChange() {\n        this.updateMenubar();\n    }\n    onUpdateKeybindings() {\n        this.updateMenubar();\n    }\n    getOpenRecentActions() {\n        if (!this.recentlyOpened) {\n            return [];\n        }\n        const { workspaces, files } = this.recentlyOpened;\n        const result = [];\n        if (workspaces.length > 0) {\n            for (let i = 0; i < MenubarControl.MAX_MENU_RECENT_ENTRIES && i < workspaces.length; i++) {\n                result.push(this.createOpenRecentMenuAction(workspaces[i]));\n            }\n            result.push(( new Separator()));\n        }\n        if (files.length > 0) {\n            for (let i = 0; i < MenubarControl.MAX_MENU_RECENT_ENTRIES && i < files.length; i++) {\n                result.push(this.createOpenRecentMenuAction(files[i]));\n            }\n            result.push(( new Separator()));\n        }\n        return result;\n    }\n    onDidChangeWindowFocus(hasFocus) {\n        if (hasFocus) {\n            this.onDidChangeRecentlyOpened();\n        }\n    }\n    onConfigurationUpdated(event) {\n        if (( this.keys.some(key => event.affectsConfiguration(key)))) {\n            this.updateMenubar();\n        }\n        if (event.affectsConfiguration('editor.accessibilitySupport')) {\n            this.notifyUserOfCustomMenubarAccessibility();\n        }\n        if (event.affectsConfiguration('window.menuBarVisibility')) {\n            this.onDidChangeRecentlyOpened();\n        }\n    }\n    get menubarHidden() {\n        return isMacintosh && isNative ? false : getMenuBarVisibility(this.configurationService) === 'hidden';\n    }\n    onDidChangeRecentlyOpened() {\n        if (!this.menubarHidden) {\n            this.workspacesService.getRecentlyOpened().then(recentlyOpened => {\n                this.recentlyOpened = recentlyOpened;\n                this.updateMenubar();\n            });\n        }\n    }\n    createOpenRecentMenuAction(recent) {\n        let label;\n        let uri;\n        let commandId;\n        let openable;\n        const remoteAuthority = recent.remoteAuthority;\n        if (isRecentFolder(recent)) {\n            uri = recent.folderUri;\n            label = recent.label || this.labelService.getWorkspaceLabel(uri, { verbose: 2  });\n            commandId = 'openRecentFolder';\n            openable = { folderUri: uri };\n        }\n        else if (isRecentWorkspace(recent)) {\n            uri = recent.workspace.configPath;\n            label = recent.label || this.labelService.getWorkspaceLabel(recent.workspace, { verbose: 2  });\n            commandId = 'openRecentWorkspace';\n            openable = { workspaceUri: uri };\n        }\n        else {\n            uri = recent.fileUri;\n            label = recent.label || this.labelService.getUriLabel(uri);\n            commandId = 'openRecentFile';\n            openable = { fileUri: uri };\n        }\n        const ret = ( new Action(commandId, unmnemonicLabel(label), undefined, undefined, event => {\n            const browserEvent = event;\n            const openInNewWindow = event && ((!isMacintosh && (browserEvent.ctrlKey || browserEvent.shiftKey)) || (isMacintosh && (browserEvent.metaKey || browserEvent.altKey)));\n            return this.hostService.openWindow([openable], {\n                forceNewWindow: !!openInNewWindow,\n                remoteAuthority: remoteAuthority || null\n            });\n        }));\n        return Object.assign(ret, { uri, remoteAuthority });\n    }\n    notifyUserOfCustomMenubarAccessibility() {\n        if (isWeb || isMacintosh) {\n            return;\n        }\n        const hasBeenNotified = this.storageService.getBoolean('menubar/accessibleMenubarNotified', -1 , false);\n        const usingCustomMenubar = getTitleBarStyle(this.configurationService) === 'custom';\n        if (hasBeenNotified || usingCustomMenubar || !this.accessibilityService.isScreenReaderOptimized()) {\n            return;\n        }\n        const message = ( localize(\n            'menubar.customTitlebarAccessibilityNotification',\n            \"Accessibility support is enabled for you. For the most accessible experience, we recommend the custom title bar style.\"\n        ));\n        this.notificationService.prompt(Severity.Info, message, [\n            {\n                label: ( localize('goToSetting', \"Open Settings\")),\n                run: () => {\n                    return this.preferencesService.openUserSettings({ query: 'window.titleBarStyle' });\n                }\n            }\n        ]);\n        this.storageService.store('menubar/accessibleMenubarNotified', true, -1 , 0 );\n    }\n}\nlet CustomMenubarControl = class CustomMenubarControl extends MenubarControl {\n    constructor(menuService, workspacesService, contextKeyService, keybindingService, configurationService, labelService, updateService, storageService, notificationService, preferencesService, environmentService, accessibilityService, layoutService, telemetryService, hostService, commandService) {\n        super(menuService, workspacesService, contextKeyService, keybindingService, configurationService, labelService, updateService, storageService, notificationService, preferencesService, environmentService, accessibilityService, hostService, commandService);\n        this.layoutService = layoutService;\n        this.telemetryService = telemetryService;\n        this.alwaysOnMnemonics = false;\n        this.focusInsideMenubar = false;\n        this.pendingFirstTimeUpdate = false;\n        this.visible = true;\n        this.webNavigationMenu = this._register(this.menuService.createMenu(MenuId.MenubarHomeMenu, this.contextKeyService));\n        this.reinstallDisposables = this._register(( new DisposableStore()));\n        this._onVisibilityChange = this._register(( new Emitter()));\n        this._onFocusStateChange = this._register(( new Emitter()));\n        this.actionRunner = this._register(( new ActionRunner()));\n        this.actionRunner.onDidRun(e => {\n            this.telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: 'menu' });\n        });\n        this.workspacesService.getRecentlyOpened().then((recentlyOpened) => {\n            this.recentlyOpened = recentlyOpened;\n        });\n        this.registerListeners();\n        this.registerActions();\n    }\n    doUpdateMenubar(firstTime) {\n        if (!this.focusInsideMenubar) {\n            this.setupCustomMenubar(firstTime);\n        }\n        if (firstTime) {\n            this.pendingFirstTimeUpdate = true;\n        }\n    }\n    registerActions() {\n        const that = this;\n        if (isWeb) {\n            this._register(registerAction2(class extends Action2 {\n                constructor() {\n                    super({\n                        id: `workbench.actions.menubar.focus`,\n                        title: { value: ( localize('focusMenu', \"Focus Application Menu\")), original: 'Focus Application Menu' },\n                        keybinding: {\n                            primary: 68 ,\n                            weight: 200 ,\n                            when: IsWebContext\n                        },\n                        f1: true\n                    });\n                }\n                async run() {\n                    that.menubar?.toggleFocus();\n                }\n            }));\n        }\n    }\n    getUpdateAction() {\n        const state = this.updateService.state;\n        switch (state.type) {\n            case \"idle\" :\n                return ( new Action('update.check', ( localize(\n                    { key: 'checkForUpdates', comment: ['&& denotes a mnemonic'] },\n                    \"Check for &&Updates...\"\n                )), undefined, true, () => this.updateService.checkForUpdates(true)));\n            case \"checking for updates\" :\n                return ( new Action('update.checking', ( localize('checkingForUpdates', \"Checking for Updates...\")), undefined, false));\n            case \"available for download\" :\n                return ( new Action('update.downloadNow', ( localize(\n                    { key: 'download now', comment: ['&& denotes a mnemonic'] },\n                    \"D&&ownload Update\"\n                )), undefined, true, () => this.updateService.downloadUpdate()));\n            case \"downloading\" :\n                return ( new Action('update.downloading', ( localize('DownloadingUpdate', \"Downloading Update...\")), undefined, false));\n            case \"downloaded\" :\n                return ( new Action('update.install', ( localize(\n                    { key: 'installUpdate...', comment: ['&& denotes a mnemonic'] },\n                    \"Install &&Update...\"\n                )), undefined, true, () => this.updateService.applyUpdate()));\n            case \"updating\" :\n                return ( new Action('update.updating', ( localize('installingUpdate', \"Installing Update...\")), undefined, false));\n            case \"ready\" :\n                return ( new Action('update.restart', ( localize(\n                    { key: 'restartToUpdate', comment: ['&& denotes a mnemonic'] },\n                    \"Restart to &&Update\"\n                )), undefined, true, () => this.updateService.quitAndInstall()));\n            default:\n                return null;\n        }\n    }\n    get currentMenubarVisibility() {\n        return getMenuBarVisibility(this.configurationService);\n    }\n    get currentDisableMenuBarAltFocus() {\n        const settingValue = this.configurationService.getValue('window.customMenuBarAltFocus');\n        let disableMenuBarAltBehavior = false;\n        if (typeof settingValue === 'boolean') {\n            disableMenuBarAltBehavior = !settingValue;\n        }\n        return disableMenuBarAltBehavior;\n    }\n    insertActionsBefore(nextAction, target) {\n        switch (nextAction.id) {\n            case OpenRecentAction.ID:\n                target.push(...this.getOpenRecentActions());\n                break;\n            case 'workbench.action.showAboutDialog':\n                if (!isMacintosh && !isWeb) {\n                    const updateAction = this.getUpdateAction();\n                    if (updateAction) {\n                        updateAction.label = mnemonicMenuLabel(updateAction.label);\n                        target.push(updateAction);\n                        target.push(( new Separator()));\n                    }\n                }\n                break;\n        }\n    }\n    get currentEnableMenuBarMnemonics() {\n        let enableMenuBarMnemonics = this.configurationService.getValue('window.enableMenuBarMnemonics');\n        if (typeof enableMenuBarMnemonics !== 'boolean') {\n            enableMenuBarMnemonics = true;\n        }\n        return enableMenuBarMnemonics && (!isWeb || isFullscreen());\n    }\n    get currentCompactMenuMode() {\n        if (this.currentMenubarVisibility !== 'compact') {\n            return undefined;\n        }\n        const currentSidebarLocation = this.configurationService.getValue('workbench.sideBar.location');\n        return currentSidebarLocation === 'right' ? Direction.Left : Direction.Right;\n    }\n    onDidVisibilityChange(visible) {\n        this.visible = visible;\n        this.onDidChangeRecentlyOpened();\n        this._onVisibilityChange.fire(visible);\n    }\n    toActionsArray(menu) {\n        const result = [];\n        createAndFillInContextMenuActions(menu, { shouldForwardArgs: true }, result);\n        return result;\n    }\n    setupCustomMenubar(firstTime) {\n        if (!this.container) {\n            return;\n        }\n        if (firstTime) {\n            if (this.menubar) {\n                this.reinstallDisposables.clear();\n            }\n            this.menubar = this.reinstallDisposables.add(( new MenuBar(this.container, this.getMenuBarOptions(), defaultMenuStyles)));\n            this.accessibilityService.alwaysUnderlineAccessKeys().then(val => {\n                this.alwaysOnMnemonics = val;\n                this.menubar?.update(this.getMenuBarOptions());\n            });\n            this.reinstallDisposables.add(this.menubar.onFocusStateChange(focused => {\n                this._onFocusStateChange.fire(focused);\n                if (!focused) {\n                    if (this.pendingFirstTimeUpdate) {\n                        this.setupCustomMenubar(true);\n                        this.pendingFirstTimeUpdate = false;\n                    }\n                    else {\n                        this.updateMenubar();\n                    }\n                    this.focusInsideMenubar = false;\n                }\n            }));\n            this.reinstallDisposables.add(this.menubar.onVisibilityChange(e => this.onDidVisibilityChange(e)));\n            this.reinstallDisposables.add(addDisposableListener(this.container, EventType.FOCUS_IN, () => {\n                this.focusInsideMenubar = true;\n            }));\n            this.reinstallDisposables.add(addDisposableListener(this.container, EventType.FOCUS_OUT, () => {\n                this.focusInsideMenubar = false;\n            }));\n            if (this.menubar.isVisible) {\n                this.onDidVisibilityChange(true);\n            }\n        }\n        else {\n            this.menubar?.update(this.getMenuBarOptions());\n        }\n        const updateActions = (menuActions, target, topLevelTitle) => {\n            target.splice(0);\n            for (const menuItem of menuActions) {\n                this.insertActionsBefore(menuItem, target);\n                if (menuItem instanceof Separator) {\n                    target.push(menuItem);\n                }\n                else if (menuItem instanceof SubmenuItemAction || menuItem instanceof MenuItemAction) {\n                    let title = typeof menuItem.item.title === 'string'\n                        ? menuItem.item.title\n                        : menuItem.item.title.mnemonicTitle ?? menuItem.item.title.value;\n                    if (menuItem instanceof SubmenuItemAction) {\n                        const submenuActions = [];\n                        updateActions(menuItem.actions, submenuActions, topLevelTitle);\n                        if (submenuActions.length > 0) {\n                            target.push(( new SubmenuAction(menuItem.id, mnemonicMenuLabel(title), submenuActions)));\n                        }\n                    }\n                    else {\n                        if (isICommandActionToggleInfo(menuItem.item.toggled)) {\n                            title = menuItem.item.toggled.mnemonicTitle ?? menuItem.item.toggled.title ?? title;\n                        }\n                        const newAction = ( new Action(\n                            menuItem.id,\n                            mnemonicMenuLabel(title),\n                            menuItem.class,\n                            menuItem.enabled,\n                            () => this.commandService.executeCommand(menuItem.id)\n                        ));\n                        newAction.tooltip = menuItem.tooltip;\n                        newAction.checked = menuItem.checked;\n                        target.push(newAction);\n                    }\n                }\n            }\n            if (topLevelTitle === 'File' && this.currentCompactMenuMode === undefined) {\n                const webActions = this.getWebNavigationActions();\n                if (webActions.length) {\n                    target.push(...webActions);\n                }\n            }\n        };\n        for (const title of ( Object.keys(this.topLevelTitles))) {\n            const menu = this.menus[title];\n            if (firstTime && menu) {\n                this.reinstallDisposables.add(menu.onDidChange(() => {\n                    if (!this.focusInsideMenubar) {\n                        const actions = [];\n                        updateActions(this.toActionsArray(menu), actions, title);\n                        this.menubar?.updateMenu({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n                    }\n                }));\n                if (menu === this.menus.File) {\n                    this.reinstallDisposables.add(this.webNavigationMenu.onDidChange(() => {\n                        if (!this.focusInsideMenubar) {\n                            const actions = [];\n                            updateActions(this.toActionsArray(menu), actions, title);\n                            this.menubar?.updateMenu({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n                        }\n                    }));\n                }\n            }\n            const actions = [];\n            if (menu) {\n                updateActions(this.toActionsArray(menu), actions, title);\n            }\n            if (this.menubar) {\n                if (!firstTime) {\n                    this.menubar.updateMenu({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n                }\n                else {\n                    this.menubar.push({ actions: actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n                }\n            }\n        }\n    }\n    getWebNavigationActions() {\n        if (!isWeb) {\n            return [];\n        }\n        const webNavigationActions = [];\n        for (const groups of this.webNavigationMenu.getActions()) {\n            const [, actions] = groups;\n            for (const action of actions) {\n                if (action instanceof MenuItemAction) {\n                    const title = typeof action.item.title === 'string'\n                        ? action.item.title\n                        : action.item.title.mnemonicTitle ?? action.item.title.value;\n                    webNavigationActions.push(( new Action(\n                        action.id,\n                        mnemonicMenuLabel(title),\n                        action.class,\n                        action.enabled,\n                        async (event) => {\n                            this.commandService.executeCommand(action.id, event);\n                        }\n                    )));\n                }\n            }\n            webNavigationActions.push(( new Separator()));\n        }\n        if (webNavigationActions.length) {\n            webNavigationActions.pop();\n        }\n        return webNavigationActions;\n    }\n    getMenuBarOptions() {\n        return {\n            enableMnemonics: this.currentEnableMenuBarMnemonics,\n            disableAltFocus: this.currentDisableMenuBarAltFocus,\n            visibility: this.currentMenubarVisibility,\n            actionRunner: this.actionRunner,\n            getKeybinding: (action) => this.keybindingService.lookupKeybinding(action.id),\n            alwaysOnMnemonics: this.alwaysOnMnemonics,\n            compactMode: this.currentCompactMenuMode,\n            getCompactMenuActions: () => {\n                if (!isWeb) {\n                    return [];\n                }\n                return this.getWebNavigationActions();\n            }\n        };\n    }\n    onDidChangeWindowFocus(hasFocus) {\n        if (!this.visible) {\n            return;\n        }\n        super.onDidChangeWindowFocus(hasFocus);\n        if (this.container) {\n            if (hasFocus) {\n                this.container.classList.remove('inactive');\n            }\n            else {\n                this.container.classList.add('inactive');\n                this.menubar?.blur();\n            }\n        }\n    }\n    onUpdateStateChange() {\n        if (!this.visible) {\n            return;\n        }\n        super.onUpdateStateChange();\n    }\n    onDidChangeRecentlyOpened() {\n        if (!this.visible) {\n            return;\n        }\n        super.onDidChangeRecentlyOpened();\n    }\n    onUpdateKeybindings() {\n        if (!this.visible) {\n            return;\n        }\n        super.onUpdateKeybindings();\n    }\n    registerListeners() {\n        super.registerListeners();\n        this._register(addDisposableListener(window, EventType.RESIZE, () => {\n            if (this.menubar && !(isIOS && BrowserFeatures.pointerEvents)) {\n                this.menubar.blur();\n            }\n        }));\n        if (isWeb) {\n            this._register(this.layoutService.onDidChangeFullscreen(e => this.updateMenubar()));\n            this._register(this.webNavigationMenu.onDidChange(() => this.updateMenubar()));\n        }\n    }\n    get onVisibilityChange() {\n        return this._onVisibilityChange.event;\n    }\n    get onFocusStateChange() {\n        return this._onFocusStateChange.event;\n    }\n    getMenubarItemsDimensions() {\n        if (this.menubar) {\n            return ( new Dimension(this.menubar.getWidth(), this.menubar.getHeight()));\n        }\n        return ( new Dimension(0, 0));\n    }\n    create(parent) {\n        this.container = parent;\n        if (this.container) {\n            this.doUpdateMenubar(true);\n        }\n        return this.container;\n    }\n    layout(dimension) {\n        this.menubar?.update(this.getMenuBarOptions());\n    }\n    toggleFocus() {\n        this.menubar?.toggleFocus();\n    }\n};\nCustomMenubarControl = ( __decorate([\n    ( __param(0, IMenuService)),\n    ( __param(1, IWorkspacesService)),\n    ( __param(2, IContextKeyService)),\n    ( __param(3, IKeybindingService)),\n    ( __param(4, IConfigurationService)),\n    ( __param(5, ILabelService)),\n    ( __param(6, IUpdateService)),\n    ( __param(7, IStorageService)),\n    ( __param(8, INotificationService)),\n    ( __param(9, IPreferencesService)),\n    ( __param(10, IWorkbenchEnvironmentService)),\n    ( __param(11, IAccessibilityService)),\n    ( __param(12, IWorkbenchLayoutService)),\n    ( __param(13, ITelemetryService)),\n    ( __param(14, IHostService)),\n    ( __param(15, ICommandService))\n], CustomMenubarControl));\nexport { CustomMenubarControl, MenubarControl };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/activitybarpart.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { ActionBar } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { GLOBAL_ACTIVITY_ID, ACCOUNTS_ACTIVITY_ID } from '../../../common/activity.js';\nimport { Part } from '../../part.js';\nimport { GlobalActivityActionViewItem, AccountsActivityActionViewItem, ViewContainerActivityAction, PlaceHolderViewContainerActivityAction, PlaceHolderToggleCompositePinnedAction, PlaceHolderToggleCompositeBadgeAction } from './activitybarActions.js';\nimport { NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { DisposableStore, Disposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ToggleSidebarPositionAction, ToggleActivityBarVisibilityAction } from '../../actions/layoutActions.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { ACTIVITY_BAR_BACKGROUND, ACTIVITY_BAR_BORDER, ACTIVITY_BAR_FOREGROUND, ACTIVITY_BAR_INACTIVE_FOREGROUND, ACTIVITY_BAR_ACTIVE_BORDER, ACTIVITY_BAR_ACTIVE_BACKGROUND, ACTIVITY_BAR_BADGE_BACKGROUND, ACTIVITY_BAR_BADGE_FOREGROUND, ACTIVITY_BAR_DRAG_AND_DROP_BORDER } from '../../../common/theme.js';\nimport { contrastBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { CompositeBar, CompositeDragAndDrop } from '../compositeBar.js';\nimport { isAncestor, addDisposableListener, EventType, asCSSUrl, createCSSRule, Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { ActivityAction, ToggleCompositePinnedAction, ToggleCompositeBadgeAction } from '../compositeBarActions.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { getEnabledViewContainerContextKey } from '../../../common/contextkeys.js';\nimport { ContextKeyExpr, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { assertIsDefined, isString } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { CustomMenubarControl } from '../titlebar/menubarControl.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { getMenuBarVisibility } from '../../../../platform/window/common/window.js';\nimport { isNative } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { toAction, Separator } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { StandardKeyboardEvent } from 'monaco-editor/esm/vs/base/browser/keyboardEvent.js';\nimport { registerIcon } from 'monaco-editor/esm/vs/platform/theme/common/iconRegistry.js';\nimport { StringSHA1 } from 'monaco-editor/esm/vs/base/common/hash.js';\nlet ActivitybarPart = class ActivitybarPart extends Part {\n    static { this.PINNED_VIEW_CONTAINERS = 'workbench.activity.pinnedViewlets2'; }\n    static { this.PLACEHOLDER_VIEW_CONTAINERS = 'workbench.activity.placeholderViewlets'; }\n    static { this.ACTION_HEIGHT = 48; }\n    static { this.ACCOUNTS_ACTION_INDEX = 0; }\n    static { this.GEAR_ICON = registerIcon('settings-view-bar-icon', Codicon.settingsGear, ( localize('settingsViewBarIcon', \"Settings icon in the view bar.\"))); }\n    static { this.ACCOUNTS_ICON = registerIcon('accounts-view-bar-icon', Codicon.account, ( localize('accountsViewBarIcon', \"Accounts icon in the view bar.\"))); }\n    constructor(paneCompositePart, instantiationService, layoutService, themeService, storageService, extensionService, viewDescriptorService, contextKeyService, configurationService, environmentService) {\n        super(\"workbench.parts.activitybar\" , { hasTitle: false }, themeService, storageService, layoutService);\n        this.paneCompositePart = paneCompositePart;\n        this.instantiationService = instantiationService;\n        this.storageService = storageService;\n        this.extensionService = extensionService;\n        this.viewDescriptorService = viewDescriptorService;\n        this.contextKeyService = contextKeyService;\n        this.configurationService = configurationService;\n        this.environmentService = environmentService;\n        this.minimumWidth = 48;\n        this.maximumWidth = 48;\n        this.minimumHeight = 0;\n        this.maximumHeight = Number.POSITIVE_INFINITY;\n        this.globalActivity = [];\n        this.accountsActivity = [];\n        this.compositeActions = ( new Map());\n        this.viewContainerDisposables = ( new Map());\n        this.keyboardNavigationDisposables = this._register(( new DisposableStore()));\n        this.location = 0 ;\n        this.hasExtensionsRegistered = false;\n        this.enabledViewContainersContextKeys = ( new Map());\n        this._cachedViewContainers = undefined;\n        for (const cachedViewContainer of this.cachedViewContainers) {\n            cachedViewContainer.visible = !this.shouldBeHidden(cachedViewContainer.id, cachedViewContainer);\n        }\n        this.compositeBar = this.createCompositeBar();\n        this.onDidRegisterViewContainers(this.getViewContainers());\n        this.registerListeners();\n    }\n    createCompositeBar() {\n        const cachedItems = ( this.cachedViewContainers\n            .map(container => ({\n            id: container.id,\n            name: container.name,\n            visible: container.visible,\n            order: container.order,\n            pinned: container.pinned,\n        })));\n        return this._register(this.instantiationService.createInstance(CompositeBar, cachedItems, {\n            icon: true,\n            orientation: 1 ,\n            activityHoverOptions: this.getActivityHoverOptions(),\n            preventLoopNavigation: true,\n            openComposite: async (compositeId, preserveFocus) => {\n                return (await this.paneCompositePart.openPaneComposite(compositeId, !preserveFocus)) ?? null;\n            },\n            getActivityAction: compositeId => this.getCompositeActions(compositeId).activityAction,\n            getCompositePinnedAction: compositeId => this.getCompositeActions(compositeId).pinnedAction,\n            getCompositeBadgeAction: compositeId => this.getCompositeActions(compositeId).badgeAction,\n            getOnCompositeClickAction: compositeId => toAction({ id: compositeId, label: '', run: async () => this.paneCompositePart.getActivePaneComposite()?.getId() === compositeId ? this.paneCompositePart.hideActivePaneComposite() : this.paneCompositePart.openPaneComposite(compositeId) }),\n            fillExtraContextMenuActions: (actions, e) => {\n                const menuBarVisibility = getMenuBarVisibility(this.configurationService);\n                if (menuBarVisibility === 'compact' || menuBarVisibility === 'hidden' || menuBarVisibility === 'toggle') {\n                    actions.unshift(...[toAction({ id: 'toggleMenuVisibility', label: ( localize('menu', \"Menu\")), checked: menuBarVisibility === 'compact', run: () => this.configurationService.updateValue('window.menuBarVisibility', menuBarVisibility === 'compact' ? 'toggle' : 'compact') }), ( new Separator())]);\n                }\n                if (menuBarVisibility === 'compact' && this.menuBarContainer && e?.target) {\n                    if (isAncestor(e.target, this.menuBarContainer)) {\n                        actions.unshift(...[toAction({ id: 'hideCompactMenu', label: ( localize('hideMenu', \"Hide Menu\")), run: () => this.configurationService.updateValue('window.menuBarVisibility', 'toggle') }), ( new Separator())]);\n                    }\n                }\n                actions.push(( new Separator()));\n                actions.push(toAction({ id: 'toggleAccountsVisibility', label: ( localize('accounts', \"Accounts\")), checked: this.accountsVisibilityPreference, run: () => this.accountsVisibilityPreference = !this.accountsVisibilityPreference }));\n                actions.push(( new Separator()));\n                actions.push(toAction({ id: ToggleSidebarPositionAction.ID, label: ToggleSidebarPositionAction.getLabel(this.layoutService), run: () => this.instantiationService.invokeFunction(accessor => ( new ToggleSidebarPositionAction()).run(accessor)) }));\n                actions.push(toAction({ id: ToggleActivityBarVisibilityAction.ID, label: ( localize('hideActivitBar', \"Hide Activity Bar\")), run: () => this.instantiationService.invokeFunction(accessor => ( new ToggleActivityBarVisibilityAction()).run(accessor)) }));\n            },\n            getContextMenuActionsForComposite: compositeId => this.getContextMenuActionsForComposite(compositeId),\n            getDefaultCompositeId: () => this.viewDescriptorService.getDefaultViewContainer(this.location)?.id,\n            hidePart: () => this.layoutService.setPartHidden(true, \"workbench.parts.sidebar\" ),\n            dndHandler: ( new CompositeDragAndDrop(\n                this.viewDescriptorService,\n                0 ,\n                async (id, focus) => { return (await this.paneCompositePart.openPaneComposite(id, focus)) ?? null; },\n                (from, to, before) => this.compositeBar.move(from, to, before?.verticallyBefore),\n                () => this.compositeBar.getCompositeBarItems()\n            )),\n            compositeSize: 52,\n            colors: (theme) => this.getActivitybarItemColors(theme),\n            overflowActionSize: ActivitybarPart.ACTION_HEIGHT\n        }));\n    }\n    getActivityHoverOptions() {\n        return {\n            position: () => this.layoutService.getSideBarPosition() === 0  ? 1  : 0 ,\n        };\n    }\n    getContextMenuActionsForComposite(compositeId) {\n        const actions = [];\n        const viewContainer = this.viewDescriptorService.getViewContainerById(compositeId);\n        const defaultLocation = this.viewDescriptorService.getDefaultViewContainerLocation(viewContainer);\n        if (defaultLocation !== this.viewDescriptorService.getViewContainerLocation(viewContainer)) {\n            actions.push(toAction({ id: 'resetLocationAction', label: ( localize('resetLocation', \"Reset Location\")), run: () => this.viewDescriptorService.moveViewContainerToLocation(viewContainer, defaultLocation) }));\n        }\n        else {\n            const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n            if (viewContainerModel.allViewDescriptors.length === 1) {\n                const viewToReset = viewContainerModel.allViewDescriptors[0];\n                const defaultContainer = this.viewDescriptorService.getDefaultContainerById(viewToReset.id);\n                if (defaultContainer !== viewContainer) {\n                    actions.push(toAction({ id: 'resetLocationAction', label: ( localize('resetLocation', \"Reset Location\")), run: () => this.viewDescriptorService.moveViewsToContainer([viewToReset], defaultContainer) }));\n                }\n            }\n        }\n        return actions;\n    }\n    registerListeners() {\n        this._register(this.viewDescriptorService.onDidChangeViewContainers(({ added, removed }) => this.onDidChangeViewContainers(added, removed)));\n        this._register(this.viewDescriptorService.onDidChangeContainerLocation(({ viewContainer, from, to }) => this.onDidChangeViewContainerLocation(viewContainer, from, to)));\n        this.paneCompositePart.onDidPaneCompositeOpen(e => this.onDidChangeViewContainerVisibility(e.getId(), true));\n        this.paneCompositePart.onDidPaneCompositeClose(e => this.onDidChangeViewContainerVisibility(e.getId(), false));\n        const disposables = this._register(( new DisposableStore()));\n        this._register(this.extensionService.onDidRegisterExtensions(() => {\n            disposables.clear();\n            this.onDidRegisterExtensions();\n            this.compositeBar.onDidChange(() => this.saveCachedViewContainers(), this, disposables);\n            this.storageService.onDidChangeValue(e => this.onDidStorageValueChange(e), this, disposables);\n        }));\n        this._register(this.configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('window.menuBarVisibility')) {\n                if (getMenuBarVisibility(this.configurationService) === 'compact') {\n                    this.installMenubar();\n                }\n                else {\n                    this.uninstallMenubar();\n                }\n            }\n        }));\n    }\n    onDidChangeViewContainers(added, removed) {\n        removed.filter(({ location }) => location === 0 ).forEach(({ container }) => this.onDidDeregisterViewContainer(container));\n        this.onDidRegisterViewContainers(( added.filter(({ location }) => location === 0 ).map(({ container }) => container)));\n    }\n    onDidChangeViewContainerLocation(container, from, to) {\n        if (from === this.location) {\n            this.onDidDeregisterViewContainer(container);\n        }\n        if (to === this.location) {\n            this.onDidRegisterViewContainers([container]);\n        }\n    }\n    onDidChangeViewContainerVisibility(id, visible) {\n        if (visible) {\n            this.onDidViewContainerVisible(id);\n        }\n        else {\n            this.compositeBar.deactivateComposite(id);\n        }\n    }\n    onDidRegisterExtensions() {\n        this.hasExtensionsRegistered = true;\n        for (const { id } of this.cachedViewContainers) {\n            const viewContainer = this.getViewContainer(id);\n            if (viewContainer) {\n                this.showOrHideViewContainer(viewContainer);\n            }\n            else {\n                if (this.viewDescriptorService.isViewContainerRemovedPermanently(id)) {\n                    this.removeComposite(id);\n                }\n                else {\n                    this.hideComposite(id);\n                }\n            }\n        }\n        this.saveCachedViewContainers();\n    }\n    onDidViewContainerVisible(id) {\n        const viewContainer = this.getViewContainer(id);\n        if (viewContainer) {\n            this.addComposite(viewContainer);\n            this.compositeBar.activateComposite(viewContainer.id);\n            if (this.shouldBeHidden(viewContainer)) {\n                const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n                if (viewContainerModel.activeViewDescriptors.length === 0) {\n                    this.hideComposite(viewContainer.id);\n                }\n            }\n        }\n    }\n    showActivity(viewContainerOrActionId, badge, clazz, priority) {\n        if (this.getViewContainer(viewContainerOrActionId)) {\n            return this.compositeBar.showActivity(viewContainerOrActionId, badge, clazz, priority);\n        }\n        if (viewContainerOrActionId === GLOBAL_ACTIVITY_ID) {\n            return this.showGlobalActivity(GLOBAL_ACTIVITY_ID, badge, clazz, priority);\n        }\n        if (viewContainerOrActionId === ACCOUNTS_ACTIVITY_ID) {\n            return this.showGlobalActivity(ACCOUNTS_ACTIVITY_ID, badge, clazz, priority);\n        }\n        return Disposable.None;\n    }\n    showGlobalActivity(activityId, badge, clazz, priority) {\n        if (typeof priority !== 'number') {\n            priority = 0;\n        }\n        const activity = { badge, clazz, priority };\n        const activityCache = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivity : this.accountsActivity;\n        for (let i = 0; i <= activityCache.length; i++) {\n            if (i === activityCache.length) {\n                activityCache.push(activity);\n                break;\n            }\n            else if (activityCache[i].priority <= priority) {\n                activityCache.splice(i, 0, activity);\n                break;\n            }\n        }\n        this.updateGlobalActivity(activityId);\n        return toDisposable(() => this.removeGlobalActivity(activityId, activity));\n    }\n    removeGlobalActivity(activityId, activity) {\n        const activityCache = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivity : this.accountsActivity;\n        const index = activityCache.indexOf(activity);\n        if (index !== -1) {\n            activityCache.splice(index, 1);\n            this.updateGlobalActivity(activityId);\n        }\n    }\n    updateGlobalActivity(activityId) {\n        const activityAction = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivityAction : this.accountsActivityAction;\n        if (!activityAction) {\n            return;\n        }\n        const activityCache = activityId === GLOBAL_ACTIVITY_ID ? this.globalActivity : this.accountsActivity;\n        if (activityCache.length) {\n            const [{ badge, clazz, priority }] = activityCache;\n            if (badge instanceof NumberBadge && activityCache.length > 1) {\n                const cumulativeNumberBadge = this.getCumulativeNumberBadge(activityCache, priority);\n                activityAction.setBadge(cumulativeNumberBadge);\n            }\n            else {\n                activityAction.setBadge(badge, clazz);\n            }\n        }\n        else {\n            activityAction.setBadge(undefined);\n        }\n    }\n    getCumulativeNumberBadge(activityCache, priority) {\n        const numberActivities = activityCache.filter(activity => activity.badge instanceof NumberBadge && activity.priority === priority);\n        const number = numberActivities.reduce((result, activity) => { return result + activity.badge.number; }, 0);\n        const descriptorFn = () => {\n            return numberActivities.reduce((result, activity, index) => {\n                result = result + activity.badge.getDescription();\n                if (index < numberActivities.length - 1) {\n                    result = `${result}\\n`;\n                }\n                return result;\n            }, '');\n        };\n        return ( new NumberBadge(number, descriptorFn));\n    }\n    uninstallMenubar() {\n        if (this.menuBar) {\n            this.menuBar.dispose();\n            this.menuBar = undefined;\n        }\n        if (this.menuBarContainer) {\n            this.menuBarContainer.remove();\n            this.menuBarContainer = undefined;\n            this.registerKeyboardNavigationListeners();\n        }\n    }\n    installMenubar() {\n        if (this.menuBar) {\n            return;\n        }\n        this.menuBarContainer = document.createElement('div');\n        this.menuBarContainer.classList.add('menubar');\n        const content = assertIsDefined(this.content);\n        content.prepend(this.menuBarContainer);\n        this.menuBar = this._register(this.instantiationService.createInstance(CustomMenubarControl));\n        this.menuBar.create(this.menuBarContainer);\n        this.registerKeyboardNavigationListeners();\n    }\n    createContentArea(parent) {\n        this.element = parent;\n        this.content = document.createElement('div');\n        this.content.classList.add('content');\n        parent.appendChild(this.content);\n        if (getMenuBarVisibility(this.configurationService) === 'compact') {\n            this.installMenubar();\n        }\n        this.compositeBarContainer = this.compositeBar.create(this.content);\n        this.globalActivitiesContainer = document.createElement('div');\n        this.content.appendChild(this.globalActivitiesContainer);\n        this.registerKeyboardNavigationListeners();\n        return this.content;\n    }\n    registerKeyboardNavigationListeners() {\n        this.keyboardNavigationDisposables.clear();\n        if (this.menuBarContainer) {\n            this.keyboardNavigationDisposables.add(addDisposableListener(this.menuBarContainer, EventType.KEY_DOWN, e => {\n                const kbEvent = ( new StandardKeyboardEvent(e));\n                if (kbEvent.equals(18 ) || kbEvent.equals(17 )) {\n                    this.compositeBar?.focus();\n                }\n            }));\n        }\n        if (this.compositeBarContainer) {\n            this.keyboardNavigationDisposables.add(addDisposableListener(this.compositeBarContainer, EventType.KEY_DOWN, e => {\n                const kbEvent = ( new StandardKeyboardEvent(e));\n                if (kbEvent.equals(18 ) || kbEvent.equals(17 )) {\n                    this.globalActivityActionBar?.focus(true);\n                }\n                else if (kbEvent.equals(16 ) || kbEvent.equals(15 )) {\n                    this.menuBar?.toggleFocus();\n                }\n            }));\n        }\n        if (this.globalActivitiesContainer) {\n            this.keyboardNavigationDisposables.add(addDisposableListener(this.globalActivitiesContainer, EventType.KEY_DOWN, e => {\n                const kbEvent = ( new StandardKeyboardEvent(e));\n                if (kbEvent.equals(16 ) || kbEvent.equals(15 )) {\n                    this.compositeBar?.focus(this.getVisiblePaneCompositeIds().length - 1);\n                }\n            }));\n        }\n    }\n    createGlobalActivityActionBar(container) {\n        this.globalActivityActionBar = this._register(( new ActionBar(container, {\n            actionViewItemProvider: action => {\n                if (action.id === 'workbench.actions.manage') {\n                    return this.instantiationService.createInstance(GlobalActivityActionViewItem, action, () => this.compositeBar.getContextMenuActions(), (theme) => this.getActivitybarItemColors(theme), this.getActivityHoverOptions());\n                }\n                if (action.id === 'workbench.actions.accounts') {\n                    return this.instantiationService.createInstance(AccountsActivityActionViewItem, action, () => this.compositeBar.getContextMenuActions(), (theme) => this.getActivitybarItemColors(theme), this.getActivityHoverOptions());\n                }\n                throw new Error(`No view item for action '${action.id}'`);\n            },\n            orientation: 1 ,\n            ariaLabel: ( localize('manage', \"Manage\")),\n            animated: false,\n            preventLoopNavigation: true\n        })));\n        this.globalActivityAction = this._register(( new ActivityAction({\n            id: 'workbench.actions.manage',\n            name: ( localize('manage', \"Manage\")),\n            classNames: ThemeIcon.asClassNameArray(ActivitybarPart.GEAR_ICON),\n        })));\n        if (this.accountsVisibilityPreference) {\n            this.accountsActivityAction = this._register(( new ActivityAction({\n                id: 'workbench.actions.accounts',\n                name: ( localize('accounts', \"Accounts\")),\n                classNames: ThemeIcon.asClassNameArray(ActivitybarPart.ACCOUNTS_ICON)\n            })));\n            this.globalActivityActionBar.push(this.accountsActivityAction, { index: ActivitybarPart.ACCOUNTS_ACTION_INDEX });\n        }\n        this.globalActivityActionBar.push(this.globalActivityAction);\n    }\n    toggleAccountsActivity() {\n        if (!!this.accountsActivityAction === this.accountsVisibilityPreference) {\n            return;\n        }\n        if (this.globalActivityActionBar) {\n            if (this.accountsActivityAction) {\n                this.globalActivityActionBar.pull(ActivitybarPart.ACCOUNTS_ACTION_INDEX);\n                this.accountsActivityAction = undefined;\n            }\n            else {\n                this.accountsActivityAction = this._register(( new ActivityAction({\n                    id: 'workbench.actions.accounts',\n                    name: ( localize('accounts', \"Accounts\")),\n                    classNames: ThemeIcon.asClassNameArray(Codicon.account)\n                })));\n                this.globalActivityActionBar.push(this.accountsActivityAction, { index: ActivitybarPart.ACCOUNTS_ACTION_INDEX });\n            }\n        }\n        this.updateGlobalActivity(ACCOUNTS_ACTIVITY_ID);\n    }\n    getCompositeActions(compositeId) {\n        let compositeActions = this.compositeActions.get(compositeId);\n        if (!compositeActions) {\n            const viewContainer = this.getViewContainer(compositeId);\n            if (viewContainer) {\n                const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n                compositeActions = {\n                    activityAction: this.instantiationService.createInstance(ViewContainerActivityAction, this.toActivity(viewContainerModel), this.paneCompositePart),\n                    pinnedAction: ( new ToggleCompositePinnedAction(this.toActivity(viewContainerModel), this.compositeBar)),\n                    badgeAction: ( new ToggleCompositeBadgeAction(this.toActivity(viewContainerModel), this.compositeBar))\n                };\n            }\n            else {\n                const cachedComposite = this.cachedViewContainers.filter(c => c.id === compositeId)[0];\n                compositeActions = {\n                    activityAction: this.instantiationService.createInstance(PlaceHolderViewContainerActivityAction, ActivitybarPart.toActivity(compositeId, compositeId, cachedComposite?.icon, undefined), this.paneCompositePart),\n                    pinnedAction: ( new PlaceHolderToggleCompositePinnedAction(compositeId, this.compositeBar)),\n                    badgeAction: ( new PlaceHolderToggleCompositeBadgeAction(compositeId, this.compositeBar))\n                };\n            }\n            this.compositeActions.set(compositeId, compositeActions);\n        }\n        return compositeActions;\n    }\n    onDidRegisterViewContainers(viewContainers) {\n        for (const viewContainer of viewContainers) {\n            this.addComposite(viewContainer);\n            const cachedViewContainer = this.cachedViewContainers.filter(({ id }) => id === viewContainer.id)[0];\n            if (!cachedViewContainer) {\n                this.compositeBar.pin(viewContainer.id);\n            }\n            const visibleViewContainer = this.paneCompositePart.getActivePaneComposite();\n            if (visibleViewContainer?.getId() === viewContainer.id) {\n                this.compositeBar.activateComposite(viewContainer.id);\n            }\n            const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n            this.updateActivity(viewContainer, viewContainerModel);\n            this.showOrHideViewContainer(viewContainer);\n            const disposables = ( new DisposableStore());\n            disposables.add(viewContainerModel.onDidChangeContainerInfo(() => this.updateActivity(viewContainer, viewContainerModel)));\n            disposables.add(viewContainerModel.onDidChangeActiveViewDescriptors(() => this.showOrHideViewContainer(viewContainer)));\n            this.viewContainerDisposables.set(viewContainer.id, disposables);\n        }\n    }\n    onDidDeregisterViewContainer(viewContainer) {\n        const disposable = this.viewContainerDisposables.get(viewContainer.id);\n        disposable?.dispose();\n        this.viewContainerDisposables.delete(viewContainer.id);\n        this.removeComposite(viewContainer.id);\n    }\n    updateActivity(viewContainer, viewContainerModel) {\n        const activity = this.toActivity(viewContainerModel);\n        const { activityAction, pinnedAction } = this.getCompositeActions(viewContainer.id);\n        activityAction.updateActivity(activity);\n        if (pinnedAction instanceof PlaceHolderToggleCompositePinnedAction) {\n            pinnedAction.setActivity(activity);\n        }\n        this.saveCachedViewContainers();\n    }\n    toActivity(viewContainerModel) {\n        return ActivitybarPart.toActivity(viewContainerModel.viewContainer.id, viewContainerModel.title, viewContainerModel.icon, viewContainerModel.keybindingId);\n    }\n    static toActivity(id, name, icon, keybindingId) {\n        let classNames = undefined;\n        let iconUrl = undefined;\n        if (URI.isUri(icon)) {\n            iconUrl = icon;\n            const cssUrl = asCSSUrl(icon);\n            const hash = ( new StringSHA1());\n            hash.update(cssUrl);\n            const iconId = `activity-${id.replace(/\\./g, '-')}-${hash.digest()}`;\n            const iconClass = `.monaco-workbench .activitybar .monaco-action-bar .action-label.${iconId}`;\n            classNames = [iconId, 'uri-icon'];\n            createCSSRule(iconClass, `\n\t\t\t\tmask: ${cssUrl} no-repeat 50% 50%;\n\t\t\t\tmask-size: 24px;\n\t\t\t\t-webkit-mask: ${cssUrl} no-repeat 50% 50%;\n\t\t\t\t-webkit-mask-size: 24px;\n\t\t\t`);\n        }\n        else if (ThemeIcon.isThemeIcon(icon)) {\n            classNames = ThemeIcon.asClassNameArray(icon);\n        }\n        return { id, name, classNames, iconUrl, keybindingId };\n    }\n    showOrHideViewContainer(viewContainer) {\n        let contextKey = this.enabledViewContainersContextKeys.get(viewContainer.id);\n        if (!contextKey) {\n            contextKey = this.contextKeyService.createKey(getEnabledViewContainerContextKey(viewContainer.id), false);\n            this.enabledViewContainersContextKeys.set(viewContainer.id, contextKey);\n        }\n        if (this.shouldBeHidden(viewContainer)) {\n            contextKey.set(false);\n            this.hideComposite(viewContainer.id);\n        }\n        else {\n            contextKey.set(true);\n            this.addComposite(viewContainer);\n        }\n    }\n    shouldBeHidden(viewContainerOrId, cachedViewContainer) {\n        const viewContainer = isString(viewContainerOrId) ? this.getViewContainer(viewContainerOrId) : viewContainerOrId;\n        const viewContainerId = isString(viewContainerOrId) ? viewContainerOrId : viewContainerOrId.id;\n        if (viewContainer) {\n            if (viewContainer.hideIfEmpty) {\n                if (this.viewDescriptorService.getViewContainerModel(viewContainer).activeViewDescriptors.length > 0) {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        }\n        if (!this.hasExtensionsRegistered && !(this.environmentService.remoteAuthority && isNative)) {\n            cachedViewContainer = cachedViewContainer || this.cachedViewContainers.find(({ id }) => id === viewContainerId);\n            if (!viewContainer && cachedViewContainer?.isBuiltin && cachedViewContainer?.visible) {\n                return false;\n            }\n            if (cachedViewContainer?.views?.length) {\n                return cachedViewContainer.views.every(({ when }) => !!when && !this.contextKeyService.contextMatchesRules(ContextKeyExpr.deserialize(when)));\n            }\n        }\n        return true;\n    }\n    addComposite(viewContainer) {\n        this.compositeBar.addComposite({ id: viewContainer.id, name: typeof viewContainer.title === 'string' ? viewContainer.title : viewContainer.title.value, order: viewContainer.order, requestedIndex: viewContainer.requestedIndex });\n    }\n    hideComposite(compositeId) {\n        this.compositeBar.hideComposite(compositeId);\n        const compositeActions = this.compositeActions.get(compositeId);\n        if (compositeActions) {\n            compositeActions.activityAction.dispose();\n            compositeActions.pinnedAction.dispose();\n            this.compositeActions.delete(compositeId);\n        }\n    }\n    removeComposite(compositeId) {\n        this.compositeBar.removeComposite(compositeId);\n        const compositeActions = this.compositeActions.get(compositeId);\n        if (compositeActions) {\n            compositeActions.activityAction.dispose();\n            compositeActions.pinnedAction.dispose();\n            this.compositeActions.delete(compositeId);\n        }\n    }\n    getPinnedPaneCompositeIds() {\n        const pinnedCompositeIds = ( this.compositeBar.getPinnedComposites().map(v => v.id));\n        return ( this.getViewContainers()\n            .filter(v => this.compositeBar.isPinned(v.id))\n            .sort((v1, v2) => pinnedCompositeIds.indexOf(v1.id) - pinnedCompositeIds.indexOf(v2.id))\n            .map(v => v.id));\n    }\n    getVisiblePaneCompositeIds() {\n        return ( this.compositeBar.getVisibleComposites()\n            .filter(v => this.paneCompositePart.getActivePaneComposite()?.getId() === v.id || this.compositeBar.isPinned(v.id))\n            .map(v => v.id));\n    }\n    focus() {\n        this.compositeBar.focus();\n    }\n    updateStyles() {\n        super.updateStyles();\n        const container = assertIsDefined(this.getContainer());\n        const background = this.getColor(ACTIVITY_BAR_BACKGROUND) || '';\n        container.style.backgroundColor = background;\n        const borderColor = this.getColor(ACTIVITY_BAR_BORDER) || this.getColor(contrastBorder) || '';\n        container.classList.toggle('bordered', !!borderColor);\n        container.style.borderColor = borderColor ? borderColor : '';\n    }\n    getActivitybarItemColors(theme) {\n        return {\n            activeForegroundColor: theme.getColor(ACTIVITY_BAR_FOREGROUND),\n            inactiveForegroundColor: theme.getColor(ACTIVITY_BAR_INACTIVE_FOREGROUND),\n            activeBorderColor: theme.getColor(ACTIVITY_BAR_ACTIVE_BORDER),\n            activeBackground: theme.getColor(ACTIVITY_BAR_ACTIVE_BACKGROUND),\n            badgeBackground: theme.getColor(ACTIVITY_BAR_BADGE_BACKGROUND),\n            badgeForeground: theme.getColor(ACTIVITY_BAR_BADGE_FOREGROUND),\n            dragAndDropBorder: theme.getColor(ACTIVITY_BAR_DRAG_AND_DROP_BORDER),\n            activeBackgroundColor: undefined, inactiveBackgroundColor: undefined, activeBorderBottomColor: undefined,\n        };\n    }\n    layout(width, height) {\n        if (!this.layoutService.isVisible(\"workbench.parts.activitybar\" )) {\n            return;\n        }\n        const contentAreaSize = super.layoutContents(width, height).contentSize;\n        let availableHeight = contentAreaSize.height;\n        if (this.menuBarContainer) {\n            availableHeight -= this.menuBarContainer.clientHeight;\n        }\n        if (this.globalActivityActionBar) {\n            availableHeight -= (this.globalActivityActionBar.viewItems.length * ActivitybarPart.ACTION_HEIGHT);\n        }\n        this.compositeBar.layout(( new Dimension(width, availableHeight)));\n    }\n    getViewContainer(id) {\n        const viewContainer = this.viewDescriptorService.getViewContainerById(id);\n        return viewContainer && this.viewDescriptorService.getViewContainerLocation(viewContainer) === this.location ? viewContainer : undefined;\n    }\n    getViewContainers() {\n        return this.viewDescriptorService.getViewContainersByLocation(this.location);\n    }\n    onDidStorageValueChange(e) {\n        if (e.key === ActivitybarPart.PINNED_VIEW_CONTAINERS && e.scope === 0\n            && this.pinnedViewContainersValue !== this.getStoredPinnedViewContainersValue() ) {\n            this._pinnedViewContainersValue = undefined;\n            this._cachedViewContainers = undefined;\n            const newCompositeItems = [];\n            const compositeItems = this.compositeBar.getCompositeBarItems();\n            for (const cachedViewContainer of this.cachedViewContainers) {\n                newCompositeItems.push({\n                    id: cachedViewContainer.id,\n                    name: cachedViewContainer.name,\n                    order: cachedViewContainer.order,\n                    pinned: cachedViewContainer.pinned,\n                    visible: !!compositeItems.find(({ id }) => id === cachedViewContainer.id)\n                });\n            }\n            for (let index = 0; index < compositeItems.length; index++) {\n                if (!( newCompositeItems.some(({ id }) => id === compositeItems[index].id))) {\n                    const viewContainer = this.viewDescriptorService.getViewContainerById(compositeItems[index].id);\n                    newCompositeItems.splice(index, 0, {\n                        ...compositeItems[index],\n                        pinned: true,\n                        visible: true,\n                        order: viewContainer?.order,\n                    });\n                }\n            }\n            this.compositeBar.setCompositeBarItems(newCompositeItems);\n        }\n        if (e.key === AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY && e.scope === 0 ) {\n            this.toggleAccountsActivity();\n        }\n    }\n    saveCachedViewContainers() {\n        const state = [];\n        const compositeItems = this.compositeBar.getCompositeBarItems();\n        for (const compositeItem of compositeItems) {\n            const viewContainer = this.getViewContainer(compositeItem.id);\n            if (viewContainer) {\n                const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n                const views = [];\n                for (const { when } of viewContainerModel.allViewDescriptors) {\n                    views.push({ when: when ? when.serialize() : undefined });\n                }\n                state.push({\n                    id: compositeItem.id,\n                    name: viewContainerModel.title,\n                    icon: URI.isUri(viewContainerModel.icon) && this.environmentService.remoteAuthority ? undefined : viewContainerModel.icon,\n                    views,\n                    pinned: compositeItem.pinned,\n                    order: compositeItem.order,\n                    visible: compositeItem.visible,\n                    isBuiltin: !viewContainer.extensionId\n                });\n            }\n            else {\n                state.push({ id: compositeItem.id, pinned: compositeItem.pinned, order: compositeItem.order, visible: false, isBuiltin: false });\n            }\n        }\n        this.storeCachedViewContainersState(state);\n    }\n    get cachedViewContainers() {\n        if (this._cachedViewContainers === undefined) {\n            this._cachedViewContainers = this.getPinnedViewContainers();\n            for (const placeholderViewContainer of this.getPlaceholderViewContainers()) {\n                const cachedViewContainer = this._cachedViewContainers.filter(cached => cached.id === placeholderViewContainer.id)[0];\n                if (cachedViewContainer) {\n                    cachedViewContainer.name = placeholderViewContainer.name;\n                    cachedViewContainer.icon = placeholderViewContainer.themeIcon ? placeholderViewContainer.themeIcon :\n                        placeholderViewContainer.iconUrl ? URI.revive(placeholderViewContainer.iconUrl) : undefined;\n                    if (URI.isUri(cachedViewContainer.icon) && this.environmentService.remoteAuthority) {\n                        cachedViewContainer.icon = undefined;\n                    }\n                    cachedViewContainer.views = placeholderViewContainer.views;\n                    cachedViewContainer.isBuiltin = placeholderViewContainer.isBuiltin;\n                }\n            }\n        }\n        return this._cachedViewContainers;\n    }\n    storeCachedViewContainersState(cachedViewContainers) {\n        this.setPinnedViewContainers(( cachedViewContainers.map(({ id, pinned, visible, order }) => ({\n            id,\n            pinned,\n            visible,\n            order\n        }))));\n        this.setPlaceholderViewContainers(( cachedViewContainers.map(({ id, icon, name, views, isBuiltin }) => ({\n            id,\n            iconUrl: URI.isUri(icon) ? icon : undefined,\n            themeIcon: ThemeIcon.isThemeIcon(icon) ? icon : undefined,\n            name,\n            isBuiltin,\n            views\n        }))));\n    }\n    getPinnedViewContainers() {\n        return JSON.parse(this.pinnedViewContainersValue);\n    }\n    setPinnedViewContainers(pinnedViewContainers) {\n        this.pinnedViewContainersValue = JSON.stringify(pinnedViewContainers);\n    }\n    get pinnedViewContainersValue() {\n        if (!this._pinnedViewContainersValue) {\n            this._pinnedViewContainersValue = this.getStoredPinnedViewContainersValue();\n        }\n        return this._pinnedViewContainersValue;\n    }\n    set pinnedViewContainersValue(pinnedViewContainersValue) {\n        if (this.pinnedViewContainersValue !== pinnedViewContainersValue) {\n            this._pinnedViewContainersValue = pinnedViewContainersValue;\n            this.setStoredPinnedViewContainersValue(pinnedViewContainersValue);\n        }\n    }\n    getStoredPinnedViewContainersValue() {\n        return this.storageService.get(ActivitybarPart.PINNED_VIEW_CONTAINERS, 0 , '[]');\n    }\n    setStoredPinnedViewContainersValue(value) {\n        this.storageService.store(ActivitybarPart.PINNED_VIEW_CONTAINERS, value, 0 , 0 );\n    }\n    getPlaceholderViewContainers() {\n        return JSON.parse(this.placeholderViewContainersValue);\n    }\n    setPlaceholderViewContainers(placeholderViewContainers) {\n        this.placeholderViewContainersValue = JSON.stringify(placeholderViewContainers);\n    }\n    get placeholderViewContainersValue() {\n        if (!this._placeholderViewContainersValue) {\n            this._placeholderViewContainersValue = this.getStoredPlaceholderViewContainersValue();\n        }\n        return this._placeholderViewContainersValue;\n    }\n    set placeholderViewContainersValue(placeholderViewContainesValue) {\n        if (this.placeholderViewContainersValue !== placeholderViewContainesValue) {\n            this._placeholderViewContainersValue = placeholderViewContainesValue;\n            this.setStoredPlaceholderViewContainersValue(placeholderViewContainesValue);\n        }\n    }\n    getStoredPlaceholderViewContainersValue() {\n        return this.storageService.get(ActivitybarPart.PLACEHOLDER_VIEW_CONTAINERS, 0 , '[]');\n    }\n    setStoredPlaceholderViewContainersValue(value) {\n        this.storageService.store(ActivitybarPart.PLACEHOLDER_VIEW_CONTAINERS, value, 0 , 1 );\n    }\n    get accountsVisibilityPreference() {\n        return this.storageService.getBoolean(AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY, 0 , true);\n    }\n    set accountsVisibilityPreference(value) {\n        this.storageService.store(AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY, value, 0 , 0 );\n    }\n    toJSON() {\n        return {\n            type: \"workbench.parts.activitybar\"\n        };\n    }\n};\nActivitybarPart = ( __decorate([\n    ( __param(1, IInstantiationService)),\n    ( __param(2, IWorkbenchLayoutService)),\n    ( __param(3, IThemeService)),\n    ( __param(4, IStorageService)),\n    ( __param(5, IExtensionService)),\n    ( __param(6, IViewDescriptorService)),\n    ( __param(7, IContextKeyService)),\n    ( __param(8, IConfigurationService)),\n    ( __param(9, IWorkbenchEnvironmentService))\n], ActivitybarPart));\nexport { ActivitybarPart };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench.noauxiliarybar .part.auxiliarybar{display:none!important;visibility:hidden!important}.monaco-workbench .part.auxiliarybar>.content .monaco-editor,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .margin,.monaco-workbench .part.auxiliarybar>.content .monaco-editor .monaco-editor-background{background-color:var(--vscode-sideBar-background)}.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:focus .action-label,.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:hover .action-label{color:var(--vscode-sideBarTitle-foreground)!important}.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item.checked .action-label,.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) solid 1px!important}.monaco-workbench .part.auxiliarybar>.title>.panel-switcher-container>.monaco-action-bar .action-item:not(.checked):hover .action-label{outline:var(--vscode-contrastActiveBorder,unset) dashed 1px!important}\";\nn(css,{});\nexport { css, css as default };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.basepanel>.composite.title>.title-actions .monaco-action-bar .actions-container{justify-content:flex-end}.monaco-workbench .part.basepanel>.composite.title>.global-actions .monaco-action-bar .action-item,.monaco-workbench .part.basepanel>.composite.title>.title-actions .monaco-action-bar .action-item{margin-right:4px}.monaco-workbench .part.basepanel>.composite.title>.title-actions .monaco-action-bar .action-item .action-label{outline-offset:-2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container.composite-bar>.monaco-action-bar .action-label.codicon-more{align-items:center;color:inherit!important;display:flex;justify-content:center;margin-left:0;margin-right:0}.monaco-workbench .part.basepanel .empty-panel-message-area{display:none;height:100%;width:100%}.monaco-workbench .part.basepanel .empty-panel-message-area.visible{align-content:center;align-items:center;display:flex;justify-content:center}.monaco-workbench .part.basepanel .empty-panel-message-area .empty-panel-message{margin:12px;text-align:center}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar{height:35px;line-height:27px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item{display:flex;font-size:11px;padding:2px 10px;text-transform:uppercase}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon{padding-left:2px;padding-right:2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .action-label:not(.codicon){height:16px;width:16px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:before{background-color:var(--insert-border-color);content:\\\"\\\";display:none;height:24px;opacity:0;position:absolute;transition-delay:.1s;transition-duration:0ms;transition-property:opacity;width:2px}.monaco-workbench .part.basepanel>.composite.title.dragged-over>.panel-switcher-container>.monaco-action-bar .action-item:after,.monaco-workbench .part.basepanel>.composite.title.dragged-over>.panel-switcher-container>.monaco-action-bar .action-item:before{display:block}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:before{left:1px;margin-left:-2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:after{margin-right:-2px;right:1px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:first-of-type:before{left:2px;margin-left:-2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:last-of-type:after{margin-right:-2px;right:2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.left:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.left:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.right:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.right:before{transition-delay:0s}.monaco-workbench .part.basepanel>.composite.title.dragged-over-head>.panel-switcher-container>.monaco-action-bar .action-item:first-of-type:before,.monaco-workbench .part.basepanel>.composite.title.dragged-over-tail>.panel-switcher-container>.monaco-action-bar .action-item:last-of-type:after,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.left:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.right+.action-item:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:last-of-type.right:after{opacity:1}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item .action-label{border-radius:0;margin-right:0;padding:2px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .action-label.codicon,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:not(.icon) .action-label{background:none!important}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.checked .action-label{margin-right:0}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:11px;font-weight:400;height:18px;line-height:11px;min-width:18px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item .active-item-indicator{bottom:0;height:100%;left:10px;overflow:hidden;pointer-events:none;position:absolute;top:-4px;width:calc(100% - 20px);z-index:1}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.icon .active-item-indicator{left:2px;top:1px;width:calc(100% - 4px)}.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item.checked .active-item-indicator:before,.monaco-workbench .part.basepanel>.composite.title>.panel-switcher-container>.monaco-action-bar .action-item:focus .active-item-indicator:before{border-top-style:solid;border-top-width:1px;bottom:0;content:\\\"\\\";height:0;position:absolute;width:100%;z-index:1}.monaco-workbench .part.basepanel>.title>.panel-switcher-container>.monaco-action-bar .action-item.clicked:not(.checked):focus .active-item-indicator:before{border-top-color:transparent!important}.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.right .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.right .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(-90deg)}.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-maximize:before,.monaco-workbench .part.basepanel.left .global-actions .codicon-panel-restore:before,.monaco-workbench .part.basepanel.left .title-actions .codicon-split-horizontal:before{display:inline-block;transform:rotate(90deg)}\";\nn(css,{});\nexport { css, css as default };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/basepanelpart.css.js';\nimport './media/panelpart.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { toAction, Separator, SubmenuAction } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { prepareActions } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { getEnabledViewContainerContextKey, ActivePanelContext, PanelFocusContext } from '../../../common/contextkeys.js';\nimport { CompositePart } from '../compositePart.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { PanelActivityAction, PlaceHolderToggleCompositePinnedAction, PlaceHolderPanelActivityAction, TogglePanelAction } from './panelActions.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { PANEL_ACTIVE_TITLE_BORDER, PANEL_ACTIVE_TITLE_FOREGROUND, PANEL_INACTIVE_TITLE_FOREGROUND, PANEL_DRAG_AND_DROP_BORDER, EDITOR_DRAG_AND_DROP_BACKGROUND, PANEL_BACKGROUND, PANEL_BORDER } from '../../../common/theme.js';\nimport { badgeBackground, badgeForeground, contrastBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { CompositeDragAndDrop, CompositeBar } from '../compositeBar.js';\nimport { ToggleCompositePinnedAction, ToggleCompositeBadgeAction } from '../compositeBarActions.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { asCSSUrl, createCSSRule, trackFocus, EventHelper, $, Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ContextKeyExpr, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { assertIsDefined, isUndefinedOrNull } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { CompositeDragAndDropObserver, toggleDropEffect } from '../../dnd.js';\nimport { Extensions } from '../../panecomposite.js';\nimport { CompositeMenuActions } from '../../actions.js';\nimport { MenuId, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { StringSHA1 } from 'monaco-editor/esm/vs/base/common/hash.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { ToolBar } from 'monaco-editor/esm/vs/base/browser/ui/toolbar/toolbar.js';\nimport { ICommandService } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { PlaceHolderToggleCompositeBadgeAction } from '../activitybar/activitybarActions.js';\nimport { createAndFillInContextMenuActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nlet BasePanelPart = class BasePanelPart extends CompositePart {\n    static { this.MIN_COMPOSITE_BAR_WIDTH = 50; }\n    get preferredHeight() {\n        return this.layoutService.dimension.height * 0.4;\n    }\n    get preferredWidth() {\n        const activeComposite = this.getActivePaneComposite();\n        if (!activeComposite) {\n            return;\n        }\n        const width = activeComposite.getOptimalWidth();\n        if (typeof width !== 'number') {\n            return;\n        }\n        return Math.max(width, 300);\n    }\n    get onDidPaneCompositeOpen() { return ( Event.map(this.onDidCompositeOpen.event, compositeEvent => compositeEvent.composite)); }\n    constructor(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, viewDescriptorService, contextKeyService, extensionService, partId, activePanelSettingsKey, pinnedPanelsKey, placeholdeViewContainersKey, panelRegistryId, backgroundColor, viewContainerLocation, activePanelContextKey, panelFocusContextKey, panelOptions) {\n        super(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, ( Registry.as(panelRegistryId)), activePanelSettingsKey, viewDescriptorService.getDefaultViewContainer(viewContainerLocation)?.id || '', 'panel', 'panel', undefined, partId, panelOptions);\n        this.viewDescriptorService = viewDescriptorService;\n        this.contextKeyService = contextKeyService;\n        this.extensionService = extensionService;\n        this.partId = partId;\n        this.pinnedPanelsKey = pinnedPanelsKey;\n        this.placeholdeViewContainersKey = placeholdeViewContainersKey;\n        this.backgroundColor = backgroundColor;\n        this.viewContainerLocation = viewContainerLocation;\n        this.activePanelContextKey = activePanelContextKey;\n        this.panelFocusContextKey = panelFocusContextKey;\n        this.panelOptions = panelOptions;\n        this.minimumWidth = 300;\n        this.maximumWidth = Number.POSITIVE_INFINITY;\n        this.minimumHeight = 77;\n        this.maximumHeight = Number.POSITIVE_INFINITY;\n        this.snap = true;\n        this.onDidPaneCompositeClose = this.onDidCompositeClose.event;\n        this.compositeActions = ( new Map());\n        this.panelDisposables = ( new Map());\n        this.blockOpeningPanel = false;\n        this.extensionsRegistered = false;\n        this.enabledViewContainersContextKeys = ( new Map());\n        this.panelRegistry = ( Registry.as(panelRegistryId));\n        this.dndHandler = ( new CompositeDragAndDrop(\n            this.viewDescriptorService,\n            this.viewContainerLocation,\n            (id, focus) => this.openPaneComposite(id, focus).then(panel => panel || null),\n            (from, to, before) => this.compositeBar.move(from, to, before?.horizontallyBefore),\n            () => this.compositeBar.getCompositeBarItems()\n        ));\n        this.compositeBar = this._register(this.instantiationService.createInstance(CompositeBar, this.getCachedPanels(), {\n            icon: !!this.panelOptions.useIcons,\n            orientation: 0 ,\n            activityHoverOptions: this.getActivityHoverOptions(),\n            openComposite: (compositeId, preserveFocus) => this.openPaneComposite(compositeId, !preserveFocus).then(panel => panel || null),\n            getActivityAction: compositeId => this.getCompositeActions(compositeId).activityAction,\n            getCompositePinnedAction: compositeId => this.getCompositeActions(compositeId).pinnedAction,\n            getCompositeBadgeAction: compositeId => this.getCompositeActions(compositeId).badgeAction,\n            getOnCompositeClickAction: compositeId => this.instantiationService.createInstance(PanelActivityAction, assertIsDefined(this.getPaneComposite(compositeId)), this.viewContainerLocation),\n            fillExtraContextMenuActions: actions => ( this.fillExtraContextMenuActions(actions)),\n            getContextMenuActionsForComposite: compositeId => this.getContextMenuActionsForComposite(compositeId),\n            getDefaultCompositeId: () => viewDescriptorService.getDefaultViewContainer(this.viewContainerLocation)?.id,\n            hidePart: () => this.layoutService.setPartHidden(true, this.partId),\n            dndHandler: this.dndHandler,\n            compositeSize: 0,\n            overflowActionSize: 44,\n            colors: theme => ({\n                activeBackgroundColor: theme.getColor(this.backgroundColor),\n                inactiveBackgroundColor: theme.getColor(this.backgroundColor),\n                activeBorderBottomColor: theme.getColor(PANEL_ACTIVE_TITLE_BORDER),\n                activeForegroundColor: theme.getColor(PANEL_ACTIVE_TITLE_FOREGROUND),\n                inactiveForegroundColor: theme.getColor(PANEL_INACTIVE_TITLE_FOREGROUND),\n                badgeBackground: theme.getColor(badgeBackground),\n                badgeForeground: theme.getColor(badgeForeground),\n                dragAndDropBorder: theme.getColor(PANEL_DRAG_AND_DROP_BORDER)\n            })\n        }));\n        this.registerListeners();\n        this.onDidRegisterPanels([...this.getPaneComposites()]);\n        this.globalActions = this._register(this.instantiationService.createInstance(CompositeMenuActions, partId === \"workbench.parts.panel\"  ? MenuId.PanelTitle : MenuId.AuxiliaryBarTitle, undefined, undefined));\n        this._register(this.globalActions.onDidChange(() => this.updateGlobalToolbarActions()));\n    }\n    getContextMenuActionsForComposite(compositeId) {\n        const result = [];\n        const viewContainer = this.viewDescriptorService.getViewContainerById(compositeId);\n        const defaultLocation = this.viewDescriptorService.getDefaultViewContainerLocation(viewContainer);\n        if (defaultLocation !== this.viewDescriptorService.getViewContainerLocation(viewContainer)) {\n            result.push(toAction({ id: 'resetLocationAction', label: ( localize('resetLocation', \"Reset Location\")), run: () => this.viewDescriptorService.moveViewContainerToLocation(viewContainer, defaultLocation) }));\n        }\n        else {\n            const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n            if (viewContainerModel.allViewDescriptors.length === 1) {\n                const viewToReset = viewContainerModel.allViewDescriptors[0];\n                const defaultContainer = this.viewDescriptorService.getDefaultContainerById(viewToReset.id);\n                if (defaultContainer !== viewContainer) {\n                    result.push(toAction({ id: 'resetLocationAction', label: ( localize('resetLocation', \"Reset Location\")), run: () => this.viewDescriptorService.moveViewsToContainer([viewToReset], defaultContainer) }));\n                }\n            }\n        }\n        return result;\n    }\n    onDidRegisterPanels(panels) {\n        const cachedPanels = this.getCachedPanels();\n        for (const panel of panels) {\n            const cachedPanel = cachedPanels.filter(({ id }) => id === panel.id)[0];\n            const activePanel = this.getActivePaneComposite();\n            const isActive = activePanel?.getId() === panel.id ||\n                (this.extensionsRegistered && this.compositeBar.getVisibleComposites().length === 0);\n            if (isActive || !this.shouldBeHidden(panel.id, cachedPanel)) {\n                const newPanel = {\n                    id: panel.id,\n                    name: panel.name,\n                    order: panel.order,\n                    requestedIndex: panel.requestedIndex\n                };\n                this.compositeBar.addComposite(newPanel);\n                if (!cachedPanel) {\n                    this.compositeBar.pin(panel.id);\n                }\n                if (isActive) {\n                    this.compositeBar.activateComposite(panel.id);\n                    if (!activePanel && this.element && this.layoutService.isVisible(this.partId)) {\n                        this.doOpenPanel(panel.id);\n                    }\n                }\n            }\n        }\n        for (const panel of panels) {\n            const viewContainer = this.getViewContainer(panel.id);\n            const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n            this.updateActivity(viewContainer, viewContainerModel);\n            this.showOrHideViewContainer(viewContainer, viewContainerModel);\n            const disposables = ( new DisposableStore());\n            disposables.add(viewContainerModel.onDidChangeActiveViewDescriptors(() => this.showOrHideViewContainer(viewContainer, viewContainerModel)));\n            disposables.add(viewContainerModel.onDidChangeContainerInfo(() => this.updateActivity(viewContainer, viewContainerModel)));\n            this.panelDisposables.set(panel.id, disposables);\n        }\n    }\n    async onDidDeregisterPanel(panelId) {\n        const disposable = this.panelDisposables.get(panelId);\n        disposable?.dispose();\n        this.panelDisposables.delete(panelId);\n        const activeContainers = this.viewDescriptorService.getViewContainersByLocation(this.viewContainerLocation)\n            .filter(container => this.viewDescriptorService.getViewContainerModel(container).activeViewDescriptors.length > 0);\n        if (activeContainers.length) {\n            if (this.getActivePaneComposite()?.getId() === panelId) {\n                const defaultPanelId = this.viewDescriptorService.getDefaultViewContainer(this.viewContainerLocation)?.id;\n                const containerToOpen = activeContainers.filter(c => c.id === defaultPanelId)[0] || activeContainers[0];\n                await this.openPaneComposite(containerToOpen.id);\n            }\n        }\n        else {\n            this.layoutService.setPartHidden(true, this.partId);\n        }\n        this.removeComposite(panelId);\n    }\n    updateActivity(viewContainer, viewContainerModel) {\n        const cachedTitle = this.getPlaceholderViewContainers().filter(panel => panel.id === viewContainer.id)[0]?.name;\n        const activity = {\n            id: viewContainer.id,\n            name: this.extensionsRegistered || cachedTitle === undefined ? viewContainerModel.title : cachedTitle,\n            keybindingId: viewContainerModel.keybindingId\n        };\n        const { activityAction, pinnedAction } = this.getCompositeActions(viewContainer.id);\n        activityAction.setActivity(this.toActivity(viewContainerModel));\n        if (pinnedAction instanceof PlaceHolderToggleCompositePinnedAction) {\n            pinnedAction.setActivity(activity);\n        }\n        this.compositeBar.recomputeSizes();\n        this.layoutCompositeBar();\n        if (this.extensionsRegistered) {\n            this.saveCachedPanels();\n        }\n    }\n    toActivity(viewContainerModel) {\n        return BasePanelPart.toActivity(viewContainerModel.viewContainer.id, viewContainerModel.title, this.panelOptions.useIcons ? viewContainerModel.icon : undefined, viewContainerModel.keybindingId);\n    }\n    static toActivity(id, name, icon, keybindingId) {\n        let classNames = undefined;\n        let iconUrl = undefined;\n        if (URI.isUri(icon)) {\n            iconUrl = icon;\n            const cssUrl = asCSSUrl(icon);\n            const hash = ( new StringSHA1());\n            hash.update(cssUrl);\n            const iconId = `activity-${id.replace(/\\./g, '-')}-${hash.digest()}`;\n            classNames = [iconId, 'uri-icon'];\n            const iconClass = `.monaco-workbench .basepanel .monaco-action-bar .action-label.${iconId}`;\n            createCSSRule(iconClass, `\n\t\t\t\tmask: ${cssUrl} no-repeat 50% 50%;\n\t\t\t\tmask-size: 16px;\n\t\t\t\t-webkit-mask: ${cssUrl} no-repeat 50% 50%;\n\t\t\t\t-webkit-mask-size: 16px;\n\t\t\t\tmask-origin: padding;\n\t\t\t\t-webkit-mask-origin: padding;\n\t\t\t`);\n        }\n        else if (ThemeIcon.isThemeIcon(icon)) {\n            classNames = ThemeIcon.asClassNameArray(icon);\n        }\n        return { id, name, classNames, iconUrl, keybindingId };\n    }\n    showOrHideViewContainer(viewContainer, viewContainerModel) {\n        let contextKey = this.enabledViewContainersContextKeys.get(viewContainer.id);\n        if (!contextKey) {\n            contextKey = this.contextKeyService.createKey(getEnabledViewContainerContextKey(viewContainer.id), false);\n            this.enabledViewContainersContextKeys.set(viewContainer.id, contextKey);\n        }\n        if (viewContainerModel.activeViewDescriptors.length) {\n            contextKey.set(true);\n            this.compositeBar.addComposite({ id: viewContainer.id, name: typeof viewContainer.title === 'string' ? viewContainer.title : viewContainer.title.value, order: viewContainer.order, requestedIndex: viewContainer.requestedIndex });\n            if (this.layoutService.isRestored() && this.layoutService.isVisible(this.partId)) {\n                const activeComposite = this.getActiveComposite();\n                if (activeComposite === undefined || activeComposite.getId() === viewContainer.id) {\n                    this.compositeBar.activateComposite(viewContainer.id);\n                }\n            }\n            this.layoutCompositeBar();\n            this.layoutEmptyMessage();\n        }\n        else if (viewContainer.hideIfEmpty) {\n            contextKey.set(false);\n            this.hideComposite(viewContainer.id);\n        }\n    }\n    shouldBeHidden(panelId, cachedPanel) {\n        const viewContainer = this.getViewContainer(panelId);\n        if (!viewContainer || !viewContainer.hideIfEmpty) {\n            return false;\n        }\n        return cachedPanel?.views && cachedPanel.views.length\n            ? cachedPanel.views.every(({ when }) => !!when && !this.contextKeyService.contextMatchesRules(ContextKeyExpr.deserialize(when)))\n            : false;\n    }\n    registerListeners() {\n        this._register(this.registry.onDidRegister(panel => this.onDidRegisterPanels([panel])));\n        this._register(this.registry.onDidDeregister(panel => this.onDidDeregisterPanel(panel.id)));\n        this._register(this.onDidPaneCompositeOpen(panel => this.onPanelOpen(panel)));\n        this._register(this.onDidPaneCompositeClose(this.onPanelClose, this));\n        const disposables = this._register(( new DisposableStore()));\n        this._register(this.extensionService.onDidRegisterExtensions(() => {\n            disposables.clear();\n            this.onDidRegisterExtensions();\n            this.compositeBar.onDidChange(() => this.saveCachedPanels(), this, disposables);\n            this.storageService.onDidChangeValue(e => this.onDidStorageValueChange(e), this, disposables);\n        }));\n    }\n    onDidRegisterExtensions() {\n        this.extensionsRegistered = true;\n        const panels = this.getPaneComposites();\n        for (const { id } of this.getCachedPanels()) {\n            if (panels.every(panel => panel.id !== id)) {\n                if (this.viewDescriptorService.isViewContainerRemovedPermanently(id)) {\n                    this.removeComposite(id);\n                }\n                else {\n                    this.hideComposite(id);\n                }\n            }\n        }\n        this.saveCachedPanels();\n    }\n    hideComposite(compositeId) {\n        this.compositeBar.hideComposite(compositeId);\n        const compositeActions = this.compositeActions.get(compositeId);\n        if (compositeActions) {\n            compositeActions.activityAction.dispose();\n            compositeActions.pinnedAction.dispose();\n            this.compositeActions.delete(compositeId);\n        }\n    }\n    onPanelOpen(panel) {\n        this.activePanelContextKey.set(panel.getId());\n        const foundPanel = this.panelRegistry.getPaneComposite(panel.getId());\n        if (foundPanel) {\n            this.compositeBar.addComposite(foundPanel);\n        }\n        this.compositeBar.activateComposite(panel.getId());\n        const panelDescriptor = this.panelRegistry.getPaneComposite(panel.getId());\n        if (panelDescriptor) {\n            const viewContainer = this.getViewContainer(panelDescriptor.id);\n            if (viewContainer?.hideIfEmpty) {\n                const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n                if (viewContainerModel.activeViewDescriptors.length === 0) {\n                    this.hideComposite(panelDescriptor.id);\n                }\n            }\n        }\n        this.layoutCompositeBar();\n        this.layoutEmptyMessage();\n    }\n    onPanelClose(panel) {\n        const id = panel.getId();\n        if (this.activePanelContextKey.get() === id) {\n            this.activePanelContextKey.reset();\n        }\n        this.compositeBar.deactivateComposite(panel.getId());\n        this.layoutEmptyMessage();\n    }\n    create(parent) {\n        this.element = parent;\n        super.create(parent);\n        this.createEmptyPanelMessage();\n        const focusTracker = this._register(trackFocus(parent));\n        this._register(focusTracker.onDidFocus(() => this.panelFocusContextKey.set(true)));\n        this._register(focusTracker.onDidBlur(() => this.panelFocusContextKey.set(false)));\n    }\n    createEmptyPanelMessage() {\n        const contentArea = this.getContentArea();\n        this.emptyPanelMessageElement = document.createElement('div');\n        this.emptyPanelMessageElement.classList.add('empty-panel-message-area');\n        const messageElement = document.createElement('div');\n        messageElement.classList.add('empty-panel-message');\n        messageElement.innerText = ( localize('panel.emptyMessage', \"Drag a view here to display.\"));\n        this.emptyPanelMessageElement.appendChild(messageElement);\n        contentArea.appendChild(this.emptyPanelMessageElement);\n        this._register(CompositeDragAndDropObserver.INSTANCE.registerTarget(this.emptyPanelMessageElement, {\n            onDragOver: (e) => {\n                EventHelper.stop(e.eventData, true);\n                const validDropTarget = this.dndHandler.onDragEnter(e.dragAndDropData, undefined, e.eventData);\n                toggleDropEffect(e.eventData.dataTransfer, 'move', validDropTarget);\n            },\n            onDragEnter: (e) => {\n                EventHelper.stop(e.eventData, true);\n                const validDropTarget = this.dndHandler.onDragEnter(e.dragAndDropData, undefined, e.eventData);\n                this.emptyPanelMessageElement.style.backgroundColor = validDropTarget ? this.theme.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND)?.toString() || '' : '';\n            },\n            onDragLeave: (e) => {\n                EventHelper.stop(e.eventData, true);\n                this.emptyPanelMessageElement.style.backgroundColor = '';\n            },\n            onDragEnd: (e) => {\n                EventHelper.stop(e.eventData, true);\n                this.emptyPanelMessageElement.style.backgroundColor = '';\n            },\n            onDrop: (e) => {\n                EventHelper.stop(e.eventData, true);\n                this.emptyPanelMessageElement.style.backgroundColor = '';\n                this.dndHandler.drop(e.dragAndDropData, undefined, e.eventData);\n            },\n        }));\n    }\n    createTitleArea(parent) {\n        const element = super.createTitleArea(parent);\n        const globalTitleActionsContainer = element.appendChild($('.global-actions'));\n        this.globalToolBar = this._register(( new ToolBar(globalTitleActionsContainer, this.contextMenuService, {\n            actionViewItemProvider: action => this.actionViewItemProvider(action),\n            orientation: 0 ,\n            getKeyBinding: action => this.keybindingService.lookupKeybinding(action.id),\n            anchorAlignmentProvider: () => this.getTitleAreaDropDownAnchorAlignment(),\n            toggleMenuTitle: ( localize('moreActions', \"More Actions...\"))\n        })));\n        this.updateGlobalToolbarActions();\n        return element;\n    }\n    updateStyles() {\n        super.updateStyles();\n        const container = assertIsDefined(this.getContainer());\n        container.style.backgroundColor = this.getColor(this.backgroundColor) || '';\n        const borderColor = this.getColor(contrastBorder) || '';\n        container.style.borderLeftColor = borderColor;\n        container.style.borderRightColor = borderColor;\n        const title = this.getTitleArea();\n        if (title) {\n            title.style.borderTopColor = this.getColor(contrastBorder) || '';\n        }\n    }\n    doOpenPanel(id, focus) {\n        if (this.blockOpeningPanel) {\n            return undefined;\n        }\n        if (!this.layoutService.isVisible(this.partId)) {\n            try {\n                this.blockOpeningPanel = true;\n                this.layoutService.setPartHidden(false, this.partId);\n            }\n            finally {\n                this.blockOpeningPanel = false;\n            }\n        }\n        return this.openComposite(id, focus);\n    }\n    async openPaneComposite(id, focus) {\n        if (typeof id === 'string' && this.getPaneComposite(id)) {\n            return this.doOpenPanel(id, focus);\n        }\n        await this.extensionService.whenInstalledExtensionsRegistered();\n        if (typeof id === 'string' && this.getPaneComposite(id)) {\n            return this.doOpenPanel(id, focus);\n        }\n        return undefined;\n    }\n    showActivity(panelId, badge, clazz) {\n        return this.compositeBar.showActivity(panelId, badge, clazz);\n    }\n    getPaneComposite(panelId) {\n        return this.panelRegistry.getPaneComposite(panelId);\n    }\n    getPaneComposites() {\n        return this.panelRegistry.getPaneComposites()\n            .sort((v1, v2) => {\n            if (typeof v1.order !== 'number') {\n                return 1;\n            }\n            if (typeof v2.order !== 'number') {\n                return -1;\n            }\n            return v1.order - v2.order;\n        });\n    }\n    getPinnedPaneCompositeIds() {\n        const pinnedCompositeIds = ( this.compositeBar.getPinnedComposites().map(c => c.id));\n        return ( this.getPaneComposites()\n            .filter(p => pinnedCompositeIds.includes(p.id))\n            .sort((p1, p2) => pinnedCompositeIds.indexOf(p1.id) - pinnedCompositeIds.indexOf(p2.id))\n            .map(p => p.id));\n    }\n    getVisiblePaneCompositeIds() {\n        return ( this.compositeBar.getVisibleComposites()\n            .filter(v => this.getActivePaneComposite()?.getId() === v.id || this.compositeBar.isPinned(v.id))\n            .map(v => v.id));\n    }\n    getActivePaneComposite() {\n        return this.getActiveComposite();\n    }\n    getLastActivePaneCompositeId() {\n        return this.getLastActiveCompositeId();\n    }\n    hideActivePaneComposite() {\n        if (this.layoutService.isVisible(this.partId)) {\n            this.layoutService.setPartHidden(true, this.partId);\n        }\n        this.hideActiveComposite();\n    }\n    createTitleLabel(parent) {\n        const titleArea = this.compositeBar.create(parent);\n        titleArea.classList.add('panel-switcher-container');\n        return {\n            updateTitle: (id, title, keybinding) => {\n                const action = this.compositeBar.getAction(id);\n                if (action) {\n                    action.label = title;\n                }\n            },\n            updateStyles: () => {\n            }\n        };\n    }\n    onTitleAreaUpdate(compositeId) {\n        super.onTitleAreaUpdate(compositeId);\n        this.layoutCompositeBar();\n    }\n    layout(width, height, top, left) {\n        if (!this.layoutService.isVisible(this.partId)) {\n            return;\n        }\n        this.contentDimension = ( new Dimension(width, height));\n        super.layout(this.contentDimension.width, this.contentDimension.height, top, left);\n        this.layoutCompositeBar();\n        this.layoutEmptyMessage();\n    }\n    layoutCompositeBar() {\n        if (this.contentDimension && this.dimension) {\n            let availableWidth = this.contentDimension.width - 40;\n            if (this.toolBar) {\n                availableWidth = Math.max(BasePanelPart.MIN_COMPOSITE_BAR_WIDTH, availableWidth - this.getToolbarWidth());\n            }\n            this.compositeBar.layout(( new Dimension(availableWidth, this.dimension.height)));\n        }\n    }\n    layoutEmptyMessage() {\n        this.emptyPanelMessageElement?.classList.toggle('visible', this.compositeBar.getVisibleComposites().length === 0);\n    }\n    getViewContainer(id) {\n        const viewContainer = this.viewDescriptorService.getViewContainerById(id);\n        return viewContainer && this.viewDescriptorService.getViewContainerLocation(viewContainer) === this.viewContainerLocation ? viewContainer : undefined;\n    }\n    updateGlobalToolbarActions() {\n        const primaryActions = this.globalActions.getPrimaryActions();\n        const secondaryActions = this.globalActions.getSecondaryActions();\n        this.globalToolBar?.setActions(prepareActions(primaryActions), prepareActions(secondaryActions));\n    }\n    getCompositeActions(compositeId) {\n        let compositeActions = this.compositeActions.get(compositeId);\n        if (!compositeActions) {\n            const viewContainer = this.getViewContainer(compositeId);\n            if (viewContainer) {\n                const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n                compositeActions = {\n                    activityAction: this.instantiationService.createInstance(PanelActivityAction, this.toActivity(viewContainerModel), this.viewContainerLocation),\n                    pinnedAction: ( new ToggleCompositePinnedAction(this.toActivity(viewContainerModel), this.compositeBar)),\n                    badgeAction: ( new ToggleCompositeBadgeAction(this.toActivity(viewContainerModel), this.compositeBar))\n                };\n            }\n            else {\n                compositeActions = {\n                    activityAction: this.instantiationService.createInstance(PlaceHolderPanelActivityAction, compositeId, this.viewContainerLocation),\n                    pinnedAction: ( new PlaceHolderToggleCompositePinnedAction(compositeId, this.compositeBar)),\n                    badgeAction: ( new PlaceHolderToggleCompositeBadgeAction(compositeId, this.compositeBar))\n                };\n            }\n            this.compositeActions.set(compositeId, compositeActions);\n        }\n        return compositeActions;\n    }\n    removeComposite(compositeId) {\n        if (super.removeComposite(compositeId)) {\n            this.compositeBar.removeComposite(compositeId);\n            const compositeActions = this.compositeActions.get(compositeId);\n            if (compositeActions) {\n                compositeActions.activityAction.dispose();\n                compositeActions.pinnedAction.dispose();\n                this.compositeActions.delete(compositeId);\n            }\n            return true;\n        }\n        return false;\n    }\n    getToolbarWidth() {\n        const activePanel = this.getActivePaneComposite();\n        if (!activePanel || !this.toolBar) {\n            return 0;\n        }\n        return this.toolBar.getItemsWidth() + (this.globalToolBar?.getItemsWidth() ?? 0);\n    }\n    onDidStorageValueChange(e) {\n        if (e.key === this.pinnedPanelsKey && e.scope === 0\n            && this.cachedPanelsValue !== this.getStoredCachedPanelsValue() ) {\n            this._cachedPanelsValue = undefined;\n            const newCompositeItems = [];\n            const compositeItems = this.compositeBar.getCompositeBarItems();\n            const cachedPanels = this.getCachedPanels();\n            for (const cachedPanel of cachedPanels) {\n                newCompositeItems.push({\n                    id: cachedPanel.id,\n                    name: cachedPanel.name,\n                    order: cachedPanel.order,\n                    pinned: cachedPanel.pinned,\n                    visible: !!compositeItems.find(({ id }) => id === cachedPanel.id)\n                });\n            }\n            for (let index = 0; index < compositeItems.length; index++) {\n                if (!( newCompositeItems.some(({ id }) => id === compositeItems[index].id))) {\n                    newCompositeItems.splice(index, 0, compositeItems[index]);\n                }\n            }\n            this.compositeBar.setCompositeBarItems(newCompositeItems);\n        }\n    }\n    saveCachedPanels() {\n        const state = [];\n        const placeholders = [];\n        const compositeItems = this.compositeBar.getCompositeBarItems();\n        for (const compositeItem of compositeItems) {\n            const viewContainer = this.getViewContainer(compositeItem.id);\n            if (viewContainer) {\n                const viewContainerModel = this.viewDescriptorService.getViewContainerModel(viewContainer);\n                state.push({ id: compositeItem.id, name: viewContainerModel.title, pinned: compositeItem.pinned, order: compositeItem.order, visible: compositeItem.visible });\n                placeholders.push({ id: compositeItem.id, name: this.getCompositeActions(compositeItem.id).activityAction.label });\n            }\n            else {\n                state.push({ id: compositeItem.id, name: compositeItem.name, pinned: compositeItem.pinned, order: compositeItem.order, visible: compositeItem.visible });\n            }\n        }\n        this.cachedPanelsValue = JSON.stringify(state);\n        this.setPlaceholderViewContainers(placeholders);\n    }\n    getCachedPanels() {\n        const registeredPanels = this.getPaneComposites();\n        const storedStates = JSON.parse(this.cachedPanelsValue);\n        const cachedPanels = ( storedStates.map(c => {\n            const serialized = typeof c === 'string'  ? { id: c, pinned: true, order: undefined, visible: true } : c;\n            const registered = ( registeredPanels.some(p => p.id === serialized.id));\n            serialized.visible = registered ? isUndefinedOrNull(serialized.visible) ? true : serialized.visible : false;\n            return serialized;\n        }));\n        for (const placeholderViewContainer of this.getPlaceholderViewContainers()) {\n            const cachedViewContainer = cachedPanels.filter(cached => cached.id === placeholderViewContainer.id)[0];\n            if (cachedViewContainer) {\n                cachedViewContainer.name = placeholderViewContainer.name;\n            }\n        }\n        return cachedPanels;\n    }\n    get cachedPanelsValue() {\n        if (!this._cachedPanelsValue) {\n            this._cachedPanelsValue = this.getStoredCachedPanelsValue();\n        }\n        return this._cachedPanelsValue;\n    }\n    set cachedPanelsValue(cachedViewletsValue) {\n        if (this.cachedPanelsValue !== cachedViewletsValue) {\n            this._cachedPanelsValue = cachedViewletsValue;\n            this.setStoredCachedViewletsValue(cachedViewletsValue);\n        }\n    }\n    getStoredCachedPanelsValue() {\n        return this.storageService.get(this.pinnedPanelsKey, 0 , '[]');\n    }\n    setStoredCachedViewletsValue(value) {\n        this.storageService.store(this.pinnedPanelsKey, value, 0 , 0 );\n    }\n    getPlaceholderViewContainers() {\n        return JSON.parse(this.placeholderViewContainersValue);\n    }\n    setPlaceholderViewContainers(placeholderViewContainers) {\n        this.placeholderViewContainersValue = JSON.stringify(placeholderViewContainers);\n    }\n    get placeholderViewContainersValue() {\n        if (!this._placeholderViewContainersValue) {\n            this._placeholderViewContainersValue = this.getStoredPlaceholderViewContainersValue();\n        }\n        return this._placeholderViewContainersValue;\n    }\n    set placeholderViewContainersValue(placeholderViewContainesValue) {\n        if (this.placeholderViewContainersValue !== placeholderViewContainesValue) {\n            this._placeholderViewContainersValue = placeholderViewContainesValue;\n            this.setStoredPlaceholderViewContainersValue(placeholderViewContainesValue);\n        }\n    }\n    getStoredPlaceholderViewContainersValue() {\n        return this.storageService.get(this.placeholdeViewContainersKey, 1 , '[]');\n    }\n    setStoredPlaceholderViewContainersValue(value) {\n        this.storageService.store(this.placeholdeViewContainersKey, value, 1 , 1 );\n    }\n};\nBasePanelPart = ( __decorate([\n    ( __param(0, INotificationService)),\n    ( __param(1, IStorageService)),\n    ( __param(2, IContextMenuService)),\n    ( __param(3, IWorkbenchLayoutService)),\n    ( __param(4, IKeybindingService)),\n    ( __param(5, IInstantiationService)),\n    ( __param(6, IThemeService)),\n    ( __param(7, IViewDescriptorService)),\n    ( __param(8, IContextKeyService)),\n    ( __param(9, IExtensionService))\n], BasePanelPart));\nlet PanelPart = class PanelPart extends BasePanelPart {\n    static { this.activePanelSettingsKey = 'workbench.panelpart.activepanelid'; }\n    constructor(notificationService, storageService, telemetryService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, viewDescriptorService, contextKeyService, extensionService, commandService, menuService) {\n        super(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, viewDescriptorService, contextKeyService, extensionService, \"workbench.parts.panel\" , PanelPart.activePanelSettingsKey, 'workbench.panel.pinnedPanels', 'workbench.panel.placeholderPanels', Extensions.Panels, PANEL_BACKGROUND, 1 , ActivePanelContext.bindTo(contextKeyService), PanelFocusContext.bindTo(contextKeyService), {\n            useIcons: false,\n            hasTitle: true\n        });\n        this.commandService = commandService;\n        this.menuService = menuService;\n    }\n    updateStyles() {\n        super.updateStyles();\n        const container = assertIsDefined(this.getContainer());\n        const borderColor = this.getColor(PANEL_BORDER) || this.getColor(contrastBorder) || '';\n        container.style.borderLeftColor = borderColor;\n        container.style.borderRightColor = borderColor;\n        const title = this.getTitleArea();\n        if (title) {\n            title.style.borderTopColor = this.getColor(PANEL_BORDER) || this.getColor(contrastBorder) || '';\n        }\n    }\n    getActivityHoverOptions() {\n        return {\n            position: () => this.layoutService.getPanelPosition() === 2  && !this.layoutService.isPanelMaximized() ? 3  : 2 ,\n        };\n    }\n    fillExtraContextMenuActions(actions) {\n        const panelPositionMenu = this.menuService.createMenu(MenuId.PanelPositionMenu, this.contextKeyService);\n        const panelAlignMenu = this.menuService.createMenu(MenuId.PanelAlignmentMenu, this.contextKeyService);\n        const positionActions = [];\n        const alignActions = [];\n        createAndFillInContextMenuActions(panelPositionMenu, { shouldForwardArgs: true }, { primary: [], secondary: positionActions });\n        createAndFillInContextMenuActions(panelAlignMenu, { shouldForwardArgs: true }, { primary: [], secondary: alignActions });\n        panelAlignMenu.dispose();\n        panelPositionMenu.dispose();\n        actions.push(...[\n            ( new Separator()),\n            ( new SubmenuAction('workbench.action.panel.position', ( localize('panel position', \"Panel Position\")), positionActions)),\n            ( new SubmenuAction('workbench.action.panel.align', ( localize('align panel', \"Align Panel\")), alignActions)),\n            toAction({ id: TogglePanelAction.ID, label: ( localize('hidePanel', \"Hide Panel\")), run: () => this.commandService.executeCommand(TogglePanelAction.ID) })\n        ]);\n    }\n    layout(width, height, top, left) {\n        let dimensions;\n        if (this.layoutService.getPanelPosition() === 1 ) {\n            dimensions = ( new Dimension(width - 1, height));\n        }\n        else {\n            dimensions = ( new Dimension(width, height));\n        }\n        super.layout(dimensions.width, dimensions.height, top, left);\n    }\n    toJSON() {\n        return {\n            type: \"workbench.parts.panel\"\n        };\n    }\n};\nPanelPart = ( __decorate([\n    ( __param(0, INotificationService)),\n    ( __param(1, IStorageService)),\n    ( __param(2, ITelemetryService)),\n    ( __param(3, IContextMenuService)),\n    ( __param(4, IWorkbenchLayoutService)),\n    ( __param(5, IKeybindingService)),\n    ( __param(6, IInstantiationService)),\n    ( __param(7, IThemeService)),\n    ( __param(8, IViewDescriptorService)),\n    ( __param(9, IContextKeyService)),\n    ( __param(10, IExtensionService)),\n    ( __param(11, ICommandService)),\n    ( __param(12, IMenuService))\n], PanelPart));\nexport { BasePanelPart, PanelPart };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/auxiliaryBarPart.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { contrastBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { Extensions } from '../../panecomposite.js';\nimport { BasePanelPart } from '../panel/panelPart.js';\nimport { ActiveAuxiliaryContext, AuxiliaryBarFocusContext } from '../../../common/contextkeys.js';\nimport { SIDE_BAR_BACKGROUND, SIDE_BAR_BORDER, SIDE_BAR_FOREGROUND } from '../../../common/theme.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { Separator, toAction } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { ToggleAuxiliaryBarAction } from './auxiliaryBarActions.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { ToggleSidebarPositionAction } from '../../actions/layoutActions.js';\nimport { ICommandService } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nlet AuxiliaryBarPart = class AuxiliaryBarPart extends BasePanelPart {\n    static { this.activePanelSettingsKey = 'workbench.auxiliarybar.activepanelid'; }\n    static { this.pinnedPanelsKey = 'workbench.auxiliarybar.pinnedPanels'; }\n    static { this.placeholdeViewContainersKey = 'workbench.auxiliarybar.placeholderPanels'; }\n    constructor(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, viewDescriptorService, contextKeyService, extensionService, commandService) {\n        super(notificationService, storageService, contextMenuService, layoutService, keybindingService, instantiationService, themeService, viewDescriptorService, contextKeyService, extensionService, \"workbench.parts.auxiliarybar\" , AuxiliaryBarPart.activePanelSettingsKey, AuxiliaryBarPart.pinnedPanelsKey, AuxiliaryBarPart.placeholdeViewContainersKey, Extensions.Auxiliary, SIDE_BAR_BACKGROUND, 2 , ActiveAuxiliaryContext.bindTo(contextKeyService), AuxiliaryBarFocusContext.bindTo(contextKeyService), {\n            useIcons: true,\n            hasTitle: true,\n            borderWidth: () => (this.getColor(SIDE_BAR_BORDER) || this.getColor(contrastBorder)) ? 1 : 0,\n        });\n        this.commandService = commandService;\n        this.minimumWidth = 170;\n        this.maximumWidth = Number.POSITIVE_INFINITY;\n        this.minimumHeight = 0;\n        this.maximumHeight = Number.POSITIVE_INFINITY;\n        this.priority = 1 ;\n    }\n    updateStyles() {\n        super.updateStyles();\n        const container = assertIsDefined(this.getContainer());\n        const borderColor = this.getColor(SIDE_BAR_BORDER) || this.getColor(contrastBorder);\n        const isPositionLeft = this.layoutService.getSideBarPosition() === 1 ;\n        container.style.color = this.getColor(SIDE_BAR_FOREGROUND) || '';\n        container.style.borderLeftColor = borderColor ?? '';\n        container.style.borderRightColor = borderColor ?? '';\n        container.style.borderLeftStyle = borderColor && !isPositionLeft ? 'solid' : 'none';\n        container.style.borderRightStyle = borderColor && isPositionLeft ? 'solid' : 'none';\n        container.style.borderLeftWidth = borderColor && !isPositionLeft ? '1px' : '0px';\n        container.style.borderRightWidth = borderColor && isPositionLeft ? '1px' : '0px';\n    }\n    getActivityHoverOptions() {\n        return {\n            position: () => 2\n        };\n    }\n    fillExtraContextMenuActions(actions) {\n        const currentPositionRight = this.layoutService.getSideBarPosition() === 0 ;\n        actions.push(...[\n            ( new Separator()),\n            toAction({ id: ToggleSidebarPositionAction.ID, label: currentPositionRight ? ( localize('move second side bar left', \"Move Secondary Side Bar Left\")) : ( localize('move second side bar right', \"Move Secondary Side Bar Right\")), run: () => this.commandService.executeCommand(ToggleSidebarPositionAction.ID) }),\n            toAction({ id: ToggleAuxiliaryBarAction.ID, label: ( localize('hide second side bar', \"Hide Secondary Side Bar\")), run: () => this.commandService.executeCommand(ToggleAuxiliaryBarAction.ID) })\n        ]);\n    }\n    toJSON() {\n        return {\n            type: \"workbench.parts.auxiliarybar\"\n        };\n    }\n};\nAuxiliaryBarPart = ( __decorate([\n    ( __param(0, INotificationService)),\n    ( __param(1, IStorageService)),\n    ( __param(2, IContextMenuService)),\n    ( __param(3, IWorkbenchLayoutService)),\n    ( __param(4, IKeybindingService)),\n    ( __param(5, IInstantiationService)),\n    ( __param(6, IThemeService)),\n    ( __param(7, IViewDescriptorService)),\n    ( __param(8, IContextKeyService)),\n    ( __param(9, IExtensionService)),\n    ( __param(10, ICommandService))\n], AuxiliaryBarPart));\nexport { AuxiliaryBarPart };\n","import { __decorate, __param } from '../../../../../node_modules/tslib/tslib.es6.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { ActivitybarPart } from './activitybar/activitybarPart.js';\nimport { AuxiliaryBarPart } from './auxiliarybar/auxiliaryBarPart.js';\nimport { PanelPart } from './panel/panelPart.js';\nimport { SidebarPart } from './sidebar/sidebarPart.js';\nimport { ViewContainerLocations } from '../../common/views.js';\nimport { Disposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nlet PaneCompositeParts = class PaneCompositeParts extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.paneCompositeParts = ( new Map());\n        this.paneCompositeSelectorParts = ( new Map());\n        const panelPart = instantiationService.createInstance(PanelPart);\n        const sideBarPart = instantiationService.createInstance(SidebarPart);\n        const auxiliaryBarPart = instantiationService.createInstance(AuxiliaryBarPart);\n        const activityBarPart = instantiationService.createInstance(ActivitybarPart, sideBarPart);\n        this.paneCompositeParts.set(1 , panelPart);\n        this.paneCompositeParts.set(0 , sideBarPart);\n        this.paneCompositeParts.set(2 , auxiliaryBarPart);\n        this.paneCompositeSelectorParts.set(1 , panelPart);\n        this.paneCompositeSelectorParts.set(0 , activityBarPart);\n        this.paneCompositeSelectorParts.set(2 , auxiliaryBarPart);\n        const eventDisposables = this._register(( new DisposableStore()));\n        this.onDidPaneCompositeOpen = Event.any(...( ViewContainerLocations.map(loc => ( Event.map(\n            this.paneCompositeParts.get(loc).onDidPaneCompositeOpen,\n            composite => { return { composite, viewContainerLocation: loc }; },\n            eventDisposables\n        )))));\n        this.onDidPaneCompositeClose = Event.any(...( ViewContainerLocations.map(loc => ( Event.map(\n            this.paneCompositeParts.get(loc).onDidPaneCompositeClose,\n            composite => { return { composite, viewContainerLocation: loc }; },\n            eventDisposables\n        )))));\n    }\n    openPaneComposite(id, viewContainerLocation, focus) {\n        return this.getPartByLocation(viewContainerLocation).openPaneComposite(id, focus);\n    }\n    getActivePaneComposite(viewContainerLocation) {\n        return this.getPartByLocation(viewContainerLocation).getActivePaneComposite();\n    }\n    getPaneComposite(id, viewContainerLocation) {\n        return this.getPartByLocation(viewContainerLocation).getPaneComposite(id);\n    }\n    getPaneComposites(viewContainerLocation) {\n        return this.getPartByLocation(viewContainerLocation).getPaneComposites();\n    }\n    getPinnedPaneCompositeIds(viewContainerLocation) {\n        return this.getSelectorPartByLocation(viewContainerLocation).getPinnedPaneCompositeIds();\n    }\n    getVisiblePaneCompositeIds(viewContainerLocation) {\n        return this.getSelectorPartByLocation(viewContainerLocation).getVisiblePaneCompositeIds();\n    }\n    getProgressIndicator(id, viewContainerLocation) {\n        return this.getPartByLocation(viewContainerLocation).getProgressIndicator(id);\n    }\n    hideActivePaneComposite(viewContainerLocation) {\n        this.getPartByLocation(viewContainerLocation).hideActivePaneComposite();\n    }\n    getLastActivePaneCompositeId(viewContainerLocation) {\n        return this.getPartByLocation(viewContainerLocation).getLastActivePaneCompositeId();\n    }\n    showActivity(id, viewContainerLocation, badge, clazz, priority) {\n        return this.getSelectorPartByLocation(viewContainerLocation).showActivity(id, badge, clazz, priority);\n    }\n    getPartByLocation(viewContainerLocation) {\n        return assertIsDefined(this.paneCompositeParts.get(viewContainerLocation));\n    }\n    getSelectorPartByLocation(viewContainerLocation) {\n        return assertIsDefined(this.paneCompositeSelectorParts.get(viewContainerLocation));\n    }\n};\nPaneCompositeParts = ( __decorate([\n    ( __param(0, IInstantiationService))\n], PaneCompositeParts));\nexport { PaneCompositeParts };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .workbench-hover{background:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);border-radius:3px;box-shadow:0 2px 8px var(--vscode-widget-shadow);color:var(--vscode-editorHoverWidget-foreground);font-size:13px;line-height:19px;max-width:700px;overflow:hidden;position:relative;z-index:40}.monaco-workbench .workbench-hover hr{border-bottom:none}.monaco-workbench .workbench-hover:not(.skip-fade-in){animation:fadein .1s linear}.monaco-workbench .workbench-hover.compact{font-size:12px}.monaco-workbench .workbench-hover.compact .hover-contents{padding:2px 8px}.monaco-workbench .workbench-hover-container.locked .workbench-hover{outline:1px solid var(--vscode-editorHoverWidget-border)}.monaco-workbench .workbench-hover-container.locked .workbench-hover:focus,.monaco-workbench .workbench-hover-lock:focus{outline:1px solid var(--vscode-focusBorder)}.monaco-workbench .workbench-hover-container.locked .workbench-hover-lock:hover{background:var(--vscode-toolbar-hoverBackground)}.monaco-workbench .workbench-hover-pointer{pointer-events:none;position:absolute;z-index:41}.monaco-workbench .workbench-hover-pointer:after{background-color:var(--vscode-editorHoverWidget-background);border-bottom:1px solid var(--vscode-editorHoverWidget-border);border-right:1px solid var(--vscode-editorHoverWidget-border);content:\\\"\\\";height:5px;position:absolute;width:5px}.monaco-workbench .locked .workbench-hover-pointer:after{border-bottom-width:2px;border-right-width:2px;height:4px;width:4px}.monaco-workbench .workbench-hover-pointer.left{left:-3px}.monaco-workbench .workbench-hover-pointer.right{right:3px}.monaco-workbench .workbench-hover-pointer.top{top:-3px}.monaco-workbench .workbench-hover-pointer.bottom{bottom:3px}.monaco-workbench .workbench-hover-pointer.left:after{transform:rotate(135deg)}.monaco-workbench .workbench-hover-pointer.right:after{transform:rotate(315deg)}.monaco-workbench .workbench-hover-pointer.top:after{transform:rotate(225deg)}.monaco-workbench .workbench-hover-pointer.bottom:after{transform:rotate(45deg)}.monaco-workbench .workbench-hover a{color:var(--vscode-textLink-foreground)}.monaco-workbench .workbench-hover a:focus{outline:1px solid;outline-color:var(--vscode-focusBorder);outline-offset:-1px;text-decoration:underline}.monaco-workbench .workbench-hover a:active,.monaco-workbench .workbench-hover a:hover{color:var(--vscode-textLink-activeForeground)}.monaco-workbench .workbench-hover code{background:var(--vscode-textCodeBlock-background)}.monaco-workbench .workbench-hover .hover-row .actions{background:var(--vscode-editorHoverWidget-statusBarBackground)}.monaco-workbench .workbench-hover.right-aligned{left:1px}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions{flex-direction:row-reverse}.monaco-workbench .workbench-hover.right-aligned .hover-row.status-bar .actions .action-container{margin-left:16px;margin-right:0}\";\nn(css,{});\nexport { css, css as default };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { EDITOR_FONT_DEFAULTS } from 'monaco-editor/esm/vs/editor/common/config/editorOptions.js';\nimport { HoverWidget as HoverWidget$1, HoverAction } from 'monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js';\nimport { Widget } from 'monaco-editor/esm/vs/base/browser/ui/widget.js';\nimport { IOpenerService } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { openLinkFromMarkdown, MarkdownRenderer } from 'monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js';\nimport { isMarkdownString } from 'monaco-editor/esm/vs/base/common/htmlContent.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { isMacintosh } from 'monaco-editor/esm/vs/base/common/platform.js';\nconst $ = dom.$;\nlet HoverWidget = class HoverWidget extends Widget {\n    get isDisposed() { return this._isDisposed; }\n    get isMouseIn() { return this._lockMouseTracker.isMouseIn; }\n    get domNode() { return this._hover.containerDomNode; }\n    get onDispose() { return this._onDispose.event; }\n    get onRequestLayout() { return this._onRequestLayout.event; }\n    get anchor() { return this._hoverPosition === 2  ? 0  : 1 ; }\n    get x() { return this._x; }\n    get y() { return this._y; }\n    get isLocked() { return this._isLocked; }\n    set isLocked(value) {\n        if (this._isLocked === value) {\n            return;\n        }\n        this._isLocked = value;\n        this._hoverContainer.classList.toggle('locked', this._isLocked);\n    }\n    constructor(options, _keybindingService, _configurationService, _openerService, _instantiationService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._configurationService = _configurationService;\n        this._openerService = _openerService;\n        this._instantiationService = _instantiationService;\n        this._messageListeners = ( new DisposableStore());\n        this._isDisposed = false;\n        this._forcePosition = false;\n        this._x = 0;\n        this._y = 0;\n        this._isLocked = false;\n        this._enableFocusTraps = false;\n        this._addedFocusTrap = false;\n        this._onDispose = this._register(( new Emitter()));\n        this._onRequestLayout = this._register(( new Emitter()));\n        this._linkHandler = options.linkHandler || (url => {\n            return openLinkFromMarkdown(this._openerService, url, isMarkdownString(options.content) ? options.content.isTrusted : undefined);\n        });\n        this._target = 'targetElements' in options.target ? options.target : ( new ElementHoverTarget(options.target));\n        this._hoverPointer = options.showPointer ? $('div.workbench-hover-pointer') : undefined;\n        this._hover = this._register(( new HoverWidget$1()));\n        this._hover.containerDomNode.classList.add('workbench-hover', 'fadeIn');\n        if (options.compact) {\n            this._hover.containerDomNode.classList.add('workbench-hover', 'compact');\n        }\n        if (options.skipFadeInAnimation) {\n            this._hover.containerDomNode.classList.add('skip-fade-in');\n        }\n        if (options.additionalClasses) {\n            this._hover.containerDomNode.classList.add(...options.additionalClasses);\n        }\n        if (options.forcePosition) {\n            this._forcePosition = true;\n        }\n        if (options.trapFocus) {\n            this._enableFocusTraps = true;\n        }\n        this._hoverPosition = options.hoverPosition ?? 3 ;\n        this.onmousedown(this._hover.containerDomNode, e => e.stopPropagation());\n        this.onkeydown(this._hover.containerDomNode, e => {\n            if (e.equals(9 )) {\n                this.dispose();\n            }\n        });\n        this._register(dom.addDisposableListener(window, 'blur', () => this.dispose()));\n        const rowElement = $('div.hover-row.markdown-hover');\n        const contentsElement = $('div.hover-contents');\n        if (typeof options.content === 'string') {\n            contentsElement.textContent = options.content;\n            contentsElement.style.whiteSpace = 'pre-wrap';\n        }\n        else if (options.content instanceof HTMLElement) {\n            contentsElement.appendChild(options.content);\n            contentsElement.classList.add('html-hover-contents');\n        }\n        else {\n            const markdown = options.content;\n            const mdRenderer = this._instantiationService.createInstance(MarkdownRenderer, { codeBlockFontFamily: this._configurationService.getValue('editor').fontFamily || EDITOR_FONT_DEFAULTS.fontFamily });\n            const { element } = mdRenderer.render(markdown, {\n                actionHandler: {\n                    callback: (content) => this._linkHandler(content),\n                    disposables: this._messageListeners\n                },\n                asyncRenderCallback: () => {\n                    contentsElement.classList.add('code-hover-contents');\n                    this.layout();\n                    this._onRequestLayout.fire();\n                }\n            });\n            contentsElement.appendChild(element);\n        }\n        rowElement.appendChild(contentsElement);\n        this._hover.contentsDomNode.appendChild(rowElement);\n        if (options.actions && options.actions.length > 0) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const actionsElement = $('div.actions');\n            options.actions.forEach(action => {\n                const keybinding = this._keybindingService.lookupKeybinding(action.commandId);\n                const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n                HoverAction.render(actionsElement, {\n                    label: action.label,\n                    commandId: action.commandId,\n                    run: e => {\n                        action.run(e);\n                        this.dispose();\n                    },\n                    iconClass: action.iconClass\n                }, keybindingLabel);\n            });\n            statusBarElement.appendChild(actionsElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        this._hoverContainer = $('div.workbench-hover-container');\n        if (this._hoverPointer) {\n            this._hoverContainer.appendChild(this._hoverPointer);\n        }\n        this._hoverContainer.appendChild(this._hover.containerDomNode);\n        let hideOnHover;\n        if (options.actions && options.actions.length > 0) {\n            hideOnHover = false;\n        }\n        else {\n            if (options.hideOnHover === undefined) {\n                hideOnHover = typeof options.content === 'string' ||\n                    isMarkdownString(options.content) && !options.content.value.includes('](') && !options.content.value.includes('</a>');\n            }\n            else {\n                hideOnHover = options.hideOnHover;\n            }\n        }\n        if (hideOnHover && options.showHoverHint) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const infoElement = $('div.info');\n            infoElement.textContent = ( localize('hoverhint', 'Hold {0} key to mouse over', isMacintosh ? 'Option' : 'Alt'));\n            statusBarElement.appendChild(infoElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        const mouseTrackerTargets = [...this._target.targetElements];\n        if (!hideOnHover) {\n            mouseTrackerTargets.push(this._hoverContainer);\n        }\n        const mouseTracker = this._register(( new CompositeMouseTracker(mouseTrackerTargets)));\n        this._register(mouseTracker.onMouseOut(() => {\n            if (!this._isLocked) {\n                this.dispose();\n            }\n        }));\n        if (hideOnHover) {\n            const mouseTracker2Targets = [...this._target.targetElements, this._hoverContainer];\n            this._lockMouseTracker = this._register(( new CompositeMouseTracker(mouseTracker2Targets)));\n            this._register(this._lockMouseTracker.onMouseOut(() => {\n                if (!this._isLocked) {\n                    this.dispose();\n                }\n            }));\n        }\n        else {\n            this._lockMouseTracker = mouseTracker;\n        }\n    }\n    addFocusTrap() {\n        if (!this._enableFocusTraps || this._addedFocusTrap) {\n            return;\n        }\n        this._addedFocusTrap = true;\n        const firstContainerFocusElement = this._hover.containerDomNode;\n        const lastContainerFocusElement = this.findLastFocusableChild(this._hover.containerDomNode);\n        if (lastContainerFocusElement) {\n            const beforeContainerFocusElement = dom.prepend(this._hoverContainer, $('div'));\n            const afterContainerFocusElement = dom.append(this._hoverContainer, $('div'));\n            beforeContainerFocusElement.tabIndex = 0;\n            afterContainerFocusElement.tabIndex = 0;\n            this._register(dom.addDisposableListener(afterContainerFocusElement, 'focus', (e) => {\n                firstContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n            this._register(dom.addDisposableListener(beforeContainerFocusElement, 'focus', (e) => {\n                lastContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n        }\n    }\n    findLastFocusableChild(root) {\n        if (root.hasChildNodes()) {\n            for (let i = 0; i < root.childNodes.length; i++) {\n                const node = root.childNodes.item(root.childNodes.length - i - 1);\n                if (node.nodeType === node.ELEMENT_NODE) {\n                    const parsedNode = node;\n                    if (typeof parsedNode.tabIndex === 'number' && parsedNode.tabIndex >= 0) {\n                        return parsedNode;\n                    }\n                }\n                const recursivelyFoundElement = this.findLastFocusableChild(node);\n                if (recursivelyFoundElement) {\n                    return recursivelyFoundElement;\n                }\n            }\n        }\n        return undefined;\n    }\n    render(container) {\n        container.appendChild(this._hoverContainer);\n        this.layout();\n        this.addFocusTrap();\n    }\n    layout() {\n        this._hover.containerDomNode.classList.remove('right-aligned');\n        this._hover.contentsDomNode.style.maxHeight = '';\n        const getZoomAccountedBoundingClientRect = (e) => {\n            const zoom = dom.getDomNodeZoomLevel(e);\n            const boundingRect = e.getBoundingClientRect();\n            return {\n                top: boundingRect.top * zoom,\n                bottom: boundingRect.bottom * zoom,\n                right: boundingRect.right * zoom,\n                left: boundingRect.left * zoom,\n            };\n        };\n        const targetBounds = ( this._target.targetElements.map(e => getZoomAccountedBoundingClientRect(e)));\n        const top = Math.min(...( targetBounds.map(e => e.top)));\n        const right = Math.max(...( targetBounds.map(e => e.right)));\n        const bottom = Math.max(...( targetBounds.map(e => e.bottom)));\n        const left = Math.min(...( targetBounds.map(e => e.left)));\n        const width = right - left;\n        const height = bottom - top;\n        const targetRect = {\n            top, right, bottom, left, width, height,\n            center: {\n                x: left + (width / 2),\n                y: top + (height / 2)\n            }\n        };\n        this.adjustHorizontalHoverPosition(targetRect);\n        this.adjustVerticalHoverPosition(targetRect);\n        this.adjustHoverMaxHeight(targetRect);\n        this._hoverContainer.style.padding = '';\n        this._hoverContainer.style.margin = '';\n        if (this._hoverPointer) {\n            switch (this._hoverPosition) {\n                case 1 :\n                    targetRect.left += 3 ;\n                    targetRect.right += 3 ;\n                    this._hoverContainer.style.paddingLeft = `${3 }px`;\n                    this._hoverContainer.style.marginLeft = `${-3 }px`;\n                    break;\n                case 0 :\n                    targetRect.left -= 3 ;\n                    targetRect.right -= 3 ;\n                    this._hoverContainer.style.paddingRight = `${3 }px`;\n                    this._hoverContainer.style.marginRight = `${-3 }px`;\n                    break;\n                case 2 :\n                    targetRect.top += 3 ;\n                    targetRect.bottom += 3 ;\n                    this._hoverContainer.style.paddingTop = `${3 }px`;\n                    this._hoverContainer.style.marginTop = `${-3 }px`;\n                    break;\n                case 3 :\n                    targetRect.top -= 3 ;\n                    targetRect.bottom -= 3 ;\n                    this._hoverContainer.style.paddingBottom = `${3 }px`;\n                    this._hoverContainer.style.marginBottom = `${-3 }px`;\n                    break;\n            }\n            targetRect.center.x = targetRect.left + (width / 2);\n            targetRect.center.y = targetRect.top + (height / 2);\n        }\n        this.computeXCordinate(targetRect);\n        this.computeYCordinate(targetRect);\n        if (this._hoverPointer) {\n            this._hoverPointer.classList.remove('top');\n            this._hoverPointer.classList.remove('left');\n            this._hoverPointer.classList.remove('right');\n            this._hoverPointer.classList.remove('bottom');\n            this.setHoverPointerPosition(targetRect);\n        }\n        this._hover.onContentsChanged();\n    }\n    computeXCordinate(target) {\n        const hoverWidth = this._hover.containerDomNode.clientWidth + 2 ;\n        if (this._target.x !== undefined) {\n            this._x = this._target.x;\n        }\n        else if (this._hoverPosition === 1 ) {\n            this._x = target.right;\n        }\n        else if (this._hoverPosition === 0 ) {\n            this._x = target.left - hoverWidth;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._x = target.center.x - (this._hover.containerDomNode.clientWidth / 2);\n            }\n            else {\n                this._x = target.left;\n            }\n            if (this._x + hoverWidth >= document.documentElement.clientWidth) {\n                this._hover.containerDomNode.classList.add('right-aligned');\n                this._x = Math.max(document.documentElement.clientWidth - hoverWidth - 2 , document.documentElement.clientLeft);\n            }\n        }\n        if (this._x < document.documentElement.clientLeft) {\n            this._x = target.left + 2 ;\n        }\n    }\n    computeYCordinate(target) {\n        if (this._target.y !== undefined) {\n            this._y = this._target.y;\n        }\n        else if (this._hoverPosition === 3 ) {\n            this._y = target.top;\n        }\n        else if (this._hoverPosition === 2 ) {\n            this._y = target.bottom - 2;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._y = target.center.y + (this._hover.containerDomNode.clientHeight / 2);\n            }\n            else {\n                this._y = target.bottom;\n            }\n        }\n        if (this._y > window.innerHeight) {\n            this._y = target.bottom;\n        }\n    }\n    adjustHorizontalHoverPosition(target) {\n        if (this._target.x !== undefined) {\n            return;\n        }\n        if (this._forcePosition) {\n            const padding = (this._hoverPointer ? 3  : 0) + 2 ;\n            if (this._hoverPosition === 1 ) {\n                this._hover.containerDomNode.style.maxWidth = `${document.documentElement.clientWidth - target.right - padding}px`;\n            }\n            else if (this._hoverPosition === 0 ) {\n                this._hover.containerDomNode.style.maxWidth = `${target.left - padding}px`;\n            }\n            return;\n        }\n        if (this._hoverPosition === 1 ) {\n            const roomOnRight = document.documentElement.clientWidth - target.right;\n            if (roomOnRight < this._hover.containerDomNode.clientWidth) {\n                const roomOnLeft = target.left;\n                if (roomOnLeft >= this._hover.containerDomNode.clientWidth) {\n                    this._hoverPosition = 0 ;\n                }\n                else {\n                    this._hoverPosition = 2 ;\n                }\n            }\n        }\n        else if (this._hoverPosition === 0 ) {\n            const roomOnLeft = target.left;\n            if (roomOnLeft < this._hover.containerDomNode.clientWidth) {\n                const roomOnRight = document.documentElement.clientWidth - target.right;\n                if (roomOnRight >= this._hover.containerDomNode.clientWidth) {\n                    this._hoverPosition = 1 ;\n                }\n                else {\n                    this._hoverPosition = 2 ;\n                }\n            }\n            if (target.left - this._hover.containerDomNode.clientWidth <= document.documentElement.clientLeft) {\n                this._hoverPosition = 1 ;\n            }\n        }\n    }\n    adjustVerticalHoverPosition(target) {\n        if (this._target.y !== undefined || this._forcePosition) {\n            return;\n        }\n        if (this._hoverPosition === 3 ) {\n            if (target.top - this._hover.containerDomNode.clientHeight < 0) {\n                this._hoverPosition = 2 ;\n            }\n        }\n        else if (this._hoverPosition === 2 ) {\n            if (target.bottom + this._hover.containerDomNode.clientHeight > window.innerHeight) {\n                this._hoverPosition = 3 ;\n            }\n        }\n    }\n    adjustHoverMaxHeight(target) {\n        let maxHeight = window.innerHeight / 2;\n        if (this._forcePosition) {\n            const padding = (this._hoverPointer ? 3  : 0) + 2 ;\n            if (this._hoverPosition === 3 ) {\n                maxHeight = Math.min(maxHeight, target.top - padding);\n            }\n            else if (this._hoverPosition === 2 ) {\n                maxHeight = Math.min(maxHeight, window.innerHeight - target.bottom - padding);\n            }\n        }\n        this._hover.containerDomNode.style.maxHeight = `${maxHeight}px`;\n        if (this._hover.contentsDomNode.clientHeight < this._hover.contentsDomNode.scrollHeight) {\n            const extraRightPadding = `${this._hover.scrollbar.options.verticalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingRight !== extraRightPadding) {\n                this._hover.contentsDomNode.style.paddingRight = extraRightPadding;\n            }\n        }\n    }\n    setHoverPointerPosition(target) {\n        if (!this._hoverPointer) {\n            return;\n        }\n        switch (this._hoverPosition) {\n            case 0 :\n            case 1 : {\n                this._hoverPointer.classList.add(this._hoverPosition === 0  ? 'right' : 'left');\n                const hoverHeight = this._hover.containerDomNode.clientHeight;\n                if (hoverHeight > target.height) {\n                    this._hoverPointer.style.top = `${target.center.y - (this._y - hoverHeight) - 3 }px`;\n                }\n                else {\n                    this._hoverPointer.style.top = `${Math.round((hoverHeight / 2)) - 3 }px`;\n                }\n                break;\n            }\n            case 3 :\n            case 2 : {\n                this._hoverPointer.classList.add(this._hoverPosition === 3  ? 'bottom' : 'top');\n                const hoverWidth = this._hover.containerDomNode.clientWidth;\n                let pointerLeftPosition = Math.round((hoverWidth / 2)) - 3 ;\n                const pointerX = this._x + pointerLeftPosition;\n                if (pointerX < target.left || pointerX > target.right) {\n                    pointerLeftPosition = target.center.x - this._x - 3 ;\n                }\n                this._hoverPointer.style.left = `${pointerLeftPosition}px`;\n                break;\n            }\n        }\n    }\n    focus() {\n        this._hover.containerDomNode.focus();\n    }\n    hide() {\n        this.dispose();\n    }\n    dispose() {\n        if (!this._isDisposed) {\n            this._onDispose.fire();\n            this._hoverContainer.remove();\n            this._messageListeners.dispose();\n            this._target.dispose();\n            super.dispose();\n        }\n        this._isDisposed = true;\n    }\n};\nHoverWidget = ( __decorate([\n    ( __param(1, IKeybindingService)),\n    ( __param(2, IConfigurationService)),\n    ( __param(3, IOpenerService)),\n    ( __param(4, IInstantiationService))\n], HoverWidget));\nclass CompositeMouseTracker extends Widget {\n    get onMouseOut() { return this._onMouseOut.event; }\n    get isMouseIn() { return this._isMouseIn; }\n    constructor(_elements) {\n        super();\n        this._elements = _elements;\n        this._isMouseIn = true;\n        this._onMouseOut = this._register(( new Emitter()));\n        this._elements.forEach(n => this.onmouseover(n, () => this._onTargetMouseOver()));\n        this._elements.forEach(n => this.onmouseleave(n, () => this._onTargetMouseLeave()));\n    }\n    _onTargetMouseOver() {\n        this._isMouseIn = true;\n        this._clearEvaluateMouseStateTimeout();\n    }\n    _onTargetMouseLeave() {\n        this._isMouseIn = false;\n        this._evaluateMouseState();\n    }\n    _evaluateMouseState() {\n        this._clearEvaluateMouseStateTimeout();\n        this._mouseTimeout = window.setTimeout(() => this._fireIfMouseOutside(), 0);\n    }\n    _clearEvaluateMouseStateTimeout() {\n        if (this._mouseTimeout) {\n            clearTimeout(this._mouseTimeout);\n            this._mouseTimeout = undefined;\n        }\n    }\n    _fireIfMouseOutside() {\n        if (!this._isMouseIn) {\n            this._onMouseOut.fire();\n        }\n    }\n}\nclass ElementHoverTarget {\n    constructor(_element) {\n        this._element = _element;\n        this.targetElements = [this._element];\n    }\n    dispose() {\n    }\n}\nexport { HoverWidget };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/hover.css.js';\nimport { registerThemingParticipant } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { editorHoverBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { IContextViewService, IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { HoverWidget } from './hoverWidget.js';\nimport { toDisposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { addDisposableListener, EventType } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { StandardKeyboardEvent } from 'monaco-editor/esm/vs/base/browser/keyboardEvent.js';\nimport { IAccessibilityService } from 'monaco-editor/esm/vs/platform/accessibility/common/accessibility.js';\nlet HoverService = class HoverService {\n    constructor(_instantiationService, _contextViewService, contextMenuService, _keybindingService, _accessibilityService) {\n        this._instantiationService = _instantiationService;\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._accessibilityService = _accessibilityService;\n        contextMenuService.onDidShowContextMenu(() => this.hideHover());\n    }\n    showHover(options, focus, skipLastFocusedUpdate) {\n        if (getHoverOptionsIdentity(this._currentHoverOptions) === getHoverOptionsIdentity(options)) {\n            return undefined;\n        }\n        this._currentHoverOptions = options;\n        this._lastHoverOptions = options;\n        const trapFocus = options.trapFocus || this._accessibilityService.isScreenReaderOptimized();\n        if (!skipLastFocusedUpdate) {\n            if (trapFocus && document.activeElement) {\n                this._lastFocusedElementBeforeOpen = document.activeElement;\n            }\n            else {\n                this._lastFocusedElementBeforeOpen = undefined;\n            }\n        }\n        const hoverDisposables = ( (new DisposableStore()));\n        const hover = this._instantiationService.createInstance(HoverWidget, options);\n        hover.onDispose(() => {\n            this._lastFocusedElementBeforeOpen?.focus();\n            if (this._currentHoverOptions === options) {\n                this._currentHoverOptions = undefined;\n            }\n            hoverDisposables.dispose();\n        });\n        const provider = this._contextViewService;\n        provider.showContextView(( (new HoverContextViewDelegate(hover, focus))), options.container);\n        hover.onRequestLayout(() => provider.layout());\n        if ('targetElements' in options.target) {\n            for (const element of options.target.targetElements) {\n                hoverDisposables.add(addDisposableListener(element, EventType.CLICK, () => this.hideHover()));\n            }\n        }\n        else {\n            hoverDisposables.add(addDisposableListener(options.target, EventType.CLICK, () => this.hideHover()));\n        }\n        const focusedElement = document.activeElement;\n        if (focusedElement) {\n            hoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_DOWN, e => this._keyDown(e, hover, !!options.hideOnKeyDown)));\n            hoverDisposables.add(addDisposableListener(document, EventType.KEY_DOWN, e => this._keyDown(e, hover, !!options.hideOnKeyDown)));\n            hoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_UP, e => this._keyUp(e, hover)));\n            hoverDisposables.add(addDisposableListener(document, EventType.KEY_UP, e => this._keyUp(e, hover)));\n        }\n        if ('IntersectionObserver' in window) {\n            const observer = ( (new IntersectionObserver(e => this._intersectionChange(e, hover), { threshold: 0 })));\n            const firstTargetElement = 'targetElements' in options.target ? options.target.targetElements[0] : options.target;\n            observer.observe(firstTargetElement);\n            hoverDisposables.add(toDisposable(() => observer.disconnect()));\n        }\n        this._currentHover = hover;\n        return hover;\n    }\n    hideHover() {\n        if (this._currentHover?.isLocked || !this._currentHoverOptions) {\n            return;\n        }\n        this._currentHover = undefined;\n        this._currentHoverOptions = undefined;\n        this._contextViewService.hideContextView();\n    }\n    _intersectionChange(entries, hover) {\n        const entry = entries[entries.length - 1];\n        if (!entry.isIntersecting) {\n            hover.dispose();\n        }\n    }\n    showAndFocusLastHover() {\n        if (!this._lastHoverOptions) {\n            return;\n        }\n        this.showHover(this._lastHoverOptions, true, true);\n    }\n    _keyDown(e, hover, hideOnKeyDown) {\n        if (e.key === 'Alt') {\n            hover.isLocked = true;\n            return;\n        }\n        const event = ( (new StandardKeyboardEvent(e)));\n        const keybinding = this._keybindingService.resolveKeyboardEvent(event);\n        if (( (keybinding.getSingleModifierDispatchChords().some(value => !!value))) || this._keybindingService.softDispatch(event, event.target).kind !== 0 ) {\n            return;\n        }\n        if (hideOnKeyDown && (!this._currentHoverOptions?.trapFocus || e.key !== 'Tab')) {\n            this.hideHover();\n            this._lastFocusedElementBeforeOpen?.focus();\n        }\n    }\n    _keyUp(e, hover) {\n        if (e.key === 'Alt') {\n            hover.isLocked = false;\n            if (!hover.isMouseIn) {\n                this.hideHover();\n                this._lastFocusedElementBeforeOpen?.focus();\n            }\n        }\n    }\n};\nHoverService = ( (__decorate([\n    ( (__param(0, IInstantiationService))),\n    ( (__param(1, IContextViewService))),\n    ( (__param(2, IContextMenuService))),\n    ( (__param(3, IKeybindingService))),\n    ( (__param(4, IAccessibilityService)))\n], HoverService)));\nfunction getHoverOptionsIdentity(options) {\n    if (options === undefined) {\n        return undefined;\n    }\n    return options?.id ?? options;\n}\nclass HoverContextViewDelegate {\n    get anchorPosition() {\n        return this._hover.anchor;\n    }\n    constructor(_hover, _focus = false) {\n        this._hover = _hover;\n        this._focus = _focus;\n    }\n    render(container) {\n        this._hover.render(container);\n        if (this._focus) {\n            this._hover.focus();\n        }\n        return this._hover;\n    }\n    getAnchor() {\n        return {\n            x: this._hover.x,\n            y: this._hover.y\n        };\n    }\n    layout() {\n        this._hover.layout();\n    }\n}\nregisterThemingParticipant((theme, collector) => {\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${( ( hoverBorder.transparent(0.5)))}; }`);\n        collector.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${( ( hoverBorder.transparent(0.5)))}; }`);\n    }\n});\nexport { HoverService };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ExplorerModel, ExplorerItem } from '../common/explorerModel.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { dirname, basename } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IClipboardService } from 'monaco-editor/esm/vs/platform/clipboard/common/clipboardService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { IBulkEditService } from 'monaco-editor/esm/vs/editor/browser/services/bulkEditService.js';\nimport { UndoRedoSource } from 'monaco-editor/esm/vs/platform/undoRedo/common/undoRedo.js';\nimport { IProgressService } from 'monaco-editor/esm/vs/platform/progress/common/progress.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { RunOnceScheduler } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { ResourceGlobMatcher } from '../../../common/resources.js';\nimport { IFilesConfigurationService } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\nconst UNDO_REDO_SOURCE = ( new UndoRedoSource());\nlet ExplorerService = class ExplorerService {\n    static { this.EXPLORER_FILE_CHANGES_REACT_DELAY = 500; }\n    constructor(fileService, configurationService, contextService, clipboardService, editorService, uriIdentityService, bulkEditService, progressService, hostService, filesConfigurationService) {\n        this.fileService = fileService;\n        this.configurationService = configurationService;\n        this.contextService = contextService;\n        this.clipboardService = clipboardService;\n        this.editorService = editorService;\n        this.uriIdentityService = uriIdentityService;\n        this.bulkEditService = bulkEditService;\n        this.progressService = progressService;\n        this.filesConfigurationService = filesConfigurationService;\n        this.disposables = ( new DisposableStore());\n        this.fileChangeEvents = [];\n        this.config = this.configurationService.getValue('explorer');\n        this.model = ( new ExplorerModel(\n            this.contextService,\n            this.uriIdentityService,\n            this.fileService,\n            this.configurationService,\n            this.filesConfigurationService\n        ));\n        this.disposables.add(this.model);\n        this.disposables.add(this.fileService.onDidRunOperation(e => this.onDidRunOperation(e)));\n        this.onFileChangesScheduler = ( new RunOnceScheduler(async () => {\n            const events = this.fileChangeEvents;\n            this.fileChangeEvents = [];\n            const types = [2 ];\n            if (this.config.sortOrder === \"modified\" ) {\n                types.push(0 );\n            }\n            let shouldRefresh = false;\n            this.roots.forEach(r => {\n                if (this.view && !shouldRefresh) {\n                    shouldRefresh = doesFileEventAffect(r, this.view, events, types);\n                }\n            });\n            events.forEach(e => {\n                if (!shouldRefresh) {\n                    for (const resource of e.rawAdded) {\n                        const parent = this.model.findClosest(dirname(resource));\n                        if (parent && !parent.getChild(basename(resource))) {\n                            shouldRefresh = true;\n                            break;\n                        }\n                    }\n                }\n            });\n            if (shouldRefresh) {\n                await this.refresh(false);\n            }\n        }, ExplorerService.EXPLORER_FILE_CHANGES_REACT_DELAY));\n        this.disposables.add(this.fileService.onDidFilesChange(e => {\n            this.fileChangeEvents.push(e);\n            if (this.editable) {\n                return;\n            }\n            if (!this.onFileChangesScheduler.isScheduled()) {\n                this.onFileChangesScheduler.schedule();\n            }\n        }));\n        this.disposables.add(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n        this.disposables.add(Event.any(this.fileService.onDidChangeFileSystemProviderRegistrations, this.fileService.onDidChangeFileSystemProviderCapabilities)(async (e) => {\n            let affected = false;\n            this.model.roots.forEach(r => {\n                if (r.resource.scheme === e.scheme) {\n                    affected = true;\n                    r.forgetChildren();\n                }\n            });\n            if (affected) {\n                if (this.view) {\n                    await this.view.setTreeInput();\n                }\n            }\n        }));\n        this.disposables.add(this.model.onDidChangeRoots(() => {\n            this.view?.setTreeInput();\n        }));\n        this.disposables.add(hostService.onDidChangeFocus(hasFocus => {\n            if (hasFocus) {\n                this.refresh(false);\n            }\n        }));\n        this.revealExcludeMatcher = ( new ResourceGlobMatcher(\n            (uri) => getRevealExcludes(configurationService.getValue({ resource: uri })),\n            (event) => event.affectsConfiguration('explorer.autoRevealExclude'),\n            contextService,\n            configurationService\n        ));\n        this.disposables.add(this.revealExcludeMatcher);\n    }\n    get roots() {\n        return this.model.roots;\n    }\n    get sortOrderConfiguration() {\n        return {\n            sortOrder: this.config.sortOrder,\n            lexicographicOptions: this.config.sortOrderLexicographicOptions,\n        };\n    }\n    registerView(contextProvider) {\n        this.view = contextProvider;\n    }\n    getContext(respectMultiSelection, ignoreNestedChildren = false) {\n        if (!this.view) {\n            return [];\n        }\n        const items = ( new Set(this.view.getContext(respectMultiSelection)));\n        items.forEach(item => {\n            try {\n                if (respectMultiSelection && !ignoreNestedChildren && this.view?.isItemCollapsed(item) && item.nestedChildren) {\n                    for (const child of item.nestedChildren) {\n                        items.add(child);\n                    }\n                }\n            }\n            catch {\n                return;\n            }\n        });\n        return [...items];\n    }\n    async applyBulkEdit(edit, options) {\n        const cancellationTokenSource = ( new CancellationTokenSource());\n        const promise = this.progressService.withProgress({\n            location: options.progressLocation || 10 ,\n            title: options.progressLabel,\n            cancellable: edit.length > 1,\n            delay: 500,\n        }, async (progress) => {\n            await this.bulkEditService.apply(edit, {\n                undoRedoSource: UNDO_REDO_SOURCE,\n                label: options.undoLabel,\n                code: 'undoredo.explorerOperation',\n                progress,\n                token: cancellationTokenSource.token,\n                confirmBeforeUndo: options.confirmBeforeUndo\n            });\n        }, () => cancellationTokenSource.cancel());\n        await this.progressService.withProgress({ location: 1 , delay: 500 }, () => promise);\n        cancellationTokenSource.dispose();\n    }\n    hasViewFocus() {\n        return !!this.view && this.view.hasFocus();\n    }\n    findClosest(resource) {\n        return this.model.findClosest(resource);\n    }\n    findClosestRoot(resource) {\n        const parentRoots = this.model.roots.filter(r => this.uriIdentityService.extUri.isEqualOrParent(resource, r.resource))\n            .sort((first, second) => second.resource.path.length - first.resource.path.length);\n        return parentRoots.length ? parentRoots[0] : null;\n    }\n    async setEditable(stat, data) {\n        if (!this.view) {\n            return;\n        }\n        if (!data) {\n            this.editable = undefined;\n        }\n        else {\n            this.editable = { stat, data };\n        }\n        const isEditing = this.isEditable(stat);\n        await this.view.setEditable(stat, isEditing);\n        if (!this.editable && this.fileChangeEvents.length && !this.onFileChangesScheduler.isScheduled()) {\n            this.onFileChangesScheduler.schedule();\n        }\n    }\n    async setToCopy(items, cut) {\n        const previouslyCutItems = this.cutItems;\n        this.cutItems = cut ? items : undefined;\n        await this.clipboardService.writeResources(( items.map(s => s.resource)));\n        this.view?.itemsCopied(items, cut, previouslyCutItems);\n    }\n    isCut(item) {\n        return !!this.cutItems && ( this.cutItems.some(i => this.uriIdentityService.extUri.isEqual(i.resource, item.resource)));\n    }\n    getEditable() {\n        return this.editable;\n    }\n    getEditableData(stat) {\n        return this.editable && this.editable.stat === stat ? this.editable.data : undefined;\n    }\n    isEditable(stat) {\n        return !!this.editable && (this.editable.stat === stat || !stat);\n    }\n    async select(resource, reveal) {\n        if (!this.view) {\n            return;\n        }\n        const ignoreRevealExcludes = reveal === 'force';\n        const fileStat = this.findClosest(resource);\n        if (fileStat) {\n            if (!this.shouldAutoRevealItem(fileStat, ignoreRevealExcludes)) {\n                return;\n            }\n            await this.view.selectResource(fileStat.resource, reveal);\n            return Promise.resolve(undefined);\n        }\n        const options = { resolveTo: [resource], resolveMetadata: this.config.sortOrder === \"modified\"  };\n        const root = this.findClosestRoot(resource);\n        if (!root) {\n            return undefined;\n        }\n        try {\n            const stat = await this.fileService.resolve(root.resource, options);\n            const modelStat = ExplorerItem.create(this.fileService, this.configurationService, this.filesConfigurationService, stat, undefined, options.resolveTo);\n            ExplorerItem.mergeLocalWithDisk(modelStat, root);\n            const item = root.find(resource);\n            await this.view.refresh(true, root);\n            if (item && !this.shouldAutoRevealItem(item, ignoreRevealExcludes)) {\n                return;\n            }\n            await this.view.selectResource(item ? item.resource : undefined, reveal);\n        }\n        catch (error) {\n            root.error = error;\n            await this.view.refresh(false, root);\n        }\n    }\n    async refresh(reveal = true) {\n        this.model.roots.forEach(r => r.forgetChildren());\n        if (this.view) {\n            await this.view.refresh(true);\n            const resource = this.editorService.activeEditor?.resource;\n            const autoReveal = this.configurationService.getValue().explorer.autoReveal;\n            if (reveal && resource && autoReveal) {\n                this.select(resource, autoReveal);\n            }\n        }\n    }\n    async onDidRunOperation(e) {\n        const shouldDeepRefresh = this.config.fileNesting.enabled;\n        if (e.isOperation(0 ) || e.isOperation(3 )) {\n            const addedElement = e.target;\n            const parentResource = dirname(addedElement.resource);\n            const parents = this.model.findAll(parentResource);\n            if (parents.length) {\n                await Promise.all(( parents.map(async (p) => {\n                    const resolveMetadata = this.config.sortOrder === `modified`;\n                    if (!p.isDirectoryResolved) {\n                        const stat = await this.fileService.resolve(p.resource, { resolveMetadata });\n                        if (stat) {\n                            const modelStat = ExplorerItem.create(this.fileService, this.configurationService, this.filesConfigurationService, stat, p.parent);\n                            ExplorerItem.mergeLocalWithDisk(modelStat, p);\n                        }\n                    }\n                    const childElement = ExplorerItem.create(this.fileService, this.configurationService, this.filesConfigurationService, addedElement, p.parent);\n                    p.removeChild(childElement);\n                    p.addChild(childElement);\n                    await this.view?.refresh(shouldDeepRefresh, p);\n                })));\n            }\n        }\n        else if (e.isOperation(2 )) {\n            const oldResource = e.resource;\n            const newElement = e.target;\n            const oldParentResource = dirname(oldResource);\n            const newParentResource = dirname(newElement.resource);\n            const modelElements = this.model.findAll(oldResource);\n            const sameParentMove = modelElements.every(e => !e.nestedParent) && this.uriIdentityService.extUri.isEqual(oldParentResource, newParentResource);\n            if (sameParentMove) {\n                await Promise.all(( modelElements.map(async (modelElement) => {\n                    modelElement.rename(newElement);\n                    await this.view?.refresh(shouldDeepRefresh, modelElement.parent);\n                })));\n            }\n            else {\n                const newParents = this.model.findAll(newParentResource);\n                if (newParents.length && modelElements.length) {\n                    await Promise.all(( modelElements.map(async (modelElement, index) => {\n                        const oldParent = modelElement.parent;\n                        const oldNestedParent = modelElement.nestedParent;\n                        modelElement.move(newParents[index]);\n                        if (oldNestedParent) {\n                            await this.view?.refresh(false, oldNestedParent);\n                        }\n                        await this.view?.refresh(false, oldParent);\n                        await this.view?.refresh(shouldDeepRefresh, newParents[index]);\n                    })));\n                }\n            }\n        }\n        else if (e.isOperation(1 )) {\n            const modelElements = this.model.findAll(e.resource);\n            await Promise.all(( modelElements.map(async (modelElement) => {\n                if (modelElement.parent) {\n                    const parent = modelElement.parent;\n                    parent.removeChild(modelElement);\n                    const oldNestedParent = modelElement.nestedParent;\n                    if (oldNestedParent) {\n                        oldNestedParent.removeChild(modelElement);\n                        await this.view?.refresh(false, oldNestedParent);\n                    }\n                    await this.view?.refresh(shouldDeepRefresh, parent);\n                }\n            })));\n        }\n    }\n    shouldAutoRevealItem(item, ignore) {\n        if (item === undefined || ignore) {\n            return true;\n        }\n        if (this.revealExcludeMatcher.matches(item.resource, name => !!(item.parent && item.parent.getChild(name)))) {\n            return false;\n        }\n        const root = item.root;\n        let currentItem = item.parent;\n        while (currentItem !== root) {\n            if (currentItem === undefined) {\n                return true;\n            }\n            if (this.revealExcludeMatcher.matches(currentItem.resource)) {\n                return false;\n            }\n            currentItem = currentItem.parent;\n        }\n        return true;\n    }\n    async onConfigurationUpdated(event) {\n        if (!event.affectsConfiguration('explorer')) {\n            return;\n        }\n        let shouldRefresh = false;\n        if (event.affectsConfiguration('explorer.fileNesting')) {\n            shouldRefresh = true;\n        }\n        const configuration = this.configurationService.getValue();\n        const configSortOrder = configuration?.explorer?.sortOrder || \"default\" ;\n        if (this.config.sortOrder !== configSortOrder) {\n            shouldRefresh = this.config.sortOrder !== undefined;\n        }\n        const configLexicographicOptions = configuration?.explorer?.sortOrderLexicographicOptions || \"default\" ;\n        if (this.config.sortOrderLexicographicOptions !== configLexicographicOptions) {\n            shouldRefresh = shouldRefresh || this.config.sortOrderLexicographicOptions !== undefined;\n        }\n        this.config = configuration.explorer;\n        if (shouldRefresh) {\n            await this.refresh();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n};\nExplorerService = ( __decorate([\n    ( __param(0, IFileService)),\n    ( __param(1, IConfigurationService)),\n    ( __param(2, IWorkspaceContextService)),\n    ( __param(3, IClipboardService)),\n    ( __param(4, IEditorService)),\n    ( __param(5, IUriIdentityService)),\n    ( __param(6, IBulkEditService)),\n    ( __param(7, IProgressService)),\n    ( __param(8, IHostService)),\n    ( __param(9, IFilesConfigurationService))\n], ExplorerService));\nfunction doesFileEventAffect(item, view, events, types) {\n    for (const [_name, child] of item.children) {\n        if (view.isItemVisible(child)) {\n            if (( events.some(e => e.contains(child.resource, ...types)))) {\n                return true;\n            }\n            if (child.isDirectory && child.isDirectoryResolved) {\n                if (doesFileEventAffect(child, view, events, types)) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction getRevealExcludes(configuration) {\n    const revealExcludes = configuration && configuration.explorer && configuration.explorer.autoRevealExclude;\n    if (!revealExcludes) {\n        return {};\n    }\n    return revealExcludes;\n}\nexport { ExplorerService, UNDO_REDO_SOURCE };\n","import n from '../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-grid-view{overflow:hidden;position:relative}.monaco-grid-branch-node,.monaco-grid-view{height:100%;width:100%}\";\nn(css,{});\nexport { css, css as default };\n","import { $ } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { Sizing, SplitView } from 'monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js';\nexport { Sizing } from 'monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js';\nimport { tail2, equals } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { Color } from 'monaco-editor/esm/vs/base/common/color.js';\nimport { Event, Relay, Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable, toDisposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { rot } from 'monaco-editor/esm/vs/base/common/numbers.js';\nimport { isUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport './gridview.css.js';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nfunction orthogonal(orientation) {\n    return orientation === 0  ? 1  : 0 ;\n}\nclass LayoutController {\n    constructor(isLayoutEnabled) {\n        this.isLayoutEnabled = isLayoutEnabled;\n    }\n}\nfunction toAbsoluteBoundarySashes(sashes, orientation) {\n    if (orientation === 1 ) {\n        return { left: sashes.start, right: sashes.end, top: sashes.orthogonalStart, bottom: sashes.orthogonalEnd };\n    }\n    else {\n        return { top: sashes.start, bottom: sashes.end, left: sashes.orthogonalStart, right: sashes.orthogonalEnd };\n    }\n}\nfunction fromAbsoluteBoundarySashes(sashes, orientation) {\n    if (orientation === 1 ) {\n        return { start: sashes.left, end: sashes.right, orthogonalStart: sashes.top, orthogonalEnd: sashes.bottom };\n    }\n    else {\n        return { start: sashes.top, end: sashes.bottom, orthogonalStart: sashes.left, orthogonalEnd: sashes.right };\n    }\n}\nfunction validateIndex(index, numChildren) {\n    if (Math.abs(index) > numChildren) {\n        throw new Error('Invalid index');\n    }\n    return rot(index, numChildren + 1);\n}\nclass BranchNode {\n    get size() { return this._size; }\n    get orthogonalSize() { return this._orthogonalSize; }\n    get absoluteOffset() { return this._absoluteOffset; }\n    get absoluteOrthogonalOffset() { return this._absoluteOrthogonalOffset; }\n    get styles() { return this._styles; }\n    get width() {\n        return this.orientation === 1  ? this.size : this.orthogonalSize;\n    }\n    get height() {\n        return this.orientation === 1  ? this.orthogonalSize : this.size;\n    }\n    get top() {\n        return this.orientation === 1  ? this._absoluteOffset : this._absoluteOrthogonalOffset;\n    }\n    get left() {\n        return this.orientation === 1  ? this._absoluteOrthogonalOffset : this._absoluteOffset;\n    }\n    get minimumSize() {\n        return this.children.length === 0 ? 0 : Math.max(...( this.children.map(c => c.minimumOrthogonalSize)));\n    }\n    get maximumSize() {\n        return Math.min(...( this.children.map(c => c.maximumOrthogonalSize)));\n    }\n    get priority() {\n        if (this.children.length === 0) {\n            return 0 ;\n        }\n        const priorities = ( this.children.map(\n            c => typeof c.priority === 'undefined' ? 0  : c.priority\n        ));\n        if (( priorities.some(p => p === 2 ))) {\n            return 2 ;\n        }\n        else if (( priorities.some(p => p === 1 ))) {\n            return 1 ;\n        }\n        return 0 ;\n    }\n    get proportionalLayout() {\n        if (this.children.length === 0) {\n            return true;\n        }\n        return this.children.every(c => c.proportionalLayout);\n    }\n    get minimumOrthogonalSize() {\n        return this.splitview.minimumSize;\n    }\n    get maximumOrthogonalSize() {\n        return this.splitview.maximumSize;\n    }\n    get minimumWidth() {\n        return this.orientation === 1  ? this.minimumOrthogonalSize : this.minimumSize;\n    }\n    get minimumHeight() {\n        return this.orientation === 1  ? this.minimumSize : this.minimumOrthogonalSize;\n    }\n    get maximumWidth() {\n        return this.orientation === 1  ? this.maximumOrthogonalSize : this.maximumSize;\n    }\n    get maximumHeight() {\n        return this.orientation === 1  ? this.maximumSize : this.maximumOrthogonalSize;\n    }\n    get boundarySashes() { return this._boundarySashes; }\n    set boundarySashes(boundarySashes) {\n        if (this._boundarySashes.start === boundarySashes.start\n            && this._boundarySashes.end === boundarySashes.end\n            && this._boundarySashes.orthogonalStart === boundarySashes.orthogonalStart\n            && this._boundarySashes.orthogonalEnd === boundarySashes.orthogonalEnd) {\n            return;\n        }\n        this._boundarySashes = boundarySashes;\n        this.splitview.orthogonalStartSash = boundarySashes.orthogonalStart;\n        this.splitview.orthogonalEndSash = boundarySashes.orthogonalEnd;\n        for (let index = 0; index < this.children.length; index++) {\n            const child = this.children[index];\n            const first = index === 0;\n            const last = index === this.children.length - 1;\n            child.boundarySashes = {\n                start: boundarySashes.orthogonalStart,\n                end: boundarySashes.orthogonalEnd,\n                orthogonalStart: first ? boundarySashes.start : child.boundarySashes.orthogonalStart,\n                orthogonalEnd: last ? boundarySashes.end : child.boundarySashes.orthogonalEnd,\n            };\n        }\n    }\n    get edgeSnapping() { return this._edgeSnapping; }\n    set edgeSnapping(edgeSnapping) {\n        if (this._edgeSnapping === edgeSnapping) {\n            return;\n        }\n        this._edgeSnapping = edgeSnapping;\n        for (const child of this.children) {\n            if (child instanceof BranchNode) {\n                child.edgeSnapping = edgeSnapping;\n            }\n        }\n        this.updateSplitviewEdgeSnappingEnablement();\n    }\n    constructor(orientation, layoutController, styles, splitviewProportionalLayout, size = 0, orthogonalSize = 0, edgeSnapping = false, childDescriptors) {\n        this.orientation = orientation;\n        this.layoutController = layoutController;\n        this.splitviewProportionalLayout = splitviewProportionalLayout;\n        this.children = [];\n        this._absoluteOffset = 0;\n        this._absoluteOrthogonalOffset = 0;\n        this.absoluteOrthogonalSize = 0;\n        this._onDidChange = ( new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._onDidScroll = ( new Emitter());\n        this.onDidScrollDisposable = Disposable.None;\n        this.onDidScroll = this._onDidScroll.event;\n        this.childrenChangeDisposable = Disposable.None;\n        this._onDidSashReset = ( new Emitter());\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.splitviewSashResetDisposable = Disposable.None;\n        this.childrenSashResetDisposable = Disposable.None;\n        this._boundarySashes = {};\n        this._edgeSnapping = false;\n        this._styles = styles;\n        this._size = size;\n        this._orthogonalSize = orthogonalSize;\n        this.element = $('.monaco-grid-branch-node');\n        if (!childDescriptors) {\n            this.splitview = ( new SplitView(\n                this.element,\n                { orientation, styles, proportionalLayout: splitviewProportionalLayout }\n            ));\n            this.splitview.layout(size, { orthogonalSize, absoluteOffset: 0, absoluteOrthogonalOffset: 0, absoluteSize: size, absoluteOrthogonalSize: orthogonalSize });\n        }\n        else {\n            const descriptor = {\n                views: ( childDescriptors.map(childDescriptor => {\n                    return {\n                        view: childDescriptor.node,\n                        size: childDescriptor.node.size,\n                        visible: childDescriptor.node instanceof LeafNode && childDescriptor.visible !== undefined ? childDescriptor.visible : true\n                    };\n                })),\n                size: this.orthogonalSize\n            };\n            const options = { proportionalLayout: splitviewProportionalLayout, orientation, styles };\n            this.children = ( childDescriptors.map(c => c.node));\n            this.splitview = ( new SplitView(this.element, { ...options, descriptor }));\n            this.children.forEach((node, index) => {\n                const first = index === 0;\n                const last = index === this.children.length;\n                node.boundarySashes = {\n                    start: this.boundarySashes.orthogonalStart,\n                    end: this.boundarySashes.orthogonalEnd,\n                    orthogonalStart: first ? this.boundarySashes.start : this.splitview.sashes[index - 1],\n                    orthogonalEnd: last ? this.boundarySashes.end : this.splitview.sashes[index],\n                };\n            });\n        }\n        const onDidSashReset = ( Event.map(this.splitview.onDidSashReset, i => [i]));\n        this.splitviewSashResetDisposable = onDidSashReset(this._onDidSashReset.fire, this._onDidSashReset);\n        this.updateChildrenEvents();\n    }\n    style(styles) {\n        this._styles = styles;\n        this.splitview.style(styles);\n        for (const child of this.children) {\n            if (child instanceof BranchNode) {\n                child.style(styles);\n            }\n        }\n    }\n    layout(size, offset, ctx) {\n        if (!this.layoutController.isLayoutEnabled) {\n            return;\n        }\n        if (typeof ctx === 'undefined') {\n            throw new Error('Invalid state');\n        }\n        this._size = ctx.orthogonalSize;\n        this._orthogonalSize = size;\n        this._absoluteOffset = ctx.absoluteOffset + offset;\n        this._absoluteOrthogonalOffset = ctx.absoluteOrthogonalOffset;\n        this.absoluteOrthogonalSize = ctx.absoluteOrthogonalSize;\n        this.splitview.layout(ctx.orthogonalSize, {\n            orthogonalSize: size,\n            absoluteOffset: this._absoluteOrthogonalOffset,\n            absoluteOrthogonalOffset: this._absoluteOffset,\n            absoluteSize: ctx.absoluteOrthogonalSize,\n            absoluteOrthogonalSize: ctx.absoluteSize\n        });\n        this.updateSplitviewEdgeSnappingEnablement();\n    }\n    setVisible(visible) {\n        for (const child of this.children) {\n            child.setVisible(visible);\n        }\n    }\n    addChild(node, size, index, skipLayout) {\n        index = validateIndex(index, this.children.length);\n        this.splitview.addView(node, size, index, skipLayout);\n        this.children.splice(index, 0, node);\n        this.updateBoundarySashes();\n        this.onDidChildrenChange();\n    }\n    removeChild(index, sizing) {\n        index = validateIndex(index, this.children.length);\n        this.splitview.removeView(index, sizing);\n        this.children.splice(index, 1);\n        this.updateBoundarySashes();\n        this.onDidChildrenChange();\n    }\n    moveChild(from, to) {\n        from = validateIndex(from, this.children.length);\n        to = validateIndex(to, this.children.length);\n        if (from === to) {\n            return;\n        }\n        if (from < to) {\n            to -= 1;\n        }\n        this.splitview.moveView(from, to);\n        this.children.splice(to, 0, this.children.splice(from, 1)[0]);\n        this.updateBoundarySashes();\n        this.onDidChildrenChange();\n    }\n    swapChildren(from, to) {\n        from = validateIndex(from, this.children.length);\n        to = validateIndex(to, this.children.length);\n        if (from === to) {\n            return;\n        }\n        this.splitview.swapViews(from, to);\n        [this.children[from].boundarySashes, this.children[to].boundarySashes]\n            = [this.children[from].boundarySashes, this.children[to].boundarySashes];\n        [this.children[from], this.children[to]] = [this.children[to], this.children[from]];\n        this.onDidChildrenChange();\n    }\n    resizeChild(index, size) {\n        index = validateIndex(index, this.children.length);\n        this.splitview.resizeView(index, size);\n    }\n    isChildSizeMaximized(index) {\n        return this.splitview.isViewSizeMaximized(index);\n    }\n    distributeViewSizes(recursive = false) {\n        this.splitview.distributeViewSizes();\n        if (recursive) {\n            for (const child of this.children) {\n                if (child instanceof BranchNode) {\n                    child.distributeViewSizes(true);\n                }\n            }\n        }\n    }\n    getChildSize(index) {\n        index = validateIndex(index, this.children.length);\n        return this.splitview.getViewSize(index);\n    }\n    isChildVisible(index) {\n        index = validateIndex(index, this.children.length);\n        return this.splitview.isViewVisible(index);\n    }\n    setChildVisible(index, visible) {\n        index = validateIndex(index, this.children.length);\n        if (this.splitview.isViewVisible(index) === visible) {\n            return;\n        }\n        this.splitview.setViewVisible(index, visible);\n    }\n    getChildCachedVisibleSize(index) {\n        index = validateIndex(index, this.children.length);\n        return this.splitview.getViewCachedVisibleSize(index);\n    }\n    updateBoundarySashes() {\n        for (let i = 0; i < this.children.length; i++) {\n            this.children[i].boundarySashes = {\n                start: this.boundarySashes.orthogonalStart,\n                end: this.boundarySashes.orthogonalEnd,\n                orthogonalStart: i === 0 ? this.boundarySashes.start : this.splitview.sashes[i - 1],\n                orthogonalEnd: i === this.children.length - 1 ? this.boundarySashes.end : this.splitview.sashes[i],\n            };\n        }\n    }\n    onDidChildrenChange() {\n        this.updateChildrenEvents();\n        this._onDidChange.fire(undefined);\n    }\n    updateChildrenEvents() {\n        const onDidChildrenChange = ( Event.map(Event.any(...( this.children.map(c => c.onDidChange))), () => undefined));\n        this.childrenChangeDisposable.dispose();\n        this.childrenChangeDisposable = onDidChildrenChange(this._onDidChange.fire, this._onDidChange);\n        const onDidChildrenSashReset = Event.any(...( this.children.map((c, i) => ( Event.map(c.onDidSashReset, location => [i, ...location])))));\n        this.childrenSashResetDisposable.dispose();\n        this.childrenSashResetDisposable = onDidChildrenSashReset(this._onDidSashReset.fire, this._onDidSashReset);\n        const onDidScroll = Event.any(Event.signal(this.splitview.onDidScroll), ...( this.children.map(c => c.onDidScroll)));\n        this.onDidScrollDisposable.dispose();\n        this.onDidScrollDisposable = onDidScroll(this._onDidScroll.fire, this._onDidScroll);\n    }\n    trySet2x2(other) {\n        if (this.children.length !== 2 || other.children.length !== 2) {\n            return Disposable.None;\n        }\n        if (this.getChildSize(0) !== other.getChildSize(0)) {\n            return Disposable.None;\n        }\n        const [firstChild, secondChild] = this.children;\n        const [otherFirstChild, otherSecondChild] = other.children;\n        if (!(firstChild instanceof LeafNode) || !(secondChild instanceof LeafNode)) {\n            return Disposable.None;\n        }\n        if (!(otherFirstChild instanceof LeafNode) || !(otherSecondChild instanceof LeafNode)) {\n            return Disposable.None;\n        }\n        if (this.orientation === 0 ) {\n            secondChild.linkedWidthNode = otherFirstChild.linkedHeightNode = firstChild;\n            firstChild.linkedWidthNode = otherSecondChild.linkedHeightNode = secondChild;\n            otherSecondChild.linkedWidthNode = firstChild.linkedHeightNode = otherFirstChild;\n            otherFirstChild.linkedWidthNode = secondChild.linkedHeightNode = otherSecondChild;\n        }\n        else {\n            otherFirstChild.linkedWidthNode = secondChild.linkedHeightNode = firstChild;\n            otherSecondChild.linkedWidthNode = firstChild.linkedHeightNode = secondChild;\n            firstChild.linkedWidthNode = otherSecondChild.linkedHeightNode = otherFirstChild;\n            secondChild.linkedWidthNode = otherFirstChild.linkedHeightNode = otherSecondChild;\n        }\n        const mySash = this.splitview.sashes[0];\n        const otherSash = other.splitview.sashes[0];\n        mySash.linkedSash = otherSash;\n        otherSash.linkedSash = mySash;\n        this._onDidChange.fire(undefined);\n        other._onDidChange.fire(undefined);\n        return toDisposable(() => {\n            mySash.linkedSash = otherSash.linkedSash = undefined;\n            firstChild.linkedHeightNode = firstChild.linkedWidthNode = undefined;\n            secondChild.linkedHeightNode = secondChild.linkedWidthNode = undefined;\n            otherFirstChild.linkedHeightNode = otherFirstChild.linkedWidthNode = undefined;\n            otherSecondChild.linkedHeightNode = otherSecondChild.linkedWidthNode = undefined;\n        });\n    }\n    updateSplitviewEdgeSnappingEnablement() {\n        this.splitview.startSnappingEnabled = this._edgeSnapping || this._absoluteOrthogonalOffset > 0;\n        this.splitview.endSnappingEnabled = this._edgeSnapping || this._absoluteOrthogonalOffset + this._size < this.absoluteOrthogonalSize;\n    }\n    dispose() {\n        for (const child of this.children) {\n            child.dispose();\n        }\n        this._onDidChange.dispose();\n        this._onDidSashReset.dispose();\n        this.splitviewSashResetDisposable.dispose();\n        this.childrenSashResetDisposable.dispose();\n        this.childrenChangeDisposable.dispose();\n        this.splitview.dispose();\n    }\n}\nfunction createLatchedOnDidChangeViewEvent(view) {\n    const [onDidChangeViewConstraints, onDidSetViewSize] = Event.split(view.onDidChange, isUndefined);\n    return Event.any(onDidSetViewSize, ( Event.map(Event.latch(( Event.map(\n        onDidChangeViewConstraints,\n        _ => ([view.minimumWidth, view.maximumWidth, view.minimumHeight, view.maximumHeight])\n    )), equals), _ => undefined)));\n}\nclass LeafNode {\n    get size() { return this._size; }\n    get orthogonalSize() { return this._orthogonalSize; }\n    get linkedWidthNode() { return this._linkedWidthNode; }\n    set linkedWidthNode(node) {\n        this._onDidLinkedWidthNodeChange.input = node ? node._onDidViewChange : Event.None;\n        this._linkedWidthNode = node;\n        this._onDidSetLinkedNode.fire(undefined);\n    }\n    get linkedHeightNode() { return this._linkedHeightNode; }\n    set linkedHeightNode(node) {\n        this._onDidLinkedHeightNodeChange.input = node ? node._onDidViewChange : Event.None;\n        this._linkedHeightNode = node;\n        this._onDidSetLinkedNode.fire(undefined);\n    }\n    constructor(view, orientation, layoutController, orthogonalSize, size = 0) {\n        this.view = view;\n        this.orientation = orientation;\n        this.layoutController = layoutController;\n        this._size = 0;\n        this.absoluteOffset = 0;\n        this.absoluteOrthogonalOffset = 0;\n        this.onDidScroll = Event.None;\n        this.onDidSashReset = Event.None;\n        this._onDidLinkedWidthNodeChange = ( new Relay());\n        this._linkedWidthNode = undefined;\n        this._onDidLinkedHeightNodeChange = ( new Relay());\n        this._linkedHeightNode = undefined;\n        this._onDidSetLinkedNode = ( new Emitter());\n        this.disposables = ( new DisposableStore());\n        this._boundarySashes = {};\n        this.cachedWidth = 0;\n        this.cachedHeight = 0;\n        this.cachedTop = 0;\n        this.cachedLeft = 0;\n        this._orthogonalSize = orthogonalSize;\n        this._size = size;\n        const onDidChange = createLatchedOnDidChangeViewEvent(view);\n        this._onDidViewChange = ( Event.map(\n            onDidChange,\n            e => e && (this.orientation === 0  ? e.width : e.height),\n            this.disposables\n        ));\n        this.onDidChange = Event.any(this._onDidViewChange, this._onDidSetLinkedNode.event, this._onDidLinkedWidthNodeChange.event, this._onDidLinkedHeightNodeChange.event);\n    }\n    get width() {\n        return this.orientation === 1  ? this.orthogonalSize : this.size;\n    }\n    get height() {\n        return this.orientation === 1  ? this.size : this.orthogonalSize;\n    }\n    get top() {\n        return this.orientation === 1  ? this.absoluteOffset : this.absoluteOrthogonalOffset;\n    }\n    get left() {\n        return this.orientation === 1  ? this.absoluteOrthogonalOffset : this.absoluteOffset;\n    }\n    get element() {\n        return this.view.element;\n    }\n    get minimumWidth() {\n        return this.linkedWidthNode ? Math.max(this.linkedWidthNode.view.minimumWidth, this.view.minimumWidth) : this.view.minimumWidth;\n    }\n    get maximumWidth() {\n        return this.linkedWidthNode ? Math.min(this.linkedWidthNode.view.maximumWidth, this.view.maximumWidth) : this.view.maximumWidth;\n    }\n    get minimumHeight() {\n        return this.linkedHeightNode ? Math.max(this.linkedHeightNode.view.minimumHeight, this.view.minimumHeight) : this.view.minimumHeight;\n    }\n    get maximumHeight() {\n        return this.linkedHeightNode ? Math.min(this.linkedHeightNode.view.maximumHeight, this.view.maximumHeight) : this.view.maximumHeight;\n    }\n    get minimumSize() {\n        return this.orientation === 1  ? this.minimumHeight : this.minimumWidth;\n    }\n    get maximumSize() {\n        return this.orientation === 1  ? this.maximumHeight : this.maximumWidth;\n    }\n    get priority() {\n        return this.view.priority;\n    }\n    get proportionalLayout() {\n        return this.view.proportionalLayout ?? true;\n    }\n    get snap() {\n        return this.view.snap;\n    }\n    get minimumOrthogonalSize() {\n        return this.orientation === 1  ? this.minimumWidth : this.minimumHeight;\n    }\n    get maximumOrthogonalSize() {\n        return this.orientation === 1  ? this.maximumWidth : this.maximumHeight;\n    }\n    get boundarySashes() { return this._boundarySashes; }\n    set boundarySashes(boundarySashes) {\n        this._boundarySashes = boundarySashes;\n        this.view.setBoundarySashes?.(toAbsoluteBoundarySashes(boundarySashes, this.orientation));\n    }\n    layout(size, offset, ctx) {\n        if (!this.layoutController.isLayoutEnabled) {\n            return;\n        }\n        if (typeof ctx === 'undefined') {\n            throw new Error('Invalid state');\n        }\n        this._size = size;\n        this._orthogonalSize = ctx.orthogonalSize;\n        this.absoluteOffset = ctx.absoluteOffset + offset;\n        this.absoluteOrthogonalOffset = ctx.absoluteOrthogonalOffset;\n        this._layout(this.width, this.height, this.top, this.left);\n    }\n    _layout(width, height, top, left) {\n        if (this.cachedWidth === width && this.cachedHeight === height && this.cachedTop === top && this.cachedLeft === left) {\n            return;\n        }\n        this.cachedWidth = width;\n        this.cachedHeight = height;\n        this.cachedTop = top;\n        this.cachedLeft = left;\n        this.view.layout(width, height, top, left);\n    }\n    setVisible(visible) {\n        this.view.setVisible?.(visible);\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nfunction flipNode(node, size, orthogonalSize) {\n    if (node instanceof BranchNode) {\n        const result = ( new BranchNode(\n            orthogonal(node.orientation),\n            node.layoutController,\n            node.styles,\n            node.splitviewProportionalLayout,\n            size,\n            orthogonalSize,\n            node.edgeSnapping\n        ));\n        let totalSize = 0;\n        for (let i = node.children.length - 1; i >= 0; i--) {\n            const child = node.children[i];\n            const childSize = child instanceof BranchNode ? child.orthogonalSize : child.size;\n            let newSize = node.size === 0 ? 0 : Math.round((size * childSize) / node.size);\n            totalSize += newSize;\n            if (i === 0) {\n                newSize += size - totalSize;\n            }\n            result.addChild(flipNode(child, orthogonalSize, newSize), newSize, 0, true);\n        }\n        return result;\n    }\n    else {\n        return ( new LeafNode(\n            node.view,\n            orthogonal(node.orientation),\n            node.layoutController,\n            orthogonalSize\n        ));\n    }\n}\nclass GridView {\n    get root() { return this._root; }\n    set root(root) {\n        const oldRoot = this._root;\n        if (oldRoot) {\n            this.element.removeChild(oldRoot.element);\n            oldRoot.dispose();\n        }\n        this._root = root;\n        this.element.appendChild(root.element);\n        this.onDidSashResetRelay.input = root.onDidSashReset;\n        this._onDidChange.input = ( Event.map(root.onDidChange, () => undefined));\n        this._onDidScroll.input = root.onDidScroll;\n    }\n    get width() { return this.root.width; }\n    get height() { return this.root.height; }\n    get minimumWidth() { return this.root.minimumWidth; }\n    get minimumHeight() { return this.root.minimumHeight; }\n    get maximumWidth() { return this.root.maximumHeight; }\n    get maximumHeight() { return this.root.maximumHeight; }\n    get orientation() { return this._root.orientation; }\n    get boundarySashes() { return this._boundarySashes; }\n    set orientation(orientation) {\n        if (this._root.orientation === orientation) {\n            return;\n        }\n        const { size, orthogonalSize, absoluteOffset, absoluteOrthogonalOffset } = this._root;\n        this.root = flipNode(this._root, orthogonalSize, size);\n        this.root.layout(size, 0, { orthogonalSize, absoluteOffset: absoluteOrthogonalOffset, absoluteOrthogonalOffset: absoluteOffset, absoluteSize: size, absoluteOrthogonalSize: orthogonalSize });\n        this.boundarySashes = this.boundarySashes;\n    }\n    set boundarySashes(boundarySashes) {\n        this._boundarySashes = boundarySashes;\n        this.root.boundarySashes = fromAbsoluteBoundarySashes(boundarySashes, this.orientation);\n    }\n    set edgeSnapping(edgeSnapping) {\n        this.root.edgeSnapping = edgeSnapping;\n    }\n    constructor(options = {}) {\n        this.onDidSashResetRelay = ( new Relay());\n        this._onDidScroll = ( new Relay());\n        this._onDidChange = ( new Relay());\n        this._boundarySashes = {};\n        this.disposable2x2 = Disposable.None;\n        this.onDidSashReset = this.onDidSashResetRelay.event;\n        this.onDidScroll = this._onDidScroll.event;\n        this.onDidChange = this._onDidChange.event;\n        this.element = $('.monaco-grid-view');\n        this.styles = options.styles || defaultStyles;\n        this.proportionalLayout = typeof options.proportionalLayout !== 'undefined' ? !!options.proportionalLayout : true;\n        this.layoutController = ( new LayoutController(false));\n        this.root = ( new BranchNode(\n            0 ,\n            this.layoutController,\n            this.styles,\n            this.proportionalLayout\n        ));\n    }\n    style(styles) {\n        this.styles = styles;\n        this.root.style(styles);\n    }\n    layout(width, height, top = 0, left = 0) {\n        this.layoutController.isLayoutEnabled = true;\n        const [size, orthogonalSize, offset, orthogonalOffset] = this.root.orientation === 1  ? [height, width, top, left] : [width, height, left, top];\n        this.root.layout(size, 0, { orthogonalSize, absoluteOffset: offset, absoluteOrthogonalOffset: orthogonalOffset, absoluteSize: size, absoluteOrthogonalSize: orthogonalSize });\n    }\n    addView(view, size, location) {\n        this.disposable2x2.dispose();\n        this.disposable2x2 = Disposable.None;\n        const [rest, index] = tail2(location);\n        const [pathToParent, parent] = this.getNode(rest);\n        if (parent instanceof BranchNode) {\n            const node = ( new LeafNode(\n                view,\n                orthogonal(parent.orientation),\n                this.layoutController,\n                parent.orthogonalSize\n            ));\n            parent.addChild(node, size, index);\n        }\n        else {\n            const [, grandParent] = tail2(pathToParent);\n            const [, parentIndex] = tail2(rest);\n            let newSiblingSize = 0;\n            const newSiblingCachedVisibleSize = grandParent.getChildCachedVisibleSize(parentIndex);\n            if (typeof newSiblingCachedVisibleSize === 'number') {\n                newSiblingSize = Sizing.Invisible(newSiblingCachedVisibleSize);\n            }\n            grandParent.removeChild(parentIndex);\n            const newParent = ( new BranchNode(\n                parent.orientation,\n                parent.layoutController,\n                this.styles,\n                this.proportionalLayout,\n                parent.size,\n                parent.orthogonalSize,\n                grandParent.edgeSnapping\n            ));\n            grandParent.addChild(newParent, parent.size, parentIndex);\n            const newSibling = ( new LeafNode(parent.view, grandParent.orientation, this.layoutController, parent.size));\n            newParent.addChild(newSibling, newSiblingSize, 0);\n            if (typeof size !== 'number' && size.type === 'split') {\n                size = Sizing.Split(0);\n            }\n            const node = ( new LeafNode(view, grandParent.orientation, this.layoutController, parent.size));\n            newParent.addChild(node, size, index);\n        }\n        this.trySet2x2();\n    }\n    removeView(location, sizing) {\n        this.disposable2x2.dispose();\n        this.disposable2x2 = Disposable.None;\n        const [rest, index] = tail2(location);\n        const [pathToParent, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        const node = parent.children[index];\n        if (!(node instanceof LeafNode)) {\n            throw new Error('Invalid location');\n        }\n        parent.removeChild(index, sizing);\n        if (parent.children.length === 0) {\n            throw new Error('Invalid grid state');\n        }\n        if (parent.children.length > 1) {\n            this.trySet2x2();\n            return node.view;\n        }\n        if (pathToParent.length === 0) {\n            const sibling = parent.children[0];\n            if (sibling instanceof LeafNode) {\n                return node.view;\n            }\n            parent.removeChild(0);\n            this.root = sibling;\n            this.boundarySashes = this.boundarySashes;\n            this.trySet2x2();\n            return node.view;\n        }\n        const [, grandParent] = tail2(pathToParent);\n        const [, parentIndex] = tail2(rest);\n        const sibling = parent.children[0];\n        const isSiblingVisible = parent.isChildVisible(0);\n        parent.removeChild(0);\n        const sizes = ( grandParent.children.map((_, i) => grandParent.getChildSize(i)));\n        grandParent.removeChild(parentIndex, sizing);\n        if (sibling instanceof BranchNode) {\n            sizes.splice(parentIndex, 1, ...( sibling.children.map(c => c.size)));\n            for (let i = 0; i < sibling.children.length; i++) {\n                const child = sibling.children[i];\n                grandParent.addChild(child, child.size, parentIndex + i);\n            }\n        }\n        else {\n            const newSibling = ( new LeafNode(\n                sibling.view,\n                orthogonal(sibling.orientation),\n                this.layoutController,\n                sibling.size\n            ));\n            const sizing = isSiblingVisible ? sibling.orthogonalSize : Sizing.Invisible(sibling.orthogonalSize);\n            grandParent.addChild(newSibling, sizing, parentIndex);\n        }\n        for (let i = 0; i < sizes.length; i++) {\n            grandParent.resizeChild(i, sizes[i]);\n        }\n        this.trySet2x2();\n        return node.view;\n    }\n    moveView(parentLocation, from, to) {\n        const [, parent] = this.getNode(parentLocation);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        parent.moveChild(from, to);\n        this.trySet2x2();\n    }\n    swapViews(from, to) {\n        const [fromRest, fromIndex] = tail2(from);\n        const [, fromParent] = this.getNode(fromRest);\n        if (!(fromParent instanceof BranchNode)) {\n            throw new Error('Invalid from location');\n        }\n        const fromSize = fromParent.getChildSize(fromIndex);\n        const fromNode = fromParent.children[fromIndex];\n        if (!(fromNode instanceof LeafNode)) {\n            throw new Error('Invalid from location');\n        }\n        const [toRest, toIndex] = tail2(to);\n        const [, toParent] = this.getNode(toRest);\n        if (!(toParent instanceof BranchNode)) {\n            throw new Error('Invalid to location');\n        }\n        const toSize = toParent.getChildSize(toIndex);\n        const toNode = toParent.children[toIndex];\n        if (!(toNode instanceof LeafNode)) {\n            throw new Error('Invalid to location');\n        }\n        if (fromParent === toParent) {\n            fromParent.swapChildren(fromIndex, toIndex);\n        }\n        else {\n            fromParent.removeChild(fromIndex);\n            toParent.removeChild(toIndex);\n            fromParent.addChild(toNode, fromSize, fromIndex);\n            toParent.addChild(fromNode, toSize, toIndex);\n        }\n        this.trySet2x2();\n    }\n    resizeView(location, size) {\n        const [rest, index] = tail2(location);\n        const [pathToParent, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        if (!size.width && !size.height) {\n            return;\n        }\n        const [parentSize, grandParentSize] = parent.orientation === 1  ? [size.width, size.height] : [size.height, size.width];\n        if (typeof grandParentSize === 'number' && pathToParent.length > 0) {\n            const [, grandParent] = tail2(pathToParent);\n            const [, parentIndex] = tail2(rest);\n            grandParent.resizeChild(parentIndex, grandParentSize);\n        }\n        if (typeof parentSize === 'number') {\n            parent.resizeChild(index, parentSize);\n        }\n        this.trySet2x2();\n    }\n    getViewSize(location) {\n        if (!location) {\n            return { width: this.root.width, height: this.root.height };\n        }\n        const [, node] = this.getNode(location);\n        return { width: node.width, height: node.height };\n    }\n    getViewCachedVisibleSize(location) {\n        const [rest, index] = tail2(location);\n        const [, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        return parent.getChildCachedVisibleSize(index);\n    }\n    maximizeViewSize(location) {\n        const [ancestors, node] = this.getNode(location);\n        if (!(node instanceof LeafNode)) {\n            throw new Error('Invalid location');\n        }\n        for (let i = 0; i < ancestors.length; i++) {\n            ancestors[i].resizeChild(location[i], Number.POSITIVE_INFINITY);\n        }\n    }\n    isViewSizeMaximized(location) {\n        const [ancestors, node] = this.getNode(location);\n        if (!(node instanceof LeafNode)) {\n            throw new Error('Invalid location');\n        }\n        for (let i = 0; i < ancestors.length; i++) {\n            if (!ancestors[i].isChildSizeMaximized(location[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    distributeViewSizes(location) {\n        if (!location) {\n            this.root.distributeViewSizes(true);\n            return;\n        }\n        const [, node] = this.getNode(location);\n        if (!(node instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        node.distributeViewSizes();\n        this.trySet2x2();\n    }\n    isViewVisible(location) {\n        const [rest, index] = tail2(location);\n        const [, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid from location');\n        }\n        return parent.isChildVisible(index);\n    }\n    setViewVisible(location, visible) {\n        const [rest, index] = tail2(location);\n        const [, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid from location');\n        }\n        parent.setChildVisible(index, visible);\n    }\n    getView(location) {\n        const node = location ? this.getNode(location)[1] : this._root;\n        return this._getViews(node, this.orientation);\n    }\n    static deserialize(json, deserializer, options = {}) {\n        if (typeof json.orientation !== 'number') {\n            throw new Error('Invalid JSON: \\'orientation\\' property must be a number.');\n        }\n        else if (typeof json.width !== 'number') {\n            throw new Error('Invalid JSON: \\'width\\' property must be a number.');\n        }\n        else if (typeof json.height !== 'number') {\n            throw new Error('Invalid JSON: \\'height\\' property must be a number.');\n        }\n        else if (json.root?.type !== 'branch') {\n            throw new Error('Invalid JSON: \\'root\\' property must have \\'type\\' value of branch.');\n        }\n        const orientation = json.orientation;\n        const height = json.height;\n        const result = ( new GridView(options));\n        result._deserialize(json.root, orientation, deserializer, height);\n        return result;\n    }\n    _deserialize(root, orientation, deserializer, orthogonalSize) {\n        this.root = this._deserializeNode(root, orientation, deserializer, orthogonalSize);\n    }\n    _deserializeNode(node, orientation, deserializer, orthogonalSize) {\n        let result;\n        if (node.type === 'branch') {\n            const serializedChildren = node.data;\n            const children = ( serializedChildren.map(serializedChild => {\n                return {\n                    node: this._deserializeNode(serializedChild, orthogonal(orientation), deserializer, node.size),\n                    visible: serializedChild.visible\n                };\n            }));\n            result = ( new BranchNode(\n                orientation,\n                this.layoutController,\n                this.styles,\n                this.proportionalLayout,\n                node.size,\n                orthogonalSize,\n                undefined,\n                children\n            ));\n        }\n        else {\n            result = ( new LeafNode(\n                deserializer.fromJSON(node.data),\n                orientation,\n                this.layoutController,\n                orthogonalSize,\n                node.size\n            ));\n        }\n        return result;\n    }\n    _getViews(node, orientation, cachedVisibleSize) {\n        const box = { top: node.top, left: node.left, width: node.width, height: node.height };\n        if (node instanceof LeafNode) {\n            return { view: node.view, box, cachedVisibleSize };\n        }\n        const children = [];\n        for (let i = 0; i < node.children.length; i++) {\n            const child = node.children[i];\n            const cachedVisibleSize = node.getChildCachedVisibleSize(i);\n            children.push(this._getViews(child, orthogonal(orientation), cachedVisibleSize));\n        }\n        return { children, box };\n    }\n    getNode(location, node = this.root, path = []) {\n        if (location.length === 0) {\n            return [path, node];\n        }\n        if (!(node instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index >= node.children.length) {\n            throw new Error('Invalid location');\n        }\n        const child = node.children[index];\n        path.push(node);\n        return this.getNode(rest, child, path);\n    }\n    trySet2x2() {\n        this.disposable2x2.dispose();\n        this.disposable2x2 = Disposable.None;\n        if (this.root.children.length !== 2) {\n            return;\n        }\n        const [first, second] = this.root.children;\n        if (!(first instanceof BranchNode) || !(second instanceof BranchNode)) {\n            return;\n        }\n        this.disposable2x2 = first.trySet2x2(second);\n    }\n    getViewMap(map, node) {\n        if (!node) {\n            node = this.root;\n        }\n        if (node instanceof BranchNode) {\n            node.children.forEach(child => this.getViewMap(map, child));\n        }\n        else {\n            map.set(node.view, node.element);\n        }\n    }\n    dispose() {\n        this.onDidSashResetRelay.dispose();\n        this.root.dispose();\n        if (this.element && this.element.parentElement) {\n            this.element.parentElement.removeChild(this.element);\n        }\n    }\n}\nexport { GridView, orthogonal };\n","import { tail2, equals } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport './gridview.css.js';\nimport { orthogonal, GridView } from './gridview.js';\nimport { Sizing as Sizing$1 } from 'monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js';\nfunction oppositeDirection(direction) {\n    switch (direction) {\n        case 0 : return 1 ;\n        case 1 : return 0 ;\n        case 2 : return 3 ;\n        case 3 : return 2 ;\n    }\n}\nfunction isGridBranchNode(node) {\n    return !!node.children;\n}\nfunction getGridNode(node, location) {\n    if (location.length === 0) {\n        return node;\n    }\n    if (!isGridBranchNode(node)) {\n        throw new Error('Invalid location');\n    }\n    const [index, ...rest] = location;\n    return getGridNode(node.children[index], rest);\n}\nfunction intersects(one, other) {\n    return !(one.start >= other.end || other.start >= one.end);\n}\nfunction getBoxBoundary(box, direction) {\n    const orientation = getDirectionOrientation(direction);\n    const offset = direction === 0  ? box.top :\n        direction === 3  ? box.left + box.width :\n            direction === 1  ? box.top + box.height :\n                box.left;\n    const range = {\n        start: orientation === 1  ? box.top : box.left,\n        end: orientation === 1  ? box.top + box.height : box.left + box.width\n    };\n    return { offset, range };\n}\nfunction findAdjacentBoxLeafNodes(boxNode, direction, boundary) {\n    const result = [];\n    function _(boxNode, direction, boundary) {\n        if (isGridBranchNode(boxNode)) {\n            for (const child of boxNode.children) {\n                _(child, direction, boundary);\n            }\n        }\n        else {\n            const { offset, range } = getBoxBoundary(boxNode.box, direction);\n            if (offset === boundary.offset && intersects(range, boundary.range)) {\n                result.push(boxNode);\n            }\n        }\n    }\n    _(boxNode, direction, boundary);\n    return result;\n}\nfunction getLocationOrientation(rootOrientation, location) {\n    return location.length % 2 === 0 ? orthogonal(rootOrientation) : rootOrientation;\n}\nfunction getDirectionOrientation(direction) {\n    return direction === 0  || direction === 1  ? 0  : 1 ;\n}\nfunction getRelativeLocation(rootOrientation, location, direction) {\n    const orientation = getLocationOrientation(rootOrientation, location);\n    const directionOrientation = getDirectionOrientation(direction);\n    if (orientation === directionOrientation) {\n        let [rest, index] = tail2(location);\n        if (direction === 3  || direction === 1 ) {\n            index += 1;\n        }\n        return [...rest, index];\n    }\n    else {\n        const index = ((direction === 3  || direction === 1) ) ? 1 : 0;\n        return [...location, index];\n    }\n}\nfunction indexInParent(element) {\n    const parentElement = element.parentElement;\n    if (!parentElement) {\n        throw new Error('Invalid grid element');\n    }\n    let el = parentElement.firstElementChild;\n    let index = 0;\n    while (el !== element && el !== parentElement.lastElementChild && el) {\n        el = el.nextElementSibling;\n        index++;\n    }\n    return index;\n}\nfunction getGridLocation(element) {\n    const parentElement = element.parentElement;\n    if (!parentElement) {\n        throw new Error('Invalid grid element');\n    }\n    if (/\\bmonaco-grid-view\\b/.test(parentElement.className)) {\n        return [];\n    }\n    const index = indexInParent(parentElement);\n    const ancestor = parentElement.parentElement.parentElement.parentElement.parentElement;\n    return [...getGridLocation(ancestor), index];\n}\nvar Sizing;\n( (function(Sizing) {\n    Sizing.Distribute = { type: 'distribute' };\n    Sizing.Split = { type: 'split' };\n    Sizing.Auto = { type: 'auto' };\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {})));\nclass Grid extends Disposable {\n    get orientation() { return this.gridview.orientation; }\n    set orientation(orientation) { this.gridview.orientation = orientation; }\n    get width() { return this.gridview.width; }\n    get height() { return this.gridview.height; }\n    get minimumWidth() { return this.gridview.minimumWidth; }\n    get minimumHeight() { return this.gridview.minimumHeight; }\n    get maximumWidth() { return this.gridview.maximumWidth; }\n    get maximumHeight() { return this.gridview.maximumHeight; }\n    get boundarySashes() { return this.gridview.boundarySashes; }\n    set boundarySashes(boundarySashes) { this.gridview.boundarySashes = boundarySashes; }\n    set edgeSnapping(edgeSnapping) { this.gridview.edgeSnapping = edgeSnapping; }\n    get element() { return this.gridview.element; }\n    constructor(view, options = {}) {\n        super();\n        this.views = ( new Map());\n        this.didLayout = false;\n        if (view instanceof GridView) {\n            this.gridview = view;\n            this.gridview.getViewMap(this.views);\n        }\n        else {\n            this.gridview = ( new GridView(options));\n        }\n        this._register(this.gridview);\n        this._register(this.gridview.onDidSashReset(this.onDidSashReset, this));\n        if (!(view instanceof GridView)) {\n            this._addView(view, 0, [0]);\n        }\n        this.onDidChange = this.gridview.onDidChange;\n        this.onDidScroll = this.gridview.onDidScroll;\n    }\n    style(styles) {\n        this.gridview.style(styles);\n    }\n    layout(width, height, top = 0, left = 0) {\n        this.gridview.layout(width, height, top, left);\n        this.didLayout = true;\n    }\n    addView(newView, size, referenceView, direction) {\n        if (( this.views.has(newView))) {\n            throw new Error('Can\\'t add same view twice');\n        }\n        const orientation = getDirectionOrientation(direction);\n        if (this.views.size === 1 && this.orientation !== orientation) {\n            this.orientation = orientation;\n        }\n        const referenceLocation = this.getViewLocation(referenceView);\n        const location = getRelativeLocation(this.gridview.orientation, referenceLocation, direction);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else if (size.type === 'split') {\n            const [, index] = tail2(referenceLocation);\n            viewSize = Sizing$1.Split(index);\n        }\n        else if (size.type === 'distribute') {\n            viewSize = Sizing$1.Distribute;\n        }\n        else if (size.type === 'auto') {\n            const [, index] = tail2(referenceLocation);\n            viewSize = Sizing$1.Auto(index);\n        }\n        else {\n            viewSize = size;\n        }\n        this._addView(newView, viewSize, location);\n    }\n    addViewAt(newView, size, location) {\n        if (( this.views.has(newView))) {\n            throw new Error('Can\\'t add same view twice');\n        }\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else if (size.type === 'distribute') {\n            viewSize = Sizing$1.Distribute;\n        }\n        else {\n            viewSize = size;\n        }\n        this._addView(newView, viewSize, location);\n    }\n    _addView(newView, size, location) {\n        this.views.set(newView, newView.element);\n        this.gridview.addView(newView, size, location);\n    }\n    removeView(view, sizing) {\n        if (this.views.size === 1) {\n            throw new Error('Can\\'t remove last view');\n        }\n        const location = this.getViewLocation(view);\n        let gridViewSizing;\n        if (sizing?.type === 'distribute') {\n            gridViewSizing = Sizing$1.Distribute;\n        }\n        else if (sizing?.type === 'auto') {\n            const index = location[location.length - 1];\n            gridViewSizing = Sizing$1.Auto(index === 0 ? 1 : index - 1);\n        }\n        this.gridview.removeView(location, gridViewSizing);\n        this.views.delete(view);\n    }\n    moveView(view, sizing, referenceView, direction) {\n        const sourceLocation = this.getViewLocation(view);\n        const [sourceParentLocation, from] = tail2(sourceLocation);\n        const referenceLocation = this.getViewLocation(referenceView);\n        const targetLocation = getRelativeLocation(this.gridview.orientation, referenceLocation, direction);\n        const [targetParentLocation, to] = tail2(targetLocation);\n        if (equals(sourceParentLocation, targetParentLocation)) {\n            this.gridview.moveView(sourceParentLocation, from, to);\n        }\n        else {\n            this.removeView(view, typeof sizing === 'number' ? undefined : sizing);\n            this.addView(view, sizing, referenceView, direction);\n        }\n    }\n    moveViewTo(view, location) {\n        const sourceLocation = this.getViewLocation(view);\n        const [sourceParentLocation, from] = tail2(sourceLocation);\n        const [targetParentLocation, to] = tail2(location);\n        if (equals(sourceParentLocation, targetParentLocation)) {\n            this.gridview.moveView(sourceParentLocation, from, to);\n        }\n        else {\n            const size = this.getViewSize(view);\n            const orientation = getLocationOrientation(this.gridview.orientation, sourceLocation);\n            const cachedViewSize = this.getViewCachedVisibleSize(view);\n            const sizing = typeof cachedViewSize === 'undefined'\n                ? (orientation === 1  ? size.width : size.height)\n                : Sizing.Invisible(cachedViewSize);\n            this.removeView(view);\n            this.addViewAt(view, sizing, location);\n        }\n    }\n    swapViews(from, to) {\n        const fromLocation = this.getViewLocation(from);\n        const toLocation = this.getViewLocation(to);\n        return this.gridview.swapViews(fromLocation, toLocation);\n    }\n    resizeView(view, size) {\n        const location = this.getViewLocation(view);\n        return this.gridview.resizeView(location, size);\n    }\n    isViewSizeMaximized(view) {\n        const location = this.getViewLocation(view);\n        return this.gridview.isViewSizeMaximized(location);\n    }\n    getViewSize(view) {\n        if (!view) {\n            return this.gridview.getViewSize();\n        }\n        const location = this.getViewLocation(view);\n        return this.gridview.getViewSize(location);\n    }\n    getViewCachedVisibleSize(view) {\n        const location = this.getViewLocation(view);\n        return this.gridview.getViewCachedVisibleSize(location);\n    }\n    maximizeViewSize(view) {\n        const location = this.getViewLocation(view);\n        this.gridview.maximizeViewSize(location);\n    }\n    distributeViewSizes() {\n        this.gridview.distributeViewSizes();\n    }\n    isViewVisible(view) {\n        const location = this.getViewLocation(view);\n        return this.gridview.isViewVisible(location);\n    }\n    setViewVisible(view, visible) {\n        const location = this.getViewLocation(view);\n        this.gridview.setViewVisible(location, visible);\n    }\n    getViews() {\n        return this.gridview.getView();\n    }\n    getNeighborViews(view, direction, wrap = false) {\n        if (!this.didLayout) {\n            throw new Error('Can\\'t call getNeighborViews before first layout');\n        }\n        const location = this.getViewLocation(view);\n        const root = this.getViews();\n        const node = getGridNode(root, location);\n        let boundary = getBoxBoundary(node.box, direction);\n        if (wrap) {\n            if (direction === 0  && node.box.top === 0) {\n                boundary = { offset: root.box.top + root.box.height, range: boundary.range };\n            }\n            else if (direction === 3  && node.box.left + node.box.width === root.box.width) {\n                boundary = { offset: 0, range: boundary.range };\n            }\n            else if (direction === 1  && node.box.top + node.box.height === root.box.height) {\n                boundary = { offset: 0, range: boundary.range };\n            }\n            else if (direction === 2  && node.box.left === 0) {\n                boundary = { offset: root.box.left + root.box.width, range: boundary.range };\n            }\n        }\n        return ( findAdjacentBoxLeafNodes(root, oppositeDirection(direction), boundary)\n            .map(node => node.view));\n    }\n    getViewLocation(view) {\n        const element = this.views.get(view);\n        if (!element) {\n            throw new Error('View not found');\n        }\n        return getGridLocation(element);\n    }\n    onDidSashReset(location) {\n        const resizeToPreferredSize = (location) => {\n            const node = this.gridview.getView(location);\n            if (isGridBranchNode(node)) {\n                return false;\n            }\n            const direction = getLocationOrientation(this.orientation, location);\n            const size = direction === 1  ? node.view.preferredWidth : node.view.preferredHeight;\n            if (typeof size !== 'number') {\n                return false;\n            }\n            const viewSize = direction === 1  ? { width: Math.round(size) } : { height: Math.round(size) };\n            this.gridview.resizeView(location, viewSize);\n            return true;\n        };\n        if (resizeToPreferredSize(location)) {\n            return;\n        }\n        const [parentLocation, index] = tail2(location);\n        if (resizeToPreferredSize([...parentLocation, index + 1])) {\n            return;\n        }\n        this.gridview.distributeViewSizes(parentLocation);\n    }\n}\nclass SerializableGrid extends Grid {\n    constructor() {\n        super(...arguments);\n        this.initialLayoutContext = true;\n    }\n    static serializeNode(node, orientation) {\n        const size = orientation === 0  ? node.box.width : node.box.height;\n        if (!isGridBranchNode(node)) {\n            if (typeof node.cachedVisibleSize === 'number') {\n                return { type: 'leaf', data: node.view.toJSON(), size: node.cachedVisibleSize, visible: false };\n            }\n            return { type: 'leaf', data: node.view.toJSON(), size };\n        }\n        return { type: 'branch', data: ( node.children.map(c => SerializableGrid.serializeNode(c, orthogonal(orientation)))), size };\n    }\n    static deserialize(json, deserializer, options = {}) {\n        if (typeof json.orientation !== 'number') {\n            throw new Error('Invalid JSON: \\'orientation\\' property must be a number.');\n        }\n        else if (typeof json.width !== 'number') {\n            throw new Error('Invalid JSON: \\'width\\' property must be a number.');\n        }\n        else if (typeof json.height !== 'number') {\n            throw new Error('Invalid JSON: \\'height\\' property must be a number.');\n        }\n        const gridview = GridView.deserialize(json, deserializer, options);\n        const result = ( new SerializableGrid(gridview, options));\n        return result;\n    }\n    static from(gridDescriptor, options = {}) {\n        return SerializableGrid.deserialize(createSerializedGrid(gridDescriptor), { fromJSON: view => view }, options);\n    }\n    serialize() {\n        return {\n            root: SerializableGrid.serializeNode(this.getViews(), this.orientation),\n            orientation: this.orientation,\n            width: this.width,\n            height: this.height\n        };\n    }\n    layout(width, height, top = 0, left = 0) {\n        super.layout(width, height, top, left);\n        if (this.initialLayoutContext) {\n            this.initialLayoutContext = false;\n            this.gridview.trySet2x2();\n        }\n    }\n}\nfunction isGridBranchNodeDescriptor(nodeDescriptor) {\n    return !!nodeDescriptor.groups;\n}\nfunction sanitizeGridNodeDescriptor(nodeDescriptor, rootNode) {\n    if (!rootNode && nodeDescriptor.groups && nodeDescriptor.groups.length <= 1) {\n        nodeDescriptor.groups = undefined;\n    }\n    if (!isGridBranchNodeDescriptor(nodeDescriptor)) {\n        return;\n    }\n    let totalDefinedSize = 0;\n    let totalDefinedSizeCount = 0;\n    for (const child of nodeDescriptor.groups) {\n        sanitizeGridNodeDescriptor(child, false);\n        if (child.size) {\n            totalDefinedSize += child.size;\n            totalDefinedSizeCount++;\n        }\n    }\n    const totalUndefinedSize = totalDefinedSizeCount > 0 ? totalDefinedSize : 1;\n    const totalUndefinedSizeCount = nodeDescriptor.groups.length - totalDefinedSizeCount;\n    const eachUndefinedSize = totalUndefinedSize / totalUndefinedSizeCount;\n    for (const child of nodeDescriptor.groups) {\n        if (!child.size) {\n            child.size = eachUndefinedSize;\n        }\n    }\n}\nfunction createSerializedNode(nodeDescriptor) {\n    if (isGridBranchNodeDescriptor(nodeDescriptor)) {\n        return { type: 'branch', data: ( nodeDescriptor.groups.map(c => createSerializedNode(c))), size: nodeDescriptor.size };\n    }\n    else {\n        return { type: 'leaf', data: nodeDescriptor.data, size: nodeDescriptor.size };\n    }\n}\nfunction getDimensions(node, orientation) {\n    if (node.type === 'branch') {\n        const childrenDimensions = ( node.data.map(c => getDimensions(c, orthogonal(orientation))));\n        if (orientation === 0 ) {\n            const width = node.size || (childrenDimensions.length === 0 ? undefined : Math.max(...( childrenDimensions.map(d => d.width || 0))));\n            const height = childrenDimensions.length === 0 ? undefined : childrenDimensions.reduce((r, d) => r + (d.height || 0), 0);\n            return { width, height };\n        }\n        else {\n            const width = childrenDimensions.length === 0 ? undefined : childrenDimensions.reduce((r, d) => r + (d.width || 0), 0);\n            const height = node.size || (childrenDimensions.length === 0 ? undefined : Math.max(...( childrenDimensions.map(d => d.height || 0))));\n            return { width, height };\n        }\n    }\n    else {\n        const width = orientation === 0  ? node.size : undefined;\n        const height = orientation === 0  ? undefined : node.size;\n        return { width, height };\n    }\n}\nfunction createSerializedGrid(gridDescriptor) {\n    sanitizeGridNodeDescriptor(gridDescriptor, true);\n    const root = createSerializedNode(gridDescriptor);\n    const { width, height } = getDimensions(root, gridDescriptor.orientation);\n    return {\n        root,\n        orientation: gridDescriptor.orientation,\n        width: width || 1,\n        height: height || 1\n    };\n}\nexport { Grid, SerializableGrid, Sizing, createSerializedGrid, getRelativeLocation, isGridBranchNode, orthogonal, sanitizeGridNodeDescriptor };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.editor>.content .editor-group-container{height:100%}.monaco-workbench .part.editor>.content .editor-group-container.empty{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container.empty.active,.monaco-workbench .part.editor>.content .editor-group-container.empty.dragged-over{opacity:1}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty.active:focus{outline:1px solid var(--vscode-editorGroup-focusedEmptyBorder);outline-offset:-2px}.monaco-workbench .part.editor>.content.empty .editor-group-container.empty.active:focus{outline:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;margin:auto;max-width:290px}.monaco-workbench .part.editor>.content .editor-group-container:not(.empty)>.editor-group-watermark{display:none}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-watermark{height:calc(100% - 70px);max-width:200px}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.letterpress{aspect-ratio:1/1;background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4xIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=\\\");background-position-x:center;background-repeat:no-repeat;background-size:contain;max-height:100%;width:100%}.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIG9wYWNpdHk9Ii4zIj48cGF0aCBkPSJNMjU5Ljk5NiAyNDIuMDAySC0uMDAzVjE4aDI2MHYyMjRaTTUuOTk3IDI0LjAwNnYyMTEuOTkxaDI0OFYyNC4wMDZoLTI0OFoiLz48cGF0aCBkPSJNNzcgMjJoMTh2MjE2SDc3ek0xMTIgNDJoNzB2MThoLTcwek0xMTIgMTgyaDcwdjE4aC03MHpNMTI5LjQ5OCA3N2g4OHYxOGgtODh6TTEyOS40OTggMTEyaDg4djE4aC04OHpNMTI5LjQ5OCAxNDdoODh2MThoLTg4eiIvPjwvZz48L3N2Zz4=\\\")}.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiNkOWQ5ZDkiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==\\\")}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.letterpress{background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjYwIDI2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEuNDE0MjEiPjxnIGZpbGw9IiMzQzNDM0MiPjxwYXRoIGQ9Ik0yNTkuOTk2IDI0Mi4wMDJILS4wMDNWMThoMjYwdjIyNFpNNS45OTcgMjQuMDA2djIxMS45OTFoMjQ4VjI0LjAwNmgtMjQ4WiIvPjxwYXRoIGQ9Ik03NyAyMmgxOHYyMTZINzd6TTExMiA0Mmg3MHYxOGgtNzB6TTExMiAxODJoNzB2MThoLTcwek0xMjkuNDk4IDc3aDg4djE4aC04OHpNMTI5LjQ5OCAxMTJoODh2MThoLTg4ek0xMjkuNDk4IDE0N2g4OHYxOGgtODh6Ii8+PC9nPjwvc3ZnPg==\\\")}.monaco-workbench .part.editor>.content .editor-group-container.max-height-478px>.editor-group-watermark>.shortcuts,.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container>.editor-group-watermark>.shortcuts{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts>.watermark-box{border-collapse:separate;border-spacing:11px 17px;display:inline-table}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dl{cursor:default;display:table-row;opacity:.8}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{letter-spacing:.04em;text-align:right}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd{text-align:left}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dd,.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{display:table-cell;vertical-align:middle}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dl,.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-watermark>.shortcuts dt{color:rgba(0,0,0,.68)}.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dl,.monaco-workbench.vs-dark .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dt{color:hsla(0,0%,100%,.6)}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dt,.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dt{color:var(--vscode-editor-foreground)}.monaco-workbench.hc-black .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dl,.monaco-workbench.hc-light .part.editor>.content .editor-group-container .editor-group-watermark>.shortcuts dl{color:var(--vscode-editor-foreground);opacity:1}.monaco-workbench .part.editor>.content .editor-group-container>.title{box-sizing:border-box;overflow:hidden;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title:not(.tabs){display:flex;flex-wrap:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title.title-border-bottom:after{background-color:var(--title-border-bottom-color);bottom:0;content:\\\"\\\";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container.empty>.title{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar{display:none;height:35px}.monaco-workbench .part.editor>.content:not(.empty) .editor-group-container.empty>.editor-group-container-toolbar{display:block}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .actions-container{justify-content:flex-end}.monaco-workbench .part.editor>.content .editor-group-container>.editor-group-container-toolbar .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.empty>.editor-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.editor-container>.editor-instance{height:100%}.monaco-workbench .part.editor>.content .grid-view-container{height:100%;width:100%}\";\nn(css,{});\nexport { css, css as default };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container{display:flex;position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.tabs-border-bottom:after{background-color:var(--tabs-border-bottom-color);bottom:0;content:\\\"\\\";height:1px;left:0;pointer-events:none;position:absolute;width:100%;z-index:9}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element{flex:1}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container>.monaco-scrollable-element .scrollbar{cursor:default;z-index:11}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container{display:flex;height:35px;scrollbar-width:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.scroll{overflow:scroll!important}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container{flex-wrap:wrap;height:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container::-webkit-scrollbar{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab{box-sizing:border-box;cursor:pointer;display:flex;height:35px;padding-left:10px;position:relative;white-space:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab:last-child{margin-right:var(--last-tab-margin-right)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.last-in-row:not(:last-child){border-right:0!important}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.tab-actions-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.has-icon.tab-actions-right,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.tab-actions-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.has-icon.tab-actions-right{padding-left:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit{flex-shrink:0;min-width:fit-content;width:120px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed{flex:1 0 0;max-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-max-width,160px));min-width:var(--tab-sizing-current-width,var(--tab-sizing-fixed-min-width,50px))}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.last-in-row{min-width:calc(var(--tab-sizing-current-width, var(--tab-sizing-fixed-min-width, 50px)) - 1px)}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .tabs-container>.tab.sizing-fit.last-in-row:not(:last-child){flex-grow:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink{flex-basis:0;flex-grow:1;max-width:fit-content;min-width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{flex-basis:0;flex-grow:0;position:sticky;z-index:8}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-compact{max-width:38px;min-width:38px;width:38px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.sticky-shrink{max-width:80px;min-width:80px;width:80px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fit.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-fixed.sticky-shrink,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-compact,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container.disable-sticky-tabs>.tab.sizing-shrink.sticky-shrink{position:static}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-off:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-off:after{content:\\\"\\\";display:flex;flex:0;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-left,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-left{min-width:80px;padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dragged{transform:translateZ(0)}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dragged-over div{pointer-events:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-left{flex-direction:row-reverse;padding-left:0;padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-border-top-container{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container{display:block;left:0;pointer-events:none;position:absolute;width:100%}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-top>.tab-border-top-container{background-color:var(--tab-border-top-color);height:1px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active.tab-border-bottom>.tab-border-bottom-container{background-color:var(--tab-border-bottom-color);bottom:0;height:1px;z-index:10}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty-border-top>.tab-border-top-container{background-color:var(--tab-dirty-border-top-color);height:2px;top:0;z-index:6}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label{line-height:35px;margin-bottom:auto;margin-top:auto}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink .tab-label{position:relative}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label>.monaco-icon-label-container:after{bottom:1px;content:\\\"\\\";height:calc(100% - 2px);opacity:1;padding:0;position:absolute;right:0;top:1px;width:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed:focus>.tab-label>.monaco-icon-label-container:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink:focus>.tab-label>.monaco-icon-label-container:after{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.tab-label.tab-label-has-badge:after,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.tab-label.tab-label-has-badge:after{padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky-compact:not(.has-icon) .monaco-icon-label{text-align:center}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fit .monaco-icon-label>.monaco-icon-label-container{overflow:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{flex:none;text-overflow:clip}.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-black .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed>.monaco-icon-label>.monaco-icon-label-container,.monaco-workbench.hc-light .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink>.monaco-icon-label>.monaco-icon-label-container{text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions{margin-bottom:auto;margin-top:auto;width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions>.monaco-action-bar{width:28px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions{flex:0;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-fixed>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.tab-actions-right.sizing-shrink>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-fixed>.tab-actions:focus-within,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink:hover>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-right.sizing-shrink>.tab-actions:focus-within{overflow:visible}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.sticky-compact>.tab-actions,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off:not(.dirty):not(.sticky)>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label:focus{opacity:1}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .actions-container{justify-content:center}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab>.tab-actions .action-label.codicon{color:inherit;font-size:16px;height:16px;padding:2px;width:16px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky.dirty>.tab-actions .action-label:not(:hover):before{content:\\\"\\\\ebb2\\\"}.monaco-workbench .part.editor>.content .editor-group-container.active>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label:not(:hover):before{content:\\\"\\\\ea71\\\"}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active:hover>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.active>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.dirty>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sticky>.tab-actions .action-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab:hover>.tab-actions .action-label{opacity:.5}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab>.tab-actions .action-label{opacity:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off{padding-right:10px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-fixed.tab-actions-off:not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.sizing-shrink.tab-actions-off:not(.sticky-compact){padding-right:5px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.dirty-border-top>.tab-actions{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.dirty:not(.dirty-border-top):not(.sticky-compact),.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off.sticky:not(.sticky-compact){padding-right:0}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab.tab-actions-off>.tab-actions{pointer-events:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control{cursor:default;flex:1 100%;height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-icon-label{height:22px;line-height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-icon-label:before{height:22px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .outline-element-icon{height:22px;line-height:22px;padding-right:3px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item{max-width:80%}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:before{align-items:center;display:flex;height:22px;justify-content:center;width:16px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child .codicon:last-child{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions{cursor:default;flex:initial;height:35px;padding:0 8px 0 4px}.monaco-workbench .part.editor>.content .editor-group-container>.title .editor-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.tabs-and-actions-container.wrapping .editor-actions{bottom:0;position:absolute;right:0}\";\nn(css,{});\nexport { css, css as default };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.editor>.content .editor-group-container>.title{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label{flex:1;white-space:nowrap}.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a{font-size:13px}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .monaco-icon-label:before,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .tabs-container>.tab .tab-label span,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label a,.monaco-workbench .part.editor>.content .editor-group-container>.title .title-label h2{cursor:pointer}.monaco-workbench .part.editor>.content .editor-group-container>.title .monaco-icon-label:before{height:35px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .monaco-icon-label:after,.monaco-workbench .part.editor>.content .editor-group-container>.title.tabs .monaco-icon-label:after{margin-right:0}.monaco-editor-group-drag-image{border-radius:10px;display:inline-block;font-size:12px;padding:1px 7px;position:absolute}\";\nn(css,{});\nexport { css, css as default };\n","\n      import API from \"!../../../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../css-loader/dist/cjs.js!./breadcrumbsWidget.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../css-loader/dist/cjs.js!./breadcrumbsWidget.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { commonPrefixLength } from '../../../common/arrays.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { Emitter } from '../../../common/event.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport './breadcrumbsWidget.css';\nexport class BreadcrumbsItem {\n    dispose() { }\n}\nexport class BreadcrumbsWidget {\n    constructor(container, horizontalScrollbarSize, separatorIcon, styles) {\n        this._disposables = new DisposableStore();\n        this._onDidSelectItem = new Emitter();\n        this._onDidFocusItem = new Emitter();\n        this._onDidChangeFocus = new Emitter();\n        this.onDidSelectItem = this._onDidSelectItem.event;\n        this.onDidFocusItem = this._onDidFocusItem.event;\n        this.onDidChangeFocus = this._onDidChangeFocus.event;\n        this._items = new Array();\n        this._nodes = new Array();\n        this._freeNodes = new Array();\n        this._enabled = true;\n        this._focusedItemIdx = -1;\n        this._selectedItemIdx = -1;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-breadcrumbs';\n        this._domNode.tabIndex = 0;\n        this._domNode.setAttribute('role', 'list');\n        this._scrollable = new DomScrollableElement(this._domNode, {\n            vertical: 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            horizontalScrollbarSize,\n            useShadows: false,\n            scrollYToX: true\n        });\n        this._separatorIcon = separatorIcon;\n        this._disposables.add(this._scrollable);\n        this._disposables.add(dom.addStandardDisposableListener(this._domNode, 'click', e => this._onClick(e)));\n        container.appendChild(this._scrollable.getDomNode());\n        const styleElement = dom.createStyleSheet(this._domNode);\n        this._style(styleElement, styles);\n        const focusTracker = dom.trackFocus(this._domNode);\n        this._disposables.add(focusTracker);\n        this._disposables.add(focusTracker.onDidBlur(_ => this._onDidChangeFocus.fire(false)));\n        this._disposables.add(focusTracker.onDidFocus(_ => this._onDidChangeFocus.fire(true)));\n    }\n    setHorizontalScrollbarSize(size) {\n        this._scrollable.updateOptions({\n            horizontalScrollbarSize: size\n        });\n    }\n    dispose() {\n        var _a;\n        this._disposables.dispose();\n        (_a = this._pendingLayout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._onDidSelectItem.dispose();\n        this._onDidFocusItem.dispose();\n        this._onDidChangeFocus.dispose();\n        this._domNode.remove();\n        this._nodes.length = 0;\n        this._freeNodes.length = 0;\n    }\n    layout(dim) {\n        var _a;\n        if (dim && dom.Dimension.equals(dim, this._dimension)) {\n            return;\n        }\n        (_a = this._pendingLayout) === null || _a === void 0 ? void 0 : _a.dispose();\n        if (dim) {\n            // only measure\n            this._pendingLayout = this._updateDimensions(dim);\n        }\n        else {\n            this._pendingLayout = this._updateScrollbar();\n        }\n    }\n    _updateDimensions(dim) {\n        const disposables = new DisposableStore();\n        disposables.add(dom.modify(() => {\n            this._dimension = dim;\n            this._domNode.style.width = `${dim.width}px`;\n            this._domNode.style.height = `${dim.height}px`;\n            disposables.add(this._updateScrollbar());\n        }));\n        return disposables;\n    }\n    _updateScrollbar() {\n        return dom.measure(() => {\n            dom.measure(() => {\n                this._scrollable.setRevealOnScroll(false);\n                this._scrollable.scanDomNode();\n                this._scrollable.setRevealOnScroll(true);\n            });\n        });\n    }\n    _style(styleElement, style) {\n        let content = '';\n        if (style.breadcrumbsBackground) {\n            content += `.monaco-breadcrumbs { background-color: ${style.breadcrumbsBackground}}`;\n        }\n        if (style.breadcrumbsForeground) {\n            content += `.monaco-breadcrumbs .monaco-breadcrumb-item { color: ${style.breadcrumbsForeground}}\\n`;\n        }\n        if (style.breadcrumbsFocusForeground) {\n            content += `.monaco-breadcrumbs .monaco-breadcrumb-item.focused { color: ${style.breadcrumbsFocusForeground}}\\n`;\n        }\n        if (style.breadcrumbsFocusAndSelectionForeground) {\n            content += `.monaco-breadcrumbs .monaco-breadcrumb-item.focused.selected { color: ${style.breadcrumbsFocusAndSelectionForeground}}\\n`;\n        }\n        if (style.breadcrumbsHoverForeground) {\n            content += `.monaco-breadcrumbs:not(.disabled\t) .monaco-breadcrumb-item:hover:not(.focused):not(.selected) { color: ${style.breadcrumbsHoverForeground}}\\n`;\n        }\n        styleElement.innerText = content;\n    }\n    setEnabled(value) {\n        this._enabled = value;\n        this._domNode.classList.toggle('disabled', !this._enabled);\n    }\n    domFocus() {\n        const idx = this._focusedItemIdx >= 0 ? this._focusedItemIdx : this._items.length - 1;\n        if (idx >= 0 && idx < this._items.length) {\n            this._focus(idx, undefined);\n        }\n        else {\n            this._domNode.focus();\n        }\n    }\n    isDOMFocused() {\n        let candidate = document.activeElement;\n        while (candidate) {\n            if (this._domNode === candidate) {\n                return true;\n            }\n            candidate = candidate.parentElement;\n        }\n        return false;\n    }\n    getFocused() {\n        return this._items[this._focusedItemIdx];\n    }\n    setFocused(item, payload) {\n        this._focus(this._items.indexOf(item), payload);\n    }\n    focusPrev(payload) {\n        if (this._focusedItemIdx > 0) {\n            this._focus(this._focusedItemIdx - 1, payload);\n        }\n    }\n    focusNext(payload) {\n        if (this._focusedItemIdx + 1 < this._nodes.length) {\n            this._focus(this._focusedItemIdx + 1, payload);\n        }\n    }\n    _focus(nth, payload) {\n        this._focusedItemIdx = -1;\n        for (let i = 0; i < this._nodes.length; i++) {\n            const node = this._nodes[i];\n            if (i !== nth) {\n                node.classList.remove('focused');\n            }\n            else {\n                this._focusedItemIdx = i;\n                node.classList.add('focused');\n                node.focus();\n            }\n        }\n        this._reveal(this._focusedItemIdx, true);\n        this._onDidFocusItem.fire({ type: 'focus', item: this._items[this._focusedItemIdx], node: this._nodes[this._focusedItemIdx], payload });\n    }\n    reveal(item) {\n        const idx = this._items.indexOf(item);\n        if (idx >= 0) {\n            this._reveal(idx, false);\n        }\n    }\n    revealLast() {\n        this._reveal(this._items.length - 1, false);\n    }\n    _reveal(nth, minimal) {\n        if (nth < 0 || nth >= this._nodes.length) {\n            return;\n        }\n        const node = this._nodes[nth];\n        if (!node) {\n            return;\n        }\n        const { width } = this._scrollable.getScrollDimensions();\n        const { scrollLeft } = this._scrollable.getScrollPosition();\n        if (!minimal || node.offsetLeft > scrollLeft + width || node.offsetLeft < scrollLeft) {\n            this._scrollable.setRevealOnScroll(false);\n            this._scrollable.setScrollPosition({ scrollLeft: node.offsetLeft });\n            this._scrollable.setRevealOnScroll(true);\n        }\n    }\n    getSelection() {\n        return this._items[this._selectedItemIdx];\n    }\n    setSelection(item, payload) {\n        this._select(this._items.indexOf(item), payload);\n    }\n    _select(nth, payload) {\n        this._selectedItemIdx = -1;\n        for (let i = 0; i < this._nodes.length; i++) {\n            const node = this._nodes[i];\n            if (i !== nth) {\n                node.classList.remove('selected');\n            }\n            else {\n                this._selectedItemIdx = i;\n                node.classList.add('selected');\n            }\n        }\n        this._onDidSelectItem.fire({ type: 'select', item: this._items[this._selectedItemIdx], node: this._nodes[this._selectedItemIdx], payload });\n    }\n    getItems() {\n        return this._items;\n    }\n    setItems(items) {\n        let prefix;\n        let removed = [];\n        try {\n            prefix = commonPrefixLength(this._items, items, (a, b) => a.equals(b));\n            removed = this._items.splice(prefix, this._items.length - prefix, ...items.slice(prefix));\n            this._render(prefix);\n            dispose(removed);\n            this._focus(-1, undefined);\n        }\n        catch (e) {\n            const newError = new Error(`BreadcrumbsItem#setItems: newItems: ${items.length}, prefix: ${prefix}, removed: ${removed.length}`);\n            newError.name = e.name;\n            newError.stack = e.stack;\n            throw newError;\n        }\n    }\n    _render(start) {\n        let didChange = false;\n        for (; start < this._items.length && start < this._nodes.length; start++) {\n            const item = this._items[start];\n            const node = this._nodes[start];\n            this._renderItem(item, node);\n            didChange = true;\n        }\n        // case a: more nodes -> remove them\n        while (start < this._nodes.length) {\n            const free = this._nodes.pop();\n            if (free) {\n                this._freeNodes.push(free);\n                free.remove();\n                didChange = true;\n            }\n        }\n        // case b: more items -> render them\n        for (; start < this._items.length; start++) {\n            const item = this._items[start];\n            const node = this._freeNodes.length > 0 ? this._freeNodes.pop() : document.createElement('div');\n            if (node) {\n                this._renderItem(item, node);\n                this._domNode.appendChild(node);\n                this._nodes.push(node);\n                didChange = true;\n            }\n        }\n        if (didChange) {\n            this.layout(undefined);\n        }\n    }\n    _renderItem(item, container) {\n        dom.clearNode(container);\n        container.className = '';\n        try {\n            item.render(container);\n        }\n        catch (err) {\n            container.innerText = '<<RENDER ERROR>>';\n            console.error(err);\n        }\n        container.tabIndex = -1;\n        container.setAttribute('role', 'listitem');\n        container.classList.add('monaco-breadcrumb-item');\n        const iconContainer = dom.$(ThemeIcon.asCSSSelector(this._separatorIcon));\n        container.appendChild(iconContainer);\n    }\n    _onClick(event) {\n        if (!this._enabled) {\n            return;\n        }\n        for (let el = event.target; el; el = el.parentElement) {\n            const idx = this._nodes.indexOf(el);\n            if (idx >= 0) {\n                this._focus(idx, event);\n                this._select(idx, event);\n                break;\n            }\n        }\n    }\n}\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control.hidden{display:none}.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.focused .monaco-icon-label,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .hint-more,.monaco-workbench .part.editor>.content .editor-group-container .breadcrumbs-control .monaco-breadcrumb-item.selected .monaco-icon-label{text-decoration-line:underline}.monaco-workbench .monaco-breadcrumb-item.shows-symbol-icon .codicon[class*=codicon-symbol-]{padding-right:6px}.monaco-workbench .monaco-breadcrumbs-picker .arrow{border-style:solid;position:absolute;width:0}.monaco-workbench .monaco-breadcrumbs-picker .picker-item{flex:1;line-height:22px}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree{display:flex;flex-direction:column;height:100%;overflow:hidden}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.input{box-sizing:border-box;height:36px;padding:5px 9px;position:relative}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree>.tree{height:calc(100% - 36px)}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.input{display:none}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree.inactive>.tree{height:100%}.monaco-workbench .monaco-breadcrumbs-picker .highlighting-tree .monaco-highlighted-label .highlight{font-weight:700}\";\nn(css,{});\nexport { css, css as default };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { onUnexpectedError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { isEqual, dirname } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { BreadcrumbsConfig } from './breadcrumbs.js';\nimport { FileKind } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { withNullAsUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IOutlineService } from '../../../services/outline/browser/outline.js';\nimport { matchesSomeScheme } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nclass FileElement {\n    constructor(uri, kind) {\n        this.uri = uri;\n        this.kind = kind;\n    }\n}\nclass OutlineElement2 {\n    constructor(element, outline) {\n        this.element = element;\n        this.outline = outline;\n    }\n}\nlet BreadcrumbsModel = class BreadcrumbsModel {\n    constructor(resource, editor, configurationService, _workspaceService, _outlineService) {\n        this.resource = resource;\n        this._workspaceService = _workspaceService;\n        this._outlineService = _outlineService;\n        this._disposables = ( new DisposableStore());\n        this._currentOutline = ( new MutableDisposable());\n        this._outlineDisposables = ( new DisposableStore());\n        this._onDidUpdate = ( new Emitter());\n        this.onDidUpdate = this._onDidUpdate.event;\n        this._cfgFilePath = BreadcrumbsConfig.FilePath.bindTo(configurationService);\n        this._cfgSymbolPath = BreadcrumbsConfig.SymbolPath.bindTo(configurationService);\n        this._disposables.add(this._cfgFilePath.onDidChange(_ => this._onDidUpdate.fire(this)));\n        this._disposables.add(this._cfgSymbolPath.onDidChange(_ => this._onDidUpdate.fire(this)));\n        this._workspaceService.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders, this, this._disposables);\n        this._fileInfo = this._initFilePathInfo(resource);\n        if (editor) {\n            this._bindToEditor(editor);\n            this._disposables.add(_outlineService.onDidChange(() => this._bindToEditor(editor)));\n            this._disposables.add(editor.onDidChangeControl(() => this._bindToEditor(editor)));\n        }\n        this._onDidUpdate.fire(this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._cfgFilePath.dispose();\n        this._cfgSymbolPath.dispose();\n        this._currentOutline.dispose();\n        this._outlineDisposables.dispose();\n        this._onDidUpdate.dispose();\n    }\n    isRelative() {\n        return Boolean(this._fileInfo.folder);\n    }\n    getElements() {\n        let result = [];\n        if (this._cfgFilePath.getValue() === 'on') {\n            result = result.concat(this._fileInfo.path);\n        }\n        else if (this._cfgFilePath.getValue() === 'last' && this._fileInfo.path.length > 0) {\n            result = result.concat(this._fileInfo.path.slice(-1));\n        }\n        if (this._cfgSymbolPath.getValue() === 'off') {\n            return result;\n        }\n        if (!this._currentOutline.value) {\n            return result;\n        }\n        const breadcrumbsElements = this._currentOutline.value.config.breadcrumbsDataSource.getBreadcrumbElements();\n        for (let i = this._cfgSymbolPath.getValue() === 'last' && breadcrumbsElements.length > 0 ? breadcrumbsElements.length - 1 : 0; i < breadcrumbsElements.length; i++) {\n            result.push(( new OutlineElement2(breadcrumbsElements[i], this._currentOutline.value)));\n        }\n        if (breadcrumbsElements.length === 0 && !this._currentOutline.value.isEmpty) {\n            result.push(( new OutlineElement2(this._currentOutline.value, this._currentOutline.value)));\n        }\n        return result;\n    }\n    _initFilePathInfo(uri) {\n        if (matchesSomeScheme(uri, Schemas.untitled, Schemas.data)) {\n            return {\n                folder: undefined,\n                path: []\n            };\n        }\n        const info = {\n            folder: withNullAsUndefined(this._workspaceService.getWorkspaceFolder(uri)),\n            path: []\n        };\n        let uriPrefix = uri;\n        while (uriPrefix && uriPrefix.path !== '/') {\n            if (info.folder && isEqual(info.folder.uri, uriPrefix)) {\n                break;\n            }\n            info.path.unshift(( new FileElement(uriPrefix, info.path.length === 0 ? FileKind.FILE : FileKind.FOLDER)));\n            const prevPathLength = uriPrefix.path.length;\n            uriPrefix = dirname(uriPrefix);\n            if (uriPrefix.path.length === prevPathLength) {\n                break;\n            }\n        }\n        if (info.folder && this._workspaceService.getWorkbenchState() === 3 ) {\n            info.path.unshift(( new FileElement(info.folder.uri, FileKind.ROOT_FOLDER)));\n        }\n        return info;\n    }\n    _onDidChangeWorkspaceFolders() {\n        this._fileInfo = this._initFilePathInfo(this.resource);\n        this._onDidUpdate.fire(this);\n    }\n    _bindToEditor(editor) {\n        const newCts = ( new CancellationTokenSource());\n        this._currentOutline.clear();\n        this._outlineDisposables.clear();\n        this._outlineDisposables.add(toDisposable(() => newCts.dispose(true)));\n        this._outlineService.createOutline(editor, 2 , newCts.token).then(outline => {\n            if (newCts.token.isCancellationRequested) {\n                outline?.dispose();\n                outline = undefined;\n            }\n            this._currentOutline.value = outline;\n            this._onDidUpdate.fire(this);\n            if (outline) {\n                this._outlineDisposables.add(outline.onDidChange(() => this._onDidUpdate.fire(this)));\n            }\n        }).catch(err => {\n            this._onDidUpdate.fire(this);\n            onUnexpectedError(err);\n        });\n    }\n};\nBreadcrumbsModel = ( __decorate([\n    ( __param(2, IConfigurationService)),\n    ( __param(3, IWorkspaceContextService)),\n    ( __param(4, IOutlineService))\n], BreadcrumbsModel));\nexport { BreadcrumbsModel, FileElement, OutlineElement2 };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { compareFileNames } from 'monaco-editor/esm/vs/base/common/comparers.js';\nimport { onUnexpectedError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { createMatches } from 'monaco-editor/esm/vs/base/common/filters.js';\nimport * as glob from 'monaco-editor/esm/vs/base/common/glob.js';\nimport { Disposable, DisposableStore, MutableDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { relative, posix } from 'monaco-editor/esm/vs/base/common/path.js';\nimport { dirname, isEqual, basename } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport './media/breadcrumbscontrol.css.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { FileKind, IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { WorkbenchAsyncDataTree, WorkbenchDataTree } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { breadcrumbsPickerBackground, widgetShadow, widgetBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { isWorkspaceFolder, isWorkspace, IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { ResourceLabels, DEFAULT_LABELS_CONTAINER } from '../../labels.js';\nimport { BreadcrumbsConfig } from './breadcrumbs.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { SIDE_GROUP, IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ITextResourceConfigurationService } from 'monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js';\nlet BreadcrumbsPicker = class BreadcrumbsPicker {\n    constructor(parent, resource, _instantiationService, _themeService, _configurationService) {\n        this.resource = resource;\n        this._instantiationService = _instantiationService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._disposables = ( (new DisposableStore()));\n        this._fakeEvent = ( (new UIEvent('fakeEvent')));\n        this._onWillPickElement = ( (new Emitter()));\n        this.onWillPickElement = this._onWillPickElement.event;\n        this._previewDispoables = ( (new MutableDisposable()));\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-breadcrumbs-picker show-file-icons';\n        parent.appendChild(this._domNode);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._previewDispoables.dispose();\n        this._onWillPickElement.dispose();\n        this._domNode.remove();\n        setTimeout(() => this._tree.dispose(), 0);\n    }\n    async show(input, maxHeight, width, arrowSize, arrowOffset) {\n        const theme = this._themeService.getColorTheme();\n        const color = theme.getColor(breadcrumbsPickerBackground);\n        this._arrow = document.createElement('div');\n        this._arrow.className = 'arrow';\n        this._arrow.style.borderColor = `transparent transparent ${color ? ( ( color.toString())) : ''}`;\n        this._domNode.appendChild(this._arrow);\n        this._treeContainer = document.createElement('div');\n        this._treeContainer.style.background = color ? ( (color.toString())) : '';\n        this._treeContainer.style.paddingTop = '2px';\n        this._treeContainer.style.borderRadius = '3px';\n        this._treeContainer.style.boxShadow = `0 0 8px 2px ${this._themeService.getColorTheme().getColor(widgetShadow)}`;\n        this._treeContainer.style.border = `1px solid ${this._themeService.getColorTheme().getColor(widgetBorder)}`;\n        this._domNode.appendChild(this._treeContainer);\n        this._layoutInfo = { maxHeight, width, arrowSize, arrowOffset, inputHeight: 0 };\n        this._tree = this._createTree(this._treeContainer, input);\n        this._disposables.add(this._tree.onDidOpen(async (e) => {\n            const { element, editorOptions, sideBySide } = e;\n            const didReveal = await this._revealElement(element, { ...editorOptions, preserveFocus: false }, sideBySide);\n            if (!didReveal) {\n                return;\n            }\n        }));\n        this._disposables.add(this._tree.onDidChangeFocus(e => {\n            this._previewDispoables.value = this._previewElement(e.elements[0]);\n        }));\n        this._disposables.add(this._tree.onDidChangeContentHeight(() => {\n            this._layout();\n        }));\n        this._domNode.focus();\n        try {\n            await this._setInput(input);\n            this._layout();\n        }\n        catch (err) {\n            onUnexpectedError(err);\n        }\n    }\n    _layout() {\n        const headerHeight = 2 * this._layoutInfo.arrowSize;\n        const treeHeight = Math.min(this._layoutInfo.maxHeight - headerHeight, this._tree.contentHeight);\n        const totalHeight = treeHeight + headerHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        this._domNode.style.width = `${this._layoutInfo.width}px`;\n        this._arrow.style.top = `-${2 * this._layoutInfo.arrowSize}px`;\n        this._arrow.style.borderWidth = `${this._layoutInfo.arrowSize}px`;\n        this._arrow.style.marginLeft = `${this._layoutInfo.arrowOffset}px`;\n        this._treeContainer.style.height = `${treeHeight}px`;\n        this._treeContainer.style.width = `${this._layoutInfo.width}px`;\n        this._tree.layout(treeHeight, this._layoutInfo.width);\n    }\n    restoreViewState() { }\n};\nBreadcrumbsPicker = ( (__decorate([\n    ( (__param(2, IInstantiationService))),\n    ( (__param(3, IThemeService))),\n    ( (__param(4, IConfigurationService)))\n], BreadcrumbsPicker)));\nclass FileVirtualDelegate {\n    getHeight(_element) {\n        return 22;\n    }\n    getTemplateId(_element) {\n        return 'FileStat';\n    }\n}\nclass FileIdentityProvider {\n    getId(element) {\n        if (URI.isUri(element)) {\n            return (\n                 (element.toString())\n            );\n        }\n        else if (isWorkspace(element)) {\n            return element.id;\n        }\n        else if (isWorkspaceFolder(element)) {\n            return (\n                 (element.uri.toString())\n            );\n        }\n        else {\n            return (\n                 (element.resource.toString())\n            );\n        }\n    }\n}\nlet FileDataSource = class FileDataSource {\n    constructor(_fileService) {\n        this._fileService = _fileService;\n    }\n    hasChildren(element) {\n        return URI.isUri(element)\n            || isWorkspace(element)\n            || isWorkspaceFolder(element)\n            || element.isDirectory;\n    }\n    async getChildren(element) {\n        if (isWorkspace(element)) {\n            return element.folders;\n        }\n        let uri;\n        if (isWorkspaceFolder(element)) {\n            uri = element.uri;\n        }\n        else if (URI.isUri(element)) {\n            uri = element;\n        }\n        else {\n            uri = element.resource;\n        }\n        const stat = await this._fileService.resolve(uri);\n        return stat.children ?? [];\n    }\n};\nFileDataSource = ( (__decorate([\n    ( (__param(0, IFileService)))\n], FileDataSource)));\nlet FileRenderer = class FileRenderer {\n    constructor(_labels, _configService) {\n        this._labels = _labels;\n        this._configService = _configService;\n        this.templateId = 'FileStat';\n    }\n    renderTemplate(container) {\n        return this._labels.create(container, { supportHighlights: true });\n    }\n    renderElement(node, index, templateData) {\n        const fileDecorations = this._configService.getValue('explorer.decorations');\n        const { element } = node;\n        let resource;\n        let fileKind;\n        if (isWorkspaceFolder(element)) {\n            resource = element.uri;\n            fileKind = FileKind.ROOT_FOLDER;\n        }\n        else {\n            resource = element.resource;\n            fileKind = element.isDirectory ? FileKind.FOLDER : FileKind.FILE;\n        }\n        templateData.setFile(resource, {\n            fileKind,\n            hidePath: true,\n            fileDecorations: fileDecorations,\n            matches: createMatches(node.filterData),\n            extraClasses: ['picker-item']\n        });\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileRenderer = ( (__decorate([\n    ( (__param(1, IConfigurationService)))\n], FileRenderer)));\nclass FileNavigationLabelProvider {\n    getKeyboardNavigationLabel(element) {\n        return element.name;\n    }\n}\nclass FileAccessibilityProvider {\n    getWidgetAriaLabel() {\n        return (\n             (localize('breadcrumbs', \"Breadcrumbs\"))\n        );\n    }\n    getAriaLabel(element) {\n        return element.name;\n    }\n}\nlet FileFilter = class FileFilter {\n    constructor(_workspaceService, configService) {\n        this._workspaceService = _workspaceService;\n        this._cachedExpressions = ( (new Map()));\n        this._disposables = ( (new DisposableStore()));\n        const config = BreadcrumbsConfig.FileExcludes.bindTo(configService);\n        const update = () => {\n            _workspaceService.getWorkspace().folders.forEach(folder => {\n                const excludesConfig = config.getValue({ resource: folder.uri });\n                if (!excludesConfig) {\n                    return;\n                }\n                const adjustedConfig = {};\n                for (const pattern in excludesConfig) {\n                    if (typeof excludesConfig[pattern] !== 'boolean') {\n                        continue;\n                    }\n                    const patternAbs = pattern.indexOf('**/') !== 0\n                        ? posix.join(folder.uri.path, pattern)\n                        : pattern;\n                    adjustedConfig[patternAbs] = excludesConfig[pattern];\n                }\n                this._cachedExpressions.set(( (folder.uri.toString())), glob.parse(adjustedConfig));\n            });\n        };\n        update();\n        this._disposables.add(config);\n        this._disposables.add(config.onDidChange(update));\n        this._disposables.add(_workspaceService.onDidChangeWorkspaceFolders(update));\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    filter(element, _parentVisibility) {\n        if (isWorkspaceFolder(element)) {\n            return true;\n        }\n        const folder = this._workspaceService.getWorkspaceFolder(element.resource);\n        if (!folder || !( (this._cachedExpressions.has( (folder.uri.toString()))))) {\n            return true;\n        }\n        const expression = this._cachedExpressions.get(( (folder.uri.toString())));\n        return !expression(relative(folder.uri.path, element.resource.path), basename(element.resource));\n    }\n};\nFileFilter = ( (__decorate([\n    ( (__param(0, IWorkspaceContextService))),\n    ( (__param(1, IConfigurationService)))\n], FileFilter)));\nclass FileSorter {\n    compare(a, b) {\n        if (isWorkspaceFolder(a) && isWorkspaceFolder(b)) {\n            return a.index - b.index;\n        }\n        if (a.isDirectory === b.isDirectory) {\n            return compareFileNames(a.name, b.name);\n        }\n        else if (a.isDirectory) {\n            return -1;\n        }\n        else {\n            return 1;\n        }\n    }\n}\nlet BreadcrumbsFilePicker = class BreadcrumbsFilePicker extends BreadcrumbsPicker {\n    constructor(parent, resource, instantiationService, themeService, configService, _workspaceService, _editorService) {\n        super(parent, resource, instantiationService, themeService, configService);\n        this._workspaceService = _workspaceService;\n        this._editorService = _editorService;\n    }\n    _createTree(container) {\n        this._treeContainer.classList.add('file-icon-themable-tree');\n        this._treeContainer.classList.add('show-file-icons');\n        const onFileIconThemeChange = (fileIconTheme) => {\n            this._treeContainer.classList.toggle('align-icons-and-twisties', fileIconTheme.hasFileIcons && !fileIconTheme.hasFolderIcons);\n            this._treeContainer.classList.toggle('hide-arrows', fileIconTheme.hidesExplorerArrows === true);\n        };\n        this._disposables.add(this._themeService.onDidFileIconThemeChange(onFileIconThemeChange));\n        onFileIconThemeChange(this._themeService.getFileIconTheme());\n        const labels = this._instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER );\n        this._disposables.add(labels);\n        return this._instantiationService.createInstance(WorkbenchAsyncDataTree, 'BreadcrumbsFilePicker', container, ( (new FileVirtualDelegate())), [this._instantiationService.createInstance(FileRenderer, labels)], this._instantiationService.createInstance(FileDataSource), {\n            multipleSelectionSupport: false,\n            sorter: ( (new FileSorter())),\n            filter: this._instantiationService.createInstance(FileFilter),\n            identityProvider: ( (new FileIdentityProvider())),\n            keyboardNavigationLabelProvider: ( (new FileNavigationLabelProvider())),\n            accessibilityProvider: this._instantiationService.createInstance(FileAccessibilityProvider),\n            showNotFoundMessage: false,\n            overrideStyles: {\n                listBackground: breadcrumbsPickerBackground\n            },\n        });\n    }\n    async _setInput(element) {\n        const { uri, kind } = element;\n        let input;\n        if (kind === FileKind.ROOT_FOLDER) {\n            input = this._workspaceService.getWorkspace();\n        }\n        else {\n            input = dirname(uri);\n        }\n        const tree = this._tree;\n        await tree.setInput(input);\n        let focusElement;\n        for (const { element } of tree.getNode().children) {\n            if (isWorkspaceFolder(element) && isEqual(element.uri, uri)) {\n                focusElement = element;\n                break;\n            }\n            else if (isEqual(element.resource, uri)) {\n                focusElement = element;\n                break;\n            }\n        }\n        if (focusElement) {\n            tree.reveal(focusElement, 0.5);\n            tree.setFocus([focusElement], this._fakeEvent);\n        }\n        tree.domFocus();\n    }\n    _previewElement(_element) {\n        return Disposable.None;\n    }\n    async _revealElement(element, options, sideBySide) {\n        if (!isWorkspaceFolder(element) && element.isFile) {\n            this._onWillPickElement.fire();\n            await this._editorService.openEditor({ resource: element.resource, options }, sideBySide ? SIDE_GROUP : undefined);\n            return true;\n        }\n        return false;\n    }\n};\nBreadcrumbsFilePicker = ( (__decorate([\n    ( (__param(2, IInstantiationService))),\n    ( (__param(3, IThemeService))),\n    ( (__param(4, IConfigurationService))),\n    ( (__param(5, IWorkspaceContextService))),\n    ( (__param(6, IEditorService)))\n], BreadcrumbsFilePicker)));\nlet OutlineTreeSorter = class OutlineTreeSorter {\n    constructor(comparator, uri, configService) {\n        this.comparator = comparator;\n        this._order = configService.getValue(uri, 'breadcrumbs.symbolSortOrder');\n    }\n    compare(a, b) {\n        if (this._order === 'name') {\n            return this.comparator.compareByName(a, b);\n        }\n        else if (this._order === 'type') {\n            return this.comparator.compareByType(a, b);\n        }\n        else {\n            return this.comparator.compareByPosition(a, b);\n        }\n    }\n};\nOutlineTreeSorter = ( (__decorate([\n    ( (__param(2, ITextResourceConfigurationService)))\n], OutlineTreeSorter)));\nclass BreadcrumbsOutlinePicker extends BreadcrumbsPicker {\n    _createTree(container, input) {\n        const { config } = input.outline;\n        return this._instantiationService.createInstance(WorkbenchDataTree, 'BreadcrumbsOutlinePicker', container, config.delegate, config.renderers, config.treeDataSource, {\n            ...config.options,\n            sorter: this._instantiationService.createInstance(OutlineTreeSorter, config.comparator, undefined),\n            collapseByDefault: true,\n            expandOnlyOnTwistieClick: true,\n            multipleSelectionSupport: false,\n            showNotFoundMessage: false\n        });\n    }\n    _setInput(input) {\n        const viewState = input.outline.captureViewState();\n        this.restoreViewState = () => { viewState.dispose(); };\n        const tree = this._tree;\n        tree.setInput(input.outline);\n        if (input.element !== input.outline) {\n            tree.reveal(input.element, 0.5);\n            tree.setFocus([input.element], this._fakeEvent);\n        }\n        tree.domFocus();\n        return Promise.resolve();\n    }\n    _previewElement(element) {\n        const outline = this._tree.getInput();\n        return outline.preview(element);\n    }\n    async _revealElement(element, options, sideBySide) {\n        this._onWillPickElement.fire();\n        const outline = this._tree.getInput();\n        await outline.reveal(element, options, sideBySide);\n        return true;\n    }\n}\nexport { BreadcrumbsFilePicker, BreadcrumbsOutlinePicker, BreadcrumbsPicker, FileSorter };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { BreadcrumbsWidget, BreadcrumbsItem } from 'monaco-editor/esm/vs/base/browser/ui/breadcrumbs/breadcrumbsWidget.js';\nimport { tail } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { timeout } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { DisposableStore, MutableDisposable, toDisposable, combinedDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { extUri } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport './media/breadcrumbscontrol.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { registerAction2, Action2, MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { RawContextKey, ContextKeyExpr, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { FileKind, IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from 'monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js';\nimport { WorkbenchListFocusContextKey, IListService, WorkbenchDataTree, WorkbenchAsyncDataTree } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { IQuickInputService } from 'monaco-editor/esm/vs/platform/quickinput/common/quickInput.js';\nimport { ResourceLabels, DEFAULT_LABELS_CONTAINER } from '../../labels.js';\nimport { BreadcrumbsConfig, IBreadcrumbsService } from './breadcrumbs.js';\nimport { BreadcrumbsModel, OutlineElement2, FileElement } from './breadcrumbsModel.js';\nimport { BreadcrumbsFilePicker, BreadcrumbsOutlinePicker } from './breadcrumbsPicker.js';\nimport { EditorResourceAccessor, SideBySideEditor } from '../../../common/editor.js';\nimport { SIDE_GROUP, ACTIVE_GROUP, IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { PixelRatio } from 'monaco-editor/esm/vs/base/browser/browser.js';\nimport { ILabelService } from 'monaco-editor/esm/vs/platform/label/common/label.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nimport { registerIcon } from 'monaco-editor/esm/vs/platform/theme/common/iconRegistry.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { defaultBreadcrumbsWidgetStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nclass OutlineItem extends BreadcrumbsItem {\n    constructor(model, element, options) {\n        super();\n        this.model = model;\n        this.element = element;\n        this.options = options;\n        this._disposables = ( new DisposableStore());\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    equals(other) {\n        if (!(other instanceof OutlineItem)) {\n            return false;\n        }\n        return this.element.element === other.element.element &&\n            this.options.showFileIcons === other.options.showFileIcons &&\n            this.options.showSymbolIcons === other.options.showSymbolIcons;\n    }\n    render(container) {\n        const { element, outline } = this.element;\n        if (element === outline) {\n            const element = dom.$('span', undefined, '…');\n            container.appendChild(element);\n            return;\n        }\n        const templateId = outline.config.delegate.getTemplateId(element);\n        const renderer = outline.config.renderers.find(renderer => renderer.templateId === templateId);\n        if (!renderer) {\n            container.innerText = '<<NO RENDERER>>';\n            return;\n        }\n        const template = renderer.renderTemplate(container);\n        renderer.renderElement({\n            element,\n            children: [],\n            depth: 0,\n            visibleChildrenCount: 0,\n            visibleChildIndex: 0,\n            collapsible: false,\n            collapsed: false,\n            visible: true,\n            filterData: undefined\n        }, 0, template, undefined);\n        this._disposables.add(toDisposable(() => { renderer.disposeTemplate(template); }));\n    }\n}\nclass FileItem extends BreadcrumbsItem {\n    constructor(model, element, options, _labels) {\n        super();\n        this.model = model;\n        this.element = element;\n        this.options = options;\n        this._labels = _labels;\n        this._disposables = ( new DisposableStore());\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    equals(other) {\n        if (!(other instanceof FileItem)) {\n            return false;\n        }\n        return (extUri.isEqual(this.element.uri, other.element.uri) &&\n            this.options.showFileIcons === other.options.showFileIcons &&\n            this.options.showSymbolIcons === other.options.showSymbolIcons);\n    }\n    render(container) {\n        const label = this._labels.create(container);\n        label.setFile(this.element.uri, {\n            hidePath: true,\n            hideIcon: this.element.kind === FileKind.FOLDER || !this.options.showFileIcons,\n            fileKind: this.element.kind,\n            fileDecorations: { colors: this.options.showDecorationColors, badges: false },\n        });\n        container.classList.add(FileKind[this.element.kind].toLowerCase());\n        this._disposables.add(label);\n    }\n}\nconst separatorIcon = registerIcon('breadcrumb-separator', Codicon.chevronRight, ( localize('separatorIcon', 'Icon for the separator in the breadcrumbs.')));\nlet BreadcrumbsControl = class BreadcrumbsControl {\n    static { this.HEIGHT = 22; }\n    static { this.SCROLLBAR_SIZES = {\n        default: 3,\n        large: 8\n    }; }\n    static { this.Payload_Reveal = {}; }\n    static { this.Payload_RevealAside = {}; }\n    static { this.Payload_Pick = {}; }\n    static { this.CK_BreadcrumbsPossible = ( new RawContextKey('breadcrumbsPossible', false, ( localize('breadcrumbsPossible', \"Whether the editor can show breadcrumbs\")))); }\n    static { this.CK_BreadcrumbsVisible = ( new RawContextKey('breadcrumbsVisible', false, ( localize('breadcrumbsVisible', \"Whether breadcrumbs are currently visible\")))); }\n    static { this.CK_BreadcrumbsActive = ( new RawContextKey('breadcrumbsActive', false, ( localize('breadcrumbsActive', \"Whether breadcrumbs have focus\")))); }\n    constructor(container, _options, _editorGroup, _contextKeyService, _contextViewService, _instantiationService, _quickInputService, _fileService, _editorService, _labelService, configurationService, breadcrumbsService) {\n        this._options = _options;\n        this._editorGroup = _editorGroup;\n        this._contextKeyService = _contextKeyService;\n        this._contextViewService = _contextViewService;\n        this._instantiationService = _instantiationService;\n        this._quickInputService = _quickInputService;\n        this._fileService = _fileService;\n        this._editorService = _editorService;\n        this._labelService = _labelService;\n        this._disposables = ( new DisposableStore());\n        this._breadcrumbsDisposables = ( new DisposableStore());\n        this._model = ( new MutableDisposable());\n        this._breadcrumbsPickerShowing = false;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('breadcrumbs-control');\n        dom.append(container, this.domNode);\n        this._cfUseQuickPick = BreadcrumbsConfig.UseQuickPick.bindTo(configurationService);\n        this._cfShowIcons = BreadcrumbsConfig.Icons.bindTo(configurationService);\n        this._cfTitleScrollbarSizing = BreadcrumbsConfig.TitleScrollbarSizing.bindTo(configurationService);\n        this._labels = this._instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER);\n        const sizing = this._cfTitleScrollbarSizing.getValue() ?? 'default';\n        const styles = _options.widgetStyles ?? defaultBreadcrumbsWidgetStyles;\n        this._widget = ( new BreadcrumbsWidget(\n            this.domNode,\n            BreadcrumbsControl.SCROLLBAR_SIZES[sizing],\n            separatorIcon,\n            styles\n        ));\n        this._widget.onDidSelectItem(this._onSelectEvent, this, this._disposables);\n        this._widget.onDidFocusItem(this._onFocusEvent, this, this._disposables);\n        this._widget.onDidChangeFocus(this._updateCkBreadcrumbsActive, this, this._disposables);\n        this._ckBreadcrumbsPossible = BreadcrumbsControl.CK_BreadcrumbsPossible.bindTo(this._contextKeyService);\n        this._ckBreadcrumbsVisible = BreadcrumbsControl.CK_BreadcrumbsVisible.bindTo(this._contextKeyService);\n        this._ckBreadcrumbsActive = BreadcrumbsControl.CK_BreadcrumbsActive.bindTo(this._contextKeyService);\n        this._disposables.add(breadcrumbsService.register(this._editorGroup.id, this._widget));\n        this.hide();\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._breadcrumbsDisposables.dispose();\n        this._ckBreadcrumbsPossible.reset();\n        this._ckBreadcrumbsVisible.reset();\n        this._ckBreadcrumbsActive.reset();\n        this._cfUseQuickPick.dispose();\n        this._cfShowIcons.dispose();\n        this._widget.dispose();\n        this._labels.dispose();\n        this.domNode.remove();\n    }\n    get model() {\n        return this._model.value;\n    }\n    layout(dim) {\n        this._widget.layout(dim);\n    }\n    isHidden() {\n        return this.domNode.classList.contains('hidden');\n    }\n    hide() {\n        this._breadcrumbsDisposables.clear();\n        this._ckBreadcrumbsVisible.set(false);\n        this.domNode.classList.toggle('hidden', true);\n    }\n    revealLast() {\n        this._widget.revealLast();\n    }\n    update() {\n        this._breadcrumbsDisposables.clear();\n        const uri = EditorResourceAccessor.getCanonicalUri(this._editorGroup.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n        const wasHidden = this.isHidden();\n        if (!uri || !this._fileService.hasProvider(uri)) {\n            this._ckBreadcrumbsPossible.set(false);\n            if (!wasHidden) {\n                this.hide();\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        const fileInfoUri = EditorResourceAccessor.getOriginalUri(this._editorGroup.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n        this.domNode.classList.toggle('hidden', false);\n        this._ckBreadcrumbsVisible.set(true);\n        this._ckBreadcrumbsPossible.set(true);\n        const model = this._instantiationService.createInstance(BreadcrumbsModel, fileInfoUri ?? uri, this._editorGroup.activeEditorPane);\n        this._model.value = model;\n        this.domNode.classList.toggle('backslash-path', this._labelService.getSeparator(uri.scheme, uri.authority) === '\\\\');\n        const updateBreadcrumbs = () => {\n            this.domNode.classList.toggle('relative-path', model.isRelative());\n            const showIcons = this._cfShowIcons.getValue();\n            const options = {\n                ...this._options,\n                showFileIcons: this._options.showFileIcons && showIcons,\n                showSymbolIcons: this._options.showSymbolIcons && showIcons\n            };\n            const items = ( model.getElements().map(element => element instanceof FileElement ? ( new FileItem(model, element, options, this._labels)) : ( new OutlineItem(model, element, options))));\n            if (items.length === 0) {\n                this._widget.setEnabled(false);\n                this._widget.setItems([new (class extends BreadcrumbsItem {\n                        render(container) {\n                            container.innerText = ( localize('empty', \"no elements\"));\n                        }\n                        equals(other) {\n                            return other === this;\n                        }\n                    })]);\n            }\n            else {\n                this._widget.setEnabled(true);\n                this._widget.setItems(items);\n                this._widget.reveal(items[items.length - 1]);\n            }\n        };\n        const listener = model.onDidUpdate(updateBreadcrumbs);\n        const configListener = this._cfShowIcons.onDidChange(updateBreadcrumbs);\n        updateBreadcrumbs();\n        this._breadcrumbsDisposables.clear();\n        this._breadcrumbsDisposables.add(listener);\n        this._breadcrumbsDisposables.add(toDisposable(() => this._model.clear()));\n        this._breadcrumbsDisposables.add(configListener);\n        this._breadcrumbsDisposables.add(toDisposable(() => this._widget.setItems([])));\n        const updateScrollbarSizing = () => {\n            const sizing = this._cfTitleScrollbarSizing.getValue() ?? 'default';\n            this._widget.setHorizontalScrollbarSize(BreadcrumbsControl.SCROLLBAR_SIZES[sizing]);\n        };\n        updateScrollbarSizing();\n        const updateScrollbarSizeListener = this._cfTitleScrollbarSizing.onDidChange(updateScrollbarSizing);\n        this._breadcrumbsDisposables.add(updateScrollbarSizeListener);\n        this._breadcrumbsDisposables.add({\n            dispose: () => {\n                if (this._breadcrumbsPickerShowing) {\n                    this._contextViewService.hideContextView({ source: this });\n                }\n            }\n        });\n        return wasHidden !== this.isHidden();\n    }\n    _onFocusEvent(event) {\n        if (event.item && this._breadcrumbsPickerShowing) {\n            this._breadcrumbsPickerIgnoreOnceItem = undefined;\n            this._widget.setSelection(event.item);\n        }\n    }\n    _onSelectEvent(event) {\n        if (!event.item) {\n            return;\n        }\n        if (event.item === this._breadcrumbsPickerIgnoreOnceItem) {\n            this._breadcrumbsPickerIgnoreOnceItem = undefined;\n            this._widget.setFocused(undefined);\n            this._widget.setSelection(undefined);\n            return;\n        }\n        const { element } = event.item;\n        this._editorGroup.focus();\n        const group = this._getEditorGroup(event.payload);\n        if (group !== undefined) {\n            this._widget.setFocused(undefined);\n            this._widget.setSelection(undefined);\n            this._revealInEditor(event, element, group);\n            return;\n        }\n        if (this._cfUseQuickPick.getValue()) {\n            this._widget.setFocused(undefined);\n            this._widget.setSelection(undefined);\n            this._quickInputService.quickAccess.show(element instanceof OutlineElement2 ? '@' : '');\n            return;\n        }\n        let picker;\n        let pickerAnchor;\n        this._contextViewService.showContextView({\n            render: (parent) => {\n                if (event.item instanceof FileItem) {\n                    picker = this._instantiationService.createInstance(BreadcrumbsFilePicker, parent, event.item.model.resource);\n                }\n                else if (event.item instanceof OutlineItem) {\n                    picker = this._instantiationService.createInstance(BreadcrumbsOutlinePicker, parent, event.item.model.resource);\n                }\n                const selectListener = picker.onWillPickElement(() => this._contextViewService.hideContextView({ source: this, didPick: true }));\n                const zoomListener = PixelRatio.onDidChange(() => this._contextViewService.hideContextView({ source: this }));\n                const focusTracker = dom.trackFocus(parent);\n                const blurListener = focusTracker.onDidBlur(() => {\n                    this._breadcrumbsPickerIgnoreOnceItem = this._widget.isDOMFocused() ? event.item : undefined;\n                    this._contextViewService.hideContextView({ source: this });\n                });\n                this._breadcrumbsPickerShowing = true;\n                this._updateCkBreadcrumbsActive();\n                return combinedDisposable(picker, selectListener, zoomListener, focusTracker, blurListener);\n            },\n            getAnchor: () => {\n                if (!pickerAnchor) {\n                    const maxInnerWidth = window.innerWidth - 8 ;\n                    let maxHeight = Math.min(window.innerHeight * 0.7, 300);\n                    const pickerWidth = Math.min(maxInnerWidth, Math.max(240, maxInnerWidth / 4.17));\n                    const pickerArrowSize = 8;\n                    let pickerArrowOffset;\n                    const data = dom.getDomNodePagePosition(event.node.firstChild);\n                    const y = data.top + data.height + pickerArrowSize;\n                    if (y + maxHeight >= window.innerHeight) {\n                        maxHeight = window.innerHeight - y - 30 ;\n                    }\n                    let x = data.left;\n                    if (x + pickerWidth >= maxInnerWidth) {\n                        x = maxInnerWidth - pickerWidth;\n                    }\n                    if (event.payload instanceof StandardMouseEvent) {\n                        const maxPickerArrowOffset = pickerWidth - 2 * pickerArrowSize;\n                        pickerArrowOffset = event.payload.posx - x;\n                        if (pickerArrowOffset > maxPickerArrowOffset) {\n                            x = Math.min(maxInnerWidth - pickerWidth, x + pickerArrowOffset - maxPickerArrowOffset);\n                            pickerArrowOffset = maxPickerArrowOffset;\n                        }\n                    }\n                    else {\n                        pickerArrowOffset = (data.left + (data.width * 0.3)) - x;\n                    }\n                    picker.show(element, maxHeight, pickerWidth, pickerArrowSize, Math.max(0, pickerArrowOffset));\n                    pickerAnchor = { x, y };\n                }\n                return pickerAnchor;\n            },\n            onHide: (data) => {\n                if (!data?.didPick) {\n                    picker.restoreViewState();\n                }\n                this._breadcrumbsPickerShowing = false;\n                this._updateCkBreadcrumbsActive();\n                if (data?.source === this) {\n                    this._widget.setFocused(undefined);\n                    this._widget.setSelection(undefined);\n                }\n                picker.dispose();\n            }\n        });\n    }\n    _updateCkBreadcrumbsActive() {\n        const value = this._widget.isDOMFocused() || this._breadcrumbsPickerShowing;\n        this._ckBreadcrumbsActive.set(value);\n    }\n    async _revealInEditor(event, element, group, pinned = false) {\n        if (element instanceof FileElement) {\n            if (element.kind === FileKind.FILE) {\n                await this._editorService.openEditor({ resource: element.uri, options: { pinned } }, group);\n            }\n            else {\n                const items = this._widget.getItems();\n                const idx = items.indexOf(event.item);\n                this._widget.setFocused(items[idx + 1]);\n                this._widget.setSelection(items[idx + 1], BreadcrumbsControl.Payload_Pick);\n            }\n        }\n        else {\n            element.outline.reveal(element, { pinned }, group === SIDE_GROUP);\n        }\n    }\n    _getEditorGroup(data) {\n        if (data === BreadcrumbsControl.Payload_RevealAside) {\n            return SIDE_GROUP;\n        }\n        else if (data === BreadcrumbsControl.Payload_Reveal) {\n            return ACTIVE_GROUP;\n        }\n        else {\n            return undefined;\n        }\n    }\n};\nBreadcrumbsControl = ( __decorate([\n    ( __param(3, IContextKeyService)),\n    ( __param(4, IContextViewService)),\n    ( __param(5, IInstantiationService)),\n    ( __param(6, IQuickInputService)),\n    ( __param(7, IFileService)),\n    ( __param(8, IEditorService)),\n    ( __param(9, ILabelService)),\n    ( __param(10, IConfigurationService)),\n    ( __param(11, IBreadcrumbsService))\n], BreadcrumbsControl));\nregisterAction2(class ToggleBreadcrumb extends Action2 {\n    constructor() {\n        super({\n            id: 'breadcrumbs.toggle',\n            title: {\n                value: ( localize('cmd.toggle', \"Toggle Breadcrumbs\")),\n                mnemonicTitle: ( localize(\n                    { key: 'miBreadcrumbs', comment: ['&& denotes a mnemonic'] },\n                    \"Toggle &&Breadcrumbs\"\n                )),\n                original: 'Toggle Breadcrumbs',\n            },\n            category: Categories.View,\n            toggled: {\n                condition: ( ContextKeyExpr.equals('config.breadcrumbs.enabled', true)),\n                title: ( localize('cmd.toggle2', \"Breadcrumbs\")),\n                mnemonicTitle: ( localize(\n                    { key: 'miBreadcrumbs2', comment: ['&& denotes a mnemonic'] },\n                    \"&&Breadcrumbs\"\n                ))\n            },\n            menu: [\n                { id: MenuId.CommandPalette },\n                { id: MenuId.MenubarAppearanceMenu, group: '4_editor', order: 2 },\n                { id: MenuId.NotebookToolbar, group: 'notebookLayout', order: 2 },\n                { id: MenuId.StickyScrollContext }\n            ]\n        });\n    }\n    run(accessor) {\n        const config = accessor.get(IConfigurationService);\n        const value = BreadcrumbsConfig.IsEnabled.bindTo(config).getValue();\n        BreadcrumbsConfig.IsEnabled.bindTo(config).updateValue(!value);\n    }\n});\nfunction focusAndSelectHandler(accessor, select) {\n    const groups = accessor.get(IEditorGroupsService);\n    const breadcrumbs = accessor.get(IBreadcrumbsService);\n    const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n    if (widget) {\n        const item = tail(widget.getItems());\n        widget.setFocused(item);\n        if (select) {\n            widget.setSelection(item, BreadcrumbsControl.Payload_Pick);\n        }\n    }\n}\nregisterAction2(class FocusAndSelectBreadcrumbs extends Action2 {\n    constructor() {\n        super({\n            id: 'breadcrumbs.focusAndSelect',\n            title: {\n                value: ( localize('cmd.focusAndSelect', \"Focus and Select Breadcrumbs\")),\n                original: 'Focus and Select Breadcrumbs'\n            },\n            precondition: BreadcrumbsControl.CK_BreadcrumbsVisible,\n            keybinding: {\n                weight: 200 ,\n                primary: 2048  | 1024  | 89 ,\n                when: BreadcrumbsControl.CK_BreadcrumbsPossible,\n            },\n            f1: true\n        });\n    }\n    run(accessor, ...args) {\n        focusAndSelectHandler(accessor, true);\n    }\n});\nregisterAction2(class FocusBreadcrumbs extends Action2 {\n    constructor() {\n        super({\n            id: 'breadcrumbs.focus',\n            title: {\n                value: ( localize('cmd.focus', \"Focus Breadcrumbs\")),\n                original: 'Focus Breadcrumbs'\n            },\n            precondition: BreadcrumbsControl.CK_BreadcrumbsVisible,\n            keybinding: {\n                weight: 200 ,\n                primary: 2048  | 1024  | 85 ,\n                when: BreadcrumbsControl.CK_BreadcrumbsPossible,\n            },\n            f1: true\n        });\n    }\n    run(accessor, ...args) {\n        focusAndSelectHandler(accessor, false);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.toggleToOn',\n    weight: 200 ,\n    primary: 2048  | 1024  | 89 ,\n    when: ContextKeyExpr.not('config.breadcrumbs.enabled'),\n    handler: async (accessor) => {\n        const instant = accessor.get(IInstantiationService);\n        const config = accessor.get(IConfigurationService);\n        const isEnabled = BreadcrumbsConfig.IsEnabled.bindTo(config);\n        if (!isEnabled.getValue()) {\n            await isEnabled.updateValue(true);\n            await timeout(50);\n        }\n        return instant.invokeFunction(focusAndSelectHandler, true);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focusNext',\n    weight: 200 ,\n    primary: 17 ,\n    secondary: [2048  | 17 ],\n    mac: {\n        primary: 17 ,\n        secondary: [512  | 17 ],\n    },\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive\n    )),\n    handler(accessor) {\n        const groups = accessor.get(IEditorGroupsService);\n        const breadcrumbs = accessor.get(IBreadcrumbsService);\n        const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.focusNext();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focusPrevious',\n    weight: 200 ,\n    primary: 15 ,\n    secondary: [2048  | 15 ],\n    mac: {\n        primary: 15 ,\n        secondary: [512  | 15 ],\n    },\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive\n    )),\n    handler(accessor) {\n        const groups = accessor.get(IEditorGroupsService);\n        const breadcrumbs = accessor.get(IBreadcrumbsService);\n        const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.focusPrev();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focusNextWithPicker',\n    weight: 200  + 1,\n    primary: 2048  | 17 ,\n    mac: {\n        primary: 512  | 17 ,\n    },\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive,\n        WorkbenchListFocusContextKey\n    )),\n    handler(accessor) {\n        const groups = accessor.get(IEditorGroupsService);\n        const breadcrumbs = accessor.get(IBreadcrumbsService);\n        const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.focusNext();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.focusPreviousWithPicker',\n    weight: 200  + 1,\n    primary: 2048  | 15 ,\n    mac: {\n        primary: 512  | 15 ,\n    },\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive,\n        WorkbenchListFocusContextKey\n    )),\n    handler(accessor) {\n        const groups = accessor.get(IEditorGroupsService);\n        const breadcrumbs = accessor.get(IBreadcrumbsService);\n        const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.focusPrev();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.selectFocused',\n    weight: 200 ,\n    primary: 3 ,\n    secondary: [18 ],\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive\n    )),\n    handler(accessor) {\n        const groups = accessor.get(IEditorGroupsService);\n        const breadcrumbs = accessor.get(IBreadcrumbsService);\n        const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.setSelection(widget.getFocused(), BreadcrumbsControl.Payload_Pick);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.revealFocused',\n    weight: 200 ,\n    primary: 10 ,\n    secondary: [2048  | 3 ],\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive\n    )),\n    handler(accessor) {\n        const groups = accessor.get(IEditorGroupsService);\n        const breadcrumbs = accessor.get(IBreadcrumbsService);\n        const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.setSelection(widget.getFocused(), BreadcrumbsControl.Payload_Reveal);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.selectEditor',\n    weight: 200  + 1,\n    primary: 9 ,\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive\n    )),\n    handler(accessor) {\n        const groups = accessor.get(IEditorGroupsService);\n        const breadcrumbs = accessor.get(IBreadcrumbsService);\n        const widget = breadcrumbs.getWidget(groups.activeGroup.id);\n        if (!widget) {\n            return;\n        }\n        widget.setFocused(undefined);\n        widget.setSelection(undefined);\n        groups.activeGroup.activeEditorPane?.focus();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'breadcrumbs.revealFocusedFromTreeAside',\n    weight: 200 ,\n    primary: 2048  | 3 ,\n    when: ( ContextKeyExpr.and(\n        BreadcrumbsControl.CK_BreadcrumbsVisible,\n        BreadcrumbsControl.CK_BreadcrumbsActive,\n        WorkbenchListFocusContextKey\n    )),\n    handler(accessor) {\n        const editors = accessor.get(IEditorService);\n        const lists = accessor.get(IListService);\n        const tree = lists.lastFocusedList;\n        if (!(tree instanceof WorkbenchDataTree) && !(tree instanceof WorkbenchAsyncDataTree)) {\n            return;\n        }\n        const element = tree.getFocus()[0];\n        if (URI.isUri(element?.resource)) {\n            return editors.openEditor({\n                resource: element.resource,\n                options: { pinned: true }\n            }, SIDE_GROUP);\n        }\n        const input = tree.getInput();\n        if (input && typeof input.outlineKind === 'string') {\n            return input.reveal(element, {\n                pinned: true,\n                preserveFocus: false\n            }, true);\n        }\n    }\n});\nexport { BreadcrumbsControl };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/titlecontrol.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { DataTransfers, applyDragImage } from 'monaco-editor/esm/vs/base/browser/dnd.js';\nimport { addDisposableListener, EventType } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { prepareActions } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { ActionRunner } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { DisposableStore, dispose } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { createActionViewItem, createAndFillInActionBarActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuId, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IQuickInputService } from 'monaco-editor/esm/vs/platform/quickinput/common/quickInput.js';\nimport { listActiveSelectionBackground, listActiveSelectionForeground } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { Themable, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { DraggedEditorGroupIdentifier, fillEditorsDragData } from '../../dnd.js';\nimport { EditorPane } from './editorPane.js';\nimport { BreadcrumbsConfig } from './breadcrumbs.js';\nimport { BreadcrumbsControl } from './breadcrumbsControl.js';\nimport { EditorResourceAccessor, SideBySideEditor } from '../../../common/editor.js';\nimport { ResourceContextKey, ActiveEditorPinnedContext, ActiveEditorFirstInGroupContext, ActiveEditorLastInGroupContext, ActiveEditorStickyContext, ActiveEditorAvailableEditorIdsContext, ActiveEditorCanSplitInGroupContext, SideBySideEditorActiveContext, ActiveEditorGroupLockedContext, applyAvailableEditorIds } from '../../../common/contextkeys.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { assertIsDefined, withUndefinedAsNull, withNullAsUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { isFirefox } from 'monaco-editor/esm/vs/base/browser/browser.js';\nimport { isCancellationError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { SideBySideEditorInput } from '../../../common/editor/sideBySideEditorInput.js';\nimport { WorkbenchToolBar } from 'monaco-editor/esm/vs/platform/actions/browser/toolbar.js';\nimport { LocalSelectionTransfer } from 'monaco-editor/esm/vs/platform/dnd/browser/dnd.js';\nimport { IEditorResolverService } from '../../../services/editor/common/editorResolverService.js';\nclass EditorCommandsContextActionRunner extends ActionRunner {\n    constructor(context) {\n        super();\n        this.context = context;\n    }\n    run(action, context) {\n        let mergedContext = this.context;\n        if (context?.preserveFocus) {\n            mergedContext = {\n                ...this.context,\n                preserveFocus: true\n            };\n        }\n        return super.run(action, mergedContext);\n    }\n}\nlet TitleControl = class TitleControl extends Themable {\n    constructor(parent, accessor, group, contextMenuService, instantiationService, contextKeyService, keybindingService, notificationService, menuService, quickInputService, themeService, configurationService, fileService, editorResolverService) {\n        super(themeService);\n        this.accessor = accessor;\n        this.group = group;\n        this.contextMenuService = contextMenuService;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.keybindingService = keybindingService;\n        this.notificationService = notificationService;\n        this.menuService = menuService;\n        this.quickInputService = quickInputService;\n        this.configurationService = configurationService;\n        this.fileService = fileService;\n        this.editorResolverService = editorResolverService;\n        this.editorTransfer = LocalSelectionTransfer.getInstance();\n        this.groupTransfer = LocalSelectionTransfer.getInstance();\n        this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n        this.breadcrumbsControl = undefined;\n        this.editorToolBarMenuDisposables = this._register(( new DisposableStore()));\n        this.resourceContext = this._register(instantiationService.createInstance(ResourceContextKey));\n        this.editorPinnedContext = ActiveEditorPinnedContext.bindTo(contextKeyService);\n        this.editorIsFirstContext = ActiveEditorFirstInGroupContext.bindTo(contextKeyService);\n        this.editorIsLastContext = ActiveEditorLastInGroupContext.bindTo(contextKeyService);\n        this.editorStickyContext = ActiveEditorStickyContext.bindTo(contextKeyService);\n        this.editorAvailableEditorIds = ActiveEditorAvailableEditorIdsContext.bindTo(this.contextKeyService);\n        this.editorCanSplitInGroupContext = ActiveEditorCanSplitInGroupContext.bindTo(contextKeyService);\n        this.sideBySideEditorContext = SideBySideEditorActiveContext.bindTo(contextKeyService);\n        this.groupLockedContext = ActiveEditorGroupLockedContext.bindTo(contextKeyService);\n        this.renderDropdownAsChildElement = false;\n        this.create(parent);\n    }\n    createBreadcrumbsControl(container, options) {\n        const config = this._register(BreadcrumbsConfig.IsEnabled.bindTo(this.configurationService));\n        this._register(config.onDidChange(() => {\n            const value = config.getValue();\n            if (!value && this.breadcrumbsControl) {\n                this.breadcrumbsControl.dispose();\n                this.breadcrumbsControl = undefined;\n                this.handleBreadcrumbsEnablementChange();\n            }\n            else if (value && !this.breadcrumbsControl) {\n                this.breadcrumbsControl = this.instantiationService.createInstance(BreadcrumbsControl, container, options, this.group);\n                this.breadcrumbsControl.update();\n                this.handleBreadcrumbsEnablementChange();\n            }\n        }));\n        if (config.getValue()) {\n            this.breadcrumbsControl = this.instantiationService.createInstance(BreadcrumbsControl, container, options, this.group);\n        }\n        this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(e => {\n            if (this.breadcrumbsControl?.model && this.breadcrumbsControl.model.resource.scheme !== e.scheme) {\n                return;\n            }\n            if (this.breadcrumbsControl?.update()) {\n                this.handleBreadcrumbsEnablementChange();\n            }\n        }));\n    }\n    createEditorActionsToolBar(container) {\n        const context = { groupId: this.group.id };\n        this.editorActionsToolbar = this._register(this.instantiationService.createInstance(WorkbenchToolBar, container, {\n            actionViewItemProvider: action => this.actionViewItemProvider(action),\n            orientation: 0 ,\n            ariaLabel: ( localize('ariaLabelEditorActions', \"Editor actions\")),\n            getKeyBinding: action => this.getKeybinding(action),\n            actionRunner: this._register(( new EditorCommandsContextActionRunner(context))),\n            anchorAlignmentProvider: () => 1 ,\n            renderDropdownAsChildElement: this.renderDropdownAsChildElement,\n            telemetrySource: 'editorPart',\n            resetMenu: MenuId.EditorTitle,\n            maxNumberOfItems: 9\n        }));\n        this.editorActionsToolbar.context = context;\n        this._register(this.editorActionsToolbar.actionRunner.onDidRun(e => {\n            if (e.error && !isCancellationError(e.error)) {\n                this.notificationService.error(e.error);\n            }\n        }));\n    }\n    actionViewItemProvider(action) {\n        const activeEditorPane = this.group.activeEditorPane;\n        if (activeEditorPane instanceof EditorPane) {\n            const result = activeEditorPane.getActionViewItem(action);\n            if (result) {\n                return result;\n            }\n        }\n        return createActionViewItem(this.instantiationService, action, { menuAsChild: this.renderDropdownAsChildElement });\n    }\n    updateEditorActionsToolbar() {\n        const { primary, secondary } = this.prepareEditorActions(this.getEditorActions());\n        const editorActionsToolbar = assertIsDefined(this.editorActionsToolbar);\n        editorActionsToolbar.setActions(prepareActions(primary), prepareActions(secondary));\n    }\n    getEditorActions() {\n        const primary = [];\n        const secondary = [];\n        this.editorToolBarMenuDisposables.clear();\n        this.contextKeyService.bufferChangeEvents(() => {\n            const activeEditor = this.group.activeEditor;\n            this.resourceContext.set(withUndefinedAsNull(EditorResourceAccessor.getOriginalUri(activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY })));\n            this.editorPinnedContext.set(activeEditor ? this.group.isPinned(activeEditor) : false);\n            this.editorIsFirstContext.set(activeEditor ? this.group.isFirst(activeEditor) : false);\n            this.editorIsLastContext.set(activeEditor ? this.group.isLast(activeEditor) : false);\n            this.editorStickyContext.set(activeEditor ? this.group.isSticky(activeEditor) : false);\n            applyAvailableEditorIds(this.editorAvailableEditorIds, activeEditor, this.editorResolverService);\n            this.editorCanSplitInGroupContext.set(activeEditor ? activeEditor.hasCapability(32 ) : false);\n            this.sideBySideEditorContext.set(activeEditor?.typeId === SideBySideEditorInput.ID);\n            this.groupLockedContext.set(this.group.isLocked);\n        });\n        const activeEditorPane = this.group.activeEditorPane;\n        if (activeEditorPane instanceof EditorPane) {\n            const scopedContextKeyService = this.getEditorPaneAwareContextKeyService();\n            const titleBarMenu = this.menuService.createMenu(MenuId.EditorTitle, scopedContextKeyService, { emitEventsForSubmenuChanges: true, eventDebounceDelay: 0 });\n            this.editorToolBarMenuDisposables.add(titleBarMenu);\n            this.editorToolBarMenuDisposables.add(titleBarMenu.onDidChange(() => {\n                this.updateEditorActionsToolbar();\n            }));\n            const shouldInlineGroup = (action, group) => group === 'navigation' && action.actions.length <= 1;\n            createAndFillInActionBarActions(titleBarMenu, { arg: this.resourceContext.get(), shouldForwardArgs: true }, { primary, secondary }, 'navigation', shouldInlineGroup);\n        }\n        return { primary, secondary };\n    }\n    getEditorPaneAwareContextKeyService() {\n        return this.group.activeEditorPane?.scopedContextKeyService ?? this.contextKeyService;\n    }\n    clearEditorActionsToolbar() {\n        this.editorActionsToolbar?.setActions([], []);\n    }\n    enableGroupDragging(element) {\n        this._register(addDisposableListener(element, EventType.DRAG_START, e => {\n            if (e.target !== element) {\n                return;\n            }\n            this.groupTransfer.setData([( new DraggedEditorGroupIdentifier(this.group.id))], DraggedEditorGroupIdentifier.prototype);\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'copyMove';\n            }\n            let hasDataTransfer = false;\n            if (this.accessor.partOptions.showTabs) {\n                hasDataTransfer = this.doFillResourceDataTransfers(this.group.getEditors(1 ), e);\n            }\n            else {\n                if (this.group.activeEditor) {\n                    hasDataTransfer = this.doFillResourceDataTransfers([this.group.activeEditor], e);\n                }\n            }\n            if (!hasDataTransfer && isFirefox) {\n                e.dataTransfer?.setData(DataTransfers.TEXT, String(this.group.label));\n            }\n            if (this.group.activeEditor) {\n                let label = this.group.activeEditor.getName();\n                if (this.accessor.partOptions.showTabs && this.group.count > 1) {\n                    label = ( localize('draggedEditorGroup', \"{0} (+{1})\", label, this.group.count - 1));\n                }\n                applyDragImage(e, label, 'monaco-editor-group-drag-image', this.getColor(listActiveSelectionBackground), this.getColor(listActiveSelectionForeground));\n            }\n        }));\n        this._register(addDisposableListener(element, EventType.DRAG_END, () => {\n            this.groupTransfer.clearData(DraggedEditorGroupIdentifier.prototype);\n        }));\n    }\n    doFillResourceDataTransfers(editors, e) {\n        if (editors.length) {\n            this.instantiationService.invokeFunction(fillEditorsDragData, ( editors.map(editor => ({ editor, groupId: this.group.id }))), e);\n            return true;\n        }\n        return false;\n    }\n    onContextMenu(editor, e, node) {\n        const currentResourceContext = this.resourceContext.get();\n        this.resourceContext.set(withUndefinedAsNull(EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY })));\n        const currentPinnedContext = !!this.editorPinnedContext.get();\n        this.editorPinnedContext.set(this.group.isPinned(editor));\n        const currentEditorIsFirstContext = !!this.editorIsFirstContext.get();\n        this.editorIsFirstContext.set(this.group.isFirst(editor));\n        const currentEditorIsLastContext = !!this.editorIsLastContext.get();\n        this.editorIsLastContext.set(this.group.isLast(editor));\n        const currentStickyContext = !!this.editorStickyContext.get();\n        this.editorStickyContext.set(this.group.isSticky(editor));\n        const currentGroupLockedContext = !!this.groupLockedContext.get();\n        this.groupLockedContext.set(this.group.isLocked);\n        const currentEditorCanSplitContext = !!this.editorCanSplitInGroupContext.get();\n        this.editorCanSplitInGroupContext.set(editor.hasCapability(32 ));\n        const currentSideBySideEditorContext = !!this.sideBySideEditorContext.get();\n        this.sideBySideEditorContext.set(editor.typeId === SideBySideEditorInput.ID);\n        const currentEditorAvailableEditorIds = this.editorAvailableEditorIds.get() ?? '';\n        applyAvailableEditorIds(this.editorAvailableEditorIds, editor, this.editorResolverService);\n        let anchor = node;\n        if (e instanceof MouseEvent) {\n            anchor = ( new StandardMouseEvent(e));\n        }\n        this.contextMenuService.showContextMenu({\n            getAnchor: () => anchor,\n            menuId: MenuId.EditorTitleContext,\n            menuActionOptions: { shouldForwardArgs: true, arg: this.resourceContext.get() },\n            contextKeyService: this.contextKeyService,\n            getActionsContext: () => ({ groupId: this.group.id, editorIndex: this.group.getIndexOfEditor(editor) }),\n            getKeyBinding: action => this.getKeybinding(action),\n            onHide: () => {\n                this.resourceContext.set(currentResourceContext || null);\n                this.editorPinnedContext.set(currentPinnedContext);\n                this.editorIsFirstContext.set(currentEditorIsFirstContext);\n                this.editorIsLastContext.set(currentEditorIsLastContext);\n                this.editorStickyContext.set(currentStickyContext);\n                this.groupLockedContext.set(currentGroupLockedContext);\n                this.editorCanSplitInGroupContext.set(currentEditorCanSplitContext);\n                this.sideBySideEditorContext.set(currentSideBySideEditorContext);\n                this.editorAvailableEditorIds.set(currentEditorAvailableEditorIds);\n                this.accessor.activeGroup.focus();\n            }\n        });\n    }\n    getKeybinding(action) {\n        return this.keybindingService.lookupKeybinding(action.id, this.getEditorPaneAwareContextKeyService());\n    }\n    getKeybindingLabel(action) {\n        const keybinding = this.getKeybinding(action);\n        return keybinding ? withNullAsUndefined(keybinding.getLabel()) : undefined;\n    }\n    dispose() {\n        dispose(this.breadcrumbsControl);\n        this.breadcrumbsControl = undefined;\n        super.dispose();\n    }\n};\nTitleControl = ( __decorate([\n    ( __param(3, IContextMenuService)),\n    ( __param(4, IInstantiationService)),\n    ( __param(5, IContextKeyService)),\n    ( __param(6, IKeybindingService)),\n    ( __param(7, INotificationService)),\n    ( __param(8, IMenuService)),\n    ( __param(9, IQuickInputService)),\n    ( __param(10, IThemeService)),\n    ( __param(11, IConfigurationService)),\n    ( __param(12, IFileService)),\n    ( __param(13, IEditorResolverService))\n], TitleControl));\nexport { EditorCommandsContextActionRunner, TitleControl };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/tabstitlecontrol.css.js';\nimport { isWindows, isMacintosh } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { shorten } from 'monaco-editor/esm/vs/base/common/labels.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, EditorResourceAccessor, SideBySideEditor } from '../../../common/editor.js';\nimport { computeEditorAriaLabel } from '../../editor.js';\nimport { StandardKeyboardEvent } from 'monaco-editor/esm/vs/base/browser/keyboardEvent.js';\nimport { Gesture, EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nimport { ResourceLabels, DEFAULT_LABELS_CONTAINER } from '../../labels.js';\nimport { ActionBar } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { MenuId, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { TitleControl, EditorCommandsContextActionRunner } from './titleControl.js';\nimport { IQuickInputService } from 'monaco-editor/esm/vs/platform/quickinput/common/quickInput.js';\nimport { MutableDisposable, DisposableStore, dispose, combinedDisposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ScrollableElement } from 'monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js';\nimport { getOrSet } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { registerThemingParticipant, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { TAB_ACTIVE_BACKGROUND, TAB_INACTIVE_BACKGROUND, EDITOR_DRAG_AND_DROP_BACKGROUND, EDITOR_GROUP_HEADER_TABS_BORDER, TAB_BORDER, TAB_UNFOCUSED_ACTIVE_BACKGROUND, TAB_ACTIVE_BORDER, TAB_UNFOCUSED_ACTIVE_BORDER, TAB_ACTIVE_BORDER_TOP, TAB_UNFOCUSED_ACTIVE_BORDER_TOP, TAB_ACTIVE_FOREGROUND, TAB_UNFOCUSED_ACTIVE_FOREGROUND, TAB_UNFOCUSED_INACTIVE_BACKGROUND, TAB_INACTIVE_FOREGROUND, TAB_UNFOCUSED_INACTIVE_FOREGROUND, TAB_ACTIVE_MODIFIED_BORDER, TAB_INACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_ACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_INACTIVE_MODIFIED_BORDER, TAB_LAST_PINNED_BORDER, TAB_HOVER_BACKGROUND, TAB_UNFOCUSED_HOVER_BACKGROUND, TAB_HOVER_FOREGROUND, TAB_UNFOCUSED_HOVER_FOREGROUND, TAB_HOVER_BORDER, TAB_UNFOCUSED_HOVER_BORDER, EDITOR_GROUP_HEADER_TABS_BACKGROUND, WORKBENCH_BACKGROUND } from '../../../common/theme.js';\nimport { activeContrastBorder, contrastBorder, editorBackground } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { DraggedEditorIdentifier, DraggedEditorGroupIdentifier, extractTreeDropData, ResourcesDropHandler } from '../../dnd.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { Dimension, addDisposableListener, EventType, EventHelper, DragAndDropObserver, clearNode, scheduleAtNextAnimationFrame, findParentWithClass } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { CloseOneEditorAction, UnpinEditorAction } from './editorActions.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { BreadcrumbsControl } from './breadcrumbsControl.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { assertAllDefined, assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { basenameOrAuthority } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { RunOnceScheduler } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { win32, posix } from 'monaco-editor/esm/vs/base/common/path.js';\nimport { insert, coalesce } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { isHighContrast } from 'monaco-editor/esm/vs/platform/theme/common/theme.js';\nimport { isSafari } from 'monaco-editor/esm/vs/base/browser/browser.js';\nimport { equals } from 'monaco-editor/esm/vs/base/common/objects.js';\nimport { EditorActivation } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport { UNLOCK_GROUP_COMMAND_ID } from './editorCommands.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { ITreeViewsDnDService } from 'monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js';\nimport { DraggedTreeItemsIdentifier } from 'monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js';\nimport { IEditorResolverService } from '../../../services/editor/common/editorResolverService.js';\nlet TabsTitleControl = class TabsTitleControl extends TitleControl {\n    static { this.SCROLLBAR_SIZES = {\n        default: 3,\n        large: 10\n    }; }\n    static { this.TAB_WIDTH = {\n        compact: 38,\n        shrink: 80,\n        fit: 120\n    }; }\n    static { this.TAB_HEIGHT = 35; }\n    static { this.DRAG_OVER_OPEN_TAB_THRESHOLD = 1500; }\n    static { this.MOUSE_WHEEL_EVENT_THRESHOLD = 150; }\n    static { this.MOUSE_WHEEL_DISTANCE_THRESHOLD = 1.5; }\n    constructor(parent, accessor, group, contextMenuService, instantiationService, contextKeyService, keybindingService, notificationService, menuService, quickInputService, themeService, configurationService, fileService, editorService, pathService, editorGroupService, treeViewsDragAndDropService, editorResolverService) {\n        super(parent, accessor, group, contextMenuService, instantiationService, contextKeyService, keybindingService, notificationService, menuService, quickInputService, themeService, configurationService, fileService, editorResolverService);\n        this.editorService = editorService;\n        this.pathService = pathService;\n        this.editorGroupService = editorGroupService;\n        this.treeViewsDragAndDropService = treeViewsDragAndDropService;\n        this.closeEditorAction = this._register(this.instantiationService.createInstance(CloseOneEditorAction, CloseOneEditorAction.ID, CloseOneEditorAction.LABEL));\n        this.unpinEditorAction = this._register(this.instantiationService.createInstance(UnpinEditorAction, UnpinEditorAction.ID, UnpinEditorAction.LABEL));\n        this.tabResourceLabels = this._register(this.instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER));\n        this.tabLabels = [];\n        this.tabActionBars = [];\n        this.tabDisposables = [];\n        this.dimensions = {\n            container: Dimension.None,\n            available: Dimension.None\n        };\n        this.layoutScheduler = this._register(( new MutableDisposable()));\n        this.path = isWindows ? win32 : posix;\n        this.lastMouseWheelEventTime = 0;\n        this.isMouseOverTabs = false;\n        this.updateEditorLabelScheduler = this._register(( new RunOnceScheduler(() => this.doUpdateEditorLabels(), 0)));\n        (async () => this.path = await this.pathService.path)();\n        this._register(this.tabResourceLabels.onDidChangeDecorations(() => this.doHandleDecorationsChange()));\n    }\n    create(parent) {\n        this.titleContainer = parent;\n        this.tabsAndActionsContainer = document.createElement('div');\n        this.tabsAndActionsContainer.classList.add('tabs-and-actions-container');\n        this.titleContainer.appendChild(this.tabsAndActionsContainer);\n        this.tabsContainer = document.createElement('div');\n        this.tabsContainer.setAttribute('role', 'tablist');\n        this.tabsContainer.draggable = true;\n        this.tabsContainer.classList.add('tabs-container');\n        this._register(Gesture.addTarget(this.tabsContainer));\n        this.tabSizingFixedDisposables = this._register(( new DisposableStore()));\n        this.updateTabSizing(false);\n        this.tabsScrollbar = this._register(this.createTabsScrollbar(this.tabsContainer));\n        this.tabsAndActionsContainer.appendChild(this.tabsScrollbar.getDomNode());\n        this.registerTabsContainerListeners(this.tabsContainer, this.tabsScrollbar);\n        this.editorToolbarContainer = document.createElement('div');\n        this.editorToolbarContainer.classList.add('editor-actions');\n        this.tabsAndActionsContainer.appendChild(this.editorToolbarContainer);\n        this.createEditorActionsToolBar(this.editorToolbarContainer);\n        const breadcrumbsContainer = document.createElement('div');\n        breadcrumbsContainer.classList.add('tabs-breadcrumbs');\n        this.titleContainer.appendChild(breadcrumbsContainer);\n        this.createBreadcrumbsControl(breadcrumbsContainer, { showFileIcons: true, showSymbolIcons: true, showDecorationColors: false, showPlaceholder: true });\n    }\n    createTabsScrollbar(scrollable) {\n        const tabsScrollbar = ( new ScrollableElement(scrollable, {\n            horizontal: 1 ,\n            horizontalScrollbarSize: this.getTabsScrollbarSizing(),\n            vertical: 2 ,\n            scrollYToX: true,\n            useShadows: false\n        }));\n        tabsScrollbar.onScroll(e => {\n            if (e.scrollLeftChanged) {\n                scrollable.scrollLeft = e.scrollLeft;\n            }\n        });\n        return tabsScrollbar;\n    }\n    updateTabsScrollbarSizing() {\n        this.tabsScrollbar?.updateOptions({\n            horizontalScrollbarSize: this.getTabsScrollbarSizing()\n        });\n    }\n    updateTabSizing(fromEvent) {\n        const [tabsContainer, tabSizingFixedDisposables] = assertAllDefined(this.tabsContainer, this.tabSizingFixedDisposables);\n        tabSizingFixedDisposables.clear();\n        const options = this.accessor.partOptions;\n        if (options.tabSizing === 'fixed') {\n            tabsContainer.style.setProperty('--tab-sizing-fixed-min-width', `${options.tabSizingFixedMinWidth}px`);\n            tabsContainer.style.setProperty('--tab-sizing-fixed-max-width', `${options.tabSizingFixedMaxWidth}px`);\n            tabSizingFixedDisposables.add(addDisposableListener(tabsContainer, EventType.MOUSE_ENTER, () => {\n                this.isMouseOverTabs = true;\n            }));\n            tabSizingFixedDisposables.add(addDisposableListener(tabsContainer, EventType.MOUSE_LEAVE, () => {\n                this.isMouseOverTabs = false;\n                this.updateTabsFixedWidth(false);\n            }));\n        }\n        else if (fromEvent) {\n            tabsContainer.style.removeProperty('--tab-sizing-fixed-min-width');\n            tabsContainer.style.removeProperty('--tab-sizing-fixed-max-width');\n            this.updateTabsFixedWidth(false);\n        }\n    }\n    updateTabsFixedWidth(fixed) {\n        this.forEachTab((editor, index, tabContainer) => {\n            if (fixed) {\n                const { width } = tabContainer.getBoundingClientRect();\n                tabContainer.style.setProperty('--tab-sizing-current-width', `${width}px`);\n            }\n            else {\n                tabContainer.style.removeProperty('--tab-sizing-current-width');\n            }\n        });\n    }\n    getTabsScrollbarSizing() {\n        if (this.accessor.partOptions.titleScrollbarSizing !== 'large') {\n            return TabsTitleControl.SCROLLBAR_SIZES.default;\n        }\n        return TabsTitleControl.SCROLLBAR_SIZES.large;\n    }\n    registerTabsContainerListeners(tabsContainer, tabsScrollbar) {\n        this.enableGroupDragging(tabsContainer);\n        this._register(addDisposableListener(tabsContainer, EventType.SCROLL, () => {\n            if (tabsContainer.classList.contains('scroll')) {\n                tabsScrollbar.setScrollPosition({\n                    scrollLeft: tabsContainer.scrollLeft\n                });\n            }\n        }));\n        for (const eventType of [EventType$1.Tap, EventType.DBLCLICK]) {\n            this._register(addDisposableListener(tabsContainer, eventType, (e) => {\n                if (eventType === EventType.DBLCLICK) {\n                    if (e.target !== tabsContainer) {\n                        return;\n                    }\n                }\n                else {\n                    if (e.tapCount !== 2) {\n                        return;\n                    }\n                    if (e.initialTarget !== tabsContainer) {\n                        return;\n                    }\n                }\n                EventHelper.stop(e);\n                this.editorService.openEditor({\n                    resource: undefined,\n                    options: {\n                        pinned: true,\n                        index: this.group.count,\n                        override: DEFAULT_EDITOR_ASSOCIATION.id\n                    }\n                }, this.group.id);\n            }));\n        }\n        this._register(addDisposableListener(tabsContainer, EventType.MOUSE_DOWN, e => {\n            if (e.button === 1) {\n                e.preventDefault();\n            }\n        }));\n        this._register(( new DragAndDropObserver(tabsContainer, {\n            onDragEnter: e => {\n                tabsContainer.classList.add('scroll');\n                if (e.target !== tabsContainer) {\n                    this.updateDropFeedback(tabsContainer, false);\n                    return;\n                }\n                if (!this.isSupportedDropTransfer(e)) {\n                    if (e.dataTransfer) {\n                        e.dataTransfer.dropEffect = 'none';\n                    }\n                    return;\n                }\n                let isLocalDragAndDrop = false;\n                if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n                    isLocalDragAndDrop = true;\n                    const data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n                    if (Array.isArray(data)) {\n                        const localDraggedEditor = data[0].identifier;\n                        if (this.group.id === localDraggedEditor.groupId && this.group.getIndexOfEditor(localDraggedEditor.editor) === this.group.count - 1) {\n                            if (e.dataTransfer) {\n                                e.dataTransfer.dropEffect = 'none';\n                            }\n                            return;\n                        }\n                    }\n                }\n                if (!isLocalDragAndDrop) {\n                    if (e.dataTransfer) {\n                        e.dataTransfer.dropEffect = 'copy';\n                    }\n                }\n                this.updateDropFeedback(tabsContainer, true);\n            },\n            onDragLeave: e => {\n                this.updateDropFeedback(tabsContainer, false);\n                tabsContainer.classList.remove('scroll');\n            },\n            onDragEnd: e => {\n                this.updateDropFeedback(tabsContainer, false);\n                tabsContainer.classList.remove('scroll');\n            },\n            onDrop: e => {\n                this.updateDropFeedback(tabsContainer, false);\n                tabsContainer.classList.remove('scroll');\n                if (e.target === tabsContainer) {\n                    this.onDrop(e, this.group.count, tabsContainer);\n                }\n            }\n        })));\n        this._register(addDisposableListener(tabsContainer, EventType.MOUSE_WHEEL, (e) => {\n            const activeEditor = this.group.activeEditor;\n            if (!activeEditor || this.group.count < 2) {\n                return;\n            }\n            if (this.accessor.partOptions.scrollToSwitchTabs === true) {\n                if (e.shiftKey) {\n                    return;\n                }\n            }\n            else {\n                if (!e.shiftKey) {\n                    return;\n                }\n            }\n            const now = Date.now();\n            if (now - this.lastMouseWheelEventTime < TabsTitleControl.MOUSE_WHEEL_EVENT_THRESHOLD - 2 * (Math.abs(e.deltaX) + Math.abs(e.deltaY))) {\n                return;\n            }\n            this.lastMouseWheelEventTime = now;\n            let tabSwitchDirection;\n            if (e.deltaX + e.deltaY < -TabsTitleControl.MOUSE_WHEEL_DISTANCE_THRESHOLD) {\n                tabSwitchDirection = -1;\n            }\n            else if (e.deltaX + e.deltaY > TabsTitleControl.MOUSE_WHEEL_DISTANCE_THRESHOLD) {\n                tabSwitchDirection = 1;\n            }\n            else {\n                return;\n            }\n            const nextEditor = this.group.getEditorByIndex(this.group.getIndexOfEditor(activeEditor) + tabSwitchDirection);\n            if (!nextEditor) {\n                return;\n            }\n            this.group.openEditor(nextEditor);\n            EventHelper.stop(e, true);\n        }));\n        const showContextMenu = (e) => {\n            EventHelper.stop(e);\n            let anchor = tabsContainer;\n            if (e instanceof MouseEvent) {\n                anchor = ( new StandardMouseEvent(e));\n            }\n            this.contextMenuService.showContextMenu({\n                getAnchor: () => anchor,\n                menuId: MenuId.EditorTabsBarContext,\n                contextKeyService: this.contextKeyService,\n                menuActionOptions: { shouldForwardArgs: true },\n                getActionsContext: () => ({ groupId: this.group.id }),\n                getKeyBinding: action => this.getKeybinding(action),\n                onHide: () => this.group.focus()\n            });\n        };\n        this._register(addDisposableListener(tabsContainer, EventType$1.Contextmenu, e => showContextMenu(e)));\n        this._register(addDisposableListener(tabsContainer, EventType.CONTEXT_MENU, e => showContextMenu(e)));\n    }\n    doHandleDecorationsChange() {\n        this.layout(this.dimensions);\n    }\n    updateEditorActionsToolbar() {\n        super.updateEditorActionsToolbar();\n        this.layout(this.dimensions);\n    }\n    openEditor(editor) {\n        this.handleOpenedEditors();\n    }\n    openEditors(editors) {\n        this.handleOpenedEditors();\n    }\n    handleOpenedEditors() {\n        const [tabsContainer, tabsScrollbar] = assertAllDefined(this.tabsContainer, this.tabsScrollbar);\n        for (let i = tabsContainer.children.length; i < this.group.count; i++) {\n            tabsContainer.appendChild(this.createTab(i, tabsContainer, tabsScrollbar));\n        }\n        const activeEditorChanged = this.didActiveEditorChange();\n        const oldActiveTabLabel = this.activeTabLabel;\n        const oldTabLabelsLength = this.tabLabels.length;\n        this.computeTabLabels();\n        if (activeEditorChanged ||\n            oldTabLabelsLength !== this.tabLabels.length ||\n            !this.equalsEditorInputLabel(oldActiveTabLabel, this.activeTabLabel)\n        ) {\n            this.redraw({ forceRevealActiveTab: true });\n            this.breadcrumbsControl?.update();\n        }\n        else {\n            this.layout(this.dimensions, { forceRevealActiveTab: true });\n            this.breadcrumbsControl?.revealLast();\n        }\n    }\n    didActiveEditorChange() {\n        if (!this.activeTabLabel?.editor && this.group.activeEditor ||\n            this.activeTabLabel?.editor && !this.group.activeEditor ||\n            (!this.activeTabLabel?.editor || !this.group.isActive(this.activeTabLabel.editor))\n        ) {\n            return true;\n        }\n        return false;\n    }\n    equalsEditorInputLabel(labelA, labelB) {\n        if (labelA === labelB) {\n            return true;\n        }\n        if (!labelA || !labelB) {\n            return false;\n        }\n        return labelA.name === labelB.name &&\n            labelA.description === labelB.description &&\n            labelA.forceDescription === labelB.forceDescription &&\n            labelA.title === labelB.title &&\n            labelA.ariaLabel === labelB.ariaLabel;\n    }\n    beforeCloseEditor(editor) {\n        if (this.isMouseOverTabs && this.accessor.partOptions.tabSizing === 'fixed') {\n            const closingLastTab = this.group.isLast(editor);\n            this.updateTabsFixedWidth(!closingLastTab);\n        }\n    }\n    closeEditor(editor) {\n        this.handleClosedEditors();\n    }\n    closeEditors(editors) {\n        this.handleClosedEditors();\n    }\n    handleClosedEditors() {\n        if (this.group.activeEditor) {\n            const tabsContainer = assertIsDefined(this.tabsContainer);\n            while (tabsContainer.children.length > this.group.count) {\n                tabsContainer.lastChild?.remove();\n                dispose(this.tabDisposables.pop());\n            }\n            this.computeTabLabels();\n            this.redraw({ forceRevealActiveTab: true });\n        }\n        else {\n            if (this.tabsContainer) {\n                clearNode(this.tabsContainer);\n            }\n            this.tabDisposables = dispose(this.tabDisposables);\n            this.tabResourceLabels.clear();\n            this.tabLabels = [];\n            this.activeTabLabel = undefined;\n            this.tabActionBars = [];\n            this.clearEditorActionsToolbar();\n            this.breadcrumbsControl?.update();\n        }\n    }\n    moveEditor(editor, fromIndex, targetIndex) {\n        const editorLabel = this.tabLabels[fromIndex];\n        this.tabLabels.splice(fromIndex, 1);\n        this.tabLabels.splice(targetIndex, 0, editorLabel);\n        this.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n            this.redrawTab(editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar);\n        }, Math.min(fromIndex, targetIndex),\n        Math.max(fromIndex, targetIndex)\n        );\n        this.layout(this.dimensions, { forceRevealActiveTab: true });\n    }\n    pinEditor(editor) {\n        this.withTab(editor, (editor, index, tabContainer, tabLabelWidget, tabLabel) => this.redrawTabLabel(editor, index, tabContainer, tabLabelWidget, tabLabel));\n    }\n    stickEditor(editor) {\n        this.doHandleStickyEditorChange(editor);\n    }\n    unstickEditor(editor) {\n        this.doHandleStickyEditorChange(editor);\n    }\n    doHandleStickyEditorChange(editor) {\n        this.withTab(editor, (editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => this.redrawTab(editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar));\n        this.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel) => {\n            this.redrawTabBorders(index, tabContainer);\n        });\n        this.layout(this.dimensions, { forceRevealActiveTab: true });\n    }\n    setActive(isGroupActive) {\n        this.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n            this.redrawTabActiveAndDirty(isGroupActive, editor, tabContainer, tabActionBar);\n        });\n        this.updateEditorActionsToolbar();\n        this.layout(this.dimensions, { forceRevealActiveTab: true });\n    }\n    updateEditorLabel(editor) {\n        this.updateEditorLabelScheduler.schedule();\n    }\n    doUpdateEditorLabels() {\n        this.computeTabLabels();\n        this.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel) => {\n            this.redrawTabLabel(editor, index, tabContainer, tabLabelWidget, tabLabel);\n        });\n        this.layout(this.dimensions);\n    }\n    updateEditorDirty(editor) {\n        this.withTab(editor, (editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => this.redrawTabActiveAndDirty(this.accessor.activeGroup === this.group, editor, tabContainer, tabActionBar));\n    }\n    updateOptions(oldOptions, newOptions) {\n        if (oldOptions.labelFormat !== newOptions.labelFormat) {\n            this.computeTabLabels();\n        }\n        if (oldOptions.titleScrollbarSizing !== newOptions.titleScrollbarSizing) {\n            this.updateTabsScrollbarSizing();\n        }\n        if (oldOptions.tabSizingFixedMinWidth !== newOptions.tabSizingFixedMinWidth ||\n            oldOptions.tabSizingFixedMaxWidth !== newOptions.tabSizingFixedMaxWidth ||\n            oldOptions.tabSizing !== newOptions.tabSizing) {\n            this.updateTabSizing(true);\n        }\n        if (oldOptions.labelFormat !== newOptions.labelFormat ||\n            oldOptions.tabCloseButton !== newOptions.tabCloseButton ||\n            oldOptions.tabSizing !== newOptions.tabSizing ||\n            oldOptions.pinnedTabSizing !== newOptions.pinnedTabSizing ||\n            oldOptions.showIcons !== newOptions.showIcons ||\n            oldOptions.hasIcons !== newOptions.hasIcons ||\n            oldOptions.highlightModifiedTabs !== newOptions.highlightModifiedTabs ||\n            oldOptions.wrapTabs !== newOptions.wrapTabs ||\n            !equals(oldOptions.decorations, newOptions.decorations)) {\n            this.redraw();\n        }\n    }\n    updateStyles() {\n        this.redraw();\n    }\n    forEachTab(fn, fromIndex, toIndex) {\n        this.group.editors.forEach((editor, index) => {\n            if (typeof fromIndex === 'number' && fromIndex > index) {\n                return;\n            }\n            if (typeof toIndex === 'number' && toIndex < index) {\n                return;\n            }\n            this.doWithTab(index, editor, fn);\n        });\n    }\n    withTab(editor, fn) {\n        this.doWithTab(this.group.getIndexOfEditor(editor), editor, fn);\n    }\n    doWithTab(index, editor, fn) {\n        const tabsContainer = assertIsDefined(this.tabsContainer);\n        const tabContainer = tabsContainer.children[index];\n        const tabResourceLabel = this.tabResourceLabels.get(index);\n        const tabLabel = this.tabLabels[index];\n        const tabActionBar = this.tabActionBars[index];\n        if (tabContainer && tabResourceLabel && tabLabel) {\n            fn(editor, index, tabContainer, tabResourceLabel, tabLabel, tabActionBar);\n        }\n    }\n    createTab(index, tabsContainer, tabsScrollbar) {\n        const tabContainer = document.createElement('div');\n        tabContainer.draggable = true;\n        tabContainer.setAttribute('role', 'tab');\n        tabContainer.classList.add('tab');\n        this._register(Gesture.addTarget(tabContainer));\n        const tabBorderTopContainer = document.createElement('div');\n        tabBorderTopContainer.classList.add('tab-border-top-container');\n        tabContainer.appendChild(tabBorderTopContainer);\n        const editorLabel = this.tabResourceLabels.create(tabContainer);\n        const tabActionsContainer = document.createElement('div');\n        tabActionsContainer.classList.add('tab-actions');\n        tabContainer.appendChild(tabActionsContainer);\n        const tabActionRunner = ( new EditorCommandsContextActionRunner({ groupId: this.group.id, editorIndex: index }));\n        const tabActionBar = ( new ActionBar(tabActionsContainer, { ariaLabel: ( localize('ariaLabelTabActions', \"Tab actions\")), actionRunner: tabActionRunner }));\n        tabActionBar.onWillRun(e => {\n            if (e.action.id === this.closeEditorAction.id) {\n                this.blockRevealActiveTabOnce();\n            }\n        });\n        const tabActionBarDisposable = combinedDisposable(tabActionBar, toDisposable(insert(this.tabActionBars, tabActionBar)));\n        const tabBorderBottomContainer = document.createElement('div');\n        tabBorderBottomContainer.classList.add('tab-border-bottom-container');\n        tabContainer.appendChild(tabBorderBottomContainer);\n        const eventsDisposable = this.registerTabListeners(tabContainer, index, tabsContainer, tabsScrollbar);\n        this.tabDisposables.push(combinedDisposable(eventsDisposable, tabActionBarDisposable, tabActionRunner, editorLabel));\n        return tabContainer;\n    }\n    registerTabListeners(tab, index, tabsContainer, tabsScrollbar) {\n        const disposables = ( new DisposableStore());\n        const handleClickOrTouch = (e, preserveFocus) => {\n            tab.blur();\n            if (e instanceof MouseEvent && (e.button !== 0  || ((isMacintosh && e.ctrlKey) ))) {\n                if (e.button === 1) {\n                    e.preventDefault();\n                }\n                return undefined;\n            }\n            if (this.originatesFromTabActionBar(e)) {\n                return;\n            }\n            const input = this.group.getEditorByIndex(index);\n            if (input) {\n                this.group.openEditor(input, { preserveFocus, activation: EditorActivation.ACTIVATE });\n            }\n            return undefined;\n        };\n        const showContextMenu = (e) => {\n            EventHelper.stop(e);\n            const input = this.group.getEditorByIndex(index);\n            if (input) {\n                this.onContextMenu(input, e, tab);\n            }\n        };\n        disposables.add(addDisposableListener(tab, EventType.MOUSE_DOWN, e => handleClickOrTouch(e, false)));\n        disposables.add(addDisposableListener(tab, EventType$1.Tap, (e) => handleClickOrTouch(e, true)));\n        disposables.add(addDisposableListener(tab, EventType$1.Change, (e) => {\n            tabsScrollbar.setScrollPosition({ scrollLeft: tabsScrollbar.getScrollPosition().scrollLeft - e.translationX });\n        }));\n        disposables.add(addDisposableListener(tab, EventType.MOUSE_UP, e => {\n            EventHelper.stop(e);\n            tab.blur();\n        }));\n        disposables.add(addDisposableListener(tab, EventType.AUXCLICK, e => {\n            if (e.button === 1 ) {\n                EventHelper.stop(e, true );\n                this.blockRevealActiveTabOnce();\n                this.closeEditorAction.run({ groupId: this.group.id, editorIndex: index });\n            }\n        }));\n        disposables.add(addDisposableListener(tab, EventType.KEY_DOWN, e => {\n            const event = ( new StandardKeyboardEvent(e));\n            if (event.shiftKey && event.keyCode === 68 ) {\n                showContextMenu(e);\n            }\n        }));\n        disposables.add(addDisposableListener(tab, EventType$1.Contextmenu, (e) => {\n            showContextMenu(e);\n        }));\n        disposables.add(addDisposableListener(tab, EventType.KEY_UP, e => {\n            const event = ( new StandardKeyboardEvent(e));\n            let handled = false;\n            if (event.equals(3 ) || event.equals(10 )) {\n                handled = true;\n                const input = this.group.getEditorByIndex(index);\n                if (input) {\n                    this.group.openEditor(input);\n                }\n            }\n            else if (( [15 , 17 , 16 , 18 , 14 , 13 ].some(kb => event.equals(kb)))) {\n                let targetIndex;\n                if (event.equals(15 ) || event.equals(16 )) {\n                    targetIndex = index - 1;\n                }\n                else if (event.equals(17 ) || event.equals(18 )) {\n                    targetIndex = index + 1;\n                }\n                else if (event.equals(14 )) {\n                    targetIndex = 0;\n                }\n                else {\n                    targetIndex = this.group.count - 1;\n                }\n                const target = this.group.getEditorByIndex(targetIndex);\n                if (target) {\n                    handled = true;\n                    this.group.openEditor(target, { preserveFocus: true });\n                    tabsContainer.childNodes[targetIndex].focus();\n                }\n            }\n            if (handled) {\n                EventHelper.stop(e, true);\n            }\n            tabsScrollbar.setScrollPosition({\n                scrollLeft: tabsContainer.scrollLeft\n            });\n        }));\n        for (const eventType of [EventType$1.Tap, EventType.DBLCLICK]) {\n            disposables.add(addDisposableListener(tab, eventType, (e) => {\n                if (eventType === EventType.DBLCLICK) {\n                    EventHelper.stop(e);\n                }\n                else if (e.tapCount !== 2) {\n                    return;\n                }\n                const editor = this.group.getEditorByIndex(index);\n                if (editor && this.group.isPinned(editor)) {\n                    if (this.accessor.partOptions.doubleClickTabToToggleEditorGroupSizes) {\n                        this.accessor.arrangeGroups(2 , this.group);\n                    }\n                }\n                else {\n                    this.group.pinEditor(editor);\n                }\n            }));\n        }\n        disposables.add(addDisposableListener(tab, EventType.CONTEXT_MENU, e => {\n            EventHelper.stop(e, true);\n            const input = this.group.getEditorByIndex(index);\n            if (input) {\n                this.onContextMenu(input, e, tab);\n            }\n        }, true ));\n        disposables.add(addDisposableListener(tab, EventType.DRAG_START, e => {\n            const editor = this.group.getEditorByIndex(index);\n            if (!editor) {\n                return;\n            }\n            this.editorTransfer.setData([( new DraggedEditorIdentifier({ editor, groupId: this.group.id }))], DraggedEditorIdentifier.prototype);\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'copyMove';\n            }\n            this.doFillResourceDataTransfers([editor], e);\n            tab.classList.add('dragged');\n            scheduleAtNextAnimationFrame(() => tab.classList.remove('dragged'));\n        }));\n        disposables.add(( new DragAndDropObserver(tab, {\n            onDragEnter: e => {\n                tab.classList.add('dragged-over');\n                if (!this.isSupportedDropTransfer(e)) {\n                    if (e.dataTransfer) {\n                        e.dataTransfer.dropEffect = 'none';\n                    }\n                    return;\n                }\n                let isLocalDragAndDrop = false;\n                if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n                    isLocalDragAndDrop = true;\n                    const data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n                    if (Array.isArray(data)) {\n                        const localDraggedEditor = data[0].identifier;\n                        if (localDraggedEditor.editor === this.group.getEditorByIndex(index) && localDraggedEditor.groupId === this.group.id) {\n                            if (e.dataTransfer) {\n                                e.dataTransfer.dropEffect = 'none';\n                            }\n                            return;\n                        }\n                    }\n                }\n                if (!isLocalDragAndDrop) {\n                    if (e.dataTransfer) {\n                        e.dataTransfer.dropEffect = 'copy';\n                    }\n                }\n                this.updateDropFeedback(tab, true, index);\n            },\n            onDragOver: (_, dragDuration) => {\n                if (dragDuration >= TabsTitleControl.DRAG_OVER_OPEN_TAB_THRESHOLD) {\n                    const draggedOverTab = this.group.getEditorByIndex(index);\n                    if (draggedOverTab && this.group.activeEditor !== draggedOverTab) {\n                        this.group.openEditor(draggedOverTab, { preserveFocus: true });\n                    }\n                }\n            },\n            onDragLeave: () => {\n                tab.classList.remove('dragged-over');\n                this.updateDropFeedback(tab, false, index);\n            },\n            onDragEnd: () => {\n                tab.classList.remove('dragged-over');\n                this.updateDropFeedback(tab, false, index);\n                this.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n            },\n            onDrop: e => {\n                tab.classList.remove('dragged-over');\n                this.updateDropFeedback(tab, false, index);\n                this.onDrop(e, index, tabsContainer);\n            }\n        })));\n        return disposables;\n    }\n    isSupportedDropTransfer(e) {\n        if (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n            const data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n            if (Array.isArray(data)) {\n                const group = data[0];\n                if (group.identifier === this.group.id) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n            return true;\n        }\n        if (e.dataTransfer && e.dataTransfer.types.length > 0) {\n            return true;\n        }\n        return false;\n    }\n    updateDropFeedback(element, isDND, index) {\n        const isTab = (typeof index === 'number');\n        const editor = typeof index === 'number' ? this.group.getEditorByIndex(index) : undefined;\n        const isActiveTab = isTab && !!editor && this.group.isActive(editor);\n        const noDNDBackgroundColor = isTab ? this.getColor(isActiveTab ? TAB_ACTIVE_BACKGROUND : TAB_INACTIVE_BACKGROUND) : '';\n        element.style.backgroundColor = (isDND ? this.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND) : noDNDBackgroundColor) || '';\n        const activeContrastBorderColor = this.getColor(activeContrastBorder);\n        if (activeContrastBorderColor && isDND) {\n            element.style.outlineWidth = '2px';\n            element.style.outlineStyle = 'dashed';\n            element.style.outlineColor = activeContrastBorderColor;\n            element.style.outlineOffset = isTab ? '-5px' : '-3px';\n        }\n        else {\n            element.style.outlineWidth = '';\n            element.style.outlineStyle = '';\n            element.style.outlineColor = activeContrastBorderColor || '';\n            element.style.outlineOffset = '';\n        }\n    }\n    computeTabLabels() {\n        const { labelFormat } = this.accessor.partOptions;\n        const { verbosity, shortenDuplicates } = this.getLabelConfigFlags(labelFormat);\n        const labels = [];\n        let activeEditorIndex = -1;\n        for (let i = 0; i < this.group.editors.length; i++) {\n            const editor = this.group.editors[i];\n            labels.push({\n                editor,\n                name: editor.getName(),\n                description: editor.getDescription(verbosity),\n                forceDescription: editor.hasCapability(64 ),\n                title: editor.getTitle(2 ),\n                ariaLabel: computeEditorAriaLabel(editor, i, this.group, this.editorGroupService.count)\n            });\n            if (editor === this.group.activeEditor) {\n                activeEditorIndex = i;\n            }\n        }\n        if (shortenDuplicates) {\n            this.shortenTabLabels(labels);\n        }\n        this.tabLabels = labels;\n        this.activeTabLabel = labels[activeEditorIndex];\n    }\n    shortenTabLabels(labels) {\n        const mapNameToDuplicates = ( new Map());\n        for (const label of labels) {\n            if (typeof label.description === 'string') {\n                getOrSet(mapNameToDuplicates, label.name, []).push(label);\n            }\n            else {\n                label.description = '';\n            }\n        }\n        for (const [, duplicateLabels] of mapNameToDuplicates) {\n            if (duplicateLabels.length === 1 && !duplicateLabels[0].forceDescription) {\n                duplicateLabels[0].description = '';\n                continue;\n            }\n            const mapDescriptionToDuplicates = ( new Map());\n            for (const duplicateLabel of duplicateLabels) {\n                getOrSet(mapDescriptionToDuplicates, duplicateLabel.description, []).push(duplicateLabel);\n            }\n            let useLongDescriptions = false;\n            for (const [, duplicateLabels] of mapDescriptionToDuplicates) {\n                if (!useLongDescriptions && duplicateLabels.length > 1) {\n                    const [first, ...rest] = ( duplicateLabels.map(({ editor }) => editor.getDescription(2 )));\n                    useLongDescriptions = ( rest.some(description => description !== first));\n                }\n            }\n            if (useLongDescriptions) {\n                mapDescriptionToDuplicates.clear();\n                for (const duplicateLabel of duplicateLabels) {\n                    duplicateLabel.description = duplicateLabel.editor.getDescription(2 );\n                    getOrSet(mapDescriptionToDuplicates, duplicateLabel.description, []).push(duplicateLabel);\n                }\n            }\n            const descriptions = [];\n            for (const [description] of mapDescriptionToDuplicates) {\n                descriptions.push(description);\n            }\n            if (descriptions.length === 1) {\n                for (const label of mapDescriptionToDuplicates.get(descriptions[0]) || []) {\n                    if (!label.forceDescription) {\n                        label.description = '';\n                    }\n                }\n                continue;\n            }\n            const shortenedDescriptions = shorten(descriptions, this.path.sep);\n            descriptions.forEach((description, index) => {\n                for (const label of mapDescriptionToDuplicates.get(description) || []) {\n                    label.description = shortenedDescriptions[index];\n                }\n            });\n        }\n    }\n    getLabelConfigFlags(value) {\n        switch (value) {\n            case 'short':\n                return { verbosity: 0 , shortenDuplicates: false };\n            case 'medium':\n                return { verbosity: 1 , shortenDuplicates: false };\n            case 'long':\n                return { verbosity: 2 , shortenDuplicates: false };\n            default:\n                return { verbosity: 1 , shortenDuplicates: true };\n        }\n    }\n    redraw(options) {\n        if (this.tabsAndActionsContainer) {\n            let tabsContainerBorderColor = this.getColor(EDITOR_GROUP_HEADER_TABS_BORDER);\n            if (!tabsContainerBorderColor && isHighContrast(this.theme.type)) {\n                tabsContainerBorderColor = this.getColor(TAB_BORDER) || this.getColor(contrastBorder);\n            }\n            if (tabsContainerBorderColor) {\n                this.tabsAndActionsContainer.classList.add('tabs-border-bottom');\n                this.tabsAndActionsContainer.style.setProperty('--tabs-border-bottom-color', ( tabsContainerBorderColor.toString()));\n            }\n            else {\n                this.tabsAndActionsContainer.classList.remove('tabs-border-bottom');\n                this.tabsAndActionsContainer.style.removeProperty('--tabs-border-bottom-color');\n            }\n        }\n        this.forEachTab((editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n            this.redrawTab(editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar);\n        });\n        this.updateEditorActionsToolbar();\n        this.layout(this.dimensions, options);\n    }\n    redrawTab(editor, index, tabContainer, tabLabelWidget, tabLabel, tabActionBar) {\n        const isTabSticky = this.group.isSticky(index);\n        const options = this.accessor.partOptions;\n        this.redrawTabLabel(editor, index, tabContainer, tabLabelWidget, tabLabel);\n        const tabAction = isTabSticky ? this.unpinEditorAction : this.closeEditorAction;\n        if (!tabActionBar.hasAction(tabAction)) {\n            if (!tabActionBar.isEmpty()) {\n                tabActionBar.clear();\n            }\n            tabActionBar.push(tabAction, { icon: true, label: false, keybinding: this.getKeybindingLabel(tabAction) });\n        }\n        const tabActionsVisibility = isTabSticky && options.pinnedTabSizing === 'compact' ? 'off'  : options.tabCloseButton;\n        for (const option of ['off', 'left', 'right']) {\n            tabContainer.classList.toggle(`tab-actions-${option}`, tabActionsVisibility === option);\n        }\n        const tabSizing = isTabSticky && options.pinnedTabSizing === 'shrink' ? 'shrink'  : options.tabSizing;\n        for (const option of ['fit', 'shrink', 'fixed']) {\n            tabContainer.classList.toggle(`sizing-${option}`, tabSizing === option);\n        }\n        tabContainer.classList.toggle('has-icon', options.showIcons && options.hasIcons);\n        tabContainer.classList.toggle('sticky', isTabSticky);\n        for (const option of ['normal', 'compact', 'shrink']) {\n            tabContainer.classList.toggle(`sticky-${option}`, isTabSticky && options.pinnedTabSizing === option);\n        }\n        if (!options.wrapTabs && isTabSticky && options.pinnedTabSizing !== 'normal') {\n            let stickyTabWidth = 0;\n            switch (options.pinnedTabSizing) {\n                case 'compact':\n                    stickyTabWidth = TabsTitleControl.TAB_WIDTH.compact;\n                    break;\n                case 'shrink':\n                    stickyTabWidth = TabsTitleControl.TAB_WIDTH.shrink;\n                    break;\n            }\n            tabContainer.style.left = `${index * stickyTabWidth}px`;\n        }\n        else {\n            tabContainer.style.left = 'auto';\n        }\n        this.redrawTabBorders(index, tabContainer);\n        this.redrawTabActiveAndDirty(this.accessor.activeGroup === this.group, editor, tabContainer, tabActionBar);\n    }\n    redrawTabLabel(editor, index, tabContainer, tabLabelWidget, tabLabel) {\n        const options = this.accessor.partOptions;\n        let name;\n        let forceLabel = false;\n        let fileDecorationBadges = Boolean(options.decorations?.badges);\n        let description;\n        if (options.pinnedTabSizing === 'compact' && this.group.isSticky(index)) {\n            const isShowingIcons = options.showIcons && options.hasIcons;\n            name = isShowingIcons ? '' : tabLabel.name?.charAt(0).toUpperCase();\n            description = '';\n            forceLabel = true;\n            fileDecorationBadges = false;\n        }\n        else {\n            name = tabLabel.name;\n            description = tabLabel.description || '';\n        }\n        if (tabLabel.ariaLabel) {\n            tabContainer.setAttribute('aria-label', tabLabel.ariaLabel);\n            tabContainer.setAttribute('aria-description', '');\n        }\n        const title = tabLabel.title || '';\n        tabContainer.title = title;\n        tabLabelWidget.setResource({ name, description, resource: EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.BOTH }) }, {\n            title,\n            extraClasses: coalesce(['tab-label', fileDecorationBadges ? 'tab-label-has-badge' : undefined].concat(editor.getLabelExtraClasses())),\n            italic: !this.group.isPinned(editor),\n            forceLabel,\n            fileDecorations: {\n                colors: Boolean(options.decorations?.colors),\n                badges: fileDecorationBadges\n            }\n        });\n        const resource = EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n        if (resource) {\n            tabContainer.setAttribute('data-resource-name', basenameOrAuthority(resource));\n        }\n        else {\n            tabContainer.removeAttribute('data-resource-name');\n        }\n    }\n    redrawTabActiveAndDirty(isGroupActive, editor, tabContainer, tabActionBar) {\n        const isTabActive = this.group.isActive(editor);\n        const hasModifiedBorderTop = this.doRedrawTabDirty(isGroupActive, isTabActive, editor, tabContainer);\n        this.doRedrawTabActive(isGroupActive, !hasModifiedBorderTop, editor, tabContainer, tabActionBar);\n    }\n    doRedrawTabActive(isGroupActive, allowBorderTop, editor, tabContainer, tabActionBar) {\n        if (this.group.isActive(editor)) {\n            tabContainer.classList.add('active');\n            tabContainer.setAttribute('aria-selected', 'true');\n            tabContainer.tabIndex = 0;\n            tabContainer.style.backgroundColor = this.getColor(isGroupActive ? TAB_ACTIVE_BACKGROUND : TAB_UNFOCUSED_ACTIVE_BACKGROUND) || '';\n            const activeTabBorderColorBottom = this.getColor(isGroupActive ? TAB_ACTIVE_BORDER : TAB_UNFOCUSED_ACTIVE_BORDER);\n            if (activeTabBorderColorBottom) {\n                tabContainer.classList.add('tab-border-bottom');\n                tabContainer.style.setProperty('--tab-border-bottom-color', ( activeTabBorderColorBottom.toString()));\n            }\n            else {\n                tabContainer.classList.remove('tab-border-bottom');\n                tabContainer.style.removeProperty('--tab-border-bottom-color');\n            }\n            const activeTabBorderColorTop = allowBorderTop ? this.getColor(isGroupActive ? TAB_ACTIVE_BORDER_TOP : TAB_UNFOCUSED_ACTIVE_BORDER_TOP) : undefined;\n            if (activeTabBorderColorTop) {\n                tabContainer.classList.add('tab-border-top');\n                tabContainer.style.setProperty('--tab-border-top-color', ( activeTabBorderColorTop.toString()));\n            }\n            else {\n                tabContainer.classList.remove('tab-border-top');\n                tabContainer.style.removeProperty('--tab-border-top-color');\n            }\n            tabContainer.style.color = this.getColor(isGroupActive ? TAB_ACTIVE_FOREGROUND : TAB_UNFOCUSED_ACTIVE_FOREGROUND) || '';\n            tabActionBar.setFocusable(true);\n        }\n        else {\n            tabContainer.classList.remove('active');\n            tabContainer.setAttribute('aria-selected', 'false');\n            tabContainer.tabIndex = -1;\n            tabContainer.style.backgroundColor = this.getColor(isGroupActive ? TAB_INACTIVE_BACKGROUND : TAB_UNFOCUSED_INACTIVE_BACKGROUND) || '';\n            tabContainer.style.boxShadow = '';\n            tabContainer.style.color = this.getColor(isGroupActive ? TAB_INACTIVE_FOREGROUND : TAB_UNFOCUSED_INACTIVE_FOREGROUND) || '';\n            tabActionBar.setFocusable(false);\n        }\n    }\n    doRedrawTabDirty(isGroupActive, isTabActive, editor, tabContainer) {\n        let hasModifiedBorderColor = false;\n        if (editor.isDirty() && !editor.isSaving()) {\n            tabContainer.classList.add('dirty');\n            if (this.accessor.partOptions.highlightModifiedTabs) {\n                let modifiedBorderColor;\n                if (isGroupActive && isTabActive) {\n                    modifiedBorderColor = this.getColor(TAB_ACTIVE_MODIFIED_BORDER);\n                }\n                else if (isGroupActive && !isTabActive) {\n                    modifiedBorderColor = this.getColor(TAB_INACTIVE_MODIFIED_BORDER);\n                }\n                else if (!isGroupActive && isTabActive) {\n                    modifiedBorderColor = this.getColor(TAB_UNFOCUSED_ACTIVE_MODIFIED_BORDER);\n                }\n                else {\n                    modifiedBorderColor = this.getColor(TAB_UNFOCUSED_INACTIVE_MODIFIED_BORDER);\n                }\n                if (modifiedBorderColor) {\n                    hasModifiedBorderColor = true;\n                    tabContainer.classList.add('dirty-border-top');\n                    tabContainer.style.setProperty('--tab-dirty-border-top-color', modifiedBorderColor);\n                }\n            }\n            else {\n                tabContainer.classList.remove('dirty-border-top');\n                tabContainer.style.removeProperty('--tab-dirty-border-top-color');\n            }\n        }\n        else {\n            tabContainer.classList.remove('dirty', 'dirty-border-top');\n            tabContainer.style.removeProperty('--tab-dirty-border-top-color');\n        }\n        return hasModifiedBorderColor;\n    }\n    redrawTabBorders(index, tabContainer) {\n        const isTabSticky = this.group.isSticky(index);\n        const isTabLastSticky = isTabSticky && this.group.stickyCount === index + 1;\n        const borderRightColor = ((isTabLastSticky ? this.getColor(TAB_LAST_PINNED_BORDER) : undefined) || this.getColor(TAB_BORDER) || this.getColor(contrastBorder));\n        tabContainer.style.borderRight = borderRightColor ? `1px solid ${borderRightColor}` : '';\n        tabContainer.style.outlineColor = this.getColor(activeContrastBorder) || '';\n    }\n    prepareEditorActions(editorActions) {\n        const isGroupActive = this.accessor.activeGroup === this.group;\n        if (isGroupActive) {\n            return editorActions;\n        }\n        else {\n            return {\n                primary: editorActions.primary.filter(action => action.id === UNLOCK_GROUP_COMMAND_ID),\n                secondary: editorActions.secondary\n            };\n        }\n    }\n    getHeight() {\n        const showsBreadcrumbs = this.breadcrumbsControl && !this.breadcrumbsControl.isHidden();\n        if (this.dimensions.used) {\n            return {\n                total: this.dimensions.used.height,\n                offset: showsBreadcrumbs ? this.dimensions.used.height - BreadcrumbsControl.HEIGHT : this.dimensions.used.height\n            };\n        }\n        else {\n            return this.computeHeight();\n        }\n    }\n    computeHeight() {\n        let total;\n        if (this.accessor.partOptions.wrapTabs && this.tabsAndActionsContainer?.classList.contains('wrapping')) {\n            total = this.tabsAndActionsContainer.offsetHeight;\n        }\n        else {\n            total = TabsTitleControl.TAB_HEIGHT;\n        }\n        const offset = total;\n        if (this.breadcrumbsControl && !this.breadcrumbsControl.isHidden()) {\n            total += BreadcrumbsControl.HEIGHT;\n        }\n        return { total, offset };\n    }\n    layout(dimensions, options) {\n        Object.assign(this.dimensions, dimensions);\n        if (!this.layoutScheduler.value) {\n            const scheduledLayout = scheduleAtNextAnimationFrame(() => {\n                this.doLayout(this.dimensions, this.layoutScheduler.value?.options );\n                this.layoutScheduler.clear();\n            });\n            this.layoutScheduler.value = { options, dispose: () => scheduledLayout.dispose() };\n        }\n        if (options?.forceRevealActiveTab) {\n            this.layoutScheduler.value.options = {\n                ...this.layoutScheduler.value.options,\n                forceRevealActiveTab: true\n            };\n        }\n        if (!this.dimensions.used) {\n            this.dimensions.used = ( new Dimension(dimensions.container.width, this.computeHeight().total));\n        }\n        return this.dimensions.used;\n    }\n    doLayout(dimensions, options) {\n        const activeTabAndIndex = this.group.activeEditor ? this.getTabAndIndex(this.group.activeEditor) : undefined;\n        if (activeTabAndIndex && dimensions.container !== Dimension.None && dimensions.available !== Dimension.None) {\n            this.doLayoutBreadcrumbs(dimensions);\n            const [activeTab, activeIndex] = activeTabAndIndex;\n            this.doLayoutTabs(activeTab, activeIndex, dimensions, options);\n        }\n        const oldDimension = this.dimensions.used;\n        const newDimension = this.dimensions.used = ( new Dimension(dimensions.container.width, this.computeHeight().total));\n        if (oldDimension && oldDimension.height !== newDimension.height) {\n            this.group.relayout();\n        }\n    }\n    handleBreadcrumbsEnablementChange() {\n        this.group.relayout();\n    }\n    doLayoutBreadcrumbs(dimensions) {\n        if (this.breadcrumbsControl && !this.breadcrumbsControl.isHidden()) {\n            this.breadcrumbsControl.layout(( new Dimension(dimensions.container.width, BreadcrumbsControl.HEIGHT)));\n        }\n    }\n    doLayoutTabs(activeTab, activeIndex, dimensions, options) {\n        const tabsWrapMultiLine = this.doLayoutTabsWrapping(dimensions);\n        if (!tabsWrapMultiLine) {\n            this.doLayoutTabsNonWrapping(activeTab, activeIndex, options);\n        }\n    }\n    doLayoutTabsWrapping(dimensions) {\n        const [tabsAndActionsContainer, tabsContainer, editorToolbarContainer, tabsScrollbar] = assertAllDefined(this.tabsAndActionsContainer, this.tabsContainer, this.editorToolbarContainer, this.tabsScrollbar);\n        const didTabsWrapMultiLine = tabsAndActionsContainer.classList.contains('wrapping');\n        let tabsWrapMultiLine = didTabsWrapMultiLine;\n        function updateTabsWrapping(enabled) {\n            tabsWrapMultiLine = enabled;\n            tabsAndActionsContainer.classList.toggle('wrapping', tabsWrapMultiLine);\n            tabsContainer.style.setProperty('--last-tab-margin-right', tabsWrapMultiLine ? `${editorToolbarContainer.offsetWidth}px` : '0');\n        }\n        if (this.accessor.partOptions.wrapTabs) {\n            const visibleTabsWidth = tabsContainer.offsetWidth;\n            const allTabsWidth = tabsContainer.scrollWidth;\n            const lastTabFitsWrapped = () => {\n                const lastTab = this.getLastTab();\n                if (!lastTab) {\n                    return true;\n                }\n                const lastTabOverlapWithToolbarWidth = lastTab.offsetWidth + editorToolbarContainer.offsetWidth - dimensions.available.width;\n                if (lastTabOverlapWithToolbarWidth > 1) {\n                    return false;\n                }\n                return true;\n            };\n            if (tabsWrapMultiLine || (allTabsWidth > visibleTabsWidth && lastTabFitsWrapped())) {\n                updateTabsWrapping(true);\n            }\n            if (tabsWrapMultiLine) {\n                if ((tabsContainer.offsetHeight > dimensions.available.height) ||\n                    (allTabsWidth === visibleTabsWidth && tabsContainer.offsetHeight === TabsTitleControl.TAB_HEIGHT) ||\n                    (!lastTabFitsWrapped())\n                ) {\n                    updateTabsWrapping(false);\n                }\n            }\n        }\n        else if (didTabsWrapMultiLine) {\n            updateTabsWrapping(false);\n        }\n        if (tabsWrapMultiLine && !didTabsWrapMultiLine) {\n            const visibleTabsWidth = tabsContainer.offsetWidth;\n            tabsScrollbar.setScrollDimensions({\n                width: visibleTabsWidth,\n                scrollWidth: visibleTabsWidth\n            });\n        }\n        if (tabsWrapMultiLine) {\n            const tabs = ( new Map());\n            let currentTabsPosY = undefined;\n            let lastTab = undefined;\n            for (const child of tabsContainer.children) {\n                const tab = child;\n                const tabPosY = tab.offsetTop;\n                if (tabPosY !== currentTabsPosY) {\n                    currentTabsPosY = tabPosY;\n                    if (lastTab) {\n                        tabs.set(lastTab, true);\n                    }\n                }\n                lastTab = tab;\n                tabs.set(tab, false);\n            }\n            if (lastTab) {\n                tabs.set(lastTab, true);\n            }\n            for (const [tab, lastInRow] of tabs) {\n                tab.classList.toggle('last-in-row', lastInRow);\n            }\n        }\n        return tabsWrapMultiLine;\n    }\n    doLayoutTabsNonWrapping(activeTab, activeIndex, options) {\n        const [tabsContainer, tabsScrollbar] = assertAllDefined(this.tabsContainer, this.tabsScrollbar);\n        const visibleTabsWidth = tabsContainer.offsetWidth;\n        const allTabsWidth = tabsContainer.scrollWidth;\n        let stickyTabsWidth = 0;\n        if (this.group.stickyCount > 0) {\n            let stickyTabWidth = 0;\n            switch (this.accessor.partOptions.pinnedTabSizing) {\n                case 'compact':\n                    stickyTabWidth = TabsTitleControl.TAB_WIDTH.compact;\n                    break;\n                case 'shrink':\n                    stickyTabWidth = TabsTitleControl.TAB_WIDTH.shrink;\n                    break;\n            }\n            stickyTabsWidth = this.group.stickyCount * stickyTabWidth;\n        }\n        let activeTabPositionStatic = this.accessor.partOptions.pinnedTabSizing !== 'normal' && this.group.isSticky(activeIndex);\n        let availableTabsContainerWidth = visibleTabsWidth - stickyTabsWidth;\n        if (this.group.stickyCount > 0 && availableTabsContainerWidth < TabsTitleControl.TAB_WIDTH.fit) {\n            tabsContainer.classList.add('disable-sticky-tabs');\n            availableTabsContainerWidth = visibleTabsWidth;\n            stickyTabsWidth = 0;\n            activeTabPositionStatic = false;\n        }\n        else {\n            tabsContainer.classList.remove('disable-sticky-tabs');\n        }\n        let activeTabPosX;\n        let activeTabWidth;\n        if (!this.blockRevealActiveTab) {\n            activeTabPosX = activeTab.offsetLeft;\n            activeTabWidth = activeTab.offsetWidth;\n        }\n        const { width: oldVisibleTabsWidth, scrollWidth: oldAllTabsWidth } = tabsScrollbar.getScrollDimensions();\n        tabsScrollbar.setScrollDimensions({\n            width: visibleTabsWidth,\n            scrollWidth: allTabsWidth\n        });\n        const dimensionsChanged = oldVisibleTabsWidth !== visibleTabsWidth || oldAllTabsWidth !== allTabsWidth;\n        if (this.blockRevealActiveTab ||\n            typeof activeTabPosX !== 'number' ||\n            typeof activeTabWidth !== 'number' ||\n            activeTabPositionStatic ||\n            (!dimensionsChanged && !options?.forceRevealActiveTab)\n        ) {\n            this.blockRevealActiveTab = false;\n            return;\n        }\n        const tabsContainerScrollPosX = tabsScrollbar.getScrollPosition().scrollLeft;\n        const activeTabFits = activeTabWidth <= availableTabsContainerWidth;\n        const adjustedActiveTabPosX = activeTabPosX - stickyTabsWidth;\n        if (activeTabFits && tabsContainerScrollPosX + availableTabsContainerWidth < adjustedActiveTabPosX + activeTabWidth) {\n            tabsScrollbar.setScrollPosition({\n                scrollLeft: tabsContainerScrollPosX + (((adjustedActiveTabPosX + activeTabWidth)  - (tabsContainerScrollPosX + availableTabsContainerWidth)) )\n            });\n        }\n        else if (tabsContainerScrollPosX > adjustedActiveTabPosX || !activeTabFits) {\n            tabsScrollbar.setScrollPosition({\n                scrollLeft: adjustedActiveTabPosX\n            });\n        }\n    }\n    getTabAndIndex(editor) {\n        const editorIndex = this.group.getIndexOfEditor(editor);\n        const tab = this.getTabAtIndex(editorIndex);\n        if (tab) {\n            return [tab, editorIndex];\n        }\n        return undefined;\n    }\n    getTabAtIndex(editorIndex) {\n        if (editorIndex >= 0) {\n            const tabsContainer = assertIsDefined(this.tabsContainer);\n            return tabsContainer.children[editorIndex];\n        }\n        return undefined;\n    }\n    getLastTab() {\n        return this.getTabAtIndex(this.group.count - 1);\n    }\n    blockRevealActiveTabOnce() {\n        this.blockRevealActiveTab = true;\n    }\n    originatesFromTabActionBar(e) {\n        let element;\n        if (e instanceof MouseEvent) {\n            element = (e.target || e.srcElement);\n        }\n        else {\n            element = e.initialTarget;\n        }\n        return !!findParentWithClass(element, 'action-item', 'tab');\n    }\n    async onDrop(e, targetIndex, tabsContainer) {\n        EventHelper.stop(e, true);\n        this.updateDropFeedback(tabsContainer, false);\n        tabsContainer.classList.remove('scroll');\n        if (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n            const data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n            if (Array.isArray(data)) {\n                const sourceGroup = this.accessor.getGroup(data[0].identifier);\n                if (sourceGroup) {\n                    const mergeGroupOptions = { index: targetIndex };\n                    if (!this.isMoveOperation(e, sourceGroup.id)) {\n                        mergeGroupOptions.mode = 0 ;\n                    }\n                    this.accessor.mergeGroup(sourceGroup, this.group, mergeGroupOptions);\n                }\n                this.group.focus();\n                this.groupTransfer.clearData(DraggedEditorGroupIdentifier.prototype);\n            }\n        }\n        else if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n            const data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n            if (Array.isArray(data)) {\n                const draggedEditor = data[0].identifier;\n                const sourceGroup = this.accessor.getGroup(draggedEditor.groupId);\n                if (sourceGroup) {\n                    if (this.isMoveOperation(e, draggedEditor.groupId, draggedEditor.editor)) {\n                        sourceGroup.moveEditor(draggedEditor.editor, this.group, { index: targetIndex });\n                    }\n                    else {\n                        sourceGroup.copyEditor(draggedEditor.editor, this.group, { index: targetIndex });\n                    }\n                }\n                this.group.focus();\n                this.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n            }\n        }\n        else if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n            const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n            if (Array.isArray(data)) {\n                const editors = [];\n                for (const id of data) {\n                    const dataTransferItem = await this.treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n                    if (dataTransferItem) {\n                        const treeDropData = await extractTreeDropData(dataTransferItem);\n                        editors.push(...( treeDropData.map(\n                            editor => ({ ...editor, options: { ...editor.options, pinned: true, index: targetIndex } })\n                        )));\n                    }\n                }\n                this.editorService.openEditors(editors, this.group, { validateTrust: true });\n            }\n            this.treeItemsTransfer.clearData(DraggedTreeItemsIdentifier.prototype);\n        }\n        else {\n            const dropHandler = this.instantiationService.createInstance(ResourcesDropHandler, { allowWorkspaceOpen: false });\n            dropHandler.handleDrop(e, () => this.group, () => this.group.focus(), targetIndex);\n        }\n    }\n    isMoveOperation(e, sourceGroup, sourceEditor) {\n        if (sourceEditor?.hasCapability(8 )) {\n            return true;\n        }\n        const isCopy = (e.ctrlKey && !isMacintosh) || (e.altKey && isMacintosh);\n        return !isCopy || sourceGroup === this.group.id;\n    }\n    dispose() {\n        super.dispose();\n        this.tabDisposables = dispose(this.tabDisposables);\n    }\n};\nTabsTitleControl = ( __decorate([\n    ( __param(3, IContextMenuService)),\n    ( __param(4, IInstantiationService)),\n    ( __param(5, IContextKeyService)),\n    ( __param(6, IKeybindingService)),\n    ( __param(7, INotificationService)),\n    ( __param(8, IMenuService)),\n    ( __param(9, IQuickInputService)),\n    ( __param(10, IThemeService)),\n    ( __param(11, IConfigurationService)),\n    ( __param(12, IFileService)),\n    ( __param(13, IEditorService)),\n    ( __param(14, IPathService)),\n    ( __param(15, IEditorGroupsService)),\n    ( __param(16, ITreeViewsDnDService)),\n    ( __param(17, IEditorResolverService))\n], TabsTitleControl));\nregisterThemingParticipant((theme, collector) => {\n    const borderColor = theme.getColor(TAB_BORDER);\n    if (borderColor) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title > .tabs-and-actions-container.wrapping .tabs-container > .tab {\n\t\t\t\tborder-bottom: 1px solid ${borderColor};\n\t\t\t}\n\t\t`);\n    }\n    const activeContrastBorderColor = theme.getColor(activeContrastBorder);\n    if (activeContrastBorderColor) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:hover  {\n\t\t\t\toutline: 1px solid;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active {\n\t\t\t\toutline: 1px dotted;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\toutline: 1px dashed;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.dirty > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.sticky > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-actions .action-label {\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`);\n    }\n    const contrastBorderColor = theme.getColor(contrastBorder);\n    if (contrastBorderColor) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .editor-actions {\n\t\t\t\toutline: 1px solid ${contrastBorderColor}\n\t\t\t}\n\t\t`);\n    }\n    const tabHoverBackground = theme.getColor(TAB_HOVER_BACKGROUND);\n    if (tabHoverBackground) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover  {\n\t\t\t\tbackground-color: ${tabHoverBackground} !important;\n\t\t\t}\n\t\t`);\n    }\n    const tabUnfocusedHoverBackground = theme.getColor(TAB_UNFOCUSED_HOVER_BACKGROUND);\n    if (tabUnfocusedHoverBackground) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\tbackground-color: ${tabUnfocusedHoverBackground} !important;\n\t\t\t}\n\t\t`);\n    }\n    const tabHoverForeground = theme.getColor(TAB_HOVER_FOREGROUND);\n    if (tabHoverForeground) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover  {\n\t\t\t\tcolor: ${tabHoverForeground} !important;\n\t\t\t}\n\t\t`);\n    }\n    const tabUnfocusedHoverForeground = theme.getColor(TAB_UNFOCUSED_HOVER_FOREGROUND);\n    if (tabUnfocusedHoverForeground) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\tcolor: ${tabUnfocusedHoverForeground} !important;\n\t\t\t}\n\t\t`);\n    }\n    const tabHoverBorder = theme.getColor(TAB_HOVER_BORDER);\n    if (tabHoverBorder) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover > .tab-border-bottom-container {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${tabHoverBorder};\n\t\t\t}\n\t\t`);\n    }\n    const tabUnfocusedHoverBorder = theme.getColor(TAB_UNFOCUSED_HOVER_BORDER);\n    if (tabUnfocusedHoverBorder) {\n        collector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-border-bottom-container  {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${tabUnfocusedHoverBorder};\n\t\t\t}\n\t\t`);\n    }\n    if (!isHighContrast(theme.type) && !isSafari && !activeContrastBorderColor) {\n        const workbenchBackground = WORKBENCH_BACKGROUND(theme);\n        const editorBackgroundColor = theme.getColor(editorBackground);\n        const editorGroupHeaderTabsBackground = theme.getColor(EDITOR_GROUP_HEADER_TABS_BACKGROUND);\n        const editorDragAndDropBackground = theme.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND);\n        let adjustedTabBackground;\n        if (editorGroupHeaderTabsBackground && editorBackgroundColor) {\n            adjustedTabBackground = editorGroupHeaderTabsBackground.flatten(editorBackgroundColor, editorBackgroundColor, workbenchBackground);\n        }\n        let adjustedTabDragBackground;\n        if (editorGroupHeaderTabsBackground && editorBackgroundColor && editorDragAndDropBackground && editorBackgroundColor) {\n            adjustedTabDragBackground = editorGroupHeaderTabsBackground.flatten(editorBackgroundColor, editorDragAndDropBackground, editorBackgroundColor, workbenchBackground);\n        }\n        const makeTabHoverBackgroundRule = (color, colorDrag, hasFocus = false) => `\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${color}, transparent) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${colorDrag}, transparent) !important;\n\t\t\t}\n\t\t`;\n        if (tabHoverBackground && adjustedTabBackground && adjustedTabDragBackground) {\n            const adjustedColor = tabHoverBackground.flatten(adjustedTabBackground);\n            const adjustedColorDrag = tabHoverBackground.flatten(adjustedTabDragBackground);\n            collector.addRule(makeTabHoverBackgroundRule(adjustedColor, adjustedColorDrag, true));\n        }\n        if (tabUnfocusedHoverBackground && adjustedTabBackground && adjustedTabDragBackground) {\n            const adjustedColor = tabUnfocusedHoverBackground.flatten(adjustedTabBackground);\n            const adjustedColorDrag = tabUnfocusedHoverBackground.flatten(adjustedTabDragBackground);\n            collector.addRule(makeTabHoverBackgroundRule(adjustedColor, adjustedColorDrag));\n        }\n        if (editorDragAndDropBackground && adjustedTabDragBackground) {\n            const adjustedColorDrag = editorDragAndDropBackground.flatten(adjustedTabDragBackground);\n            collector.addRule(`\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${adjustedColorDrag}, transparent) !important;\n\t\t\t\t}\n\t\t`);\n        }\n        const makeTabBackgroundRule = (color, colorDrag, focused, active) => `\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-shrink${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-fixed${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${color}, transparent);\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-shrink${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-fixed${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${colorDrag}, transparent);\n\t\t\t\t}\n\t\t`;\n        const tabActiveBackground = theme.getColor(TAB_ACTIVE_BACKGROUND);\n        if (tabActiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n            const adjustedColor = tabActiveBackground.flatten(adjustedTabBackground);\n            const adjustedColorDrag = tabActiveBackground.flatten(adjustedTabDragBackground);\n            collector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, true, true));\n        }\n        const tabUnfocusedActiveBackground = theme.getColor(TAB_UNFOCUSED_ACTIVE_BACKGROUND);\n        if (tabUnfocusedActiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n            const adjustedColor = tabUnfocusedActiveBackground.flatten(adjustedTabBackground);\n            const adjustedColorDrag = tabUnfocusedActiveBackground.flatten(adjustedTabDragBackground);\n            collector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, false, true));\n        }\n        const tabInactiveBackground = theme.getColor(TAB_INACTIVE_BACKGROUND);\n        if (tabInactiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n            const adjustedColor = tabInactiveBackground.flatten(adjustedTabBackground);\n            const adjustedColorDrag = tabInactiveBackground.flatten(adjustedTabDragBackground);\n            collector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, true, false));\n        }\n        const tabUnfocusedInactiveBackground = theme.getColor(TAB_UNFOCUSED_INACTIVE_BACKGROUND);\n        if (tabUnfocusedInactiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n            const adjustedColor = tabUnfocusedInactiveBackground.flatten(adjustedTabBackground);\n            const adjustedColorDrag = tabUnfocusedInactiveBackground.flatten(adjustedTabDragBackground);\n            collector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, false, false));\n        }\n    }\n});\nexport { TabsTitleControl };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport Severity from 'monaco-editor/esm/vs/base/common/severity.js';\nimport { Disposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { EditorExtensions, isEditorOpenError } from '../../../common/editor.js';\nimport { isAncestor, show, Dimension, hide } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { LongRunningOperation, IEditorProgressService } from 'monaco-editor/esm/vs/platform/progress/common/progress.js';\nimport { DEFAULT_EDITOR_MIN_DIMENSIONS, DEFAULT_EDITOR_MAX_DIMENSIONS } from './editor.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IWorkspaceTrustManagementService } from 'monaco-editor/esm/vs/platform/workspace/common/workspaceTrust.js';\nimport { ErrorPlaceholderEditor, WorkspaceTrustRequiredPlaceholderEditor } from './editorPlaceholder.js';\nimport { EditorOpenSource } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport { isCancellationError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { toErrorMessage } from 'monaco-editor/esm/vs/base/common/errorMessage.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport '../../../../../../override/vs/platform/dialogs/common/dialogs.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nlet EditorPanes = class EditorPanes extends Disposable {\n    get minimumWidth() { return this._activeEditorPane?.minimumWidth ?? DEFAULT_EDITOR_MIN_DIMENSIONS.width; }\n    get minimumHeight() { return this._activeEditorPane?.minimumHeight ?? DEFAULT_EDITOR_MIN_DIMENSIONS.height; }\n    get maximumWidth() { return this._activeEditorPane?.maximumWidth ?? DEFAULT_EDITOR_MAX_DIMENSIONS.width; }\n    get maximumHeight() { return this._activeEditorPane?.maximumHeight ?? DEFAULT_EDITOR_MAX_DIMENSIONS.height; }\n    get activeEditorPane() { return this._activeEditorPane; }\n    constructor(editorGroupParent, editorPanesParent, groupView, layoutService, instantiationService, editorProgressService, workspaceTrustService, logService, dialogService) {\n        super();\n        this.editorGroupParent = editorGroupParent;\n        this.editorPanesParent = editorPanesParent;\n        this.groupView = groupView;\n        this.layoutService = layoutService;\n        this.instantiationService = instantiationService;\n        this.editorProgressService = editorProgressService;\n        this.workspaceTrustService = workspaceTrustService;\n        this.logService = logService;\n        this.dialogService = dialogService;\n        this._onDidFocus = this._register(( new Emitter()));\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidChangeSizeConstraints = this._register(( new Emitter()));\n        this.onDidChangeSizeConstraints = this._onDidChangeSizeConstraints.event;\n        this._activeEditorPane = null;\n        this.editorPanes = [];\n        this.activeEditorPaneDisposables = this._register(( new DisposableStore()));\n        this.editorOperation = this._register(( new LongRunningOperation(this.editorProgressService)));\n        this.editorPanesRegistry = ( Registry.as(EditorExtensions.EditorPane));\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.workspaceTrustService.onDidChangeTrust(() => this.onDidChangeWorkspaceTrust()));\n    }\n    onDidChangeWorkspaceTrust() {\n        const editor = this._activeEditorPane?.input;\n        const options = this._activeEditorPane?.options;\n        if (editor?.hasCapability(16 )) {\n            this.groupView.openEditor(editor, options);\n        }\n    }\n    async openEditor(editor, options, context = Object.create(null)) {\n        try {\n            return await this.doOpenEditor(this.getEditorPaneDescriptor(editor), editor, options, context);\n        }\n        catch (error) {\n            if (options?.ignoreError) {\n                return { error };\n            }\n            return this.doShowError(error, editor, options, context);\n        }\n    }\n    async doShowError(error, editor, options, context) {\n        this.logService.error(error);\n        let errorHandled = false;\n        if (options?.source === EditorOpenSource.USER && (!isEditorOpenError(error) || error.allowDialog)) {\n            errorHandled = await this.doShowErrorDialog(error, editor);\n        }\n        if (errorHandled) {\n            return { error };\n        }\n        const editorPlaceholderOptions = { ...options };\n        if (!isCancellationError(error)) {\n            editorPlaceholderOptions.error = error;\n        }\n        return {\n            ...(await this.doOpenEditor(ErrorPlaceholderEditor.DESCRIPTOR, editor, editorPlaceholderOptions, context)),\n            error\n        };\n    }\n    async doShowErrorDialog(error, editor) {\n        let severity = Severity.Error;\n        let message = undefined;\n        let detail = toErrorMessage(error);\n        let errorActions = undefined;\n        if (isEditorOpenError(error)) {\n            errorActions = error.actions;\n            severity = error.forceSeverity ?? Severity.Error;\n            if (error.forceMessage) {\n                message = error.message;\n                detail = undefined;\n            }\n        }\n        if (!message) {\n            message = ( localize('editorOpenErrorDialog', \"Unable to open '{0}'\", editor.getName()));\n        }\n        const buttons = [];\n        if (errorActions && errorActions.length > 0) {\n            for (const errorAction of errorActions) {\n                buttons.push({\n                    label: errorAction.label,\n                    run: () => errorAction\n                });\n            }\n        }\n        else {\n            buttons.push({\n                label: ( localize({ key: 'ok', comment: ['&& denotes a mnemonic'] }, \"&&OK\")),\n                run: () => undefined\n            });\n        }\n        let cancelButton = undefined;\n        if (buttons.length === 1) {\n            cancelButton = {\n                run: () => {\n                    errorHandled = true;\n                    return undefined;\n                }\n            };\n        }\n        let errorHandled = false;\n        const { result } = await this.dialogService.prompt({\n            type: severity,\n            message,\n            detail,\n            buttons,\n            cancelButton\n        });\n        if (result) {\n            const errorActionResult = result.run();\n            if (errorActionResult instanceof Promise) {\n                errorActionResult.catch(error => this.dialogService.error(toErrorMessage(error)));\n            }\n            errorHandled = true;\n        }\n        return errorHandled;\n    }\n    async doOpenEditor(descriptor, editor, options, context = Object.create(null)) {\n        const pane = this.doShowEditorPane(descriptor);\n        const activeElement = document.activeElement;\n        const { changed, cancelled } = await this.doSetInput(pane, editor, options, context);\n        const focus = !options || !options.preserveFocus;\n        if (!cancelled && focus && this.shouldRestoreFocus(activeElement)) {\n            pane.focus();\n        }\n        return { pane, changed, cancelled };\n    }\n    shouldRestoreFocus(expectedActiveElement) {\n        if (!this.layoutService.isRestored()) {\n            return true;\n        }\n        if (!expectedActiveElement) {\n            return true;\n        }\n        const activeElement = document.activeElement;\n        if (!activeElement || activeElement === document.body) {\n            return true;\n        }\n        const same = expectedActiveElement === activeElement;\n        if (same) {\n            return true;\n        }\n        if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA') {\n            return true;\n        }\n        if (isAncestor(activeElement, this.editorGroupParent)) {\n            return true;\n        }\n        return false;\n    }\n    getEditorPaneDescriptor(editor) {\n        if (editor.hasCapability(16 ) && !this.workspaceTrustService.isWorkspaceTrusted()) {\n            return WorkspaceTrustRequiredPlaceholderEditor.DESCRIPTOR;\n        }\n        return assertIsDefined(this.editorPanesRegistry.getEditorPane(editor));\n    }\n    doShowEditorPane(descriptor) {\n        if (this._activeEditorPane && descriptor.describes(this._activeEditorPane)) {\n            return this._activeEditorPane;\n        }\n        this.doHideActiveEditorPane();\n        const editorPane = this.doCreateEditorPane(descriptor);\n        this.doSetActiveEditorPane(editorPane);\n        const container = assertIsDefined(editorPane.getContainer());\n        this.editorPanesParent.appendChild(container);\n        show(container);\n        editorPane.setVisible(true, this.groupView);\n        if (this.pagePosition) {\n            editorPane.layout(( new Dimension(this.pagePosition.width, this.pagePosition.height)), { top: this.pagePosition.top, left: this.pagePosition.left });\n        }\n        if (this.boundarySashes) {\n            editorPane.setBoundarySashes(this.boundarySashes);\n        }\n        return editorPane;\n    }\n    doCreateEditorPane(descriptor) {\n        const editorPane = this.doInstantiateEditorPane(descriptor);\n        if (!editorPane.getContainer()) {\n            const editorPaneContainer = document.createElement('div');\n            editorPaneContainer.classList.add('editor-instance');\n            editorPane.create(editorPaneContainer);\n        }\n        return editorPane;\n    }\n    doInstantiateEditorPane(descriptor) {\n        const existingEditorPane = this.editorPanes.find(editorPane => descriptor.describes(editorPane));\n        if (existingEditorPane) {\n            return existingEditorPane;\n        }\n        const editorPane = this._register(descriptor.instantiate(this.instantiationService));\n        this.editorPanes.push(editorPane);\n        return editorPane;\n    }\n    doSetActiveEditorPane(editorPane) {\n        this._activeEditorPane = editorPane;\n        this.activeEditorPaneDisposables.clear();\n        if (editorPane) {\n            this.activeEditorPaneDisposables.add(editorPane.onDidChangeSizeConstraints(e => this._onDidChangeSizeConstraints.fire(e)));\n            this.activeEditorPaneDisposables.add(editorPane.onDidFocus(() => this._onDidFocus.fire()));\n        }\n        this._onDidChangeSizeConstraints.fire(undefined);\n    }\n    async doSetInput(editorPane, editor, options, context) {\n        const inputMatches = editorPane.input?.matches(editor);\n        if (inputMatches && !options?.forceReload) {\n            editorPane.setOptions(options);\n            return { changed: false, cancelled: false };\n        }\n        const operation = this.editorOperation.start(this.layoutService.isRestored() ? 800 : 3200);\n        let cancelled = false;\n        try {\n            editorPane.clearInput();\n            await editorPane.setInput(editor, options, context, operation.token);\n            if (!operation.isCurrent()) {\n                cancelled = true;\n            }\n        }\n        catch (error) {\n            if (!operation.isCurrent()) {\n                cancelled = true;\n            }\n            else {\n                throw error;\n            }\n        }\n        finally {\n            operation.stop();\n        }\n        return { changed: !inputMatches, cancelled };\n    }\n    doHideActiveEditorPane() {\n        if (!this._activeEditorPane) {\n            return;\n        }\n        this.editorOperation.stop();\n        this.safeRun(() => this._activeEditorPane?.clearInput());\n        this.safeRun(() => this._activeEditorPane?.setVisible(false, this.groupView));\n        const editorPaneContainer = this._activeEditorPane.getContainer();\n        if (editorPaneContainer) {\n            this.editorPanesParent.removeChild(editorPaneContainer);\n            hide(editorPaneContainer);\n        }\n        this.doSetActiveEditorPane(null);\n    }\n    closeEditor(editor) {\n        if (this._activeEditorPane?.input && editor.matches(this._activeEditorPane.input)) {\n            this.doHideActiveEditorPane();\n        }\n    }\n    setVisible(visible) {\n        this.safeRun(() => this._activeEditorPane?.setVisible(visible, this.groupView));\n    }\n    layout(pagePosition) {\n        this.pagePosition = pagePosition;\n        this.safeRun(() => this._activeEditorPane?.layout(( new Dimension(pagePosition.width, pagePosition.height)), pagePosition));\n    }\n    setBoundarySashes(sashes) {\n        this.boundarySashes = sashes;\n        this.safeRun(() => this._activeEditorPane?.setBoundarySashes(sashes));\n    }\n    safeRun(fn) {\n        try {\n            fn();\n        }\n        catch (error) {\n            this.logService.error(error);\n        }\n    }\n};\nEditorPanes = ( __decorate([\n    ( __param(3, IWorkbenchLayoutService)),\n    ( __param(4, IInstantiationService)),\n    ( __param(5, IEditorProgressService)),\n    ( __param(6, IWorkspaceTrustManagementService)),\n    ( __param(7, ILogService)),\n    ( __param(8, IDialogService))\n], EditorPanes));\nexport { EditorPanes };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container{align-items:center;display:flex;flex:auto;height:35px;justify-content:flex-start;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label{line-height:35px;overflow:hidden;padding-left:20px;position:relative;text-overflow:ellipsis}.monaco-workbench .part.editor>.content .editor-group-container>.title>.label-container>.title-label>.monaco-icon-label-container{flex:initial}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .no-tabs.title-label{flex:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control{flex:1 50%;margin-left:.45em;overflow:hidden}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item{font-size:.9em}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.preview .monaco-breadcrumb-item{font-style:italic}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:before{background-image:none;content:\\\"/\\\";height:inherit;opacity:1;width:inherit}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.backslash-path .monaco-breadcrumb-item:before{content:\\\"\\\\\\\\\\\"}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder+.monaco-breadcrumb-item:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:before,.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control.relative-path .monaco-breadcrumb-item:nth-child(2):before,.monaco-workbench.windows .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:nth-child(2):before{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item.root_folder:after{content:\\\"\\\\00a0•\\\\00a0\\\";padding:0}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item:last-child{padding-right:4px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon[class*=codicon-symbol-]{padding:0 1px}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-breadcrumb-item .codicon:last-child{display:none}.monaco-workbench .part.editor>.content .editor-group-container>.title.breadcrumbs .breadcrumbs-control .monaco-icon-label:before{height:18px;padding-right:2px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions{display:flex;flex:initial;height:35px;opacity:.5;padding-right:8px}.monaco-workbench .part.editor>.content .editor-group-container>.title>.title-actions .action-item{margin-right:4px}.monaco-workbench .part.editor>.content .editor-group-container.active>.title>.title-actions{opacity:1}\";\nn(css,{});\nexport { css, css as default };\n","import './media/notabstitlecontrol.css.js';\nimport { EditorResourceAccessor, SideBySideEditor } from '../../../common/editor.js';\nimport { TitleControl } from './titleControl.js';\nimport { ResourceLabel } from '../../labels.js';\nimport { TAB_ACTIVE_FOREGROUND, TAB_UNFOCUSED_ACTIVE_FOREGROUND } from '../../../common/theme.js';\nimport { Gesture, EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nimport { addDisposableListener, EventType, EventHelper, isAncestor, Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { CLOSE_EDITOR_COMMAND_ID, UNLOCK_GROUP_COMMAND_ID } from './editorCommands.js';\nimport { Color } from 'monaco-editor/esm/vs/base/common/color.js';\nimport { assertIsDefined, withNullAsUndefined, assertAllDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { equals } from 'monaco-editor/esm/vs/base/common/objects.js';\nimport { toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { defaultBreadcrumbsWidgetStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nclass NoTabsTitleControl extends TitleControl {\n    constructor() {\n        super(...arguments);\n        this.activeLabel = Object.create(null);\n    }\n    static { this.HEIGHT = 35; }\n    create(parent) {\n        const titleContainer = this.titleContainer = parent;\n        titleContainer.draggable = true;\n        this.registerContainerListeners(titleContainer);\n        this._register(Gesture.addTarget(titleContainer));\n        const labelContainer = document.createElement('div');\n        labelContainer.classList.add('label-container');\n        titleContainer.appendChild(labelContainer);\n        this.editorLabel = this._register(this.instantiationService.createInstance(ResourceLabel, labelContainer, undefined)).element;\n        this._register(addDisposableListener(this.editorLabel.element, EventType.CLICK, e => this.onTitleLabelClick(e)));\n        this.createBreadcrumbsControl(labelContainer, { showFileIcons: false, showSymbolIcons: true, showDecorationColors: false, widgetStyles: { ...defaultBreadcrumbsWidgetStyles, breadcrumbsBackground: ( Color.transparent.toString()) }, showPlaceholder: false });\n        titleContainer.classList.toggle('breadcrumbs', Boolean(this.breadcrumbsControl));\n        this._register(toDisposable(() => titleContainer.classList.remove('breadcrumbs')));\n        const actionsContainer = document.createElement('div');\n        actionsContainer.classList.add('title-actions');\n        titleContainer.appendChild(actionsContainer);\n        this.createEditorActionsToolBar(actionsContainer);\n    }\n    registerContainerListeners(titleContainer) {\n        this.enableGroupDragging(titleContainer);\n        this._register(addDisposableListener(titleContainer, EventType.DBLCLICK, e => this.onTitleDoubleClick(e)));\n        this._register(addDisposableListener(titleContainer, EventType.AUXCLICK, e => this.onTitleAuxClick(e)));\n        this._register(addDisposableListener(titleContainer, EventType$1.Tap, (e) => this.onTitleTap(e)));\n        for (const event of [EventType.CONTEXT_MENU, EventType$1.Contextmenu]) {\n            this._register(addDisposableListener(titleContainer, event, e => {\n                if (this.group.activeEditor) {\n                    this.onContextMenu(this.group.activeEditor, e, titleContainer);\n                }\n            }));\n        }\n    }\n    onTitleLabelClick(e) {\n        EventHelper.stop(e, false);\n        setTimeout(() => this.quickInputService.quickAccess.show());\n    }\n    onTitleDoubleClick(e) {\n        EventHelper.stop(e);\n        this.group.pinEditor();\n    }\n    onTitleAuxClick(e) {\n        if (e.button === 1  && this.group.activeEditor) {\n            EventHelper.stop(e, true );\n            this.group.closeEditor(this.group.activeEditor);\n        }\n    }\n    onTitleTap(e) {\n        const target = e.initialTarget;\n        if (!(target instanceof HTMLElement) || !this.editorLabel || !isAncestor(target, this.editorLabel.element)) {\n            return;\n        }\n        setTimeout(() => this.quickInputService.quickAccess.show(), 50);\n    }\n    openEditor(editor) {\n        this.doHandleOpenEditor();\n    }\n    openEditors(editors) {\n        this.doHandleOpenEditor();\n    }\n    doHandleOpenEditor() {\n        const activeEditorChanged = this.ifActiveEditorChanged(() => this.redraw());\n        if (!activeEditorChanged) {\n            this.ifActiveEditorPropertiesChanged(() => this.redraw());\n        }\n    }\n    beforeCloseEditor(editor) {\n    }\n    closeEditor(editor) {\n        this.ifActiveEditorChanged(() => this.redraw());\n    }\n    closeEditors(editors) {\n        this.ifActiveEditorChanged(() => this.redraw());\n    }\n    moveEditor(editor, fromIndex, targetIndex) {\n        this.ifActiveEditorChanged(() => this.redraw());\n    }\n    pinEditor(editor) {\n        this.ifEditorIsActive(editor, () => this.redraw());\n    }\n    stickEditor(editor) {\n    }\n    unstickEditor(editor) {\n    }\n    setActive(isActive) {\n        this.redraw();\n    }\n    updateEditorLabel(editor) {\n        this.ifEditorIsActive(editor, () => this.redraw());\n    }\n    updateEditorDirty(editor) {\n        this.ifEditorIsActive(editor, () => {\n            const titleContainer = assertIsDefined(this.titleContainer);\n            if (editor.isDirty() && !editor.isSaving()) {\n                titleContainer.classList.add('dirty');\n            }\n            else {\n                titleContainer.classList.remove('dirty');\n            }\n        });\n    }\n    updateOptions(oldOptions, newOptions) {\n        if (oldOptions.labelFormat !== newOptions.labelFormat || !equals(oldOptions.decorations, newOptions.decorations)) {\n            this.redraw();\n        }\n    }\n    updateStyles() {\n        this.redraw();\n    }\n    handleBreadcrumbsEnablementChange() {\n        const titleContainer = assertIsDefined(this.titleContainer);\n        titleContainer.classList.toggle('breadcrumbs', Boolean(this.breadcrumbsControl));\n        this.redraw();\n    }\n    ifActiveEditorChanged(fn) {\n        if (!this.activeLabel.editor && this.group.activeEditor ||\n            this.activeLabel.editor && !this.group.activeEditor ||\n            (!this.activeLabel.editor || !this.group.isActive(this.activeLabel.editor))\n        ) {\n            fn();\n            return true;\n        }\n        return false;\n    }\n    ifActiveEditorPropertiesChanged(fn) {\n        if (!this.activeLabel.editor || !this.group.activeEditor) {\n            return;\n        }\n        if (this.activeLabel.pinned !== this.group.isPinned(this.group.activeEditor)) {\n            fn();\n        }\n    }\n    ifEditorIsActive(editor, fn) {\n        if (this.group.isActive(editor)) {\n            fn();\n        }\n    }\n    redraw() {\n        const editor = withNullAsUndefined(this.group.activeEditor);\n        const options = this.accessor.partOptions;\n        const isEditorPinned = editor ? this.group.isPinned(editor) : false;\n        const isGroupActive = this.accessor.activeGroup === this.group;\n        this.activeLabel = { editor, pinned: isEditorPinned };\n        if (this.breadcrumbsControl) {\n            if (isGroupActive) {\n                this.breadcrumbsControl.update();\n                this.breadcrumbsControl.domNode.classList.toggle('preview', !isEditorPinned);\n            }\n            else {\n                this.breadcrumbsControl.hide();\n            }\n        }\n        const [titleContainer, editorLabel] = assertAllDefined(this.titleContainer, this.editorLabel);\n        if (!editor) {\n            titleContainer.classList.remove('dirty');\n            editorLabel.clear();\n            this.clearEditorActionsToolbar();\n        }\n        else {\n            this.updateEditorDirty(editor);\n            const { labelFormat } = this.accessor.partOptions;\n            let description;\n            if (this.breadcrumbsControl && !this.breadcrumbsControl.isHidden()) {\n                description = '';\n            }\n            else if (labelFormat === 'default' && !isGroupActive) {\n                description = '';\n            }\n            else {\n                description = editor.getDescription(this.getVerbosity(labelFormat)) || '';\n            }\n            let title = editor.getTitle(2 );\n            if (description === title) {\n                title = '';\n            }\n            editorLabel.setResource({\n                resource: EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.BOTH }),\n                name: editor.getName(),\n                description\n            }, {\n                title,\n                italic: !isEditorPinned,\n                extraClasses: ['no-tabs', 'title-label'].concat(editor.getLabelExtraClasses()),\n                fileDecorations: {\n                    colors: Boolean(options.decorations?.colors),\n                    badges: Boolean(options.decorations?.badges)\n                },\n            });\n            if (isGroupActive) {\n                titleContainer.style.color = this.getColor(TAB_ACTIVE_FOREGROUND) || '';\n            }\n            else {\n                titleContainer.style.color = this.getColor(TAB_UNFOCUSED_ACTIVE_FOREGROUND) || '';\n            }\n            this.updateEditorActionsToolbar();\n        }\n    }\n    getVerbosity(style) {\n        switch (style) {\n            case 'short': return 0 ;\n            case 'long': return 2 ;\n            default: return 1 ;\n        }\n    }\n    prepareEditorActions(editorActions) {\n        const isGroupActive = this.accessor.activeGroup === this.group;\n        if (isGroupActive) {\n            return editorActions;\n        }\n        else {\n            return {\n                primary: editorActions.primary.filter(action => action.id === CLOSE_EDITOR_COMMAND_ID || action.id === UNLOCK_GROUP_COMMAND_ID),\n                secondary: editorActions.secondary\n            };\n        }\n    }\n    getHeight() {\n        return {\n            total: NoTabsTitleControl.HEIGHT,\n            offset: 0\n        };\n    }\n    layout(dimensions) {\n        this.breadcrumbsControl?.layout(undefined);\n        return ( new Dimension(dimensions.container.width, this.getHeight().total));\n    }\n}\nexport { NoTabsTitleControl };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Disposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { isMacintosh, isWeb } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { ILifecycleService } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { h, append, $, clearNode } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { CommandsRegistry } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { IContextKeyService, ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nconst showCommands = { text: ( nls.localize('watermark.showCommands', \"Show All Commands\")), id: 'workbench.action.showCommands' };\nconst quickAccess = { text: ( nls.localize('watermark.quickAccess', \"Go to File\")), id: 'workbench.action.quickOpen' };\nconst openFileNonMacOnly = { text: ( nls.localize('watermark.openFile', \"Open File\")), id: 'workbench.action.files.openFile', mac: false };\nconst openFolderNonMacOnly = { text: ( nls.localize('watermark.openFolder', \"Open Folder\")), id: 'workbench.action.files.openFolder', mac: false };\nconst openFileOrFolderMacOnly = { text: ( nls.localize('watermark.openFileFolder', \"Open File or Folder\")), id: 'workbench.action.files.openFileFolder', mac: true };\nconst openRecent = { text: ( nls.localize('watermark.openRecent', \"Open Recent\")), id: 'workbench.action.openRecent' };\nconst newUntitledFile = { text: ( nls.localize('watermark.newUntitledFile', \"New Untitled Text File\")), id: 'workbench.action.files.newUntitledFile' };\nconst newUntitledFileMacOnly = Object.assign({ mac: true }, newUntitledFile);\nconst findInFiles = { text: ( nls.localize('watermark.findInFiles', \"Find in Files\")), id: 'workbench.action.findInFiles' };\nconst toggleTerminal = { text: ( nls.localize(\n    { key: 'watermark.toggleTerminal', comment: ['toggle is a verb here'] },\n    \"Toggle Terminal\"\n)), id: 'workbench.action.terminal.toggleTerminal', when: ( ContextKeyExpr.equals('terminalProcessSupported', true)) };\nconst startDebugging = { text: ( nls.localize('watermark.startDebugging', \"Start Debugging\")), id: 'workbench.action.debug.start', when: ( ContextKeyExpr.equals('terminalProcessSupported', true)) };\nconst toggleFullscreen = { text: ( nls.localize(\n    { key: 'watermark.toggleFullscreen', comment: ['toggle is a verb here'] },\n    \"Toggle Full Screen\"\n)), id: 'workbench.action.toggleFullScreen', when: ( ( ContextKeyExpr.equals('terminalProcessSupported', true)).negate()) };\nconst showSettings = { text: ( nls.localize('watermark.showSettings', \"Show Settings\")), id: 'workbench.action.openSettings', when: ( ( ContextKeyExpr.equals('terminalProcessSupported', true)).negate()) };\nconst noFolderEntries = [\n    showCommands,\n    openFileNonMacOnly,\n    openFolderNonMacOnly,\n    openFileOrFolderMacOnly,\n    openRecent,\n    newUntitledFileMacOnly\n];\nconst folderEntries = [\n    showCommands,\n    quickAccess,\n    findInFiles,\n    startDebugging,\n    toggleTerminal,\n    toggleFullscreen,\n    showSettings\n];\nlet EditorGroupWatermark = class EditorGroupWatermark extends Disposable {\n    constructor(container, lifecycleService, keybindingService, contextService, contextKeyService, configurationService, telemetryService) {\n        super();\n        this.lifecycleService = lifecycleService;\n        this.keybindingService = keybindingService;\n        this.contextService = contextService;\n        this.contextKeyService = contextKeyService;\n        this.configurationService = configurationService;\n        this.telemetryService = telemetryService;\n        this.transientDisposables = this._register(( new DisposableStore()));\n        this.enabled = false;\n        const elements = h('.editor-group-watermark', [\n            h('.letterpress'),\n            h('.shortcuts@shortcuts'),\n        ]);\n        append(container, elements.root);\n        this.shortcuts = elements.shortcuts;\n        this.registerListeners();\n        this.workbenchState = contextService.getWorkbenchState();\n        this.render();\n    }\n    registerListeners() {\n        this.lifecycleService.onDidShutdown(() => this.dispose());\n        this._register(this.configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('workbench.tips.enabled')) {\n                this.render();\n            }\n        }));\n        this._register(this.contextService.onDidChangeWorkbenchState(workbenchState => {\n            if (this.workbenchState === workbenchState) {\n                return;\n            }\n            this.workbenchState = workbenchState;\n            this.render();\n        }));\n        const allEntriesWhenClauses = ( [...noFolderEntries, ...folderEntries].filter(entry => entry.when !== undefined).map(entry => entry.when));\n        const allKeys = ( new Set());\n        allEntriesWhenClauses.forEach(when => ( when.keys()).forEach(key => allKeys.add(key)));\n        this._register(this.contextKeyService.onDidChangeContext(e => {\n            if (e.affectsSome(allKeys)) {\n                this.render();\n            }\n        }));\n    }\n    render() {\n        const enabled = this.configurationService.getValue('workbench.tips.enabled');\n        if (enabled === this.enabled) {\n            return;\n        }\n        this.enabled = enabled;\n        this.clear();\n        if (!enabled) {\n            return;\n        }\n        const box = append(this.shortcuts, $('.watermark-box'));\n        const folder = this.workbenchState !== 1 ;\n        (folder ? folderEntries : noFolderEntries)\n            .filter(entry => !('when' in entry) || this.contextKeyService.contextMatchesRules(entry.when))\n            .filter(entry => !('mac' in entry) || entry.mac === (isMacintosh && !isWeb))\n            .filter(entry => !!CommandsRegistry.getCommand(entry.id));\n        const update = () => {\n            clearNode(box);\n        };\n        update();\n        this.transientDisposables.add(this.keybindingService.onDidUpdateKeybindings(update));\n        this.telemetryService.publicLog('watermark:open');\n    }\n    clear() {\n        clearNode(this.shortcuts);\n        this.transientDisposables.clear();\n    }\n    dispose() {\n        super.dispose();\n        this.clear();\n    }\n};\nEditorGroupWatermark = ( __decorate([\n    ( __param(1, ILifecycleService)),\n    ( __param(2, IKeybindingService)),\n    ( __param(3, IWorkspaceContextService)),\n    ( __param(4, IContextKeyService)),\n    ( __param(5, IConfigurationService)),\n    ( __param(6, ITelemetryService))\n], EditorGroupWatermark));\nexport { EditorGroupWatermark };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/editorgroupview.css.js';\nimport { isSerializedEditorGroupModel, EditorGroupModel, isGroupEditorCloseEvent, isGroupEditorOpenEvent } from '../../../common/editor/editorGroupModel.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, SideBySideEditor, EditorResourceAccessor, EditorCloseContext } from '../../../common/editor.js';\nimport { ActiveEditorDirtyContext, ActiveEditorPinnedContext, ActiveEditorFirstInGroupContext, ActiveEditorLastInGroupContext, ActiveEditorStickyContext, EditorGroupEditorsCountContext, ActiveEditorGroupLockedContext } from '../../../common/contextkeys.js';\nimport { SideBySideEditorInput } from '../../../common/editor/sideBySideEditorInput.js';\nimport { Emitter, Relay } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { addDisposableListener, EventType, EventHelper, trackFocus, clearNode, isAncestor, Dimension, findParentWithClass } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { ServiceCollection } from 'monaco-editor/esm/vs/platform/instantiation/common/serviceCollection.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { ProgressBar } from 'monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js';\nimport { Themable, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { contrastBorder, editorBackground } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { EDITOR_GROUP_EMPTY_BACKGROUND, EDITOR_GROUP_HEADER_BORDER, EDITOR_GROUP_HEADER_TABS_BACKGROUND, EDITOR_GROUP_HEADER_NO_TABS_BACKGROUND } from '../../../common/theme.js';\nimport { TabsTitleControl } from './tabsTitleControl.js';\nimport { EditorPanes } from './editorPanes.js';\nimport { IEditorProgressService } from 'monaco-editor/esm/vs/platform/progress/common/progress.js';\nimport { EditorProgressIndicator } from '../../../services/progress/browser/progressIndicator.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { coalesce, firstOrDefault } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { MutableDisposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { RunOnceWorker, DeferredPromise, Promises } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nimport { fillActiveEditorViewState } from './editor.js';\nimport { ActionBar } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { NoTabsTitleControl } from './noTabsTitleControl.js';\nimport { MenuId, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { createAndFillInActionBarActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { hash } from 'monaco-editor/esm/vs/base/common/hash.js';\nimport { getMimeTypes } from 'monaco-editor/esm/vs/editor/common/services/languagesAssociations.js';\nimport { extname, isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { EditorActivation } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport '../../../../../../override/vs/platform/dialogs/common/dialogs.js';\nimport { IFilesConfigurationService } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { withNullAsUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { isNative, isWindows, isLinux, isMacintosh } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { TelemetryTrustedValue } from '../../../../platform/telemetry/common/telemetryUtils.js';\nimport { defaultProgressBarStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nimport { EditorGroupWatermark } from './editorGroupWatermark.js';\nimport { IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nlet EditorGroupView = class EditorGroupView extends Themable {\n    static createNew(accessor, index, instantiationService) {\n        return instantiationService.createInstance(EditorGroupView, accessor, null, index);\n    }\n    static createFromSerialized(serialized, accessor, index, instantiationService) {\n        return instantiationService.createInstance(EditorGroupView, accessor, serialized, index);\n    }\n    static createCopy(copyFrom, accessor, index, instantiationService) {\n        return instantiationService.createInstance(EditorGroupView, accessor, copyFrom, index);\n    }\n    constructor(accessor, from, _index, instantiationService, contextKeyService, themeService, telemetryService, keybindingService, menuService, contextMenuService, fileDialogService, editorService, filesConfigurationService, uriIdentityService, logService) {\n        super(themeService);\n        this.accessor = accessor;\n        this._index = _index;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.telemetryService = telemetryService;\n        this.keybindingService = keybindingService;\n        this.menuService = menuService;\n        this.contextMenuService = contextMenuService;\n        this.fileDialogService = fileDialogService;\n        this.editorService = editorService;\n        this.filesConfigurationService = filesConfigurationService;\n        this.uriIdentityService = uriIdentityService;\n        this.logService = logService;\n        this._onDidFocus = this._register(( new Emitter()));\n        this.onDidFocus = this._onDidFocus.event;\n        this._onWillDispose = this._register(( new Emitter()));\n        this.onWillDispose = this._onWillDispose.event;\n        this._onDidModelChange = this._register(( new Emitter()));\n        this.onDidModelChange = this._onDidModelChange.event;\n        this._onDidActiveEditorChange = this._register(( new Emitter()));\n        this.onDidActiveEditorChange = this._onDidActiveEditorChange.event;\n        this._onDidOpenEditorFail = this._register(( new Emitter()));\n        this.onDidOpenEditorFail = this._onDidOpenEditorFail.event;\n        this._onWillCloseEditor = this._register(( new Emitter()));\n        this.onWillCloseEditor = this._onWillCloseEditor.event;\n        this._onDidCloseEditor = this._register(( new Emitter()));\n        this.onDidCloseEditor = this._onDidCloseEditor.event;\n        this._onWillMoveEditor = this._register(( new Emitter()));\n        this.onWillMoveEditor = this._onWillMoveEditor.event;\n        this._onWillOpenEditor = this._register(( new Emitter()));\n        this.onWillOpenEditor = this._onWillOpenEditor.event;\n        this.disposedEditorsWorker = this._register(( new RunOnceWorker(editors => this.handleDisposedEditors(editors), 0)));\n        this.mapEditorToPendingConfirmation = ( new Map());\n        this.containerToolBarMenuDisposable = this._register(( new MutableDisposable()));\n        this.whenRestoredPromise = ( new DeferredPromise());\n        this.whenRestored = this.whenRestoredPromise.p;\n        this._disposed = false;\n        this.element = document.createElement('div');\n        this._onDidChange = this._register(( new Relay()));\n        this.onDidChange = this._onDidChange.event;\n        if (from instanceof EditorGroupView) {\n            this.model = this._register(from.model.clone());\n        }\n        else if (isSerializedEditorGroupModel(from)) {\n            this.model = this._register(instantiationService.createInstance(EditorGroupModel, from));\n        }\n        else {\n            this.model = this._register(instantiationService.createInstance(EditorGroupModel, undefined));\n        }\n        {\n            this.scopedContextKeyService = this._register(this.contextKeyService.createScoped(this.element));\n            this.element.classList.add('editor-group-container');\n            this.registerContainerListeners();\n            this.createContainerToolbar();\n            this.createContainerContextMenu();\n            this._register(this.instantiationService.createInstance(EditorGroupWatermark, this.element));\n            this.progressBar = this._register(( new ProgressBar(this.element, defaultProgressBarStyles)));\n            this.progressBar.hide();\n            this.scopedInstantiationService = this.instantiationService.createChild(( new ServiceCollection(\n                [IContextKeyService, this.scopedContextKeyService],\n                [IEditorProgressService, this._register(( new EditorProgressIndicator(this.progressBar, this)))]\n            )));\n            this.handleGroupContextKeys();\n            this.titleContainer = document.createElement('div');\n            this.titleContainer.classList.add('title');\n            this.element.appendChild(this.titleContainer);\n            this.titleAreaControl = this.createTitleAreaControl();\n            this.editorContainer = document.createElement('div');\n            this.editorContainer.classList.add('editor-container');\n            this.element.appendChild(this.editorContainer);\n            this.editorPane = this._register(this.scopedInstantiationService.createInstance(EditorPanes, this.element, this.editorContainer, this));\n            this._onDidChange.input = this.editorPane.onDidChangeSizeConstraints;\n            this.doTrackFocus();\n            this.updateTitleContainer();\n            this.updateContainer();\n            this.updateStyles();\n        }\n        const restoreEditorsPromise = this.restoreEditors(from) ?? Promise.resolve();\n        restoreEditorsPromise.finally(() => {\n            this.whenRestoredPromise.complete();\n        });\n        this.registerListeners();\n    }\n    handleGroupContextKeys() {\n        const groupActiveEditorDirtyContext = ActiveEditorDirtyContext.bindTo(this.scopedContextKeyService);\n        const groupActiveEditorPinnedContext = ActiveEditorPinnedContext.bindTo(this.scopedContextKeyService);\n        const groupActiveEditorFirstContext = ActiveEditorFirstInGroupContext.bindTo(this.scopedContextKeyService);\n        const groupActiveEditorLastContext = ActiveEditorLastInGroupContext.bindTo(this.scopedContextKeyService);\n        const groupActiveEditorStickyContext = ActiveEditorStickyContext.bindTo(this.scopedContextKeyService);\n        const groupEditorsCountContext = EditorGroupEditorsCountContext.bindTo(this.scopedContextKeyService);\n        const groupLockedContext = ActiveEditorGroupLockedContext.bindTo(this.scopedContextKeyService);\n        const activeEditorListener = ( new MutableDisposable());\n        const observeActiveEditor = () => {\n            activeEditorListener.clear();\n            const activeEditor = this.model.activeEditor;\n            if (activeEditor) {\n                groupActiveEditorDirtyContext.set(activeEditor.isDirty() && !activeEditor.isSaving());\n                activeEditorListener.value = activeEditor.onDidChangeDirty(() => {\n                    groupActiveEditorDirtyContext.set(activeEditor.isDirty() && !activeEditor.isSaving());\n                });\n            }\n            else {\n                groupActiveEditorDirtyContext.set(false);\n            }\n        };\n        this._register(this.onDidModelChange(e => {\n            switch (e.kind) {\n                case 2 :\n                    groupLockedContext.set(this.isLocked);\n                    break;\n                case 6 :\n                case 4 :\n                case 3 :\n                case 5 :\n                    groupActiveEditorFirstContext.set(this.model.isFirst(this.model.activeEditor));\n                    groupActiveEditorLastContext.set(this.model.isLast(this.model.activeEditor));\n                    break;\n                case 9 :\n                    if (e.editor && e.editor === this.model.activeEditor) {\n                        groupActiveEditorPinnedContext.set(this.model.isPinned(this.model.activeEditor));\n                    }\n                    break;\n                case 10 :\n                    if (e.editor && e.editor === this.model.activeEditor) {\n                        groupActiveEditorStickyContext.set(this.model.isSticky(this.model.activeEditor));\n                    }\n                    break;\n            }\n            groupEditorsCountContext.set(this.count);\n        }));\n        this._register(this.onDidActiveEditorChange(() => {\n            observeActiveEditor();\n        }));\n        observeActiveEditor();\n    }\n    registerContainerListeners() {\n        this._register(addDisposableListener(this.element, EventType.DBLCLICK, e => {\n            if (this.isEmpty) {\n                EventHelper.stop(e);\n                this.editorService.openEditor({\n                    resource: undefined,\n                    options: {\n                        pinned: true,\n                        override: DEFAULT_EDITOR_ASSOCIATION.id\n                    }\n                }, this.id);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.AUXCLICK, e => {\n            if (this.isEmpty && e.button === 1 ) {\n                EventHelper.stop(e, true);\n                this.accessor.removeGroup(this);\n            }\n        }));\n    }\n    createContainerToolbar() {\n        const toolbarContainer = document.createElement('div');\n        toolbarContainer.classList.add('editor-group-container-toolbar');\n        this.element.appendChild(toolbarContainer);\n        const containerToolbar = this._register(( new ActionBar(toolbarContainer, {\n            ariaLabel: ( localize('ariaLabelGroupActions', \"Empty editor group actions\"))\n        })));\n        const containerToolbarMenu = this._register(this.menuService.createMenu(MenuId.EmptyEditorGroup, this.scopedContextKeyService));\n        const updateContainerToolbar = () => {\n            const actions = { primary: [], secondary: [] };\n            this.containerToolBarMenuDisposable.value = toDisposable(() => containerToolbar.clear());\n            createAndFillInActionBarActions(containerToolbarMenu, { arg: { groupId: this.id }, shouldForwardArgs: true }, actions, 'navigation');\n            for (const action of [...actions.primary, ...actions.secondary]) {\n                const keybinding = this.keybindingService.lookupKeybinding(action.id);\n                containerToolbar.push(action, { icon: true, label: false, keybinding: keybinding?.getLabel() });\n            }\n        };\n        updateContainerToolbar();\n        this._register(containerToolbarMenu.onDidChange(updateContainerToolbar));\n    }\n    createContainerContextMenu() {\n        this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => this.onShowContainerContextMenu(e)));\n        this._register(addDisposableListener(this.element, EventType$1.Contextmenu, () => this.onShowContainerContextMenu()));\n    }\n    onShowContainerContextMenu(e) {\n        if (!this.isEmpty) {\n            return;\n        }\n        let anchor = this.element;\n        if (e instanceof MouseEvent) {\n            anchor = ( new StandardMouseEvent(e));\n        }\n        this.contextMenuService.showContextMenu({\n            menuId: MenuId.EmptyEditorGroupContext,\n            contextKeyService: this.contextKeyService,\n            getAnchor: () => anchor,\n            onHide: () => {\n                this.focus();\n            }\n        });\n    }\n    doTrackFocus() {\n        const containerFocusTracker = this._register(trackFocus(this.element));\n        this._register(containerFocusTracker.onDidFocus(() => {\n            if (this.isEmpty) {\n                this._onDidFocus.fire();\n            }\n        }));\n        const handleTitleClickOrTouch = (e) => {\n            let target;\n            if (e instanceof MouseEvent) {\n                if (e.button !== 0  || ((isMacintosh && e.ctrlKey) )) {\n                    return undefined;\n                }\n                target = e.target;\n            }\n            else {\n                target = e.initialTarget;\n            }\n            if (findParentWithClass(target, 'monaco-action-bar', this.titleContainer) ||\n                findParentWithClass(target, 'monaco-breadcrumb-item', this.titleContainer)) {\n                return;\n            }\n            setTimeout(() => {\n                this.focus();\n            });\n        };\n        this._register(addDisposableListener(this.titleContainer, EventType.MOUSE_DOWN, e => handleTitleClickOrTouch(e)));\n        this._register(addDisposableListener(this.titleContainer, EventType$1.Tap, e => handleTitleClickOrTouch(e)));\n        this._register(this.editorPane.onDidFocus(() => {\n            this._onDidFocus.fire();\n        }));\n    }\n    updateContainer() {\n        if (this.isEmpty) {\n            this.element.classList.add('empty');\n            this.element.tabIndex = 0;\n            this.element.setAttribute('aria-label', ( localize('emptyEditorGroup', \"{0} (empty)\", this.label)));\n        }\n        else {\n            this.element.classList.remove('empty');\n            this.element.removeAttribute('tabIndex');\n            this.element.removeAttribute('aria-label');\n        }\n        this.updateStyles();\n    }\n    updateTitleContainer() {\n        this.titleContainer.classList.toggle('tabs', this.accessor.partOptions.showTabs);\n        this.titleContainer.classList.toggle('show-file-icons', this.accessor.partOptions.showIcons);\n    }\n    createTitleAreaControl() {\n        if (this.titleAreaControl) {\n            this.titleAreaControl.dispose();\n            clearNode(this.titleContainer);\n        }\n        if (this.accessor.partOptions.showTabs) {\n            this.titleAreaControl = this.scopedInstantiationService.createInstance(TabsTitleControl, this.titleContainer, this.accessor, this);\n        }\n        else {\n            this.titleAreaControl = this.scopedInstantiationService.createInstance(NoTabsTitleControl, this.titleContainer, this.accessor, this);\n        }\n        return this.titleAreaControl;\n    }\n    restoreEditors(from) {\n        if (this.count === 0) {\n            return;\n        }\n        let options;\n        if (from instanceof EditorGroupView) {\n            options = fillActiveEditorViewState(from);\n        }\n        else {\n            options = Object.create(null);\n        }\n        const activeEditor = this.model.activeEditor;\n        if (!activeEditor) {\n            return;\n        }\n        options.pinned = this.model.isPinned(activeEditor);\n        options.sticky = this.model.isSticky(activeEditor);\n        options.preserveFocus = true;\n        const activeElement = document.activeElement;\n        return this.doShowEditor(activeEditor, { active: true, isNew: false  }, options).then(() => {\n            if (this.accessor.activeGroup === this && activeElement === document.activeElement) {\n                this.focus();\n            }\n        });\n    }\n    registerListeners() {\n        this._register(this.model.onDidModelChange(e => this.onDidGroupModelChange(e)));\n        this._register(this.accessor.onDidChangeEditorPartOptions(e => this.onDidChangeEditorPartOptions(e)));\n        this._register(this.accessor.onDidVisibilityChange(e => this.onDidVisibilityChange(e)));\n    }\n    onDidGroupModelChange(e) {\n        this._onDidModelChange.fire(e);\n        if (!e.editor) {\n            return;\n        }\n        switch (e.kind) {\n            case 3 :\n                if (isGroupEditorOpenEvent(e)) {\n                    this.onDidOpenEditor(e.editor, e.editorIndex);\n                }\n                break;\n            case 4 :\n                if (isGroupEditorCloseEvent(e)) {\n                    this.handleOnDidCloseEditor(e.editor, e.editorIndex, e.context, e.sticky);\n                }\n                break;\n            case 12 :\n                this.onWillDisposeEditor(e.editor);\n                break;\n            case 11 :\n                this.onDidChangeEditorDirty(e.editor);\n                break;\n            case 7 :\n                this.onDidChangeEditorLabel(e.editor);\n                break;\n        }\n    }\n    onDidOpenEditor(editor, editorIndex) {\n        this.telemetryService.publicLog('editorOpened', this.toEditorTelemetryDescriptor(editor));\n        this.updateContainer();\n    }\n    handleOnDidCloseEditor(editor, editorIndex, context, sticky) {\n        this._onWillCloseEditor.fire({ groupId: this.id, editor, context, index: editorIndex, sticky });\n        const editorsToClose = [editor];\n        if (editor instanceof SideBySideEditorInput) {\n            editorsToClose.push(editor.primary, editor.secondary);\n        }\n        for (const editor of editorsToClose) {\n            if (this.canDispose(editor)) {\n                editor.dispose();\n            }\n        }\n        this.telemetryService.publicLog('editorClosed', this.toEditorTelemetryDescriptor(editor));\n        this.updateContainer();\n        this._onDidCloseEditor.fire({ groupId: this.id, editor, context, index: editorIndex, sticky });\n    }\n    canDispose(editor) {\n        for (const groupView of this.accessor.groups) {\n            if (groupView instanceof EditorGroupView && groupView.model.contains(editor, {\n                strictEquals: true,\n                supportSideBySide: SideBySideEditor.ANY\n            })) {\n                return false;\n            }\n        }\n        return true;\n    }\n    toEditorTelemetryDescriptor(editor) {\n        const descriptor = editor.getTelemetryDescriptor();\n        const resource = EditorResourceAccessor.getOriginalUri(editor);\n        const path = resource ? resource.scheme === Schemas.file ? resource.fsPath : resource.path : undefined;\n        if (resource && path) {\n            let resourceExt = extname(resource);\n            const queryStringLocation = resourceExt.indexOf('?');\n            resourceExt = queryStringLocation !== -1 ? resourceExt.substr(0, queryStringLocation) : resourceExt;\n            descriptor['resource'] = { mimeType: ( new TelemetryTrustedValue(getMimeTypes(resource).join(', '))), scheme: resource.scheme, ext: resourceExt, path: hash(path) };\n            return descriptor;\n        }\n        return descriptor;\n    }\n    onWillDisposeEditor(editor) {\n        this.disposedEditorsWorker.work(editor);\n    }\n    handleDisposedEditors(disposedEditors) {\n        let activeEditor;\n        const inactiveEditors = [];\n        for (const disposedEditor of disposedEditors) {\n            const editorFindResult = this.model.findEditor(disposedEditor);\n            if (!editorFindResult) {\n                continue;\n            }\n            const editor = editorFindResult[0];\n            if (!editor.isDisposed()) {\n                continue;\n            }\n            if (this.model.isActive(editor)) {\n                activeEditor = editor;\n            }\n            else {\n                inactiveEditors.push(editor);\n            }\n        }\n        for (const inactiveEditor of inactiveEditors) {\n            this.doCloseEditor(inactiveEditor, false);\n        }\n        if (activeEditor) {\n            this.doCloseEditor(activeEditor, false);\n        }\n    }\n    onDidChangeEditorPartOptions(event) {\n        this.updateTitleContainer();\n        if (event.oldPartOptions.showTabs !== event.newPartOptions.showTabs) {\n            this.createTitleAreaControl();\n            this.relayout();\n            if (this.model.activeEditor) {\n                this.titleAreaControl.openEditor(this.model.activeEditor);\n            }\n        }\n        else {\n            this.titleAreaControl.updateOptions(event.oldPartOptions, event.newPartOptions);\n        }\n        this.updateStyles();\n        if (event.oldPartOptions.enablePreview && !event.newPartOptions.enablePreview) {\n            if (this.model.previewEditor) {\n                this.pinEditor(this.model.previewEditor);\n            }\n        }\n    }\n    onDidChangeEditorDirty(editor) {\n        this.pinEditor(editor);\n        this.titleAreaControl.updateEditorDirty(editor);\n    }\n    onDidChangeEditorLabel(editor) {\n        this.titleAreaControl.updateEditorLabel(editor);\n    }\n    onDidVisibilityChange(visible) {\n        this.editorPane.setVisible(visible);\n    }\n    get index() {\n        return this._index;\n    }\n    get label() {\n        return ( localize('groupLabel', \"Group {0}\", this._index + 1));\n    }\n    get ariaLabel() {\n        return ( localize('groupAriaLabel', \"Editor Group {0}\", this._index + 1));\n    }\n    get disposed() {\n        return this._disposed;\n    }\n    get isEmpty() {\n        return this.count === 0;\n    }\n    get titleHeight() {\n        return this.titleAreaControl.getHeight();\n    }\n    notifyIndexChanged(newIndex) {\n        if (this._index !== newIndex) {\n            this._index = newIndex;\n            this.model.setIndex(newIndex);\n        }\n    }\n    setActive(isActive) {\n        this.active = isActive;\n        this.element.classList.toggle('active', isActive);\n        this.element.classList.toggle('inactive', !isActive);\n        this.titleAreaControl.setActive(isActive);\n        this.updateStyles();\n        this.model.setActive(undefined );\n    }\n    get id() {\n        return this.model.id;\n    }\n    get editors() {\n        return this.model.getEditors(1 );\n    }\n    get count() {\n        return this.model.count;\n    }\n    get stickyCount() {\n        return this.model.stickyCount;\n    }\n    get activeEditorPane() {\n        return this.editorPane ? withNullAsUndefined(this.editorPane.activeEditorPane) : undefined;\n    }\n    get activeEditor() {\n        return this.model.activeEditor;\n    }\n    get previewEditor() {\n        return this.model.previewEditor;\n    }\n    isPinned(editorOrIndex) {\n        return this.model.isPinned(editorOrIndex);\n    }\n    isSticky(editorOrIndex) {\n        return this.model.isSticky(editorOrIndex);\n    }\n    isActive(editor) {\n        return this.model.isActive(editor);\n    }\n    contains(candidate, options) {\n        return this.model.contains(candidate, options);\n    }\n    getEditors(order, options) {\n        return this.model.getEditors(order, options);\n    }\n    findEditors(resource, options) {\n        const canonicalResource = this.uriIdentityService.asCanonicalUri(resource);\n        return this.getEditors(1 ).filter(editor => {\n            if (editor.resource && isEqual(editor.resource, canonicalResource)) {\n                return true;\n            }\n            if (options?.supportSideBySide === SideBySideEditor.PRIMARY || options?.supportSideBySide === SideBySideEditor.ANY) {\n                const primaryResource = EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n                if (primaryResource && isEqual(primaryResource, canonicalResource)) {\n                    return true;\n                }\n            }\n            if (options?.supportSideBySide === SideBySideEditor.SECONDARY || options?.supportSideBySide === SideBySideEditor.ANY) {\n                const secondaryResource = EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.SECONDARY });\n                if (secondaryResource && isEqual(secondaryResource, canonicalResource)) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n    getEditorByIndex(index) {\n        return this.model.getEditorByIndex(index);\n    }\n    getIndexOfEditor(editor) {\n        return this.model.indexOf(editor);\n    }\n    isFirst(editor) {\n        return this.model.isFirst(editor);\n    }\n    isLast(editor) {\n        return this.model.isLast(editor);\n    }\n    focus() {\n        if (this.activeEditorPane) {\n            this.activeEditorPane.focus();\n        }\n        else {\n            this.element.focus();\n        }\n        this._onDidFocus.fire();\n    }\n    pinEditor(candidate = this.activeEditor || undefined) {\n        if (candidate && !this.model.isPinned(candidate)) {\n            const editor = this.model.pin(candidate);\n            if (editor) {\n                this.titleAreaControl.pinEditor(editor);\n            }\n        }\n    }\n    stickEditor(candidate = this.activeEditor || undefined) {\n        this.doStickEditor(candidate, true);\n    }\n    unstickEditor(candidate = this.activeEditor || undefined) {\n        this.doStickEditor(candidate, false);\n    }\n    doStickEditor(candidate, sticky) {\n        if (candidate && this.model.isSticky(candidate) !== sticky) {\n            const oldIndexOfEditor = this.getIndexOfEditor(candidate);\n            const editor = sticky ? this.model.stick(candidate) : this.model.unstick(candidate);\n            if (!editor) {\n                return;\n            }\n            const newIndexOfEditor = this.getIndexOfEditor(editor);\n            if (newIndexOfEditor !== oldIndexOfEditor) {\n                this.titleAreaControl.moveEditor(editor, oldIndexOfEditor, newIndexOfEditor);\n            }\n            if (sticky) {\n                this.titleAreaControl.stickEditor(editor);\n            }\n            else {\n                this.titleAreaControl.unstickEditor(editor);\n            }\n        }\n    }\n    async openEditor(editor, options) {\n        return this.doOpenEditor(editor, options, {\n            supportSideBySide: SideBySideEditor.BOTH\n        });\n    }\n    async doOpenEditor(editor, options, internalOptions) {\n        if (!editor || editor.isDisposed()) {\n            return;\n        }\n        this._onWillOpenEditor.fire({ editor, groupId: this.id });\n        const pinned = options?.sticky\n            || !this.accessor.partOptions.enablePreview\n            || editor.isDirty()\n            || ((options?.pinned ?? typeof options?.index === 'number') )\n            || (typeof options?.index === 'number' && this.model.isSticky(options.index))\n            || editor.hasCapability(512 );\n        const openEditorOptions = {\n            index: options ? options.index : undefined,\n            pinned,\n            sticky: options?.sticky || (typeof options?.index === 'number' && this.model.isSticky(options.index)),\n            active: this.count === 0 || !options || !options.inactive,\n            supportSideBySide: internalOptions?.supportSideBySide\n        };\n        if (options?.sticky && typeof options?.index === 'number' && !this.model.isSticky(options.index)) {\n            openEditorOptions.sticky = false;\n        }\n        if (!openEditorOptions.active && !openEditorOptions.pinned && this.model.activeEditor && !this.model.isPinned(this.model.activeEditor)) {\n            openEditorOptions.active = true;\n        }\n        let activateGroup = false;\n        let restoreGroup = false;\n        if (options?.activation === EditorActivation.ACTIVATE) {\n            activateGroup = true;\n        }\n        else if (options?.activation === EditorActivation.RESTORE) {\n            restoreGroup = true;\n        }\n        else if (options?.activation === EditorActivation.PRESERVE) {\n            activateGroup = false;\n            restoreGroup = false;\n        }\n        else if (openEditorOptions.active) {\n            activateGroup = !options || !options.preserveFocus;\n            restoreGroup = !activateGroup;\n        }\n        if (typeof openEditorOptions.index === 'number') {\n            const indexOfEditor = this.model.indexOf(editor);\n            if (indexOfEditor !== -1 && indexOfEditor !== openEditorOptions.index) {\n                this.doMoveEditorInsideGroup(editor, openEditorOptions);\n            }\n        }\n        const { editor: openedEditor, isNew } = this.model.openEditor(editor, openEditorOptions);\n        if (isNew &&\n            this.count === 1 &&\n            this.accessor.groups.length > 1\n        ) {\n            if (openedEditor.editorId && this.accessor.partOptions.autoLockGroups?.has(openedEditor.editorId)) {\n                this.lock(true);\n            }\n        }\n        const showEditorResult = this.doShowEditor(openedEditor, { active: !!openEditorOptions.active, isNew }, options, internalOptions);\n        if (activateGroup) {\n            this.accessor.activateGroup(this);\n        }\n        else if (restoreGroup) {\n            this.accessor.restoreGroup(this);\n        }\n        return showEditorResult;\n    }\n    doShowEditor(editor, context, options, internalOptions) {\n        let openEditorPromise;\n        if (context.active) {\n            openEditorPromise = (async () => {\n                const { pane, changed, cancelled, error } = await this.editorPane.openEditor(editor, options, { newInGroup: context.isNew });\n                if (cancelled) {\n                    return undefined;\n                }\n                if (changed) {\n                    this._onDidActiveEditorChange.fire({ editor });\n                }\n                if (error) {\n                    this._onDidOpenEditorFail.fire(editor);\n                }\n                if (!pane && this.activeEditor === editor) {\n                    const focusNext = !options || !options.preserveFocus;\n                    this.doCloseEditor(editor, focusNext, { fromError: true });\n                }\n                return pane;\n            })();\n        }\n        else {\n            openEditorPromise = Promise.resolve(undefined);\n        }\n        if (!internalOptions?.skipTitleUpdate) {\n            this.titleAreaControl.openEditor(editor);\n        }\n        return openEditorPromise;\n    }\n    async openEditors(editors) {\n        const editorsToOpen = coalesce(editors).filter(({ editor }) => !editor.isDisposed());\n        const firstEditor = firstOrDefault(editorsToOpen);\n        if (!firstEditor) {\n            return;\n        }\n        const openEditorsOptions = {\n            supportSideBySide: SideBySideEditor.BOTH\n        };\n        await this.doOpenEditor(firstEditor.editor, firstEditor.options, openEditorsOptions);\n        const inactiveEditors = editorsToOpen.slice(1);\n        const startingIndex = this.getIndexOfEditor(firstEditor.editor) + 1;\n        await Promises.settled(( inactiveEditors.map(({ editor, options }, index) => {\n            return this.doOpenEditor(editor, {\n                ...options,\n                inactive: true,\n                pinned: true,\n                index: startingIndex + index\n            }, {\n                ...openEditorsOptions,\n                skipTitleUpdate: true\n            });\n        })));\n        this.titleAreaControl.openEditors(( inactiveEditors.map(({ editor }) => editor)));\n        return withNullAsUndefined(this.editorPane.activeEditorPane);\n    }\n    moveEditors(editors, target) {\n        const internalOptions = {\n            skipTitleUpdate: this !== target\n        };\n        for (const { editor, options } of editors) {\n            this.moveEditor(editor, target, options, internalOptions);\n        }\n        if (internalOptions.skipTitleUpdate) {\n            const movedEditors = ( editors.map(({ editor }) => editor));\n            target.titleAreaControl.openEditors(movedEditors);\n            this.titleAreaControl.closeEditors(movedEditors);\n        }\n    }\n    moveEditor(editor, target, options, internalOptions) {\n        if (this === target) {\n            this.doMoveEditorInsideGroup(editor, options);\n        }\n        else {\n            this.doMoveOrCopyEditorAcrossGroups(editor, target, options, { ...internalOptions, keepCopy: false });\n        }\n    }\n    doMoveEditorInsideGroup(candidate, options) {\n        const moveToIndex = options ? options.index : undefined;\n        if (typeof moveToIndex !== 'number') {\n            return;\n        }\n        const currentIndex = this.model.indexOf(candidate);\n        if (currentIndex === -1 || currentIndex === moveToIndex) {\n            return;\n        }\n        const editor = this.model.getEditorByIndex(currentIndex);\n        if (!editor) {\n            return;\n        }\n        this.model.moveEditor(editor, moveToIndex);\n        this.model.pin(editor);\n        this.titleAreaControl.moveEditor(editor, currentIndex, moveToIndex);\n        this.titleAreaControl.pinEditor(editor);\n    }\n    doMoveOrCopyEditorAcrossGroups(editor, target, openOptions, internalOptions) {\n        const keepCopy = internalOptions?.keepCopy;\n        const options = fillActiveEditorViewState(this, editor, {\n            ...openOptions,\n            pinned: true,\n            sticky: !keepCopy && this.model.isSticky(editor)\n        });\n        if (!keepCopy) {\n            this._onWillMoveEditor.fire({\n                groupId: this.id,\n                editor,\n                target: target.id\n            });\n        }\n        target.doOpenEditor(keepCopy ? editor.copy() : editor, options, internalOptions);\n        if (!keepCopy) {\n            this.doCloseEditor(editor, false , { ...internalOptions, context: EditorCloseContext.MOVE });\n        }\n    }\n    copyEditors(editors, target) {\n        const internalOptions = {\n            skipTitleUpdate: this !== target\n        };\n        for (const { editor, options } of editors) {\n            this.copyEditor(editor, target, options, internalOptions);\n        }\n        if (internalOptions.skipTitleUpdate) {\n            const copiedEditors = ( editors.map(({ editor }) => editor));\n            target.titleAreaControl.openEditors(copiedEditors);\n        }\n    }\n    copyEditor(editor, target, options, internalOptions) {\n        if (this === target) {\n            this.doMoveEditorInsideGroup(editor, options);\n        }\n        else {\n            this.doMoveOrCopyEditorAcrossGroups(editor, target, options, { ...internalOptions, keepCopy: true });\n        }\n    }\n    async closeEditor(editor = this.activeEditor || undefined, options) {\n        return this.doCloseEditorWithConfirmationHandling(editor, options);\n    }\n    async doCloseEditorWithConfirmationHandling(editor = this.activeEditor || undefined, options, internalOptions) {\n        if (!editor) {\n            return false;\n        }\n        const veto = await this.handleCloseConfirmation([editor]);\n        if (veto) {\n            return false;\n        }\n        this.doCloseEditor(editor, options?.preserveFocus ? false : undefined, internalOptions);\n        return true;\n    }\n    doCloseEditor(editor, focusNext = (this.accessor.activeGroup === this), internalOptions) {\n        if (!internalOptions?.skipTitleUpdate) {\n            this.titleAreaControl.beforeCloseEditor(editor);\n        }\n        if (this.model.isActive(editor)) {\n            this.doCloseActiveEditor(focusNext, internalOptions);\n        }\n        else {\n            this.doCloseInactiveEditor(editor, internalOptions);\n        }\n        if (!internalOptions?.skipTitleUpdate) {\n            this.titleAreaControl.closeEditor(editor);\n        }\n    }\n    doCloseActiveEditor(focusNext = (this.accessor.activeGroup === this), internalOptions) {\n        const editorToClose = this.activeEditor;\n        const restoreFocus = this.shouldRestoreFocus(this.element);\n        const closeEmptyGroup = this.accessor.partOptions.closeEmptyGroups;\n        if (closeEmptyGroup && this.active && this.count === 1) {\n            const mostRecentlyActiveGroups = this.accessor.getGroups(1 );\n            const nextActiveGroup = mostRecentlyActiveGroups[1];\n            if (nextActiveGroup) {\n                if (restoreFocus) {\n                    nextActiveGroup.focus();\n                }\n                else {\n                    this.accessor.activateGroup(nextActiveGroup);\n                }\n            }\n        }\n        if (editorToClose) {\n            this.model.closeEditor(editorToClose, internalOptions?.context);\n        }\n        const nextActiveEditor = this.model.activeEditor;\n        if (nextActiveEditor) {\n            const preserveFocus = !focusNext;\n            let activation = undefined;\n            if (preserveFocus && this.accessor.activeGroup !== this) {\n                activation = EditorActivation.PRESERVE;\n            }\n            const options = {\n                preserveFocus,\n                activation,\n                ignoreError: internalOptions?.fromError\n            };\n            this.doOpenEditor(nextActiveEditor, options);\n        }\n        else {\n            if (editorToClose) {\n                this.editorPane.closeEditor(editorToClose);\n            }\n            if (restoreFocus && !closeEmptyGroup) {\n                this.focus();\n            }\n            this._onDidActiveEditorChange.fire({ editor: undefined });\n            if (closeEmptyGroup) {\n                this.accessor.removeGroup(this);\n            }\n        }\n    }\n    shouldRestoreFocus(target) {\n        const activeElement = document.activeElement;\n        if (activeElement === document.body) {\n            return true;\n        }\n        return isAncestor(activeElement, target);\n    }\n    doCloseInactiveEditor(editor, internalOptions) {\n        this.model.closeEditor(editor, internalOptions?.context);\n    }\n    async handleCloseConfirmation(editors) {\n        if (!editors.length) {\n            return false;\n        }\n        const editor = editors.shift();\n        let handleCloseConfirmationPromise = this.mapEditorToPendingConfirmation.get(editor);\n        if (!handleCloseConfirmationPromise) {\n            handleCloseConfirmationPromise = this.doHandleCloseConfirmation(editor);\n            this.mapEditorToPendingConfirmation.set(editor, handleCloseConfirmationPromise);\n        }\n        let veto;\n        try {\n            veto = await handleCloseConfirmationPromise;\n        }\n        finally {\n            this.mapEditorToPendingConfirmation.delete(editor);\n        }\n        if (veto) {\n            return veto;\n        }\n        return this.handleCloseConfirmation(editors);\n    }\n    async doHandleCloseConfirmation(editor, options) {\n        if (!this.shouldConfirmClose(editor)) {\n            return false;\n        }\n        if (editor instanceof SideBySideEditorInput && this.model.contains(editor.primary)) {\n            return false;\n        }\n        if (( this.accessor.groups.some(groupView => {\n            if (groupView === this) {\n                return false;\n            }\n            const otherGroup = groupView;\n            if (otherGroup.contains(editor, { supportSideBySide: SideBySideEditor.BOTH })) {\n                return true;\n            }\n            if (editor instanceof SideBySideEditorInput && otherGroup.contains(editor.primary)) {\n                return true;\n            }\n            return false;\n        }))) {\n            return false;\n        }\n        let confirmation = 2 ;\n        let saveReason = 1 ;\n        let autoSave = false;\n        if (!editor.hasCapability(4 ) && !options?.skipAutoSave && !editor.closeHandler) {\n            if (this.filesConfigurationService.getAutoSaveMode() === 3 ) {\n                autoSave = true;\n                confirmation = 0 ;\n                saveReason = 3 ;\n            }\n            else if ((isNative && (isWindows || isLinux)) && this.filesConfigurationService.getAutoSaveMode() === 4 ) {\n                autoSave = true;\n                confirmation = 0 ;\n                saveReason = 4 ;\n            }\n        }\n        if (!autoSave) {\n            if (!this.activeEditor || !this.activeEditor.matches(editor)) {\n                await this.doOpenEditor(editor);\n            }\n            if (typeof editor.closeHandler?.confirm === 'function') {\n                confirmation = await editor.closeHandler.confirm([{ editor, groupId: this.id }]);\n            }\n            else {\n                let name;\n                if (editor instanceof SideBySideEditorInput) {\n                    name = editor.primary.getName();\n                }\n                else {\n                    name = editor.getName();\n                }\n                confirmation = await this.fileDialogService.showSaveConfirm([name]);\n            }\n        }\n        if (!editor.closeHandler && !this.shouldConfirmClose(editor)) {\n            return confirmation === 2  ? true : false;\n        }\n        switch (confirmation) {\n            case 0 : {\n                const result = await editor.save(this.id, { reason: saveReason });\n                if (!result && autoSave) {\n                    return this.doHandleCloseConfirmation(editor, { skipAutoSave: true });\n                }\n                return editor.isDirty();\n            }\n            case 1 :\n                try {\n                    await editor.revert(this.id);\n                    return editor.isDirty();\n                }\n                catch (error) {\n                    this.logService.error(error);\n                    await editor.revert(this.id, { soft: true });\n                    return editor.isDirty();\n                }\n            case 2 :\n                return true;\n        }\n    }\n    shouldConfirmClose(editor) {\n        if (editor.closeHandler) {\n            return editor.closeHandler.showConfirm();\n        }\n        return editor.isDirty() && !editor.isSaving();\n    }\n    async closeEditors(args, options) {\n        if (this.isEmpty) {\n            return true;\n        }\n        const editors = this.doGetEditorsToClose(args);\n        const veto = await this.handleCloseConfirmation(editors.slice(0));\n        if (veto) {\n            return false;\n        }\n        this.doCloseEditors(editors, options);\n        return true;\n    }\n    doGetEditorsToClose(args) {\n        if (Array.isArray(args)) {\n            return args;\n        }\n        const filter = args;\n        const hasDirection = typeof filter.direction === 'number';\n        let editorsToClose = this.model.getEditors(hasDirection ? 1  : 0 , filter);\n        if (filter.savedOnly) {\n            editorsToClose = editorsToClose.filter(editor => !editor.isDirty() || editor.isSaving());\n        }\n        else if (hasDirection && filter.except) {\n            editorsToClose = ((filter.direction === 0) ) ?\n                editorsToClose.slice(0, this.model.indexOf(filter.except, editorsToClose)) :\n                editorsToClose.slice(this.model.indexOf(filter.except, editorsToClose) + 1);\n        }\n        else if (filter.except) {\n            editorsToClose = editorsToClose.filter(editor => filter.except && !editor.matches(filter.except));\n        }\n        return editorsToClose;\n    }\n    doCloseEditors(editors, options) {\n        let closeActiveEditor = false;\n        for (const editor of editors) {\n            if (!this.isActive(editor)) {\n                this.doCloseInactiveEditor(editor);\n            }\n            else {\n                closeActiveEditor = true;\n            }\n        }\n        if (closeActiveEditor) {\n            this.doCloseActiveEditor(options?.preserveFocus ? false : undefined);\n        }\n        if (editors.length) {\n            this.titleAreaControl.closeEditors(editors);\n        }\n    }\n    async closeAllEditors(options) {\n        if (this.isEmpty) {\n            if (this.accessor.partOptions.closeEmptyGroups) {\n                this.accessor.removeGroup(this);\n            }\n            return true;\n        }\n        const veto = await this.handleCloseConfirmation(this.model.getEditors(0 , options));\n        if (veto) {\n            return false;\n        }\n        this.doCloseAllEditors(options);\n        return true;\n    }\n    doCloseAllEditors(options) {\n        const editorsToClose = [];\n        for (const editor of this.model.getEditors(1 , options)) {\n            if (!this.isActive(editor)) {\n                this.doCloseInactiveEditor(editor);\n            }\n            editorsToClose.push(editor);\n        }\n        if (this.activeEditor && editorsToClose.includes(this.activeEditor)) {\n            this.doCloseActiveEditor();\n        }\n        if (editorsToClose.length) {\n            this.titleAreaControl.closeEditors(editorsToClose);\n        }\n    }\n    async replaceEditors(editors) {\n        let activeReplacement;\n        const inactiveReplacements = [];\n        for (let { editor, replacement, forceReplaceDirty, options } of editors) {\n            const index = this.getIndexOfEditor(editor);\n            if (index >= 0) {\n                const isActiveEditor = this.isActive(editor);\n                if (options) {\n                    options.index = index;\n                }\n                else {\n                    options = { index };\n                }\n                options.inactive = !isActiveEditor;\n                options.pinned = options.pinned ?? true;\n                const editorToReplace = { editor, replacement, forceReplaceDirty, options };\n                if (isActiveEditor) {\n                    activeReplacement = editorToReplace;\n                }\n                else {\n                    inactiveReplacements.push(editorToReplace);\n                }\n            }\n        }\n        for (const { editor, replacement, forceReplaceDirty, options } of inactiveReplacements) {\n            await this.doOpenEditor(replacement, options);\n            if (!editor.matches(replacement)) {\n                let closed = false;\n                if (forceReplaceDirty) {\n                    this.doCloseEditor(editor, false, { context: EditorCloseContext.REPLACE });\n                    closed = true;\n                }\n                else {\n                    closed = await this.doCloseEditorWithConfirmationHandling(editor, { preserveFocus: true }, { context: EditorCloseContext.REPLACE });\n                }\n                if (!closed) {\n                    return;\n                }\n            }\n        }\n        if (activeReplacement) {\n            const openEditorResult = this.doOpenEditor(activeReplacement.replacement, activeReplacement.options);\n            if (!activeReplacement.editor.matches(activeReplacement.replacement)) {\n                if (activeReplacement.forceReplaceDirty) {\n                    this.doCloseEditor(activeReplacement.editor, false, { context: EditorCloseContext.REPLACE });\n                }\n                else {\n                    await this.doCloseEditorWithConfirmationHandling(activeReplacement.editor, { preserveFocus: true }, { context: EditorCloseContext.REPLACE });\n                }\n            }\n            await openEditorResult;\n        }\n    }\n    get isLocked() {\n        if (this.accessor.groups.length === 1) {\n            return false;\n        }\n        return this.model.isLocked;\n    }\n    lock(locked) {\n        if (this.accessor.groups.length === 1) {\n            locked = false;\n        }\n        this.model.lock(locked);\n    }\n    updateStyles() {\n        const isEmpty = this.isEmpty;\n        if (isEmpty) {\n            this.element.style.backgroundColor = this.getColor(EDITOR_GROUP_EMPTY_BACKGROUND) || '';\n        }\n        else {\n            this.element.style.backgroundColor = '';\n        }\n        const borderColor = this.getColor(EDITOR_GROUP_HEADER_BORDER) || this.getColor(contrastBorder);\n        if (!isEmpty && borderColor) {\n            this.titleContainer.classList.add('title-border-bottom');\n            this.titleContainer.style.setProperty('--title-border-bottom-color', borderColor);\n        }\n        else {\n            this.titleContainer.classList.remove('title-border-bottom');\n            this.titleContainer.style.removeProperty('--title-border-bottom-color');\n        }\n        const { showTabs } = this.accessor.partOptions;\n        this.titleContainer.style.backgroundColor = this.getColor(showTabs ? EDITOR_GROUP_HEADER_TABS_BACKGROUND : EDITOR_GROUP_HEADER_NO_TABS_BACKGROUND) || '';\n        this.editorContainer.style.backgroundColor = this.getColor(editorBackground) || '';\n    }\n    get minimumWidth() { return this.editorPane.minimumWidth; }\n    get minimumHeight() { return this.editorPane.minimumHeight; }\n    get maximumWidth() { return this.editorPane.maximumWidth; }\n    get maximumHeight() { return this.editorPane.maximumHeight; }\n    get proportionalLayout() {\n        if (!this.lastLayout) {\n            return true;\n        }\n        return !(this.lastLayout.width === this.minimumWidth || this.lastLayout.height === this.minimumHeight);\n    }\n    layout(width, height, top, left) {\n        this.lastLayout = { width, height, top, left };\n        this.element.classList.toggle('max-height-478px', height <= 478);\n        const titleAreaSize = this.titleAreaControl.layout({\n            container: ( new Dimension(width, height)),\n            available: ( new Dimension(width, height - this.editorPane.minimumHeight))\n        });\n        const editorHeight = Math.max(0, height - titleAreaSize.height);\n        this.editorContainer.style.height = `${editorHeight}px`;\n        this.editorPane.layout({ width, height: editorHeight, top: top + titleAreaSize.height, left });\n    }\n    relayout() {\n        if (this.lastLayout) {\n            const { width, height, top, left } = this.lastLayout;\n            this.layout(width, height, top, left);\n        }\n    }\n    setBoundarySashes(sashes) {\n        this.editorPane.setBoundarySashes(sashes);\n    }\n    toJSON() {\n        return this.model.serialize();\n    }\n    dispose() {\n        this._disposed = true;\n        this._onWillDispose.fire();\n        this.titleAreaControl.dispose();\n        super.dispose();\n    }\n};\nEditorGroupView = ( __decorate([\n    ( __param(3, IInstantiationService)),\n    ( __param(4, IContextKeyService)),\n    ( __param(5, IThemeService)),\n    ( __param(6, ITelemetryService)),\n    ( __param(7, IKeybindingService)),\n    ( __param(8, IMenuService)),\n    ( __param(9, IContextMenuService)),\n    ( __param(10, IFileDialogService)),\n    ( __param(11, IEditorService)),\n    ( __param(12, IFilesConfigurationService)),\n    ( __param(13, IUriIdentityService)),\n    ( __param(14, ILogService))\n], EditorGroupView));\nexport { EditorGroupView };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \"#monaco-workbench-editor-drop-overlay{height:100%;left:0;position:absolute;width:100%;z-index:10000}#monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{align-items:center;display:flex;height:100%;justify-content:center;left:0;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{line-height:normal;margin:.2em;opacity:0;padding:.6em;text-align:center}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt{transition:opacity .15s ease-out}#monaco-workbench-editor-drop-overlay .editor-group-overlay-drop-into-prompt i{background-color:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,80%,.4);border-radius:5px;font-style:normal;margin:0 1px;padding:0 8px}.monaco-workbench:not(.reduce-motion) #monaco-workbench-editor-drop-overlay>.editor-group-overlay-indicator.overlay-move-transition{transition:top 70ms ease-out,left 70ms ease-out,width 70ms ease-out,height 70ms ease-out,opacity .15s ease-out}\";\nn(css,{});\nexport { css, css as default };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/editordroptarget.css.js';\nimport { DataTransfers } from 'monaco-editor/esm/vs/base/browser/dnd.js';\nimport { DragAndDropObserver, EventHelper, addDisposableListener, EventType, isAncestor } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { renderFormattedText } from 'monaco-editor/esm/vs/base/browser/formattedTextRenderer.js';\nimport { RunOnceScheduler } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { isMacintosh, isWeb } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { assertIsDefined, assertAllDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { activeContrastBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { Themable, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { isTemporaryWorkspace, IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { LocalSelectionTransfer, Extensions, containsDragType, CodeDataTransfers } from 'monaco-editor/esm/vs/platform/dnd/browser/dnd.js';\nimport { DraggedEditorGroupIdentifier, DraggedEditorIdentifier, extractTreeDropData, ResourcesDropHandler } from '../../dnd.js';\nimport { fillActiveEditorViewState } from './editor.js';\nimport { EDITOR_DRAG_AND_DROP_BACKGROUND, EDITOR_DROP_INTO_PROMPT_BACKGROUND, EDITOR_DROP_INTO_PROMPT_FOREGROUND, EDITOR_DROP_INTO_PROMPT_BORDER } from '../../../common/theme.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ITreeViewsDnDService } from 'monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js';\nimport { DraggedTreeItemsIdentifier } from 'monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js';\nfunction isDropIntoEditorEnabledGlobally(configurationService) {\n    return configurationService.getValue('editor.dropIntoEditor.enabled');\n}\nfunction isDragIntoEditorEvent(e) {\n    return e.shiftKey;\n}\nlet DropOverlay = class DropOverlay extends Themable {\n    static { this.OVERLAY_ID = 'monaco-workbench-editor-drop-overlay'; }\n    get disposed() { return !!this._disposed; }\n    constructor(accessor, groupView, themeService, configurationService, instantiationService, editorService, editorGroupService, treeViewsDragAndDropService, contextService) {\n        super(themeService);\n        this.accessor = accessor;\n        this.groupView = groupView;\n        this.configurationService = configurationService;\n        this.instantiationService = instantiationService;\n        this.editorService = editorService;\n        this.editorGroupService = editorGroupService;\n        this.treeViewsDragAndDropService = treeViewsDragAndDropService;\n        this.contextService = contextService;\n        this.editorTransfer = LocalSelectionTransfer.getInstance();\n        this.groupTransfer = LocalSelectionTransfer.getInstance();\n        this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n        this.cleanupOverlayScheduler = this._register(( new RunOnceScheduler(() => this.dispose(), 300)));\n        this.enableDropIntoEditor = isDropIntoEditorEnabledGlobally(this.configurationService) && this.isDropIntoActiveEditorEnabled();\n        this.create();\n    }\n    create() {\n        const overlayOffsetHeight = this.getOverlayOffsetHeight();\n        const container = this.container = document.createElement('div');\n        container.id = DropOverlay.OVERLAY_ID;\n        container.style.top = `${overlayOffsetHeight}px`;\n        this.groupView.element.appendChild(container);\n        this.groupView.element.classList.add('dragged-over');\n        this._register(toDisposable(() => {\n            this.groupView.element.removeChild(container);\n            this.groupView.element.classList.remove('dragged-over');\n        }));\n        this.overlay = document.createElement('div');\n        this.overlay.classList.add('editor-group-overlay-indicator');\n        container.appendChild(this.overlay);\n        if (this.enableDropIntoEditor) {\n            this.dropIntoPromptElement = renderFormattedText(( localize(\n                'dropIntoEditorPrompt',\n                \"Hold __{0}__ to drop into editor\",\n                isMacintosh ? '⇧' : 'Shift'\n            )), {});\n            this.dropIntoPromptElement.classList.add('editor-group-overlay-drop-into-prompt');\n            this.overlay.appendChild(this.dropIntoPromptElement);\n        }\n        this.registerListeners(container);\n        this.updateStyles();\n    }\n    updateStyles() {\n        const overlay = assertIsDefined(this.overlay);\n        overlay.style.backgroundColor = this.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND) || '';\n        const activeContrastBorderColor = this.getColor(activeContrastBorder);\n        overlay.style.outlineColor = activeContrastBorderColor || '';\n        overlay.style.outlineOffset = activeContrastBorderColor ? '-2px' : '';\n        overlay.style.outlineStyle = activeContrastBorderColor ? 'dashed' : '';\n        overlay.style.outlineWidth = activeContrastBorderColor ? '2px' : '';\n        if (this.dropIntoPromptElement) {\n            this.dropIntoPromptElement.style.backgroundColor = this.getColor(EDITOR_DROP_INTO_PROMPT_BACKGROUND) ?? '';\n            this.dropIntoPromptElement.style.color = this.getColor(EDITOR_DROP_INTO_PROMPT_FOREGROUND) ?? '';\n            const borderColor = this.getColor(EDITOR_DROP_INTO_PROMPT_BORDER);\n            if (borderColor) {\n                this.dropIntoPromptElement.style.borderWidth = '1px';\n                this.dropIntoPromptElement.style.borderStyle = 'solid';\n                this.dropIntoPromptElement.style.borderColor = borderColor;\n            }\n            else {\n                this.dropIntoPromptElement.style.borderWidth = '0';\n            }\n        }\n    }\n    registerListeners(container) {\n        this._register(( new DragAndDropObserver(container, {\n            onDragEnter: e => undefined,\n            onDragOver: e => {\n                if (this.enableDropIntoEditor && isDragIntoEditorEvent(e)) {\n                    this.dispose();\n                    return;\n                }\n                const isDraggingGroup = this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype);\n                const isDraggingEditor = this.editorTransfer.hasData(DraggedEditorIdentifier.prototype);\n                if (!isDraggingEditor && !isDraggingGroup && e.dataTransfer) {\n                    e.dataTransfer.dropEffect = 'copy';\n                }\n                let isCopy = true;\n                if (isDraggingGroup) {\n                    isCopy = this.isCopyOperation(e);\n                }\n                else if (isDraggingEditor) {\n                    const data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n                    if (Array.isArray(data)) {\n                        isCopy = this.isCopyOperation(e, data[0].identifier);\n                    }\n                }\n                if (!isCopy) {\n                    const sourceGroupView = this.findSourceGroupView();\n                    if (sourceGroupView === this.groupView) {\n                        if (isDraggingGroup || (isDraggingEditor && sourceGroupView.count < 2)) {\n                            this.hideOverlay();\n                            return;\n                        }\n                    }\n                }\n                let splitOnDragAndDrop = !!this.editorGroupService.partOptions.splitOnDragAndDrop;\n                if (this.isToggleSplitOperation(e)) {\n                    splitOnDragAndDrop = !splitOnDragAndDrop;\n                }\n                this.positionOverlay(e.offsetX, e.offsetY, isDraggingGroup, splitOnDragAndDrop);\n                if (this.cleanupOverlayScheduler.isScheduled()) {\n                    this.cleanupOverlayScheduler.cancel();\n                }\n            },\n            onDragLeave: e => this.dispose(),\n            onDragEnd: e => this.dispose(),\n            onDrop: e => {\n                EventHelper.stop(e, true);\n                this.dispose();\n                if (this.currentDropOperation) {\n                    this.handleDrop(e, this.currentDropOperation.splitDirection);\n                }\n            }\n        })));\n        this._register(addDisposableListener(container, EventType.MOUSE_OVER, () => {\n            if (!this.cleanupOverlayScheduler.isScheduled()) {\n                this.cleanupOverlayScheduler.schedule();\n            }\n        }));\n    }\n    isDropIntoActiveEditorEnabled() {\n        return !!this.groupView.activeEditor?.hasCapability(128 );\n    }\n    findSourceGroupView() {\n        if (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n            const data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n            if (Array.isArray(data)) {\n                return this.accessor.getGroup(data[0].identifier);\n            }\n        }\n        else if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n            const data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n            if (Array.isArray(data)) {\n                return this.accessor.getGroup(data[0].identifier.groupId);\n            }\n        }\n        return undefined;\n    }\n    async handleDrop(event, splitDirection) {\n        const ensureTargetGroup = () => {\n            let targetGroup;\n            if (typeof splitDirection === 'number') {\n                targetGroup = this.accessor.addGroup(this.groupView, splitDirection);\n            }\n            else {\n                targetGroup = this.groupView;\n            }\n            return targetGroup;\n        };\n        if (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n            const data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n            if (Array.isArray(data)) {\n                const sourceGroup = this.accessor.getGroup(data[0].identifier);\n                if (sourceGroup) {\n                    if (typeof splitDirection !== 'number' && sourceGroup === this.groupView) {\n                        return;\n                    }\n                    let targetGroup;\n                    if (typeof splitDirection === 'number') {\n                        if (this.isCopyOperation(event)) {\n                            targetGroup = this.accessor.copyGroup(sourceGroup, this.groupView, splitDirection);\n                        }\n                        else {\n                            targetGroup = this.accessor.moveGroup(sourceGroup, this.groupView, splitDirection);\n                        }\n                    }\n                    else {\n                        let mergeGroupOptions = undefined;\n                        if (this.isCopyOperation(event)) {\n                            mergeGroupOptions = { mode: 0  };\n                        }\n                        this.accessor.mergeGroup(sourceGroup, this.groupView, mergeGroupOptions);\n                    }\n                    if (targetGroup) {\n                        this.accessor.activateGroup(targetGroup);\n                    }\n                }\n                this.groupTransfer.clearData(DraggedEditorGroupIdentifier.prototype);\n            }\n        }\n        else if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n            const data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n            if (Array.isArray(data)) {\n                const draggedEditor = data[0].identifier;\n                const sourceGroup = this.accessor.getGroup(draggedEditor.groupId);\n                if (sourceGroup) {\n                    const copyEditor = this.isCopyOperation(event, draggedEditor);\n                    let targetGroup = undefined;\n                    if (this.editorGroupService.partOptions.closeEmptyGroups && sourceGroup.count === 1 && typeof splitDirection === 'number' && !copyEditor) {\n                        targetGroup = this.accessor.moveGroup(sourceGroup, this.groupView, splitDirection);\n                    }\n                    else {\n                        targetGroup = ensureTargetGroup();\n                        if (sourceGroup === targetGroup) {\n                            return;\n                        }\n                        const options = fillActiveEditorViewState(sourceGroup, draggedEditor.editor, {\n                            pinned: true,\n                            sticky: sourceGroup.isSticky(draggedEditor.editor),\n                        });\n                        if (!copyEditor) {\n                            sourceGroup.moveEditor(draggedEditor.editor, targetGroup, options);\n                        }\n                        else {\n                            sourceGroup.copyEditor(draggedEditor.editor, targetGroup, options);\n                        }\n                    }\n                    targetGroup.focus();\n                }\n                this.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n            }\n        }\n        else if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n            const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n            if (Array.isArray(data)) {\n                const editors = [];\n                for (const id of data) {\n                    const dataTransferItem = await this.treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n                    if (dataTransferItem) {\n                        const treeDropData = await extractTreeDropData(dataTransferItem);\n                        editors.push(...( treeDropData.map(editor => ({ ...editor, options: { ...editor.options, pinned: true } }))));\n                    }\n                }\n                if (editors.length) {\n                    this.editorService.openEditors(editors, ensureTargetGroup(), { validateTrust: true });\n                }\n            }\n            this.treeItemsTransfer.clearData(DraggedTreeItemsIdentifier.prototype);\n        }\n        else {\n            const dropHandler = this.instantiationService.createInstance(ResourcesDropHandler, { allowWorkspaceOpen: !isWeb || isTemporaryWorkspace(this.contextService.getWorkspace()) });\n            dropHandler.handleDrop(event, () => ensureTargetGroup(), targetGroup => targetGroup?.focus());\n        }\n    }\n    isCopyOperation(e, draggedEditor) {\n        if (draggedEditor?.editor.hasCapability(8 )) {\n            return false;\n        }\n        return (e.ctrlKey && !isMacintosh) || (e.altKey && isMacintosh);\n    }\n    isToggleSplitOperation(e) {\n        return (e.altKey && !isMacintosh) || (e.shiftKey && isMacintosh);\n    }\n    positionOverlay(mousePosX, mousePosY, isDraggingGroup, enableSplitting) {\n        const preferSplitVertically = this.accessor.partOptions.openSideBySideDirection === 'right';\n        const editorControlWidth = this.groupView.element.clientWidth;\n        const editorControlHeight = this.groupView.element.clientHeight - this.getOverlayOffsetHeight();\n        let edgeWidthThresholdFactor;\n        let edgeHeightThresholdFactor;\n        if (enableSplitting) {\n            if (isDraggingGroup) {\n                edgeWidthThresholdFactor = preferSplitVertically ? 0.3 : 0.1;\n            }\n            else {\n                edgeWidthThresholdFactor = 0.1;\n            }\n            if (isDraggingGroup) {\n                edgeHeightThresholdFactor = preferSplitVertically ? 0.1 : 0.3;\n            }\n            else {\n                edgeHeightThresholdFactor = 0.1;\n            }\n        }\n        else {\n            edgeWidthThresholdFactor = 0;\n            edgeHeightThresholdFactor = 0;\n        }\n        const edgeWidthThreshold = editorControlWidth * edgeWidthThresholdFactor;\n        const edgeHeightThreshold = editorControlHeight * edgeHeightThresholdFactor;\n        const splitWidthThreshold = editorControlWidth / 3;\n        const splitHeightThreshold = editorControlHeight / 3;\n        let splitDirection;\n        if (mousePosX > edgeWidthThreshold && mousePosX < editorControlWidth - edgeWidthThreshold &&\n            mousePosY > edgeHeightThreshold && mousePosY < editorControlHeight - edgeHeightThreshold) {\n            splitDirection = undefined;\n        }\n        else {\n            if (preferSplitVertically) {\n                if (mousePosX < splitWidthThreshold) {\n                    splitDirection = 2 ;\n                }\n                else if (mousePosX > splitWidthThreshold * 2) {\n                    splitDirection = 3 ;\n                }\n                else if (mousePosY < editorControlHeight / 2) {\n                    splitDirection = 0 ;\n                }\n                else {\n                    splitDirection = 1 ;\n                }\n            }\n            else {\n                if (mousePosY < splitHeightThreshold) {\n                    splitDirection = 0 ;\n                }\n                else if (mousePosY > splitHeightThreshold * 2) {\n                    splitDirection = 1 ;\n                }\n                else if (mousePosX < editorControlWidth / 2) {\n                    splitDirection = 2 ;\n                }\n                else {\n                    splitDirection = 3 ;\n                }\n            }\n        }\n        switch (splitDirection) {\n            case 0 :\n                this.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '50%' });\n                this.toggleDropIntoPrompt(false);\n                break;\n            case 1 :\n                this.doPositionOverlay({ top: '50%', left: '0', width: '100%', height: '50%' });\n                this.toggleDropIntoPrompt(false);\n                break;\n            case 2 :\n                this.doPositionOverlay({ top: '0', left: '0', width: '50%', height: '100%' });\n                this.toggleDropIntoPrompt(false);\n                break;\n            case 3 :\n                this.doPositionOverlay({ top: '0', left: '50%', width: '50%', height: '100%' });\n                this.toggleDropIntoPrompt(false);\n                break;\n            default:\n                this.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '100%' });\n                this.toggleDropIntoPrompt(true);\n        }\n        const overlay = assertIsDefined(this.overlay);\n        overlay.style.opacity = '1';\n        setTimeout(() => overlay.classList.add('overlay-move-transition'), 0);\n        this.currentDropOperation = { splitDirection };\n    }\n    doPositionOverlay(options) {\n        const [container, overlay] = assertAllDefined(this.container, this.overlay);\n        const offsetHeight = this.getOverlayOffsetHeight();\n        if (offsetHeight) {\n            container.style.height = `calc(100% - ${offsetHeight}px)`;\n        }\n        else {\n            container.style.height = '100%';\n        }\n        overlay.style.top = options.top;\n        overlay.style.left = options.left;\n        overlay.style.width = options.width;\n        overlay.style.height = options.height;\n    }\n    getOverlayOffsetHeight() {\n        if (!this.groupView.isEmpty && this.accessor.partOptions.showTabs) {\n            return this.groupView.titleHeight.offset;\n        }\n        return 0;\n    }\n    hideOverlay() {\n        const overlay = assertIsDefined(this.overlay);\n        this.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '100%' });\n        overlay.style.opacity = '0';\n        overlay.classList.remove('overlay-move-transition');\n        this.currentDropOperation = undefined;\n    }\n    toggleDropIntoPrompt(showing) {\n        if (!this.dropIntoPromptElement) {\n            return;\n        }\n        this.dropIntoPromptElement.style.opacity = showing ? '1' : '0';\n    }\n    contains(element) {\n        return element === this.container || element === this.overlay;\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n};\nDropOverlay = ( __decorate([\n    ( __param(2, IThemeService)),\n    ( __param(3, IConfigurationService)),\n    ( __param(4, IInstantiationService)),\n    ( __param(5, IEditorService)),\n    ( __param(6, IEditorGroupsService)),\n    ( __param(7, ITreeViewsDnDService)),\n    ( __param(8, IWorkspaceContextService))\n], DropOverlay));\nlet EditorDropTarget = class EditorDropTarget extends Themable {\n    constructor(accessor, container, delegate, themeService, configurationService, instantiationService) {\n        super(themeService);\n        this.accessor = accessor;\n        this.container = container;\n        this.delegate = delegate;\n        this.configurationService = configurationService;\n        this.instantiationService = instantiationService;\n        this.counter = 0;\n        this.editorTransfer = LocalSelectionTransfer.getInstance();\n        this.groupTransfer = LocalSelectionTransfer.getInstance();\n        this.registerListeners();\n    }\n    get overlay() {\n        if (this._overlay && !this._overlay.disposed) {\n            return this._overlay;\n        }\n        return undefined;\n    }\n    registerListeners() {\n        this._register(addDisposableListener(this.container, EventType.DRAG_ENTER, e => this.onDragEnter(e)));\n        this._register(addDisposableListener(this.container, EventType.DRAG_LEAVE, () => this.onDragLeave()));\n        [this.container, window].forEach(node => this._register(addDisposableListener(node, EventType.DRAG_END, () => this.onDragEnd())));\n    }\n    onDragEnter(event) {\n        if (isDropIntoEditorEnabledGlobally(this.configurationService) && isDragIntoEditorEvent(event)) {\n            return;\n        }\n        this.counter++;\n        if (!this.editorTransfer.hasData(DraggedEditorIdentifier.prototype) &&\n            !this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype) &&\n            event.dataTransfer) {\n            const dndContributions = ( Registry.as(Extensions.DragAndDropContribution)).getAll();\n            const dndContributionKeys = ( Array.from(dndContributions).map(e => e.dataFormatKey));\n            if (!containsDragType(event, DataTransfers.FILES, CodeDataTransfers.FILES, DataTransfers.RESOURCES, CodeDataTransfers.EDITORS, ...dndContributionKeys)) {\n                event.dataTransfer.dropEffect = 'none';\n                return;\n            }\n        }\n        this.updateContainer(true);\n        const target = event.target;\n        if (target) {\n            if (this.overlay && !this.overlay.contains(target)) {\n                this.disposeOverlay();\n            }\n            if (!this.overlay) {\n                const targetGroupView = this.findTargetGroupView(target);\n                if (targetGroupView) {\n                    this._overlay = this.instantiationService.createInstance(DropOverlay, this.accessor, targetGroupView);\n                }\n            }\n        }\n    }\n    onDragLeave() {\n        this.counter--;\n        if (this.counter === 0) {\n            this.updateContainer(false);\n        }\n    }\n    onDragEnd() {\n        this.counter = 0;\n        this.updateContainer(false);\n        this.disposeOverlay();\n    }\n    findTargetGroupView(child) {\n        const groups = this.accessor.groups;\n        return groups.find(groupView => isAncestor(child, groupView.element) || this.delegate.containsGroup?.(groupView));\n    }\n    updateContainer(isDraggedOver) {\n        this.container.classList.toggle('dragged-over', isDraggedOver);\n    }\n    dispose() {\n        super.dispose();\n        this.disposeOverlay();\n    }\n    disposeOverlay() {\n        if (this.overlay) {\n            this.overlay.dispose();\n            this._overlay = undefined;\n        }\n    }\n};\nEditorDropTarget = ( __decorate([\n    ( __param(3, IThemeService)),\n    ( __param(4, IConfigurationService)),\n    ( __param(5, IInstantiationService))\n], EditorDropTarget));\nexport { EditorDropTarget };\n","import { $ } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { SplitView } from 'monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nconst defaultState = {\n    targetWidth: 900,\n    leftMarginRatio: 0.1909,\n    rightMarginRatio: 0.1909,\n};\nconst distributeSizing = { type: 'distribute' };\nfunction createEmptyView(background) {\n    const element = $('.centered-layout-margin');\n    element.style.height = '100%';\n    if (background) {\n        element.style.backgroundColor = ( background.toString());\n    }\n    return {\n        element,\n        layout: () => undefined,\n        minimumSize: 60,\n        maximumSize: Number.POSITIVE_INFINITY,\n        onDidChange: Event.None\n    };\n}\nfunction toSplitViewView(view, getHeight) {\n    return {\n        element: view.element,\n        get maximumSize() { return view.maximumWidth; },\n        get minimumSize() { return view.minimumWidth; },\n        onDidChange: ( Event.map(view.onDidChange, e => e && e.width)),\n        layout: (size, offset, ctx) => view.layout(size, getHeight(), ctx?.top ?? 0, (ctx?.left ?? 0) + offset)\n    };\n}\nclass CenteredViewLayout {\n    constructor(container, view, state = { ...defaultState }) {\n        this.container = container;\n        this.view = view;\n        this.state = state;\n        this.lastLayoutPosition = { width: 0, height: 0, left: 0, top: 0 };\n        this.didLayout = false;\n        this.splitViewDisposables = ( new DisposableStore());\n        this.centeredLayoutFixedWidth = true;\n        this._boundarySashes = {};\n        this.container.appendChild(this.view.element);\n        this.container.style.overflow = 'hidden';\n    }\n    get minimumWidth() { return this.splitView ? this.splitView.minimumSize : this.view.minimumWidth; }\n    get maximumWidth() { return this.splitView ? this.splitView.maximumSize : this.view.maximumWidth; }\n    get minimumHeight() { return this.view.minimumHeight; }\n    get maximumHeight() { return this.view.maximumHeight; }\n    get onDidChange() { return this.view.onDidChange; }\n    get boundarySashes() { return this._boundarySashes; }\n    set boundarySashes(boundarySashes) {\n        this._boundarySashes = boundarySashes;\n        if (!this.splitView) {\n            return;\n        }\n        this.splitView.orthogonalStartSash = boundarySashes.top;\n        this.splitView.orthogonalEndSash = boundarySashes.bottom;\n    }\n    layout(width, height, top, left) {\n        this.lastLayoutPosition = { width, height, top, left };\n        if (this.splitView) {\n            this.splitView.layout(width, this.lastLayoutPosition);\n            if (!this.didLayout || this.centeredLayoutFixedWidth) {\n                this.resizeSplitViews();\n            }\n        }\n        else {\n            this.view.layout(width, height, top, left);\n        }\n        this.didLayout = true;\n    }\n    resizeSplitViews() {\n        if (!this.splitView) {\n            return;\n        }\n        if (this.centeredLayoutFixedWidth) {\n            const centerViewWidth = Math.min(this.lastLayoutPosition.width, this.state.targetWidth);\n            const marginWidthFloat = (this.lastLayoutPosition.width - centerViewWidth) / 2;\n            this.splitView.resizeView(0, Math.floor(marginWidthFloat));\n            this.splitView.resizeView(1, centerViewWidth);\n            this.splitView.resizeView(2, Math.ceil(marginWidthFloat));\n        }\n        else {\n            const leftMargin = this.state.leftMarginRatio * this.lastLayoutPosition.width;\n            const rightMargin = this.state.rightMarginRatio * this.lastLayoutPosition.width;\n            const center = this.lastLayoutPosition.width - leftMargin - rightMargin;\n            this.splitView.resizeView(0, leftMargin);\n            this.splitView.resizeView(1, center);\n            this.splitView.resizeView(2, rightMargin);\n        }\n    }\n    setFixedWidth(option) {\n        this.centeredLayoutFixedWidth = option;\n        if (!!this.splitView) {\n            this.updateState();\n            this.resizeSplitViews();\n        }\n    }\n    updateState() {\n        if (!!this.splitView) {\n            this.state.targetWidth = this.splitView.getViewSize(1);\n            this.state.leftMarginRatio = this.splitView.getViewSize(0) / this.lastLayoutPosition.width;\n            this.state.rightMarginRatio = this.splitView.getViewSize(2) / this.lastLayoutPosition.width;\n        }\n    }\n    isActive() {\n        return !!this.splitView;\n    }\n    styles(style) {\n        this.style = style;\n        if (this.splitView && this.emptyViews) {\n            this.splitView.style(this.style);\n            this.emptyViews[0].element.style.backgroundColor = ( this.style.background.toString());\n            this.emptyViews[1].element.style.backgroundColor = ( this.style.background.toString());\n        }\n    }\n    activate(active) {\n        if (active === this.isActive()) {\n            return;\n        }\n        if (active) {\n            this.container.removeChild(this.view.element);\n            this.splitView = ( new SplitView(this.container, {\n                inverseAltBehavior: true,\n                orientation: 1 ,\n                styles: this.style\n            }));\n            this.splitView.orthogonalStartSash = this.boundarySashes.top;\n            this.splitView.orthogonalEndSash = this.boundarySashes.bottom;\n            this.splitViewDisposables.add(this.splitView.onDidSashChange(() => {\n                if (!!this.splitView) {\n                    this.updateState();\n                }\n            }));\n            this.splitViewDisposables.add(this.splitView.onDidSashReset(() => {\n                this.state = { ...defaultState };\n                this.resizeSplitViews();\n            }));\n            this.splitView.layout(this.lastLayoutPosition.width, this.lastLayoutPosition);\n            const backgroundColor = this.style ? this.style.background : undefined;\n            this.emptyViews = [createEmptyView(backgroundColor), createEmptyView(backgroundColor)];\n            this.splitView.addView(this.emptyViews[0], distributeSizing, 0);\n            this.splitView.addView(toSplitViewView(this.view, () => this.lastLayoutPosition.height), distributeSizing, 1);\n            this.splitView.addView(this.emptyViews[1], distributeSizing, 2);\n            this.resizeSplitViews();\n        }\n        else {\n            if (this.splitView) {\n                this.container.removeChild(this.splitView.el);\n            }\n            this.splitViewDisposables.clear();\n            this.splitView?.dispose();\n            this.splitView = undefined;\n            this.emptyViews = undefined;\n            this.container.appendChild(this.view.element);\n            this.view.layout(this.lastLayoutPosition.width, this.lastLayoutPosition.height, this.lastLayoutPosition.top, this.lastLayoutPosition.left);\n        }\n    }\n    isDefault(state) {\n        if (this.centeredLayoutFixedWidth) {\n            return state.targetWidth === defaultState.targetWidth;\n        }\n        else {\n            return state.leftMarginRatio === defaultState.leftMarginRatio\n                && state.rightMarginRatio === defaultState.rightMarginRatio;\n        }\n    }\n    dispose() {\n        this.splitViewDisposables.dispose();\n        if (this.splitView) {\n            this.splitView.dispose();\n            this.splitView = undefined;\n        }\n    }\n}\nexport { CenteredViewLayout };\n","import { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { EditorActivation } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport { isEditorInput, isEditorInputWithOptions } from '../../../common/editor.js';\nimport { IEditorGroupsService, preferredSideBySideGroupDirection } from './editorGroupsService.js';\nimport { SIDE_GROUP } from './editorService.js';\nfunction findGroup(accessor, editor, preferredGroup) {\n    const editorGroupService = accessor.get(IEditorGroupsService);\n    const configurationService = accessor.get(IConfigurationService);\n    const group = doFindGroup(editor, preferredGroup, editorGroupService, configurationService);\n    let activation = undefined;\n    if (editorGroupService.activeGroup !== group &&\n        editor.options && !editor.options.inactive &&\n        editor.options.preserveFocus &&\n        typeof editor.options.activation !== 'number' &&\n        preferredGroup !== SIDE_GROUP\n    ) {\n        activation = EditorActivation.ACTIVATE;\n    }\n    return [group, activation];\n}\nfunction doFindGroup(input, preferredGroup, editorGroupService, configurationService) {\n    let group;\n    const editor = isEditorInputWithOptions(input) ? input.editor : input;\n    const options = input.options;\n    if (preferredGroup && typeof preferredGroup !== 'number') {\n        group = preferredGroup;\n    }\n    else if (typeof preferredGroup === 'number' && preferredGroup >= 0) {\n        group = editorGroupService.getGroup(preferredGroup);\n    }\n    else if (preferredGroup === SIDE_GROUP) {\n        const direction = preferredSideBySideGroupDirection(configurationService);\n        let candidateGroup = editorGroupService.findGroup({ direction });\n        if (!candidateGroup || isGroupLockedForEditor(candidateGroup, editor)) {\n            candidateGroup = editorGroupService.addGroup(editorGroupService.activeGroup, direction);\n        }\n        group = candidateGroup;\n    }\n    else if (!options || typeof options.index !== 'number') {\n        const groupsByLastActive = editorGroupService.getGroups(1 );\n        if (options?.revealIfVisible) {\n            for (const lastActiveGroup of groupsByLastActive) {\n                if (isActive(lastActiveGroup, editor)) {\n                    group = lastActiveGroup;\n                    break;\n                }\n            }\n        }\n        if (!group) {\n            if (options?.revealIfOpened || configurationService.getValue('workbench.editor.revealIfOpen') || (isEditorInput(editor) && editor.hasCapability(8 ))) {\n                let groupWithInputActive = undefined;\n                let groupWithInputOpened = undefined;\n                for (const group of groupsByLastActive) {\n                    if (isOpened(group, editor)) {\n                        if (!groupWithInputOpened) {\n                            groupWithInputOpened = group;\n                        }\n                        if (!groupWithInputActive && group.isActive(editor)) {\n                            groupWithInputActive = group;\n                        }\n                    }\n                    if (groupWithInputOpened && groupWithInputActive) {\n                        break;\n                    }\n                }\n                group = groupWithInputActive || groupWithInputOpened;\n            }\n        }\n    }\n    if (!group) {\n        let candidateGroup = editorGroupService.activeGroup;\n        if (isGroupLockedForEditor(candidateGroup, editor)) {\n            for (const group of editorGroupService.getGroups(1 )) {\n                if (isGroupLockedForEditor(group, editor)) {\n                    continue;\n                }\n                candidateGroup = group;\n                break;\n            }\n            if (isGroupLockedForEditor(candidateGroup, editor)) {\n                group = editorGroupService.addGroup(candidateGroup, preferredSideBySideGroupDirection(configurationService));\n            }\n            else {\n                group = candidateGroup;\n            }\n        }\n        else {\n            group = candidateGroup;\n        }\n    }\n    return group;\n}\nfunction isGroupLockedForEditor(group, editor) {\n    if (!group.isLocked) {\n        return false;\n    }\n    if (isOpened(group, editor)) {\n        return false;\n    }\n    return true;\n}\nfunction isActive(group, editor) {\n    if (!group.activeEditor) {\n        return false;\n    }\n    return group.activeEditor.matches(editor);\n}\nfunction isOpened(group, editor) {\n    for (const typedEditor of group.editors) {\n        if (typedEditor.matches(editor)) {\n            return true;\n        }\n    }\n    return false;\n}\nexport { findGroup };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { Part } from '../../part.js';\nimport { isAncestor, addDisposableGenericMouseDownListener, EventHelper, Dimension, $ } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { Emitter, Relay, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { contrastBorder, editorBackground } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { isGridBranchNode, createSerializedGrid, Sizing, SerializableGrid } from '../../../../base/browser/ui/grid/grid.js';\nimport { EDITOR_GROUP_BORDER, EDITOR_PANE_BACKGROUND } from '../../../common/theme.js';\nimport { coalesce, distinct, firstOrDefault } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { getEditorPartOptions, impactsEditorPartOptions } from './editor.js';\nimport { EditorGroupView } from './editorGroupView.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { toDisposable, dispose, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { isSerializedEditorGroupModel } from '../../../common/editor/editorGroupModel.js';\nimport { EditorDropTarget } from './editorDropTarget.js';\nimport { Color } from 'monaco-editor/esm/vs/base/common/color.js';\nimport { CenteredViewLayout } from '../../../../base/browser/ui/centered/centeredViewLayout.js';\nimport { onUnexpectedError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { CompositeDragAndDropObserver } from '../../dnd.js';\nimport { DeferredPromise, Promises } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { findGroup } from '../../../services/editor/common/editorGroupFinder.js';\nimport { SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { orthogonal } from '../../../../base/browser/ui/grid/gridview.js';\nclass GridWidgetView {\n    constructor() {\n        this.element = $('.grid-view-container');\n        this._onDidChange = ( new Relay());\n        this.onDidChange = this._onDidChange.event;\n    }\n    get minimumWidth() { return this.gridWidget ? this.gridWidget.minimumWidth : 0; }\n    get maximumWidth() { return this.gridWidget ? this.gridWidget.maximumWidth : Number.POSITIVE_INFINITY; }\n    get minimumHeight() { return this.gridWidget ? this.gridWidget.minimumHeight : 0; }\n    get maximumHeight() { return this.gridWidget ? this.gridWidget.maximumHeight : Number.POSITIVE_INFINITY; }\n    get gridWidget() {\n        return this._gridWidget;\n    }\n    set gridWidget(grid) {\n        this.element.innerText = '';\n        if (grid) {\n            this.element.appendChild(grid.element);\n            this._onDidChange.input = grid.onDidChange;\n        }\n        else {\n            this._onDidChange.input = Event.None;\n        }\n        this._gridWidget = grid;\n    }\n    layout(width, height, top, left) {\n        this.gridWidget?.layout(width, height, top, left);\n    }\n    dispose() {\n        this._onDidChange.dispose();\n    }\n}\nlet EditorPart = class EditorPart extends Part {\n    static { this.EDITOR_PART_UI_STATE_STORAGE_KEY = 'editorpart.state'; }\n    static { this.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY = 'editorpart.centeredview'; }\n    constructor(instantiationService, themeService, configurationService, storageService, layoutService) {\n        super(\"workbench.parts.editor\" , { hasTitle: false }, themeService, storageService, layoutService);\n        this.instantiationService = instantiationService;\n        this.configurationService = configurationService;\n        this._onDidLayout = this._register(( new Emitter()));\n        this.onDidLayout = this._onDidLayout.event;\n        this._onDidChangeActiveGroup = this._register(( new Emitter()));\n        this.onDidChangeActiveGroup = this._onDidChangeActiveGroup.event;\n        this._onDidChangeGroupIndex = this._register(( new Emitter()));\n        this.onDidChangeGroupIndex = this._onDidChangeGroupIndex.event;\n        this._onDidChangeGroupLocked = this._register(( new Emitter()));\n        this.onDidChangeGroupLocked = this._onDidChangeGroupLocked.event;\n        this._onDidActivateGroup = this._register(( new Emitter()));\n        this.onDidActivateGroup = this._onDidActivateGroup.event;\n        this._onDidAddGroup = this._register(( new Emitter()));\n        this.onDidAddGroup = this._onDidAddGroup.event;\n        this._onDidRemoveGroup = this._register(( new Emitter()));\n        this.onDidRemoveGroup = this._onDidRemoveGroup.event;\n        this._onDidMoveGroup = this._register(( new Emitter()));\n        this.onDidMoveGroup = this._onDidMoveGroup.event;\n        this.onDidSetGridWidget = this._register(( new Emitter()));\n        this._onDidChangeSizeConstraints = this._register(( new Relay()));\n        this.onDidChangeSizeConstraints = Event.any(this.onDidSetGridWidget.event, this._onDidChangeSizeConstraints.event);\n        this._onDidScroll = this._register(( new Relay()));\n        this.onDidScroll = Event.any(this.onDidSetGridWidget.event, this._onDidScroll.event);\n        this._onDidChangeEditorPartOptions = this._register(( new Emitter()));\n        this.onDidChangeEditorPartOptions = this._onDidChangeEditorPartOptions.event;\n        this.workspaceMemento = this.getMemento(1 , 1 );\n        this.profileMemento = this.getMemento(0 , 1 );\n        this.groupViews = ( new Map());\n        this.mostRecentActiveGroups = [];\n        this.gridWidgetView = this._register(( new GridWidgetView()));\n        this.enforcedPartOptions = [];\n        this._partOptions = getEditorPartOptions(this.configurationService, this.themeService);\n        this._top = 0;\n        this._left = 0;\n        this.sideGroup = {\n            openEditor: (editor, options) => {\n                const [group] = this.instantiationService.invokeFunction(accessor => findGroup(accessor, { editor, options }, SIDE_GROUP));\n                return group.openEditor(editor, options);\n            }\n        };\n        this._isReady = false;\n        this.whenReadyPromise = ( new DeferredPromise());\n        this.whenReady = this.whenReadyPromise.p;\n        this.whenRestoredPromise = ( new DeferredPromise());\n        this.whenRestored = this.whenRestoredPromise.p;\n        this.priority = 2 ;\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n        this._register(this.themeService.onDidFileIconThemeChange(() => this.handleChangedPartOptions()));\n    }\n    onConfigurationUpdated(event) {\n        if (impactsEditorPartOptions(event)) {\n            this.handleChangedPartOptions();\n        }\n    }\n    handleChangedPartOptions() {\n        const oldPartOptions = this._partOptions;\n        const newPartOptions = getEditorPartOptions(this.configurationService, this.themeService);\n        for (const enforcedPartOptions of this.enforcedPartOptions) {\n            Object.assign(newPartOptions, enforcedPartOptions);\n        }\n        this._partOptions = newPartOptions;\n        this._onDidChangeEditorPartOptions.fire({ oldPartOptions, newPartOptions });\n    }\n    get partOptions() { return this._partOptions; }\n    enforcePartOptions(options) {\n        this.enforcedPartOptions.push(options);\n        this.handleChangedPartOptions();\n        return toDisposable(() => {\n            this.enforcedPartOptions.splice(this.enforcedPartOptions.indexOf(options), 1);\n            this.handleChangedPartOptions();\n        });\n    }\n    get contentDimension() { return this._contentDimension; }\n    get activeGroup() {\n        return this._activeGroup;\n    }\n    get groups() {\n        return Array.from(( this.groupViews.values()));\n    }\n    get count() {\n        return this.groupViews.size;\n    }\n    get orientation() {\n        return ((this.gridWidget && this.gridWidget.orientation === 0) ) ? 1  : 0 ;\n    }\n    get isReady() { return this._isReady; }\n    get hasRestorableState() {\n        return !!this.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY];\n    }\n    getGroups(order = 0 ) {\n        switch (order) {\n            case 0 :\n                return this.groups;\n            case 1 : {\n                const mostRecentActive = coalesce(( this.mostRecentActiveGroups.map(groupId => this.getGroup(groupId))));\n                return distinct([...mostRecentActive, ...this.groups]);\n            }\n            case 2 : {\n                const views = [];\n                if (this.gridWidget) {\n                    this.fillGridNodes(views, this.gridWidget.getViews());\n                }\n                return views;\n            }\n        }\n    }\n    fillGridNodes(target, node) {\n        if (isGridBranchNode(node)) {\n            node.children.forEach(child => this.fillGridNodes(target, child));\n        }\n        else {\n            target.push(node.view);\n        }\n    }\n    getGroup(identifier) {\n        return this.groupViews.get(identifier);\n    }\n    findGroup(scope, source = this.activeGroup, wrap) {\n        if (typeof scope.direction === 'number') {\n            return this.doFindGroupByDirection(scope.direction, source, wrap);\n        }\n        if (typeof scope.location === 'number') {\n            return this.doFindGroupByLocation(scope.location, source, wrap);\n        }\n        throw new Error('invalid arguments');\n    }\n    doFindGroupByDirection(direction, source, wrap) {\n        const sourceGroupView = this.assertGroupView(source);\n        const neighbours = this.gridWidget.getNeighborViews(sourceGroupView, this.toGridViewDirection(direction), wrap);\n        neighbours.sort(((n1, n2) => this.mostRecentActiveGroups.indexOf(n1.id) - this.mostRecentActiveGroups.indexOf(n2.id)));\n        return neighbours[0];\n    }\n    doFindGroupByLocation(location, source, wrap) {\n        const sourceGroupView = this.assertGroupView(source);\n        const groups = this.getGroups(2 );\n        const index = groups.indexOf(sourceGroupView);\n        switch (location) {\n            case 0 :\n                return groups[0];\n            case 1 :\n                return groups[groups.length - 1];\n            case 2 : {\n                let nextGroup = groups[index + 1];\n                if (!nextGroup && wrap) {\n                    nextGroup = this.doFindGroupByLocation(0 , source);\n                }\n                return nextGroup;\n            }\n            case 3 : {\n                let previousGroup = groups[index - 1];\n                if (!previousGroup && wrap) {\n                    previousGroup = this.doFindGroupByLocation(1 , source);\n                }\n                return previousGroup;\n            }\n        }\n    }\n    activateGroup(group) {\n        const groupView = this.assertGroupView(group);\n        this.doSetGroupActive(groupView);\n        this._onDidActivateGroup.fire(groupView);\n        return groupView;\n    }\n    restoreGroup(group) {\n        const groupView = this.assertGroupView(group);\n        this.doRestoreGroup(groupView);\n        return groupView;\n    }\n    getSize(group) {\n        const groupView = this.assertGroupView(group);\n        return this.gridWidget.getViewSize(groupView);\n    }\n    setSize(group, size) {\n        const groupView = this.assertGroupView(group);\n        this.gridWidget.resizeView(groupView, size);\n    }\n    arrangeGroups(arrangement, target = this.activeGroup) {\n        if (this.count < 2) {\n            return;\n        }\n        if (!this.gridWidget) {\n            return;\n        }\n        switch (arrangement) {\n            case 1 :\n                this.gridWidget.distributeViewSizes();\n                break;\n            case 0 :\n                this.gridWidget.maximizeViewSize(target);\n                break;\n            case 2 :\n                if (this.isGroupMaximized(target)) {\n                    this.arrangeGroups(1 );\n                }\n                else {\n                    this.arrangeGroups(0 );\n                }\n                break;\n        }\n    }\n    isGroupMaximized(targetGroup) {\n        return this.gridWidget.isViewSizeMaximized(targetGroup);\n    }\n    setGroupOrientation(orientation) {\n        if (!this.gridWidget) {\n            return;\n        }\n        const newOrientation = ((orientation === 0) ) ? 1  : 0 ;\n        if (this.gridWidget.orientation !== newOrientation) {\n            this.gridWidget.orientation = newOrientation;\n        }\n    }\n    applyLayout(layout) {\n        const restoreFocus = this.shouldRestoreFocus(this.container);\n        let layoutGroupsCount = 0;\n        function countGroups(groups) {\n            for (const group of groups) {\n                if (Array.isArray(group.groups)) {\n                    countGroups(group.groups);\n                }\n                else {\n                    layoutGroupsCount++;\n                }\n            }\n        }\n        countGroups(layout.groups);\n        let currentGroupViews = this.getGroups(2 );\n        if (layoutGroupsCount < currentGroupViews.length) {\n            const lastGroupInLayout = currentGroupViews[layoutGroupsCount - 1];\n            currentGroupViews.forEach((group, index) => {\n                if (index >= layoutGroupsCount) {\n                    this.mergeGroup(group, lastGroupInLayout);\n                }\n            });\n            currentGroupViews = this.getGroups(2 );\n        }\n        const activeGroup = this.activeGroup;\n        const gridDescriptor = createSerializedGrid({\n            orientation: this.toGridViewOrientation(layout.orientation, this.isTwoDimensionalGrid() ?\n                this.gridWidget.orientation :\n                orthogonal(this.gridWidget.orientation)\n            ),\n            groups: layout.groups\n        });\n        this.doCreateGridControlWithState(gridDescriptor, activeGroup.id, currentGroupViews);\n        this.doLayout(this._contentDimension);\n        this.updateContainer();\n        for (const groupView of this.getGroups(2 )) {\n            if (!currentGroupViews.includes(groupView)) {\n                this._onDidAddGroup.fire(groupView);\n            }\n        }\n        this.notifyGroupIndexChange();\n        if (restoreFocus) {\n            this._activeGroup.focus();\n        }\n    }\n    getLayout() {\n        const serializedGrid = this.gridWidget.serialize();\n        const orientation = serializedGrid.orientation === 1  ? 0  : 1 ;\n        const root = this.serializedNodeToGroupLayoutArgument(serializedGrid.root);\n        return {\n            orientation,\n            groups: root.groups\n        };\n    }\n    serializedNodeToGroupLayoutArgument(serializedNode) {\n        if (serializedNode.type === 'branch') {\n            return {\n                size: serializedNode.size,\n                groups: ( serializedNode.data.map(node => this.serializedNodeToGroupLayoutArgument(node)))\n            };\n        }\n        return { size: serializedNode.size };\n    }\n    shouldRestoreFocus(target) {\n        if (!target) {\n            return false;\n        }\n        const activeElement = document.activeElement;\n        if (activeElement === document.body) {\n            return true;\n        }\n        return isAncestor(activeElement, target);\n    }\n    isTwoDimensionalGrid() {\n        const views = this.gridWidget.getViews();\n        if (isGridBranchNode(views)) {\n            return ( views.children.some(child => isGridBranchNode(child)));\n        }\n        return false;\n    }\n    addGroup(location, direction, options) {\n        const locationView = this.assertGroupView(location);\n        const group = this.doAddGroup(locationView, direction);\n        if (options?.activate) {\n            this.doSetGroupActive(group);\n        }\n        return group;\n    }\n    doAddGroup(locationView, direction, groupToCopy) {\n        const shouldMaximize = this.groupViews.size > 1 && this.isGroupMaximized(locationView);\n        const newGroupView = this.doCreateGroupView(groupToCopy);\n        this.gridWidget.addView(newGroupView, this.getSplitSizingStyle(), locationView, this.toGridViewDirection(direction));\n        this.updateContainer();\n        this._onDidAddGroup.fire(newGroupView);\n        this.notifyGroupIndexChange();\n        if (shouldMaximize) {\n            this.arrangeGroups(0 , newGroupView);\n        }\n        return newGroupView;\n    }\n    getSplitSizingStyle() {\n        switch (this._partOptions.splitSizing) {\n            case 'distribute':\n                return Sizing.Distribute;\n            case 'split':\n                return Sizing.Split;\n            default:\n                return Sizing.Auto;\n        }\n    }\n    doCreateGroupView(from) {\n        let groupView;\n        if (from instanceof EditorGroupView) {\n            groupView = EditorGroupView.createCopy(from, this, this.count, this.instantiationService);\n        }\n        else if (isSerializedEditorGroupModel(from)) {\n            groupView = EditorGroupView.createFromSerialized(from, this, this.count, this.instantiationService);\n        }\n        else {\n            groupView = EditorGroupView.createNew(this, this.count, this.instantiationService);\n        }\n        this.groupViews.set(groupView.id, groupView);\n        const groupDisposables = ( new DisposableStore());\n        groupDisposables.add(groupView.onDidFocus(() => {\n            this.doSetGroupActive(groupView);\n        }));\n        groupDisposables.add(groupView.onDidModelChange(e => {\n            switch (e.kind) {\n                case 2 :\n                    this._onDidChangeGroupLocked.fire(groupView);\n                    break;\n                case 1 :\n                    this._onDidChangeGroupIndex.fire(groupView);\n                    break;\n            }\n        }));\n        groupDisposables.add(groupView.onDidActiveEditorChange(() => {\n            this.updateContainer();\n        }));\n        Event.once(groupView.onWillDispose)(() => {\n            dispose(groupDisposables);\n            this.groupViews.delete(groupView.id);\n            this.doUpdateMostRecentActive(groupView);\n        });\n        return groupView;\n    }\n    doSetGroupActive(group) {\n        if (this._activeGroup === group) {\n            return;\n        }\n        const previousActiveGroup = this._activeGroup;\n        this._activeGroup = group;\n        this.doUpdateMostRecentActive(group, true);\n        previousActiveGroup?.setActive(false);\n        group.setActive(true);\n        this.doRestoreGroup(group);\n        this._onDidChangeActiveGroup.fire(group);\n    }\n    doRestoreGroup(group) {\n        if (this.gridWidget) {\n            const viewSize = this.gridWidget.getViewSize(group);\n            if (viewSize.width === group.minimumWidth || viewSize.height === group.minimumHeight) {\n                this.arrangeGroups(0 , group);\n            }\n        }\n    }\n    doUpdateMostRecentActive(group, makeMostRecentlyActive) {\n        const index = this.mostRecentActiveGroups.indexOf(group.id);\n        if (index !== -1) {\n            this.mostRecentActiveGroups.splice(index, 1);\n        }\n        if (makeMostRecentlyActive) {\n            this.mostRecentActiveGroups.unshift(group.id);\n        }\n    }\n    toGridViewDirection(direction) {\n        switch (direction) {\n            case 0 : return 0 ;\n            case 1 : return 1 ;\n            case 2 : return 2 ;\n            case 3 : return 3 ;\n        }\n    }\n    toGridViewOrientation(orientation, fallback) {\n        if (typeof orientation === 'number') {\n            return orientation === 0  ? 1  : 0 ;\n        }\n        return fallback;\n    }\n    removeGroup(group) {\n        const groupView = this.assertGroupView(group);\n        if (this.count === 1) {\n            return;\n        }\n        if (groupView.isEmpty) {\n            return this.doRemoveEmptyGroup(groupView);\n        }\n        this.doRemoveGroupWithEditors(groupView);\n    }\n    doRemoveGroupWithEditors(groupView) {\n        const mostRecentlyActiveGroups = this.getGroups(1 );\n        let lastActiveGroup;\n        if (this._activeGroup === groupView) {\n            lastActiveGroup = mostRecentlyActiveGroups[1];\n        }\n        else {\n            lastActiveGroup = mostRecentlyActiveGroups[0];\n        }\n        this.mergeGroup(groupView, lastActiveGroup);\n    }\n    doRemoveEmptyGroup(groupView) {\n        const restoreFocus = this.shouldRestoreFocus(this.container);\n        if (this._activeGroup === groupView) {\n            const mostRecentlyActiveGroups = this.getGroups(1 );\n            const nextActiveGroup = mostRecentlyActiveGroups[1];\n            this.activateGroup(nextActiveGroup);\n        }\n        this.gridWidget.removeView(groupView, this.getSplitSizingStyle());\n        groupView.dispose();\n        if (restoreFocus) {\n            this._activeGroup.focus();\n        }\n        this.notifyGroupIndexChange();\n        this.updateContainer();\n        if (this.count === 1) {\n            firstOrDefault(this.groups)?.lock(false);\n        }\n        this._onDidRemoveGroup.fire(groupView);\n    }\n    moveGroup(group, location, direction) {\n        const sourceView = this.assertGroupView(group);\n        const targetView = this.assertGroupView(location);\n        if (sourceView.id === targetView.id) {\n            throw new Error('Cannot move group into its own');\n        }\n        const restoreFocus = this.shouldRestoreFocus(sourceView.element);\n        this.gridWidget.moveView(sourceView, this.getSplitSizingStyle(), targetView, this.toGridViewDirection(direction));\n        if (restoreFocus) {\n            sourceView.focus();\n        }\n        this._onDidMoveGroup.fire(sourceView);\n        this.notifyGroupIndexChange();\n        return sourceView;\n    }\n    copyGroup(group, location, direction) {\n        const groupView = this.assertGroupView(group);\n        const locationView = this.assertGroupView(location);\n        const restoreFocus = this.shouldRestoreFocus(groupView.element);\n        const copiedGroupView = this.doAddGroup(locationView, direction, groupView);\n        if (restoreFocus) {\n            copiedGroupView.focus();\n        }\n        return copiedGroupView;\n    }\n    mergeGroup(group, target, options) {\n        const sourceView = this.assertGroupView(group);\n        const targetView = this.assertGroupView(target);\n        const editors = [];\n        let index = (options && typeof options.index === 'number') ? options.index : targetView.count;\n        for (const editor of sourceView.editors) {\n            const inactive = !sourceView.isActive(editor) || this._activeGroup !== sourceView;\n            const sticky = sourceView.isSticky(editor);\n            const options = { index: !sticky ? index : undefined , inactive, preserveFocus: inactive };\n            editors.push({ editor, options });\n            index++;\n        }\n        if (options?.mode === 0 ) {\n            sourceView.copyEditors(editors, targetView);\n        }\n        else {\n            sourceView.moveEditors(editors, targetView);\n        }\n        if (sourceView.isEmpty && !sourceView.disposed ) {\n            this.removeGroup(sourceView);\n        }\n        return targetView;\n    }\n    mergeAllGroups(target = this.activeGroup) {\n        for (const group of this.getGroups(1 )) {\n            if (group === target) {\n                continue;\n            }\n            this.mergeGroup(group, target);\n        }\n        return target;\n    }\n    assertGroupView(group) {\n        let groupView;\n        if (typeof group === 'number') {\n            groupView = this.getGroup(group);\n        }\n        else {\n            groupView = group;\n        }\n        if (!groupView) {\n            throw new Error('Invalid editor group provided!');\n        }\n        return groupView;\n    }\n    createEditorDropTarget(container, delegate) {\n        return this.instantiationService.createInstance(EditorDropTarget, this, container, delegate);\n    }\n    get minimumWidth() { return Math.min(this.centeredLayoutWidget.minimumWidth, this.layoutService.getMaximumEditorDimensions().width); }\n    get maximumWidth() { return this.centeredLayoutWidget.maximumWidth; }\n    get minimumHeight() { return Math.min(this.centeredLayoutWidget.minimumHeight, this.layoutService.getMaximumEditorDimensions().height); }\n    get maximumHeight() { return this.centeredLayoutWidget.maximumHeight; }\n    get snap() { return this.layoutService.getPanelAlignment() === 'center'; }\n    get onDidChange() { return Event.any(this.centeredLayoutWidget.onDidChange, this.onDidSetGridWidget.event); }\n    get gridSeparatorBorder() {\n        return this.theme.getColor(EDITOR_GROUP_BORDER) || this.theme.getColor(contrastBorder) || Color.transparent;\n    }\n    updateStyles() {\n        const container = assertIsDefined(this.container);\n        container.style.backgroundColor = this.getColor(editorBackground) || '';\n        const separatorBorderStyle = { separatorBorder: this.gridSeparatorBorder, background: this.theme.getColor(EDITOR_PANE_BACKGROUND) || Color.transparent };\n        this.gridWidget.style(separatorBorderStyle);\n        this.centeredLayoutWidget.styles(separatorBorderStyle);\n    }\n    createContentArea(parent, options) {\n        this.element = parent;\n        this.container = document.createElement('div');\n        this.container.classList.add('content');\n        parent.appendChild(this.container);\n        this.doCreateGridControl(options);\n        this.centeredLayoutWidget = this._register(( new CenteredViewLayout(\n            this.container,\n            this.gridWidgetView,\n            this.profileMemento[EditorPart.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY]\n        )));\n        this._register(this.onDidChangeEditorPartOptions(e => this.centeredLayoutWidget.setFixedWidth(e.newPartOptions.centeredLayoutFixedWidth ?? false)));\n        this.setupDragAndDropSupport(parent, this.container);\n        this.whenReadyPromise.complete();\n        this._isReady = true;\n        Promises.settled(( this.groups.map(group => group.whenRestored))).finally(() => {\n            this.whenRestoredPromise.complete();\n        });\n        return this.container;\n    }\n    setupDragAndDropSupport(parent, container) {\n        this._register(this.createEditorDropTarget(container, Object.create(null)));\n        const overlay = document.createElement('div');\n        overlay.classList.add('drop-block-overlay');\n        parent.appendChild(overlay);\n        this._register(addDisposableGenericMouseDownListener(overlay, () => overlay.classList.remove('visible')));\n        this._register(CompositeDragAndDropObserver.INSTANCE.registerTarget(this.element, {\n            onDragStart: e => overlay.classList.add('visible'),\n            onDragEnd: e => overlay.classList.remove('visible')\n        }));\n        let horizontalOpenerTimeout;\n        let verticalOpenerTimeout;\n        let lastOpenHorizontalPosition;\n        let lastOpenVerticalPosition;\n        const openPartAtPosition = (position) => {\n            if (!this.layoutService.isVisible(\"workbench.parts.panel\" ) && position === this.layoutService.getPanelPosition()) {\n                this.layoutService.setPartHidden(false, \"workbench.parts.panel\" );\n            }\n            else if (!this.layoutService.isVisible(\"workbench.parts.auxiliarybar\" ) && position === ((this.layoutService.getSideBarPosition() === 1  ? 0  : 1) )) {\n                this.layoutService.setPartHidden(false, \"workbench.parts.auxiliarybar\" );\n            }\n        };\n        const clearAllTimeouts = () => {\n            if (horizontalOpenerTimeout) {\n                clearTimeout(horizontalOpenerTimeout);\n                horizontalOpenerTimeout = undefined;\n            }\n            if (verticalOpenerTimeout) {\n                clearTimeout(verticalOpenerTimeout);\n                verticalOpenerTimeout = undefined;\n            }\n        };\n        this._register(CompositeDragAndDropObserver.INSTANCE.registerTarget(overlay, {\n            onDragOver: e => {\n                EventHelper.stop(e.eventData, true);\n                if (e.eventData.dataTransfer) {\n                    e.eventData.dataTransfer.dropEffect = 'none';\n                }\n                const boundingRect = overlay.getBoundingClientRect();\n                let openHorizontalPosition = undefined;\n                let openVerticalPosition = undefined;\n                const proximity = 100;\n                if (e.eventData.clientX < boundingRect.left + proximity) {\n                    openHorizontalPosition = 0 ;\n                }\n                if (e.eventData.clientX > boundingRect.right - proximity) {\n                    openHorizontalPosition = 1 ;\n                }\n                if (e.eventData.clientY > boundingRect.bottom - proximity) {\n                    openVerticalPosition = 2 ;\n                }\n                if (horizontalOpenerTimeout && openHorizontalPosition !== lastOpenHorizontalPosition) {\n                    clearTimeout(horizontalOpenerTimeout);\n                    horizontalOpenerTimeout = undefined;\n                }\n                if (verticalOpenerTimeout && openVerticalPosition !== lastOpenVerticalPosition) {\n                    clearTimeout(verticalOpenerTimeout);\n                    verticalOpenerTimeout = undefined;\n                }\n                if (!horizontalOpenerTimeout && openHorizontalPosition !== undefined) {\n                    lastOpenHorizontalPosition = openHorizontalPosition;\n                    horizontalOpenerTimeout = setTimeout(() => openPartAtPosition(openHorizontalPosition), 200);\n                }\n                if (!verticalOpenerTimeout && openVerticalPosition !== undefined) {\n                    lastOpenVerticalPosition = openVerticalPosition;\n                    verticalOpenerTimeout = setTimeout(() => openPartAtPosition(openVerticalPosition), 200);\n                }\n            },\n            onDragLeave: () => clearAllTimeouts(),\n            onDragEnd: () => clearAllTimeouts(),\n            onDrop: () => clearAllTimeouts()\n        }));\n    }\n    centerLayout(active) {\n        this.centeredLayoutWidget.activate(active);\n        this._activeGroup.focus();\n    }\n    isLayoutCentered() {\n        if (this.centeredLayoutWidget) {\n            return this.centeredLayoutWidget.isActive();\n        }\n        return false;\n    }\n    doCreateGridControl(options) {\n        let restoreError = false;\n        if (!options || options.restorePreviousState) {\n            restoreError = !this.doCreateGridControlWithPreviousState();\n        }\n        if (!this.gridWidget || restoreError) {\n            const initialGroup = this.doCreateGroupView();\n            this.doSetGridWidget(( new SerializableGrid(initialGroup)));\n            this.doSetGroupActive(initialGroup);\n        }\n        this.updateContainer();\n        this.notifyGroupIndexChange();\n    }\n    doCreateGridControlWithPreviousState() {\n        const uiState = this.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY];\n        if (uiState?.serializedGrid) {\n            try {\n                this.mostRecentActiveGroups = uiState.mostRecentActiveGroups;\n                this.doCreateGridControlWithState(uiState.serializedGrid, uiState.activeGroup);\n                this._activeGroup.focus();\n            }\n            catch (error) {\n                onUnexpectedError(( new Error(\n                    `Error restoring editor grid widget: ${error} (with state: ${JSON.stringify(uiState)})`\n                )));\n                this.groupViews.forEach(group => group.dispose());\n                this.groupViews.clear();\n                this.mostRecentActiveGroups = [];\n                return false;\n            }\n        }\n        return true;\n    }\n    doCreateGridControlWithState(serializedGrid, activeGroupId, editorGroupViewsToReuse) {\n        let reuseGroupViews;\n        if (editorGroupViewsToReuse) {\n            reuseGroupViews = editorGroupViewsToReuse.slice(0);\n        }\n        else {\n            reuseGroupViews = [];\n        }\n        const groupViews = [];\n        const gridWidget = SerializableGrid.deserialize(serializedGrid, {\n            fromJSON: (serializedEditorGroup) => {\n                let groupView;\n                if (reuseGroupViews.length > 0) {\n                    groupView = reuseGroupViews.shift();\n                }\n                else {\n                    groupView = this.doCreateGroupView(serializedEditorGroup);\n                }\n                groupViews.push(groupView);\n                if (groupView.id === activeGroupId) {\n                    this.doSetGroupActive(groupView);\n                }\n                return groupView;\n            }\n        }, { styles: { separatorBorder: this.gridSeparatorBorder } });\n        if (!this._activeGroup) {\n            this.doSetGroupActive(groupViews[0]);\n        }\n        if (( this.mostRecentActiveGroups.some(groupId => !this.getGroup(groupId)))) {\n            this.mostRecentActiveGroups = ( groupViews.map(group => group.id));\n        }\n        this.doSetGridWidget(gridWidget);\n    }\n    doSetGridWidget(gridWidget) {\n        let boundarySashes = {};\n        if (this.gridWidget) {\n            boundarySashes = this.gridWidget.boundarySashes;\n            this.gridWidget.dispose();\n        }\n        this.gridWidget = gridWidget;\n        this.gridWidget.boundarySashes = boundarySashes;\n        this.gridWidgetView.gridWidget = gridWidget;\n        this._onDidChangeSizeConstraints.input = gridWidget.onDidChange;\n        this._onDidScroll.input = gridWidget.onDidScroll;\n        this.onDidSetGridWidget.fire(undefined);\n    }\n    updateContainer() {\n        const container = assertIsDefined(this.container);\n        container.classList.toggle('empty', this.isEmpty);\n    }\n    notifyGroupIndexChange() {\n        this.getGroups(2 ).forEach((group, index) => group.notifyIndexChanged(index));\n    }\n    get isEmpty() {\n        return this.count === 1 && this._activeGroup.isEmpty;\n    }\n    setBoundarySashes(sashes) {\n        this.gridWidget.boundarySashes = sashes;\n        this.centeredLayoutWidget.boundarySashes = sashes;\n    }\n    layout(width, height, top, left) {\n        this._top = top;\n        this._left = left;\n        const contentAreaSize = super.layoutContents(width, height).contentSize;\n        this.doLayout(Dimension.lift(contentAreaSize), top, left);\n    }\n    doLayout(dimension, top = this._top, left = this._left) {\n        this._contentDimension = dimension;\n        this.centeredLayoutWidget.layout(this._contentDimension.width, this._contentDimension.height, top, left);\n        this._onDidLayout.fire(dimension);\n    }\n    saveState() {\n        if (this.gridWidget) {\n            const uiState = {\n                serializedGrid: this.gridWidget.serialize(),\n                activeGroup: this._activeGroup.id,\n                mostRecentActiveGroups: this.mostRecentActiveGroups\n            };\n            if (this.isEmpty) {\n                delete this.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY];\n            }\n            else {\n                this.workspaceMemento[EditorPart.EDITOR_PART_UI_STATE_STORAGE_KEY] = uiState;\n            }\n        }\n        if (this.centeredLayoutWidget) {\n            const centeredLayoutState = this.centeredLayoutWidget.state;\n            if (this.centeredLayoutWidget.isDefault(centeredLayoutState)) {\n                delete this.profileMemento[EditorPart.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY];\n            }\n            else {\n                this.profileMemento[EditorPart.EDITOR_PART_CENTERED_VIEW_STORAGE_KEY] = centeredLayoutState;\n            }\n        }\n        super.saveState();\n    }\n    toJSON() {\n        return {\n            type: \"workbench.parts.editor\"\n        };\n    }\n    dispose() {\n        this.groupViews.forEach(group => group.dispose());\n        this.groupViews.clear();\n        this.gridWidget?.dispose();\n        super.dispose();\n    }\n};\nEditorPart = ( __decorate([\n    ( __param(0, IInstantiationService)),\n    ( __param(1, IThemeService)),\n    ( __param(2, IConfigurationService)),\n    ( __param(3, IStorageService)),\n    ( __param(4, IWorkbenchLayoutService))\n], EditorPart));\nexport { EditorPart };\n","import * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { EditorResourceAccessor, SideBySideEditor } from '../../../common/editor.js';\nimport { SideBySideEditorInput } from '../../../common/editor/sideBySideEditorInput.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { ExplorerFocusCondition, FilesExplorerFocusCondition, ExplorerFolderContext, TextFileContentProvider, VIEW_ID, ExplorerCompressedFocusContext, ExplorerCompressedFirstFocusContext, VIEWLET_ID, ExplorerCompressedLastFocusContext } from '../common/files.js';\nimport { IClipboardService } from 'monaco-editor/esm/vs/platform/clipboard/common/clipboardService.js';\nimport { toErrorMessage } from 'monaco-editor/esm/vs/base/common/errorMessage.js';\nimport { IListService } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { CommandsRegistry, ICommandService } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { KeybindingsRegistry } from 'monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js';\nimport { KeyChord } from 'monaco-editor/esm/vs/base/common/keyCodes.js';\nimport { isWeb, isWindows } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { ITextModelService } from 'monaco-editor/esm/vs/editor/common/services/resolverService.js';\nimport { IExplorerService, getMultiSelectedResources, getResourceForCommand, getOpenEditorsViewMultiSelection } from './files.js';\nimport { IWorkspaceEditingService } from '../../../services/workspaces/common/workspaceEditing.js';\nimport { getMultiSelectedEditorContexts } from '../../../browser/parts/editor/editorCommands.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { INotificationService, Severity } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { EditorContextKeys } from 'monaco-editor/esm/vs/editor/common/editorContextKeys.js';\nimport { IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { ILabelService } from 'monaco-editor/esm/vs/platform/label/common/label.js';\nimport { basename, joinPath, isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { dispose } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { coalesce } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { ICodeEditorService } from 'monaco-editor/esm/vs/editor/browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from 'monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { isCancellationError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { toAction } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { EditorResolution, EditorOpenSource } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport { hash } from 'monaco-editor/esm/vs/base/common/hash.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IPaneCompositePartService } from '../../../services/panecomposite/browser/panecomposite.js';\nimport { IViewsService } from '../../../common/views.js';\nimport { OPEN_TO_SIDE_COMMAND_ID, COMPARE_WITH_SAVED_COMMAND_ID, SELECT_FOR_COMPARE_COMMAND_ID, ResourceSelectedForCompareContext, COMPARE_SELECTED_COMMAND_ID, COMPARE_RESOURCE_COMMAND_ID, COPY_PATH_COMMAND_ID, COPY_RELATIVE_PATH_COMMAND_ID, REVEAL_IN_EXPLORER_COMMAND_ID, OPEN_WITH_EXPLORER_COMMAND_ID, SAVE_FILE_COMMAND_ID, SAVE_FILE_WITHOUT_FORMATTING_COMMAND_ID, SAVE_FILE_AS_COMMAND_ID, SAVE_ALL_COMMAND_ID, SAVE_ALL_IN_GROUP_COMMAND_ID, SAVE_FILES_COMMAND_ID, REVERT_FILE_COMMAND_ID, REMOVE_ROOT_FOLDER_COMMAND_ID, PREVIOUS_COMPRESSED_FOLDER, NEXT_COMPRESSED_FOLDER, FIRST_COMPRESSED_FOLDER, LAST_COMPRESSED_FOLDER, NEW_UNTITLED_FILE_COMMAND_ID, NEW_UNTITLED_FILE_LABEL, NEW_FILE_COMMAND_ID } from './fileConstants.js';\nimport '../../../../../../override/vs/platform/dialogs/common/dialogs.js';\nimport { RemoveRootFolderAction } from '../../../browser/actions/workspaceActions.js';\nimport { OpenEditorsView } from './views/openEditorsView.js';\nimport { IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200 ,\n    when: ExplorerFocusCondition,\n    primary: 2048  | 3 ,\n    mac: {\n        primary: 256  | 3\n    },\n    id: OPEN_TO_SIDE_COMMAND_ID, handler: async (accessor, resource) => {\n        const editorService = accessor.get(IEditorService);\n        const listService = accessor.get(IListService);\n        const fileService = accessor.get(IFileService);\n        const explorerService = accessor.get(IExplorerService);\n        const resources = getMultiSelectedResources(resource, listService, editorService, explorerService);\n        if (resources.length) {\n            const untitledResources = resources.filter(resource => resource.scheme === Schemas.untitled);\n            const fileResources = resources.filter(resource => resource.scheme !== Schemas.untitled);\n            const items = await Promise.all(( fileResources.map(async (resource) => {\n                const item = explorerService.findClosest(resource);\n                if (item) {\n                    return item;\n                }\n                return await fileService.stat(resource);\n            })));\n            const files = items.filter(i => !i.isDirectory);\n            const editors = ( files.map(f => ({\n                resource: f.resource,\n                options: { pinned: true }\n            }))).concat(...( untitledResources.map(\n                untitledResource => ({ resource: untitledResource, options: { pinned: true } })\n            )));\n            await editorService.openEditors(editors, SIDE_GROUP);\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200  + 10,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ( ExplorerFolderContext.toNegated()))),\n    primary: 3 ,\n    mac: {\n        primary: 2048  | 18\n    },\n    id: 'explorer.openAndPassFocus', handler: async (accessor, _resource) => {\n        const editorService = accessor.get(IEditorService);\n        const explorerService = accessor.get(IExplorerService);\n        const resources = explorerService.getContext(true);\n        if (resources.length) {\n            await editorService.openEditors(( resources.map(\n                r => ({ resource: r.resource, options: { preserveFocus: false, pinned: true } })\n            )));\n        }\n    }\n});\nconst COMPARE_WITH_SAVED_SCHEMA = 'showModifications';\nlet providerDisposables = [];\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: COMPARE_WITH_SAVED_COMMAND_ID,\n    when: undefined,\n    weight: 200 ,\n    primary: KeyChord(2048  | 41 , 34 ),\n    handler: async (accessor, resource) => {\n        const instantiationService = accessor.get(IInstantiationService);\n        const textModelService = accessor.get(ITextModelService);\n        const editorService = accessor.get(IEditorService);\n        const fileService = accessor.get(IFileService);\n        let registerEditorListener = false;\n        if (providerDisposables.length === 0) {\n            registerEditorListener = true;\n            const provider = instantiationService.createInstance(TextFileContentProvider);\n            providerDisposables.push(provider);\n            providerDisposables.push(textModelService.registerTextModelContentProvider(COMPARE_WITH_SAVED_SCHEMA, provider));\n        }\n        const uri = getResourceForCommand(resource, accessor.get(IListService), editorService);\n        if (uri && fileService.hasProvider(uri)) {\n            const name = basename(uri);\n            const editorLabel = ( nls.localize('modifiedLabel', \"{0} (in file) ↔ {1}\", name, name));\n            try {\n                await TextFileContentProvider.open(uri, COMPARE_WITH_SAVED_SCHEMA, editorLabel, editorService, { pinned: true });\n                if (registerEditorListener) {\n                    providerDisposables.push(editorService.onDidVisibleEditorsChange(() => {\n                        if (!( editorService.editors.some(\n                            editor => !!EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.SECONDARY, filterByScheme: COMPARE_WITH_SAVED_SCHEMA })\n                        ))) {\n                            providerDisposables = dispose(providerDisposables);\n                        }\n                    }));\n                }\n            }\n            catch {\n                providerDisposables = dispose(providerDisposables);\n            }\n        }\n    }\n});\nlet globalResourceToCompare;\nlet resourceSelectedForCompareContext;\nCommandsRegistry.registerCommand({\n    id: SELECT_FOR_COMPARE_COMMAND_ID,\n    handler: (accessor, resource) => {\n        const listService = accessor.get(IListService);\n        globalResourceToCompare = getResourceForCommand(resource, listService, accessor.get(IEditorService));\n        if (!resourceSelectedForCompareContext) {\n            resourceSelectedForCompareContext = ResourceSelectedForCompareContext.bindTo(accessor.get(IContextKeyService));\n        }\n        resourceSelectedForCompareContext.set(true);\n    }\n});\nCommandsRegistry.registerCommand({\n    id: COMPARE_SELECTED_COMMAND_ID,\n    handler: async (accessor, resource) => {\n        const editorService = accessor.get(IEditorService);\n        const explorerService = accessor.get(IExplorerService);\n        const resources = getMultiSelectedResources(resource, accessor.get(IListService), editorService, explorerService);\n        if (resources.length === 2) {\n            return editorService.openEditor({\n                original: { resource: resources[0] },\n                modified: { resource: resources[1] },\n                options: { pinned: true }\n            });\n        }\n        return true;\n    }\n});\nCommandsRegistry.registerCommand({\n    id: COMPARE_RESOURCE_COMMAND_ID,\n    handler: (accessor, resource) => {\n        const editorService = accessor.get(IEditorService);\n        const listService = accessor.get(IListService);\n        const rightResource = getResourceForCommand(resource, listService, editorService);\n        if (globalResourceToCompare && rightResource) {\n            editorService.openEditor({\n                original: { resource: globalResourceToCompare },\n                modified: { resource: rightResource },\n                options: { pinned: true }\n            });\n        }\n    }\n});\nasync function resourcesToClipboard(resources, relative, clipboardService, labelService, configurationService) {\n    if (resources.length) {\n        const lineDelimiter = isWindows ? '\\r\\n' : '\\n';\n        let separator = undefined;\n        if (relative) {\n            const relativeSeparator = configurationService.getValue('explorer.copyRelativePathSeparator');\n            if (relativeSeparator === '/' || relativeSeparator === '\\\\') {\n                separator = relativeSeparator;\n            }\n        }\n        const text = ( resources.map(\n            resource => labelService.getUriLabel(resource, { relative, noPrefix: true, separator })\n        )).join(lineDelimiter);\n        await clipboardService.writeText(text);\n    }\n}\nconst copyPathCommandHandler = async (accessor, resource) => {\n    const resources = getMultiSelectedResources(resource, accessor.get(IListService), accessor.get(IEditorService), accessor.get(IExplorerService));\n    await resourcesToClipboard(resources, false, accessor.get(IClipboardService), accessor.get(ILabelService), accessor.get(IConfigurationService));\n};\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200 ,\n    when: ( EditorContextKeys.focus.toNegated()),\n    primary: 2048  | 512  | 33 ,\n    win: {\n        primary: 1024  | 512  | 33\n    },\n    id: COPY_PATH_COMMAND_ID,\n    handler: copyPathCommandHandler\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200 ,\n    when: EditorContextKeys.focus,\n    primary: KeyChord(2048  | 41 , 2048  | 512  | 33 ),\n    win: {\n        primary: 1024  | 512  | 33\n    },\n    id: COPY_PATH_COMMAND_ID,\n    handler: copyPathCommandHandler\n});\nconst copyRelativePathCommandHandler = async (accessor, resource) => {\n    const resources = getMultiSelectedResources(resource, accessor.get(IListService), accessor.get(IEditorService), accessor.get(IExplorerService));\n    await resourcesToClipboard(resources, true, accessor.get(IClipboardService), accessor.get(ILabelService), accessor.get(IConfigurationService));\n};\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200 ,\n    when: ( EditorContextKeys.focus.toNegated()),\n    primary: 2048  | 1024  | 512  | 33 ,\n    win: {\n        primary: KeyChord(2048  | 41 , 2048  | 1024  | 33 )\n    },\n    id: COPY_RELATIVE_PATH_COMMAND_ID,\n    handler: copyRelativePathCommandHandler\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200 ,\n    when: EditorContextKeys.focus,\n    primary: KeyChord(2048  | 41 , 2048  | 1024  | 512  | 33 ),\n    win: {\n        primary: KeyChord(2048  | 41 , 2048  | 1024  | 33 )\n    },\n    id: COPY_RELATIVE_PATH_COMMAND_ID,\n    handler: copyRelativePathCommandHandler\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200 ,\n    when: undefined,\n    primary: KeyChord(2048  | 41 , 46 ),\n    id: 'workbench.action.files.copyPathOfActiveFile',\n    handler: async (accessor) => {\n        const editorService = accessor.get(IEditorService);\n        const activeInput = editorService.activeEditor;\n        const resource = EditorResourceAccessor.getOriginalUri(activeInput, { supportSideBySide: SideBySideEditor.PRIMARY });\n        const resources = resource ? [resource] : [];\n        await resourcesToClipboard(resources, false, accessor.get(IClipboardService), accessor.get(ILabelService), accessor.get(IConfigurationService));\n    }\n});\nCommandsRegistry.registerCommand({\n    id: REVEAL_IN_EXPLORER_COMMAND_ID,\n    handler: async (accessor, resource) => {\n        const viewService = accessor.get(IViewsService);\n        const contextService = accessor.get(IWorkspaceContextService);\n        const explorerService = accessor.get(IExplorerService);\n        const uri = getResourceForCommand(resource, accessor.get(IListService), accessor.get(IEditorService));\n        if (uri && contextService.isInsideWorkspace(uri)) {\n            const explorerView = await viewService.openView(VIEW_ID, false);\n            if (explorerView) {\n                explorerView.setExpanded(true);\n                await explorerService.select(uri, 'force');\n                explorerView.focus();\n            }\n        }\n        else {\n            const openEditorsView = await viewService.openView(OpenEditorsView.ID, false);\n            if (openEditorsView) {\n                openEditorsView.setExpanded(true);\n                openEditorsView.focus();\n            }\n        }\n    }\n});\nCommandsRegistry.registerCommand({\n    id: OPEN_WITH_EXPLORER_COMMAND_ID,\n    handler: async (accessor, resource) => {\n        const editorService = accessor.get(IEditorService);\n        const uri = getResourceForCommand(resource, accessor.get(IListService), accessor.get(IEditorService));\n        if (uri) {\n            return editorService.openEditor({ resource: uri, options: { override: EditorResolution.PICK, source: EditorOpenSource.USER } });\n        }\n        return undefined;\n    }\n});\nasync function saveSelectedEditors(accessor, options) {\n    const listService = accessor.get(IListService);\n    const editorGroupService = accessor.get(IEditorGroupsService);\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const textFileService = accessor.get(ITextFileService);\n    let editors = getOpenEditorsViewMultiSelection(listService);\n    if (!editors) {\n        const activeGroup = editorGroupService.activeGroup;\n        if (activeGroup.activeEditor) {\n            editors = [];\n            if (activeGroup.activeEditor instanceof SideBySideEditorInput &&\n                !options?.saveAs && !(activeGroup.activeEditor.primary.hasCapability(4 ) || activeGroup.activeEditor.secondary.hasCapability(4 ))) {\n                editors.push({ groupId: activeGroup.id, editor: activeGroup.activeEditor.primary });\n                editors.push({ groupId: activeGroup.id, editor: activeGroup.activeEditor.secondary });\n            }\n            else {\n                editors.push({ groupId: activeGroup.id, editor: activeGroup.activeEditor });\n            }\n        }\n    }\n    if (!editors || editors.length === 0) {\n        return;\n    }\n    await doSaveEditors(accessor, editors, options);\n    const focusedCodeEditor = codeEditorService.getFocusedCodeEditor();\n    if (focusedCodeEditor instanceof EmbeddedCodeEditorWidget) {\n        const resource = focusedCodeEditor.getModel()?.uri;\n        if (resource && !( editors.some(\n            ({ editor }) => isEqual(EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY }), resource)\n        ))) {\n            const model = textFileService.files.get(resource);\n            if (!model?.isReadonly()) {\n                await textFileService.save(resource, options);\n            }\n        }\n    }\n}\nfunction saveDirtyEditorsOfGroups(accessor, groups, options) {\n    const dirtyEditors = [];\n    for (const group of groups) {\n        for (const editor of group.getEditors(0 )) {\n            if (editor.isDirty()) {\n                dirtyEditors.push({ groupId: group.id, editor });\n            }\n        }\n    }\n    return doSaveEditors(accessor, dirtyEditors, options);\n}\nasync function doSaveEditors(accessor, editors, options) {\n    const editorService = accessor.get(IEditorService);\n    const notificationService = accessor.get(INotificationService);\n    const instantiationService = accessor.get(IInstantiationService);\n    try {\n        await editorService.save(editors, options);\n    }\n    catch (error) {\n        if (!isCancellationError(error)) {\n            notificationService.notify({\n                id: ( editors.map(({ editor }) => hash(editor.resource?.toString()))).join(),\n                severity: Severity.Error,\n                message: ( nls.localize(\n                    { key: 'genericSaveError', comment: ['{0} is the resource that failed to save and {1} the error message'] },\n                    \"Failed to save '{0}': {1}\",\n                    ( editors.map(({ editor }) => editor.getName())).join(', '),\n                    toErrorMessage(error, false)\n                )),\n                actions: {\n                    primary: [\n                        toAction({ id: 'workbench.action.files.saveEditors', label: ( nls.localize('retry', \"Retry\")), run: () => instantiationService.invokeFunction(accessor => doSaveEditors(accessor, editors, options)) }),\n                        toAction({ id: 'workbench.action.files.revertEditors', label: ( nls.localize('discard', \"Discard\")), run: () => editorService.revert(editors) })\n                    ]\n                }\n            });\n        }\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    when: undefined,\n    weight: 200 ,\n    primary: 2048  | 49 ,\n    id: SAVE_FILE_COMMAND_ID,\n    handler: accessor => {\n        return saveSelectedEditors(accessor, { reason: 1 , force: true  });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    when: undefined,\n    weight: 200 ,\n    primary: KeyChord(2048  | 41 , 49 ),\n    win: { primary: KeyChord(2048  | 41 , 2048  | 1024  | 49 ) },\n    id: SAVE_FILE_WITHOUT_FORMATTING_COMMAND_ID,\n    handler: accessor => {\n        return saveSelectedEditors(accessor, { reason: 1 , force: true , skipSaveParticipants: true });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: SAVE_FILE_AS_COMMAND_ID,\n    weight: 200 ,\n    when: undefined,\n    primary: 2048  | 1024  | 49 ,\n    handler: accessor => {\n        return saveSelectedEditors(accessor, { reason: 1 , saveAs: true });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    when: undefined,\n    weight: 200 ,\n    primary: undefined,\n    mac: { primary: 2048  | 512  | 49  },\n    win: { primary: KeyChord(2048  | 41 , 49 ) },\n    id: SAVE_ALL_COMMAND_ID,\n    handler: accessor => {\n        return saveDirtyEditorsOfGroups(accessor, accessor.get(IEditorGroupsService).getGroups(1 ), { reason: 1  });\n    }\n});\nCommandsRegistry.registerCommand({\n    id: SAVE_ALL_IN_GROUP_COMMAND_ID,\n    handler: (accessor, _, editorContext) => {\n        const editorGroupService = accessor.get(IEditorGroupsService);\n        const contexts = getMultiSelectedEditorContexts(editorContext, accessor.get(IListService), accessor.get(IEditorGroupsService));\n        let groups = undefined;\n        if (!contexts.length) {\n            groups = editorGroupService.getGroups(1 );\n        }\n        else {\n            groups = coalesce(( contexts.map(context => editorGroupService.getGroup(context.groupId))));\n        }\n        return saveDirtyEditorsOfGroups(accessor, groups, { reason: 1  });\n    }\n});\nCommandsRegistry.registerCommand({\n    id: SAVE_FILES_COMMAND_ID,\n    handler: async (accessor) => {\n        const editorService = accessor.get(IEditorService);\n        const res = await editorService.saveAll({ includeUntitled: false, reason: 1  });\n        return res.success;\n    }\n});\nCommandsRegistry.registerCommand({\n    id: REVERT_FILE_COMMAND_ID,\n    handler: async (accessor) => {\n        const notificationService = accessor.get(INotificationService);\n        const listService = accessor.get(IListService);\n        const editorGroupService = accessor.get(IEditorGroupsService);\n        const editorService = accessor.get(IEditorService);\n        let editors = getOpenEditorsViewMultiSelection(listService);\n        if (!editors) {\n            const activeGroup = editorGroupService.activeGroup;\n            if (activeGroup.activeEditor) {\n                editors = [{ groupId: activeGroup.id, editor: activeGroup.activeEditor }];\n            }\n        }\n        if (!editors || editors.length === 0) {\n            return;\n        }\n        try {\n            await editorService.revert(editors.filter(({ editor }) => !editor.hasCapability(4 ) ), { force: true });\n        }\n        catch (error) {\n            notificationService.error(( nls.localize('genericRevertError', \"Failed to revert '{0}': {1}\", ( editors.map(({ editor }) => editor.getName())).join(', '), toErrorMessage(error, false))));\n        }\n    }\n});\nCommandsRegistry.registerCommand({\n    id: REMOVE_ROOT_FOLDER_COMMAND_ID,\n    handler: (accessor, resource) => {\n        const workspaceEditingService = accessor.get(IWorkspaceEditingService);\n        const contextService = accessor.get(IWorkspaceContextService);\n        const uriIdentityService = accessor.get(IUriIdentityService);\n        const workspace = contextService.getWorkspace();\n        const resources = getMultiSelectedResources(resource, accessor.get(IListService), accessor.get(IEditorService), accessor.get(IExplorerService)).filter(resource => ( workspace.folders.some(folder => uriIdentityService.extUri.isEqual(folder.uri, resource)))\n        );\n        if (resources.length === 0) {\n            const commandService = accessor.get(ICommandService);\n            return commandService.executeCommand(RemoveRootFolderAction.ID);\n        }\n        return workspaceEditingService.removeFolders(resources);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200  + 10,\n    when: ( ContextKeyExpr.and(\n        FilesExplorerFocusCondition,\n        ExplorerCompressedFocusContext,\n        ( ExplorerCompressedFirstFocusContext.negate())\n    )),\n    primary: 15 ,\n    id: PREVIOUS_COMPRESSED_FOLDER,\n    handler: accessor => {\n        const paneCompositeService = accessor.get(IPaneCompositePartService);\n        const viewlet = paneCompositeService.getActivePaneComposite(0 );\n        if (viewlet?.getId() !== VIEWLET_ID) {\n            return;\n        }\n        const explorer = viewlet.getViewPaneContainer();\n        const view = explorer.getExplorerView();\n        view.previousCompressedStat();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200  + 10,\n    when: ( ContextKeyExpr.and(\n        FilesExplorerFocusCondition,\n        ExplorerCompressedFocusContext,\n        ( ExplorerCompressedLastFocusContext.negate())\n    )),\n    primary: 17 ,\n    id: NEXT_COMPRESSED_FOLDER,\n    handler: accessor => {\n        const paneCompositeService = accessor.get(IPaneCompositePartService);\n        const viewlet = paneCompositeService.getActivePaneComposite(0 );\n        if (viewlet?.getId() !== VIEWLET_ID) {\n            return;\n        }\n        const explorer = viewlet.getViewPaneContainer();\n        const view = explorer.getExplorerView();\n        view.nextCompressedStat();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200  + 10,\n    when: ( ContextKeyExpr.and(\n        FilesExplorerFocusCondition,\n        ExplorerCompressedFocusContext,\n        ( ExplorerCompressedFirstFocusContext.negate())\n    )),\n    primary: 14 ,\n    id: FIRST_COMPRESSED_FOLDER,\n    handler: accessor => {\n        const paneCompositeService = accessor.get(IPaneCompositePartService);\n        const viewlet = paneCompositeService.getActivePaneComposite(0 );\n        if (viewlet?.getId() !== VIEWLET_ID) {\n            return;\n        }\n        const explorer = viewlet.getViewPaneContainer();\n        const view = explorer.getExplorerView();\n        view.firstCompressedStat();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200  + 10,\n    when: ( ContextKeyExpr.and(\n        FilesExplorerFocusCondition,\n        ExplorerCompressedFocusContext,\n        ( ExplorerCompressedLastFocusContext.negate())\n    )),\n    primary: 13 ,\n    id: LAST_COMPRESSED_FOLDER,\n    handler: accessor => {\n        const paneCompositeService = accessor.get(IPaneCompositePartService);\n        const viewlet = paneCompositeService.getActivePaneComposite(0 );\n        if (viewlet?.getId() !== VIEWLET_ID) {\n            return;\n        }\n        const explorer = viewlet.getViewPaneContainer();\n        const view = explorer.getExplorerView();\n        view.lastCompressedStat();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    weight: 200 ,\n    when: null,\n    primary: isWeb ? ((isWindows ? KeyChord(2048  | 41 , 44 ) : 2048  | 512  | 44) ) : 2048  | 44 ,\n    secondary: isWeb ? [2048  | 44 ] : undefined,\n    id: NEW_UNTITLED_FILE_COMMAND_ID,\n    description: {\n        description: NEW_UNTITLED_FILE_LABEL,\n        args: [\n            {\n                isOptional: true,\n                name: 'New Untitled Text File arguments',\n                description: 'The editor view type or language ID if known',\n                schema: {\n                    'type': 'object',\n                    'properties': {\n                        'viewType': {\n                            'type': 'string'\n                        },\n                        'languageId': {\n                            'type': 'string'\n                        }\n                    }\n                }\n            }\n        ]\n    },\n    handler: async (accessor, args) => {\n        const editorService = accessor.get(IEditorService);\n        await editorService.openEditor({\n            resource: undefined,\n            options: {\n                override: args?.viewType,\n                pinned: true\n            },\n            languageId: args?.languageId,\n        });\n    }\n});\nCommandsRegistry.registerCommand({\n    id: NEW_FILE_COMMAND_ID,\n    handler: async (accessor, args) => {\n        const editorService = accessor.get(IEditorService);\n        const dialogService = accessor.get(IFileDialogService);\n        const fileService = accessor.get(IFileService);\n        const createFileLocalized = ( nls.localize('newFileCommand.saveLabel', \"Create File\"));\n        const defaultFileUri = joinPath(await dialogService.defaultFilePath(), args?.fileName ?? 'Untitled.txt');\n        const saveUri = await dialogService.showSaveDialog({ saveLabel: createFileLocalized, title: createFileLocalized, defaultUri: defaultFileUri });\n        if (!saveUri) {\n            return;\n        }\n        await fileService.createFile(saveUri, undefined, { overwrite: true });\n        await editorService.openEditor({\n            resource: saveUri,\n            options: {\n                override: args?.viewType,\n                pinned: true\n            },\n            languageId: args?.languageId,\n        });\n    }\n});\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, findViewStateForEditor, isResourceEditorInput } from '../../../../common/editor.js';\nimport { AbstractTextResourceEditorInput } from '../../../../common/editor/textResourceEditorInput.js';\nimport { BinaryEditorModel } from '../../../../common/editor/binaryEditorModel.js';\nimport { getLargeFileConfirmationLimit, ByteSize, IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { ITextFileService } from '../../../../services/textfile/common/textfiles.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { DisposableStore, dispose } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ITextModelService } from 'monaco-editor/esm/vs/editor/common/services/resolverService.js';\nimport { FILE_EDITOR_INPUT_ID, BINARY_FILE_EDITOR_ID, TEXT_FILE_EDITOR_ID } from '../../common/files.js';\nimport { ILabelService } from 'monaco-editor/esm/vs/platform/label/common/label.js';\nimport { IFilesConfigurationService } from '../../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { createTextBufferFactory } from 'monaco-editor/esm/vs/editor/common/model/textModel.js';\nimport { IPathService } from '../../../../services/path/common/pathService.js';\nimport { ITextResourceConfigurationService } from 'monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js';\nimport { isConfigured } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nlet FileEditorInput = class FileEditorInput extends AbstractTextResourceEditorInput {\n    get typeId() {\n        return FILE_EDITOR_INPUT_ID;\n    }\n    get editorId() {\n        return DEFAULT_EDITOR_ASSOCIATION.id;\n    }\n    get capabilities() {\n        let capabilities = 32 ;\n        if (this.model) {\n            if (this.model.isReadonly()) {\n                capabilities |= 2 ;\n            }\n        }\n        else {\n            if (this.fileService.hasProvider(this.resource)) {\n                if (this.filesConfigurationService.isReadonly(this.resource)) {\n                    capabilities |= 2 ;\n                }\n            }\n            else {\n                capabilities |= 4 ;\n            }\n        }\n        if (!((capabilities & 2) )) {\n            capabilities |= 128 ;\n        }\n        return capabilities;\n    }\n    constructor(resource, preferredResource, preferredName, preferredDescription, preferredEncoding, preferredLanguageId, preferredContents, instantiationService, textFileService, textModelResolverService, labelService, fileService, filesConfigurationService, editorService, pathService, textResourceConfigurationService) {\n        super(resource, preferredResource, editorService, textFileService, labelService, fileService, filesConfigurationService);\n        this.instantiationService = instantiationService;\n        this.textModelResolverService = textModelResolverService;\n        this.pathService = pathService;\n        this.textResourceConfigurationService = textResourceConfigurationService;\n        this.forceOpenAs = 0 ;\n        this.model = undefined;\n        this.cachedTextFileModelReference = undefined;\n        this.modelListeners = this._register(( new DisposableStore()));\n        this.model = this.textFileService.files.get(resource);\n        if (preferredName) {\n            this.setPreferredName(preferredName);\n        }\n        if (preferredDescription) {\n            this.setPreferredDescription(preferredDescription);\n        }\n        if (preferredEncoding) {\n            this.setPreferredEncoding(preferredEncoding);\n        }\n        if (preferredLanguageId) {\n            this.setPreferredLanguageId(preferredLanguageId);\n        }\n        if (typeof preferredContents === 'string') {\n            this.setPreferredContents(preferredContents);\n        }\n        this._register(this.textFileService.files.onDidCreate(model => this.onDidCreateTextFileModel(model)));\n        if (this.model) {\n            this.registerModelListeners(this.model);\n        }\n    }\n    onDidCreateTextFileModel(model) {\n        if (isEqual(model.resource, this.resource)) {\n            this.model = model;\n            this.registerModelListeners(model);\n        }\n    }\n    registerModelListeners(model) {\n        this.modelListeners.clear();\n        this.modelListeners.add(model.onDidChangeDirty(() => this._onDidChangeDirty.fire()));\n        this.modelListeners.add(model.onDidChangeReadonly(() => this._onDidChangeCapabilities.fire()));\n        this.modelListeners.add(model.onDidSaveError(() => this._onDidChangeDirty.fire()));\n        this.modelListeners.add(Event.once(model.onWillDispose)(() => {\n            this.modelListeners.clear();\n            this.model = undefined;\n        }));\n    }\n    getName() {\n        return this.preferredName || super.getName();\n    }\n    setPreferredName(name) {\n        if (!this.allowLabelOverride()) {\n            return;\n        }\n        if (this.preferredName !== name) {\n            this.preferredName = name;\n            this._onDidChangeLabel.fire();\n        }\n    }\n    allowLabelOverride() {\n        return this.resource.scheme !== this.pathService.defaultUriScheme &&\n            this.resource.scheme !== Schemas.vscodeUserData &&\n            this.resource.scheme !== Schemas.file &&\n            this.resource.scheme !== Schemas.vscodeRemote;\n    }\n    getPreferredName() {\n        return this.preferredName;\n    }\n    isReadonly() {\n        return this.model ? this.model.isReadonly() : this.filesConfigurationService.isReadonly(this.resource);\n    }\n    getDescription(verbosity) {\n        return this.preferredDescription || super.getDescription(verbosity);\n    }\n    setPreferredDescription(description) {\n        if (!this.allowLabelOverride()) {\n            return;\n        }\n        if (this.preferredDescription !== description) {\n            this.preferredDescription = description;\n            this._onDidChangeLabel.fire();\n        }\n    }\n    getPreferredDescription() {\n        return this.preferredDescription;\n    }\n    getEncoding() {\n        if (this.model) {\n            return this.model.getEncoding();\n        }\n        return this.preferredEncoding;\n    }\n    getPreferredEncoding() {\n        return this.preferredEncoding;\n    }\n    async setEncoding(encoding, mode) {\n        this.setPreferredEncoding(encoding);\n        return this.model?.setEncoding(encoding, mode);\n    }\n    setPreferredEncoding(encoding) {\n        this.preferredEncoding = encoding;\n        this.setForceOpenAsText();\n    }\n    getLanguageId() {\n        if (this.model) {\n            return this.model.getLanguageId();\n        }\n        return this.preferredLanguageId;\n    }\n    getPreferredLanguageId() {\n        return this.preferredLanguageId;\n    }\n    setLanguageId(languageId, source) {\n        this.setPreferredLanguageId(languageId);\n        this.model?.setLanguageId(languageId, source);\n    }\n    setPreferredLanguageId(languageId) {\n        this.preferredLanguageId = languageId;\n        this.setForceOpenAsText();\n    }\n    setPreferredContents(contents) {\n        this.preferredContents = contents;\n        this.setForceOpenAsText();\n    }\n    setForceOpenAsText() {\n        this.forceOpenAs = 1 ;\n    }\n    setForceOpenAsBinary() {\n        this.forceOpenAs = 2 ;\n    }\n    isDirty() {\n        return !!(this.model?.isDirty());\n    }\n    isSaving() {\n        if (this.model?.hasState(0 ) || this.model?.hasState(3 ) || this.model?.hasState(5 )) {\n            return false;\n        }\n        if (this.filesConfigurationService.getAutoSaveMode() === 1 ) {\n            return true;\n        }\n        return super.isSaving();\n    }\n    prefersEditorPane(editorPanes) {\n        if (this.forceOpenAs === 2 ) {\n            return editorPanes.find(editorPane => editorPane.typeId === BINARY_FILE_EDITOR_ID);\n        }\n        return editorPanes.find(editorPane => editorPane.typeId === TEXT_FILE_EDITOR_ID);\n    }\n    resolve(options) {\n        if (this.forceOpenAs === 2 ) {\n            return this.doResolveAsBinary();\n        }\n        return this.doResolveAsText(options);\n    }\n    async doResolveAsText(options) {\n        try {\n            const preferredContents = this.preferredContents;\n            this.preferredContents = undefined;\n            await this.textFileService.files.resolve(this.resource, {\n                languageId: this.preferredLanguageId,\n                encoding: this.preferredEncoding,\n                contents: typeof preferredContents === 'string' ? createTextBufferFactory(preferredContents) : undefined,\n                reload: { async: true },\n                allowBinary: this.forceOpenAs === 1 ,\n                reason: 1 ,\n                limits: this.ensureLimits(options)\n            });\n            if (!this.cachedTextFileModelReference) {\n                this.cachedTextFileModelReference = await this.textModelResolverService.createModelReference(this.resource);\n            }\n            const model = this.cachedTextFileModelReference.object;\n            if (this.isDisposed()) {\n                this.disposeModelReference();\n            }\n            return model;\n        }\n        catch (error) {\n            if (error.textFileOperationResult === 0 ) {\n                return this.doResolveAsBinary();\n            }\n            throw error;\n        }\n    }\n    ensureLimits(options) {\n        if (options?.limits) {\n            return options.limits;\n        }\n        const defaultSizeLimit = getLargeFileConfirmationLimit(this.resource);\n        let configuredSizeLimit = undefined;\n        const configuredSizeLimitMb = this.textResourceConfigurationService.inspect(this.resource, null, 'workbench.editorLargeFileConfirmation');\n        if (isConfigured(configuredSizeLimitMb)) {\n            configuredSizeLimit = configuredSizeLimitMb.value * ByteSize.MB;\n        }\n        return {\n            size: configuredSizeLimit ?? defaultSizeLimit\n        };\n    }\n    async doResolveAsBinary() {\n        const model = this.instantiationService.createInstance(BinaryEditorModel, this.preferredResource, this.getName());\n        await model.resolve();\n        return model;\n    }\n    isResolved() {\n        return !!this.model;\n    }\n    async rename(group, target) {\n        return {\n            editor: {\n                resource: target,\n                encoding: this.getEncoding(),\n                options: {\n                    viewState: findViewStateForEditor(this, group, this.editorService)\n                }\n            }\n        };\n    }\n    toUntyped(options) {\n        const untypedInput = {\n            resource: this.preferredResource,\n            forceFile: true,\n            options: {\n                override: this.editorId\n            }\n        };\n        if (typeof options?.preserveViewState === 'number') {\n            untypedInput.encoding = this.getEncoding();\n            untypedInput.languageId = this.getLanguageId();\n            untypedInput.contents = (() => {\n                const model = this.textFileService.files.get(this.resource);\n                if (model?.isDirty()) {\n                    return model.textEditorModel.getValue();\n                }\n                return undefined;\n            })();\n            untypedInput.options = {\n                ...untypedInput.options,\n                viewState: findViewStateForEditor(this, options.preserveViewState, this.editorService)\n            };\n        }\n        return untypedInput;\n    }\n    matches(otherInput) {\n        if (this === otherInput) {\n            return true;\n        }\n        if (otherInput instanceof FileEditorInput) {\n            return isEqual(otherInput.resource, this.resource);\n        }\n        if (isResourceEditorInput(otherInput)) {\n            return super.matches(otherInput);\n        }\n        return false;\n    }\n    dispose() {\n        this.model = undefined;\n        this.disposeModelReference();\n        super.dispose();\n    }\n    disposeModelReference() {\n        dispose(this.cachedTextFileModelReference);\n        this.cachedTextFileModelReference = undefined;\n    }\n};\nFileEditorInput = ( __decorate([\n    ( __param(7, IInstantiationService)),\n    ( __param(8, ITextFileService)),\n    ( __param(9, ITextModelService)),\n    ( __param(10, ILabelService)),\n    ( __param(11, IFileService)),\n    ( __param(12, IFilesConfigurationService)),\n    ( __param(13, IEditorService)),\n    ( __param(14, IPathService)),\n    ( __param(15, ITextResourceConfigurationService))\n], FileEditorInput));\nexport { FileEditorInput };\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { toErrorMessage } from 'monaco-editor/esm/vs/base/common/errorMessage.js';\nimport { isEqual, basename } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { Action } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { ITextFileService } from '../../../../services/textfile/common/textfiles.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { Disposable, dispose } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ITextModelService } from 'monaco-editor/esm/vs/editor/common/services/resolverService.js';\nimport { ResourceMap } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { DiffEditorInput } from '../../../../common/editor/diffEditorInput.js';\nimport { RawContextKey, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { TextFileContentProvider } from '../../common/files.js';\nimport { FileEditorInput } from './fileEditorInput.js';\nimport { SAVE_FILE_AS_LABEL } from '../fileConstants.js';\nimport { Severity, INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IOpenerService } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IProductService } from 'monaco-editor/esm/vs/platform/product/common/productService.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { isWindows } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { IPreferencesService } from '../../../../services/preferences/common/preferences.js';\nimport { SideBySideEditor } from '../../../../common/editor.js';\nimport { hash } from 'monaco-editor/esm/vs/base/common/hash.js';\nconst CONFLICT_RESOLUTION_CONTEXT = 'saveConflictResolutionContext';\nconst CONFLICT_RESOLUTION_SCHEME = 'conflictResolution';\nconst LEARN_MORE_DIRTY_WRITE_IGNORE_KEY = 'learnMoreDirtyWriteError';\nconst conflictEditorHelp = ( (localize(\n    'userGuide',\n    \"Use the actions in the editor tool bar to either undo your changes or overwrite the content of the file with your changes.\"\n)));\nlet TextFileSaveErrorHandler = class TextFileSaveErrorHandler extends Disposable {\n    constructor(notificationService, textFileService, contextKeyService, editorService, textModelService, instantiationService, storageService) {\n        super();\n        this.notificationService = notificationService;\n        this.textFileService = textFileService;\n        this.contextKeyService = contextKeyService;\n        this.editorService = editorService;\n        this.instantiationService = instantiationService;\n        this.storageService = storageService;\n        this.messages = ( (new ResourceMap()));\n        this.conflictResolutionContext = ( (new RawContextKey(CONFLICT_RESOLUTION_CONTEXT, false, true))).bindTo(this.contextKeyService);\n        this.activeConflictResolutionResource = undefined;\n        const provider = this._register(instantiationService.createInstance(TextFileContentProvider));\n        this._register(textModelService.registerTextModelContentProvider(CONFLICT_RESOLUTION_SCHEME, provider));\n        this.textFileService.files.saveErrorHandler = this;\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.textFileService.files.onDidSave(e => this.onFileSavedOrReverted(e.model.resource)));\n        this._register(this.textFileService.files.onDidRevert(model => this.onFileSavedOrReverted(model.resource)));\n        this._register(this.editorService.onDidActiveEditorChange(() => this.onActiveEditorChanged()));\n    }\n    onActiveEditorChanged() {\n        let isActiveEditorSaveConflictResolution = false;\n        let activeConflictResolutionResource;\n        const activeInput = this.editorService.activeEditor;\n        if (activeInput instanceof DiffEditorInput) {\n            const resource = activeInput.original.resource;\n            if (resource?.scheme === CONFLICT_RESOLUTION_SCHEME) {\n                isActiveEditorSaveConflictResolution = true;\n                activeConflictResolutionResource = activeInput.modified.resource;\n            }\n        }\n        this.conflictResolutionContext.set(isActiveEditorSaveConflictResolution);\n        this.activeConflictResolutionResource = activeConflictResolutionResource;\n    }\n    onFileSavedOrReverted(resource) {\n        const messageHandle = this.messages.get(resource);\n        if (messageHandle) {\n            messageHandle.close();\n            this.messages.delete(resource);\n        }\n    }\n    onSaveError(error, model) {\n        const fileOperationError = error;\n        const resource = model.resource;\n        let message;\n        const primaryActions = [];\n        const secondaryActions = [];\n        if (fileOperationError.fileOperationResult === 3 ) {\n            if (this.activeConflictResolutionResource && isEqual(this.activeConflictResolutionResource, model.resource)) {\n                if (this.storageService.getBoolean(LEARN_MORE_DIRTY_WRITE_IGNORE_KEY, -1 )) {\n                    return;\n                }\n                message = conflictEditorHelp;\n                primaryActions.push(this.instantiationService.createInstance(ResolveConflictLearnMoreAction));\n                secondaryActions.push(this.instantiationService.createInstance(DoNotShowResolveConflictLearnMoreAction));\n            }\n            else {\n                message = ( (localize(\n                    'staleSaveError',\n                    \"Failed to save '{0}': The content of the file is newer. Please compare your version with the file contents or overwrite the content of the file with your changes.\",\n                    basename(resource)\n                )));\n                primaryActions.push(this.instantiationService.createInstance(ResolveSaveConflictAction, model));\n                primaryActions.push(this.instantiationService.createInstance(SaveModelIgnoreModifiedSinceAction, model));\n                secondaryActions.push(this.instantiationService.createInstance(ConfigureSaveConflictAction));\n            }\n        }\n        else {\n            const isWriteLocked = fileOperationError.fileOperationResult === 5 ;\n            const triedToUnlock = isWriteLocked && fileOperationError.options?.unlock;\n            const isPermissionDenied = fileOperationError.fileOperationResult === 6 ;\n            const canSaveElevated = resource.scheme === Schemas.file;\n            if (canSaveElevated && (isPermissionDenied || triedToUnlock)) {\n                primaryActions.push(this.instantiationService.createInstance(SaveModelElevatedAction, model, !!triedToUnlock));\n            }\n            else if (isWriteLocked) {\n                primaryActions.push(this.instantiationService.createInstance(UnlockModelAction, model));\n            }\n            else {\n                primaryActions.push(this.instantiationService.createInstance(RetrySaveModelAction, model));\n            }\n            primaryActions.push(this.instantiationService.createInstance(SaveModelAsAction, model));\n            primaryActions.push(this.instantiationService.createInstance(DiscardModelAction, model));\n            if (isWriteLocked) {\n                if (triedToUnlock && canSaveElevated) {\n                    message = isWindows ? ( (localize(\n                        'readonlySaveErrorAdmin',\n                        \"Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.\",\n                        basename(resource)\n                    ))) : ( (localize(\n                        'readonlySaveErrorSudo',\n                        \"Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.\",\n                        basename(resource)\n                    )));\n                }\n                else {\n                    message = ( (localize(\n                        'readonlySaveError',\n                        \"Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.\",\n                        basename(resource)\n                    )));\n                }\n            }\n            else if (canSaveElevated && isPermissionDenied) {\n                message = isWindows ? ( (localize(\n                    'permissionDeniedSaveError',\n                    \"Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.\",\n                    basename(resource)\n                ))) : ( (localize(\n                    'permissionDeniedSaveErrorSudo',\n                    \"Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.\",\n                    basename(resource)\n                )));\n            }\n            else {\n                message = ( (localize(\n                    { key: 'genericSaveError', comment: ['{0} is the resource that failed to save and {1} the error message'] },\n                    \"Failed to save '{0}': {1}\",\n                    basename(resource),\n                    toErrorMessage(error, false)\n                )));\n            }\n        }\n        const actions = { primary: primaryActions, secondary: secondaryActions };\n        const handle = this.notificationService.notify({\n            id: `${hash(( ( model.resource.toString())))}`,\n            severity: Severity.Error,\n            message,\n            actions\n        });\n        Event.once(handle.onDidClose)(() => { dispose(primaryActions); dispose(secondaryActions); });\n        this.messages.set(model.resource, handle);\n    }\n    dispose() {\n        super.dispose();\n        this.messages.clear();\n    }\n};\nTextFileSaveErrorHandler = ( (__decorate([\n    ( (__param(0, INotificationService))),\n    ( (__param(1, ITextFileService))),\n    ( (__param(2, IContextKeyService))),\n    ( (__param(3, IEditorService))),\n    ( (__param(4, ITextModelService))),\n    ( (__param(5, IInstantiationService))),\n    ( (__param(6, IStorageService)))\n], TextFileSaveErrorHandler)));\nlet ResolveConflictLearnMoreAction = class ResolveConflictLearnMoreAction extends Action {\n    constructor(openerService) {\n        super('workbench.files.action.resolveConflictLearnMore', ( (localize('learnMore', \"Learn More\"))));\n        this.openerService = openerService;\n    }\n    async run() {\n        await this.openerService.open(( (URI.parse('https://go.microsoft.com/fwlink/?linkid=868264'))));\n    }\n};\nResolveConflictLearnMoreAction = ( (__decorate([\n    ( (__param(0, IOpenerService)))\n], ResolveConflictLearnMoreAction)));\nlet DoNotShowResolveConflictLearnMoreAction = class DoNotShowResolveConflictLearnMoreAction extends Action {\n    constructor(storageService) {\n        super('workbench.files.action.resolveConflictLearnMoreDoNotShowAgain', ( (localize('dontShowAgain', \"Don't Show Again\"))));\n        this.storageService = storageService;\n    }\n    async run(notification) {\n        this.storageService.store(LEARN_MORE_DIRTY_WRITE_IGNORE_KEY, true, -1 , 0 );\n        notification.dispose();\n    }\n};\nDoNotShowResolveConflictLearnMoreAction = ( (__decorate([\n    ( (__param(0, IStorageService)))\n], DoNotShowResolveConflictLearnMoreAction)));\nlet ResolveSaveConflictAction = class ResolveSaveConflictAction extends Action {\n    constructor(model, editorService, notificationService, instantiationService, productService) {\n        super('workbench.files.action.resolveConflict', ( (localize('compareChanges', \"Compare\"))));\n        this.model = model;\n        this.editorService = editorService;\n        this.notificationService = notificationService;\n        this.instantiationService = instantiationService;\n        this.productService = productService;\n    }\n    async run() {\n        if (!this.model.isDisposed()) {\n            const resource = this.model.resource;\n            const name = basename(resource);\n            const editorLabel = ( (localize(\n                'saveConflictDiffLabel',\n                \"{0} (in file) ↔ {1} (in {2}) - Resolve save conflict\",\n                name,\n                name,\n                this.productService.nameLong\n            )));\n            await TextFileContentProvider.open(resource, CONFLICT_RESOLUTION_SCHEME, editorLabel, this.editorService, { pinned: true });\n            const actions = { primary: [this.instantiationService.createInstance(ResolveConflictLearnMoreAction)] };\n            const handle = this.notificationService.notify({\n                id: `${hash(( ( resource.toString())))}`,\n                severity: Severity.Info,\n                message: conflictEditorHelp,\n                actions,\n                neverShowAgain: { id: LEARN_MORE_DIRTY_WRITE_IGNORE_KEY, isSecondary: true }\n            });\n            Event.once(handle.onDidClose)(() => dispose(actions.primary));\n        }\n    }\n};\nResolveSaveConflictAction = ( (__decorate([\n    ( (__param(1, IEditorService))),\n    ( (__param(2, INotificationService))),\n    ( (__param(3, IInstantiationService))),\n    ( (__param(4, IProductService)))\n], ResolveSaveConflictAction)));\nclass SaveModelElevatedAction extends Action {\n    constructor(model, triedToUnlock) {\n        super('workbench.files.action.saveModelElevated', triedToUnlock ? isWindows ? ( (localize('overwriteElevated', \"Overwrite as Admin...\"))) : ( (localize('overwriteElevatedSudo', \"Overwrite as Sudo...\"))) : isWindows ? ( (localize('saveElevated', \"Retry as Admin...\"))) : ( (localize('saveElevatedSudo', \"Retry as Sudo...\"))));\n        this.model = model;\n        this.triedToUnlock = triedToUnlock;\n    }\n    async run() {\n        if (!this.model.isDisposed()) {\n            await this.model.save({\n                writeElevated: true,\n                writeUnlock: this.triedToUnlock,\n                reason: 1\n            });\n        }\n    }\n}\nclass RetrySaveModelAction extends Action {\n    constructor(model) {\n        super('workbench.files.action.saveModel', ( (localize('retry', \"Retry\"))));\n        this.model = model;\n    }\n    async run() {\n        if (!this.model.isDisposed()) {\n            await this.model.save({ reason: 1  });\n        }\n    }\n}\nclass DiscardModelAction extends Action {\n    constructor(model) {\n        super('workbench.files.action.discardModel', ( (localize('discard', \"Discard\"))));\n        this.model = model;\n    }\n    async run() {\n        if (!this.model.isDisposed()) {\n            await this.model.revert();\n        }\n    }\n}\nlet SaveModelAsAction = class SaveModelAsAction extends Action {\n    constructor(model, editorService) {\n        super('workbench.files.action.saveModelAs', SAVE_FILE_AS_LABEL);\n        this.model = model;\n        this.editorService = editorService;\n    }\n    async run() {\n        if (!this.model.isDisposed()) {\n            const editor = this.findEditor();\n            if (editor) {\n                await this.editorService.save(editor, { saveAs: true, reason: 1  });\n            }\n        }\n    }\n    findEditor() {\n        let preferredMatchingEditor;\n        const editors = this.editorService.findEditors(this.model.resource, { supportSideBySide: SideBySideEditor.PRIMARY });\n        for (const identifier of editors) {\n            if (identifier.editor instanceof FileEditorInput) {\n                preferredMatchingEditor = identifier;\n                break;\n            }\n            else if (!preferredMatchingEditor) {\n                preferredMatchingEditor = identifier;\n            }\n        }\n        return preferredMatchingEditor;\n    }\n};\nSaveModelAsAction = ( (__decorate([\n    ( (__param(1, IEditorService)))\n], SaveModelAsAction)));\nclass UnlockModelAction extends Action {\n    constructor(model) {\n        super('workbench.files.action.unlock', ( (localize('overwrite', \"Overwrite\"))));\n        this.model = model;\n    }\n    async run() {\n        if (!this.model.isDisposed()) {\n            await this.model.save({ writeUnlock: true, reason: 1  });\n        }\n    }\n}\nclass SaveModelIgnoreModifiedSinceAction extends Action {\n    constructor(model) {\n        super('workbench.files.action.saveIgnoreModifiedSince', ( (localize('overwrite', \"Overwrite\"))));\n        this.model = model;\n    }\n    async run() {\n        if (!this.model.isDisposed()) {\n            await this.model.save({ ignoreModifiedSince: true, reason: 1  });\n        }\n    }\n}\nlet ConfigureSaveConflictAction = class ConfigureSaveConflictAction extends Action {\n    constructor(preferencesService) {\n        super('workbench.files.action.configureSaveConflict', ( (localize('configure', \"Configure\"))));\n        this.preferencesService = preferencesService;\n    }\n    async run() {\n        this.preferencesService.openSettings({ query: 'files.saveConflictResolution' });\n    }\n};\nConfigureSaveConflictAction = ( (__decorate([\n    ( (__param(0, IPreferencesService)))\n], ConfigureSaveConflictAction)));\nexport { CONFLICT_RESOLUTION_CONTEXT, CONFLICT_RESOLUTION_SCHEME, TextFileSaveErrorHandler };\n","import * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { renameHandler, moveFileToTrashHandler, deleteFileHandler, cutFileHandler, copyFileHandler, pasteFileHandler, openFilePreserveFocusHandler, NEW_FILE_COMMAND_ID, NEW_FILE_LABEL, NEW_FOLDER_COMMAND_ID, NEW_FOLDER_LABEL, COPY_FILE_LABEL, PASTE_FILE_LABEL, FileCopiedContext, DOWNLOAD_COMMAND_ID, DOWNLOAD_LABEL, UPLOAD_COMMAND_ID, UPLOAD_LABEL, TRIGGER_RENAME_LABEL, MOVE_FILE_TO_TRASH_LABEL } from './fileActions.js';\nimport { CONFLICT_RESOLUTION_CONTEXT } from './editors/textFileSaveErrorHandler.js';\nimport { MenuRegistry, MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport './fileCommands.js';\nimport { SAVE_FILE_COMMAND_ID, SAVE_FILE_LABEL, OpenEditorsDirtyEditorContext, OpenEditorsGroupContext, OpenEditorsReadonlyEditorContext, REVERT_FILE_COMMAND_ID, SAVE_ALL_IN_GROUP_COMMAND_ID, COMPARE_WITH_SAVED_COMMAND_ID, ResourceSelectedForCompareContext, OPEN_WITH_EXPLORER_COMMAND_ID, REMOVE_ROOT_FOLDER_COMMAND_ID, REMOVE_ROOT_FOLDER_LABEL, NEW_UNTITLED_FILE_COMMAND_ID, COPY_PATH_COMMAND_ID, COPY_RELATIVE_PATH_COMMAND_ID, REVEAL_IN_EXPLORER_COMMAND_ID, SAVE_FILE_WITHOUT_FORMATTING_LABEL, SAVE_FILE_WITHOUT_FORMATTING_COMMAND_ID, SAVE_FILES_COMMAND_ID, SAVE_FILE_AS_LABEL, SAVE_FILE_AS_COMMAND_ID, NEW_UNTITLED_FILE_LABEL, OPEN_TO_SIDE_COMMAND_ID, COMPARE_RESOURCE_COMMAND_ID, SELECT_FOR_COMPARE_COMMAND_ID, COMPARE_SELECTED_COMMAND_ID } from './fileConstants.js';\nimport { ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from 'monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js';\nimport { FilesExplorerFocusCondition, ExplorerRootContext, ExplorerResourceNotReadonlyContext, ExplorerResourceMoveableToTrash, ExplorerResourceCut, ExplorerFolderContext, ExplorerResourceAvailableEditorIdsContext } from '../common/files.js';\nimport { ADD_ROOT_FOLDER_COMMAND_ID, ADD_ROOT_FOLDER_LABEL } from '../../../browser/actions/workspaceCommands.js';\nimport { REOPEN_WITH_COMMAND_ID, CLOSE_EDITOR_COMMAND_ID, CLOSE_OTHER_EDITORS_IN_GROUP_COMMAND_ID, CLOSE_SAVED_EDITORS_COMMAND_ID, CLOSE_EDITORS_IN_GROUP_COMMAND_ID } from '../../../browser/parts/editor/editorCommands.js';\nimport { AutoSaveAfterShortDelayContext } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { WorkbenchListDoubleSelection } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { ActiveEditorAvailableEditorIdsContext, ResourceContextKey, DirtyWorkingCopiesContext, HasWebFileSystemAccess, EnterMultiRootWorkspaceSupportContext, WorkbenchStateContext, WorkspaceFolderCountContext } from '../../../common/contextkeys.js';\nimport { IsWebContext } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkeys.js';\nimport { IExplorerService } from './files.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nconst explorerCommandsWeightBonus = 10;\nconst RENAME_ID = 'renameFile';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: RENAME_ID,\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ( ExplorerRootContext.toNegated()), ExplorerResourceNotReadonlyContext)),\n    primary: 60 ,\n    mac: {\n        primary: 3\n    },\n    handler: renameHandler\n});\nconst MOVE_FILE_TO_TRASH_ID = 'moveFileToTrash';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: MOVE_FILE_TO_TRASH_ID,\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(\n        FilesExplorerFocusCondition,\n        ExplorerResourceNotReadonlyContext,\n        ExplorerResourceMoveableToTrash\n    )),\n    primary: 20 ,\n    mac: {\n        primary: 2048  | 1 ,\n        secondary: [20 ]\n    },\n    handler: moveFileToTrashHandler\n});\nconst DELETE_FILE_ID = 'deleteFile';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: DELETE_FILE_ID,\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ExplorerResourceNotReadonlyContext)),\n    primary: 1024  | 20 ,\n    mac: {\n        primary: 2048  | 512  | 1\n    },\n    handler: deleteFileHandler\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: DELETE_FILE_ID,\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(\n        FilesExplorerFocusCondition,\n        ExplorerResourceNotReadonlyContext,\n        ( ExplorerResourceMoveableToTrash.toNegated())\n    )),\n    primary: 20 ,\n    mac: {\n        primary: 2048  | 1\n    },\n    handler: deleteFileHandler\n});\nconst CUT_FILE_ID = 'filesExplorer.cut';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: CUT_FILE_ID,\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ( ExplorerRootContext.toNegated()), ExplorerResourceNotReadonlyContext)),\n    primary: 2048  | 54 ,\n    handler: cutFileHandler,\n});\nconst COPY_FILE_ID = 'filesExplorer.copy';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: COPY_FILE_ID,\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ( ExplorerRootContext.toNegated()))),\n    primary: 2048  | 33 ,\n    handler: copyFileHandler,\n});\nconst PASTE_FILE_ID = 'filesExplorer.paste';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: PASTE_FILE_ID,\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ExplorerResourceNotReadonlyContext)),\n    primary: 2048  | 52 ,\n    handler: pasteFileHandler\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'filesExplorer.cancelCut',\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ExplorerResourceCut)),\n    primary: 9 ,\n    handler: async (accessor) => {\n        const explorerService = accessor.get(IExplorerService);\n        await explorerService.setToCopy([], true);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'filesExplorer.openFilePreserveFocus',\n    weight: 200  + explorerCommandsWeightBonus,\n    when: ( ContextKeyExpr.and(FilesExplorerFocusCondition, ( ExplorerFolderContext.toNegated()))),\n    primary: 10 ,\n    handler: openFilePreserveFocusHandler\n});\nconst copyPathCommand = {\n    id: COPY_PATH_COMMAND_ID,\n    title: ( nls.localize('copyPath', \"Copy Path\"))\n};\nconst copyRelativePathCommand = {\n    id: COPY_RELATIVE_PATH_COMMAND_ID,\n    title: ( nls.localize('copyRelativePath', \"Copy Relative Path\"))\n};\nappendEditorTitleContextMenuItem(COPY_PATH_COMMAND_ID, copyPathCommand.title, ResourceContextKey.IsFileSystemResource, '1_cutcopypaste');\nappendEditorTitleContextMenuItem(COPY_RELATIVE_PATH_COMMAND_ID, copyRelativePathCommand.title, ResourceContextKey.IsFileSystemResource, '1_cutcopypaste');\nappendEditorTitleContextMenuItem(REVEAL_IN_EXPLORER_COMMAND_ID, ( nls.localize('revealInSideBar', \"Reveal in Explorer View\")), ResourceContextKey.IsFileSystemResource, '2_files', 1);\nfunction appendEditorTitleContextMenuItem(id, title, when, group, order) {\n    MenuRegistry.appendMenuItem(MenuId.EditorTitleContext, {\n        command: { id, title },\n        when,\n        group,\n        order\n    });\n}\nappendSaveConflictEditorTitleAction('workbench.files.action.acceptLocalChanges', ( nls.localize('acceptLocalChanges', \"Use your changes and overwrite file contents\")), Codicon.check, -10);\nappendSaveConflictEditorTitleAction('workbench.files.action.revertLocalChanges', ( nls.localize('revertLocalChanges', \"Discard your changes and revert to file contents\")), Codicon.discard, -9);\nfunction appendSaveConflictEditorTitleAction(id, title, icon, order, command) {\n    MenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n        command: { id, title, icon },\n        when: ( ContextKeyExpr.equals(CONFLICT_RESOLUTION_CONTEXT, true)),\n        group: 'navigation',\n        order\n    });\n}\nfunction appendToCommandPalette(id, title, category, when) {\n    MenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n        command: {\n            id,\n            title,\n            category\n        },\n        when\n    });\n}\nappendToCommandPalette(COPY_PATH_COMMAND_ID, { value: ( nls.localize('copyPathOfActive', \"Copy Path of Active File\")), original: 'Copy Path of Active File' }, Categories.File);\nappendToCommandPalette(COPY_RELATIVE_PATH_COMMAND_ID, { value: ( nls.localize('copyRelativePathOfActive', \"Copy Relative Path of Active File\")), original: 'Copy Relative Path of Active File' }, Categories.File);\nappendToCommandPalette(SAVE_FILE_COMMAND_ID, { value: SAVE_FILE_LABEL, original: 'Save' }, Categories.File);\nappendToCommandPalette(SAVE_FILE_WITHOUT_FORMATTING_COMMAND_ID, { value: SAVE_FILE_WITHOUT_FORMATTING_LABEL, original: 'Save without Formatting' }, Categories.File);\nappendToCommandPalette(SAVE_ALL_IN_GROUP_COMMAND_ID, { value: ( nls.localize('saveAllInGroup', \"Save All in Group\")), original: 'Save All in Group' }, Categories.File);\nappendToCommandPalette(SAVE_FILES_COMMAND_ID, { value: ( nls.localize('saveFiles', \"Save All Files\")), original: 'Save All Files' }, Categories.File);\nappendToCommandPalette(REVERT_FILE_COMMAND_ID, { value: ( nls.localize('revert', \"Revert File\")), original: 'Revert File' }, Categories.File);\nappendToCommandPalette(COMPARE_WITH_SAVED_COMMAND_ID, { value: ( nls.localize('compareActiveWithSaved', \"Compare Active File with Saved\")), original: 'Compare Active File with Saved' }, Categories.File);\nappendToCommandPalette(SAVE_FILE_AS_COMMAND_ID, { value: SAVE_FILE_AS_LABEL, original: 'Save As...' }, Categories.File);\nappendToCommandPalette(NEW_FILE_COMMAND_ID, { value: NEW_FILE_LABEL, original: 'New File' }, Categories.File, ( WorkspaceFolderCountContext.notEqualsTo('0')));\nappendToCommandPalette(NEW_FOLDER_COMMAND_ID, { value: NEW_FOLDER_LABEL, original: 'New Folder' }, Categories.File, ( WorkspaceFolderCountContext.notEqualsTo('0')));\nappendToCommandPalette(NEW_UNTITLED_FILE_COMMAND_ID, { value: NEW_UNTITLED_FILE_LABEL, original: 'New Untitled Text File' }, Categories.File);\nconst isFileOrUntitledResourceContextKey = ( ContextKeyExpr.or(ResourceContextKey.IsFileSystemResource, ( ResourceContextKey.Scheme.isEqualTo(Schemas.untitled))));\nconst openToSideCommand = {\n    id: OPEN_TO_SIDE_COMMAND_ID,\n    title: ( nls.localize('openToSide', \"Open to the Side\"))\n};\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: 'navigation',\n    order: 10,\n    command: openToSideCommand,\n    when: isFileOrUntitledResourceContextKey\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '1_open',\n    order: 10,\n    command: {\n        id: REOPEN_WITH_COMMAND_ID,\n        title: ( nls.localize('reopenWith', \"Reopen Editor With...\"))\n    },\n    when: ActiveEditorAvailableEditorIdsContext\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '1_cutcopypaste',\n    order: 10,\n    command: copyPathCommand,\n    when: ResourceContextKey.IsFileSystemResource\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '1_cutcopypaste',\n    order: 20,\n    command: copyRelativePathCommand,\n    when: ResourceContextKey.IsFileSystemResource\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '2_save',\n    order: 10,\n    command: {\n        id: SAVE_FILE_COMMAND_ID,\n        title: SAVE_FILE_LABEL,\n        precondition: OpenEditorsDirtyEditorContext\n    },\n    when: ( ContextKeyExpr.or((\n    ResourceContextKey.Scheme.isEqualTo(Schemas.untitled)), (\n    ContextKeyExpr.and((\n    OpenEditorsGroupContext.toNegated()), (\n    OpenEditorsReadonlyEditorContext.toNegated()), (\n    AutoSaveAfterShortDelayContext.toNegated())))))\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '2_save',\n    order: 20,\n    command: {\n        id: REVERT_FILE_COMMAND_ID,\n        title: ( nls.localize('revert', \"Revert File\")),\n        precondition: OpenEditorsDirtyEditorContext\n    },\n    when: ( ContextKeyExpr.and((\n    OpenEditorsGroupContext.toNegated()), (\n    OpenEditorsReadonlyEditorContext.toNegated()), (\n    ResourceContextKey.Scheme.notEqualsTo(Schemas.untitled)), (\n    AutoSaveAfterShortDelayContext.toNegated())))\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '2_save',\n    order: 30,\n    command: {\n        id: SAVE_ALL_IN_GROUP_COMMAND_ID,\n        title: ( nls.localize('saveAll', \"Save All\")),\n        precondition: DirtyWorkingCopiesContext\n    },\n    when: OpenEditorsGroupContext\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '3_compare',\n    order: 10,\n    command: {\n        id: COMPARE_WITH_SAVED_COMMAND_ID,\n        title: ( nls.localize('compareWithSaved', \"Compare with Saved\")),\n        precondition: OpenEditorsDirtyEditorContext\n    },\n    when: ( ContextKeyExpr.and(ResourceContextKey.IsFileSystemResource, ( AutoSaveAfterShortDelayContext.toNegated()), ( WorkbenchListDoubleSelection.toNegated())))\n});\nconst compareResourceCommand = {\n    id: COMPARE_RESOURCE_COMMAND_ID,\n    title: ( nls.localize('compareWithSelected', \"Compare with Selected\"))\n};\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '3_compare',\n    order: 20,\n    command: compareResourceCommand,\n    when: ( ContextKeyExpr.and(\n        ResourceContextKey.HasResource,\n        ResourceSelectedForCompareContext,\n        isFileOrUntitledResourceContextKey,\n        ( WorkbenchListDoubleSelection.toNegated())\n    ))\n});\nconst selectForCompareCommand = {\n    id: SELECT_FOR_COMPARE_COMMAND_ID,\n    title: ( nls.localize('compareSource', \"Select for Compare\"))\n};\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '3_compare',\n    order: 30,\n    command: selectForCompareCommand,\n    when: ( ContextKeyExpr.and(\n        ResourceContextKey.HasResource,\n        isFileOrUntitledResourceContextKey,\n        ( WorkbenchListDoubleSelection.toNegated())\n    ))\n});\nconst compareSelectedCommand = {\n    id: COMPARE_SELECTED_COMMAND_ID,\n    title: ( nls.localize('compareSelected', \"Compare Selected\"))\n};\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '3_compare',\n    order: 30,\n    command: compareSelectedCommand,\n    when: ( ContextKeyExpr.and(\n        ResourceContextKey.HasResource,\n        WorkbenchListDoubleSelection,\n        isFileOrUntitledResourceContextKey\n    ))\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '4_close',\n    order: 10,\n    command: {\n        id: CLOSE_EDITOR_COMMAND_ID,\n        title: ( nls.localize('close', \"Close\"))\n    },\n    when: ( OpenEditorsGroupContext.toNegated())\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '4_close',\n    order: 20,\n    command: {\n        id: CLOSE_OTHER_EDITORS_IN_GROUP_COMMAND_ID,\n        title: ( nls.localize('closeOthers', \"Close Others\"))\n    },\n    when: ( OpenEditorsGroupContext.toNegated())\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '4_close',\n    order: 30,\n    command: {\n        id: CLOSE_SAVED_EDITORS_COMMAND_ID,\n        title: ( nls.localize('closeSaved', \"Close Saved\"))\n    }\n});\nMenuRegistry.appendMenuItem(MenuId.OpenEditorsContext, {\n    group: '4_close',\n    order: 40,\n    command: {\n        id: CLOSE_EDITORS_IN_GROUP_COMMAND_ID,\n        title: ( nls.localize('closeAll', \"Close All\"))\n    }\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: 'navigation',\n    order: 4,\n    command: {\n        id: NEW_FILE_COMMAND_ID,\n        title: NEW_FILE_LABEL,\n        precondition: ExplorerResourceNotReadonlyContext\n    },\n    when: ExplorerFolderContext\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: 'navigation',\n    order: 6,\n    command: {\n        id: NEW_FOLDER_COMMAND_ID,\n        title: NEW_FOLDER_LABEL,\n        precondition: ExplorerResourceNotReadonlyContext\n    },\n    when: ExplorerFolderContext\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: 'navigation',\n    order: 10,\n    command: openToSideCommand,\n    when: ( ContextKeyExpr.and(( ExplorerFolderContext.toNegated()), ResourceContextKey.HasResource))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: 'navigation',\n    order: 20,\n    command: {\n        id: OPEN_WITH_EXPLORER_COMMAND_ID,\n        title: ( nls.localize('explorerOpenWith', \"Open With...\")),\n    },\n    when: ( ContextKeyExpr.and(( ExplorerFolderContext.toNegated()), ExplorerResourceAvailableEditorIdsContext)),\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '3_compare',\n    order: 20,\n    command: compareResourceCommand,\n    when: ( ContextKeyExpr.and(( ExplorerFolderContext.toNegated()), ResourceContextKey.HasResource, ResourceSelectedForCompareContext, ( WorkbenchListDoubleSelection.toNegated())))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '3_compare',\n    order: 30,\n    command: selectForCompareCommand,\n    when: ( ContextKeyExpr.and(( ExplorerFolderContext.toNegated()), ResourceContextKey.HasResource, ( WorkbenchListDoubleSelection.toNegated())))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '3_compare',\n    order: 30,\n    command: compareSelectedCommand,\n    when: ( ContextKeyExpr.and(( ExplorerFolderContext.toNegated()), ResourceContextKey.HasResource, WorkbenchListDoubleSelection))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '5_cutcopypaste',\n    order: 8,\n    command: {\n        id: CUT_FILE_ID,\n        title: ( nls.localize('cut', \"Cut\"))\n    },\n    when: ( ContextKeyExpr.and(( ExplorerRootContext.toNegated()), ExplorerResourceNotReadonlyContext))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '5_cutcopypaste',\n    order: 10,\n    command: {\n        id: COPY_FILE_ID,\n        title: COPY_FILE_LABEL\n    },\n    when: ( ExplorerRootContext.toNegated())\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '5_cutcopypaste',\n    order: 20,\n    command: {\n        id: PASTE_FILE_ID,\n        title: PASTE_FILE_LABEL,\n        precondition: ( ContextKeyExpr.and(ExplorerResourceNotReadonlyContext, FileCopiedContext))\n    },\n    when: ExplorerFolderContext\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, ({\n    group: '5b_importexport',\n    order: 10,\n    command: {\n        id: DOWNLOAD_COMMAND_ID,\n        title: DOWNLOAD_LABEL\n    },\n    when: ( ContextKeyExpr.or((\n    ContextKeyExpr.and(( IsWebContext.toNegated()), ( ResourceContextKey.Scheme.notEqualsTo(Schemas.file)))), (\n    ContextKeyExpr.and(IsWebContext, ( ExplorerFolderContext.toNegated()), ( ExplorerRootContext.toNegated()))), (\n    ContextKeyExpr.and(IsWebContext, HasWebFileSystemAccess))))\n}));\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, ({\n    group: '5b_importexport',\n    order: 20,\n    command: {\n        id: UPLOAD_COMMAND_ID,\n        title: UPLOAD_LABEL,\n    },\n    when: ( ContextKeyExpr.and(\n    IsWebContext,\n    ExplorerFolderContext,\n    ExplorerResourceNotReadonlyContext))\n}));\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '6_copypath',\n    order: 10,\n    command: copyPathCommand,\n    when: ResourceContextKey.IsFileSystemResource\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '6_copypath',\n    order: 20,\n    command: copyRelativePathCommand,\n    when: ResourceContextKey.IsFileSystemResource\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '2_workspace',\n    order: 10,\n    command: {\n        id: ADD_ROOT_FOLDER_COMMAND_ID,\n        title: ADD_ROOT_FOLDER_LABEL\n    },\n    when: ( ContextKeyExpr.and(ExplorerRootContext, ( ContextKeyExpr.or(EnterMultiRootWorkspaceSupportContext, ( WorkbenchStateContext.isEqualTo('workspace'))))))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '2_workspace',\n    order: 30,\n    command: {\n        id: REMOVE_ROOT_FOLDER_COMMAND_ID,\n        title: REMOVE_ROOT_FOLDER_LABEL\n    },\n    when: ( ContextKeyExpr.and(ExplorerRootContext, ExplorerFolderContext, ( ContextKeyExpr.and(( WorkspaceFolderCountContext.notEqualsTo('0')), ( ContextKeyExpr.or(EnterMultiRootWorkspaceSupportContext, ( WorkbenchStateContext.isEqualTo('workspace'))))))))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '7_modification',\n    order: 10,\n    command: {\n        id: RENAME_ID,\n        title: TRIGGER_RENAME_LABEL,\n        precondition: ExplorerResourceNotReadonlyContext\n    },\n    when: ( ExplorerRootContext.toNegated())\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '7_modification',\n    order: 20,\n    command: {\n        id: MOVE_FILE_TO_TRASH_ID,\n        title: MOVE_FILE_TO_TRASH_LABEL,\n        precondition: ExplorerResourceNotReadonlyContext\n    },\n    alt: {\n        id: DELETE_FILE_ID,\n        title: ( nls.localize('deleteFile', \"Delete Permanently\")),\n        precondition: ExplorerResourceNotReadonlyContext\n    },\n    when: ( ContextKeyExpr.and(( ExplorerRootContext.toNegated()), ExplorerResourceMoveableToTrash))\n});\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, {\n    group: '7_modification',\n    order: 20,\n    command: {\n        id: DELETE_FILE_ID,\n        title: ( nls.localize('deleteFile', \"Delete Permanently\")),\n        precondition: ExplorerResourceNotReadonlyContext\n    },\n    when: ( ContextKeyExpr.and(( ExplorerRootContext.toNegated()), ( ExplorerResourceMoveableToTrash.toNegated())))\n});\nfor (const menuId of [MenuId.EmptyEditorGroupContext, MenuId.EditorTabsBarContext]) {\n    MenuRegistry.appendMenuItem(menuId, { command: { id: NEW_UNTITLED_FILE_COMMAND_ID, title: ( nls.localize('newFile', \"New Text File\")) }, group: '1_file', order: 10 });\n    MenuRegistry.appendMenuItem(menuId, { command: { id: 'workbench.action.quickOpen', title: ( nls.localize('openFile', \"Open File...\")) }, group: '1_file', order: 20 });\n}\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '3_global_nav',\n    command: {\n        id: 'workbench.action.quickOpen',\n        title: ( nls.localize(\n            { key: 'miGotoFile', comment: ['&& denotes a mnemonic'] },\n            \"Go to &&File...\"\n        ))\n    },\n    order: 1\n});\nexport { appendEditorTitleContextMenuItem, appendToCommandPalette };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .call-hierarchy .message,.monaco-workbench .call-hierarchy .results{display:none}.monaco-workbench .call-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .call-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .call-hierarchy .editor,.monaco-workbench .call-hierarchy .tree{height:100%}.monaco-editor .call-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-workbench .call-hierarchy .tree .callhierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .call-hierarchy .tree .callhierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .call-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-editor .call-hierarchy .call-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .call-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .call-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .call-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}\";\nn(css,{});\nexport { css, css as default };\n","import { CallHierarchyModel } from '../common/callHierarchy.js';\nimport { CancellationToken } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { createMatches } from 'monaco-editor/esm/vs/base/common/filters.js';\nimport { IconLabel } from 'monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js';\nimport { SymbolKinds } from 'monaco-editor/esm/vs/editor/common/languages.js';\nimport { compare } from 'monaco-editor/esm/vs/base/common/strings.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nclass Call {\n    constructor(item, locations, model, parent) {\n        this.item = item;\n        this.locations = locations;\n        this.model = model;\n        this.parent = parent;\n    }\n    static compare(a, b) {\n        let res = compare(( a.item.uri.toString()), ( b.item.uri.toString()));\n        if (res === 0) {\n            res = Range.compareRangesUsingStarts(a.item.range, b.item.range);\n        }\n        return res;\n    }\n}\nclass DataSource {\n    constructor(getDirection) {\n        this.getDirection = getDirection;\n    }\n    hasChildren() {\n        return true;\n    }\n    async getChildren(element) {\n        if (element instanceof CallHierarchyModel) {\n            return ( element.roots.map(root => ( new Call(root, undefined, element, undefined))));\n        }\n        const { model, item } = element;\n        if (this.getDirection() === \"outgoingCalls\" ) {\n            return ( (await model.resolveOutgoingCalls(item, CancellationToken.None)).map(call => {\n                return ( new Call(call.to, ( call.fromRanges.map(range => ({ range, uri: item.uri }))), model, element));\n            }));\n        }\n        else {\n            return ( (await model.resolveIncomingCalls(item, CancellationToken.None)).map(call => {\n                return ( new Call(call.from, ( call.fromRanges.map(range => ({ range, uri: call.from.uri }))), model, element));\n            }));\n        }\n    }\n}\nclass Sorter {\n    compare(element, otherElement) {\n        return Call.compare(element, otherElement);\n    }\n}\nclass IdentityProvider {\n    constructor(getDirection) {\n        this.getDirection = getDirection;\n    }\n    getId(element) {\n        let res = this.getDirection() + JSON.stringify(element.item.uri) + JSON.stringify(element.item.range);\n        if (element.parent) {\n            res += this.getId(element.parent);\n        }\n        return res;\n    }\n}\nclass CallRenderingTemplate {\n    constructor(icon, label) {\n        this.icon = icon;\n        this.label = label;\n    }\n}\nclass CallRenderer {\n    constructor() {\n        this.templateId = CallRenderer.id;\n    }\n    static { this.id = 'CallRenderer'; }\n    renderTemplate(container) {\n        container.classList.add('callhierarchy-element');\n        const icon = document.createElement('div');\n        container.appendChild(icon);\n        const label = ( new IconLabel(container, { supportHighlights: true }));\n        return ( new CallRenderingTemplate(icon, label));\n    }\n    renderElement(node, _index, template) {\n        const { element, filterData } = node;\n        const deprecated = element.item.tags?.includes(1 );\n        template.icon.className = '';\n        template.icon.classList.add('inline', ...ThemeIcon.asClassNameArray(SymbolKinds.toIcon(element.item.kind)));\n        template.label.setLabel(element.item.name, element.item.detail, { labelEscapeNewLines: true, matches: createMatches(filterData), strikethrough: deprecated });\n    }\n    disposeTemplate(template) {\n        template.label.dispose();\n    }\n}\nclass VirtualDelegate {\n    getHeight(_element) {\n        return 22;\n    }\n    getTemplateId(_element) {\n        return CallRenderer.id;\n    }\n}\nclass AccessibilityProvider {\n    constructor(getDirection) {\n        this.getDirection = getDirection;\n    }\n    getWidgetAriaLabel() {\n        return ( localize('tree.aria', \"Call Hierarchy\"));\n    }\n    getAriaLabel(element) {\n        if (this.getDirection() === \"outgoingCalls\" ) {\n            return ( localize('from', \"calls from {0}\", element.item.name));\n        }\n        else {\n            return ( localize('to', \"callers of {0}\", element.item.name));\n        }\n    }\n}\nexport { AccessibilityProvider, Call, CallRenderer, DataSource, IdentityProvider, Sorter, VirtualDelegate };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/callHierarchy.css.js';\nimport * as peekView from 'monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { WorkbenchAsyncDataTree } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { VirtualDelegate, CallRenderer, DataSource, Sorter, AccessibilityProvider, IdentityProvider } from './callHierarchyTree.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { SplitView, Sizing } from 'monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js';\nimport { Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { EmbeddedCodeEditorWidget } from 'monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js';\nimport { ITextModelService } from 'monaco-editor/esm/vs/editor/common/services/resolverService.js';\nimport { DisposableStore, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { OverviewRulerLane } from 'monaco-editor/esm/vs/editor/common/model.js';\nimport { themeColorFromId, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { Color } from 'monaco-editor/esm/vs/base/common/color.js';\nimport { TreeMouseEventTarget } from 'monaco-editor/esm/vs/base/browser/ui/tree/tree.js';\nimport { MenuId, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { createAndFillInActionBarActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nclass LayoutInfo {\n    static store(info, storageService) {\n        storageService.store('callHierarchyPeekLayout', JSON.stringify(info), 0 , 1 );\n    }\n    static retrieve(storageService) {\n        const value = storageService.get('callHierarchyPeekLayout', 0 , '{}');\n        const defaultInfo = { ratio: 0.7, height: 17 };\n        try {\n            return { ...defaultInfo, ...JSON.parse(value) };\n        }\n        catch {\n            return defaultInfo;\n        }\n    }\n    constructor(ratio, height) {\n        this.ratio = ratio;\n        this.height = height;\n    }\n}\nclass CallHierarchyTree extends WorkbenchAsyncDataTree {\n}\nlet CallHierarchyTreePeekWidget = class CallHierarchyTreePeekWidget extends peekView.PeekViewWidget {\n    static { this.TitleMenu = ( new MenuId('callhierarchy/title')); }\n    constructor(editor, _where, _direction, themeService, _peekViewService, _editorService, _textModelService, _storageService, _menuService, _contextKeyService, _instantiationService) {\n        super(editor, { showFrame: true, showArrow: true, isResizeable: true, isAccessible: true }, _instantiationService);\n        this._where = _where;\n        this._direction = _direction;\n        this._peekViewService = _peekViewService;\n        this._editorService = _editorService;\n        this._textModelService = _textModelService;\n        this._storageService = _storageService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._treeViewStates = ( new Map());\n        this._previewDisposable = ( new DisposableStore());\n        this.create();\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this._applyTheme(themeService.getColorTheme());\n        this._disposables.add(themeService.onDidColorThemeChange(this._applyTheme, this));\n        this._disposables.add(this._previewDisposable);\n    }\n    dispose() {\n        LayoutInfo.store(this._layoutInfo, this._storageService);\n        this._splitView.dispose();\n        this._tree.dispose();\n        this._editor.dispose();\n        super.dispose();\n    }\n    get direction() {\n        return this._direction;\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    _fillHead(container) {\n        super._fillHead(container, true);\n        const menu = this._menuService.createMenu(CallHierarchyTreePeekWidget.TitleMenu, this._contextKeyService);\n        const updateToolbar = () => {\n            const actions = [];\n            createAndFillInActionBarActions(menu, undefined, actions);\n            this._actionbarWidget.clear();\n            this._actionbarWidget.push(actions, { label: false, icon: true });\n        };\n        this._disposables.add(menu);\n        this._disposables.add(menu.onDidChange(updateToolbar));\n        updateToolbar();\n    }\n    _fillBody(parent) {\n        this._layoutInfo = LayoutInfo.retrieve(this._storageService);\n        this._dim = ( new Dimension(0, 0));\n        this._parent = parent;\n        parent.classList.add('call-hierarchy');\n        const message = document.createElement('div');\n        message.classList.add('message');\n        parent.appendChild(message);\n        this._message = message;\n        this._message.tabIndex = 0;\n        const container = document.createElement('div');\n        container.classList.add('results');\n        parent.appendChild(container);\n        this._splitView = ( new SplitView(container, { orientation: 1  }));\n        const editorContainer = document.createElement('div');\n        editorContainer.classList.add('editor');\n        container.appendChild(editorContainer);\n        const editorOptions = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._editor = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, editorContainer, editorOptions, {}, this.editor);\n        const treeContainer = document.createElement('div');\n        treeContainer.classList.add('tree');\n        container.appendChild(treeContainer);\n        const options = {\n            sorter: new Sorter(),\n            accessibilityProvider: new AccessibilityProvider(() => this._direction),\n            identityProvider: new IdentityProvider(() => this._direction),\n            expandOnlyOnTwistieClick: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        this._tree = this._instantiationService.createInstance(CallHierarchyTree, 'CallHierarchyPeek', treeContainer, new VirtualDelegate(), [this._instantiationService.createInstance(CallRenderer)], this._instantiationService.createInstance(DataSource, () => this._direction), options);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: editorContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                if (this._dim.height) {\n                    this._editor.layout({ height: this._dim.height, width });\n                }\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                if (this._dim.height) {\n                    this._tree.layout(this._dim.height, width);\n                }\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this._layoutInfo.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }));\n        this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview, this));\n        this._disposables.add(this._editor.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const [focus] = this._tree.getFocus();\n            if (!focus) {\n                return;\n            }\n            this.dispose();\n            this._editorService.openEditor({\n                resource: focus.item.uri,\n                options: { selection: target.range }\n            });\n        }));\n        this._disposables.add(this._tree.onMouseDblClick(e => {\n            if (e.target === TreeMouseEventTarget.Twistie) {\n                return;\n            }\n            if (e.element) {\n                this.dispose();\n                this._editorService.openEditor({\n                    resource: e.element.item.uri,\n                    options: { selection: e.element.item.selectionRange, pinned: true }\n                });\n            }\n        }));\n        this._disposables.add(this._tree.onDidChangeSelection(e => {\n            const [element] = e.elements;\n            if (element && e.browserEvent instanceof KeyboardEvent) {\n                this.dispose();\n                this._editorService.openEditor({\n                    resource: element.item.uri,\n                    options: { selection: element.item.selectionRange, pinned: true }\n                });\n            }\n        }));\n    }\n    async _updatePreview() {\n        const [element] = this._tree.getFocus();\n        if (!element) {\n            return;\n        }\n        this._previewDisposable.clear();\n        const options = {\n            description: 'call-hierarchy-decoration',\n            stickiness: 1 ,\n            className: 'call-decoration',\n            overviewRuler: {\n                color: themeColorFromId(peekView.peekViewEditorMatchHighlight),\n                position: OverviewRulerLane.Center\n            },\n        };\n        let previewUri;\n        if (this._direction === \"outgoingCalls\" ) {\n            previewUri = element.parent ? element.parent.item.uri : element.model.root.uri;\n        }\n        else {\n            previewUri = element.item.uri;\n        }\n        const value = await this._textModelService.createModelReference(previewUri);\n        this._editor.setModel(value.object.textEditorModel);\n        const decorations = [];\n        let fullRange;\n        let locations = element.locations;\n        if (!locations) {\n            locations = [{ uri: element.item.uri, range: element.item.selectionRange }];\n        }\n        for (const loc of locations) {\n            if (( loc.uri.toString()) === ( previewUri.toString())) {\n                decorations.push({ range: loc.range, options });\n                fullRange = !fullRange ? loc.range : Range.plusRange(loc.range, fullRange);\n            }\n        }\n        if (fullRange) {\n            this._editor.revealRangeInCenter(fullRange, 1 );\n            const decorationsCollection = this._editor.createDecorationsCollection(decorations);\n            this._previewDisposable.add(toDisposable(() => decorationsCollection.clear()));\n        }\n        this._previewDisposable.add(value);\n        const title = this._direction === \"outgoingCalls\"\n            ? ( localize('callFrom', \"Calls from '{0}'\", element.model.root.name))\n            : ( localize('callsTo', \"Callers of '{0}'\", element.model.root.name));\n        this.setTitle(title);\n    }\n    showLoading() {\n        this._parent.dataset['state'] = \"loading\" ;\n        this.setTitle(( localize('title.loading', \"Loading...\")));\n        this._show();\n    }\n    showMessage(message) {\n        this._parent.dataset['state'] = \"message\" ;\n        this.setTitle('');\n        this.setMetaTitle('');\n        this._message.innerText = message;\n        this._show();\n        this._message.focus();\n    }\n    async showModel(model) {\n        this._show();\n        const viewState = this._treeViewStates.get(this._direction);\n        await this._tree.setInput(model, viewState);\n        const root = this._tree.getNode(model).children[0];\n        await this._tree.expand(root.element);\n        if (root.children.length === 0) {\n            this.showMessage(this._direction === \"outgoingCalls\"\n                ? ( localize('empt.callsFrom', \"No calls from '{0}'\", model.root.name))\n                : ( localize('empt.callsTo', \"No callers of '{0}'\", model.root.name)));\n        }\n        else {\n            this._parent.dataset['state'] = \"data\" ;\n            if (!viewState || this._tree.getFocus().length === 0) {\n                this._tree.setFocus([root.children[0].element]);\n            }\n            this._tree.domFocus();\n            this._updatePreview();\n        }\n    }\n    getModel() {\n        return this._tree.getInput();\n    }\n    getFocused() {\n        return this._tree.getFocus()[0];\n    }\n    async updateDirection(newDirection) {\n        const model = this._tree.getInput();\n        if (model && newDirection !== this._direction) {\n            this._treeViewStates.set(this._direction, this._tree.getViewState());\n            this._direction = newDirection;\n            await this.showModel(model);\n        }\n    }\n    _show() {\n        if (!this._isShowing) {\n            this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber, 0 );\n            super.show(Range.fromPositions(this._where), this._layoutInfo.height);\n        }\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(height, width) {\n        if (this._dim.height !== height || this._dim.width !== width) {\n            super._doLayoutBody(height, width);\n            this._dim = ( new Dimension(width, height));\n            this._layoutInfo.height = this._viewZone ? this._viewZone.heightInLines : this._layoutInfo.height;\n            this._splitView.layout(width);\n            this._splitView.resizeView(0, width * this._layoutInfo.ratio);\n        }\n    }\n};\nCallHierarchyTreePeekWidget = ( __decorate([\n    ( __param(3, IThemeService)),\n    ( __param(4, peekView.IPeekViewService)),\n    ( __param(5, IEditorService)),\n    ( __param(6, ITextModelService)),\n    ( __param(7, IStorageService)),\n    ( __param(8, IMenuService)),\n    ( __param(9, IContextKeyService)),\n    ( __param(10, IInstantiationService))\n], CallHierarchyTreePeekWidget));\nexport { CallHierarchyTreePeekWidget };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { CallHierarchyProviderRegistry, CallHierarchyModel } from '../common/callHierarchy.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { CallHierarchyTreePeekWidget } from './callHierarchyPeek.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { registerEditorContribution, EditorAction2 } from 'monaco-editor/esm/vs/editor/browser/editorExtensions.js';\nimport { ContextKeyExpr, RawContextKey, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { EditorContextKeys } from 'monaco-editor/esm/vs/editor/common/editorContextKeys.js';\nimport { PeekContext } from 'monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { ICodeEditorService } from 'monaco-editor/esm/vs/editor/browser/services/codeEditorService.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { registerAction2, MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { registerIcon } from 'monaco-editor/esm/vs/platform/theme/common/iconRegistry.js';\nimport { isCancellationError } from 'monaco-editor/esm/vs/base/common/errors.js';\nconst _ctxHasCallHierarchyProvider = ( new RawContextKey('editorHasCallHierarchyProvider', false, ( localize(\n    'editorHasCallHierarchyProvider',\n    'Whether a call hierarchy provider is available'\n))));\nconst _ctxCallHierarchyVisible = ( new RawContextKey('callHierarchyVisible', false, ( localize('callHierarchyVisible', 'Whether call hierarchy peek is currently showing'))));\nconst _ctxCallHierarchyDirection = ( new RawContextKey(\n    'callHierarchyDirection',\n    undefined,\n    { type: 'string', description: ( localize(\n        'callHierarchyDirection',\n        'Whether call hierarchy shows incoming or outgoing calls'\n    )) }\n));\nfunction sanitizedDirection(candidate) {\n    return candidate === \"outgoingCalls\"  || candidate === \"incomingCalls\"\n        ? candidate\n        : \"incomingCalls\" ;\n}\nlet CallHierarchyController = class CallHierarchyController {\n    static { this.Id = 'callHierarchy'; }\n    static get(editor) {\n        return editor.getContribution(CallHierarchyController.Id);\n    }\n    static { this._StorageDirection = 'callHierarchy/defaultDirection'; }\n    constructor(_editor, _contextKeyService, _storageService, _editorService, _instantiationService) {\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._storageService = _storageService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._dispoables = ( new DisposableStore());\n        this._sessionDisposables = ( new DisposableStore());\n        this._ctxIsVisible = _ctxCallHierarchyVisible.bindTo(this._contextKeyService);\n        this._ctxHasProvider = _ctxHasCallHierarchyProvider.bindTo(this._contextKeyService);\n        this._ctxDirection = _ctxCallHierarchyDirection.bindTo(this._contextKeyService);\n        this._dispoables.add(Event.any(_editor.onDidChangeModel, _editor.onDidChangeModelLanguage, CallHierarchyProviderRegistry.onDidChange)(() => {\n            this._ctxHasProvider.set(_editor.hasModel() && ( CallHierarchyProviderRegistry.has(_editor.getModel())));\n        }));\n        this._dispoables.add(this._sessionDisposables);\n    }\n    dispose() {\n        this._ctxHasProvider.reset();\n        this._ctxIsVisible.reset();\n        this._dispoables.dispose();\n    }\n    async startCallHierarchyFromEditor() {\n        this._sessionDisposables.clear();\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const document = this._editor.getModel();\n        const position = this._editor.getPosition();\n        if (!( CallHierarchyProviderRegistry.has(document))) {\n            return;\n        }\n        const cts = ( new CancellationTokenSource());\n        const model = CallHierarchyModel.create(document, position, cts.token);\n        const direction = sanitizedDirection(this._storageService.get(CallHierarchyController._StorageDirection, 0 , \"incomingCalls\" ));\n        this._showCallHierarchyWidget(position, direction, model, cts);\n    }\n    async startCallHierarchyFromCallHierarchy() {\n        if (!this._widget) {\n            return;\n        }\n        const model = this._widget.getModel();\n        const call = this._widget.getFocused();\n        if (!call || !model) {\n            return;\n        }\n        const newEditor = await this._editorService.openCodeEditor({ resource: call.item.uri }, this._editor);\n        if (!newEditor) {\n            return;\n        }\n        const newModel = model.fork(call.item);\n        this._sessionDisposables.clear();\n        CallHierarchyController.get(newEditor)?._showCallHierarchyWidget(Range.lift(newModel.root.selectionRange).getStartPosition(), this._widget.direction, Promise.resolve(newModel), ( new CancellationTokenSource()));\n    }\n    _showCallHierarchyWidget(position, direction, model, cts) {\n        this._ctxIsVisible.set(true);\n        this._ctxDirection.set(direction);\n        Event.any(this._editor.onDidChangeModel, this._editor.onDidChangeModelLanguage)(this.endCallHierarchy, this, this._sessionDisposables);\n        this._widget = this._instantiationService.createInstance(CallHierarchyTreePeekWidget, this._editor, position, direction);\n        this._widget.showLoading();\n        this._sessionDisposables.add(this._widget.onDidClose(() => {\n            this.endCallHierarchy();\n            this._storageService.store(CallHierarchyController._StorageDirection, this._widget.direction, 0 , 0 );\n        }));\n        this._sessionDisposables.add({ dispose() { cts.dispose(true); } });\n        this._sessionDisposables.add(this._widget);\n        model.then(model => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (model) {\n                this._sessionDisposables.add(model);\n                this._widget.showModel(model);\n            }\n            else {\n                this._widget.showMessage(( localize('no.item', \"No results\")));\n            }\n        }).catch(err => {\n            if (isCancellationError(err)) {\n                this.endCallHierarchy();\n                return;\n            }\n            this._widget.showMessage(( localize('error', \"Failed to show call hierarchy\")));\n        });\n    }\n    showOutgoingCalls() {\n        this._widget?.updateDirection(\"outgoingCalls\" );\n        this._ctxDirection.set(\"outgoingCalls\" );\n    }\n    showIncomingCalls() {\n        this._widget?.updateDirection(\"incomingCalls\" );\n        this._ctxDirection.set(\"incomingCalls\" );\n    }\n    endCallHierarchy() {\n        this._sessionDisposables.clear();\n        this._ctxIsVisible.set(false);\n        this._editor.focus();\n    }\n};\nCallHierarchyController = ( __decorate([\n    ( __param(1, IContextKeyService)),\n    ( __param(2, IStorageService)),\n    ( __param(3, ICodeEditorService)),\n    ( __param(4, IInstantiationService))\n], CallHierarchyController));\nregisterEditorContribution(CallHierarchyController.Id, CallHierarchyController, 0 );\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.showCallHierarchy',\n            title: { value: ( localize('title', \"Peek Call Hierarchy\")), original: 'Peek Call Hierarchy' },\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'navigation',\n                order: 1000,\n                when: ( ContextKeyExpr.and(_ctxHasCallHierarchyProvider, PeekContext.notInPeekEditor)),\n            },\n            keybinding: {\n                when: EditorContextKeys.editorTextFocus,\n                weight: 200 ,\n                primary: 1024  + 512  + 38\n            },\n            precondition: ( ContextKeyExpr.and(_ctxHasCallHierarchyProvider, PeekContext.notInPeekEditor))\n        });\n    }\n    async runEditorCommand(_accessor, editor) {\n        return CallHierarchyController.get(editor)?.startCallHierarchyFromEditor();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.showIncomingCalls',\n            title: { value: ( localize('title.incoming', \"Show Incoming Calls\")), original: 'Show Incoming Calls' },\n            icon: registerIcon('callhierarchy-incoming', Codicon.callIncoming, ( localize(\n                'showIncomingCallsIcons',\n                'Icon for incoming calls in the call hierarchy view.'\n            ))),\n            precondition: ( ContextKeyExpr.and(_ctxCallHierarchyVisible, ( _ctxCallHierarchyDirection.isEqualTo(\"outgoingCalls\" )))),\n            keybinding: {\n                weight: 200 ,\n                primary: 1024  + 512  + 38 ,\n            },\n            menu: {\n                id: CallHierarchyTreePeekWidget.TitleMenu,\n                when: ( _ctxCallHierarchyDirection.isEqualTo(\"outgoingCalls\" )),\n                order: 1,\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        return CallHierarchyController.get(editor)?.showIncomingCalls();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.showOutgoingCalls',\n            title: { value: ( localize('title.outgoing', \"Show Outgoing Calls\")), original: 'Show Outgoing Calls' },\n            icon: registerIcon('callhierarchy-outgoing', Codicon.callOutgoing, ( localize(\n                'showOutgoingCallsIcon',\n                'Icon for outgoing calls in the call hierarchy view.'\n            ))),\n            precondition: ( ContextKeyExpr.and(_ctxCallHierarchyVisible, ( _ctxCallHierarchyDirection.isEqualTo(\"incomingCalls\" )))),\n            keybinding: {\n                weight: 200 ,\n                primary: 1024  + 512  + 38 ,\n            },\n            menu: {\n                id: CallHierarchyTreePeekWidget.TitleMenu,\n                when: ( _ctxCallHierarchyDirection.isEqualTo(\"incomingCalls\" )),\n                order: 1\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        return CallHierarchyController.get(editor)?.showOutgoingCalls();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.refocusCallHierarchy',\n            title: { value: ( localize('title.refocus', \"Refocus Call Hierarchy\")), original: 'Refocus Call Hierarchy' },\n            precondition: _ctxCallHierarchyVisible,\n            keybinding: {\n                weight: 200 ,\n                primary: 1024  + 3\n            }\n        });\n    }\n    async runEditorCommand(_accessor, editor) {\n        return CallHierarchyController.get(editor)?.startCallHierarchyFromCallHierarchy();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.closeCallHierarchy',\n            title: ( localize('close', 'Close')),\n            icon: Codicon.close,\n            precondition: _ctxCallHierarchyVisible,\n            keybinding: {\n                weight: 200  + 10,\n                primary: 9 ,\n                when: ContextKeyExpr.not('config.editor.stablePeek')\n            },\n            menu: {\n                id: CallHierarchyTreePeekWidget.TitleMenu,\n                order: 1000\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        return CallHierarchyController.get(editor)?.endCallHierarchy();\n    }\n});\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .type-hierarchy .message,.monaco-workbench .type-hierarchy .results{display:none}.monaco-workbench .type-hierarchy[data-state=data] .results{display:inherit;height:100%}.monaco-workbench .type-hierarchy[data-state=message] .message{align-items:center;display:flex;height:100%;justify-content:center}.monaco-workbench .type-hierarchy .editor,.monaco-workbench .type-hierarchy .tree{height:100%}.monaco-editor .type-hierarchy .tree{background-color:var(--vscode-peekViewResult-background);color:var(--vscode-peekViewResult-fileForeground)}.monaco-editor .type-hierarchy .tree .monaco-list:focus .monaco-list-rows>.monaco-list-row.selected:not(.highlighted){background-color:var(--vscode-peekViewResult-selectionBackground);color:var(--vscode-peekViewResult-selectionForeground)!important}.monaco-workbench .type-hierarchy .tree .typehierarchy-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-workbench .type-hierarchy .tree .typehierarchy-element .monaco-icon-label{padding-left:4px}.monaco-editor .type-hierarchy .type-decoration{background-color:var(--vscode-peekViewEditor-matchHighlightBackground);border:2px solid var(--vscode-peekViewEditor-matchHighlightBorder);box-sizing:border-box}.monaco-editor .type-hierarchy .editor .monaco-editor .inputarea.ime-input,.monaco-editor .type-hierarchy .editor .monaco-editor .monaco-editor-background{background-color:var(--vscode-peekViewEditor-background)}.monaco-editor .type-hierarchy .editor .monaco-editor .margin{background-color:var(--vscode-peekViewEditorGutter-background)}\";\nn(css,{});\nexport { css, css as default };\n","import { TypeHierarchyModel } from '../common/typeHierarchy.js';\nimport { CancellationToken } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { createMatches } from 'monaco-editor/esm/vs/base/common/filters.js';\nimport { IconLabel } from 'monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js';\nimport { SymbolKinds } from 'monaco-editor/esm/vs/editor/common/languages.js';\nimport { compare } from 'monaco-editor/esm/vs/base/common/strings.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nclass Type {\n    constructor(item, model, parent) {\n        this.item = item;\n        this.model = model;\n        this.parent = parent;\n    }\n    static compare(a, b) {\n        let res = compare(( a.item.uri.toString()), ( b.item.uri.toString()));\n        if (res === 0) {\n            res = Range.compareRangesUsingStarts(a.item.range, b.item.range);\n        }\n        return res;\n    }\n}\nclass DataSource {\n    constructor(getDirection) {\n        this.getDirection = getDirection;\n    }\n    hasChildren() {\n        return true;\n    }\n    async getChildren(element) {\n        if (element instanceof TypeHierarchyModel) {\n            return ( element.roots.map(root => ( new Type(root, element, undefined))));\n        }\n        const { model, item } = element;\n        if (this.getDirection() === \"supertypes\" ) {\n            return ( (await model.provideSupertypes(item, CancellationToken.None)).map(item => {\n                return ( new Type(item, model, element));\n            }));\n        }\n        else {\n            return ( (await model.provideSubtypes(item, CancellationToken.None)).map(item => {\n                return ( new Type(item, model, element));\n            }));\n        }\n    }\n}\nclass Sorter {\n    compare(element, otherElement) {\n        return Type.compare(element, otherElement);\n    }\n}\nclass IdentityProvider {\n    constructor(getDirection) {\n        this.getDirection = getDirection;\n    }\n    getId(element) {\n        let res = this.getDirection() + JSON.stringify(element.item.uri) + JSON.stringify(element.item.range);\n        if (element.parent) {\n            res += this.getId(element.parent);\n        }\n        return res;\n    }\n}\nclass TypeRenderingTemplate {\n    constructor(icon, label) {\n        this.icon = icon;\n        this.label = label;\n    }\n}\nclass TypeRenderer {\n    constructor() {\n        this.templateId = TypeRenderer.id;\n    }\n    static { this.id = 'TypeRenderer'; }\n    renderTemplate(container) {\n        container.classList.add('typehierarchy-element');\n        const icon = document.createElement('div');\n        container.appendChild(icon);\n        const label = ( new IconLabel(container, { supportHighlights: true }));\n        return ( new TypeRenderingTemplate(icon, label));\n    }\n    renderElement(node, _index, template) {\n        const { element, filterData } = node;\n        const deprecated = element.item.tags?.includes(1 );\n        template.icon.classList.add('inline', ...ThemeIcon.asClassNameArray(SymbolKinds.toIcon(element.item.kind)));\n        template.label.setLabel(element.item.name, element.item.detail, { labelEscapeNewLines: true, matches: createMatches(filterData), strikethrough: deprecated });\n    }\n    disposeTemplate(template) {\n        template.label.dispose();\n    }\n}\nclass VirtualDelegate {\n    getHeight(_element) {\n        return 22;\n    }\n    getTemplateId(_element) {\n        return TypeRenderer.id;\n    }\n}\nclass AccessibilityProvider {\n    constructor(getDirection) {\n        this.getDirection = getDirection;\n    }\n    getWidgetAriaLabel() {\n        return ( localize('tree.aria', \"Type Hierarchy\"));\n    }\n    getAriaLabel(element) {\n        if (this.getDirection() === \"supertypes\" ) {\n            return ( localize('supertypes', \"supertypes of {0}\", element.item.name));\n        }\n        else {\n            return ( localize('subtypes', \"subtypes of {0}\", element.item.name));\n        }\n    }\n}\nexport { AccessibilityProvider, DataSource, IdentityProvider, Sorter, Type, TypeRenderer, VirtualDelegate };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/typeHierarchy.css.js';\nimport { Dimension } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { SplitView, Sizing } from 'monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js';\nimport { TreeMouseEventTarget } from 'monaco-editor/esm/vs/base/browser/ui/tree/tree.js';\nimport { Color } from 'monaco-editor/esm/vs/base/common/color.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { DisposableStore, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { EmbeddedCodeEditorWidget } from 'monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { OverviewRulerLane } from 'monaco-editor/esm/vs/editor/common/model.js';\nimport { ITextModelService } from 'monaco-editor/esm/vs/editor/common/services/resolverService.js';\nimport * as peekView from 'monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { createAndFillInActionBarActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuId, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { WorkbenchAsyncDataTree } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { themeColorFromId, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { VirtualDelegate, TypeRenderer, DataSource, Sorter, AccessibilityProvider, IdentityProvider } from './typeHierarchyTree.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nclass LayoutInfo {\n    static store(info, storageService) {\n        storageService.store('typeHierarchyPeekLayout', JSON.stringify(info), 0 , 1 );\n    }\n    static retrieve(storageService) {\n        const value = storageService.get('typeHierarchyPeekLayout', 0 , '{}');\n        const defaultInfo = { ratio: 0.7, height: 17 };\n        try {\n            return { ...defaultInfo, ...JSON.parse(value) };\n        }\n        catch {\n            return defaultInfo;\n        }\n    }\n    constructor(ratio, height) {\n        this.ratio = ratio;\n        this.height = height;\n    }\n}\nclass TypeHierarchyTree extends WorkbenchAsyncDataTree {\n}\nlet TypeHierarchyTreePeekWidget = class TypeHierarchyTreePeekWidget extends peekView.PeekViewWidget {\n    static { this.TitleMenu = ( new MenuId('typehierarchy/title')); }\n    constructor(editor, _where, _direction, themeService, _peekViewService, _editorService, _textModelService, _storageService, _menuService, _contextKeyService, _instantiationService) {\n        super(editor, { showFrame: true, showArrow: true, isResizeable: true, isAccessible: true }, _instantiationService);\n        this._where = _where;\n        this._direction = _direction;\n        this._peekViewService = _peekViewService;\n        this._editorService = _editorService;\n        this._textModelService = _textModelService;\n        this._storageService = _storageService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._treeViewStates = ( new Map());\n        this._previewDisposable = ( new DisposableStore());\n        this.create();\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this._applyTheme(themeService.getColorTheme());\n        this._disposables.add(themeService.onDidColorThemeChange(this._applyTheme, this));\n        this._disposables.add(this._previewDisposable);\n    }\n    dispose() {\n        LayoutInfo.store(this._layoutInfo, this._storageService);\n        this._splitView.dispose();\n        this._tree.dispose();\n        this._editor.dispose();\n        super.dispose();\n    }\n    get direction() {\n        return this._direction;\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    _fillHead(container) {\n        super._fillHead(container, true);\n        const menu = this._menuService.createMenu(TypeHierarchyTreePeekWidget.TitleMenu, this._contextKeyService);\n        const updateToolbar = () => {\n            const actions = [];\n            createAndFillInActionBarActions(menu, undefined, actions);\n            this._actionbarWidget.clear();\n            this._actionbarWidget.push(actions, { label: false, icon: true });\n        };\n        this._disposables.add(menu);\n        this._disposables.add(menu.onDidChange(updateToolbar));\n        updateToolbar();\n    }\n    _fillBody(parent) {\n        this._layoutInfo = LayoutInfo.retrieve(this._storageService);\n        this._dim = ( new Dimension(0, 0));\n        this._parent = parent;\n        parent.classList.add('type-hierarchy');\n        const message = document.createElement('div');\n        message.classList.add('message');\n        parent.appendChild(message);\n        this._message = message;\n        this._message.tabIndex = 0;\n        const container = document.createElement('div');\n        container.classList.add('results');\n        parent.appendChild(container);\n        this._splitView = ( new SplitView(container, { orientation: 1  }));\n        const editorContainer = document.createElement('div');\n        editorContainer.classList.add('editor');\n        container.appendChild(editorContainer);\n        const editorOptions = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._editor = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, editorContainer, editorOptions, {}, this.editor);\n        const treeContainer = document.createElement('div');\n        treeContainer.classList.add('tree');\n        container.appendChild(treeContainer);\n        const options = {\n            sorter: new Sorter(),\n            accessibilityProvider: new AccessibilityProvider(() => this._direction),\n            identityProvider: new IdentityProvider(() => this._direction),\n            expandOnlyOnTwistieClick: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        this._tree = this._instantiationService.createInstance(TypeHierarchyTree, 'TypeHierarchyPeek', treeContainer, new VirtualDelegate(), [this._instantiationService.createInstance(TypeRenderer)], this._instantiationService.createInstance(DataSource, () => this._direction), options);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: editorContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                if (this._dim.height) {\n                    this._editor.layout({ height: this._dim.height, width });\n                }\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                if (this._dim.height) {\n                    this._tree.layout(this._dim.height, width);\n                }\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this._layoutInfo.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }));\n        this._disposables.add(this._tree.onDidChangeFocus(this._updatePreview, this));\n        this._disposables.add(this._editor.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const [focus] = this._tree.getFocus();\n            if (!focus) {\n                return;\n            }\n            this.dispose();\n            this._editorService.openEditor({\n                resource: focus.item.uri,\n                options: { selection: target.range }\n            });\n        }));\n        this._disposables.add(this._tree.onMouseDblClick(e => {\n            if (e.target === TreeMouseEventTarget.Twistie) {\n                return;\n            }\n            if (e.element) {\n                this.dispose();\n                this._editorService.openEditor({\n                    resource: e.element.item.uri,\n                    options: { selection: e.element.item.selectionRange, pinned: true }\n                });\n            }\n        }));\n        this._disposables.add(this._tree.onDidChangeSelection(e => {\n            const [element] = e.elements;\n            if (element && e.browserEvent instanceof KeyboardEvent) {\n                this.dispose();\n                this._editorService.openEditor({\n                    resource: element.item.uri,\n                    options: { selection: element.item.selectionRange, pinned: true }\n                });\n            }\n        }));\n    }\n    async _updatePreview() {\n        const [element] = this._tree.getFocus();\n        if (!element) {\n            return;\n        }\n        this._previewDisposable.clear();\n        const options = {\n            description: 'type-hierarchy-decoration',\n            stickiness: 1 ,\n            className: 'type-decoration',\n            overviewRuler: {\n                color: themeColorFromId(peekView.peekViewEditorMatchHighlight),\n                position: OverviewRulerLane.Center\n            },\n        };\n        let previewUri;\n        if (this._direction === \"supertypes\" ) {\n            previewUri = element.parent ? element.parent.item.uri : element.model.root.uri;\n        }\n        else {\n            previewUri = element.item.uri;\n        }\n        const value = await this._textModelService.createModelReference(previewUri);\n        this._editor.setModel(value.object.textEditorModel);\n        const decorations = [];\n        let fullRange;\n        const loc = { uri: element.item.uri, range: element.item.selectionRange };\n        if (( loc.uri.toString()) === ( previewUri.toString())) {\n            decorations.push({ range: loc.range, options });\n            fullRange = !fullRange ? loc.range : Range.plusRange(loc.range, fullRange);\n        }\n        if (fullRange) {\n            this._editor.revealRangeInCenter(fullRange, 1 );\n            const decorationsCollection = this._editor.createDecorationsCollection(decorations);\n            this._previewDisposable.add(toDisposable(() => decorationsCollection.clear()));\n        }\n        this._previewDisposable.add(value);\n        const title = this._direction === \"supertypes\"\n            ? ( localize('supertypes', \"Supertypes of '{0}'\", element.model.root.name))\n            : ( localize('subtypes', \"Subtypes of '{0}'\", element.model.root.name));\n        this.setTitle(title);\n    }\n    showLoading() {\n        this._parent.dataset['state'] = \"loading\" ;\n        this.setTitle(( localize('title.loading', \"Loading...\")));\n        this._show();\n    }\n    showMessage(message) {\n        this._parent.dataset['state'] = \"message\" ;\n        this.setTitle('');\n        this.setMetaTitle('');\n        this._message.innerText = message;\n        this._show();\n        this._message.focus();\n    }\n    async showModel(model) {\n        this._show();\n        const viewState = this._treeViewStates.get(this._direction);\n        await this._tree.setInput(model, viewState);\n        const root = this._tree.getNode(model).children[0];\n        await this._tree.expand(root.element);\n        if (root.children.length === 0) {\n            this.showMessage(this._direction === \"supertypes\"\n                ? ( localize('empt.supertypes', \"No supertypes of '{0}'\", model.root.name))\n                : ( localize('empt.subtypes', \"No subtypes of '{0}'\", model.root.name)));\n        }\n        else {\n            this._parent.dataset['state'] = \"data\" ;\n            if (!viewState || this._tree.getFocus().length === 0) {\n                this._tree.setFocus([root.children[0].element]);\n            }\n            this._tree.domFocus();\n            this._updatePreview();\n        }\n    }\n    getModel() {\n        return this._tree.getInput();\n    }\n    getFocused() {\n        return this._tree.getFocus()[0];\n    }\n    async updateDirection(newDirection) {\n        const model = this._tree.getInput();\n        if (model && newDirection !== this._direction) {\n            this._treeViewStates.set(this._direction, this._tree.getViewState());\n            this._direction = newDirection;\n            await this.showModel(model);\n        }\n    }\n    _show() {\n        if (!this._isShowing) {\n            this.editor.revealLineInCenterIfOutsideViewport(this._where.lineNumber, 0 );\n            super.show(Range.fromPositions(this._where), this._layoutInfo.height);\n        }\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(height, width) {\n        if (this._dim.height !== height || this._dim.width !== width) {\n            super._doLayoutBody(height, width);\n            this._dim = ( new Dimension(width, height));\n            this._layoutInfo.height = this._viewZone ? this._viewZone.heightInLines : this._layoutInfo.height;\n            this._splitView.layout(width);\n            this._splitView.resizeView(0, width * this._layoutInfo.ratio);\n        }\n    }\n};\nTypeHierarchyTreePeekWidget = ( __decorate([\n    ( __param(3, IThemeService)),\n    ( __param(4, peekView.IPeekViewService)),\n    ( __param(5, IEditorService)),\n    ( __param(6, ITextModelService)),\n    ( __param(7, IStorageService)),\n    ( __param(8, IMenuService)),\n    ( __param(9, IContextKeyService)),\n    ( __param(10, IInstantiationService))\n], TypeHierarchyTreePeekWidget));\nexport { TypeHierarchyTreePeekWidget };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { isCancellationError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { registerEditorContribution, EditorAction2 } from 'monaco-editor/esm/vs/editor/browser/editorExtensions.js';\nimport { ICodeEditorService } from 'monaco-editor/esm/vs/editor/browser/services/codeEditorService.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { PeekContext } from 'monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { registerAction2, MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { ContextKeyExpr, RawContextKey, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { TypeHierarchyTreePeekWidget } from './typeHierarchyPeek.js';\nimport { TypeHierarchyProviderRegistry, TypeHierarchyModel } from '../common/typeHierarchy.js';\nconst _ctxHasTypeHierarchyProvider = ( new RawContextKey('editorHasTypeHierarchyProvider', false, ( localize(\n    'editorHasTypeHierarchyProvider',\n    'Whether a type hierarchy provider is available'\n))));\nconst _ctxTypeHierarchyVisible = ( new RawContextKey('typeHierarchyVisible', false, ( localize('typeHierarchyVisible', 'Whether type hierarchy peek is currently showing'))));\nconst _ctxTypeHierarchyDirection = ( new RawContextKey(\n    'typeHierarchyDirection',\n    undefined,\n    { type: 'string', description: ( localize(\n        'typeHierarchyDirection',\n        'whether type hierarchy shows super types or subtypes'\n    )) }\n));\nfunction sanitizedDirection(candidate) {\n    return candidate === \"subtypes\"  || candidate === \"supertypes\"\n        ? candidate\n        : \"subtypes\" ;\n}\nlet TypeHierarchyController = class TypeHierarchyController {\n    static { this.Id = 'typeHierarchy'; }\n    static get(editor) {\n        return editor.getContribution(TypeHierarchyController.Id);\n    }\n    static { this._storageDirectionKey = 'typeHierarchy/defaultDirection'; }\n    constructor(_editor, _contextKeyService, _storageService, _editorService, _instantiationService) {\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._storageService = _storageService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._disposables = ( new DisposableStore());\n        this._sessionDisposables = ( new DisposableStore());\n        this._ctxHasProvider = _ctxHasTypeHierarchyProvider.bindTo(this._contextKeyService);\n        this._ctxIsVisible = _ctxTypeHierarchyVisible.bindTo(this._contextKeyService);\n        this._ctxDirection = _ctxTypeHierarchyDirection.bindTo(this._contextKeyService);\n        this._disposables.add(Event.any(_editor.onDidChangeModel, _editor.onDidChangeModelLanguage, TypeHierarchyProviderRegistry.onDidChange)(() => {\n            this._ctxHasProvider.set(_editor.hasModel() && ( TypeHierarchyProviderRegistry.has(_editor.getModel())));\n        }));\n        this._disposables.add(this._sessionDisposables);\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    async startTypeHierarchyFromEditor() {\n        this._sessionDisposables.clear();\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const document = this._editor.getModel();\n        const position = this._editor.getPosition();\n        if (!( TypeHierarchyProviderRegistry.has(document))) {\n            return;\n        }\n        const cts = ( new CancellationTokenSource());\n        const model = TypeHierarchyModel.create(document, position, cts.token);\n        const direction = sanitizedDirection(this._storageService.get(TypeHierarchyController._storageDirectionKey, 0 , \"subtypes\" ));\n        this._showTypeHierarchyWidget(position, direction, model, cts);\n    }\n    _showTypeHierarchyWidget(position, direction, model, cts) {\n        this._ctxIsVisible.set(true);\n        this._ctxDirection.set(direction);\n        Event.any(this._editor.onDidChangeModel, this._editor.onDidChangeModelLanguage)(this.endTypeHierarchy, this, this._sessionDisposables);\n        this._widget = this._instantiationService.createInstance(TypeHierarchyTreePeekWidget, this._editor, position, direction);\n        this._widget.showLoading();\n        this._sessionDisposables.add(this._widget.onDidClose(() => {\n            this.endTypeHierarchy();\n            this._storageService.store(TypeHierarchyController._storageDirectionKey, this._widget.direction, 0 , 0 );\n        }));\n        this._sessionDisposables.add({ dispose() { cts.dispose(true); } });\n        this._sessionDisposables.add(this._widget);\n        model.then(model => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (model) {\n                this._sessionDisposables.add(model);\n                this._widget.showModel(model);\n            }\n            else {\n                this._widget.showMessage(( localize('no.item', \"No results\")));\n            }\n        }).catch(err => {\n            if (isCancellationError(err)) {\n                this.endTypeHierarchy();\n                return;\n            }\n            this._widget.showMessage(( localize('error', \"Failed to show type hierarchy\")));\n        });\n    }\n    async startTypeHierarchyFromTypeHierarchy() {\n        if (!this._widget) {\n            return;\n        }\n        const model = this._widget.getModel();\n        const typeItem = this._widget.getFocused();\n        if (!typeItem || !model) {\n            return;\n        }\n        const newEditor = await this._editorService.openCodeEditor({ resource: typeItem.item.uri }, this._editor);\n        if (!newEditor) {\n            return;\n        }\n        const newModel = model.fork(typeItem.item);\n        this._sessionDisposables.clear();\n        TypeHierarchyController.get(newEditor)?._showTypeHierarchyWidget(Range.lift(newModel.root.selectionRange).getStartPosition(), this._widget.direction, Promise.resolve(newModel), ( new CancellationTokenSource()));\n    }\n    showSupertypes() {\n        this._widget?.updateDirection(\"supertypes\" );\n        this._ctxDirection.set(\"supertypes\" );\n    }\n    showSubtypes() {\n        this._widget?.updateDirection(\"subtypes\" );\n        this._ctxDirection.set(\"subtypes\" );\n    }\n    endTypeHierarchy() {\n        this._sessionDisposables.clear();\n        this._ctxIsVisible.set(false);\n        this._editor.focus();\n    }\n};\nTypeHierarchyController = ( __decorate([\n    ( __param(1, IContextKeyService)),\n    ( __param(2, IStorageService)),\n    ( __param(3, ICodeEditorService)),\n    ( __param(4, IInstantiationService))\n], TypeHierarchyController));\nregisterEditorContribution(TypeHierarchyController.Id, TypeHierarchyController, 0 );\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.showTypeHierarchy',\n            title: { value: ( localize('title', \"Peek Type Hierarchy\")), original: 'Peek Type Hierarchy' },\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'navigation',\n                order: 1000,\n                when: ( ContextKeyExpr.and(_ctxHasTypeHierarchyProvider, PeekContext.notInPeekEditor)),\n            },\n            precondition: ( ContextKeyExpr.and(_ctxHasTypeHierarchyProvider, PeekContext.notInPeekEditor))\n        });\n    }\n    async runEditorCommand(_accessor, editor) {\n        return TypeHierarchyController.get(editor)?.startTypeHierarchyFromEditor();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.showSupertypes',\n            title: { value: ( localize('title.supertypes', \"Show Supertypes\")), original: 'Show Supertypes' },\n            icon: Codicon.typeHierarchySuper,\n            precondition: ( ContextKeyExpr.and(_ctxTypeHierarchyVisible, ( _ctxTypeHierarchyDirection.isEqualTo(\"subtypes\" )))),\n            keybinding: {\n                weight: 200 ,\n                primary: 1024  + 512  + 38 ,\n            },\n            menu: {\n                id: TypeHierarchyTreePeekWidget.TitleMenu,\n                when: ( _ctxTypeHierarchyDirection.isEqualTo(\"subtypes\" )),\n                order: 1,\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        return TypeHierarchyController.get(editor)?.showSupertypes();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.showSubtypes',\n            title: { value: ( localize('title.subtypes', \"Show Subtypes\")), original: 'Show Subtypes' },\n            icon: Codicon.typeHierarchySub,\n            precondition: ( ContextKeyExpr.and(_ctxTypeHierarchyVisible, ( _ctxTypeHierarchyDirection.isEqualTo(\"supertypes\" )))),\n            keybinding: {\n                weight: 200 ,\n                primary: 1024  + 512  + 38 ,\n            },\n            menu: {\n                id: TypeHierarchyTreePeekWidget.TitleMenu,\n                when: ( _ctxTypeHierarchyDirection.isEqualTo(\"supertypes\" )),\n                order: 1,\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        return TypeHierarchyController.get(editor)?.showSubtypes();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.refocusTypeHierarchy',\n            title: { value: ( localize('title.refocusTypeHierarchy', \"Refocus Type Hierarchy\")), original: 'Refocus Type Hierarchy' },\n            precondition: _ctxTypeHierarchyVisible,\n            keybinding: {\n                weight: 200 ,\n                primary: 1024  + 3\n            }\n        });\n    }\n    async runEditorCommand(_accessor, editor) {\n        return TypeHierarchyController.get(editor)?.startTypeHierarchyFromTypeHierarchy();\n    }\n});\nregisterAction2(class extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.closeTypeHierarchy',\n            title: ( localize('close', 'Close')),\n            icon: Codicon.close,\n            precondition: _ctxTypeHierarchyVisible,\n            keybinding: {\n                weight: 200  + 10,\n                primary: 9 ,\n                when: ContextKeyExpr.not('config.editor.stablePeek')\n            },\n            menu: {\n                id: TypeHierarchyTreePeekWidget.TitleMenu,\n                order: 1000\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        return TypeHierarchyController.get(editor)?.endTypeHierarchy();\n    }\n});\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-list .monaco-list-row.focused.selected .outline-element .monaco-highlighted-label,.monaco-list .monaco-list-row.focused.selected .outline-element-decoration{color:inherit!important}.monaco-list .outline-element{align-items:center;display:flex;flex:1;flex-flow:row nowrap}.monaco-list .outline-element .monaco-highlighted-label{color:var(--outline-element-color)}.monaco-breadcrumbs .outline-element .outline-element-decoration,.monaco-list .outline-element .outline-element-decoration{color:var(--outline-element-color);font-size:90%;font-weight:600;margin-left:auto;opacity:.75;padding:0 12px 0 5px;text-align:center}.monaco-breadcrumbs .outline-element .monaco-icon-label-container .monaco-icon-description-container,.monaco-breadcrumbs .outline-element .outline-element-decoration{display:none}.monaco-list .outline-element .outline-element-decoration.bubble{font-family:codicon;font-size:14px;opacity:.4;padding-right:8px}.monaco-list .outline-element .outline-element-icon{margin-right:4px}\";\nn(css,{});\nexport { css, css as default };\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport './documentSymbolsTree.css.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { HighlightedLabel } from 'monaco-editor/esm/vs/base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { createMatches } from 'monaco-editor/esm/vs/base/common/filters.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { getAriaLabelForSymbol, symbolKindNames, SymbolKinds } from 'monaco-editor/esm/vs/editor/common/languages.js';\nimport { OutlineModel, OutlineElement, OutlineGroup } from 'monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IconLabel } from 'monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { MarkerSeverity } from 'monaco-editor/esm/vs/platform/markers/common/markers.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { listErrorForeground, listWarningForeground } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { IdleValue } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { ITextResourceConfigurationService } from 'monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nclass DocumentSymbolNavigationLabelProvider {\n    getKeyboardNavigationLabel(element) {\n        if (element instanceof OutlineGroup) {\n            return element.label;\n        }\n        else {\n            return element.symbol.name;\n        }\n    }\n}\nclass DocumentSymbolAccessibilityProvider {\n    constructor(_ariaLabel) {\n        this._ariaLabel = _ariaLabel;\n    }\n    getWidgetAriaLabel() {\n        return this._ariaLabel;\n    }\n    getAriaLabel(element) {\n        if (element instanceof OutlineGroup) {\n            return element.label;\n        }\n        else {\n            return getAriaLabelForSymbol(element.symbol.name, element.symbol.kind);\n        }\n    }\n}\nclass DocumentSymbolIdentityProvider {\n    getId(element) {\n        return element.id;\n    }\n}\nclass DocumentSymbolGroupTemplate {\n    static { this.id = 'DocumentSymbolGroupTemplate'; }\n    constructor(labelContainer, label) {\n        this.labelContainer = labelContainer;\n        this.label = label;\n    }\n}\nclass DocumentSymbolTemplate {\n    static { this.id = 'DocumentSymbolTemplate'; }\n    constructor(container, iconLabel, iconClass, decoration) {\n        this.container = container;\n        this.iconLabel = iconLabel;\n        this.iconClass = iconClass;\n        this.decoration = decoration;\n    }\n}\nclass DocumentSymbolVirtualDelegate {\n    getHeight(_element) {\n        return 22;\n    }\n    getTemplateId(element) {\n        return element instanceof OutlineGroup\n            ? DocumentSymbolGroupTemplate.id\n            : DocumentSymbolTemplate.id;\n    }\n}\nclass DocumentSymbolGroupRenderer {\n    constructor() {\n        this.templateId = DocumentSymbolGroupTemplate.id;\n    }\n    renderTemplate(container) {\n        const labelContainer = dom.$('.outline-element-label');\n        container.classList.add('outline-element');\n        dom.append(container, labelContainer);\n        return ( new DocumentSymbolGroupTemplate(labelContainer, ( new HighlightedLabel(labelContainer))));\n    }\n    renderElement(node, _index, template) {\n        template.label.set(node.element.label, createMatches(node.filterData));\n    }\n    disposeTemplate(_template) {\n    }\n}\nlet DocumentSymbolRenderer = class DocumentSymbolRenderer {\n    constructor(_renderMarker, _configurationService, _themeService) {\n        this._renderMarker = _renderMarker;\n        this._configurationService = _configurationService;\n        this._themeService = _themeService;\n        this.templateId = DocumentSymbolTemplate.id;\n    }\n    renderTemplate(container) {\n        container.classList.add('outline-element');\n        const iconLabel = ( new IconLabel(container, { supportHighlights: true }));\n        const iconClass = dom.$('.outline-element-icon');\n        const decoration = dom.$('.outline-element-decoration');\n        container.prepend(iconClass);\n        container.appendChild(decoration);\n        return ( new DocumentSymbolTemplate(container, iconLabel, iconClass, decoration));\n    }\n    renderElement(node, _index, template) {\n        const { element } = node;\n        const extraClasses = ['nowrap'];\n        const options = {\n            matches: createMatches(node.filterData),\n            labelEscapeNewLines: true,\n            extraClasses,\n            title: ( localize(\n                'title.template',\n                \"{0} ({1})\",\n                element.symbol.name,\n                symbolKindNames[element.symbol.kind]\n            ))\n        };\n        if (this._configurationService.getValue(\"outline.icons\" )) {\n            template.iconClass.className = '';\n            template.iconClass.classList.add('outline-element-icon', 'inline', ...ThemeIcon.asClassNameArray(SymbolKinds.toIcon(element.symbol.kind)));\n        }\n        if (element.symbol.tags.indexOf(1 ) >= 0) {\n            extraClasses.push(`deprecated`);\n            options.matches = [];\n        }\n        template.iconLabel.setLabel(element.symbol.name, element.symbol.detail, options);\n        if (this._renderMarker) {\n            this._renderMarkerInfo(element, template);\n        }\n    }\n    _renderMarkerInfo(element, template) {\n        if (!element.marker) {\n            dom.hide(template.decoration);\n            template.container.style.removeProperty('--outline-element-color');\n            return;\n        }\n        const { count, topSev } = element.marker;\n        const color = this._themeService.getColorTheme().getColor(topSev === MarkerSeverity.Error ? listErrorForeground : listWarningForeground);\n        const cssColor = color ? ( color.toString()) : 'inherit';\n        if (this._configurationService.getValue(\"outline.problems.colors\" )) {\n            template.container.style.setProperty('--outline-element-color', cssColor);\n        }\n        else {\n            template.container.style.removeProperty('--outline-element-color');\n        }\n        if (!this._configurationService.getValue(\"outline.problems.badges\" )) {\n            dom.hide(template.decoration);\n        }\n        else if (count > 0) {\n            dom.show(template.decoration);\n            template.decoration.classList.remove('bubble');\n            template.decoration.innerText = count < 10 ? ( count.toString()) : '+9';\n            template.decoration.title = count === 1 ? ( localize('1.problem', \"1 problem in this element\")) : ( localize('N.problem', \"{0} problems in this element\", count));\n            template.decoration.style.setProperty('--outline-element-color', cssColor);\n        }\n        else {\n            dom.show(template.decoration);\n            template.decoration.classList.add('bubble');\n            template.decoration.innerText = '\\uea71';\n            template.decoration.title = ( localize('deep.problem', \"Contains elements with problems\"));\n            template.decoration.style.setProperty('--outline-element-color', cssColor);\n        }\n    }\n    disposeTemplate(_template) {\n        _template.iconLabel.dispose();\n    }\n};\nDocumentSymbolRenderer = ( __decorate([\n    ( __param(1, IConfigurationService)),\n    ( __param(2, IThemeService))\n], DocumentSymbolRenderer));\nlet DocumentSymbolFilter = class DocumentSymbolFilter {\n    static { this.kindToConfigName = ( Object.freeze({\n        [0 ]: 'showFiles',\n        [1 ]: 'showModules',\n        [2 ]: 'showNamespaces',\n        [3 ]: 'showPackages',\n        [4 ]: 'showClasses',\n        [5 ]: 'showMethods',\n        [6 ]: 'showProperties',\n        [7 ]: 'showFields',\n        [8 ]: 'showConstructors',\n        [9 ]: 'showEnums',\n        [10 ]: 'showInterfaces',\n        [11 ]: 'showFunctions',\n        [12 ]: 'showVariables',\n        [13 ]: 'showConstants',\n        [14 ]: 'showStrings',\n        [15 ]: 'showNumbers',\n        [16 ]: 'showBooleans',\n        [17 ]: 'showArrays',\n        [18 ]: 'showObjects',\n        [19 ]: 'showKeys',\n        [20 ]: 'showNull',\n        [21 ]: 'showEnumMembers',\n        [22 ]: 'showStructs',\n        [23 ]: 'showEvents',\n        [24 ]: 'showOperators',\n        [25 ]: 'showTypeParameters',\n    })); }\n    constructor(_prefix, _textResourceConfigService) {\n        this._prefix = _prefix;\n        this._textResourceConfigService = _textResourceConfigService;\n    }\n    filter(element) {\n        const outline = OutlineModel.get(element);\n        if (!(element instanceof OutlineElement)) {\n            return true;\n        }\n        const configName = DocumentSymbolFilter.kindToConfigName[element.symbol.kind];\n        const configKey = `${this._prefix}.${configName}`;\n        return this._textResourceConfigService.getValue(outline?.uri, configKey);\n    }\n};\nDocumentSymbolFilter = ( __decorate([\n    ( __param(1, ITextResourceConfigurationService))\n], DocumentSymbolFilter));\nclass DocumentSymbolComparator {\n    constructor() {\n        this._collator = ( new IdleValue(() => new Intl.Collator(undefined, { numeric: true })));\n    }\n    compareByPosition(a, b) {\n        if (a instanceof OutlineGroup && b instanceof OutlineGroup) {\n            return a.order - b.order;\n        }\n        else if (a instanceof OutlineElement && b instanceof OutlineElement) {\n            return Range.compareRangesUsingStarts(a.symbol.range, b.symbol.range) || this._collator.value.compare(a.symbol.name, b.symbol.name);\n        }\n        return 0;\n    }\n    compareByType(a, b) {\n        if (a instanceof OutlineGroup && b instanceof OutlineGroup) {\n            return a.order - b.order;\n        }\n        else if (a instanceof OutlineElement && b instanceof OutlineElement) {\n            return a.symbol.kind - b.symbol.kind || this._collator.value.compare(a.symbol.name, b.symbol.name);\n        }\n        return 0;\n    }\n    compareByName(a, b) {\n        if (a instanceof OutlineGroup && b instanceof OutlineGroup) {\n            return a.order - b.order;\n        }\n        else if (a instanceof OutlineElement && b instanceof OutlineElement) {\n            return this._collator.value.compare(a.symbol.name, b.symbol.name) || Range.compareRangesUsingStarts(a.symbol.range, b.symbol.range);\n        }\n        return 0;\n    }\n}\nexport { DocumentSymbolAccessibilityProvider, DocumentSymbolComparator, DocumentSymbolFilter, DocumentSymbolGroupRenderer, DocumentSymbolIdentityProvider, DocumentSymbolNavigationLabelProvider, DocumentSymbolRenderer, DocumentSymbolVirtualDelegate };\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { DisposableStore, Disposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IOutlineService } from '../../../../services/outline/browser/outline.js';\nimport { Extensions } from '../../../../common/contributions.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { DocumentSymbolGroupRenderer, DocumentSymbolRenderer, DocumentSymbolIdentityProvider, DocumentSymbolNavigationLabelProvider, DocumentSymbolAccessibilityProvider, DocumentSymbolFilter, DocumentSymbolVirtualDelegate, DocumentSymbolComparator } from './documentSymbolsTree.js';\nimport { isCodeEditor, isDiffEditor } from 'monaco-editor/esm/vs/editor/browser/editorBrowser.js';\nimport { TreeElement, OutlineModel, OutlineElement, IOutlineModelService, OutlineGroup } from 'monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { raceCancellation, timeout, Barrier, TimeoutTimer } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { onUnexpectedError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { ITextResourceConfigurationService } from 'monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { ICodeEditorService } from 'monaco-editor/esm/vs/editor/browser/services/codeEditorService.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IMarkerDecorationsService } from 'monaco-editor/esm/vs/editor/common/services/markerDecorations.js';\nimport { MarkerSeverity } from 'monaco-editor/esm/vs/platform/markers/common/markers.js';\nimport { isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { ILanguageFeaturesService } from 'monaco-editor/esm/vs/editor/common/services/languageFeatures.js';\nlet DocumentSymbolBreadcrumbsSource = class DocumentSymbolBreadcrumbsSource {\n    constructor(_editor, _textResourceConfigurationService) {\n        this._editor = _editor;\n        this._textResourceConfigurationService = _textResourceConfigurationService;\n        this._breadcrumbs = [];\n    }\n    getBreadcrumbElements() {\n        return this._breadcrumbs;\n    }\n    clear() {\n        this._breadcrumbs = [];\n    }\n    update(model, position) {\n        const newElements = this._computeBreadcrumbs(model, position);\n        this._breadcrumbs = newElements;\n    }\n    _computeBreadcrumbs(model, position) {\n        let item = model.getItemEnclosingPosition(position);\n        if (!item) {\n            return [];\n        }\n        const chain = [];\n        while (item) {\n            chain.push(item);\n            const parent = item.parent;\n            if (parent instanceof OutlineModel) {\n                break;\n            }\n            if (parent instanceof OutlineGroup && parent.parent && parent.parent.children.size === 1) {\n                break;\n            }\n            item = parent;\n        }\n        const result = [];\n        for (let i = chain.length - 1; i >= 0; i--) {\n            const element = chain[i];\n            if (this._isFiltered(element)) {\n                break;\n            }\n            result.push(element);\n        }\n        if (result.length === 0) {\n            return [];\n        }\n        return result;\n    }\n    _isFiltered(element) {\n        if (!(element instanceof OutlineElement)) {\n            return false;\n        }\n        const key = `breadcrumbs.${DocumentSymbolFilter.kindToConfigName[element.symbol.kind]}`;\n        let uri;\n        if (this._editor && this._editor.getModel()) {\n            const model = this._editor.getModel();\n            uri = model.uri;\n        }\n        return !this._textResourceConfigurationService.getValue(uri, key);\n    }\n};\nDocumentSymbolBreadcrumbsSource = ( __decorate([\n    ( __param(1, ITextResourceConfigurationService))\n], DocumentSymbolBreadcrumbsSource));\nlet DocumentSymbolsOutline = class DocumentSymbolsOutline {\n    get activeElement() {\n        const posistion = this._editor.getPosition();\n        if (!posistion || !this._outlineModel) {\n            return undefined;\n        }\n        else {\n            return this._outlineModel.getItemEnclosingPosition(posistion);\n        }\n    }\n    constructor(_editor, target, firstLoadBarrier, _languageFeaturesService, _codeEditorService, _outlineModelService, _configurationService, _markerDecorationsService, textResourceConfigurationService, instantiationService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._codeEditorService = _codeEditorService;\n        this._outlineModelService = _outlineModelService;\n        this._configurationService = _configurationService;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._disposables = ( new DisposableStore());\n        this._onDidChange = ( new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._outlineDisposables = ( new DisposableStore());\n        this.outlineKind = 'documentSymbols';\n        this._breadcrumbsDataSource = ( new DocumentSymbolBreadcrumbsSource(_editor, textResourceConfigurationService));\n        const delegate = ( new DocumentSymbolVirtualDelegate());\n        const renderers = [( new DocumentSymbolGroupRenderer()), instantiationService.createInstance(DocumentSymbolRenderer, true)];\n        const treeDataSource = {\n            getChildren: (parent) => {\n                if (parent instanceof OutlineElement || parent instanceof OutlineGroup) {\n                    return ( parent.children.values());\n                }\n                if (parent === this && this._outlineModel) {\n                    return ( this._outlineModel.children.values());\n                }\n                return [];\n            }\n        };\n        const comparator = ( new DocumentSymbolComparator());\n        const initialState = textResourceConfigurationService.getValue(_editor.getModel()?.uri, \"outline.collapseItems\" );\n        const options = {\n            collapseByDefault: target === 2  || ((target === 1  && initialState === \"alwaysCollapse\") ),\n            expandOnlyOnTwistieClick: true,\n            multipleSelectionSupport: false,\n            identityProvider: ( new DocumentSymbolIdentityProvider()),\n            keyboardNavigationLabelProvider: ( new DocumentSymbolNavigationLabelProvider()),\n            accessibilityProvider: ( new DocumentSymbolAccessibilityProvider(( localize('document', \"Document Symbols\")))),\n            filter: target === 1\n                ? instantiationService.createInstance(DocumentSymbolFilter, 'outline')\n                : target === 2\n                    ? instantiationService.createInstance(DocumentSymbolFilter, 'breadcrumbs')\n                    : undefined\n        };\n        this.config = {\n            breadcrumbsDataSource: this._breadcrumbsDataSource,\n            delegate,\n            renderers,\n            treeDataSource,\n            comparator,\n            options,\n            quickPickDataSource: { getQuickPickElements: () => { throw new Error('not implemented'); } }\n        };\n        this._disposables.add(_languageFeaturesService.documentSymbolProvider.onDidChange(_ => this._createOutline()));\n        this._disposables.add(this._editor.onDidChangeModel(_ => this._createOutline()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(_ => this._createOutline()));\n        const updateSoon = ( new TimeoutTimer());\n        this._disposables.add(updateSoon);\n        this._disposables.add(this._editor.onDidChangeModelContent(event => {\n            const model = this._editor.getModel();\n            if (model) {\n                const timeout = _outlineModelService.getDebounceValue(model);\n                updateSoon.cancelAndSet(() => this._createOutline(event), timeout);\n            }\n        }));\n        this._disposables.add(this._editor.onDidDispose(() => this._outlineDisposables.clear()));\n        this._createOutline().finally(() => firstLoadBarrier.open());\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._outlineDisposables.dispose();\n    }\n    get isEmpty() {\n        return !this._outlineModel || TreeElement.empty(this._outlineModel);\n    }\n    get uri() {\n        return this._outlineModel?.uri;\n    }\n    async reveal(entry, options, sideBySide) {\n        const model = OutlineModel.get(entry);\n        if (!model || !(entry instanceof OutlineElement)) {\n            return;\n        }\n        await this._codeEditorService.openCodeEditor({\n            resource: model.uri,\n            options: {\n                ...options,\n                selection: Range.collapseToStart(entry.symbol.selectionRange),\n                selectionRevealType: 3 ,\n            }\n        }, this._editor, sideBySide);\n    }\n    preview(entry) {\n        if (!(entry instanceof OutlineElement)) {\n            return Disposable.None;\n        }\n        const { symbol } = entry;\n        this._editor.revealRangeInCenterIfOutsideViewport(symbol.range, 0 );\n        const decorationsCollection = this._editor.createDecorationsCollection([{\n                range: symbol.range,\n                options: {\n                    description: 'document-symbols-outline-range-highlight',\n                    className: 'rangeHighlight',\n                    isWholeLine: true\n                }\n            }]);\n        return toDisposable(() => decorationsCollection.clear());\n    }\n    captureViewState() {\n        const viewState = this._editor.saveViewState();\n        return toDisposable(() => {\n            if (viewState) {\n                this._editor.restoreViewState(viewState);\n            }\n        });\n    }\n    async _createOutline(contentChangeEvent) {\n        this._outlineDisposables.clear();\n        if (!contentChangeEvent) {\n            this._setOutlineModel(undefined);\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const buffer = this._editor.getModel();\n        if (!( this._languageFeaturesService.documentSymbolProvider.has(buffer))) {\n            return;\n        }\n        const cts = ( new CancellationTokenSource());\n        const versionIdThen = buffer.getVersionId();\n        const timeoutTimer = ( new TimeoutTimer());\n        this._outlineDisposables.add(timeoutTimer);\n        this._outlineDisposables.add(toDisposable(() => cts.dispose(true)));\n        try {\n            const model = await this._outlineModelService.getOrCreate(buffer, cts.token);\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (TreeElement.empty(model) || !this._editor.hasModel()) {\n                this._setOutlineModel(model);\n                return;\n            }\n            if (contentChangeEvent && this._outlineModel && buffer.getLineCount() >= 25) {\n                const newSize = TreeElement.size(model);\n                const newLength = buffer.getValueLength();\n                const newRatio = newSize / newLength;\n                const oldSize = TreeElement.size(this._outlineModel);\n                const oldLength = newLength - contentChangeEvent.changes.reduce((prev, value) => prev + value.rangeLength, 0);\n                const oldRatio = oldSize / oldLength;\n                if (newRatio <= oldRatio * 0.5 || newRatio >= oldRatio * 1.5) {\n                    const value = await raceCancellation(timeout(2000).then(() => true), cts.token, false);\n                    if (!value) {\n                        return;\n                    }\n                }\n            }\n            this._applyMarkersToOutline(model);\n            this._outlineDisposables.add(this._markerDecorationsService.onDidChangeMarker(textModel => {\n                if (isEqual(model.uri, textModel.uri)) {\n                    this._applyMarkersToOutline(model);\n                    this._onDidChange.fire({});\n                }\n            }));\n            this._outlineDisposables.add(this._configurationService.onDidChangeConfiguration(e => {\n                if (e.affectsConfiguration(\"outline.problems.enabled\" )) {\n                    if (this._configurationService.getValue(\"outline.problems.enabled\" )) {\n                        this._applyMarkersToOutline(model);\n                    }\n                    else {\n                        model.updateMarker([]);\n                    }\n                    this._onDidChange.fire({});\n                }\n                if (e.affectsConfiguration('outline')) {\n                    this._onDidChange.fire({});\n                }\n                if (e.affectsConfiguration('breadcrumbs') && this._editor.hasModel()) {\n                    this._breadcrumbsDataSource.update(model, this._editor.getPosition());\n                    this._onDidChange.fire({});\n                }\n            }));\n            this._outlineDisposables.add(this._configurationService.onDidChangeConfiguration(e => {\n                if (e.affectsConfiguration(\"outline.icons\" )) {\n                    this._onDidChange.fire({});\n                }\n                if (e.affectsConfiguration('outline')) {\n                    this._onDidChange.fire({});\n                }\n            }));\n            this._outlineDisposables.add(this._editor.onDidChangeCursorPosition(_ => {\n                timeoutTimer.cancelAndSet(() => {\n                    if (!buffer.isDisposed() && versionIdThen === buffer.getVersionId() && this._editor.hasModel()) {\n                        this._breadcrumbsDataSource.update(model, this._editor.getPosition());\n                        this._onDidChange.fire({ affectOnlyActiveElement: true });\n                    }\n                }, 150);\n            }));\n            this._setOutlineModel(model);\n        }\n        catch (err) {\n            this._setOutlineModel(undefined);\n            onUnexpectedError(err);\n        }\n    }\n    _applyMarkersToOutline(model) {\n        if (!model || !this._configurationService.getValue(\"outline.problems.enabled\" )) {\n            return;\n        }\n        const markers = [];\n        for (const [range, marker] of this._markerDecorationsService.getLiveMarkers(model.uri)) {\n            if (marker.severity === MarkerSeverity.Error || marker.severity === MarkerSeverity.Warning) {\n                markers.push({ ...range, severity: marker.severity });\n            }\n        }\n        model.updateMarker(markers);\n    }\n    _setOutlineModel(model) {\n        const position = this._editor.getPosition();\n        if (!position || !model) {\n            this._outlineModel = undefined;\n            this._breadcrumbsDataSource.clear();\n        }\n        else {\n            if (!this._outlineModel?.merge(model)) {\n                this._outlineModel = model;\n            }\n            this._breadcrumbsDataSource.update(model, position);\n        }\n        this._onDidChange.fire({});\n    }\n};\nDocumentSymbolsOutline = ( __decorate([\n    ( __param(3, ILanguageFeaturesService)),\n    ( __param(4, ICodeEditorService)),\n    ( __param(5, IOutlineModelService)),\n    ( __param(6, IConfigurationService)),\n    ( __param(7, IMarkerDecorationsService)),\n    ( __param(8, ITextResourceConfigurationService)),\n    ( __param(9, IInstantiationService))\n], DocumentSymbolsOutline));\nlet DocumentSymbolsOutlineCreator = class DocumentSymbolsOutlineCreator {\n    constructor(outlineService) {\n        const reg = outlineService.registerOutlineCreator(this);\n        this.dispose = () => reg.dispose();\n    }\n    matches(candidate) {\n        const ctrl = candidate.getControl();\n        return isCodeEditor(ctrl) || isDiffEditor(ctrl);\n    }\n    async createOutline(pane, target, _token) {\n        const control = pane.getControl();\n        let editor;\n        if (isCodeEditor(control)) {\n            editor = control;\n        }\n        else if (isDiffEditor(control)) {\n            editor = control.getModifiedEditor();\n        }\n        if (!editor) {\n            return undefined;\n        }\n        const firstLoadBarrier = ( new Barrier());\n        const result = editor.invokeWithinContext(accessor => accessor.get(IInstantiationService).createInstance(DocumentSymbolsOutline, editor, target, firstLoadBarrier));\n        await firstLoadBarrier.wait();\n        return result;\n    }\n};\nDocumentSymbolsOutlineCreator = ( __decorate([\n    ( __param(0, IOutlineService))\n], DocumentSymbolsOutlineCreator));\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(DocumentSymbolsOutlineCreator, 4 );\n","import n from '../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .outline-pane{display:flex;flex-direction:column}.monaco-workbench .outline-pane .outline-progress{height:2px;padding-bottom:3px;position:absolute;width:100%}.monaco-workbench .outline-pane .outline-progress .monaco-progress-container,.monaco-workbench .outline-pane .outline-progress .monaco-progress-container .progress-bit{height:2px}.monaco-workbench .outline-pane .outline-tree{height:100%}.monaco-workbench .outline-pane .outline-message{display:none;opacity:.5;padding:10px 22px 0;pointer-events:none;position:absolute;z-index:1}.monaco-workbench .outline-pane.message .outline-message{display:inherit}.monaco-workbench .outline-pane.message .outline-progress{display:none}\";\nn(css,{});\nexport { css, css as default };\n","import { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nclass OutlineViewState {\n    constructor() {\n        this._followCursor = false;\n        this._filterOnType = true;\n        this._sortBy = 0 ;\n        this._onDidChange = ( new Emitter());\n        this.onDidChange = this._onDidChange.event;\n    }\n    dispose() {\n        this._onDidChange.dispose();\n    }\n    set followCursor(value) {\n        if (value !== this._followCursor) {\n            this._followCursor = value;\n            this._onDidChange.fire({ followCursor: true });\n        }\n    }\n    get followCursor() {\n        return this._followCursor;\n    }\n    get filterOnType() {\n        return this._filterOnType;\n    }\n    set filterOnType(value) {\n        if (value !== this._filterOnType) {\n            this._filterOnType = value;\n            this._onDidChange.fire({ filterOnType: true });\n        }\n    }\n    set sortBy(value) {\n        if (value !== this._sortBy) {\n            this._sortBy = value;\n            this._onDidChange.fire({ sortBy: true });\n        }\n    }\n    get sortBy() {\n        return this._sortBy;\n    }\n    persist(storageService) {\n        storageService.store('outline/state', JSON.stringify({\n            followCursor: this.followCursor,\n            sortBy: this.sortBy,\n            filterOnType: this.filterOnType,\n        }), 1 , 1 );\n    }\n    restore(storageService) {\n        const raw = storageService.get('outline/state', 1 );\n        if (!raw) {\n            return;\n        }\n        let data;\n        try {\n            data = JSON.parse(raw);\n        }\n        catch (e) {\n            return;\n        }\n        this.followCursor = data.followCursor;\n        this.sortBy = data.sortBy ?? 0 ;\n        if (typeof data.filterOnType === 'boolean') {\n            this.filterOnType = data.filterOnType;\n        }\n    }\n}\nexport { OutlineViewState };\n","import { RawContextKey } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nvar IOutlinePane;\n( (function(IOutlinePane) {\n    IOutlinePane.Id = 'outline';\n})(IOutlinePane || (IOutlinePane = {})));\nconst ctxFollowsCursor = ( new RawContextKey('outlineFollowsCursor', false));\nconst ctxFilterOnType = ( new RawContextKey('outlineFiltersOnType', false));\nconst ctxSortMode = ( new RawContextKey('outlineSortMode', 0 ));\nconst ctxAllCollapsed = ( new RawContextKey('outlineAllCollapsed', false));\nexport { IOutlinePane, ctxAllCollapsed, ctxFilterOnType, ctxFollowsCursor, ctxSortMode };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './outlinePane.css.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { ProgressBar } from 'monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js';\nimport { TimeoutTimer } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { LRUCache } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { WorkbenchDataTree } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { ViewPane } from '../../../browser/parts/views/viewPane.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { basename } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { IOpenerService } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { OutlineViewState } from './outlineViewState.js';\nimport { IOutlineService } from '../../../services/outline/browser/outline.js';\nimport { EditorResourceAccessor } from '../../../common/editor.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { TreeFindMode, AbstractTreeViewState } from 'monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js';\nimport { ctxFollowsCursor, ctxFilterOnType, ctxSortMode, ctxAllCollapsed } from './outline.js';\nimport { defaultProgressBarStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nclass OutlineTreeSorter {\n    constructor(_comparator, order) {\n        this._comparator = _comparator;\n        this.order = order;\n    }\n    compare(a, b) {\n        if (this.order === 2 ) {\n            return this._comparator.compareByType(a, b);\n        }\n        else if (this.order === 1 ) {\n            return this._comparator.compareByName(a, b);\n        }\n        else {\n            return this._comparator.compareByPosition(a, b);\n        }\n    }\n}\nlet OutlinePane = class OutlinePane extends ViewPane {\n    static { this.Id = 'outline'; }\n    constructor(options, _outlineService, _instantiationService, viewDescriptorService, _storageService, _editorService, configurationService, keybindingService, contextKeyService, contextMenuService, openerService, themeService, telemetryService) {\n        super(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, _instantiationService, openerService, themeService, telemetryService);\n        this._outlineService = _outlineService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._editorService = _editorService;\n        this._disposables = ( new DisposableStore());\n        this._editorControlDisposables = ( new DisposableStore());\n        this._editorPaneDisposables = ( new DisposableStore());\n        this._outlineViewState = ( new OutlineViewState());\n        this._editorListener = ( new MutableDisposable());\n        this._treeStates = ( new LRUCache(10));\n        this._outlineViewState.restore(this._storageService);\n        this._disposables.add(this._outlineViewState);\n        contextKeyService.bufferChangeEvents(() => {\n            this._ctxFollowsCursor = ctxFollowsCursor.bindTo(contextKeyService);\n            this._ctxFilterOnType = ctxFilterOnType.bindTo(contextKeyService);\n            this._ctxSortMode = ctxSortMode.bindTo(contextKeyService);\n            this._ctxAllCollapsed = ctxAllCollapsed.bindTo(contextKeyService);\n        });\n        const updateContext = () => {\n            this._ctxFollowsCursor.set(this._outlineViewState.followCursor);\n            this._ctxFilterOnType.set(this._outlineViewState.filterOnType);\n            this._ctxSortMode.set(this._outlineViewState.sortBy);\n        };\n        updateContext();\n        this._disposables.add(this._outlineViewState.onDidChange(updateContext));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editorPaneDisposables.dispose();\n        this._editorControlDisposables.dispose();\n        this._editorListener.dispose();\n        super.dispose();\n    }\n    focus() {\n        this._tree?.domFocus();\n    }\n    renderBody(container) {\n        super.renderBody(container);\n        this._domNode = container;\n        container.classList.add('outline-pane');\n        const progressContainer = dom.$('.outline-progress');\n        this._message = dom.$('.outline-message');\n        this._progressBar = ( new ProgressBar(progressContainer, defaultProgressBarStyles));\n        this._treeContainer = dom.$('.outline-tree');\n        dom.append(container, progressContainer, this._message, this._treeContainer);\n        this._disposables.add(this.onDidChangeBodyVisibility(visible => {\n            if (!visible) {\n                this._editorListener.clear();\n                this._editorPaneDisposables.clear();\n                this._editorControlDisposables.clear();\n            }\n            else if (!this._editorListener.value) {\n                const event = Event.any(this._editorService.onDidActiveEditorChange, this._outlineService.onDidChange);\n                this._editorListener.value = event(() => this._handleEditorChanged(this._editorService.activeEditorPane));\n                this._handleEditorChanged(this._editorService.activeEditorPane);\n            }\n        }));\n    }\n    layoutBody(height, width) {\n        super.layoutBody(height, width);\n        this._tree?.layout(height, width);\n        this._treeDimensions = new dom.Dimension(width, height);\n    }\n    collapseAll() {\n        this._tree?.collapseAll();\n    }\n    expandAll() {\n        this._tree?.expandAll();\n    }\n    get outlineViewState() {\n        return this._outlineViewState;\n    }\n    _showMessage(message) {\n        this._domNode.classList.add('message');\n        this._progressBar.stop().hide();\n        this._message.innerText = message;\n    }\n    _captureViewState(uri) {\n        if (this._tree) {\n            const oldOutline = this._tree.getInput();\n            if (!uri) {\n                uri = oldOutline?.uri;\n            }\n            if (oldOutline && uri) {\n                this._treeStates.set(`${oldOutline.outlineKind}/${uri}`, this._tree.getViewState());\n                return true;\n            }\n        }\n        return false;\n    }\n    _handleEditorChanged(pane) {\n        this._editorPaneDisposables.clear();\n        if (pane) {\n            this._editorPaneDisposables.add(pane.onDidChangeControl(() => {\n                this._handleEditorControlChanged(pane);\n            }));\n        }\n        this._handleEditorControlChanged(pane);\n    }\n    async _handleEditorControlChanged(pane) {\n        const resource = EditorResourceAccessor.getOriginalUri(pane?.input);\n        const didCapture = this._captureViewState();\n        this._editorControlDisposables.clear();\n        if (!pane || !this._outlineService.canCreateOutline(pane) || !resource) {\n            return this._showMessage(( localize('no-editor', \"The active editor cannot provide outline information.\")));\n        }\n        let loadingMessage;\n        if (!didCapture) {\n            loadingMessage = ( new TimeoutTimer(() => {\n                this._showMessage(( localize('loading', \"Loading document symbols for '{0}'...\", basename(resource))));\n            }, 100));\n        }\n        this._progressBar.infinite().show(500);\n        const cts = ( new CancellationTokenSource());\n        this._editorControlDisposables.add(toDisposable(() => cts.dispose(true)));\n        const newOutline = await this._outlineService.createOutline(pane, 1 , cts.token);\n        loadingMessage?.dispose();\n        if (!newOutline) {\n            return;\n        }\n        if (cts.token.isCancellationRequested) {\n            newOutline?.dispose();\n            return;\n        }\n        this._editorControlDisposables.add(newOutline);\n        this._progressBar.stop().hide();\n        const sorter = ( new OutlineTreeSorter(newOutline.config.comparator, this._outlineViewState.sortBy));\n        const tree = this._instantiationService.createInstance(WorkbenchDataTree, 'OutlinePane', this._treeContainer, newOutline.config.delegate, newOutline.config.renderers, newOutline.config.treeDataSource, {\n            ...newOutline.config.options,\n            sorter,\n            expandOnDoubleClick: false,\n            expandOnlyOnTwistieClick: true,\n            multipleSelectionSupport: false,\n            hideTwistiesOfChildlessElements: true,\n            defaultFindMode: this._outlineViewState.filterOnType ? TreeFindMode.Filter : TreeFindMode.Highlight,\n            overrideStyles: { listBackground: this.getBackgroundColor() }\n        });\n        const updateTree = () => {\n            if (newOutline.isEmpty) {\n                this._showMessage(( localize('no-symbols', \"No symbols found in document '{0}'\", basename(resource))));\n                this._captureViewState(resource);\n                tree.setInput(undefined);\n            }\n            else if (!tree.getInput()) {\n                this._domNode.classList.remove('message');\n                const state = this._treeStates.get(`${newOutline.outlineKind}/${newOutline.uri}`);\n                tree.setInput(newOutline, state && AbstractTreeViewState.lift(state));\n            }\n            else {\n                this._domNode.classList.remove('message');\n                tree.updateChildren();\n            }\n        };\n        updateTree();\n        this._editorControlDisposables.add(newOutline.onDidChange(updateTree));\n        tree.findMode = this._outlineViewState.filterOnType ? TreeFindMode.Filter : TreeFindMode.Highlight;\n        this._editorControlDisposables.add(this.viewDescriptorService.onDidChangeLocation(({ views }) => {\n            if (( views.some(v => v.id === this.id))) {\n                tree.updateOptions({ overrideStyles: { listBackground: this.getBackgroundColor() } });\n            }\n        }));\n        this._editorControlDisposables.add(tree.onDidChangeFindMode(mode => this._outlineViewState.filterOnType = mode === TreeFindMode.Filter));\n        this._editorControlDisposables.add(tree.onDidOpen(e => newOutline.reveal(e.element, e.editorOptions, e.sideBySide)));\n        const revealActiveElement = () => {\n            if (!this._outlineViewState.followCursor || !newOutline.activeElement) {\n                return;\n            }\n            let item = newOutline.activeElement;\n            while (item) {\n                const top = tree.getRelativeTop(item);\n                if (top === null) {\n                    tree.reveal(item, 0.5);\n                }\n                if (tree.getRelativeTop(item) !== null) {\n                    tree.setFocus([item]);\n                    tree.setSelection([item]);\n                    break;\n                }\n                item = tree.getParentElement(item);\n            }\n        };\n        revealActiveElement();\n        this._editorControlDisposables.add(newOutline.onDidChange(revealActiveElement));\n        this._editorControlDisposables.add(this._outlineViewState.onDidChange((e) => {\n            this._outlineViewState.persist(this._storageService);\n            if (e.filterOnType) {\n                tree.findMode = this._outlineViewState.filterOnType ? TreeFindMode.Filter : TreeFindMode.Highlight;\n            }\n            if (e.followCursor) {\n                revealActiveElement();\n            }\n            if (e.sortBy) {\n                sorter.order = this._outlineViewState.sortBy;\n                tree.resort();\n            }\n        }));\n        let viewState;\n        this._editorControlDisposables.add(tree.onDidChangeFindPattern(pattern => {\n            if (tree.findMode === TreeFindMode.Highlight) {\n                return;\n            }\n            if (!viewState && pattern) {\n                viewState = tree.getViewState();\n                tree.expandAll();\n            }\n            else if (!pattern && viewState) {\n                tree.setInput(tree.getInput(), viewState);\n                viewState = undefined;\n            }\n        }));\n        const updateAllCollapsedCtx = () => {\n            this._ctxAllCollapsed.set(tree.getNode(null).children.every(node => !node.collapsible || node.collapsed));\n        };\n        this._editorControlDisposables.add(tree.onDidChangeCollapseState(updateAllCollapsedCtx));\n        this._editorControlDisposables.add(tree.onDidChangeModel(updateAllCollapsedCtx));\n        updateAllCollapsedCtx();\n        tree.layout(this._treeDimensions?.height, this._treeDimensions?.width);\n        this._tree = tree;\n        this._editorControlDisposables.add(toDisposable(() => {\n            tree.dispose();\n            this._tree = undefined;\n        }));\n    }\n};\nOutlinePane = ( __decorate([\n    ( __param(1, IOutlineService)),\n    ( __param(2, IInstantiationService)),\n    ( __param(3, IViewDescriptorService)),\n    ( __param(4, IStorageService)),\n    ( __param(5, IEditorService)),\n    ( __param(6, IConfigurationService)),\n    ( __param(7, IKeybindingService)),\n    ( __param(8, IContextKeyService)),\n    ( __param(9, IContextMenuService)),\n    ( __param(10, IOpenerService)),\n    ( __param(11, IThemeService)),\n    ( __param(12, ITelemetryService))\n], OutlinePane));\nexport { OutlinePane };\n","import { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { Extensions } from '../../../common/views.js';\nimport { OutlinePane } from './outlinePane.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { Extensions as Extensions$1 } from 'monaco-editor/esm/vs/platform/configuration/common/configurationRegistry.js';\nimport { VIEW_CONTAINER } from '../../files/browser/explorerViewlet.js';\nimport { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { registerIcon } from 'monaco-editor/esm/vs/platform/theme/common/iconRegistry.js';\nimport { IOutlinePane } from './outline.js';\nconst outlineViewIcon = registerIcon('outline-view-icon', Codicon.symbolClass, ( localize('outlineViewIcon', 'View icon of the outline view.')));\n( Registry.as(Extensions.ViewsRegistry)).registerViews([{\n        id: IOutlinePane.Id,\n        name: ( localize('name', \"Outline\")),\n        containerIcon: outlineViewIcon,\n        ctorDescriptor: ( new SyncDescriptor(OutlinePane)),\n        canToggleVisibility: true,\n        canMoveView: true,\n        hideByDefault: false,\n        collapsed: true,\n        order: 2,\n        weight: 30,\n        focusCommand: { id: 'outline.focus' }\n    }], VIEW_CONTAINER);\n( Registry.as(Extensions$1.Configuration)).registerConfiguration({\n    'id': 'outline',\n    'order': 117,\n    'title': ( localize('outlineConfigurationTitle', \"Outline\")),\n    'type': 'object',\n    'properties': {\n        [\"outline.icons\" ]: {\n            'description': ( localize('outline.showIcons', \"Render Outline elements with icons.\")),\n            'type': 'boolean',\n            'default': true\n        },\n        [\"outline.collapseItems\" ]: {\n            'description': ( localize(\n                'outline.initialState',\n                \"Controls whether Outline items are collapsed or expanded.\"\n            )),\n            'type': 'string',\n            scope: 5 ,\n            'enum': [\n                'alwaysCollapse',\n                'alwaysExpand'\n            ],\n            'enumDescriptions': [\n                ( localize('outline.initialState.collapsed', \"Collapse all items.\")),\n                ( localize('outline.initialState.expanded', \"Expand all items.\"))\n            ],\n            'default': 'alwaysExpand'\n        },\n        [\"outline.problems.enabled\" ]: {\n            'description': ( localize('outline.showProblem', \"Show errors and warnings on Outline elements.\")),\n            'type': 'boolean',\n            'default': true\n        },\n        [\"outline.problems.colors\" ]: {\n            'description': ( localize(\n                'outline.problem.colors',\n                \"Use colors for errors and warnings on Outline elements.\"\n            )),\n            'type': 'boolean',\n            'default': true\n        },\n        [\"outline.problems.badges\" ]: {\n            'description': ( localize(\n                'outline.problems.badges',\n                \"Use badges for errors and warnings on Outline elements.\"\n            )),\n            'type': 'boolean',\n            'default': true\n        },\n        'outline.showFiles': {\n            type: 'boolean',\n            scope: 5 ,\n            default: true,\n            markdownDescription: ( localize('filteredTypes.file', \"When enabled, Outline shows `file`-symbols.\"))\n        },\n        'outline.showModules': {\n            type: 'boolean',\n            scope: 5 ,\n            default: true,\n            markdownDescription: ( localize('filteredTypes.module', \"When enabled, Outline shows `module`-symbols.\"))\n        },\n        'outline.showNamespaces': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.namespace',\n                \"When enabled, Outline shows `namespace`-symbols.\"\n            ))\n        },\n        'outline.showPackages': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.package', \"When enabled, Outline shows `package`-symbols.\"))\n        },\n        'outline.showClasses': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.class', \"When enabled, Outline shows `class`-symbols.\"))\n        },\n        'outline.showMethods': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.method', \"When enabled, Outline shows `method`-symbols.\"))\n        },\n        'outline.showProperties': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.property',\n                \"When enabled, Outline shows `property`-symbols.\"\n            ))\n        },\n        'outline.showFields': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.field', \"When enabled, Outline shows `field`-symbols.\"))\n        },\n        'outline.showConstructors': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.constructor',\n                \"When enabled, Outline shows `constructor`-symbols.\"\n            ))\n        },\n        'outline.showEnums': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.enum', \"When enabled, Outline shows `enum`-symbols.\"))\n        },\n        'outline.showInterfaces': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.interface',\n                \"When enabled, Outline shows `interface`-symbols.\"\n            ))\n        },\n        'outline.showFunctions': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.function',\n                \"When enabled, Outline shows `function`-symbols.\"\n            ))\n        },\n        'outline.showVariables': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.variable',\n                \"When enabled, Outline shows `variable`-symbols.\"\n            ))\n        },\n        'outline.showConstants': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.constant',\n                \"When enabled, Outline shows `constant`-symbols.\"\n            ))\n        },\n        'outline.showStrings': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.string', \"When enabled, Outline shows `string`-symbols.\"))\n        },\n        'outline.showNumbers': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.number', \"When enabled, Outline shows `number`-symbols.\"))\n        },\n        'outline.showBooleans': {\n            type: 'boolean',\n            scope: 5 ,\n            default: true,\n            markdownDescription: ( localize('filteredTypes.boolean', \"When enabled, Outline shows `boolean`-symbols.\"))\n        },\n        'outline.showArrays': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.array', \"When enabled, Outline shows `array`-symbols.\"))\n        },\n        'outline.showObjects': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.object', \"When enabled, Outline shows `object`-symbols.\"))\n        },\n        'outline.showKeys': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.key', \"When enabled, Outline shows `key`-symbols.\"))\n        },\n        'outline.showNull': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.null', \"When enabled, Outline shows `null`-symbols.\"))\n        },\n        'outline.showEnumMembers': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.enumMember',\n                \"When enabled, Outline shows `enumMember`-symbols.\"\n            ))\n        },\n        'outline.showStructs': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.struct', \"When enabled, Outline shows `struct`-symbols.\"))\n        },\n        'outline.showEvents': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize('filteredTypes.event', \"When enabled, Outline shows `event`-symbols.\"))\n        },\n        'outline.showOperators': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.operator',\n                \"When enabled, Outline shows `operator`-symbols.\"\n            ))\n        },\n        'outline.showTypeParameters': {\n            type: 'boolean',\n            default: true,\n            scope: 5 ,\n            markdownDescription: ( localize(\n                'filteredTypes.typeParameter',\n                \"When enabled, Outline shows `typeParameter`-symbols.\"\n            ))\n        }\n    }\n});\n","import { KeybindingsRegistry } from 'monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js';\nimport { List } from 'monaco-editor/esm/vs/base/browser/ui/list/listWidget.js';\nimport { WorkbenchListFocusContextKey, IListService, WorkbenchListSupportsMultiSelectContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementHasParent, getSelectionKeyboardEvent, WorkbenchTreeElementCanExpand, WorkbenchTreeElementHasChild, WorkbenchListHasSelectionOrFocus, WorkbenchListSelectionNavigation, RawWorkbenchListFocusContextKey, WorkbenchListSupportsFind, WorkbenchTreeFindOpen, WorkbenchListScrollAtTopContextKey, WorkbenchListScrollAtBottomContextKey } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { PagedList } from 'monaco-editor/esm/vs/base/browser/ui/list/listPaging.js';\nimport { range, equals } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { ObjectTree } from 'monaco-editor/esm/vs/base/browser/ui/tree/objectTree.js';\nimport { AsyncDataTree } from 'monaco-editor/esm/vs/base/browser/ui/tree/asyncDataTree.js';\nimport { DataTree } from 'monaco-editor/esm/vs/base/browser/ui/tree/dataTree.js';\nimport { CommandsRegistry } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { Table } from 'monaco-editor/esm/vs/base/browser/ui/table/tableWidget.js';\nimport { AbstractTree, TreeFindMode } from 'monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js';\nfunction ensureDOMFocus(widget) {\n    if (widget && widget.getHTMLElement() !== document.activeElement) {\n        widget.domFocus();\n    }\n}\nasync function updateFocus(widget, updateFocusFn) {\n    if (!WorkbenchListSelectionNavigation.getValue(widget.contextKeyService)) {\n        return updateFocusFn(widget);\n    }\n    const focus = widget.getFocus();\n    const selection = widget.getSelection();\n    await updateFocusFn(widget);\n    const newFocus = widget.getFocus();\n    if (selection.length > 1 || !equals(focus, selection) || equals(focus, newFocus)) {\n        return;\n    }\n    const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n    widget.setSelection(newFocus, fakeKeyboardEvent);\n}\nasync function navigate(widget, updateFocusFn) {\n    if (!widget) {\n        return;\n    }\n    await updateFocus(widget, updateFocusFn);\n    const listFocus = widget.getFocus();\n    if (listFocus.length) {\n        widget.reveal(listFocus[0]);\n    }\n    widget.setAnchor(listFocus[0]);\n    ensureDOMFocus(widget);\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.focusDown',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 18 ,\n    mac: {\n        primary: 18 ,\n        secondary: [256  | 44 ]\n    },\n    handler: (accessor, arg2) => {\n        navigate(accessor.get(IListService).lastFocusedList, async (widget) => {\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            await widget.focusNext(typeof arg2 === 'number' ? arg2 : 1, false, fakeKeyboardEvent);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.focusUp',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 16 ,\n    mac: {\n        primary: 16 ,\n        secondary: [256  | 46 ]\n    },\n    handler: (accessor, arg2) => {\n        navigate(accessor.get(IListService).lastFocusedList, async (widget) => {\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            await widget.focusPrevious(typeof arg2 === 'number' ? arg2 : 1, false, fakeKeyboardEvent);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.focusPageDown',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 12 ,\n    handler: (accessor) => {\n        navigate(accessor.get(IListService).lastFocusedList, async (widget) => {\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            await widget.focusNextPage(fakeKeyboardEvent);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.focusPageUp',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 11 ,\n    handler: (accessor) => {\n        navigate(accessor.get(IListService).lastFocusedList, async (widget) => {\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            await widget.focusPreviousPage(fakeKeyboardEvent);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.focusFirst',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 14 ,\n    handler: (accessor) => {\n        navigate(accessor.get(IListService).lastFocusedList, async (widget) => {\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            await widget.focusFirst(fakeKeyboardEvent);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.focusLast',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 13 ,\n    handler: (accessor) => {\n        navigate(accessor.get(IListService).lastFocusedList, async (widget) => {\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            await widget.focusLast(fakeKeyboardEvent);\n        });\n    }\n});\nfunction expandMultiSelection(focused, previousFocus) {\n    if (focused instanceof List || focused instanceof PagedList || focused instanceof Table) {\n        const list = focused;\n        const focus = list.getFocus() ? list.getFocus()[0] : undefined;\n        const selection = list.getSelection();\n        if (selection && typeof focus === 'number' && selection.indexOf(focus) >= 0) {\n            list.setSelection(selection.filter(s => s !== previousFocus));\n        }\n        else {\n            if (typeof focus === 'number') {\n                list.setSelection(selection.concat(focus));\n            }\n        }\n    }\n    else if (focused instanceof ObjectTree || focused instanceof DataTree || focused instanceof AsyncDataTree) {\n        const list = focused;\n        const focus = list.getFocus() ? list.getFocus()[0] : undefined;\n        if (previousFocus === focus) {\n            return;\n        }\n        const selection = list.getSelection();\n        const fakeKeyboardEvent = ( new KeyboardEvent('keydown', { shiftKey: true }));\n        if (selection && selection.indexOf(focus) >= 0) {\n            list.setSelection(selection.filter(s => s !== previousFocus), fakeKeyboardEvent);\n        }\n        else {\n            list.setSelection(selection.concat(focus), fakeKeyboardEvent);\n        }\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.expandSelectionDown',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(WorkbenchListFocusContextKey, WorkbenchListSupportsMultiSelectContextKey)),\n    primary: 1024  | 18 ,\n    handler: (accessor, arg2) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (!widget) {\n            return;\n        }\n        const previousFocus = widget.getFocus() ? widget.getFocus()[0] : undefined;\n        const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n        widget.focusNext(typeof arg2 === 'number' ? arg2 : 1, false, fakeKeyboardEvent);\n        expandMultiSelection(widget, previousFocus);\n        const focus = widget.getFocus();\n        if (focus.length) {\n            widget.reveal(focus[0]);\n        }\n        ensureDOMFocus(widget);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.expandSelectionUp',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(WorkbenchListFocusContextKey, WorkbenchListSupportsMultiSelectContextKey)),\n    primary: 1024  | 16 ,\n    handler: (accessor, arg2) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (!widget) {\n            return;\n        }\n        const previousFocus = widget.getFocus() ? widget.getFocus()[0] : undefined;\n        const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n        widget.focusPrevious(typeof arg2 === 'number' ? arg2 : 1, false, fakeKeyboardEvent);\n        expandMultiSelection(widget, previousFocus);\n        const focus = widget.getFocus();\n        if (focus.length) {\n            widget.reveal(focus[0]);\n        }\n        ensureDOMFocus(widget);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.collapse',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(WorkbenchListFocusContextKey, ( ContextKeyExpr.or(WorkbenchTreeElementCanCollapse, WorkbenchTreeElementHasParent)))),\n    primary: 15 ,\n    mac: {\n        primary: 15 ,\n        secondary: [2048  | 16 ]\n    },\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (!widget || !(widget instanceof ObjectTree || widget instanceof DataTree || widget instanceof AsyncDataTree)) {\n            return;\n        }\n        const tree = widget;\n        const focusedElements = tree.getFocus();\n        if (focusedElements.length === 0) {\n            return;\n        }\n        const focus = focusedElements[0];\n        if (!tree.collapse(focus)) {\n            const parent = tree.getParentElement(focus);\n            if (parent) {\n                navigate(widget, widget => {\n                    const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n                    widget.setFocus([parent], fakeKeyboardEvent);\n                });\n            }\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.collapseAll',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 2048  | 15 ,\n    mac: {\n        primary: 2048  | 15 ,\n        secondary: [2048  | 1024  | 16 ]\n    },\n    handler: (accessor) => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        if (focused && !(focused instanceof List || focused instanceof PagedList || focused instanceof Table)) {\n            focused.collapseAll();\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.collapseAllToFocus',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    handler: accessor => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        const fakeKeyboardEvent = getSelectionKeyboardEvent('keydown', true);\n        if (focused instanceof ObjectTree || focused instanceof DataTree || focused instanceof AsyncDataTree) {\n            const tree = focused;\n            const focus = tree.getFocus();\n            if (focus.length > 0) {\n                tree.collapse(focus[0], true);\n            }\n            tree.setSelection(focus, fakeKeyboardEvent);\n            tree.setAnchor(focus[0]);\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.focusParent',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (!widget || !(widget instanceof ObjectTree || widget instanceof DataTree || widget instanceof AsyncDataTree)) {\n            return;\n        }\n        const tree = widget;\n        const focusedElements = tree.getFocus();\n        if (focusedElements.length === 0) {\n            return;\n        }\n        const focus = focusedElements[0];\n        const parent = tree.getParentElement(focus);\n        if (parent) {\n            navigate(widget, widget => {\n                const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n                widget.setFocus([parent], fakeKeyboardEvent);\n            });\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.expand',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(WorkbenchListFocusContextKey, ( ContextKeyExpr.or(WorkbenchTreeElementCanExpand, WorkbenchTreeElementHasChild)))),\n    primary: 17 ,\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (!widget) {\n            return;\n        }\n        if (widget instanceof ObjectTree || widget instanceof DataTree) {\n            const focusedElements = widget.getFocus();\n            if (focusedElements.length === 0) {\n                return;\n            }\n            const focus = focusedElements[0];\n            if (!widget.expand(focus)) {\n                const child = widget.getFirstElementChild(focus);\n                if (child) {\n                    const node = widget.getNode(child);\n                    if (node.visible) {\n                        navigate(widget, widget => {\n                            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n                            widget.setFocus([child], fakeKeyboardEvent);\n                        });\n                    }\n                }\n            }\n        }\n        else if (widget instanceof AsyncDataTree) {\n            const focusedElements = widget.getFocus();\n            if (focusedElements.length === 0) {\n                return;\n            }\n            const focus = focusedElements[0];\n            widget.expand(focus).then(didExpand => {\n                if (focus && !didExpand) {\n                    const child = widget.getFirstElementChild(focus);\n                    if (child) {\n                        const node = widget.getNode(child);\n                        if (node.visible) {\n                            navigate(widget, widget => {\n                                const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n                                widget.setFocus([child], fakeKeyboardEvent);\n                            });\n                        }\n                    }\n                }\n            });\n        }\n    }\n});\nfunction selectElement(accessor, retainCurrentFocus) {\n    const focused = accessor.get(IListService).lastFocusedList;\n    const fakeKeyboardEvent = getSelectionKeyboardEvent('keydown', retainCurrentFocus);\n    if (focused instanceof List || focused instanceof PagedList || focused instanceof Table) {\n        const list = focused;\n        list.setSelection(list.getFocus(), fakeKeyboardEvent);\n        list.setAnchor(list.getFocus()[0]);\n    }\n    else if (focused instanceof ObjectTree || focused instanceof DataTree || focused instanceof AsyncDataTree) {\n        const tree = focused;\n        const focus = tree.getFocus();\n        if (focus.length > 0) {\n            let toggleCollapsed = true;\n            if (tree.expandOnlyOnTwistieClick === true) {\n                toggleCollapsed = false;\n            }\n            else if (typeof tree.expandOnlyOnTwistieClick !== 'boolean' && tree.expandOnlyOnTwistieClick(focus[0])) {\n                toggleCollapsed = false;\n            }\n            if (toggleCollapsed) {\n                tree.toggleCollapsed(focus[0]);\n            }\n        }\n        tree.setSelection(focus, fakeKeyboardEvent);\n        tree.setAnchor(focus[0]);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.select',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 3 ,\n    mac: {\n        primary: 3 ,\n        secondary: [2048  | 18 ]\n    },\n    handler: (accessor) => {\n        selectElement(accessor, false);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.selectAndPreserveFocus',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    handler: accessor => {\n        selectElement(accessor, true);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.selectAll',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(WorkbenchListFocusContextKey, WorkbenchListSupportsMultiSelectContextKey)),\n    primary: 2048  | 31 ,\n    handler: (accessor) => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        if (focused instanceof List || focused instanceof PagedList || focused instanceof Table) {\n            const list = focused;\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            list.setSelection(range(list.length), fakeKeyboardEvent);\n        }\n        else if (focused instanceof ObjectTree || focused instanceof DataTree || focused instanceof AsyncDataTree) {\n            const tree = focused;\n            const focus = tree.getFocus();\n            const selection = tree.getSelection();\n            let start = undefined;\n            if (focus.length > 0 && (selection.length === 0 || !selection.includes(focus[0]))) {\n                start = focus[0];\n            }\n            if (!start && selection.length > 0) {\n                start = selection[0];\n            }\n            let scope = undefined;\n            if (!start) {\n                scope = undefined;\n            }\n            else {\n                scope = tree.getParentElement(start);\n            }\n            const newSelection = [];\n            const visit = (node) => {\n                for (const child of node.children) {\n                    if (child.visible) {\n                        newSelection.push(child.element);\n                        if (!child.collapsed) {\n                            visit(child);\n                        }\n                    }\n                }\n            };\n            visit(tree.getNode(scope));\n            if (scope && selection.length === newSelection.length) {\n                newSelection.unshift(scope);\n            }\n            const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n            tree.setSelection(newSelection, fakeKeyboardEvent);\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.toggleSelection',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 2048  | 1024  | 3 ,\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (!widget) {\n            return;\n        }\n        const focus = widget.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const selection = widget.getSelection();\n        const index = selection.indexOf(focus[0]);\n        if (index > -1) {\n            widget.setSelection([...selection.slice(0, index), ...selection.slice(index + 1)]);\n        }\n        else {\n            widget.setSelection([...selection, focus[0]]);\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.toggleExpand',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    primary: 10 ,\n    handler: (accessor) => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        if (focused instanceof ObjectTree || focused instanceof DataTree || focused instanceof AsyncDataTree) {\n            const tree = focused;\n            const focus = tree.getFocus();\n            if (focus.length > 0 && tree.isCollapsible(focus[0])) {\n                tree.toggleCollapsed(focus[0]);\n                return;\n            }\n        }\n        selectElement(accessor, true);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.clear',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(WorkbenchListFocusContextKey, WorkbenchListHasSelectionOrFocus)),\n    primary: 9 ,\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (!widget) {\n            return;\n        }\n        const selection = widget.getSelection();\n        const fakeKeyboardEvent = ( new KeyboardEvent('keydown'));\n        if (selection.length > 1) {\n            const useSelectionNavigation = WorkbenchListSelectionNavigation.getValue(widget.contextKeyService);\n            if (useSelectionNavigation) {\n                const focus = widget.getFocus();\n                widget.setSelection([focus[0]], fakeKeyboardEvent);\n            }\n            else {\n                widget.setSelection([], fakeKeyboardEvent);\n            }\n        }\n        else {\n            widget.setSelection([], fakeKeyboardEvent);\n            widget.setFocus([], fakeKeyboardEvent);\n        }\n        widget.setAnchor(undefined);\n    }\n});\nCommandsRegistry.registerCommand({\n    id: 'list.triggerTypeNavigation',\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        widget?.triggerTypeNavigation();\n    }\n});\nCommandsRegistry.registerCommand({\n    id: 'list.toggleFindMode',\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (widget instanceof AbstractTree || widget instanceof AsyncDataTree) {\n            const tree = widget;\n            tree.findMode = tree.findMode === TreeFindMode.Filter ? TreeFindMode.Highlight : TreeFindMode.Filter;\n        }\n    }\n});\nCommandsRegistry.registerCommandAlias('list.toggleKeyboardNavigation', 'list.triggerTypeNavigation');\nCommandsRegistry.registerCommandAlias('list.toggleFilterOnType', 'list.toggleFindMode');\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.find',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(RawWorkbenchListFocusContextKey, WorkbenchListSupportsFind)),\n    primary: 2048  | 36 ,\n    secondary: [61 ],\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (widget instanceof List || widget instanceof PagedList || widget instanceof Table) ;\n        else if (widget instanceof AbstractTree || widget instanceof AsyncDataTree) {\n            const tree = widget;\n            tree.openFind();\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.closeFind',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(RawWorkbenchListFocusContextKey, WorkbenchTreeFindOpen)),\n    primary: 9 ,\n    handler: (accessor) => {\n        const widget = accessor.get(IListService).lastFocusedList;\n        if (widget instanceof AbstractTree || widget instanceof AsyncDataTree) {\n            const tree = widget;\n            tree.closeFind();\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.scrollUp',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(WorkbenchListFocusContextKey, WorkbenchListScrollAtTopContextKey?.negate())),\n    primary: 2048  | 16 ,\n    handler: accessor => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        if (!focused) {\n            return;\n        }\n        focused.scrollTop -= 10;\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.scrollDown',\n    weight: 200 ,\n    when: ( ContextKeyExpr.and(\n        WorkbenchListFocusContextKey,\n        WorkbenchListScrollAtBottomContextKey?.negate()\n    )),\n    primary: 2048  | 18 ,\n    handler: accessor => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        if (!focused) {\n            return;\n        }\n        focused.scrollTop += 10;\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.scrollLeft',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    handler: accessor => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        if (!focused) {\n            return;\n        }\n        focused.scrollLeft -= 10;\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'list.scrollRight',\n    weight: 200 ,\n    when: WorkbenchListFocusContextKey,\n    handler: accessor => {\n        const focused = accessor.get(IListService).lastFocusedList;\n        if (!focused) {\n            return;\n        }\n        focused.scrollLeft += 10;\n    }\n});\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".file-icon-themable-tree .align-icon-with-twisty .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree .monaco-tl-twistie.force-no-twistie,.file-icon-themable-tree.align-icons-and-twisties .monaco-tl-twistie:not(.force-twistie):not(.collapsible),.file-icon-themable-tree.hide-arrows .monaco-tl-twistie:not(.force-twistie){background-image:none!important;padding-right:0!important;visibility:hidden;width:0!important}.file-icon-themable-tree .monaco-list-row .content .monaco-highlighted-label .highlight,.monaco-tl-contents .monaco-highlighted-label .highlight{background-color:var(--vscode-list-filterMatchBackground);color:unset!important;outline:1px dotted var(--vscode-list-filterMatchBorder);outline-offset:-1px}.monaco-workbench .tree-explorer-viewlet-tree-view{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .message{display:flex;padding:4px 12px 4px 18px;user-select:text;-webkit-user-select:text}.monaco-workbench .tree-explorer-viewlet-tree-view .message p{margin-bottom:0;margin-top:0;padding-bottom:4px}.monaco-workbench .tree-explorer-viewlet-tree-view .message ul{padding-left:24px}.monaco-workbench .tree-explorer-viewlet-tree-view .message a{color:var(--vscode-textLink-foreground)}.monaco-workbench .tree-explorer-viewlet-tree-view .message.hide{display:none}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree{height:100%}.monaco-workbench .tree-explorer-viewlet-tree-view .customview-tree.hide{display:none}.monaco-workbench .pane>.pane-body>.welcome-view{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:100%}.monaco-workbench .pane>.pane-body.welcome>:not(.welcome-view),.monaco-workbench .pane>.pane-body:not(.welcome)>.welcome-view{display:none}.monaco-workbench .pane>.pane-body .welcome-view-content{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;padding:0 20px 1em}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container{max-width:300px;width:100%}.monaco-workbench:not(.reduce-motion) .pane>.pane-body .welcome-view-content>.button-container{transition:max-width .2s ease-out}.monaco-workbench .pane>.pane-body .welcome-view-content.wide>.button-container{max-width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>.button-container>.monaco-button{max-width:300px}.monaco-workbench .pane>.pane-body .welcome-view-content>p{width:100%}.monaco-workbench .pane>.pane-body .welcome-view-content>*{margin-block-end:0;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.customview-tree .monaco-list-row .monaco-tl-contents.align-icon-with-twisty:before{display:none}.customview-tree .monaco-list-row .monaco-tl-contents:not(.align-icon-with-twisty):before{display:inline-block}.customview-tree .monaco-list .monaco-list-row{padding-left:0;padding-right:12px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item{display:flex;flex:1;flex-wrap:nowrap;height:22px;line-height:22px;overflow:hidden;padding-left:3px;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-selectBackground);border:1px solid var(--vscode-checkbox-selectBorder)}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox{background-color:var(--vscode-checkbox-background);border:1px solid var(--vscode-checkbox-border);height:16px;margin:3px 6px 3px 0;opacity:1;padding:0;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-checkbox.codicon{font-size:13px;line-height:15px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-inputbox{flex:1;line-height:normal}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel{flex:1;overflow:hidden;text-overflow:ellipsis}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .monaco-icon-label-container:after{content:\\\"\\\";display:block}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon,.timeline-tree-view .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-icon{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;align-items:center;background-position:0;background-repeat:no-repeat;background-size:16px;display:flex;height:22px;justify-content:center;padding-right:6px;width:16px}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.disabled{opacity:.6}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon.codicon-modifier-spin{margin-left:-6px;padding-left:6px}.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item>.custom-view-tree-node-item-resourceLabel>.custom-view-tree-node-item-icon.codicon{color:currentColor!important}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel .monaco-icon-label-container>.monaco-icon-name-container{flex:1}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .custom-view-tree-node-item-resourceLabel:after{margin-right:4px;padding-right:0}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions{display:none}.customview-tree .monaco-list .monaco-list-row .custom-view-tree-node-item .actions .action-label{padding:2px}.customview-tree .monaco-list .monaco-list-row.focused .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row.selected .custom-view-tree-node-item .actions,.customview-tree .monaco-list .monaco-list-row:hover .custom-view-tree-node-item .actions{display:block}.viewpane-filter-container{cursor:default;display:flex}.viewpane-filter-container.grow{flex:1}.viewpane-filter-container>.viewpane-filter{align-items:center;display:flex;flex:1;position:relative}.viewpane-filter-container>.viewpane-filter .monaco-inputbox{flex:1;font-size:12px;height:24px}.pane-header .viewpane-filter-container>.viewpane-filter .monaco-inputbox .monaco-inputbox{height:20px;line-height:18px}.monaco-workbench.vs .viewpane-filter-container>.viewpane-filter .monaco-inputbox{height:25px}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls{align-items:center;bottom:0;display:flex;position:absolute;right:0;top:0}.viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge{border-radius:2px;margin:4px 0;padding:0 8px}.viewpane-filter.small>.viewpane-filter-controls>.viewpane-filter-badge,.viewpane-filter>.viewpane-filter-controls>.viewpane-filter-badge.hidden{display:none}.viewpane-filter>.viewpane-filter-controls>.monaco-action-bar .action-item .action-label.codicon.filter{padding:2px}.panel>.title .monaco-action-bar .action-item.viewpane-filter-container{margin-right:10px;max-width:400px;min-width:150px}.pane-body .viewpane-filter-container:not(:empty){flex:1;height:auto;margin:10px 20px}.pane-body .viewpane-filter-container>.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-item{margin-right:4px}.viewpane-filter>.viewpane-filter-controls .monaco-action-bar .action-label.codicon.codicon-filter.checked{background-color:var(--vscode-inputOption-activeBackground);border-color:var(--vscode-inputOption-activeBorder);color:var(--vscode-inputOption-activeForeground)}\";\nn(css,{});\nexport { css, css as default };\n","import { Action } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nclass CollapseAllAction extends Action {\n    constructor(viewer, enabled) {\n        super('vs.tree.collapse', ( nls.localize('collapse all', \"Collapse All\")), 'collapse-all', enabled);\n        this.viewer = viewer;\n    }\n    async run() {\n        this.viewer.collapseAll();\n        this.viewer.setSelection([]);\n        this.viewer.setFocus([]);\n    }\n}\nexport { CollapseAllAction };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nfunction createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n    DataTransfers.INTERNAL_URI_LIST,\n]);\nexport function toExternalVSDataTransfer(sourceDataTransfer, overwriteUriList = false) {\n    const vsDataTransfer = toVSDataTransfer(sourceDataTransfer);\n    // Try to expose the internal uri-list type as the standard type\n    const uriList = vsDataTransfer.get(DataTransfers.INTERNAL_URI_LIST);\n    if (uriList) {\n        vsDataTransfer.replace(Mimes.uriList, uriList);\n    }\n    else {\n        if (overwriteUriList || !vsDataTransfer.has(Mimes.uriList)) {\n            // Otherwise, fallback to adding dragged resources to the uri list\n            const editorData = [];\n            for (const item of sourceDataTransfer.items) {\n                const file = item.getAsFile();\n                if (file) {\n                    const path = file.path;\n                    try {\n                        if (path) {\n                            editorData.push(URI.file(path).toString());\n                        }\n                        else {\n                            editorData.push(URI.parse(file.name, true).toString());\n                        }\n                    }\n                    catch (_a) {\n                        // Parsing failed. Leave out from list\n                    }\n                }\n            }\n            if (editorData.length) {\n                vsDataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n            }\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        vsDataTransfer.delete(internal);\n    }\n    return vsDataTransfer;\n}\n","import * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { setupCustomHover } from 'monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabelHover.js';\nimport { Toggle } from 'monaco-editor/esm/vs/base/browser/ui/toggle/toggle.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { defaultToggleStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nclass CheckboxStateHandler extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._onDidChangeCheckboxState = this._register(( new Emitter()));\n        this.onDidChangeCheckboxState = this._onDidChangeCheckboxState.event;\n    }\n    setCheckboxState(node) {\n        this._onDidChangeCheckboxState.fire([node]);\n    }\n}\nclass TreeItemCheckbox extends Disposable {\n    static { this.checkboxClass = 'custom-view-tree-node-item-checkbox'; }\n    constructor(container, checkboxStateHandler, hoverDelegate) {\n        super();\n        this.checkboxStateHandler = checkboxStateHandler;\n        this.hoverDelegate = hoverDelegate;\n        this.isDisposed = false;\n        this._onDidChangeState = ( new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        this.checkboxContainer = container;\n    }\n    render(node) {\n        if (node.checkbox) {\n            if (!this.toggle) {\n                this.createCheckbox(node);\n            }\n            else {\n                this.toggle.checked = node.checkbox.isChecked;\n                this.toggle.setIcon(this.toggle.checked ? Codicon.check : undefined);\n            }\n        }\n    }\n    createCheckbox(node) {\n        if (node.checkbox) {\n            this.toggle = ( new Toggle({\n                isChecked: node.checkbox.isChecked,\n                title: '',\n                icon: node.checkbox.isChecked ? Codicon.check : undefined,\n                ...defaultToggleStyles\n            }));\n            this.setHover(node.checkbox);\n            this.setAccessibilityInformation(node.checkbox);\n            this.toggle.domNode.classList.add(TreeItemCheckbox.checkboxClass);\n            dom.append(this.checkboxContainer, this.toggle.domNode);\n            this.registerListener(node);\n        }\n    }\n    registerListener(node) {\n        if (this.toggle) {\n            this._register({ dispose: () => this.removeCheckbox() });\n            this._register(this.toggle);\n            this._register(this.toggle.onChange(() => {\n                this.setCheckbox(node);\n            }));\n        }\n    }\n    setHover(checkbox) {\n        if (this.toggle) {\n            if (!this.hover) {\n                this.hover = setupCustomHover(this.hoverDelegate, this.toggle.domNode, this.checkboxHoverContent(checkbox));\n                this._register(this.hover);\n            }\n            else {\n                this.hover.update(checkbox.tooltip);\n            }\n        }\n    }\n    setCheckbox(node) {\n        if (this.toggle && node.checkbox) {\n            node.checkbox.isChecked = this.toggle.checked;\n            this.toggle.setIcon(this.toggle.checked ? Codicon.check : undefined);\n            this.setHover(node.checkbox);\n            this.setAccessibilityInformation(node.checkbox);\n            this.checkboxStateHandler.setCheckboxState(node);\n        }\n    }\n    checkboxHoverContent(checkbox) {\n        return checkbox.tooltip ? checkbox.tooltip :\n            checkbox.isChecked ? ( localize('checked', 'Checked')) : ( localize('unchecked', 'Unchecked'));\n    }\n    setAccessibilityInformation(checkbox) {\n        if (this.toggle && checkbox.accessibilityInformation) {\n            this.toggle.domNode.ariaLabel = checkbox.accessibilityInformation.label;\n            if (checkbox.accessibilityInformation.role) {\n                this.toggle.domNode.role = checkbox.accessibilityInformation.role;\n            }\n        }\n    }\n    removeCheckbox() {\n        const children = this.checkboxContainer.children;\n        for (const child of children) {\n            this.checkboxContainer.removeChild(child);\n        }\n    }\n}\nexport { CheckboxStateHandler, TreeItemCheckbox };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { DataTransfers } from 'monaco-editor/esm/vs/base/browser/dnd.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { renderMarkdownAsPlaintext } from 'monaco-editor/esm/vs/base/browser/markdownRenderer.js';\nimport { ActionBar } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { ActionViewItem } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js';\nimport { CollapseAllAction } from '../../../../base/browser/ui/tree/treeDefaults.js';\nimport { ActionRunner } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { timeout } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { CancellationTokenSource, CancellationToken } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { isCancellationError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { Emitter, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { createMatches } from 'monaco-editor/esm/vs/base/common/filters.js';\nimport { isMarkdownString } from 'monaco-editor/esm/vs/base/common/htmlContent.js';\nimport { Disposable, DisposableStore, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { Mimes } from 'monaco-editor/esm/vs/base/common/mime.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { basename, dirname } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { isFalsyOrWhitespace } from 'monaco-editor/esm/vs/base/common/strings.js';\nimport { isString } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { generateUuid } from 'monaco-editor/esm/vs/base/common/uuid.js';\nimport './media/views.css.js';\nimport { VSDataTransfer } from 'monaco-editor/esm/vs/base/common/dataTransfer.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { createActionViewItem, createAndFillInContextMenuActions } from 'monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuRegistry, MenuId, registerAction2, Action2, IMenuService } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IContextKeyService, RawContextKey, ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { FileKind } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { ILabelService } from 'monaco-editor/esm/vs/platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IOpenerService } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nimport { IProgressService } from 'monaco-editor/esm/vs/platform/progress/common/progress.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { ColorScheme } from 'monaco-editor/esm/vs/platform/theme/common/theme.js';\nimport { FolderThemeIcon, FileThemeIcon, IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { fillEditorsDragData } from '../../dnd.js';\nimport { ResourceLabels } from '../../labels.js';\nimport { API_OPEN_EDITOR_COMMAND_ID, API_OPEN_DIFF_EDITOR_COMMAND_ID } from '../editor/editorCommands.js';\nimport { ViewPane } from './viewPane.js';\nimport { PANEL_BACKGROUND, SIDE_BAR_BACKGROUND } from '../../../common/theme.js';\nimport { ResolvableTreeItem, TreeItemCollapsibleState, Extensions, IViewDescriptorService } from '../../../common/views.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IHoverService } from '../../../services/hover/browser/hover.js';\nimport { ITreeViewsService } from '../../../services/views/browser/treeViewsService.js';\nimport { LocalSelectionTransfer, CodeDataTransfers } from 'monaco-editor/esm/vs/platform/dnd/browser/dnd.js';\nimport { toExternalVSDataTransfer } from 'monaco-editor/esm/vs/editor/browser/dnd.js';\nimport { TreeItemCheckbox, CheckboxStateHandler } from './checkbox.js';\nimport { setTimeout0 } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { TelemetryTrustedValue } from '../../../../platform/telemetry/common/telemetryUtils.js';\nimport { ITreeViewsDnDService } from 'monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js';\nimport { DraggedTreeItemsIdentifier } from 'monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js';\nimport { MarkdownRenderer } from 'monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js';\nlet TreeViewPane = class TreeViewPane extends ViewPane {\n    constructor(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService, notificationService) {\n        super({ ...options, titleMenuId: MenuId.ViewTitle, donotForwardArgs: false }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n        const { treeView } = ( Registry.as(Extensions.ViewsRegistry)).getView(options.id);\n        this.treeView = treeView;\n        this._register(this.treeView.onDidChangeActions(() => this.updateActions(), this));\n        this._register(this.treeView.onDidChangeTitle((newTitle) => this.updateTitle(newTitle)));\n        this._register(this.treeView.onDidChangeDescription((newDescription) => this.updateTitleDescription(newDescription)));\n        this._register(toDisposable(() => {\n            if (this._container && this.treeView.container && (this._container === this.treeView.container)) {\n                this.treeView.setVisibility(false);\n            }\n        }));\n        this._register(this.onDidChangeBodyVisibility(() => this.updateTreeVisibility()));\n        this._register(this.treeView.onDidChangeWelcomeState(() => this._onDidChangeViewWelcomeState.fire()));\n        if (options.title !== this.treeView.title) {\n            this.updateTitle(this.treeView.title);\n        }\n        if (options.titleDescription !== this.treeView.description) {\n            this.updateTitleDescription(this.treeView.description);\n        }\n        this._actionRunner = ( new MultipleSelectionActionRunner(notificationService, () => this.treeView.getSelection()));\n        this.updateTreeVisibility();\n    }\n    focus() {\n        super.focus();\n        this.treeView.focus();\n    }\n    renderBody(container) {\n        this._container = container;\n        super.renderBody(container);\n        this.renderTreeView(container);\n    }\n    shouldShowWelcome() {\n        return ((this.treeView.dataProvider === undefined) || !!this.treeView.dataProvider.isTreeEmpty) && (this.treeView.message === undefined);\n    }\n    layoutBody(height, width) {\n        super.layoutBody(height, width);\n        this.layoutTreeView(height, width);\n    }\n    getOptimalWidth() {\n        return this.treeView.getOptimalWidth();\n    }\n    renderTreeView(container) {\n        this.treeView.show(container);\n    }\n    layoutTreeView(height, width) {\n        this.treeView.layout(height, width);\n    }\n    updateTreeVisibility() {\n        this.treeView.setVisibility(this.isBodyVisible());\n    }\n    getActionRunner() {\n        return this._actionRunner;\n    }\n    getActionsContext() {\n        return { $treeViewId: this.id, $focusedTreeItem: true, $selectedTreeItems: true };\n    }\n};\nTreeViewPane = ( __decorate([\n    ( __param(1, IKeybindingService)),\n    ( __param(2, IContextMenuService)),\n    ( __param(3, IConfigurationService)),\n    ( __param(4, IContextKeyService)),\n    ( __param(5, IViewDescriptorService)),\n    ( __param(6, IInstantiationService)),\n    ( __param(7, IOpenerService)),\n    ( __param(8, IThemeService)),\n    ( __param(9, ITelemetryService)),\n    ( __param(10, INotificationService))\n], TreeViewPane));\nclass Root {\n    constructor() {\n        this.label = { label: 'root' };\n        this.handle = '0';\n        this.parentHandle = undefined;\n        this.collapsibleState = TreeItemCollapsibleState.Expanded;\n        this.children = undefined;\n    }\n}\nfunction isTreeCommandEnabled(treeCommand, contextKeyService) {\n    const command = CommandsRegistry.getCommand(treeCommand.originalId ? treeCommand.originalId : treeCommand.id);\n    if (command) {\n        const commandAction = MenuRegistry.getCommand(command.id);\n        const precondition = commandAction && commandAction.precondition;\n        if (precondition) {\n            return contextKeyService.contextMatchesRules(precondition);\n        }\n    }\n    return true;\n}\nfunction isRenderedMessageValue(messageValue) {\n    return !!messageValue && typeof messageValue !== 'string' && 'element' in messageValue && 'dispose' in messageValue;\n}\nconst noDataProviderMessage = ( localize(\n    'no-dataprovider',\n    \"There is no data provider registered that can provide view data.\"\n));\nconst RawCustomTreeViewContextKey = ( new RawContextKey('customTreeView', false));\nclass Tree extends WorkbenchAsyncDataTree {\n}\nlet AbstractTreeView = class AbstractTreeView extends Disposable {\n    constructor(id, _title, themeService, instantiationService, commandService, configurationService, progressService, contextMenuService, keybindingService, notificationService, viewDescriptorService, hoverService, contextKeyService, activityService, logService) {\n        super();\n        this.id = id;\n        this._title = _title;\n        this.themeService = themeService;\n        this.instantiationService = instantiationService;\n        this.commandService = commandService;\n        this.configurationService = configurationService;\n        this.progressService = progressService;\n        this.contextMenuService = contextMenuService;\n        this.keybindingService = keybindingService;\n        this.notificationService = notificationService;\n        this.viewDescriptorService = viewDescriptorService;\n        this.hoverService = hoverService;\n        this.contextKeyService = contextKeyService;\n        this.activityService = activityService;\n        this.logService = logService;\n        this.isVisible = false;\n        this._hasIconForParentNode = false;\n        this._hasIconForLeafNode = false;\n        this.focused = false;\n        this._canSelectMany = false;\n        this._manuallyManageCheckboxes = false;\n        this.elementsToRefresh = [];\n        this.lastSelection = [];\n        this._onDidExpandItem = this._register(( new Emitter()));\n        this.onDidExpandItem = this._onDidExpandItem.event;\n        this._onDidCollapseItem = this._register(( new Emitter()));\n        this.onDidCollapseItem = this._onDidCollapseItem.event;\n        this._onDidChangeSelectionAndFocus = this._register(( new Emitter()));\n        this.onDidChangeSelectionAndFocus = this._onDidChangeSelectionAndFocus.event;\n        this._onDidChangeVisibility = this._register(( new Emitter()));\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._onDidChangeActions = this._register(( new Emitter()));\n        this.onDidChangeActions = this._onDidChangeActions.event;\n        this._onDidChangeWelcomeState = this._register(( new Emitter()));\n        this.onDidChangeWelcomeState = this._onDidChangeWelcomeState.event;\n        this._onDidChangeTitle = this._register(( new Emitter()));\n        this.onDidChangeTitle = this._onDidChangeTitle.event;\n        this._onDidChangeDescription = this._register(( new Emitter()));\n        this.onDidChangeDescription = this._onDidChangeDescription.event;\n        this._onDidChangeCheckboxState = this._register(( new Emitter()));\n        this.onDidChangeCheckboxState = this._onDidChangeCheckboxState.event;\n        this._onDidCompleteRefresh = this._register(( new Emitter()));\n        this._isInitialized = false;\n        this._height = 0;\n        this._width = 0;\n        this.refreshing = false;\n        this.root = ( new Root());\n        this.lastActive = this.root;\n    }\n    initialize() {\n        if (this._isInitialized) {\n            return;\n        }\n        this._isInitialized = true;\n        this.contextKeyService.bufferChangeEvents(() => {\n            this.initializeShowCollapseAllAction();\n            this.initializeCollapseAllToggle();\n            this.initializeShowRefreshAction();\n        });\n        this.treeViewDnd = this.instantiationService.createInstance(CustomTreeViewDragAndDrop, this.id);\n        if (this._dragAndDropController) {\n            this.treeViewDnd.controller = this._dragAndDropController;\n        }\n        this._register(this.configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('explorer.decorations')) {\n                this.doRefresh([this.root]);\n            }\n        }));\n        this._register(this.viewDescriptorService.onDidChangeLocation(({ views, from, to }) => {\n            if (( views.some(v => v.id === this.id))) {\n                this.tree?.updateOptions({ overrideStyles: { listBackground: this.viewLocation === 1  ? PANEL_BACKGROUND : SIDE_BAR_BACKGROUND } });\n            }\n        }));\n        this.registerActions();\n        this.create();\n    }\n    get viewContainer() {\n        return this.viewDescriptorService.getViewContainerByViewId(this.id);\n    }\n    get viewLocation() {\n        return this.viewDescriptorService.getViewLocationById(this.id);\n    }\n    get dragAndDropController() {\n        return this._dragAndDropController;\n    }\n    set dragAndDropController(dnd) {\n        this._dragAndDropController = dnd;\n        if (this.treeViewDnd) {\n            this.treeViewDnd.controller = dnd;\n        }\n    }\n    get dataProvider() {\n        return this._dataProvider;\n    }\n    set dataProvider(dataProvider) {\n        if (dataProvider) {\n            const self = this;\n            this._dataProvider = new (class {\n                constructor() {\n                    this._isEmpty = true;\n                    this._onDidChangeEmpty = ( new Emitter());\n                    this.onDidChangeEmpty = this._onDidChangeEmpty.event;\n                }\n                get isTreeEmpty() {\n                    return this._isEmpty;\n                }\n                async getChildren(node) {\n                    let children;\n                    const checkboxesUpdated = [];\n                    if (node && node.children) {\n                        children = node.children;\n                    }\n                    else {\n                        node = node ?? self.root;\n                        node.children = await (node instanceof Root ? dataProvider.getChildren() : dataProvider.getChildren(node));\n                        children = node.children ?? [];\n                        children.forEach(child => {\n                            child.parent = node;\n                            if (!self.manuallyManageCheckboxes && (node?.checkbox?.isChecked === true) && (child.checkbox?.isChecked === false)) {\n                                child.checkbox.isChecked = true;\n                                checkboxesUpdated.push(child);\n                            }\n                        });\n                    }\n                    if (node instanceof Root) {\n                        const oldEmpty = this._isEmpty;\n                        this._isEmpty = children.length === 0;\n                        if (oldEmpty !== this._isEmpty) {\n                            this._onDidChangeEmpty.fire();\n                        }\n                    }\n                    if (checkboxesUpdated.length > 0) {\n                        self._onDidChangeCheckboxState.fire(checkboxesUpdated);\n                    }\n                    return children;\n                }\n            });\n            if (this._dataProvider.onDidChangeEmpty) {\n                this._register(this._dataProvider.onDidChangeEmpty(() => {\n                    this.updateCollapseAllToggle();\n                    this._onDidChangeWelcomeState.fire();\n                }));\n            }\n            this.updateMessage();\n            this.refresh();\n        }\n        else {\n            this._dataProvider = undefined;\n            this.updateMessage();\n        }\n        this._onDidChangeWelcomeState.fire();\n    }\n    get message() {\n        return this._message;\n    }\n    set message(message) {\n        this._message = message;\n        this.updateMessage();\n        this._onDidChangeWelcomeState.fire();\n    }\n    get title() {\n        return this._title;\n    }\n    set title(name) {\n        this._title = name;\n        this._onDidChangeTitle.fire(this._title);\n    }\n    get description() {\n        return this._description;\n    }\n    set description(description) {\n        this._description = description;\n        this._onDidChangeDescription.fire(this._description);\n    }\n    get badge() {\n        return this._badge;\n    }\n    set badge(badge) {\n        if (this._badge?.value === badge?.value &&\n            this._badge?.tooltip === badge?.tooltip) {\n            return;\n        }\n        if (this._badgeActivity) {\n            this._badgeActivity.dispose();\n            this._badgeActivity = undefined;\n        }\n        this._badge = badge;\n        if (badge) {\n            const activity = {\n                badge: ( new NumberBadge(badge.value, () => badge.tooltip)),\n                priority: 50\n            };\n            this._badgeActivity = this.activityService.showViewActivity(this.id, activity);\n        }\n    }\n    get canSelectMany() {\n        return this._canSelectMany;\n    }\n    set canSelectMany(canSelectMany) {\n        const oldCanSelectMany = this._canSelectMany;\n        this._canSelectMany = canSelectMany;\n        if (this._canSelectMany !== oldCanSelectMany) {\n            this.tree?.updateOptions({ multipleSelectionSupport: this.canSelectMany });\n        }\n    }\n    get manuallyManageCheckboxes() {\n        return this._manuallyManageCheckboxes;\n    }\n    set manuallyManageCheckboxes(manuallyManageCheckboxes) {\n        this._manuallyManageCheckboxes = manuallyManageCheckboxes;\n    }\n    get hasIconForParentNode() {\n        return this._hasIconForParentNode;\n    }\n    get hasIconForLeafNode() {\n        return this._hasIconForLeafNode;\n    }\n    get visible() {\n        return this.isVisible;\n    }\n    initializeShowCollapseAllAction(startingValue = false) {\n        if (!this.collapseAllContext) {\n            this.collapseAllContextKey = ( new RawContextKey(`treeView.${this.id}.enableCollapseAll`, startingValue, ( localize(\n                'treeView.enableCollapseAll',\n                \"Whether the the tree view with id {0} enables collapse all.\",\n                this.id\n            ))));\n            this.collapseAllContext = this.collapseAllContextKey.bindTo(this.contextKeyService);\n        }\n        return true;\n    }\n    get showCollapseAllAction() {\n        this.initializeShowCollapseAllAction();\n        return !!this.collapseAllContext?.get();\n    }\n    set showCollapseAllAction(showCollapseAllAction) {\n        this.initializeShowCollapseAllAction(showCollapseAllAction);\n        this.collapseAllContext?.set(showCollapseAllAction);\n    }\n    initializeShowRefreshAction(startingValue = false) {\n        if (!this.refreshContext) {\n            this.refreshContextKey = ( new RawContextKey(`treeView.${this.id}.enableRefresh`, startingValue, ( localize(\n                'treeView.enableRefresh',\n                \"Whether the tree view with id {0} enables refresh.\",\n                this.id\n            ))));\n            this.refreshContext = this.refreshContextKey.bindTo(this.contextKeyService);\n        }\n    }\n    get showRefreshAction() {\n        this.initializeShowRefreshAction();\n        return !!this.refreshContext?.get();\n    }\n    set showRefreshAction(showRefreshAction) {\n        this.initializeShowRefreshAction(showRefreshAction);\n        this.refreshContext?.set(showRefreshAction);\n    }\n    registerActions() {\n        const that = this;\n        this._register(registerAction2(class extends Action2 {\n            constructor() {\n                super({\n                    id: `workbench.actions.treeView.${that.id}.refresh`,\n                    title: ( localize('refresh', \"Refresh\")),\n                    menu: {\n                        id: MenuId.ViewTitle,\n                        when: ( ContextKeyExpr.and(( ContextKeyExpr.equals('view', that.id)), that.refreshContextKey)),\n                        group: 'navigation',\n                        order: Number.MAX_SAFE_INTEGER - 1,\n                    },\n                    icon: Codicon.refresh\n                });\n            }\n            async run() {\n                return that.refresh();\n            }\n        }));\n        this._register(registerAction2(class extends Action2 {\n            constructor() {\n                super({\n                    id: `workbench.actions.treeView.${that.id}.collapseAll`,\n                    title: ( localize('collapseAll', \"Collapse All\")),\n                    menu: {\n                        id: MenuId.ViewTitle,\n                        when: ( ContextKeyExpr.and(( ContextKeyExpr.equals('view', that.id)), that.collapseAllContextKey)),\n                        group: 'navigation',\n                        order: Number.MAX_SAFE_INTEGER,\n                    },\n                    precondition: that.collapseAllToggleContextKey,\n                    icon: Codicon.collapseAll\n                });\n            }\n            async run() {\n                if (that.tree) {\n                    return ( new CollapseAllAction(that.tree, true)).run();\n                }\n            }\n        }));\n    }\n    setVisibility(isVisible) {\n        this.initialize();\n        isVisible = !!isVisible;\n        if (this.isVisible === isVisible) {\n            return;\n        }\n        this.isVisible = isVisible;\n        if (this.tree) {\n            if (this.isVisible) {\n                dom.show(this.tree.getHTMLElement());\n            }\n            else {\n                dom.hide(this.tree.getHTMLElement());\n            }\n            if (this.isVisible && this.elementsToRefresh.length && this.dataProvider) {\n                this.doRefresh(this.elementsToRefresh);\n                this.elementsToRefresh = [];\n            }\n        }\n        setTimeout0(() => {\n            if (this.dataProvider) {\n                this._onDidChangeVisibility.fire(this.isVisible);\n            }\n        });\n        if (this.visible) {\n            this.activate();\n        }\n    }\n    focus(reveal = true, revealItem) {\n        if (this.tree && this.root.children && this.root.children.length > 0) {\n            const element = revealItem ?? this.tree.getSelection()[0];\n            if (element && reveal) {\n                this.tree.reveal(element, 0.5);\n            }\n            this.tree.domFocus();\n        }\n        else if (this.tree) {\n            this.tree.domFocus();\n        }\n        else {\n            this.domNode.focus();\n        }\n    }\n    show(container) {\n        this._container = container;\n        dom.append(container, this.domNode);\n    }\n    create() {\n        this.domNode = dom.$('.tree-explorer-viewlet-tree-view');\n        this.messageElement = dom.append(this.domNode, dom.$('.message'));\n        this.updateMessage();\n        this.treeContainer = dom.append(this.domNode, dom.$('.customview-tree'));\n        this.treeContainer.classList.add('file-icon-themable-tree', 'show-file-icons');\n        const focusTracker = this._register(dom.trackFocus(this.domNode));\n        this._register(focusTracker.onDidFocus(() => this.focused = true));\n        this._register(focusTracker.onDidBlur(() => this.focused = false));\n    }\n    createTree() {\n        const actionViewItemProvider = createActionViewItem.bind(undefined, this.instantiationService);\n        const treeMenus = this._register(this.instantiationService.createInstance(TreeMenus, this.id));\n        this.treeLabels = this._register(this.instantiationService.createInstance(ResourceLabels, this));\n        const dataSource = this.instantiationService.createInstance(TreeDataSource, this, (task) => this.progressService.withProgress({ location: this.id }, () => task));\n        const aligner = ( new Aligner(this.themeService));\n        const checkboxStateHandler = this._register(( new CheckboxStateHandler()));\n        const renderer = this.instantiationService.createInstance(TreeRenderer, this.id, treeMenus, this.treeLabels, actionViewItemProvider, aligner, checkboxStateHandler, this.manuallyManageCheckboxes);\n        this._register(renderer.onDidChangeCheckboxState(e => this._onDidChangeCheckboxState.fire(e)));\n        const widgetAriaLabel = this._title;\n        this.tree = this._register(this.instantiationService.createInstance(Tree, this.id, this.treeContainer, ( new TreeViewDelegate()), [renderer], dataSource, {\n            identityProvider: ( new TreeViewIdentityProvider()),\n            accessibilityProvider: {\n                getAriaLabel(element) {\n                    if (element.accessibilityInformation) {\n                        return element.accessibilityInformation.label;\n                    }\n                    if (isString(element.tooltip)) {\n                        return element.tooltip;\n                    }\n                    else {\n                        if (element.resourceUri && !element.label) {\n                            return null;\n                        }\n                        let buildAriaLabel = '';\n                        if (element.label) {\n                            buildAriaLabel += element.label.label + ' ';\n                        }\n                        if (element.description) {\n                            buildAriaLabel += element.description;\n                        }\n                        return buildAriaLabel;\n                    }\n                },\n                getRole(element) {\n                    return element.accessibilityInformation?.role ?? 'treeitem';\n                },\n                getWidgetAriaLabel() {\n                    return widgetAriaLabel;\n                }\n            },\n            keyboardNavigationLabelProvider: {\n                getKeyboardNavigationLabel: (item) => {\n                    return item.label ? item.label.label : (item.resourceUri ? basename(URI.revive(item.resourceUri)) : undefined);\n                }\n            },\n            expandOnlyOnTwistieClick: (e) => {\n                return !!e.command || !!e.checkbox || this.configurationService.getValue('workbench.tree.expandMode') === 'doubleClick';\n            },\n            collapseByDefault: (e) => {\n                return e.collapsibleState !== TreeItemCollapsibleState.Expanded;\n            },\n            multipleSelectionSupport: this.canSelectMany,\n            dnd: this.treeViewDnd,\n            overrideStyles: {\n                listBackground: this.viewLocation === 1  ? PANEL_BACKGROUND : SIDE_BAR_BACKGROUND\n            }\n        }));\n        treeMenus.setContextKeyService(this.tree.contextKeyService);\n        aligner.tree = this.tree;\n        const actionRunner = ( new MultipleSelectionActionRunner(this.notificationService, () => this.tree.getSelection()));\n        renderer.actionRunner = actionRunner;\n        this.tree.contextKeyService.createKey(this.id, true);\n        const customTreeKey = RawCustomTreeViewContextKey.bindTo(this.tree.contextKeyService);\n        customTreeKey.set(true);\n        this._register(this.tree.onContextMenu(e => this.onContextMenu(treeMenus, e, actionRunner)));\n        this._register(this.tree.onDidChangeSelection(e => {\n            this.lastSelection = e.elements;\n            this.lastActive = this.tree?.getFocus()[0] ?? this.lastActive;\n            this._onDidChangeSelectionAndFocus.fire({ selection: this.lastSelection, focus: this.lastActive });\n        }));\n        this._register(this.tree.onDidChangeFocus(e => {\n            if (e.elements.length && (e.elements[0] !== this.lastActive)) {\n                this.lastActive = e.elements[0];\n                this.lastSelection = this.tree?.getSelection() ?? this.lastSelection;\n                this._onDidChangeSelectionAndFocus.fire({ selection: this.lastSelection, focus: this.lastActive });\n            }\n        }));\n        this._register(this.tree.onDidChangeCollapseState(e => {\n            if (!e.node.element) {\n                return;\n            }\n            const element = Array.isArray(e.node.element.element) ? e.node.element.element[0] : e.node.element.element;\n            if (e.node.collapsed) {\n                this._onDidCollapseItem.fire(element);\n            }\n            else {\n                this._onDidExpandItem.fire(element);\n            }\n        }));\n        this.tree.setInput(this.root).then(() => this.updateContentAreas());\n        this._register(this.tree.onDidOpen(async (e) => {\n            if (!e.browserEvent) {\n                return;\n            }\n            if (e.browserEvent.target && e.browserEvent.target.classList.contains(TreeItemCheckbox.checkboxClass)) {\n                return;\n            }\n            const selection = this.tree.getSelection();\n            const command = await this.resolveCommand(selection.length === 1 ? selection[0] : undefined);\n            if (command && isTreeCommandEnabled(command, this.contextKeyService)) {\n                let args = command.arguments || [];\n                if (command.id === API_OPEN_EDITOR_COMMAND_ID || command.id === API_OPEN_DIFF_EDITOR_COMMAND_ID) {\n                    args = [...args, e];\n                }\n                try {\n                    await this.commandService.executeCommand(command.id, ...args);\n                }\n                catch (err) {\n                    this.notificationService.error(err);\n                }\n            }\n        }));\n        this._register(treeMenus.onDidChange((changed) => {\n            if (this.tree?.hasNode(changed)) {\n                this.tree?.rerender(changed);\n            }\n        }));\n    }\n    async resolveCommand(element) {\n        let command = element?.command;\n        if (element && !command) {\n            if ((element instanceof ResolvableTreeItem) && element.hasResolve) {\n                await element.resolve(( new CancellationTokenSource()).token);\n                command = element.command;\n            }\n        }\n        return command;\n    }\n    onContextMenu(treeMenus, treeEvent, actionRunner) {\n        this.hoverService.hideHover();\n        const node = treeEvent.element;\n        if (node === null) {\n            return;\n        }\n        const event = treeEvent.browserEvent;\n        event.preventDefault();\n        event.stopPropagation();\n        this.tree.setFocus([node]);\n        const actions = treeMenus.getResourceContextActions(node);\n        if (!actions.length) {\n            return;\n        }\n        this.contextMenuService.showContextMenu({\n            getAnchor: () => treeEvent.anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this.keybindingService.lookupKeybinding(action.id);\n                if (keybinding) {\n                    return ( new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel() }));\n                }\n                return undefined;\n            },\n            onHide: (wasCancelled) => {\n                if (wasCancelled) {\n                    this.tree.domFocus();\n                }\n            },\n            getActionsContext: () => ({ $treeViewId: this.id, $treeItemHandle: node.handle }),\n            actionRunner\n        });\n    }\n    updateMessage() {\n        if (this._message) {\n            this.showMessage(this._message);\n        }\n        else if (!this.dataProvider) {\n            this.showMessage(noDataProviderMessage);\n        }\n        else {\n            this.hideMessage();\n        }\n        this.updateContentAreas();\n    }\n    showMessage(message) {\n        if (isRenderedMessageValue(this._messageValue)) {\n            this._messageValue.dispose();\n        }\n        if (isMarkdownString(message) && !this.markdownRenderer) {\n            this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        }\n        this._messageValue = isMarkdownString(message) ? this.markdownRenderer.render(message) : message;\n        if (!this.messageElement) {\n            return;\n        }\n        this.messageElement.classList.remove('hide');\n        this.resetMessageElement();\n        if (typeof this._messageValue === 'string' && !isFalsyOrWhitespace(this._messageValue)) {\n            this.messageElement.textContent = this._messageValue;\n        }\n        else if (isRenderedMessageValue(this._messageValue)) {\n            this.messageElement.appendChild(this._messageValue.element);\n        }\n        this.layout(this._height, this._width);\n    }\n    hideMessage() {\n        this.resetMessageElement();\n        this.messageElement?.classList.add('hide');\n        this.layout(this._height, this._width);\n    }\n    resetMessageElement() {\n        if (this.messageElement) {\n            dom.clearNode(this.messageElement);\n        }\n    }\n    layout(height, width) {\n        if (height && width && this.messageElement && this.treeContainer) {\n            this._height = height;\n            this._width = width;\n            const treeHeight = height - dom.getTotalHeight(this.messageElement);\n            this.treeContainer.style.height = treeHeight + 'px';\n            this.tree?.layout(treeHeight, width);\n        }\n    }\n    getOptimalWidth() {\n        if (this.tree) {\n            const parentNode = this.tree.getHTMLElement();\n            const childNodes = [].slice.call(parentNode.querySelectorAll('.outline-item-label > a'));\n            return dom.getLargestChildWidth(parentNode, childNodes);\n        }\n        return 0;\n    }\n    async refresh(elements) {\n        if (this.dataProvider && this.tree) {\n            if (this.refreshing) {\n                await Event.toPromise(this._onDidCompleteRefresh.event);\n            }\n            if (!elements) {\n                elements = [this.root];\n                this.elementsToRefresh = [];\n            }\n            for (const element of elements) {\n                element.children = undefined;\n            }\n            if (this.isVisible) {\n                return this.doRefresh(elements);\n            }\n            else {\n                if (this.elementsToRefresh.length) {\n                    const seen = ( new Set());\n                    this.elementsToRefresh.forEach(element => seen.add(element.handle));\n                    for (const element of elements) {\n                        if (!( seen.has(element.handle))) {\n                            this.elementsToRefresh.push(element);\n                        }\n                    }\n                }\n                else {\n                    this.elementsToRefresh.push(...elements);\n                }\n            }\n        }\n        return undefined;\n    }\n    async expand(itemOrItems) {\n        const tree = this.tree;\n        if (!tree) {\n            return;\n        }\n        try {\n            itemOrItems = Array.isArray(itemOrItems) ? itemOrItems : [itemOrItems];\n            for (const element of itemOrItems) {\n                await tree.expand(element, false);\n            }\n        }\n        catch (e) {\n        }\n    }\n    isCollapsed(item) {\n        return !!this.tree?.isCollapsed(item);\n    }\n    setSelection(items) {\n        this.tree?.setSelection(items);\n    }\n    getSelection() {\n        return this.tree?.getSelection() ?? [];\n    }\n    setFocus(item) {\n        if (this.tree) {\n            if (item) {\n                this.focus(true, item);\n                this.tree.setFocus([item]);\n            }\n            else {\n                this.tree.setFocus([]);\n            }\n        }\n    }\n    async reveal(item) {\n        if (this.tree) {\n            return this.tree.reveal(item);\n        }\n    }\n    async doRefresh(elements) {\n        const tree = this.tree;\n        if (tree && this.visible) {\n            this.refreshing = true;\n            const oldSelection = tree.getSelection();\n            try {\n                await Promise.all(( elements.map(element => tree.updateChildren(element, true, true))));\n            }\n            catch (e) {\n                this.logService.error(e);\n            }\n            const newSelection = tree.getSelection();\n            if (oldSelection.length !== newSelection.length || ( oldSelection.some((value, index) => value.handle !== newSelection[index].handle))) {\n                this.lastSelection = newSelection;\n                this._onDidChangeSelectionAndFocus.fire({ selection: this.lastSelection, focus: this.lastActive });\n            }\n            this.refreshing = false;\n            this._onDidCompleteRefresh.fire();\n            this.updateContentAreas();\n            if (this.focused) {\n                this.focus(false);\n            }\n            this.updateCollapseAllToggle();\n        }\n    }\n    initializeCollapseAllToggle() {\n        if (!this.collapseAllToggleContext) {\n            this.collapseAllToggleContextKey = ( new RawContextKey(`treeView.${this.id}.toggleCollapseAll`, false, ( localize(\n                'treeView.toggleCollapseAll',\n                \"Whether collapse all is toggled for the tree view with id {0}.\",\n                this.id\n            ))));\n            this.collapseAllToggleContext = this.collapseAllToggleContextKey.bindTo(this.contextKeyService);\n        }\n    }\n    updateCollapseAllToggle() {\n        if (this.showCollapseAllAction) {\n            this.initializeCollapseAllToggle();\n            this.collapseAllToggleContext?.set(!!this.root.children && (this.root.children.length > 0) &&\n                ( this.root.children.some(value => value.collapsibleState !== TreeItemCollapsibleState.None)));\n        }\n    }\n    updateContentAreas() {\n        const isTreeEmpty = !this.root.children || this.root.children.length === 0;\n        if (this._messageValue && isTreeEmpty && !this.refreshing && this.treeContainer) {\n            if (!this.dragAndDropController) {\n                this.treeContainer.classList.add('hide');\n            }\n            this.domNode.setAttribute('tabindex', '0');\n        }\n        else if (this.treeContainer) {\n            this.treeContainer.classList.remove('hide');\n            this.domNode.removeAttribute('tabindex');\n        }\n    }\n    get container() {\n        return this._container;\n    }\n};\nAbstractTreeView = ( __decorate([\n    ( __param(2, IThemeService)),\n    ( __param(3, IInstantiationService)),\n    ( __param(4, ICommandService)),\n    ( __param(5, IConfigurationService)),\n    ( __param(6, IProgressService)),\n    ( __param(7, IContextMenuService)),\n    ( __param(8, IKeybindingService)),\n    ( __param(9, INotificationService)),\n    ( __param(10, IViewDescriptorService)),\n    ( __param(11, IHoverService)),\n    ( __param(12, IContextKeyService)),\n    ( __param(13, IActivityService)),\n    ( __param(14, ILogService))\n], AbstractTreeView));\nclass TreeViewIdentityProvider {\n    getId(element) {\n        return element.handle;\n    }\n}\nclass TreeViewDelegate {\n    getHeight(element) {\n        return TreeRenderer.ITEM_HEIGHT;\n    }\n    getTemplateId(element) {\n        return TreeRenderer.TREE_TEMPLATE_ID;\n    }\n}\nclass TreeDataSource {\n    constructor(treeView, withProgress) {\n        this.treeView = treeView;\n        this.withProgress = withProgress;\n    }\n    hasChildren(element) {\n        return !!this.treeView.dataProvider && (element.collapsibleState !== TreeItemCollapsibleState.None);\n    }\n    async getChildren(element) {\n        let result = [];\n        if (this.treeView.dataProvider) {\n            try {\n                result = (await this.withProgress(this.treeView.dataProvider.getChildren(element))) ?? [];\n            }\n            catch (e) {\n                if (!e.message.startsWith('Bad progress location:')) {\n                    throw e;\n                }\n            }\n        }\n        return result;\n    }\n}\nlet TreeRenderer = class TreeRenderer extends Disposable {\n    static { this.ITEM_HEIGHT = 22; }\n    static { this.TREE_TEMPLATE_ID = 'treeExplorer'; }\n    constructor(treeViewId, menus, labels, actionViewItemProvider, aligner, checkboxStateHandler, manuallyManageCheckboxes, themeService, configurationService, labelService, hoverService, treeViewsService, contextKeyService) {\n        super();\n        this.treeViewId = treeViewId;\n        this.menus = menus;\n        this.labels = labels;\n        this.actionViewItemProvider = actionViewItemProvider;\n        this.aligner = aligner;\n        this.checkboxStateHandler = checkboxStateHandler;\n        this.manuallyManageCheckboxes = manuallyManageCheckboxes;\n        this.themeService = themeService;\n        this.configurationService = configurationService;\n        this.labelService = labelService;\n        this.hoverService = hoverService;\n        this.treeViewsService = treeViewsService;\n        this.contextKeyService = contextKeyService;\n        this._onDidChangeCheckboxState = this._register(( new Emitter()));\n        this.onDidChangeCheckboxState = this._onDidChangeCheckboxState.event;\n        this._hasCheckbox = false;\n        this._renderedElements = ( new Map());\n        this._hoverDelegate = {\n            showHover: (options) => this.hoverService.showHover(options),\n            delay: this.configurationService.getValue('workbench.hover.delay')\n        };\n        this._register(this.themeService.onDidFileIconThemeChange(() => this.rerender()));\n        this._register(this.themeService.onDidColorThemeChange(() => this.rerender()));\n        this._register(checkboxStateHandler.onDidChangeCheckboxState(items => {\n            this.updateCheckboxes(items);\n        }));\n    }\n    get templateId() {\n        return TreeRenderer.TREE_TEMPLATE_ID;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n    }\n    renderTemplate(container) {\n        container.classList.add('custom-view-tree-node-item');\n        const checkboxContainer = dom.append(container, dom.$(''));\n        const resourceLabel = this.labels.create(container, { supportHighlights: true, hoverDelegate: this._hoverDelegate });\n        const icon = dom.prepend(resourceLabel.element, dom.$('.custom-view-tree-node-item-icon'));\n        const actionsContainer = dom.append(resourceLabel.element, dom.$('.actions'));\n        const actionBar = ( new ActionBar(actionsContainer, {\n            actionViewItemProvider: this.actionViewItemProvider\n        }));\n        return { resourceLabel, icon, checkboxContainer, actionBar, container, elementDisposable: ( new DisposableStore()) };\n    }\n    getHover(label, resource, node) {\n        if (!(node instanceof ResolvableTreeItem) || !node.hasResolve) {\n            if (resource && !node.tooltip) {\n                return undefined;\n            }\n            else if (node.tooltip === undefined) {\n                return label;\n            }\n            else if (!isString(node.tooltip)) {\n                return { markdown: node.tooltip, markdownNotSupportedFallback: resource ? undefined : renderMarkdownAsPlaintext(node.tooltip) };\n            }\n            else if (node.tooltip !== '') {\n                return node.tooltip;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return {\n            markdown: typeof node.tooltip === 'string' ? node.tooltip :\n                (token) => {\n                    return ( new Promise((resolve) => {\n                        node.resolve(token).then(() => resolve(node.tooltip));\n                    }));\n                },\n            markdownNotSupportedFallback: resource ? undefined : (label ?? '')\n        };\n    }\n    renderElement(element, index, templateData) {\n        const node = element.element;\n        const resource = node.resourceUri ? URI.revive(node.resourceUri) : null;\n        const treeItemLabel = node.label ? node.label : (resource ? { label: basename(resource) } : undefined);\n        const description = isString(node.description) ? node.description : resource && node.description === true ? this.labelService.getUriLabel(dirname(resource), { relative: true }) : undefined;\n        const label = treeItemLabel ? treeItemLabel.label : undefined;\n        const matches = (treeItemLabel && treeItemLabel.highlights && label) ? ( treeItemLabel.highlights.map(([start, end]) => {\n            if (start < 0) {\n                start = label.length + start;\n            }\n            if (end < 0) {\n                end = label.length + end;\n            }\n            if ((start >= label.length) || (end > label.length)) {\n                return ({ start: 0, end: 0 });\n            }\n            if (start > end) {\n                const swap = start;\n                start = end;\n                end = swap;\n            }\n            return ({ start, end });\n        })) : undefined;\n        const icon = this.themeService.getColorTheme().type === ColorScheme.LIGHT ? node.icon : node.iconDark;\n        const iconUrl = icon ? URI.revive(icon) : undefined;\n        const title = this.getHover(label, resource, node);\n        templateData.actionBar.clear();\n        templateData.icon.style.color = '';\n        let commandEnabled = true;\n        if (node.command) {\n            commandEnabled = isTreeCommandEnabled(node.command, this.contextKeyService);\n        }\n        this.renderCheckbox(node, templateData);\n        if (resource) {\n            const fileDecorations = this.configurationService.getValue('explorer.decorations');\n            const labelResource = resource ? resource : ( URI.parse('missing:_icon_resource'));\n            templateData.resourceLabel.setResource({ name: label, description, resource: labelResource }, {\n                fileKind: this.getFileKind(node),\n                title,\n                hideIcon: this.shouldHideResourceLabelIcon(iconUrl, node.themeIcon),\n                fileDecorations,\n                extraClasses: ['custom-view-tree-node-item-resourceLabel'],\n                matches: matches ? matches : createMatches(element.filterData),\n                strikethrough: treeItemLabel?.strikethrough,\n                disabledCommand: !commandEnabled,\n                labelEscapeNewLines: true\n            });\n        }\n        else {\n            templateData.resourceLabel.setResource({ name: label, description }, {\n                title,\n                hideIcon: true,\n                extraClasses: ['custom-view-tree-node-item-resourceLabel'],\n                matches: matches ? matches : createMatches(element.filterData),\n                strikethrough: treeItemLabel?.strikethrough,\n                disabledCommand: !commandEnabled,\n                labelEscapeNewLines: true\n            });\n        }\n        if (iconUrl) {\n            templateData.icon.className = 'custom-view-tree-node-item-icon';\n            templateData.icon.style.backgroundImage = dom.asCSSUrl(iconUrl);\n        }\n        else {\n            let iconClass;\n            if (this.shouldShowThemeIcon(!!resource, node.themeIcon)) {\n                iconClass = ThemeIcon.asClassName(node.themeIcon);\n                if (node.themeIcon.color) {\n                    templateData.icon.style.color = this.themeService.getColorTheme().getColor(node.themeIcon.color.id)?.toString() ?? '';\n                }\n            }\n            templateData.icon.className = iconClass ? `custom-view-tree-node-item-icon ${iconClass}` : '';\n            templateData.icon.style.backgroundImage = '';\n        }\n        if (!commandEnabled) {\n            templateData.icon.className = templateData.icon.className + ' disabled';\n            if (templateData.container.parentElement) {\n                templateData.container.parentElement.className = templateData.container.parentElement.className + ' disabled';\n            }\n        }\n        templateData.actionBar.context = { $treeViewId: this.treeViewId, $treeItemHandle: node.handle };\n        const menuActions = this.menus.getResourceActions(node);\n        if (menuActions.menu) {\n            templateData.elementDisposable.add(menuActions.menu);\n        }\n        templateData.actionBar.push(menuActions.actions, { icon: true, label: false });\n        if (this._actionRunner) {\n            templateData.actionBar.actionRunner = this._actionRunner;\n        }\n        this.setAlignment(templateData.container, node);\n        this.treeViewsService.addRenderedTreeItemElement(node, templateData.container);\n        this._renderedElements.set(element.element.handle, { original: element, rendered: templateData });\n    }\n    rerender() {\n        const keys = ( new Set(( this._renderedElements.keys())));\n        for (const key of keys) {\n            const value = this._renderedElements.get(key);\n            if (value) {\n                this.disposeElement(value.original, 0, value.rendered);\n                this.renderElement(value.original, 0, value.rendered);\n            }\n        }\n    }\n    renderCheckbox(node, templateData) {\n        if (node.checkbox) {\n            if (!this._hasCheckbox) {\n                this._hasCheckbox = true;\n                this.rerender();\n            }\n            if (!templateData.checkbox) {\n                const checkbox = ( new TreeItemCheckbox(\n                    templateData.checkboxContainer,\n                    this.checkboxStateHandler,\n                    this._hoverDelegate\n                ));\n                templateData.checkbox = checkbox;\n            }\n            templateData.checkbox.render(node);\n        }\n        else if (templateData.checkbox) {\n            templateData.checkbox.dispose();\n            templateData.checkbox = undefined;\n        }\n    }\n    setAlignment(container, treeItem) {\n        container.parentElement.classList.toggle('align-icon-with-twisty', !this._hasCheckbox && this.aligner.alignIconWithTwisty(treeItem));\n    }\n    shouldHideResourceLabelIcon(iconUrl, icon) {\n        return (!!iconUrl || (!!icon && !this.isFileKindThemeIcon(icon)));\n    }\n    shouldShowThemeIcon(hasResource, icon) {\n        if (!icon) {\n            return false;\n        }\n        return !(hasResource && this.isFileKindThemeIcon(icon));\n    }\n    isFolderThemeIcon(icon) {\n        return icon?.id === FolderThemeIcon.id;\n    }\n    isFileKindThemeIcon(icon) {\n        if (icon) {\n            return icon.id === FileThemeIcon.id || this.isFolderThemeIcon(icon);\n        }\n        else {\n            return false;\n        }\n    }\n    getFileKind(node) {\n        if (node.themeIcon) {\n            switch (node.themeIcon.id) {\n                case FileThemeIcon.id:\n                    return FileKind.FILE;\n                case FolderThemeIcon.id:\n                    return FileKind.FOLDER;\n            }\n        }\n        return node.collapsibleState === TreeItemCollapsibleState.Collapsed || node.collapsibleState === TreeItemCollapsibleState.Expanded ? FileKind.FOLDER : FileKind.FILE;\n    }\n    updateCheckboxes(items) {\n        const additionalItems = [];\n        if (!this.manuallyManageCheckboxes) {\n            for (const item of items) {\n                if (item.checkbox !== undefined) {\n                    function checkChildren(currentItem) {\n                        for (const child of (currentItem.children ?? [])) {\n                            if ((child.checkbox !== undefined) && (currentItem.checkbox !== undefined) && (child.checkbox.isChecked !== currentItem.checkbox.isChecked)) {\n                                child.checkbox.isChecked = currentItem.checkbox.isChecked;\n                                additionalItems.push(child);\n                                checkChildren(child);\n                            }\n                        }\n                    }\n                    checkChildren(item);\n                    const visitedParents = ( new Set());\n                    function checkParents(currentItem) {\n                        if (currentItem.parent && (currentItem.parent.checkbox !== undefined) && currentItem.parent.children) {\n                            if (( visitedParents.has(currentItem.parent))) {\n                                return;\n                            }\n                            else {\n                                visitedParents.add(currentItem.parent);\n                            }\n                            let someUnchecked = false;\n                            let someChecked = false;\n                            for (const child of currentItem.parent.children) {\n                                if (someUnchecked && someChecked) {\n                                    break;\n                                }\n                                if (child.checkbox !== undefined) {\n                                    if (child.checkbox.isChecked) {\n                                        someChecked = true;\n                                    }\n                                    else {\n                                        someUnchecked = true;\n                                    }\n                                }\n                            }\n                            if (someChecked && !someUnchecked && (currentItem.parent.checkbox.isChecked !== true)) {\n                                currentItem.parent.checkbox.isChecked = true;\n                                additionalItems.push(currentItem.parent);\n                                checkParents(currentItem.parent);\n                            }\n                            else if (someUnchecked && (currentItem.parent.checkbox.isChecked !== false)) {\n                                currentItem.parent.checkbox.isChecked = false;\n                                additionalItems.push(currentItem.parent);\n                                checkParents(currentItem.parent);\n                            }\n                        }\n                    }\n                    checkParents(item);\n                }\n            }\n        }\n        items = items.concat(additionalItems);\n        items.forEach(item => {\n            const renderedItem = this._renderedElements.get(item.handle);\n            if (renderedItem) {\n                renderedItem.rendered.checkbox?.render(item);\n            }\n        });\n        this._onDidChangeCheckboxState.fire(items);\n    }\n    disposeElement(resource, index, templateData) {\n        templateData.elementDisposable.clear();\n        this._renderedElements.delete(resource.element.handle);\n        this.treeViewsService.removeRenderedTreeItemElement(resource.element);\n        templateData.checkbox?.dispose();\n        templateData.checkbox = undefined;\n    }\n    disposeTemplate(templateData) {\n        templateData.resourceLabel.dispose();\n        templateData.actionBar.dispose();\n        templateData.elementDisposable.dispose();\n    }\n};\nTreeRenderer = ( __decorate([\n    ( __param(7, IThemeService)),\n    ( __param(8, IConfigurationService)),\n    ( __param(9, ILabelService)),\n    ( __param(10, IHoverService)),\n    ( __param(11, ITreeViewsService)),\n    ( __param(12, IContextKeyService))\n], TreeRenderer));\nclass Aligner extends Disposable {\n    constructor(themeService) {\n        super();\n        this.themeService = themeService;\n    }\n    set tree(tree) {\n        this._tree = tree;\n    }\n    alignIconWithTwisty(treeItem) {\n        if (treeItem.collapsibleState !== TreeItemCollapsibleState.None) {\n            return false;\n        }\n        if (!this.hasIcon(treeItem)) {\n            return false;\n        }\n        if (this._tree) {\n            const parent = this._tree.getParentElement(treeItem) || this._tree.getInput();\n            if (this.hasIcon(parent)) {\n                return !!parent.children && ( parent.children.some(\n                    c => c.collapsibleState !== TreeItemCollapsibleState.None && !this.hasIcon(c)\n                ));\n            }\n            return !!parent.children && parent.children.every(c => c.collapsibleState === TreeItemCollapsibleState.None || !this.hasIcon(c));\n        }\n        else {\n            return false;\n        }\n    }\n    hasIcon(node) {\n        const icon = this.themeService.getColorTheme().type === ColorScheme.LIGHT ? node.icon : node.iconDark;\n        if (icon) {\n            return true;\n        }\n        if (node.resourceUri || node.themeIcon) {\n            const fileIconTheme = this.themeService.getFileIconTheme();\n            const isFolder = node.themeIcon ? node.themeIcon.id === FolderThemeIcon.id : node.collapsibleState !== TreeItemCollapsibleState.None;\n            if (isFolder) {\n                return fileIconTheme.hasFileIcons && fileIconTheme.hasFolderIcons;\n            }\n            return fileIconTheme.hasFileIcons;\n        }\n        return false;\n    }\n}\nclass MultipleSelectionActionRunner extends ActionRunner {\n    constructor(notificationService, getSelectedResources) {\n        super();\n        this.getSelectedResources = getSelectedResources;\n        this._register(this.onDidRun(e => {\n            if (e.error && !isCancellationError(e.error)) {\n                notificationService.error(( localize(\n                    'command-error',\n                    'Error running command {1}: {0}. This is likely caused by the extension that contributes {1}.',\n                    e.error.message,\n                    e.action.id\n                )));\n            }\n        }));\n    }\n    async runAction(action, context) {\n        const selection = this.getSelectedResources();\n        let selectionHandleArgs = undefined;\n        let actionInSelected = false;\n        if (selection.length > 1) {\n            selectionHandleArgs = ( selection.map(selected => {\n                if ((selected.handle === context.$treeItemHandle) || context.$selectedTreeItems) {\n                    actionInSelected = true;\n                }\n                return { $treeViewId: context.$treeViewId, $treeItemHandle: selected.handle };\n            }));\n        }\n        if (!actionInSelected) {\n            selectionHandleArgs = undefined;\n        }\n        await action.run(context, selectionHandleArgs);\n    }\n}\nlet TreeMenus = class TreeMenus extends Disposable {\n    constructor(id, menuService) {\n        super();\n        this.id = id;\n        this.menuService = menuService;\n        this._onDidChange = ( new Emitter());\n        this.onDidChange = this._onDidChange.event;\n    }\n    getResourceActions(element) {\n        const actions = this.getActions(MenuId.ViewItemContext, element, true);\n        return { menu: actions.menu, actions: actions.primary };\n    }\n    getResourceContextActions(element) {\n        return this.getActions(MenuId.ViewItemContext, element).secondary;\n    }\n    setContextKeyService(service) {\n        this.contextKeyService = service;\n    }\n    getActions(menuId, element, listen = false) {\n        if (!this.contextKeyService) {\n            return { primary: [], secondary: [] };\n        }\n        const contextKeyService = this.contextKeyService.createOverlay([\n            ['view', this.id],\n            ['viewItem', element.contextValue]\n        ]);\n        const menu = this.menuService.createMenu(menuId, contextKeyService);\n        const primary = [];\n        const secondary = [];\n        const result = { primary, secondary, menu };\n        createAndFillInContextMenuActions(menu, { shouldForwardArgs: true }, result, 'inline');\n        if (listen) {\n            this._register(menu.onDidChange(() => this._onDidChange.fire(element)));\n        }\n        else {\n            menu.dispose();\n        }\n        return result;\n    }\n    dispose() {\n        this.contextKeyService = undefined;\n        super.dispose();\n    }\n};\nTreeMenus = ( __decorate([\n    ( __param(1, IMenuService))\n], TreeMenus));\nlet CustomTreeView = class CustomTreeView extends AbstractTreeView {\n    constructor(id, title, extensionId, themeService, instantiationService, commandService, configurationService, progressService, contextMenuService, keybindingService, notificationService, viewDescriptorService, contextKeyService, hoverService, extensionService, activityService, telemetryService, logService) {\n        super(id, title, themeService, instantiationService, commandService, configurationService, progressService, contextMenuService, keybindingService, notificationService, viewDescriptorService, hoverService, contextKeyService, activityService, logService);\n        this.extensionId = extensionId;\n        this.extensionService = extensionService;\n        this.telemetryService = telemetryService;\n        this.activated = false;\n    }\n    activate() {\n        if (!this.activated) {\n            this.telemetryService.publicLog2('Extension:ViewActivate', {\n                extensionId: ( new TelemetryTrustedValue(this.extensionId)),\n                id: this.id,\n            });\n            this.createTree();\n            this.progressService.withProgress({ location: this.id }, () => this.extensionService.activateByEvent(`onView:${this.id}`))\n                .then(() => timeout(2000))\n                .then(() => {\n                this.updateMessage();\n            });\n            this.activated = true;\n        }\n    }\n};\nCustomTreeView = ( __decorate([\n    ( __param(3, IThemeService)),\n    ( __param(4, IInstantiationService)),\n    ( __param(5, ICommandService)),\n    ( __param(6, IConfigurationService)),\n    ( __param(7, IProgressService)),\n    ( __param(8, IContextMenuService)),\n    ( __param(9, IKeybindingService)),\n    ( __param(10, INotificationService)),\n    ( __param(11, IViewDescriptorService)),\n    ( __param(12, IContextKeyService)),\n    ( __param(13, IHoverService)),\n    ( __param(14, IExtensionService)),\n    ( __param(15, IActivityService)),\n    ( __param(16, ITelemetryService)),\n    ( __param(17, ILogService))\n], CustomTreeView));\nlet CustomTreeViewDragAndDrop = class CustomTreeViewDragAndDrop {\n    constructor(treeId, labelService, instantiationService, treeViewsDragAndDropService, logService) {\n        this.treeId = treeId;\n        this.labelService = labelService;\n        this.instantiationService = instantiationService;\n        this.treeViewsDragAndDropService = treeViewsDragAndDropService;\n        this.logService = logService;\n        this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n        this.treeMimeType = `application/vnd.code.tree.${treeId.toLowerCase()}`;\n    }\n    set controller(controller) {\n        this.dndController = controller;\n    }\n    handleDragAndLog(dndController, itemHandles, uuid, dragCancellationToken) {\n        return dndController.handleDrag(itemHandles, uuid, dragCancellationToken).then(additionalDataTransfer => {\n            if (additionalDataTransfer) {\n                const unlistedTypes = [];\n                for (const item of additionalDataTransfer) {\n                    if ((item[0] !== this.treeMimeType) && (dndController.dragMimeTypes.findIndex(value => value === item[0]) < 0)) {\n                        unlistedTypes.push(item[0]);\n                    }\n                }\n                if (unlistedTypes.length) {\n                    this.logService.warn(`Drag and drop controller for tree ${this.treeId} adds the following data transfer types but does not declare them in dragMimeTypes: ${unlistedTypes.join(', ')}`);\n                }\n            }\n            return additionalDataTransfer;\n        });\n    }\n    addExtensionProvidedTransferTypes(originalEvent, itemHandles) {\n        if (!originalEvent.dataTransfer || !this.dndController) {\n            return;\n        }\n        const uuid = generateUuid();\n        this.dragCancellationToken = ( new CancellationTokenSource());\n        this.treeViewsDragAndDropService.addDragOperationTransfer(uuid, this.handleDragAndLog(this.dndController, itemHandles, uuid, this.dragCancellationToken.token));\n        this.treeItemsTransfer.setData([( new DraggedTreeItemsIdentifier(uuid))], DraggedTreeItemsIdentifier.prototype);\n        originalEvent.dataTransfer.clearData(Mimes.text);\n        if (this.dndController.dragMimeTypes.find((element) => element === Mimes.uriList)) {\n            originalEvent.dataTransfer?.setData(DataTransfers.RESOURCES, '');\n        }\n        this.dndController.dragMimeTypes.forEach(supportedType => {\n            originalEvent.dataTransfer?.setData(supportedType, '');\n        });\n    }\n    addResourceInfoToTransfer(originalEvent, resources) {\n        if (resources.length && originalEvent.dataTransfer) {\n            this.instantiationService.invokeFunction(accessor => fillEditorsDragData(accessor, resources, originalEvent));\n            const fileResources = ( resources.filter(s => s.scheme === Schemas.file).map(r => r.fsPath));\n            if (fileResources.length) {\n                originalEvent.dataTransfer.setData(CodeDataTransfers.FILES, JSON.stringify(fileResources));\n            }\n        }\n    }\n    onDragStart(data, originalEvent) {\n        if (originalEvent.dataTransfer) {\n            const treeItemsData = data.getData();\n            const resources = [];\n            const sourceInfo = {\n                id: this.treeId,\n                itemHandles: []\n            };\n            treeItemsData.forEach(item => {\n                sourceInfo.itemHandles.push(item.handle);\n                if (item.resourceUri) {\n                    resources.push(URI.revive(item.resourceUri));\n                }\n            });\n            this.addResourceInfoToTransfer(originalEvent, resources);\n            this.addExtensionProvidedTransferTypes(originalEvent, sourceInfo.itemHandles);\n            originalEvent.dataTransfer.setData(this.treeMimeType, JSON.stringify(sourceInfo));\n        }\n    }\n    debugLog(types) {\n        if (types.size) {\n            this.logService.debug(`TreeView dragged mime types: ${Array.from(types).join(', ')}`);\n        }\n        else {\n            this.logService.debug(`TreeView dragged with no supported mime types.`);\n        }\n    }\n    onDragOver(data, targetElement, targetIndex, originalEvent) {\n        const dataTransfer = toExternalVSDataTransfer(originalEvent.dataTransfer);\n        const types = ( new Set(Array.from(dataTransfer, x => x[0])));\n        if (originalEvent.dataTransfer) {\n            for (const item of originalEvent.dataTransfer.items) {\n                if (item.kind === 'file' || item.type === DataTransfers.RESOURCES.toLowerCase()) {\n                    types.add(Mimes.uriList);\n                    break;\n                }\n            }\n        }\n        this.debugLog(types);\n        const dndController = this.dndController;\n        if (!dndController || !originalEvent.dataTransfer || (dndController.dropMimeTypes.length === 0)) {\n            return false;\n        }\n        const dragContainersSupportedType = ( Array.from(types).some((value, index) => {\n            if (value === this.treeMimeType) {\n                return true;\n            }\n            else {\n                return dndController.dropMimeTypes.indexOf(value) >= 0;\n            }\n        }));\n        if (dragContainersSupportedType) {\n            return { accept: true, bubble: 0 , autoExpand: true };\n        }\n        return false;\n    }\n    getDragURI(element) {\n        if (!this.dndController) {\n            return null;\n        }\n        return element.resourceUri ? ( URI.revive(element.resourceUri).toString()) : element.handle;\n    }\n    getDragLabel(elements) {\n        if (!this.dndController) {\n            return undefined;\n        }\n        if (elements.length > 1) {\n            return String(elements.length);\n        }\n        const element = elements[0];\n        return element.label ? element.label.label : (element.resourceUri ? this.labelService.getUriLabel(URI.revive(element.resourceUri)) : undefined);\n    }\n    async drop(data, targetNode, targetIndex, originalEvent) {\n        const dndController = this.dndController;\n        if (!originalEvent.dataTransfer || !dndController) {\n            return;\n        }\n        let treeSourceInfo;\n        let willDropUuid;\n        if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n            willDropUuid = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype)[0].identifier;\n        }\n        const originalDataTransfer = toExternalVSDataTransfer(originalEvent.dataTransfer, true);\n        const outDataTransfer = ( new VSDataTransfer());\n        for (const [type, item] of originalDataTransfer) {\n            if (type === this.treeMimeType || dndController.dropMimeTypes.includes(type) || (item.asFile() && dndController.dropMimeTypes.includes(DataTransfers.FILES.toLowerCase()))) {\n                outDataTransfer.append(type, item);\n                if (type === this.treeMimeType) {\n                    try {\n                        treeSourceInfo = JSON.parse(await item.asString());\n                    }\n                    catch {\n                    }\n                }\n            }\n        }\n        const additionalDataTransfer = await this.treeViewsDragAndDropService.removeDragOperationTransfer(willDropUuid);\n        if (additionalDataTransfer) {\n            for (const [type, item] of additionalDataTransfer) {\n                outDataTransfer.append(type, item);\n            }\n        }\n        return dndController.handleDrop(outDataTransfer, targetNode, CancellationToken.None, willDropUuid, treeSourceInfo?.id, treeSourceInfo?.itemHandles);\n    }\n    onDragEnd(originalEvent) {\n        if (originalEvent.dataTransfer?.dropEffect === 'none') {\n            this.dragCancellationToken?.cancel();\n        }\n    }\n};\nCustomTreeViewDragAndDrop = ( __decorate([\n    ( __param(1, ILabelService)),\n    ( __param(2, IInstantiationService)),\n    ( __param(3, ITreeViewsDnDService)),\n    ( __param(4, ILogService))\n], CustomTreeViewDragAndDrop));\nexport { CustomTreeView, CustomTreeViewDragAndDrop, RawCustomTreeViewContextKey, TreeViewPane };\n","import * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { OnPortForward, mapHasAddressLocalhostOrAllInterfaces, TunnelCloseReason, AutoTunnelSource, makeAddress } from '../../../services/remote/common/remoteExplorerService.js';\nimport { OpenPortInPreviewAction, OpenPortInBrowserAction, TunnelPanel, openPreviewEnabledContext } from './tunnelView.js';\nimport Severity from 'monaco-editor/esm/vs/base/common/severity.js';\nimport { isWeb } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { TunnelPrivacyId } from '../../../../platform/tunnel/common/tunnel.js';\nconst VIEWLET_ID = 'workbench.view.remote';\nclass OnAutoForwardedAction extends Disposable {\n    static { this.NOTIFY_COOL_DOWN = 5000; }\n    constructor(notificationService, remoteExplorerService, openerService, externalOpenerService, tunnelService, hostService, logService, contextKeyService) {\n        super();\n        this.notificationService = notificationService;\n        this.remoteExplorerService = remoteExplorerService;\n        this.openerService = openerService;\n        this.externalOpenerService = externalOpenerService;\n        this.tunnelService = tunnelService;\n        this.hostService = hostService;\n        this.logService = logService;\n        this.contextKeyService = contextKeyService;\n        this.alreadyOpenedOnce = ( new Set());\n        this.lastNotifyTime = ( new Date());\n        this.lastNotifyTime.setFullYear(this.lastNotifyTime.getFullYear() - 1);\n    }\n    async doAction(tunnels) {\n        this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Starting action for ${tunnels[0]?.tunnelRemotePort}`);\n        this.doActionTunnels = tunnels;\n        const tunnel = await this.portNumberHeuristicDelay();\n        this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose ${tunnel?.tunnelRemotePort}`);\n        if (tunnel) {\n            const allAttributes = await this.remoteExplorerService.tunnelModel.getAttributes([{ port: tunnel.tunnelRemotePort, host: tunnel.tunnelRemoteHost }]);\n            const attributes = allAttributes?.get(tunnel.tunnelRemotePort)?.onAutoForward;\n            this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) onAutoForward action is ${attributes}`);\n            switch (attributes) {\n                case OnPortForward.OpenBrowserOnce: {\n                    if (( this.alreadyOpenedOnce.has(tunnel.localAddress))) {\n                        break;\n                    }\n                    this.alreadyOpenedOnce.add(tunnel.localAddress);\n                }\n                case OnPortForward.OpenBrowser: {\n                    const address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n                    await OpenPortInBrowserAction.run(this.remoteExplorerService.tunnelModel, this.openerService, address);\n                    break;\n                }\n                case OnPortForward.OpenPreview: {\n                    const address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n                    await OpenPortInPreviewAction.run(this.remoteExplorerService.tunnelModel, this.openerService, this.externalOpenerService, address);\n                    break;\n                }\n                case OnPortForward.Silent: break;\n                default: {\n                    const elapsed = ( new Date()).getTime() - this.lastNotifyTime.getTime();\n                    this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) time elapsed since last notification ${elapsed} ms`);\n                    if (elapsed > OnAutoForwardedAction.NOTIFY_COOL_DOWN) {\n                        await this.showNotification(tunnel);\n                    }\n                }\n            }\n        }\n    }\n    hide(removedPorts) {\n        if (this.doActionTunnels) {\n            this.doActionTunnels = this.doActionTunnels.filter(value => !removedPorts.includes(value.tunnelRemotePort));\n        }\n        if (this.lastShownPort && removedPorts.indexOf(this.lastShownPort) >= 0) {\n            this.lastNotification?.close();\n        }\n    }\n    async portNumberHeuristicDelay() {\n        this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Starting heuristic delay`);\n        if (!this.doActionTunnels || this.doActionTunnels.length === 0) {\n            return;\n        }\n        this.doActionTunnels = this.doActionTunnels.sort((a, b) => a.tunnelRemotePort - b.tunnelRemotePort);\n        const firstTunnel = this.doActionTunnels.shift();\n        if (firstTunnel.tunnelRemotePort % 1000 === 0) {\n            this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because % 1000: ${firstTunnel.tunnelRemotePort}`);\n            this.newerTunnel = firstTunnel;\n            return firstTunnel;\n        }\n        else if (firstTunnel.tunnelRemotePort < 10000 && firstTunnel.tunnelRemotePort !== 9229) {\n            this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because < 10000: ${firstTunnel.tunnelRemotePort}`);\n            this.newerTunnel = firstTunnel;\n            return firstTunnel;\n        }\n        this.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Waiting for \"better\" tunnel than ${firstTunnel.tunnelRemotePort}`);\n        this.newerTunnel = undefined;\n        return ( new Promise(resolve => {\n            setTimeout(() => {\n                if (this.newerTunnel) {\n                    resolve(undefined);\n                }\n                else if (this.doActionTunnels?.includes(firstTunnel)) {\n                    resolve(firstTunnel);\n                }\n                else {\n                    resolve(undefined);\n                }\n            }, 3000);\n        }));\n    }\n    basicMessage(tunnel) {\n        return ( nls.localize(\n            'remote.tunnelsView.automaticForward',\n            \"Your application running on port {0} is available.  \",\n            tunnel.tunnelRemotePort\n        ));\n    }\n    linkMessage() {\n        return ( nls.localize(\n            { key: 'remote.tunnelsView.notificationLink2', comment: ['[See all forwarded ports]({0}) is a link. Only translate `See all forwarded ports`. Do not change brackets and parentheses or {0}'] },\n            \"[See all forwarded ports]({0})\",\n            `command:${TunnelPanel.ID}.focus`\n        ));\n    }\n    async showNotification(tunnel) {\n        if (!(await this.hostService.hadLastFocus())) {\n            return;\n        }\n        this.lastNotification?.close();\n        let message = this.basicMessage(tunnel);\n        const choices = [this.openBrowserChoice(tunnel)];\n        if (!isWeb || openPreviewEnabledContext.getValue(this.contextKeyService)) {\n            choices.push(this.openPreviewChoice(tunnel));\n        }\n        if ((tunnel.tunnelLocalPort !== tunnel.tunnelRemotePort) && this.tunnelService.canElevate && this.tunnelService.isPortPrivileged(tunnel.tunnelRemotePort)) {\n            message += ( nls.localize(\n                'remote.tunnelsView.elevationMessage',\n                \"You'll need to run as superuser to use port {0} locally.  \",\n                tunnel.tunnelRemotePort\n            ));\n            choices.unshift(this.elevateChoice(tunnel));\n        }\n        if (tunnel.privacy === TunnelPrivacyId.Private && isWeb && this.tunnelService.canChangePrivacy) {\n            choices.push(this.makePublicChoice(tunnel));\n        }\n        message += this.linkMessage();\n        this.lastNotification = this.notificationService.prompt(Severity.Info, message, choices, { neverShowAgain: { id: 'remote.tunnelsView.autoForwardNeverShow', isSecondary: true } });\n        this.lastShownPort = tunnel.tunnelRemotePort;\n        this.lastNotifyTime = ( new Date());\n        this.lastNotification.onDidClose(() => {\n            this.lastNotification = undefined;\n            this.lastShownPort = undefined;\n        });\n    }\n    makePublicChoice(tunnel) {\n        return {\n            label: ( nls.localize('remote.tunnelsView.makePublic', \"Make Public\")),\n            run: async () => {\n                const oldTunnelDetails = mapHasAddressLocalhostOrAllInterfaces(this.remoteExplorerService.tunnelModel.forwarded, tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n                await this.remoteExplorerService.close({ host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort }, TunnelCloseReason.Other);\n                return this.remoteExplorerService.forward({\n                    remote: { host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort },\n                    local: tunnel.tunnelLocalPort,\n                    name: oldTunnelDetails?.name,\n                    elevateIfNeeded: true,\n                    privacy: TunnelPrivacyId.Public,\n                    source: oldTunnelDetails?.source\n                });\n            }\n        };\n    }\n    openBrowserChoice(tunnel) {\n        const address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n        return {\n            label: OpenPortInBrowserAction.LABEL,\n            run: () => OpenPortInBrowserAction.run(this.remoteExplorerService.tunnelModel, this.openerService, address)\n        };\n    }\n    openPreviewChoice(tunnel) {\n        const address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n        return {\n            label: OpenPortInPreviewAction.LABEL,\n            run: () => OpenPortInPreviewAction.run(this.remoteExplorerService.tunnelModel, this.openerService, this.externalOpenerService, address)\n        };\n    }\n    elevateChoice(tunnel) {\n        return {\n            label: ( nls.localize(\n                'remote.tunnelsView.elevationButton',\n                \"Use Port {0} as Sudo...\",\n                tunnel.tunnelRemotePort\n            )),\n            run: async () => {\n                await this.remoteExplorerService.close({ host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort }, TunnelCloseReason.Other);\n                const newTunnel = await this.remoteExplorerService.forward({\n                    remote: { host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort },\n                    local: tunnel.tunnelRemotePort,\n                    elevateIfNeeded: true,\n                    source: AutoTunnelSource\n                });\n                if (!newTunnel) {\n                    return;\n                }\n                this.lastNotification?.close();\n                this.lastShownPort = newTunnel.tunnelRemotePort;\n                this.lastNotification = this.notificationService.prompt(Severity.Info, this.basicMessage(newTunnel) + this.linkMessage(), [this.openBrowserChoice(newTunnel), this.openPreviewChoice(tunnel)], { neverShowAgain: { id: 'remote.tunnelsView.autoForwardNeverShow', isSecondary: true } });\n                this.lastNotification.onDidClose(() => {\n                    this.lastNotification = undefined;\n                    this.lastShownPort = undefined;\n                });\n            }\n        };\n    }\n}\nexport { VIEWLET_ID };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Dimension, EventType, addDisposableListener, findParentWithClass } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { MutableDisposable, DisposableStore, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { withNullAsUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nimport { IProgressService } from 'monaco-editor/esm/vs/platform/progress/common/progress.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { ViewPane, ViewPaneShowActions } from '../../../browser/parts/views/viewPane.js';\nimport { Memento } from '../../../common/memento.js';\nimport { IViewDescriptorService, IViewsService } from '../../../common/views.js';\nimport { ExtensionKeyedWebviewOriginStore, IWebviewService } from '../../webview/browser/webview.js';\nimport { WebviewWindowDragMonitor } from '../../webview/browser/webviewWindowDragMonitor.js';\nimport { IWebviewViewService } from './webviewViewService.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nconst storageKeys = {\n    webviewState: 'webviewState',\n};\nlet WebviewViewPane = class WebviewViewPane extends ViewPane {\n    static getOriginStore(storageService) {\n        this._originStore ??= ( new ExtensionKeyedWebviewOriginStore('webviewViews.origins', storageService));\n        return this._originStore;\n    }\n    constructor(options, configurationService, contextKeyService, contextMenuService, instantiationService, keybindingService, openerService, telemetryService, themeService, viewDescriptorService, activityService, extensionService, progressService, storageService, viewService, webviewService, webviewViewService) {\n        super({ ...options, titleMenuId: MenuId.ViewTitle, showActions: ViewPaneShowActions.WhenExpanded }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService);\n        this.activityService = activityService;\n        this.extensionService = extensionService;\n        this.progressService = progressService;\n        this.storageService = storageService;\n        this.viewService = viewService;\n        this.webviewService = webviewService;\n        this.webviewViewService = webviewViewService;\n        this._webview = this._register(( new MutableDisposable()));\n        this._webviewDisposables = this._register(( new DisposableStore()));\n        this._activated = false;\n        this._onDidChangeVisibility = this._register(( new Emitter()));\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._onDispose = this._register(( new Emitter()));\n        this.onDispose = this._onDispose.event;\n        this.extensionId = options.fromExtensionId;\n        this.defaultTitle = this.title;\n        this.memento = ( new Memento(`webviewView.${this.id}`, storageService));\n        this.viewState = this.memento.getMemento(1 , 1 );\n        this._register(this.onDidChangeBodyVisibility(() => this.updateTreeVisibility()));\n        this._register(this.webviewViewService.onNewResolverRegistered(e => {\n            if (e.viewType === this.id) {\n                this.updateTreeVisibility();\n            }\n        }));\n        this.updateTreeVisibility();\n    }\n    dispose() {\n        this._onDispose.fire();\n        clearTimeout(this._repositionTimeout);\n        super.dispose();\n    }\n    focus() {\n        super.focus();\n        this._webview.value?.focus();\n    }\n    renderBody(container) {\n        super.renderBody(container);\n        this._container = container;\n        this._rootContainer = undefined;\n        if (!this._resizeObserver) {\n            this._resizeObserver = ( new ResizeObserver(() => {\n                setTimeout(() => {\n                    this.layoutWebview();\n                }, 0);\n            }));\n            this._register(toDisposable(() => {\n                this._resizeObserver.disconnect();\n            }));\n            this._resizeObserver.observe(container);\n        }\n    }\n    saveState() {\n        if (this._webview.value) {\n            this.viewState[storageKeys.webviewState] = this._webview.value.state;\n        }\n        this.memento.saveMemento();\n        super.saveState();\n    }\n    layoutBody(height, width) {\n        super.layoutBody(height, width);\n        this.layoutWebview(( new Dimension(width, height)));\n    }\n    updateTreeVisibility() {\n        if (this.isBodyVisible()) {\n            this.activate();\n            this._webview.value?.claim(this, undefined);\n        }\n        else {\n            this._webview.value?.release(this);\n        }\n    }\n    activate() {\n        if (this._activated) {\n            return;\n        }\n        this._activated = true;\n        const origin = this.extensionId ? WebviewViewPane.getOriginStore(this.storageService).getOrigin(this.id, this.extensionId) : undefined;\n        const webview = this.webviewService.createWebviewOverlay({\n            origin,\n            providedViewType: this.id,\n            title: this.title,\n            options: { purpose: \"webviewView\"  },\n            contentOptions: {},\n            extension: this.extensionId ? { id: this.extensionId } : undefined\n        });\n        webview.state = this.viewState[storageKeys.webviewState];\n        this._webview.value = webview;\n        if (this._container) {\n            this.layoutWebview();\n        }\n        this._webviewDisposables.add(toDisposable(() => {\n            this._webview.value?.release(this);\n        }));\n        this._webviewDisposables.add(webview.onDidUpdateState(() => {\n            this.viewState[storageKeys.webviewState] = webview.state;\n        }));\n        for (const event of [EventType.DRAG, EventType.DRAG_END, EventType.DRAG_ENTER, EventType.DRAG_LEAVE, EventType.DRAG_START]) {\n            this._webviewDisposables.add(addDisposableListener(this._webview.value.container, event, e => {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                this.dropTargetElement.dispatchEvent(( new DragEvent(e.type, e)));\n            }));\n        }\n        this._webviewDisposables.add(( new WebviewWindowDragMonitor(() => this._webview.value)));\n        const source = this._webviewDisposables.add(( new CancellationTokenSource()));\n        this.withProgress(async () => {\n            await this.extensionService.activateByEvent(`onView:${this.id}`);\n            const self = this;\n            const webviewView = {\n                webview,\n                onDidChangeVisibility: this.onDidChangeBodyVisibility,\n                onDispose: this.onDispose,\n                get title() { return self.setTitle; },\n                set title(value) { self.updateTitle(value); },\n                get description() { return self.titleDescription; },\n                set description(value) { self.updateTitleDescription(value); },\n                get badge() { return self.badge; },\n                set badge(badge) { self.updateBadge(badge); },\n                dispose: () => {\n                    this._activated = false;\n                    this._webview.clear();\n                    this._webviewDisposables.clear();\n                },\n                show: (preserveFocus) => {\n                    this.viewService.openView(this.id, !preserveFocus);\n                }\n            };\n            await this.webviewViewService.resolve(this.id, webviewView, source.token);\n        });\n    }\n    updateTitle(value) {\n        this.setTitle = value;\n        super.updateTitle(typeof value === 'string' ? value : this.defaultTitle);\n    }\n    updateBadge(badge) {\n        if (this.badge?.value === badge?.value &&\n            this.badge?.tooltip === badge?.tooltip) {\n            return;\n        }\n        if (this.activity) {\n            this.activity.dispose();\n            this.activity = undefined;\n        }\n        this.badge = badge;\n        if (badge) {\n            const activity = {\n                badge: ( new NumberBadge(badge.value, () => badge.tooltip)),\n                priority: 150\n            };\n            this.activityService.showViewActivity(this.id, activity);\n        }\n    }\n    async withProgress(task) {\n        return this.progressService.withProgress({ location: this.id, delay: 500 }, task);\n    }\n    onDidScrollRoot() {\n        this.layoutWebview();\n    }\n    doLayoutWebview(dimension) {\n        const webviewEntry = this._webview.value;\n        if (!this._container || !webviewEntry) {\n            return;\n        }\n        if (!this._rootContainer || !this._rootContainer.isConnected) {\n            this._rootContainer = this.findRootContainer(this._container);\n        }\n        webviewEntry.layoutWebviewOverElement(this._container, dimension, this._rootContainer);\n    }\n    layoutWebview(dimension) {\n        this.doLayoutWebview(dimension);\n        clearTimeout(this._repositionTimeout);\n        this._repositionTimeout = setTimeout(() => this.doLayoutWebview(dimension), 200);\n    }\n    findRootContainer(container) {\n        return withNullAsUndefined(findParentWithClass(container, 'monaco-scrollable-element'));\n    }\n};\nWebviewViewPane = ( __decorate([\n    ( __param(1, IConfigurationService)),\n    ( __param(2, IContextKeyService)),\n    ( __param(3, IContextMenuService)),\n    ( __param(4, IInstantiationService)),\n    ( __param(5, IKeybindingService)),\n    ( __param(6, IOpenerService)),\n    ( __param(7, ITelemetryService)),\n    ( __param(8, IThemeService)),\n    ( __param(9, IViewDescriptorService)),\n    ( __param(10, IActivityService)),\n    ( __param(11, IExtensionService)),\n    ( __param(12, IProgressService)),\n    ( __param(13, IStorageService)),\n    ( __param(14, IViewsService)),\n    ( __param(15, IWebviewService)),\n    ( __param(16, IWebviewViewService))\n], WebviewViewPane));\nexport { WebviewViewPane };\n","import { __decorate, __param } from '../../../../../node_modules/tslib/tslib.es6.js';\nimport * as resources from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { isFalsyOrWhitespace } from 'monaco-editor/esm/vs/base/common/strings.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { ExtensionIdentifierSet, ExtensionIdentifier } from 'monaco-editor/esm/vs/platform/extensions/common/extensions.js';\nimport { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { Extensions as Extensions$1 } from '../../browser/panecomposite.js';\nimport { RawCustomTreeViewContextKey, TreeViewPane, CustomTreeView } from '../../browser/parts/views/treeView.js';\nimport { ViewPaneContainer } from '../../browser/parts/views/viewPaneContainer.js';\nimport { Extensions as Extensions$2 } from '../../common/contributions.js';\nimport { Extensions, ResolvableTreeItem } from '../../common/views.js';\nimport { VIEWLET_ID as VIEWLET_ID$3 } from '../../contrib/debug/common/debug.js';\nimport { VIEWLET_ID as VIEWLET_ID$1 } from '../../contrib/files/common/files.js';\nimport { VIEWLET_ID } from '../../contrib/remote/browser/remoteExplorer.js';\nimport { VIEWLET_ID as VIEWLET_ID$2 } from '../../contrib/scm/common/scm.js';\nimport { WebviewViewPane } from '../../contrib/webviewView/browser/webviewViewPane.js';\nimport { isProposedApiEnabled } from '../../services/extensions/common/extensions.js';\nimport { ExtensionsRegistry } from '../../services/extensions/common/extensionsRegistry.js';\nimport { KeybindingsRegistry } from 'monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js';\nimport { KeyChord } from 'monaco-editor/esm/vs/base/common/keyCodes.js';\nimport { IListService, WorkbenchListFocusContextKey } from 'monaco-editor/esm/vs/platform/list/browser/listService.js';\nimport { IHoverService } from '../../services/hover/browser/hover.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { AsyncDataTree } from 'monaco-editor/esm/vs/base/browser/ui/tree/asyncDataTree.js';\nimport { ITreeViewsService } from '../../services/views/browser/treeViewsService.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nconst viewsContainerSchema = {\n    type: 'object',\n    properties: {\n        id: {\n            description: ( localize(\n                { key: 'vscode.extension.contributes.views.containers.id', comment: ['Contribution refers to those that an extension contributes to VS Code through an extension/contribution point. '] },\n                \"Unique id used to identify the container in which views can be contributed using 'views' contribution point\"\n            )),\n            type: 'string',\n            pattern: '^[a-zA-Z0-9_-]+$'\n        },\n        title: {\n            description: ( localize(\n                'vscode.extension.contributes.views.containers.title',\n                'Human readable string used to render the container'\n            )),\n            type: 'string'\n        },\n        icon: {\n            description: ( localize(\n                'vscode.extension.contributes.views.containers.icon',\n                \"Path to the container icon. Icons are 24x24 centered on a 50x40 block and have a fill color of 'rgb(215, 218, 224)' or '#d7dae0'. It is recommended that icons be in SVG, though any image file type is accepted.\"\n            )),\n            type: 'string'\n        }\n    },\n    required: ['id', 'title', 'icon']\n};\nconst viewsContainersContribution = {\n    description: ( localize(\n        'vscode.extension.contributes.viewsContainers',\n        'Contributes views containers to the editor'\n    )),\n    type: 'object',\n    properties: {\n        'activitybar': {\n            description: ( localize(\n                'views.container.activitybar',\n                \"Contribute views containers to Activity Bar\"\n            )),\n            type: 'array',\n            items: viewsContainerSchema\n        },\n        'panel': {\n            description: ( localize('views.container.panel', \"Contribute views containers to Panel\")),\n            type: 'array',\n            items: viewsContainerSchema\n        }\n    }\n};\nvar ViewType;\n( (function(ViewType) {\n    ViewType[\"Tree\"] = \"tree\";\n    ViewType[\"Webview\"] = \"webview\";\n})(ViewType || (ViewType = {})));\nvar InitialVisibility;\n( (function(InitialVisibility) {\n    InitialVisibility[\"Visible\"] = \"visible\";\n    InitialVisibility[\"Hidden\"] = \"hidden\";\n    InitialVisibility[\"Collapsed\"] = \"collapsed\";\n})(InitialVisibility || (InitialVisibility = {})));\nconst viewDescriptor = {\n    type: 'object',\n    required: ['id', 'name'],\n    defaultSnippets: [{ body: { id: '${1:id}', name: '${2:name}' } }],\n    properties: {\n        type: {\n            markdownDescription: ( localize(\n                'vscode.extension.contributes.view.type',\n                \"Type of the view. This can either be `tree` for a tree view based view or `webview` for a webview based view. The default is `tree`.\"\n            )),\n            type: 'string',\n            enum: [\n                'tree',\n                'webview',\n            ],\n            markdownEnumDescriptions: [\n                ( localize(\n                    'vscode.extension.contributes.view.tree',\n                    \"The view is backed by a `TreeView` created by `createTreeView`.\"\n                )),\n                ( localize(\n                    'vscode.extension.contributes.view.webview',\n                    \"The view is backed by a `WebviewView` registered by `registerWebviewViewProvider`.\"\n                )),\n            ]\n        },\n        id: {\n            markdownDescription: ( localize(\n                'vscode.extension.contributes.view.id',\n                'Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`.'\n            )),\n            type: 'string'\n        },\n        name: {\n            description: ( localize(\n                'vscode.extension.contributes.view.name',\n                'The human-readable name of the view. Will be shown'\n            )),\n            type: 'string'\n        },\n        when: {\n            description: ( localize(\n                'vscode.extension.contributes.view.when',\n                'Condition which must be true to show this view'\n            )),\n            type: 'string'\n        },\n        icon: {\n            description: ( localize(\n                'vscode.extension.contributes.view.icon',\n                \"Path to the view icon. View icons are displayed when the name of the view cannot be shown. It is recommended that icons be in SVG, though any image file type is accepted.\"\n            )),\n            type: 'string'\n        },\n        contextualTitle: {\n            description: ( localize(\n                'vscode.extension.contributes.view.contextualTitle',\n                \"Human-readable context for when the view is moved out of its original location. By default, the view's container name will be used.\"\n            )),\n            type: 'string'\n        },\n        visibility: {\n            description: ( localize(\n                'vscode.extension.contributes.view.initialState',\n                \"Initial state of the view when the extension is first installed. Once the user has changed the view state by collapsing, moving, or hiding the view, the initial state will not be used again.\"\n            )),\n            type: 'string',\n            enum: [\n                'visible',\n                'hidden',\n                'collapsed'\n            ],\n            default: 'visible',\n            enumDescriptions: [\n                ( localize(\n                    'vscode.extension.contributes.view.initialState.visible',\n                    \"The default initial state for the view. In most containers the view will be expanded, however; some built-in containers (explorer, scm, and debug) show all contributed views collapsed regardless of the `visibility`.\"\n                )),\n                ( localize(\n                    'vscode.extension.contributes.view.initialState.hidden',\n                    \"The view will not be shown in the view container, but will be discoverable through the views menu and other view entry points and can be un-hidden by the user.\"\n                )),\n                ( localize(\n                    'vscode.extension.contributes.view.initialState.collapsed',\n                    \"The view will show in the view container, but will be collapsed.\"\n                ))\n            ]\n        },\n        initialSize: {\n            type: 'number',\n            description: ( localize(\n                'vscode.extension.contributs.view.size',\n                \"The initial size of the view. The size will behave like the css 'flex' property, and will set the initial size when the view is first shown. In the side bar, this is the height of the view. This value is only respected when the same extension owns both the view and the view container.\"\n            )),\n        }\n    }\n};\nconst remoteViewDescriptor = {\n    type: 'object',\n    required: ['id', 'name'],\n    properties: {\n        id: {\n            description: ( localize(\n                'vscode.extension.contributes.view.id',\n                'Identifier of the view. This should be unique across all views. It is recommended to include your extension id as part of the view id. Use this to register a data provider through `vscode.window.registerTreeDataProviderForView` API. Also to trigger activating your extension by registering `onView:${id}` event to `activationEvents`.'\n            )),\n            type: 'string'\n        },\n        name: {\n            description: ( localize(\n                'vscode.extension.contributes.view.name',\n                'The human-readable name of the view. Will be shown'\n            )),\n            type: 'string'\n        },\n        when: {\n            description: ( localize(\n                'vscode.extension.contributes.view.when',\n                'Condition which must be true to show this view'\n            )),\n            type: 'string'\n        },\n        group: {\n            description: ( localize('vscode.extension.contributes.view.group', 'Nested group in the viewlet')),\n            type: 'string'\n        },\n        remoteName: {\n            description: ( localize(\n                'vscode.extension.contributes.view.remoteName',\n                'The name of the remote type associated with this view'\n            )),\n            type: ['string', 'array'],\n            items: {\n                type: 'string'\n            }\n        }\n    }\n};\nconst viewsContribution = {\n    description: ( localize('vscode.extension.contributes.views', \"Contributes views to the editor\")),\n    type: 'object',\n    properties: {\n        'explorer': {\n            description: ( localize(\n                'views.explorer',\n                \"Contributes views to Explorer container in the Activity bar\"\n            )),\n            type: 'array',\n            items: viewDescriptor,\n            default: []\n        },\n        'debug': {\n            description: ( localize('views.debug', \"Contributes views to Debug container in the Activity bar\")),\n            type: 'array',\n            items: viewDescriptor,\n            default: []\n        },\n        'scm': {\n            description: ( localize('views.scm', \"Contributes views to SCM container in the Activity bar\")),\n            type: 'array',\n            items: viewDescriptor,\n            default: []\n        },\n        'test': {\n            description: ( localize('views.test', \"Contributes views to Test container in the Activity bar\")),\n            type: 'array',\n            items: viewDescriptor,\n            default: []\n        },\n        'remote': {\n            description: ( localize(\n                'views.remote',\n                \"Contributes views to Remote container in the Activity bar. To contribute to this container, enableProposedApi needs to be turned on\"\n            )),\n            type: 'array',\n            items: remoteViewDescriptor,\n            default: []\n        }\n    },\n    additionalProperties: {\n        description: ( localize('views.contributed', \"Contributes views to contributed views container\")),\n        type: 'array',\n        items: viewDescriptor,\n        default: []\n    }\n};\nconst viewsContainersExtensionPoint = ( ExtensionsRegistry.registerExtensionPoint({\n    extensionPoint: 'viewsContainers',\n    jsonSchema: viewsContainersContribution\n}));\nconst viewsExtensionPoint = ( ExtensionsRegistry.registerExtensionPoint({\n    extensionPoint: 'views',\n    deps: [viewsContainersExtensionPoint],\n    jsonSchema: viewsContribution,\n    activationEventsGenerator: (viewExtensionPointTypeArray, result) => {\n        for (const viewExtensionPointType of viewExtensionPointTypeArray) {\n            for (const viewDescriptors of ( Object.values(viewExtensionPointType))) {\n                for (const viewDescriptor of viewDescriptors) {\n                    if (viewDescriptor.id) {\n                        result.push(`onView:${viewDescriptor.id}`);\n                    }\n                }\n            }\n        }\n    }\n}));\nconst CUSTOM_VIEWS_START_ORDER = 7;\nlet ViewsExtensionHandler = class ViewsExtensionHandler {\n    constructor(instantiationService, logService) {\n        this.instantiationService = instantiationService;\n        this.logService = logService;\n        this.viewContainersRegistry = ( Registry.as(Extensions.ViewContainersRegistry));\n        this.viewsRegistry = ( Registry.as(Extensions.ViewsRegistry));\n        this.handleAndRegisterCustomViewContainers();\n        this.handleAndRegisterCustomViews();\n        let showTreeHoverCancellation = ( new CancellationTokenSource());\n        KeybindingsRegistry.registerCommandAndKeybindingRule({\n            id: 'workbench.action.showTreeHover',\n            handler: async (accessor, ...args) => {\n                showTreeHoverCancellation.cancel();\n                showTreeHoverCancellation = ( new CancellationTokenSource());\n                const listService = accessor.get(IListService);\n                const treeViewsService = accessor.get(ITreeViewsService);\n                const hoverService = accessor.get(IHoverService);\n                const lastFocusedList = listService.lastFocusedList;\n                if (!(lastFocusedList instanceof AsyncDataTree)) {\n                    return;\n                }\n                const focus = lastFocusedList.getFocus();\n                if (!focus || (focus.length === 0)) {\n                    return;\n                }\n                const treeItem = focus[0];\n                if (treeItem instanceof ResolvableTreeItem) {\n                    await treeItem.resolve(showTreeHoverCancellation.token);\n                }\n                if (!treeItem.tooltip) {\n                    return;\n                }\n                const element = treeViewsService.getRenderedTreeElement(treeItem);\n                if (!element) {\n                    return;\n                }\n                hoverService.showHover({\n                    content: treeItem.tooltip,\n                    target: element,\n                    hoverPosition: 2 ,\n                    hideOnHover: false\n                }, true);\n            },\n            weight: 200 ,\n            primary: KeyChord(2048  | 41 , 2048  | 39 ),\n            when: ( ContextKeyExpr.and(RawCustomTreeViewContextKey, WorkbenchListFocusContextKey))\n        });\n    }\n    handleAndRegisterCustomViewContainers() {\n        viewsContainersExtensionPoint.setHandler((extensions, { added, removed }) => {\n            if (removed.length) {\n                this.removeCustomViewContainers(removed);\n            }\n            if (added.length) {\n                this.addCustomViewContainers(added, this.viewContainersRegistry.all);\n            }\n        });\n    }\n    addCustomViewContainers(extensionPoints, existingViewContainers) {\n        const viewContainersRegistry = ( Registry.as(Extensions.ViewContainersRegistry));\n        let activityBarOrder = CUSTOM_VIEWS_START_ORDER + viewContainersRegistry.all.filter(v => !!v.extensionId && viewContainersRegistry.getViewContainerLocation(v) === 0 ).length;\n        let panelOrder = 5 + viewContainersRegistry.all.filter(v => !!v.extensionId && viewContainersRegistry.getViewContainerLocation(v) === 1 ).length + 1;\n        for (const { value, collector, description } of extensionPoints) {\n            Object.entries(value).forEach(([key, value]) => {\n                if (!this.isValidViewsContainer(value, collector)) {\n                    return;\n                }\n                switch (key) {\n                    case 'activitybar':\n                        activityBarOrder = this.registerCustomViewContainers(value, description, activityBarOrder, existingViewContainers, 0 );\n                        break;\n                    case 'panel':\n                        panelOrder = this.registerCustomViewContainers(value, description, panelOrder, existingViewContainers, 1 );\n                        break;\n                }\n            });\n        }\n    }\n    removeCustomViewContainers(extensionPoints) {\n        const viewContainersRegistry = ( Registry.as(Extensions.ViewContainersRegistry));\n        const removedExtensions = extensionPoints.reduce((result, e) => { result.add(e.description.identifier); return result; }, ( new ExtensionIdentifierSet()));\n        for (const viewContainer of viewContainersRegistry.all) {\n            if (viewContainer.extensionId && ( removedExtensions.has(viewContainer.extensionId))) {\n                const views = this.viewsRegistry.getViews(viewContainer);\n                if (views.length) {\n                    this.viewsRegistry.moveViews(views, this.getDefaultViewContainer());\n                }\n                this.deregisterCustomViewContainer(viewContainer);\n            }\n        }\n    }\n    isValidViewsContainer(viewsContainersDescriptors, collector) {\n        if (!Array.isArray(viewsContainersDescriptors)) {\n            collector.error(( localize('viewcontainer requirearray', \"views containers must be an array\")));\n            return false;\n        }\n        for (const descriptor of viewsContainersDescriptors) {\n            if (typeof descriptor.id !== 'string' && isFalsyOrWhitespace(descriptor.id)) {\n                collector.error(( localize(\n                    'requireidstring',\n                    \"property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.\",\n                    'id'\n                )));\n                return false;\n            }\n            if (!(/^[a-z0-9_-]+$/i.test(descriptor.id))) {\n                collector.error(( localize(\n                    'requireidstring',\n                    \"property `{0}` is mandatory and must be of type `string` with non-empty value. Only alphanumeric characters, '_', and '-' are allowed.\",\n                    'id'\n                )));\n                return false;\n            }\n            if (typeof descriptor.title !== 'string') {\n                collector.error(( localize(\n                    'requirestring',\n                    \"property `{0}` is mandatory and must be of type `string`\",\n                    'title'\n                )));\n                return false;\n            }\n            if (typeof descriptor.icon !== 'string') {\n                collector.error(( localize(\n                    'requirestring',\n                    \"property `{0}` is mandatory and must be of type `string`\",\n                    'icon'\n                )));\n                return false;\n            }\n            if (isFalsyOrWhitespace(descriptor.title)) {\n                collector.warn(( localize(\n                    'requirenonemptystring',\n                    \"property `{0}` is mandatory and must be of type `string` with non-empty value\",\n                    'title'\n                )));\n                return true;\n            }\n        }\n        return true;\n    }\n    registerCustomViewContainers(containers, extension, order, existingViewContainers, location) {\n        containers.forEach(descriptor => {\n            const themeIcon = ThemeIcon.fromString(descriptor.icon);\n            const icon = themeIcon || resources.joinPath(extension.extensionLocation, descriptor.icon);\n            const id = `workbench.view.extension.${descriptor.id}`;\n            const title = descriptor.title || id;\n            const viewContainer = this.registerCustomViewContainer(id, title, icon, order++, extension.identifier, location);\n            if (existingViewContainers.length) {\n                const viewsToMove = [];\n                for (const existingViewContainer of existingViewContainers) {\n                    if (viewContainer !== existingViewContainer) {\n                        viewsToMove.push(...this.viewsRegistry.getViews(existingViewContainer).filter(view => view.originalContainerId === descriptor.id));\n                    }\n                }\n                if (viewsToMove.length) {\n                    this.viewsRegistry.moveViews(viewsToMove, viewContainer);\n                }\n            }\n        });\n        return order;\n    }\n    registerCustomViewContainer(id, title, icon, order, extensionId, location) {\n        let viewContainer = this.viewContainersRegistry.get(id);\n        if (!viewContainer) {\n            viewContainer = this.viewContainersRegistry.registerViewContainer({\n                id,\n                title, extensionId,\n                ctorDescriptor: ( new SyncDescriptor(ViewPaneContainer, [id, { mergeViewWithContainerWhenSingleView: true }])),\n                hideIfEmpty: true,\n                order,\n                icon,\n            }, location);\n        }\n        return viewContainer;\n    }\n    deregisterCustomViewContainer(viewContainer) {\n        this.viewContainersRegistry.deregisterViewContainer(viewContainer);\n        ( Registry.as(Extensions$1.Viewlets)).deregisterPaneComposite(viewContainer.id);\n    }\n    handleAndRegisterCustomViews() {\n        viewsExtensionPoint.setHandler((extensions, { added, removed }) => {\n            if (removed.length) {\n                this.removeViews(removed);\n            }\n            if (added.length) {\n                this.addViews(added);\n            }\n        });\n    }\n    addViews(extensions) {\n        const viewIds = ( new Set());\n        const allViewDescriptors = [];\n        for (const extension of extensions) {\n            const { value, collector } = extension;\n            Object.entries(value).forEach(([key, value]) => {\n                if (!this.isValidViewDescriptors(value, collector)) {\n                    return;\n                }\n                if (key === 'remote' && !isProposedApiEnabled(extension.description, 'contribViewsRemote')) {\n                    collector.warn(( localize(\n                        'ViewContainerRequiresProposedAPI',\n                        \"View container '{0}' requires 'enabledApiProposals: [\\\"contribViewsRemote\\\"]' to be added to 'Remote'.\",\n                        key\n                    )));\n                    return;\n                }\n                const viewContainer = this.getViewContainer(key);\n                if (!viewContainer) {\n                    collector.warn(( localize(\n                        'ViewContainerDoesnotExist',\n                        \"View container '{0}' does not exist and all views registered to it will be added to 'Explorer'.\",\n                        key\n                    )));\n                }\n                const container = viewContainer || this.getDefaultViewContainer();\n                const viewDescriptors = [];\n                for (let index = 0; index < value.length; index++) {\n                    const item = value[index];\n                    if (( viewIds.has(item.id))) {\n                        collector.error(( localize(\n                            'duplicateView1',\n                            \"Cannot register multiple views with same id `{0}`\",\n                            item.id\n                        )));\n                        continue;\n                    }\n                    if (this.viewsRegistry.getView(item.id) !== null) {\n                        collector.error(( localize('duplicateView2', \"A view with id `{0}` is already registered.\", item.id)));\n                        continue;\n                    }\n                    const order = ExtensionIdentifier.equals(extension.description.identifier, container.extensionId)\n                        ? index + 1\n                        : container.viewOrderDelegate\n                            ? container.viewOrderDelegate.getOrder(item.group)\n                            : undefined;\n                    let icon;\n                    if (typeof item.icon === 'string') {\n                        icon = ThemeIcon.fromString(item.icon) || resources.joinPath(extension.description.extensionLocation, item.icon);\n                    }\n                    const initialVisibility = this.convertInitialVisibility(item.visibility);\n                    const type = this.getViewType(item.type);\n                    if (!type) {\n                        collector.error(( localize('unknownViewType', \"Unknown view type `{0}`.\", item.type)));\n                        continue;\n                    }\n                    let weight = undefined;\n                    if (typeof item.initialSize === 'number') {\n                        if (container.extensionId?.value === extension.description.identifier.value) {\n                            weight = item.initialSize;\n                        }\n                        else {\n                            this.logService.warn(`${extension.description.identifier.value} tried to set the view size of ${item.id} but it was ignored because the view container does not belong to it.`);\n                        }\n                    }\n                    const viewDescriptor = {\n                        type: type,\n                        ctorDescriptor: type === ViewType.Tree ? ( new SyncDescriptor(TreeViewPane)) : ( new SyncDescriptor(WebviewViewPane)),\n                        id: item.id,\n                        name: item.name,\n                        when: ContextKeyExpr.deserialize(item.when),\n                        containerIcon: icon || viewContainer?.icon,\n                        containerTitle: item.contextualTitle || viewContainer?.title,\n                        canToggleVisibility: true,\n                        canMoveView: viewContainer?.id !== VIEWLET_ID,\n                        treeView: type === ViewType.Tree ? this.instantiationService.createInstance(CustomTreeView, item.id, item.name, extension.description.identifier.value) : undefined,\n                        collapsed: this.showCollapsed(container) || initialVisibility === InitialVisibility.Collapsed,\n                        order: order,\n                        extensionId: extension.description.identifier,\n                        originalContainerId: key,\n                        group: item.group,\n                        remoteAuthority: item.remoteName || item.remoteAuthority,\n                        virtualWorkspace: item.virtualWorkspace,\n                        hideByDefault: initialVisibility === InitialVisibility.Hidden,\n                        workspace: viewContainer?.id === VIEWLET_ID ? true : undefined,\n                        weight\n                    };\n                    viewIds.add(viewDescriptor.id);\n                    viewDescriptors.push(viewDescriptor);\n                }\n                allViewDescriptors.push({ viewContainer: container, views: viewDescriptors });\n            });\n        }\n        this.viewsRegistry.registerViews2(allViewDescriptors);\n    }\n    getViewType(type) {\n        if (type === ViewType.Webview) {\n            return ViewType.Webview;\n        }\n        if (!type || type === ViewType.Tree) {\n            return ViewType.Tree;\n        }\n        return undefined;\n    }\n    getDefaultViewContainer() {\n        return this.viewContainersRegistry.get(VIEWLET_ID$1);\n    }\n    removeViews(extensions) {\n        const removedExtensions = extensions.reduce((result, e) => { result.add(e.description.identifier); return result; }, ( new ExtensionIdentifierSet()));\n        for (const viewContainer of this.viewContainersRegistry.all) {\n            const removedViews = this.viewsRegistry.getViews(viewContainer).filter(v => v.extensionId && ( removedExtensions.has(v.extensionId)));\n            if (removedViews.length) {\n                this.viewsRegistry.deregisterViews(removedViews, viewContainer);\n                for (const view of removedViews) {\n                    const anyView = view;\n                    if (anyView.treeView) {\n                        anyView.treeView.dispose();\n                    }\n                }\n            }\n        }\n    }\n    convertInitialVisibility(value) {\n        if (( Object.values(InitialVisibility)).includes(value)) {\n            return value;\n        }\n        return undefined;\n    }\n    isValidViewDescriptors(viewDescriptors, collector) {\n        if (!Array.isArray(viewDescriptors)) {\n            collector.error(( localize('requirearray', \"views must be an array\")));\n            return false;\n        }\n        for (const descriptor of viewDescriptors) {\n            if (typeof descriptor.id !== 'string') {\n                collector.error(( localize(\n                    'requirestring',\n                    \"property `{0}` is mandatory and must be of type `string`\",\n                    'id'\n                )));\n                return false;\n            }\n            if (typeof descriptor.name !== 'string') {\n                collector.error(( localize(\n                    'requirestring',\n                    \"property `{0}` is mandatory and must be of type `string`\",\n                    'name'\n                )));\n                return false;\n            }\n            if (descriptor.when && typeof descriptor.when !== 'string') {\n                collector.error(( localize(\n                    'optstring',\n                    \"property `{0}` can be omitted or must be of type `string`\",\n                    'when'\n                )));\n                return false;\n            }\n            if (descriptor.icon && typeof descriptor.icon !== 'string') {\n                collector.error(( localize(\n                    'optstring',\n                    \"property `{0}` can be omitted or must be of type `string`\",\n                    'icon'\n                )));\n                return false;\n            }\n            if (descriptor.contextualTitle && typeof descriptor.contextualTitle !== 'string') {\n                collector.error(( localize(\n                    'optstring',\n                    \"property `{0}` can be omitted or must be of type `string`\",\n                    'contextualTitle'\n                )));\n                return false;\n            }\n            if (descriptor.visibility && !this.convertInitialVisibility(descriptor.visibility)) {\n                collector.error(( localize(\n                    'optenum',\n                    \"property `{0}` can be omitted or must be one of {1}\",\n                    'visibility',\n                    ( Object.values(InitialVisibility)).join(', ')\n                )));\n                return false;\n            }\n        }\n        return true;\n    }\n    getViewContainer(value) {\n        switch (value) {\n            case 'explorer': return this.viewContainersRegistry.get(VIEWLET_ID$1);\n            case 'debug': return this.viewContainersRegistry.get(VIEWLET_ID$3);\n            case 'scm': return this.viewContainersRegistry.get(VIEWLET_ID$2);\n            case 'remote': return this.viewContainersRegistry.get(VIEWLET_ID);\n            default: return this.viewContainersRegistry.get(`workbench.view.extension.${value}`);\n        }\n    }\n    showCollapsed(container) {\n        switch (container.id) {\n            case VIEWLET_ID$1:\n            case VIEWLET_ID$2:\n            case VIEWLET_ID$3:\n                return true;\n        }\n        return false;\n    }\n};\nViewsExtensionHandler = ( __decorate([\n    ( __param(0, IInstantiationService)),\n    ( __param(1, ILogService))\n], ViewsExtensionHandler));\nconst workbenchRegistry = ( Registry.as(Extensions$2.Workbench));\nworkbenchRegistry.registerWorkbenchContribution(ViewsExtensionHandler, 1 );\nexport { viewsContainersContribution };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { ExtensionIdentifier } from 'monaco-editor/esm/vs/platform/extensions/common/extensions.js';\nimport { WebviewInput } from './webviewEditorInput.js';\nimport { IWebviewWorkbenchService } from './webviewWorkbenchService.js';\nlet WebviewEditorInputSerializer = class WebviewEditorInputSerializer {\n    static { this.ID = WebviewInput.typeId; }\n    constructor(_webviewWorkbenchService) {\n        this._webviewWorkbenchService = _webviewWorkbenchService;\n    }\n    canSerialize(input) {\n        return this._webviewWorkbenchService.shouldPersist(input);\n    }\n    serialize(input) {\n        if (!this._webviewWorkbenchService.shouldPersist(input)) {\n            return undefined;\n        }\n        const data = this.toJson(input);\n        try {\n            return JSON.stringify(data);\n        }\n        catch {\n            return undefined;\n        }\n    }\n    deserialize(_instantiationService, serializedEditorInput) {\n        const data = this.fromJson(JSON.parse(serializedEditorInput));\n        return this._webviewWorkbenchService.openRevivedWebview({\n            webviewInitInfo: {\n                providedViewType: data.providedId,\n                origin: data.origin,\n                title: data.title,\n                options: data.webviewOptions,\n                contentOptions: data.contentOptions,\n                extension: data.extension,\n            },\n            viewType: data.viewType,\n            title: data.title,\n            iconPath: data.iconPath,\n            state: data.state,\n            group: data.group\n        });\n    }\n    fromJson(data) {\n        return {\n            ...data,\n            extension: reviveWebviewExtensionDescription(data.extensionId, data.extensionLocation),\n            iconPath: reviveIconPath(data.iconPath),\n            state: reviveState(data.state),\n            webviewOptions: restoreWebviewOptions(data.options),\n            contentOptions: restoreWebviewContentOptions(data.options),\n        };\n    }\n    toJson(input) {\n        return {\n            origin: input.webview.origin,\n            viewType: input.viewType,\n            providedId: input.providedId,\n            title: input.getName(),\n            options: { ...input.webview.options, ...input.webview.contentOptions },\n            extensionLocation: input.extension?.location,\n            extensionId: input.extension?.id.value,\n            state: input.webview.state,\n            iconPath: input.iconPath ? { light: input.iconPath.light, dark: input.iconPath.dark, } : undefined,\n            group: input.group\n        };\n    }\n};\nWebviewEditorInputSerializer = ( __decorate([\n    ( __param(0, IWebviewWorkbenchService))\n], WebviewEditorInputSerializer));\nfunction reviveWebviewExtensionDescription(extensionId, extensionLocation) {\n    if (!extensionId) {\n        return undefined;\n    }\n    const location = reviveUri(extensionLocation);\n    if (!location) {\n        return undefined;\n    }\n    return {\n        id: ( new ExtensionIdentifier(extensionId)),\n        location,\n    };\n}\nfunction reviveIconPath(data) {\n    if (!data) {\n        return undefined;\n    }\n    const light = reviveUri(data.light);\n    const dark = reviveUri(data.dark);\n    return light && dark ? { light, dark } : undefined;\n}\nfunction reviveUri(data) {\n    if (!data) {\n        return undefined;\n    }\n    try {\n        if (typeof data === 'string') {\n            return ( URI.parse(data));\n        }\n        return ( URI.from(data));\n    }\n    catch {\n        return undefined;\n    }\n}\nfunction reviveState(state) {\n    return typeof state === 'string' ? state : undefined;\n}\nfunction restoreWebviewOptions(options) {\n    return options;\n}\nfunction restoreWebviewContentOptions(options) {\n    return {\n        ...options,\n        localResourceRoots: options.localResourceRoots?.map(uri => reviveUri(uri)),\n    };\n}\nexport { WebviewEditorInputSerializer, restoreWebviewContentOptions, restoreWebviewOptions, reviveWebviewExtensionDescription };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { CustomEditorInput } from './customEditorInput.js';\nimport { ICustomEditorService } from '../common/customEditor.js';\nimport { NotebookEditorInput } from '../../../../../../override/vs/workbench/contrib/notebook/common/notebookEditorInput.js';\nimport { IWebviewService } from '../../webview/browser/webview.js';\nimport { WebviewEditorInputSerializer, restoreWebviewOptions, restoreWebviewContentOptions, reviveWebviewExtensionDescription } from '../../webviewPanel/browser/webviewEditorInputSerializer.js';\nimport { IWorkingCopyBackupService } from '../../../services/workingCopy/common/workingCopyBackup.js';\nimport { IWorkingCopyEditorService } from '../../../services/workingCopy/common/workingCopyEditorService.js';\n(class CustomEditorInputSerializer extends WebviewEditorInputSerializer {\n    static { this.ID = CustomEditorInput.typeId; }\n    constructor(webviewWorkbenchService, _instantiationService, _webviewService) {\n        super(webviewWorkbenchService);\n        this._instantiationService = _instantiationService;\n        this._webviewService = _webviewService;\n    }\n    serialize(input) {\n        const dirty = input.isDirty();\n        const data = {\n            ...this.toJson(input),\n            editorResource: input.resource.toJSON(),\n            dirty,\n            backupId: dirty ? input.backupId : undefined,\n        };\n        try {\n            return JSON.stringify(data);\n        }\n        catch {\n            return undefined;\n        }\n    }\n    fromJson(data) {\n        return {\n            ...super.fromJson(data),\n            editorResource: ( URI.from(data.editorResource)),\n            dirty: data.dirty,\n        };\n    }\n    deserialize(_instantiationService, serializedEditorInput) {\n        const data = this.fromJson(JSON.parse(serializedEditorInput));\n        const webview = reviveWebview(this._webviewService, data);\n        const customInput = this._instantiationService.createInstance(CustomEditorInput, { resource: data.editorResource, viewType: data.viewType }, webview, { startsDirty: data.dirty, backupId: data.backupId });\n        if (typeof data.group === 'number') {\n            customInput.updateGroup(data.group);\n        }\n        return customInput;\n    }\n});\nfunction reviveWebview(webviewService, data) {\n    const webview = webviewService.createWebviewOverlay({\n        providedViewType: data.viewType,\n        origin: data.origin,\n        title: undefined,\n        options: {\n            purpose: \"customEditor\" ,\n            enableFindWidget: data.webviewOptions.enableFindWidget,\n            retainContextWhenHidden: data.webviewOptions.retainContextWhenHidden,\n        },\n        contentOptions: data.contentOptions,\n        extension: data.extension,\n    });\n    webview.state = data.state;\n    return webview;\n}\nlet ComplexCustomWorkingCopyEditorHandler = class ComplexCustomWorkingCopyEditorHandler extends Disposable {\n    constructor(_instantiationService, _workingCopyEditorService, _workingCopyBackupService, _webviewService, _customEditorService\n    ) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._workingCopyBackupService = _workingCopyBackupService;\n        this._webviewService = _webviewService;\n        this._register(_workingCopyEditorService.registerHandler(this));\n    }\n    handles(workingCopy) {\n        return workingCopy.resource.scheme === Schemas.vscodeCustomEditor;\n    }\n    isOpen(workingCopy, editor) {\n        if (!this.handles(workingCopy)) {\n            return false;\n        }\n        if (workingCopy.resource.authority === 'jupyter-notebook-ipynb' && editor instanceof NotebookEditorInput) {\n            try {\n                const data = JSON.parse(workingCopy.resource.query);\n                const workingCopyResource = ( URI.from(data));\n                return isEqual(workingCopyResource, editor.resource);\n            }\n            catch {\n                return false;\n            }\n        }\n        if (!(editor instanceof CustomEditorInput)) {\n            return false;\n        }\n        if (workingCopy.resource.authority !== editor.viewType.replace(/[^a-z0-9\\-_]/gi, '-').toLowerCase()) {\n            return false;\n        }\n        try {\n            const data = JSON.parse(workingCopy.resource.query);\n            const workingCopyResource = ( URI.from(data));\n            return isEqual(workingCopyResource, editor.resource);\n        }\n        catch {\n            return false;\n        }\n    }\n    async createEditor(workingCopy) {\n        const backup = await this._workingCopyBackupService.resolve(workingCopy);\n        if (!backup?.meta) {\n            throw new Error(`No backup found for custom editor: ${workingCopy.resource}`);\n        }\n        const backupData = backup.meta;\n        const extension = reviveWebviewExtensionDescription(backupData.extension?.id, backupData.extension?.location);\n        const webview = reviveWebview(this._webviewService, {\n            viewType: backupData.viewType,\n            origin: backupData.webview.origin,\n            webviewOptions: restoreWebviewOptions(backupData.webview.options),\n            contentOptions: restoreWebviewContentOptions(backupData.webview.options),\n            state: backupData.webview.state,\n            extension,\n        });\n        const editor = this._instantiationService.createInstance(CustomEditorInput, { resource: URI.revive(backupData.editorResource), viewType: backupData.viewType }, webview, { backupId: backupData.backupId });\n        editor.updateGroup(0);\n        return editor;\n    }\n};\nComplexCustomWorkingCopyEditorHandler = ( __decorate([\n    ( __param(0, IInstantiationService)),\n    ( __param(1, IWorkingCopyEditorService)),\n    ( __param(2, IWorkingCopyBackupService)),\n    ( __param(3, IWebviewService)),\n    ( __param(4, ICustomEditorService))\n], ComplexCustomWorkingCopyEditorHandler));\nexport { ComplexCustomWorkingCopyEditorHandler };\n","import { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { EditorPaneDescriptor } from '../../../browser/editor.js';\nimport { Extensions } from '../../../common/contributions.js';\nimport { EditorExtensions } from '../../../common/editor.js';\nimport { ComplexCustomWorkingCopyEditorHandler } from './customEditorInputFactory.js';\nimport { WebviewEditor } from '../../webviewPanel/browser/webviewEditor.js';\nimport { CustomEditorInput } from './customEditorInput.js';\n( Registry.as(EditorExtensions.EditorPane))\n    .registerEditorPane(EditorPaneDescriptor.create(WebviewEditor, WebviewEditor.ID, 'Webview Editor'), [\n    ( new SyncDescriptor(CustomEditorInput))\n]);\n( Registry.as(Extensions.Workbench))\n    .registerWorkbenchContribution(ComplexCustomWorkingCopyEditorHandler, 1 );\n","import { EditorContextKeys } from 'monaco-editor/esm/vs/editor/common/editorContextKeys.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { Action2, MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nimport { KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED, IWebviewService } from '../../webview/browser/webview.js';\nimport { WebviewEditor } from './webviewEditor.js';\nimport { WebviewInput } from './webviewEditorInput.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nconst webviewActiveContextKeyExpr = ( ContextKeyExpr.and(( ContextKeyExpr.equals('activeEditor', WebviewEditor.ID)), ( EditorContextKeys.focus.toNegated() )));\nclass ShowWebViewEditorFindWidgetAction extends Action2 {\n    static { this.ID = 'editor.action.webvieweditor.showFind'; }\n    static { this.LABEL = ( nls.localize('editor.action.webvieweditor.showFind', \"Show find\")); }\n    constructor() {\n        super({\n            id: ShowWebViewEditorFindWidgetAction.ID,\n            title: ShowWebViewEditorFindWidgetAction.LABEL,\n            keybinding: {\n                when: ( ContextKeyExpr.and(\n                    webviewActiveContextKeyExpr,\n                    KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED\n                )),\n                primary: 2048  | 36 ,\n                weight: 100\n            }\n        });\n    }\n    run(accessor) {\n        getActiveWebviewEditor(accessor)?.showFind();\n    }\n}\nclass HideWebViewEditorFindCommand extends Action2 {\n    static { this.ID = 'editor.action.webvieweditor.hideFind'; }\n    static { this.LABEL = ( nls.localize('editor.action.webvieweditor.hideFind', \"Stop find\")); }\n    constructor() {\n        super({\n            id: HideWebViewEditorFindCommand.ID,\n            title: HideWebViewEditorFindCommand.LABEL,\n            keybinding: {\n                when: ( ContextKeyExpr.and(\n                    webviewActiveContextKeyExpr,\n                    KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE\n                )),\n                primary: 9 ,\n                weight: 100\n            }\n        });\n    }\n    run(accessor) {\n        getActiveWebviewEditor(accessor)?.hideFind();\n    }\n}\nclass WebViewEditorFindNextCommand extends Action2 {\n    static { this.ID = 'editor.action.webvieweditor.findNext'; }\n    static { this.LABEL = ( nls.localize('editor.action.webvieweditor.findNext', 'Find next')); }\n    constructor() {\n        super({\n            id: WebViewEditorFindNextCommand.ID,\n            title: WebViewEditorFindNextCommand.LABEL,\n            keybinding: {\n                when: ( ContextKeyExpr.and(\n                    webviewActiveContextKeyExpr,\n                    KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED\n                )),\n                primary: 3 ,\n                weight: 100\n            }\n        });\n    }\n    run(accessor) {\n        getActiveWebviewEditor(accessor)?.runFindAction(false);\n    }\n}\nclass WebViewEditorFindPreviousCommand extends Action2 {\n    static { this.ID = 'editor.action.webvieweditor.findPrevious'; }\n    static { this.LABEL = ( nls.localize('editor.action.webvieweditor.findPrevious', 'Find previous')); }\n    constructor() {\n        super({\n            id: WebViewEditorFindPreviousCommand.ID,\n            title: WebViewEditorFindPreviousCommand.LABEL,\n            keybinding: {\n                when: ( ContextKeyExpr.and(\n                    webviewActiveContextKeyExpr,\n                    KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED\n                )),\n                primary: 1024  | 3 ,\n                weight: 100\n            }\n        });\n    }\n    run(accessor) {\n        getActiveWebviewEditor(accessor)?.runFindAction(true);\n    }\n}\nclass ReloadWebviewAction extends Action2 {\n    static { this.ID = 'workbench.action.webview.reloadWebviewAction'; }\n    static { this.LABEL = ( nls.localize('refreshWebviewLabel', \"Reload Webviews\")); }\n    constructor() {\n        super({\n            id: ReloadWebviewAction.ID,\n            title: { value: ReloadWebviewAction.LABEL, original: 'Reload Webviews' },\n            category: Categories.Developer,\n            menu: [{\n                    id: MenuId.CommandPalette\n                }]\n        });\n    }\n    async run(accessor) {\n        const webviewService = accessor.get(IWebviewService);\n        for (const webview of webviewService.webviews) {\n            webview.reload();\n        }\n    }\n}\nfunction getActiveWebviewEditor(accessor) {\n    const editorService = accessor.get(IEditorService);\n    const activeEditor = editorService.activeEditor;\n    return activeEditor instanceof WebviewInput ? activeEditor.webview : undefined;\n}\nexport { HideWebViewEditorFindCommand, ReloadWebviewAction, ShowWebViewEditorFindWidgetAction, WebViewEditorFindNextCommand, WebViewEditorFindPreviousCommand };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { registerAction2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { EditorPaneDescriptor } from '../../../browser/editor.js';\nimport { Extensions } from '../../../common/contributions.js';\nimport { EditorExtensions } from '../../../common/editor.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { ShowWebViewEditorFindWidgetAction, HideWebViewEditorFindCommand, WebViewEditorFindNextCommand, WebViewEditorFindPreviousCommand, ReloadWebviewAction } from './webviewCommands.js';\nimport { WebviewEditor } from './webviewEditor.js';\nimport { WebviewInput } from './webviewEditorInput.js';\n(( Registry.as(EditorExtensions.EditorPane))).registerEditorPane(EditorPaneDescriptor.create(WebviewEditor, WebviewEditor.ID, ( localize('webview.editor.label', \"webview editor\"))), [( new SyncDescriptor(WebviewInput))]);\nlet WebviewPanelContribution = class WebviewPanelContribution extends Disposable {\n    constructor(editorGroupService) {\n        super();\n        this.editorGroupService = editorGroupService;\n        this.editorGroupService.whenReady.then(() => this.editorGroupService.groups.forEach(group => {\n            this.registerGroupListener(group);\n        }));\n        this._register(this.editorGroupService.onDidAddGroup(group => this.registerGroupListener(group)));\n    }\n    registerGroupListener(group) {\n        const listener = group.onWillOpenEditor(e => this.onEditorOpening(e.editor, group));\n        Event.once(group.onWillDispose)(() => {\n            listener.dispose();\n        });\n    }\n    onEditorOpening(editor, group) {\n        if (!(editor instanceof WebviewInput) || editor.typeId !== WebviewInput.typeId) {\n            return undefined;\n        }\n        if (group.contains(editor)) {\n            return undefined;\n        }\n        let previousGroup;\n        const groups = this.editorGroupService.groups;\n        for (const group of groups) {\n            if (group.contains(editor)) {\n                previousGroup = group;\n                break;\n            }\n        }\n        if (!previousGroup) {\n            return undefined;\n        }\n        previousGroup.closeEditor(editor);\n    }\n};\nWebviewPanelContribution = ( __decorate([\n    ( __param(0, IEditorGroupsService))\n], WebviewPanelContribution));\nconst workbenchContributionsRegistry = ( Registry.as(Extensions.Workbench));\nworkbenchContributionsRegistry.registerWorkbenchContribution(WebviewPanelContribution, 1 );\nregisterAction2(ShowWebViewEditorFindWidgetAction);\nregisterAction2(HideWebViewEditorFindCommand);\nregisterAction2(WebViewEditorFindNextCommand);\nregisterAction2(WebViewEditorFindPreviousCommand);\nregisterAction2(ReloadWebviewAction);\n","import { Extensions } from 'monaco-editor/esm/vs/platform/configuration/common/configurationRegistry.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { externalUriOpenersConfigurationNode } from './configuration.js';\n( Registry.as(Extensions.Configuration))\n    .registerConfiguration(externalUriOpenersConfigurationNode);\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \"@keyframes wiggle{0%{transform:rotate(0) scale(1)}15%,45%{transform:rotate(.04turn) scale(1.1)}30%,60%{transform:rotate(-.04turn) scale(1.2)}to{transform:rotate(0) scale(1)}}.monaco-workbench .statusbar DIV#status\\\\.languageStatus A>SPAN.codicon.wiggle{animation-duration:.8s;animation-iteration-count:1;animation-name:wiggle}@keyframes flash{0%{background-color:initial}50%{background-color:var(--vscode-statusBarItem-prominentBackground)}to{background-color:initial}}.monaco-workbench .statusbar DIV#status\\\\.languageStatus.flash A{animation-duration:.8s;animation-iteration-count:1;animation-name:flash}.monaco-workbench .hover-language-status{display:flex;padding:4px 8px}.monaco-workbench .hover-language-status:not(:last-child){border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench .hover-language-status>.severity{display:none;flex:1;margin:auto;padding-right:8px}.monaco-workbench .hover-language-status>.severity.sev3{color:var(--vscode-notificationsErrorIcon-foreground)}.monaco-workbench .hover-language-status>.severity.sev2{color:var(--vscode-notificationsInfoIcon-foreground)}.monaco-workbench .hover-language-status>.severity.show{display:inherit}.monaco-workbench .hover-language-status>.element{display:flex;flex-grow:100;justify-content:space-between;vertical-align:middle}.monaco-workbench .hover-language-status>.element>.left>.detail:not(:empty):before{content:\\\"\\\\2013\\\";opacity:.6;padding:0 4px}.monaco-workbench .hover-language-status>.element>.left>.label:empty{display:none}.monaco-workbench .hover-language-status>.element .left{margin:auto 0}.monaco-workbench .hover-language-status>.element .right{display:flex;margin:auto 0}.monaco-workbench .hover-language-status>.element .right:not(:empty){padding-left:16px}.monaco-workbench .hover-language-status>.element .right .monaco-link{margin:auto 0;white-space:nowrap}.monaco-workbench .hover-language-status>.element .right .monaco-action-bar:not(:first-child){padding-left:8px}\";\nn(css,{});\nexport { css, css as default };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/languageStatus.css.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { renderLabelWithIcons } from 'monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabels.js';\nimport { DisposableStore, dispose, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport Severity from 'monaco-editor/esm/vs/base/common/severity.js';\nimport { getCodeEditor } from 'monaco-editor/esm/vs/editor/browser/editorBrowser.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { themeColorFromId } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { ThemeIcon } from 'monaco-editor/esm/vs/base/common/themables.js';\nimport { Extensions } from '../../../common/contributions.js';\nimport { STATUS_BAR_WARNING_ITEM_FOREGROUND, STATUS_BAR_WARNING_ITEM_BACKGROUND, STATUS_BAR_ERROR_ITEM_FOREGROUND, STATUS_BAR_ERROR_ITEM_BACKGROUND } from '../../../common/theme.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ILanguageStatusService } from '../../../services/languageStatus/common/languageStatusService.js';\nimport { ShowTooltipCommand, IStatusbarService } from '../../../services/statusbar/browser/statusbar.js';\nimport { parseLinkedText } from 'monaco-editor/esm/vs/base/common/linkedText.js';\nimport { Link } from 'monaco-editor/esm/vs/platform/opener/browser/link.js';\nimport { IOpenerService } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nimport { MarkdownString } from 'monaco-editor/esm/vs/base/common/htmlContent.js';\nimport { ActionBar } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js';\nimport { Action } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { equals } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { registerAction2, Action2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nclass LanguageStatusViewModel {\n    constructor(combined, dedicated) {\n        this.combined = combined;\n        this.dedicated = dedicated;\n    }\n    isEqual(other) {\n        return equals(this.combined, other.combined) && equals(this.dedicated, other.dedicated);\n    }\n}\nlet StoredCounter = class StoredCounter {\n    constructor(_storageService, _key) {\n        this._storageService = _storageService;\n        this._key = _key;\n    }\n    get value() {\n        return this._storageService.getNumber(this._key, 0 , 0);\n    }\n    increment() {\n        const n = this.value + 1;\n        this._storageService.store(this._key, n, 0 , 1 );\n        return n;\n    }\n};\nStoredCounter = ( __decorate([\n    ( __param(0, IStorageService))\n], StoredCounter));\nlet EditorStatusContribution = class EditorStatusContribution {\n    static { this._id = 'status.languageStatus'; }\n    static { this._keyDedicatedItems = 'languageStatus.dedicated'; }\n    constructor(_languageStatusService, _statusBarService, _editorService, _openerService, _storageService) {\n        this._languageStatusService = _languageStatusService;\n        this._statusBarService = _statusBarService;\n        this._editorService = _editorService;\n        this._openerService = _openerService;\n        this._storageService = _storageService;\n        this._disposables = ( new DisposableStore());\n        this._dedicated = ( new Set());\n        this._dedicatedEntries = ( new Map());\n        this._renderDisposables = ( new DisposableStore());\n        _storageService.onDidChangeValue(this._handleStorageChange, this, this._disposables);\n        this._restoreState();\n        this._interactionCounter = ( new StoredCounter(_storageService, 'languageStatus.interactCount'));\n        _languageStatusService.onDidChange(this._update, this, this._disposables);\n        _editorService.onDidActiveEditorChange(this._update, this, this._disposables);\n        this._update();\n        _statusBarService.onDidChangeEntryVisibility(e => {\n            if (!e.visible && ( this._dedicated.has(e.id))) {\n                this._dedicated.delete(e.id);\n                this._update();\n                this._storeState();\n            }\n        }, this._disposables);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._combinedEntry?.dispose();\n        dispose(( this._dedicatedEntries.values()));\n        this._renderDisposables.dispose();\n    }\n    _handleStorageChange(e) {\n        if (e.key !== EditorStatusContribution._keyDedicatedItems) {\n            return;\n        }\n        this._restoreState();\n        this._update();\n    }\n    _restoreState() {\n        const raw = this._storageService.get(EditorStatusContribution._keyDedicatedItems, 0 , '[]');\n        try {\n            const ids = JSON.parse(raw);\n            this._dedicated = ( new Set(ids));\n        }\n        catch {\n            this._dedicated.clear();\n        }\n    }\n    _storeState() {\n        if (this._dedicated.size === 0) {\n            this._storageService.remove(EditorStatusContribution._keyDedicatedItems, 0 );\n        }\n        else {\n            const raw = JSON.stringify(Array.from(( this._dedicated.keys())));\n            this._storageService.store(EditorStatusContribution._keyDedicatedItems, raw, 0 , 0 );\n        }\n    }\n    _createViewModel(editor) {\n        if (!editor?.hasModel()) {\n            return ( new LanguageStatusViewModel([], []));\n        }\n        const all = this._languageStatusService.getLanguageStatus(editor.getModel());\n        const combined = [];\n        const dedicated = [];\n        for (const item of all) {\n            if (( this._dedicated.has(item.id))) {\n                dedicated.push(item);\n            }\n            combined.push(item);\n        }\n        return ( new LanguageStatusViewModel(combined, dedicated));\n    }\n    _update() {\n        const editor = getCodeEditor(this._editorService.activeTextEditorControl);\n        const model = this._createViewModel(editor);\n        if (this._model?.isEqual(model)) {\n            return;\n        }\n        this._renderDisposables.clear();\n        this._model = model;\n        editor?.onDidChangeModelLanguage(this._update, this, this._renderDisposables);\n        if (model.combined.length === 0) {\n            this._combinedEntry?.dispose();\n            this._combinedEntry = undefined;\n        }\n        else {\n            const [first] = model.combined;\n            const showSeverity = first.severity >= Severity.Warning;\n            const text = EditorStatusContribution._severityToComboCodicon(first.severity);\n            let isOneBusy = false;\n            const ariaLabels = [];\n            const element = document.createElement('div');\n            for (const status of model.combined) {\n                const isPinned = model.dedicated.includes(status);\n                element.appendChild(this._renderStatus(status, showSeverity, isPinned, this._renderDisposables));\n                ariaLabels.push(this._asAriaLabel(status));\n                isOneBusy = isOneBusy || (!isPinned && status.busy);\n            }\n            const props = {\n                name: ( localize('langStatus.name', \"Editor Language Status\")),\n                ariaLabel: ( localize(\n                    'langStatus.aria',\n                    \"Editor Language Status: {0}\",\n                    ariaLabels.join(', next: ')\n                )),\n                tooltip: element,\n                command: ShowTooltipCommand,\n                text: isOneBusy ? `${text}\\u00A0\\u00A0$(sync~spin)` : text,\n            };\n            if (!this._combinedEntry) {\n                this._combinedEntry = this._statusBarService.addEntry(props, EditorStatusContribution._id, 1 , { id: 'status.editor.mode', alignment: 0 , compact: true });\n            }\n            else {\n                this._combinedEntry.update(props);\n            }\n            const userHasInteractedWithStatus = this._interactionCounter.value >= 3;\n            const node = document.querySelector('.monaco-workbench .statusbar DIV#status\\\\.languageStatus A>SPAN.codicon');\n            const container = document.querySelector('.monaco-workbench .statusbar DIV#status\\\\.languageStatus');\n            if (node instanceof HTMLElement && container) {\n                const _wiggle = 'wiggle';\n                const _flash = 'flash';\n                if (!isOneBusy) {\n                    node.classList.toggle(_wiggle, showSeverity || !userHasInteractedWithStatus);\n                    this._renderDisposables.add(dom.addDisposableListener(node, 'animationend', _e => node.classList.remove(_wiggle)));\n                    container.classList.toggle(_flash, showSeverity);\n                    this._renderDisposables.add(dom.addDisposableListener(container, 'animationend', _e => container.classList.remove(_flash)));\n                }\n                else {\n                    node.classList.remove(_wiggle);\n                    container.classList.remove(_flash);\n                }\n            }\n            if (!userHasInteractedWithStatus) {\n                const hoverTarget = document.querySelector('.monaco-workbench .context-view');\n                if (hoverTarget instanceof HTMLElement) {\n                    const observer = ( new MutationObserver(() => {\n                        if (document.contains(element)) {\n                            this._interactionCounter.increment();\n                            observer.disconnect();\n                        }\n                    }));\n                    observer.observe(hoverTarget, { childList: true, subtree: true });\n                    this._renderDisposables.add(toDisposable(() => observer.disconnect()));\n                }\n            }\n        }\n        const newDedicatedEntries = ( new Map());\n        for (const status of model.dedicated) {\n            const props = EditorStatusContribution._asStatusbarEntry(status);\n            let entry = this._dedicatedEntries.get(status.id);\n            if (!entry) {\n                entry = this._statusBarService.addEntry(props, status.id, 1 , { id: 'status.editor.mode', alignment: 1  });\n            }\n            else {\n                entry.update(props);\n                this._dedicatedEntries.delete(status.id);\n            }\n            newDedicatedEntries.set(status.id, entry);\n        }\n        dispose(( this._dedicatedEntries.values()));\n        this._dedicatedEntries = newDedicatedEntries;\n    }\n    _renderStatus(status, showSeverity, isPinned, store) {\n        const parent = document.createElement('div');\n        parent.classList.add('hover-language-status');\n        const severity = document.createElement('div');\n        severity.classList.add('severity', `sev${status.severity}`);\n        severity.classList.toggle('show', showSeverity);\n        const severityText = EditorStatusContribution._severityToSingleCodicon(status.severity);\n        dom.append(severity, ...renderLabelWithIcons(severityText));\n        parent.appendChild(severity);\n        const element = document.createElement('div');\n        element.classList.add('element');\n        parent.appendChild(element);\n        const left = document.createElement('div');\n        left.classList.add('left');\n        element.appendChild(left);\n        const label = document.createElement('span');\n        label.classList.add('label');\n        dom.append(label, ...renderLabelWithIcons(status.busy ? `$(sync~spin)\\u00A0\\u00A0${status.label}` : status.label));\n        left.appendChild(label);\n        const detail = document.createElement('span');\n        detail.classList.add('detail');\n        this._renderTextPlus(detail, status.detail, store);\n        left.appendChild(detail);\n        const right = document.createElement('div');\n        right.classList.add('right');\n        element.appendChild(right);\n        const { command } = status;\n        if (command) {\n            store.add(( new Link(right, {\n                label: command.title,\n                title: command.tooltip,\n                href: ( ( URI.from({\n                    scheme: 'command', path: command.id, query: command.arguments && JSON.stringify(command.arguments)\n                })).toString())\n            }, undefined, this._openerService)));\n        }\n        const actionBar = ( new ActionBar(right, {}));\n        store.add(actionBar);\n        let action;\n        if (!isPinned) {\n            action = ( new Action('pin', ( localize('pin', \"Add to Status Bar\")), ThemeIcon.asClassName(Codicon.pin), true, () => {\n                this._dedicated.add(status.id);\n                this._statusBarService.updateEntryVisibility(status.id, true);\n                this._update();\n                this._storeState();\n            }));\n        }\n        else {\n            action = ( new Action('unpin', ( localize('unpin', \"Remove from Status Bar\")), ThemeIcon.asClassName(Codicon.pinned), true, () => {\n                this._dedicated.delete(status.id);\n                this._statusBarService.updateEntryVisibility(status.id, false);\n                this._update();\n                this._storeState();\n            }));\n        }\n        actionBar.push(action, { icon: true, label: false });\n        store.add(action);\n        return parent;\n    }\n    static _severityToComboCodicon(sev) {\n        switch (sev) {\n            case Severity.Error: return '$(bracket-error)';\n            case Severity.Warning: return '$(bracket-dot)';\n            default: return '$(bracket)';\n        }\n    }\n    static _severityToSingleCodicon(sev) {\n        switch (sev) {\n            case Severity.Error: return '$(error)';\n            case Severity.Warning: return '$(info)';\n            default: return '$(check)';\n        }\n    }\n    _renderTextPlus(target, text, store) {\n        for (const node of parseLinkedText(text).nodes) {\n            if (typeof node === 'string') {\n                const parts = renderLabelWithIcons(node);\n                dom.append(target, ...parts);\n            }\n            else {\n                store.add(( new Link(target, node, undefined, this._openerService)));\n            }\n        }\n    }\n    _asAriaLabel(status) {\n        if (status.accessibilityInfo) {\n            return status.accessibilityInfo.label;\n        }\n        else if (status.detail) {\n            return ( localize('aria.1', '{0}, {1}', status.label, status.detail));\n        }\n        else {\n            return ( localize('aria.2', '{0}', status.label));\n        }\n    }\n    static _asStatusbarEntry(item) {\n        let color;\n        let backgroundColor;\n        if (item.severity === Severity.Warning) {\n            color = themeColorFromId(STATUS_BAR_WARNING_ITEM_FOREGROUND);\n            backgroundColor = themeColorFromId(STATUS_BAR_WARNING_ITEM_BACKGROUND);\n        }\n        else if (item.severity === Severity.Error) {\n            color = themeColorFromId(STATUS_BAR_ERROR_ITEM_FOREGROUND);\n            backgroundColor = themeColorFromId(STATUS_BAR_ERROR_ITEM_BACKGROUND);\n        }\n        return {\n            name: ( localize('name.pattern', '{0} (Language Status)', item.name)),\n            text: item.busy ? `${item.label}\\u00A0\\u00A0$(sync~spin)` : item.label,\n            ariaLabel: item.accessibilityInfo?.label ?? item.label,\n            role: item.accessibilityInfo?.role,\n            tooltip: item.command?.tooltip || ( new MarkdownString(item.detail, { isTrusted: true, supportThemeIcons: true })),\n            color,\n            backgroundColor,\n            command: item.command\n        };\n    }\n};\nEditorStatusContribution = ( __decorate([\n    ( __param(0, ILanguageStatusService)),\n    ( __param(1, IStatusbarService)),\n    ( __param(2, IEditorService)),\n    ( __param(3, IOpenerService)),\n    ( __param(4, IStorageService))\n], EditorStatusContribution));\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(EditorStatusContribution, 3 );\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: 'editor.inlayHints.Reset',\n            title: {\n                value: ( localize('reset', 'Reset Language Status Interaction Counter')),\n                original: 'Reset Language Status Interaction Counter'\n            },\n            category: Categories.View,\n            f1: true\n        });\n    }\n    run(accessor) {\n        accessor.get(IStorageService).remove('languageStatus.interactCount', 0 );\n    }\n});\n","import { RawContextKey } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nconst NOTEBOOK_EDITOR_EDITABLE = ( new RawContextKey('notebookEditable', true));\nexport { NOTEBOOK_EDITOR_EDITABLE };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { getCodeEditor } from 'monaco-editor/esm/vs/editor/browser/editorBrowser.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { Extensions } from '../../../common/contributions.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IStatusbarService } from '../../../services/statusbar/browser/statusbar.js';\nimport { ILanguageDetectionService, LanguageDetectionLanguageEventSource } from '../../../services/languageDetection/common/languageDetectionWorkerService.js';\nimport { ThrottledDelayer } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { ILanguageService } from 'monaco-editor/esm/vs/editor/common/languages/language.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { registerAction2, Action2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { NOTEBOOK_EDITOR_EDITABLE } from '../../notebook/common/notebookContextKeys.js';\nimport { EditorContextKeys } from 'monaco-editor/esm/vs/editor/common/editorContextKeys.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nconst detectLanguageCommandId = 'editor.detectLanguage';\nlet LanguageDetectionStatusContribution = class LanguageDetectionStatusContribution {\n    static { this._id = 'status.languageDetectionStatus'; }\n    constructor(_languageDetectionService, _statusBarService, _configurationService, _editorService, _languageService, _keybindingService) {\n        this._languageDetectionService = _languageDetectionService;\n        this._statusBarService = _statusBarService;\n        this._configurationService = _configurationService;\n        this._editorService = _editorService;\n        this._languageService = _languageService;\n        this._keybindingService = _keybindingService;\n        this._disposables = ( new DisposableStore());\n        this._delayer = ( new ThrottledDelayer(1000));\n        this._renderDisposables = ( new DisposableStore());\n        _editorService.onDidActiveEditorChange(() => this._update(true), this, this._disposables);\n        this._update(false);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._delayer.dispose();\n        this._combinedEntry?.dispose();\n        this._renderDisposables.dispose();\n    }\n    _update(clear) {\n        if (clear) {\n            this._combinedEntry?.dispose();\n            this._combinedEntry = undefined;\n        }\n        this._delayer.trigger(() => this._doUpdate());\n    }\n    async _doUpdate() {\n        const editor = getCodeEditor(this._editorService.activeTextEditorControl);\n        this._renderDisposables.clear();\n        editor?.onDidChangeModelLanguage(() => this._update(true), this, this._renderDisposables);\n        editor?.onDidChangeModelContent(() => this._update(false), this, this._renderDisposables);\n        const editorModel = editor?.getModel();\n        const editorUri = editorModel?.uri;\n        const existingId = editorModel?.getLanguageId();\n        const enablementConfig = this._configurationService.getValue('workbench.editor.languageDetectionHints');\n        const enabled = typeof enablementConfig === 'object' && enablementConfig?.untitledEditors;\n        const disableLightbulb = !enabled || editorUri?.scheme !== Schemas.untitled || !existingId;\n        if (disableLightbulb || !editorUri) {\n            this._combinedEntry?.dispose();\n            this._combinedEntry = undefined;\n        }\n        else {\n            const lang = await this._languageDetectionService.detectLanguage(editorUri);\n            const skip = { 'jsonc': 'json' };\n            const existing = editorModel.getLanguageId();\n            if (lang && lang !== existing && skip[existing] !== lang) {\n                const detectedName = this._languageService.getLanguageName(lang) || lang;\n                let tooltip = ( localize('status.autoDetectLanguage', \"Accept Detected Language: {0}\", detectedName));\n                const keybinding = this._keybindingService.lookupKeybinding(detectLanguageCommandId);\n                const label = keybinding?.getLabel();\n                if (label) {\n                    tooltip += ` (${label})`;\n                }\n                const props = {\n                    name: ( localize('langDetection.name', \"Language Detection\")),\n                    ariaLabel: ( localize('langDetection.aria', \"Change to Detected Language: {0}\", lang)),\n                    tooltip,\n                    command: detectLanguageCommandId,\n                    text: '$(lightbulb-autofix)',\n                };\n                if (!this._combinedEntry) {\n                    this._combinedEntry = this._statusBarService.addEntry(props, LanguageDetectionStatusContribution._id, 1 , { id: 'status.editor.mode', alignment: 1 , compact: true });\n                }\n                else {\n                    this._combinedEntry.update(props);\n                }\n            }\n            else {\n                this._combinedEntry?.dispose();\n                this._combinedEntry = undefined;\n            }\n        }\n    }\n};\nLanguageDetectionStatusContribution = ( __decorate([\n    ( __param(0, ILanguageDetectionService)),\n    ( __param(1, IStatusbarService)),\n    ( __param(2, IConfigurationService)),\n    ( __param(3, IEditorService)),\n    ( __param(4, ILanguageService)),\n    ( __param(5, IKeybindingService))\n], LanguageDetectionStatusContribution));\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(LanguageDetectionStatusContribution, 3 );\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: detectLanguageCommandId,\n            title: { value: ( localize('detectlang', 'Detect Language from Content')), original: 'Detect Language from Content' },\n            f1: true,\n            precondition: ( ContextKeyExpr.and(( NOTEBOOK_EDITOR_EDITABLE.toNegated()), EditorContextKeys.editorTextFocus)),\n            keybinding: { primary: 34  | 512  | 1024 , weight: 200  }\n        });\n    }\n    async run(accessor) {\n        const editorService = accessor.get(IEditorService);\n        const languageDetectionService = accessor.get(ILanguageDetectionService);\n        const editor = getCodeEditor(editorService.activeTextEditorControl);\n        const notificationService = accessor.get(INotificationService);\n        const editorUri = editor?.getModel()?.uri;\n        if (editorUri) {\n            const lang = await languageDetectionService.detectLanguage(editorUri);\n            if (lang) {\n                editor.getModel()?.setLanguage(lang, LanguageDetectionLanguageEventSource);\n            }\n            else {\n                notificationService.warn(( localize('noDetection', \"Unable to detect editor language\")));\n            }\n        }\n    }\n});\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport { ITextFileService } from '../../../../services/textfile/common/textfiles.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { distinct, coalesce } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { IHostService } from '../../../../services/host/browser/host.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { RunOnceWorker } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { ICodeEditorService } from 'monaco-editor/esm/vs/editor/browser/services/codeEditorService.js';\nimport { IFilesConfigurationService } from '../../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { FILE_EDITOR_INPUT_ID } from '../../common/files.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { UntitledTextEditorInput } from '../../../../services/untitled/common/untitledTextEditorInput.js';\nimport { IWorkingCopyEditorService } from '../../../../services/workingCopy/common/workingCopyEditorService.js';\nimport { DEFAULT_EDITOR_ASSOCIATION } from '../../../../common/editor.js';\nlet TextFileEditorTracker = class TextFileEditorTracker extends Disposable {\n    constructor(editorService, textFileService, lifecycleService, hostService, codeEditorService, filesConfigurationService, workingCopyEditorService) {\n        super();\n        this.editorService = editorService;\n        this.textFileService = textFileService;\n        this.lifecycleService = lifecycleService;\n        this.hostService = hostService;\n        this.codeEditorService = codeEditorService;\n        this.filesConfigurationService = filesConfigurationService;\n        this.workingCopyEditorService = workingCopyEditorService;\n        this.ensureDirtyFilesAreOpenedWorker = this._register(( new RunOnceWorker(\n            units => this.ensureDirtyTextFilesAreOpened(units),\n            this.getDirtyTextFileTrackerDelay()\n        )));\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.textFileService.files.onDidChangeDirty(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n        this._register(this.textFileService.files.onDidSaveError(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n        this._register(this.textFileService.untitled.onDidChangeDirty(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n        this._register(this.hostService.onDidChangeFocus(hasFocus => hasFocus ? this.reloadVisibleTextFileEditors() : undefined));\n        this.lifecycleService.onDidShutdown(() => this.dispose());\n    }\n    getDirtyTextFileTrackerDelay() {\n        return 800;\n    }\n    ensureDirtyTextFilesAreOpened(resources) {\n        this.doEnsureDirtyTextFilesAreOpened(distinct(resources.filter(resource => {\n            if (!this.textFileService.isDirty(resource)) {\n                return false;\n            }\n            const fileModel = this.textFileService.files.get(resource);\n            if (fileModel?.hasState(2 )) {\n                return false;\n            }\n            if (resource.scheme !== Schemas.untitled && this.filesConfigurationService.getAutoSaveMode() === 1  && !fileModel?.hasState(5 )) {\n                return false;\n            }\n            if (this.editorService.isOpened({ resource, typeId: resource.scheme === Schemas.untitled ? UntitledTextEditorInput.ID : FILE_EDITOR_INPUT_ID, editorId: DEFAULT_EDITOR_ASSOCIATION.id })) {\n                return false;\n            }\n            const model = fileModel ?? this.textFileService.untitled.get(resource);\n            if (model && this.workingCopyEditorService.findEditor(model)) {\n                return false;\n            }\n            return true;\n        }), resource => ( resource.toString())));\n    }\n    doEnsureDirtyTextFilesAreOpened(resources) {\n        if (!resources.length) {\n            return;\n        }\n        this.editorService.openEditors(( resources.map(resource => ({\n            resource,\n            options: { inactive: true, pinned: true, preserveFocus: true }\n        }))));\n    }\n    reloadVisibleTextFileEditors() {\n        distinct(coalesce(( this.codeEditorService.listCodeEditors()\n            .map(codeEditor => {\n            const resource = codeEditor.getModel()?.uri;\n            if (!resource) {\n                return undefined;\n            }\n            const model = this.textFileService.files.get(resource);\n            if (!model || model.isDirty() || !model.isResolved()) {\n                return undefined;\n            }\n            return model;\n        }))), model => ( model.resource.toString())).forEach(model => this.textFileService.files.resolve(model.resource, { reload: { async: true } }));\n    }\n};\nTextFileEditorTracker = ( __decorate([\n    ( __param(0, IEditorService)),\n    ( __param(1, ITextFileService)),\n    ( __param(2, ILifecycleService)),\n    ( __param(3, IHostService)),\n    ( __param(4, ICodeEditorService)),\n    ( __param(5, IFilesConfigurationService)),\n    ( __param(6, IWorkingCopyEditorService))\n], TextFileEditorTracker));\nexport { TextFileEditorTracker };\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { BaseBinaryResourceEditor } from '../../../../browser/parts/editor/binaryEditor.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { FileEditorInput } from './fileEditorInput.js';\nimport { BINARY_FILE_EDITOR_ID, BINARY_TEXT_FILE_MODE } from '../../common/files.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { EditorResolution } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport { IEditorResolverService } from '../../../../services/editor/common/editorResolverService.js';\nimport { isEditorInputWithOptions } from '../../../../common/editor.js';\nimport { DiffEditorInput } from '../../../../common/editor/diffEditorInput.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nlet BinaryFileEditor = class BinaryFileEditor extends BaseBinaryResourceEditor {\n    static { this.ID = BINARY_FILE_EDITOR_ID; }\n    constructor(telemetryService, themeService, editorResolverService, storageService, editorGroupService) {\n        super(BinaryFileEditor.ID, {\n            openInternal: (input, options) => this.openInternal(input, options)\n        }, telemetryService, themeService, storageService);\n        this.editorResolverService = editorResolverService;\n        this.editorGroupService = editorGroupService;\n    }\n    async openInternal(input, options) {\n        if (input instanceof FileEditorInput && this.group?.activeEditor) {\n            const activeEditor = this.group.activeEditor;\n            const untypedActiveEditor = activeEditor?.toUntyped();\n            if (!untypedActiveEditor) {\n                return;\n            }\n            let resolvedEditor = await this.editorResolverService.resolveEditor({\n                ...untypedActiveEditor,\n                options: {\n                    ...options,\n                    override: EditorResolution.PICK\n                }\n            }, this.group);\n            if (resolvedEditor === 2 ) {\n                resolvedEditor = undefined;\n            }\n            else if (resolvedEditor === 1 ) {\n                return;\n            }\n            if (isEditorInputWithOptions(resolvedEditor)) {\n                for (const editor of resolvedEditor.editor instanceof DiffEditorInput ? [resolvedEditor.editor.original, resolvedEditor.editor.modified] : [resolvedEditor.editor]) {\n                    if (editor instanceof FileEditorInput) {\n                        editor.setForceOpenAsText();\n                        editor.setPreferredLanguageId(BINARY_TEXT_FILE_MODE);\n                    }\n                }\n            }\n            await (this.group ?? this.editorGroupService.activeGroup).replaceEditors([{\n                    editor: activeEditor,\n                    replacement: resolvedEditor?.editor ?? input,\n                    options: {\n                        ...(resolvedEditor?.options ?? options)\n                    }\n                }]);\n        }\n    }\n    getTitle() {\n        return this.input ? this.input.getName() : ( localize('binaryFileEditor', \"Binary File Viewer\"));\n    }\n};\nBinaryFileEditor = ( __decorate([\n    ( __param(0, ITelemetryService)),\n    ( __param(1, IThemeService)),\n    ( __param(2, IEditorResolverService)),\n    ( __param(3, IStorageService)),\n    ( __param(4, IEditorGroupsService))\n], BinaryFileEditor));\nexport { BinaryFileEditor };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { Disposable, dispose, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { ResourceMap } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { Severity, NeverShowAgainScope, NotificationPriority, INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IOpenerService } from 'monaco-editor/esm/vs/platform/opener/common/opener.js';\nimport { isAbsolute } from 'monaco-editor/esm/vs/base/common/path.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IWorkbenchFileService } from '../../../services/files/common/files.js';\nlet WorkspaceWatcher = class WorkspaceWatcher extends Disposable {\n    constructor(fileService, configurationService, contextService, notificationService, openerService, uriIdentityService, hostService) {\n        super();\n        this.fileService = fileService;\n        this.configurationService = configurationService;\n        this.contextService = contextService;\n        this.notificationService = notificationService;\n        this.openerService = openerService;\n        this.uriIdentityService = uriIdentityService;\n        this.hostService = hostService;\n        this.watchedWorkspaces = ( new ResourceMap(resource => this.uriIdentityService.extUri.getComparisonKey(resource)));\n        this.registerListeners();\n        this.refresh();\n    }\n    registerListeners() {\n        this._register(this.contextService.onDidChangeWorkspaceFolders(e => this.onDidChangeWorkspaceFolders(e)));\n        this._register(this.contextService.onDidChangeWorkbenchState(() => this.onDidChangeWorkbenchState()));\n        this._register(this.configurationService.onDidChangeConfiguration(e => this.onDidChangeConfiguration(e)));\n        this._register(this.fileService.onDidWatchError(error => this.onDidWatchError(error)));\n    }\n    onDidChangeWorkspaceFolders(e) {\n        for (const removed of e.removed) {\n            this.unwatchWorkspace(removed);\n        }\n        for (const added of e.added) {\n            this.watchWorkspace(added);\n        }\n    }\n    onDidChangeWorkbenchState() {\n        this.refresh();\n    }\n    onDidChangeConfiguration(e) {\n        if (e.affectsConfiguration('files.watcherExclude') || e.affectsConfiguration('files.watcherInclude')) {\n            this.refresh();\n        }\n    }\n    onDidWatchError(error) {\n        const msg = ( error.toString());\n        if (msg.indexOf('ENOSPC') >= 0) {\n            this.notificationService.prompt(Severity.Warning, ( localize(\n                'enospcError',\n                \"Unable to watch for file changes in this large workspace folder. Please follow the instructions link to resolve this issue.\"\n            )), [{\n                    label: ( localize('learnMore', \"Instructions\")),\n                    run: () => this.openerService.open(( URI.parse('https://go.microsoft.com/fwlink/?linkid=867693')))\n                }], {\n                sticky: true,\n                neverShowAgain: { id: 'ignoreEnospcError', isSecondary: true, scope: NeverShowAgainScope.WORKSPACE }\n            });\n        }\n        else if (msg.indexOf('EUNKNOWN') >= 0) {\n            this.notificationService.prompt(Severity.Warning, ( localize(\n                'eshutdownError',\n                \"File changes watcher stopped unexpectedly. A reload of the window may enable the watcher again unless the workspace cannot be watched for file changes.\"\n            )), [{\n                    label: ( localize('reload', \"Reload\")),\n                    run: () => this.hostService.reload()\n                }], {\n                sticky: true,\n                priority: NotificationPriority.SILENT\n            });\n        }\n    }\n    watchWorkspace(workspace) {\n        const excludes = [];\n        const config = this.configurationService.getValue({ resource: workspace.uri });\n        if (config.files?.watcherExclude) {\n            for (const key in config.files.watcherExclude) {\n                if (config.files.watcherExclude[key] === true) {\n                    excludes.push(key);\n                }\n            }\n        }\n        const pathsToWatch = ( new ResourceMap(uri => this.uriIdentityService.extUri.getComparisonKey(uri)));\n        pathsToWatch.set(workspace.uri, workspace.uri);\n        if (config.files?.watcherInclude) {\n            for (const includePath of config.files.watcherInclude) {\n                if (!includePath) {\n                    continue;\n                }\n                if (isAbsolute(includePath)) {\n                    const candidate = URI.file(includePath).with({ scheme: workspace.uri.scheme });\n                    if (this.uriIdentityService.extUri.isEqualOrParent(candidate, workspace.uri)) {\n                        pathsToWatch.set(candidate, candidate);\n                    }\n                }\n                else {\n                    const candidate = workspace.toResource(includePath);\n                    pathsToWatch.set(candidate, candidate);\n                }\n            }\n        }\n        const disposables = ( new DisposableStore());\n        for (const [, pathToWatch] of pathsToWatch) {\n            disposables.add(this.fileService.watch(pathToWatch, { recursive: true, excludes }));\n        }\n        this.watchedWorkspaces.set(workspace.uri, disposables);\n    }\n    unwatchWorkspace(workspace) {\n        if (( this.watchedWorkspaces.has(workspace.uri))) {\n            dispose(this.watchedWorkspaces.get(workspace.uri));\n            this.watchedWorkspaces.delete(workspace.uri);\n        }\n    }\n    refresh() {\n        this.unwatchWorkspaces();\n        for (const folder of this.contextService.getWorkspace().folders) {\n            this.watchWorkspace(folder);\n        }\n    }\n    unwatchWorkspaces() {\n        for (const [, disposable] of this.watchedWorkspaces) {\n            disposable.dispose();\n        }\n        this.watchedWorkspaces.clear();\n    }\n    dispose() {\n        super.dispose();\n        this.unwatchWorkspaces();\n    }\n};\nWorkspaceWatcher = ( __decorate([\n    ( __param(0, IWorkbenchFileService)),\n    ( __param(1, IConfigurationService)),\n    ( __param(2, IWorkspaceContextService)),\n    ( __param(3, INotificationService)),\n    ( __param(4, IOpenerService)),\n    ( __param(5, IUriIdentityService)),\n    ( __param(6, IHostService))\n], WorkspaceWatcher));\nexport { WorkspaceWatcher };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { VIEWLET_ID } from './files.js';\nimport { ILifecycleService } from '../../../services/lifecycle/common/lifecycle.js';\nimport { Disposable, MutableDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { NumberBadge, IActivityService } from '../../../services/activity/common/activity.js';\nimport { IWorkingCopyService } from '../../../services/workingCopy/common/workingCopyService.js';\nimport { IFilesConfigurationService } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\nlet DirtyFilesIndicator = class DirtyFilesIndicator extends Disposable {\n    constructor(lifecycleService, activityService, workingCopyService, filesConfigurationService) {\n        super();\n        this.lifecycleService = lifecycleService;\n        this.activityService = activityService;\n        this.workingCopyService = workingCopyService;\n        this.filesConfigurationService = filesConfigurationService;\n        this.badgeHandle = this._register(( new MutableDisposable()));\n        this.lastKnownDirtyCount = 0;\n        this.updateActivityBadge();\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.workingCopyService.onDidChangeDirty(workingCopy => this.onWorkingCopyDidChangeDirty(workingCopy)));\n        this.lifecycleService.onDidShutdown(() => this.dispose());\n    }\n    onWorkingCopyDidChangeDirty(workingCopy) {\n        const gotDirty = workingCopy.isDirty();\n        if (gotDirty && !((workingCopy.capabilities & 2) ) && this.filesConfigurationService.getAutoSaveMode() === 1 ) {\n            return;\n        }\n        if (gotDirty || this.lastKnownDirtyCount > 0) {\n            this.updateActivityBadge();\n        }\n    }\n    updateActivityBadge() {\n        const dirtyCount = this.lastKnownDirtyCount = this.workingCopyService.dirtyCount;\n        if (dirtyCount > 0) {\n            this.badgeHandle.value = this.activityService.showViewContainerActivity(VIEWLET_ID, {\n                badge: ( new NumberBadge(dirtyCount, num => num === 1 ? ( nls.localize('dirtyFile', \"1 unsaved file\")) : ( nls.localize('dirtyFiles', \"{0} unsaved files\", dirtyCount)))),\n                clazz: 'explorer-viewlet-label'\n            });\n        }\n        else {\n            this.badgeHandle.clear();\n        }\n    }\n};\nDirtyFilesIndicator = ( __decorate([\n    ( __param(0, ILifecycleService)),\n    ( __param(1, IActivityService)),\n    ( __param(2, IWorkingCopyService)),\n    ( __param(3, IFilesConfigurationService))\n], DirtyFilesIndicator));\nexport { DirtyFilesIndicator };\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { ITextEditorService } from '../../../../services/textfile/common/textEditorService.js';\nimport { isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { NO_TYPE_ID } from '../../../../services/workingCopy/common/workingCopy.js';\nimport { IWorkingCopyEditorService } from '../../../../services/workingCopy/common/workingCopyEditorService.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nlet FileEditorWorkingCopyEditorHandler = class FileEditorWorkingCopyEditorHandler extends Disposable {\n    constructor(workingCopyEditorService, textEditorService, fileService) {\n        super();\n        this.textEditorService = textEditorService;\n        this.fileService = fileService;\n        this._register(workingCopyEditorService.registerHandler(this));\n    }\n    handles(workingCopy) {\n        return workingCopy.typeId === NO_TYPE_ID && this.fileService.canHandleResource(workingCopy.resource);\n    }\n    handlesSync(workingCopy) {\n        return workingCopy.typeId === NO_TYPE_ID && this.fileService.hasProvider(workingCopy.resource);\n    }\n    isOpen(workingCopy, editor) {\n        if (!this.handlesSync(workingCopy)) {\n            return false;\n        }\n        return isEqual(workingCopy.resource, editor.resource);\n    }\n    createEditor(workingCopy) {\n        return this.textEditorService.createTextEditor({ resource: workingCopy.resource, forceFile: true });\n    }\n};\nFileEditorWorkingCopyEditorHandler = ( __decorate([\n    ( __param(0, IWorkingCopyEditorService)),\n    ( __param(1, ITextEditorService)),\n    ( __param(2, IFileService))\n], FileEditorWorkingCopyEditorHandler));\nexport { FileEditorWorkingCopyEditorHandler };\n","import { __decorate, __param } from '../../../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { mark } from 'monaco-editor/esm/vs/base/common/performance.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IPathService } from '../../../../services/path/common/pathService.js';\nimport { toAction } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { TEXT_FILE_EDITOR_ID, VIEWLET_ID, BINARY_TEXT_FILE_MODE } from '../../common/files.js';\nimport { ITextFileService } from '../../../../services/textfile/common/textfiles.js';\nimport { AbstractTextCodeEditor } from '../../../../browser/parts/editor/textCodeEditor.js';\nimport { isTextEditorViewState, createEditorOpenError, createTooLargeFileError, DEFAULT_EDITOR_ASSOCIATION } from '../../../../common/editor.js';\nimport { applyTextEditorOptions } from '../../../../common/editor/editorOptions.js';\nimport { BinaryEditorModel } from '../../../../common/editor/binaryEditorModel.js';\nimport { FileEditorInput } from './fileEditorInput.js';\nimport { TooLargeFileOperationError, ByteSize, FileOperationError, IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { ITextResourceConfigurationService } from 'monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { EditorActivation } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { IExplorerService } from '../files.js';\nimport { IPaneCompositePartService } from '../../../../services/panecomposite/browser/panecomposite.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IPreferencesService } from '../../../../services/preferences/common/preferences.js';\nimport { IHostService } from '../../../../services/host/browser/host.js';\nlet TextFileEditor = class TextFileEditor extends AbstractTextCodeEditor {\n    static { this.ID = TEXT_FILE_EDITOR_ID; }\n    constructor(telemetryService, fileService, paneCompositeService, instantiationService, contextService, storageService, textResourceConfigurationService, editorService, themeService, editorGroupService, textFileService, explorerService, uriIdentityService, pathService, configurationService, preferencesService, hostService) {\n        super(TextFileEditor.ID, telemetryService, instantiationService, storageService, textResourceConfigurationService, themeService, editorService, editorGroupService, fileService);\n        this.paneCompositeService = paneCompositeService;\n        this.contextService = contextService;\n        this.textFileService = textFileService;\n        this.explorerService = explorerService;\n        this.uriIdentityService = uriIdentityService;\n        this.pathService = pathService;\n        this.configurationService = configurationService;\n        this.preferencesService = preferencesService;\n        this.hostService = hostService;\n        this._register(this.fileService.onDidFilesChange(e => this.onDidFilesChange(e)));\n        this._register(this.fileService.onDidRunOperation(e => this.onDidRunOperation(e)));\n    }\n    onDidFilesChange(e) {\n        for (const resource of e.rawDeleted) {\n            this.clearEditorViewState(resource);\n        }\n    }\n    onDidRunOperation(e) {\n        if (e.operation === 2  && e.target) {\n            this.moveEditorViewState(e.resource, e.target.resource, this.uriIdentityService.extUri);\n        }\n    }\n    getTitle() {\n        if (this.input) {\n            return this.input.getName();\n        }\n        return ( localize('textFileEditor', \"Text File Editor\"));\n    }\n    get input() {\n        return this._input;\n    }\n    async setInput(input, options, context, token) {\n        mark('code/willSetInputToTextFileEditor');\n        await super.setInput(input, options, context, token);\n        try {\n            const resolvedModel = await input.resolve(options);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            if (resolvedModel instanceof BinaryEditorModel) {\n                return this.openAsBinary(input, options);\n            }\n            const textFileModel = resolvedModel;\n            const control = assertIsDefined(this.editorControl);\n            control.setModel(textFileModel.textEditorModel);\n            if (!isTextEditorViewState(options?.viewState)) {\n                const editorViewState = this.loadEditorViewState(input, context);\n                if (editorViewState) {\n                    if (options?.selection) {\n                        editorViewState.cursorState = [];\n                    }\n                    control.restoreViewState(editorViewState);\n                }\n            }\n            if (options) {\n                applyTextEditorOptions(options, control, 1 );\n            }\n            control.updateOptions(this.getReadonlyConfiguration(textFileModel.isReadonly()));\n            if (control.handleInitialized) {\n                control.handleInitialized();\n            }\n        }\n        catch (error) {\n            await this.handleSetInputError(error, input, options);\n        }\n        mark('code/didSetInputToTextFileEditor');\n    }\n    async handleSetInputError(error, input, options) {\n        if (error.textFileOperationResult === 0 ) {\n            return this.openAsBinary(input, options);\n        }\n        if (error.fileOperationResult === 0 ) {\n            const actions = [];\n            actions.push(toAction({\n                id: 'workbench.files.action.openFolder', label: ( localize('openFolder', \"Open Folder\")), run: async () => {\n                    return this.hostService.openWindow([{ folderUri: input.resource }], { forceNewWindow: true });\n                }\n            }));\n            if (this.contextService.isInsideWorkspace(input.preferredResource)) {\n                actions.push(toAction({\n                    id: 'workbench.files.action.reveal', label: ( localize('reveal', \"Reveal Folder\")), run: async () => {\n                        await this.paneCompositeService.openPaneComposite(VIEWLET_ID, 0 , true);\n                        return this.explorerService.select(input.preferredResource, true);\n                    }\n                }));\n            }\n            throw createEditorOpenError(localize('fileIsDirectory', \"The file is not displayed in the text editor because it is a directory.\"), actions, { forceMessage: true });\n        }\n        if (error.fileOperationResult === 7  && this.group) {\n            let message;\n            if (error instanceof TooLargeFileOperationError) {\n                message = ( localize(\n                    'fileTooLargeForHeapErrorWithSize',\n                    \"The file is not displayed in the text editor because it is very large ({0}).\",\n                    ByteSize.formatSize(error.size)\n                ));\n            }\n            else {\n                message = ( localize(\n                    'fileTooLargeForHeapErrorWithoutSize',\n                    \"The file is not displayed in the text editor because it is very large.\"\n                ));\n            }\n            throw createTooLargeFileError(this.group, input, options, message, this.preferencesService);\n        }\n        if (error.fileOperationResult === 1  && (await this.pathService.hasValidBasename(input.preferredResource))) {\n            const fileNotFoundError = createEditorOpenError(( new FileOperationError(( localize(\n                'unavailableResourceErrorEditorText',\n                \"The editor could not be opened because the file was not found.\"\n            )), 1 )), [\n                toAction({\n                    id: 'workbench.files.action.createMissingFile', label: ( localize('createFile', \"Create File\")), run: async () => {\n                        await this.textFileService.create([{ resource: input.preferredResource }]);\n                        return this.editorService.openEditor({\n                            resource: input.preferredResource,\n                            options: {\n                                pinned: true\n                            }\n                        });\n                    }\n                })\n            ], {\n                allowDialog: true\n            });\n            throw fileNotFoundError;\n        }\n        throw error;\n    }\n    openAsBinary(input, options) {\n        const defaultBinaryEditor = this.configurationService.getValue('workbench.editor.defaultBinaryEditor');\n        const group = this.group ?? this.editorGroupService.activeGroup;\n        const editorOptions = {\n            ...options,\n            activation: EditorActivation.PRESERVE\n        };\n        if (defaultBinaryEditor && defaultBinaryEditor !== '' && defaultBinaryEditor !== DEFAULT_EDITOR_ASSOCIATION.id) {\n            this.doOpenAsBinaryInDifferentEditor(group, defaultBinaryEditor, input, editorOptions);\n        }\n        else {\n            this.doOpenAsBinaryInSameEditor(group, defaultBinaryEditor, input, editorOptions);\n        }\n    }\n    doOpenAsBinaryInDifferentEditor(group, editorId, editor, editorOptions) {\n        this.editorService.replaceEditors([{\n                editor,\n                replacement: { resource: editor.resource, options: { ...editorOptions, override: editorId } }\n            }], group);\n    }\n    doOpenAsBinaryInSameEditor(group, editorId, editor, editorOptions) {\n        if (editorId === DEFAULT_EDITOR_ASSOCIATION.id) {\n            editor.setForceOpenAsText();\n            editor.setPreferredLanguageId(BINARY_TEXT_FILE_MODE);\n            editorOptions = { ...editorOptions, forceReload: true };\n        }\n        else {\n            editor.setForceOpenAsBinary();\n        }\n        group.openEditor(editor, editorOptions);\n    }\n    clearInput() {\n        super.clearInput();\n        this.editorControl?.setModel(null);\n    }\n    createEditorControl(parent, initialOptions) {\n        mark('code/willCreateTextFileEditorControl');\n        super.createEditorControl(parent, initialOptions);\n        mark('code/didCreateTextFileEditorControl');\n    }\n    tracksEditorViewState(input) {\n        return input instanceof FileEditorInput;\n    }\n    tracksDisposedEditorViewState() {\n        return true;\n    }\n};\nTextFileEditor = ( __decorate([\n    ( __param(0, ITelemetryService)),\n    ( __param(1, IFileService)),\n    ( __param(2, IPaneCompositePartService)),\n    ( __param(3, IInstantiationService)),\n    ( __param(4, IWorkspaceContextService)),\n    ( __param(5, IStorageService)),\n    ( __param(6, ITextResourceConfigurationService)),\n    ( __param(7, IEditorService)),\n    ( __param(8, IThemeService)),\n    ( __param(9, IEditorGroupsService)),\n    ( __param(10, ITextFileService)),\n    ( __param(11, IExplorerService)),\n    ( __param(12, IUriIdentityService)),\n    ( __param(13, IPathService)),\n    ( __param(14, IConfigurationService)),\n    ( __param(15, IPreferencesService)),\n    ( __param(16, IHostService))\n], TextFileEditor));\nexport { TextFileEditor };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { sep } from 'monaco-editor/esm/vs/base/common/path.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { Extensions } from '../../../common/contributions.js';\nimport { EditorExtensions } from '../../../common/editor.js';\nimport { FILE_EDITOR_INPUT_ID, BINARY_TEXT_FILE_MODE } from '../common/files.js';\nimport { TextFileEditorTracker } from './editors/textFileEditorTracker.js';\nimport { TextFileSaveErrorHandler } from './editors/textFileSaveErrorHandler.js';\nimport { FileEditorInput } from './editors/fileEditorInput.js';\nimport { BinaryFileEditor } from './editors/binaryFileEditor.js';\nimport { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { isWindows } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { ExplorerViewletViewsContribution } from './explorerViewlet.js';\nimport { EditorPaneDescriptor } from '../../../browser/editor.js';\nimport { ILabelService } from 'monaco-editor/esm/vs/platform/label/common/label.js';\nimport { UNDO_REDO_SOURCE } from './explorerService.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { WorkspaceWatcher } from './workspaceWatcher.js';\nimport { DirtyFilesIndicator } from '../common/dirtyFilesIndicator.js';\nimport { UndoCommand, RedoCommand } from 'monaco-editor/esm/vs/editor/browser/editorExtensions.js';\nimport { IUndoRedoService } from 'monaco-editor/esm/vs/platform/undoRedo/common/undoRedo.js';\nimport { IExplorerService } from './files.js';\nimport { FileEditorWorkingCopyEditorHandler } from './editors/fileEditorHandler.js';\nimport { ModesRegistry } from 'monaco-editor/esm/vs/editor/common/languages/modesRegistry.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { TextFileEditor } from './editors/textFileEditor.js';\nlet FileUriLabelContribution = class FileUriLabelContribution {\n    constructor(labelService) {\n        labelService.registerFormatter({\n            scheme: Schemas.file,\n            formatting: {\n                label: '${authority}${path}',\n                separator: sep,\n                tildify: !isWindows,\n                normalizeDriveLetter: isWindows,\n                authorityPrefix: sep + sep,\n                workspaceSuffix: ''\n            }\n        });\n    }\n};\nFileUriLabelContribution = ( __decorate([\n    ( __param(0, ILabelService))\n], FileUriLabelContribution));\n( Registry.as(EditorExtensions.EditorPane)).registerEditorPane(EditorPaneDescriptor.create(TextFileEditor, TextFileEditor.ID, ( nls.localize('textFileEditor', \"Text File Editor\"))), [\n    ( new SyncDescriptor(FileEditorInput))\n]);\n( Registry.as(EditorExtensions.EditorPane)).registerEditorPane(EditorPaneDescriptor.create(BinaryFileEditor, BinaryFileEditor.ID, ( nls.localize('binaryFileEditor', \"Binary File Editor\"))), [\n    ( new SyncDescriptor(FileEditorInput))\n]);\n( Registry.as(EditorExtensions.EditorFactory)).registerFileEditorFactory({\n    typeId: FILE_EDITOR_INPUT_ID,\n    createFileEditor: (resource, preferredResource, preferredName, preferredDescription, preferredEncoding, preferredLanguageId, preferredContents, instantiationService) => {\n        return instantiationService.createInstance(FileEditorInput, resource, preferredResource, preferredName, preferredDescription, preferredEncoding, preferredLanguageId, preferredContents);\n    },\n    isFileEditor: (obj) => {\n        return obj instanceof FileEditorInput;\n    }\n});\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(FileEditorWorkingCopyEditorHandler, 2 );\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(ExplorerViewletViewsContribution, 1 );\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(TextFileEditorTracker, 1 );\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(TextFileSaveErrorHandler, 1 );\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(FileUriLabelContribution, 1 );\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(WorkspaceWatcher, 3 );\n( Registry.as(Extensions.Workbench)).registerWorkbenchContribution(DirtyFilesIndicator, 1 );\nUndoCommand.addImplementation(110, 'explorer', (accessor) => {\n    const undoRedoService = accessor.get(IUndoRedoService);\n    const explorerService = accessor.get(IExplorerService);\n    const configurationService = accessor.get(IConfigurationService);\n    const explorerCanUndo = configurationService.getValue().explorer.enableUndo;\n    if (explorerService.hasViewFocus() && undoRedoService.canUndo(UNDO_REDO_SOURCE) && explorerCanUndo) {\n        undoRedoService.undo(UNDO_REDO_SOURCE);\n        return true;\n    }\n    return false;\n});\nRedoCommand.addImplementation(110, 'explorer', (accessor) => {\n    const undoRedoService = accessor.get(IUndoRedoService);\n    const explorerService = accessor.get(IExplorerService);\n    const configurationService = accessor.get(IConfigurationService);\n    const explorerCanUndo = configurationService.getValue().explorer.enableUndo;\n    if (explorerService.hasViewFocus() && undoRedoService.canRedo(UNDO_REDO_SOURCE) && explorerCanUndo) {\n        undoRedoService.redo(UNDO_REDO_SOURCE);\n        return true;\n    }\n    return false;\n});\nModesRegistry.registerLanguage({\n    id: BINARY_TEXT_FILE_MODE,\n    aliases: ['Binary'],\n    mimetypes: ['text/x-code-binary']\n});\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { EditorExtensions } from '../../../common/editor.js';\nimport { SideBySideEditorInput } from '../../../common/editor/sideBySideEditorInput.js';\nimport { Disposable, dispose, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { Emitter, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { coalesce } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { LinkedMap, ResourceMap } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { equals } from 'monaco-editor/esm/vs/base/common/objects.js';\nlet EditorsObserver = class EditorsObserver extends Disposable {\n    static { this.STORAGE_KEY = 'editors.mru'; }\n    get count() {\n        return this.mostRecentEditorsMap.size;\n    }\n    get editors() {\n        return [...( this.mostRecentEditorsMap.values())];\n    }\n    hasEditor(editor) {\n        const editors = this.editorsPerResourceCounter.get(editor.resource);\n        return editors?.has(this.toIdentifier(editor)) ?? false;\n    }\n    hasEditors(resource) {\n        return ( this.editorsPerResourceCounter.has(resource));\n    }\n    toIdentifier(arg1, editorId) {\n        if (typeof arg1 !== 'string') {\n            return this.toIdentifier(arg1.typeId, arg1.editorId);\n        }\n        if (editorId) {\n            return `${arg1}/${editorId}`;\n        }\n        return arg1;\n    }\n    constructor(editorGroupsService, storageService) {\n        super();\n        this.editorGroupsService = editorGroupsService;\n        this.storageService = storageService;\n        this.keyMap = ( new Map());\n        this.mostRecentEditorsMap = ( new LinkedMap());\n        this.editorsPerResourceCounter = ( new ResourceMap());\n        this._onDidMostRecentlyActiveEditorsChange = this._register(( new Emitter()));\n        this.onDidMostRecentlyActiveEditorsChange = this._onDidMostRecentlyActiveEditorsChange.event;\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.storageService.onWillSaveState(() => this.saveState()));\n        this._register(this.editorGroupsService.onDidAddGroup(group => this.onGroupAdded(group)));\n        this._register(this.editorGroupsService.onDidChangeEditorPartOptions(e => this.onDidChangeEditorPartOptions(e)));\n        this.editorGroupsService.whenReady.then(() => this.loadState());\n    }\n    onGroupAdded(group) {\n        const groupEditorsMru = group.getEditors(0 );\n        for (let i = groupEditorsMru.length - 1; i >= 0; i--) {\n            this.addMostRecentEditor(group, groupEditorsMru[i], false , true );\n        }\n        if (this.editorGroupsService.activeGroup === group && group.activeEditor) {\n            this.addMostRecentEditor(group, group.activeEditor, true , false );\n        }\n        this.registerGroupListeners(group);\n    }\n    registerGroupListeners(group) {\n        const groupDisposables = ( new DisposableStore());\n        groupDisposables.add(group.onDidModelChange(e => {\n            switch (e.kind) {\n                case 0 : {\n                    if (this.editorGroupsService.activeGroup === group && group.activeEditor) {\n                        this.addMostRecentEditor(group, group.activeEditor, true , false );\n                    }\n                    break;\n                }\n                case 3 : {\n                    if (e.editor) {\n                        this.addMostRecentEditor(group, e.editor, false , true );\n                        this.ensureOpenedEditorsLimit({ groupId: group.id, editor: e.editor }, group.id);\n                    }\n                    break;\n                }\n            }\n        }));\n        groupDisposables.add(group.onDidCloseEditor(e => {\n            this.removeMostRecentEditor(group, e.editor);\n        }));\n        groupDisposables.add(group.onDidActiveEditorChange(e => {\n            if (e.editor) {\n                this.addMostRecentEditor(group, e.editor, this.editorGroupsService.activeGroup === group, false );\n            }\n        }));\n        Event.once(group.onWillDispose)(() => dispose(groupDisposables));\n    }\n    onDidChangeEditorPartOptions(event) {\n        if (!equals(event.newPartOptions.limit, event.oldPartOptions.limit)) {\n            const activeGroup = this.editorGroupsService.activeGroup;\n            let exclude = undefined;\n            if (activeGroup.activeEditor) {\n                exclude = { editor: activeGroup.activeEditor, groupId: activeGroup.id };\n            }\n            this.ensureOpenedEditorsLimit(exclude);\n        }\n    }\n    addMostRecentEditor(group, editor, isActive, isNew) {\n        const key = this.ensureKey(group, editor);\n        const mostRecentEditor = this.mostRecentEditorsMap.first;\n        if (isActive || !mostRecentEditor) {\n            this.mostRecentEditorsMap.set(key, key, mostRecentEditor ? 1  : undefined);\n        }\n        else {\n            this.mostRecentEditorsMap.set(key, key, 1 );\n            this.mostRecentEditorsMap.set(mostRecentEditor, mostRecentEditor, 1 );\n        }\n        if (isNew) {\n            this.updateEditorResourcesMap(editor, true);\n        }\n        this._onDidMostRecentlyActiveEditorsChange.fire();\n    }\n    updateEditorResourcesMap(editor, add) {\n        let resource = undefined;\n        let typeId = undefined;\n        let editorId = undefined;\n        if (editor instanceof SideBySideEditorInput) {\n            resource = editor.primary.resource;\n            typeId = editor.primary.typeId;\n            editorId = editor.primary.editorId;\n        }\n        else {\n            resource = editor.resource;\n            typeId = editor.typeId;\n            editorId = editor.editorId;\n        }\n        if (!resource) {\n            return;\n        }\n        const identifier = this.toIdentifier(typeId, editorId);\n        if (add) {\n            let editorsPerResource = this.editorsPerResourceCounter.get(resource);\n            if (!editorsPerResource) {\n                editorsPerResource = ( new Map());\n                this.editorsPerResourceCounter.set(resource, editorsPerResource);\n            }\n            editorsPerResource.set(identifier, (editorsPerResource.get(identifier) ?? 0) + 1);\n        }\n        else {\n            const editorsPerResource = this.editorsPerResourceCounter.get(resource);\n            if (editorsPerResource) {\n                const counter = editorsPerResource.get(identifier) ?? 0;\n                if (counter > 1) {\n                    editorsPerResource.set(identifier, counter - 1);\n                }\n                else {\n                    editorsPerResource.delete(identifier);\n                    if (editorsPerResource.size === 0) {\n                        this.editorsPerResourceCounter.delete(resource);\n                    }\n                }\n            }\n        }\n    }\n    removeMostRecentEditor(group, editor) {\n        this.updateEditorResourcesMap(editor, false);\n        const key = this.findKey(group, editor);\n        if (key) {\n            this.mostRecentEditorsMap.delete(key);\n            const map = this.keyMap.get(group.id);\n            if (map && map.delete(key.editor) && map.size === 0) {\n                this.keyMap.delete(group.id);\n            }\n            this._onDidMostRecentlyActiveEditorsChange.fire();\n        }\n    }\n    findKey(group, editor) {\n        const groupMap = this.keyMap.get(group.id);\n        if (!groupMap) {\n            return undefined;\n        }\n        return groupMap.get(editor);\n    }\n    ensureKey(group, editor) {\n        let groupMap = this.keyMap.get(group.id);\n        if (!groupMap) {\n            groupMap = ( new Map());\n            this.keyMap.set(group.id, groupMap);\n        }\n        let key = groupMap.get(editor);\n        if (!key) {\n            key = { groupId: group.id, editor };\n            groupMap.set(editor, key);\n        }\n        return key;\n    }\n    async ensureOpenedEditorsLimit(exclude, groupId) {\n        if (!this.editorGroupsService.partOptions.limit?.enabled ||\n            typeof this.editorGroupsService.partOptions.limit.value !== 'number' ||\n            this.editorGroupsService.partOptions.limit.value <= 0) {\n            return;\n        }\n        const limit = this.editorGroupsService.partOptions.limit.value;\n        if (this.editorGroupsService.partOptions.limit?.perEditorGroup) {\n            if (typeof groupId === 'number') {\n                const group = this.editorGroupsService.getGroup(groupId);\n                if (group) {\n                    await this.doEnsureOpenedEditorsLimit(limit, ( group.getEditors(0 ).map(editor => ({ editor, groupId }))), exclude);\n                }\n            }\n            else {\n                for (const group of this.editorGroupsService.groups) {\n                    await this.ensureOpenedEditorsLimit(exclude, group.id);\n                }\n            }\n        }\n        else {\n            await this.doEnsureOpenedEditorsLimit(limit, [...( this.mostRecentEditorsMap.values())], exclude);\n        }\n    }\n    async doEnsureOpenedEditorsLimit(limit, mostRecentEditors, exclude) {\n        let mostRecentEditorsCountingForLimit;\n        if (this.editorGroupsService.partOptions.limit?.excludeDirty) {\n            mostRecentEditorsCountingForLimit = mostRecentEditors.filter(({ editor }) => {\n                if ((editor.isDirty() && !editor.isSaving()) || editor.hasCapability(512 )) {\n                    return false;\n                }\n                return true;\n            });\n        }\n        else {\n            mostRecentEditorsCountingForLimit = mostRecentEditors;\n        }\n        if (limit >= mostRecentEditorsCountingForLimit.length) {\n            return;\n        }\n        const leastRecentlyClosableEditors = mostRecentEditorsCountingForLimit.reverse().filter(({ editor, groupId }) => {\n            if ((editor.isDirty() && !editor.isSaving()) || editor.hasCapability(512 )) {\n                return false;\n            }\n            if (exclude && editor === exclude.editor && groupId === exclude.groupId) {\n                return false;\n            }\n            if (this.editorGroupsService.getGroup(groupId)?.isSticky(editor)) {\n                return false;\n            }\n            return true;\n        });\n        let editorsToCloseCount = mostRecentEditorsCountingForLimit.length - limit;\n        const mapGroupToEditorsToClose = ( new Map());\n        for (const { groupId, editor } of leastRecentlyClosableEditors) {\n            let editorsInGroupToClose = mapGroupToEditorsToClose.get(groupId);\n            if (!editorsInGroupToClose) {\n                editorsInGroupToClose = [];\n                mapGroupToEditorsToClose.set(groupId, editorsInGroupToClose);\n            }\n            editorsInGroupToClose.push(editor);\n            editorsToCloseCount--;\n            if (editorsToCloseCount === 0) {\n                break;\n            }\n        }\n        for (const [groupId, editors] of mapGroupToEditorsToClose) {\n            const group = this.editorGroupsService.getGroup(groupId);\n            if (group) {\n                await group.closeEditors(editors, { preserveFocus: true });\n            }\n        }\n    }\n    saveState() {\n        if (this.mostRecentEditorsMap.isEmpty()) {\n            this.storageService.remove(EditorsObserver.STORAGE_KEY, 1 );\n        }\n        else {\n            this.storageService.store(EditorsObserver.STORAGE_KEY, JSON.stringify(this.serialize()), 1 , 1 );\n        }\n    }\n    serialize() {\n        const registry = ( Registry.as(EditorExtensions.EditorFactory));\n        const entries = [...( this.mostRecentEditorsMap.values())];\n        const mapGroupToSerializableEditorsOfGroup = ( new Map());\n        return {\n            entries: coalesce(( entries.map(({ editor, groupId }) => {\n                const group = this.editorGroupsService.getGroup(groupId);\n                if (!group) {\n                    return undefined;\n                }\n                let serializableEditorsOfGroup = mapGroupToSerializableEditorsOfGroup.get(group);\n                if (!serializableEditorsOfGroup) {\n                    serializableEditorsOfGroup = group.getEditors(1 ).filter(editor => {\n                        const editorSerializer = registry.getEditorSerializer(editor);\n                        return editorSerializer?.canSerialize(editor);\n                    });\n                    mapGroupToSerializableEditorsOfGroup.set(group, serializableEditorsOfGroup);\n                }\n                const index = serializableEditorsOfGroup.indexOf(editor);\n                if (index === -1) {\n                    return undefined;\n                }\n                return { groupId, index };\n            })))\n        };\n    }\n    loadState() {\n        const serialized = this.storageService.get(EditorsObserver.STORAGE_KEY, 1 );\n        if (serialized) {\n            this.deserialize(JSON.parse(serialized));\n        }\n        else {\n            const groups = this.editorGroupsService.getGroups(1 );\n            for (let i = groups.length - 1; i >= 0; i--) {\n                const group = groups[i];\n                const groupEditorsMru = group.getEditors(0 );\n                for (let i = groupEditorsMru.length - 1; i >= 0; i--) {\n                    this.addMostRecentEditor(group, groupEditorsMru[i], true , true );\n                }\n            }\n        }\n        for (const group of this.editorGroupsService.groups) {\n            this.registerGroupListeners(group);\n        }\n    }\n    deserialize(serialized) {\n        const mapValues = [];\n        for (const { groupId, index } of serialized.entries) {\n            const group = this.editorGroupsService.getGroup(groupId);\n            if (!group) {\n                continue;\n            }\n            const editor = group.getEditorByIndex(index);\n            if (!editor) {\n                continue;\n            }\n            const editorIdentifier = this.ensureKey(group, editor);\n            mapValues.push([editorIdentifier, editorIdentifier]);\n            this.updateEditorResourcesMap(editor, true);\n        }\n        this.mostRecentEditorsMap.fromJSON(mapValues);\n    }\n};\nEditorsObserver = ( __decorate([\n    ( __param(0, IEditorGroupsService)),\n    ( __param(1, IStorageService))\n], EditorsObserver));\nexport { EditorsObserver };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { EditorResourceAccessor, SideBySideEditor, isEditorInput, isEditorInputWithOptions, isResourceMergeEditorInput, isResourceDiffEditorInput, isResourceEditorInput, isEditorInputWithOptionsAndGroup } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { SideBySideEditorInput } from '../../../common/editor/sideBySideEditorInput.js';\nimport { ResourceMap, ResourceSet } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { FileChangesEvent, IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { Emitter, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { joinPath } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { DiffEditorInput } from '../../../common/editor/diffEditorInput.js';\nimport { isEditorReplacement, IEditorGroupsService } from '../common/editorGroupsService.js';\nimport { isPreferredGroup } from '../common/editorService.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { Disposable, dispose, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { distinct, coalesce } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { isCodeEditor, isDiffEditor, isCompositeEditor } from 'monaco-editor/esm/vs/editor/browser/editorBrowser.js';\nimport { withNullAsUndefined, isUndefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { EditorsObserver } from '../../../browser/parts/editor/editorsObserver.js';\nimport { timeout, Promises } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { indexOfPath } from 'monaco-editor/esm/vs/base/common/extpath.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { IEditorResolverService } from '../common/editorResolverService.js';\nimport { IWorkspaceTrustRequestService } from 'monaco-editor/esm/vs/platform/workspace/common/workspaceTrust.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { findGroup } from '../common/editorGroupFinder.js';\nimport { ITextEditorService } from '../../textfile/common/textEditorService.js';\nlet EditorService = class EditorService extends Disposable {\n    constructor(editorGroupService, instantiationService, fileService, configurationService, contextService, uriIdentityService, editorResolverService, workspaceTrustRequestService, hostService, textEditorService) {\n        super();\n        this.editorGroupService = editorGroupService;\n        this.instantiationService = instantiationService;\n        this.fileService = fileService;\n        this.configurationService = configurationService;\n        this.contextService = contextService;\n        this.uriIdentityService = uriIdentityService;\n        this.editorResolverService = editorResolverService;\n        this.workspaceTrustRequestService = workspaceTrustRequestService;\n        this.hostService = hostService;\n        this.textEditorService = textEditorService;\n        this._onDidActiveEditorChange = this._register(( new Emitter()));\n        this.onDidActiveEditorChange = this._onDidActiveEditorChange.event;\n        this._onDidVisibleEditorsChange = this._register(( new Emitter()));\n        this.onDidVisibleEditorsChange = this._onDidVisibleEditorsChange.event;\n        this._onDidEditorsChange = this._register(( new Emitter()));\n        this.onDidEditorsChange = this._onDidEditorsChange.event;\n        this._onDidCloseEditor = this._register(( new Emitter()));\n        this.onDidCloseEditor = this._onDidCloseEditor.event;\n        this._onDidOpenEditorFail = this._register(( new Emitter()));\n        this.onDidOpenEditorFail = this._onDidOpenEditorFail.event;\n        this._onDidMostRecentlyActiveEditorsChange = this._register(( new Emitter()));\n        this.onDidMostRecentlyActiveEditorsChange = this._onDidMostRecentlyActiveEditorsChange.event;\n        this.lastActiveEditor = undefined;\n        this.activeOutOfWorkspaceWatchers = ( new ResourceMap());\n        this.closeOnFileDelete = false;\n        this.editorsObserver = this._register(this.instantiationService.createInstance(EditorsObserver));\n        this.onConfigurationUpdated();\n        this.registerListeners();\n    }\n    registerListeners() {\n        this.editorGroupService.whenReady.then(() => this.onEditorGroupsReady());\n        this.editorGroupService.onDidChangeActiveGroup(group => this.handleActiveEditorChange(group));\n        this.editorGroupService.onDidAddGroup(group => this.registerGroupListeners(group));\n        this.editorsObserver.onDidMostRecentlyActiveEditorsChange(() => this._onDidMostRecentlyActiveEditorsChange.fire());\n        this._register(this.onDidVisibleEditorsChange(() => this.handleVisibleEditorsChange()));\n        this._register(this.fileService.onDidRunOperation(e => this.onDidRunFileOperation(e)));\n        this._register(this.fileService.onDidFilesChange(e => this.onDidFilesChange(e)));\n        this._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n    }\n    onEditorGroupsReady() {\n        for (const group of this.editorGroupService.groups) {\n            this.registerGroupListeners(group);\n        }\n        if (this.activeEditor) {\n            this.doHandleActiveEditorChangeEvent();\n            this._onDidVisibleEditorsChange.fire();\n        }\n    }\n    handleActiveEditorChange(group) {\n        if (group !== this.editorGroupService.activeGroup) {\n            return;\n        }\n        if (!this.lastActiveEditor && !group.activeEditor) {\n            return;\n        }\n        this.doHandleActiveEditorChangeEvent();\n    }\n    doHandleActiveEditorChangeEvent() {\n        const activeGroup = this.editorGroupService.activeGroup;\n        this.lastActiveEditor = withNullAsUndefined(activeGroup.activeEditor);\n        this._onDidActiveEditorChange.fire();\n    }\n    registerGroupListeners(group) {\n        const groupDisposables = ( new DisposableStore());\n        groupDisposables.add(group.onDidModelChange(e => {\n            this._onDidEditorsChange.fire({ groupId: group.id, event: e });\n        }));\n        groupDisposables.add(group.onDidActiveEditorChange(() => {\n            this.handleActiveEditorChange(group);\n            this._onDidVisibleEditorsChange.fire();\n        }));\n        groupDisposables.add(group.onDidCloseEditor(e => {\n            this._onDidCloseEditor.fire(e);\n        }));\n        groupDisposables.add(group.onDidOpenEditorFail(editor => {\n            this._onDidOpenEditorFail.fire({ editor, groupId: group.id });\n        }));\n        Event.once(group.onWillDispose)(() => {\n            dispose(groupDisposables);\n        });\n    }\n    handleVisibleEditorsChange() {\n        const visibleOutOfWorkspaceResources = ( new ResourceSet());\n        for (const editor of this.visibleEditors) {\n            const resources = distinct(coalesce([\n                EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY }),\n                EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.SECONDARY })\n            ]), resource => ( resource.toString()));\n            for (const resource of resources) {\n                if (this.fileService.hasProvider(resource) && !this.contextService.isInsideWorkspace(resource)) {\n                    visibleOutOfWorkspaceResources.add(resource);\n                }\n            }\n        }\n        for (const resource of ( this.activeOutOfWorkspaceWatchers.keys())) {\n            if (!( visibleOutOfWorkspaceResources.has(resource))) {\n                dispose(this.activeOutOfWorkspaceWatchers.get(resource));\n                this.activeOutOfWorkspaceWatchers.delete(resource);\n            }\n        }\n        for (const resource of ( visibleOutOfWorkspaceResources.keys())) {\n            if (!this.activeOutOfWorkspaceWatchers.get(resource)) {\n                const disposable = this.fileService.watch(resource);\n                this.activeOutOfWorkspaceWatchers.set(resource, disposable);\n            }\n        }\n    }\n    async onDidRunFileOperation(e) {\n        if (e.isOperation(2 )) {\n            this.handleMovedFile(e.resource, e.target.resource);\n        }\n        if (e.isOperation(1 ) || e.isOperation(2 )) {\n            this.handleDeletedFile(e.resource, false, e.target ? e.target.resource : undefined);\n        }\n    }\n    onDidFilesChange(e) {\n        if (e.gotDeleted()) {\n            this.handleDeletedFile(e, true);\n        }\n    }\n    async handleMovedFile(source, target) {\n        for (const group of this.editorGroupService.groups) {\n            const replacements = [];\n            for (const editor of group.editors) {\n                const resource = editor.resource;\n                if (!resource || !this.uriIdentityService.extUri.isEqualOrParent(resource, source)) {\n                    continue;\n                }\n                let targetResource;\n                if (this.uriIdentityService.extUri.isEqual(source, resource)) {\n                    targetResource = target;\n                }\n                else {\n                    const index = indexOfPath(resource.path, source.path, this.uriIdentityService.extUri.ignorePathCasing(resource));\n                    targetResource = joinPath(target, resource.path.substr(index + source.path.length + 1));\n                }\n                const moveResult = await editor.rename(group.id, targetResource);\n                if (!moveResult) {\n                    return;\n                }\n                const optionOverrides = {\n                    preserveFocus: true,\n                    pinned: group.isPinned(editor),\n                    sticky: group.isSticky(editor),\n                    index: group.getIndexOfEditor(editor),\n                    inactive: !group.isActive(editor)\n                };\n                if (isEditorInput(moveResult.editor)) {\n                    replacements.push({\n                        editor,\n                        replacement: moveResult.editor,\n                        options: {\n                            ...moveResult.options,\n                            ...optionOverrides\n                        }\n                    });\n                }\n                else {\n                    replacements.push({\n                        editor,\n                        replacement: {\n                            ...moveResult.editor,\n                            options: {\n                                ...moveResult.editor.options,\n                                ...optionOverrides\n                            }\n                        }\n                    });\n                }\n            }\n            if (replacements.length) {\n                this.replaceEditors(replacements, group);\n            }\n        }\n    }\n    onConfigurationUpdated(e) {\n        if (e && !e.affectsConfiguration('workbench.editor.closeOnFileDelete')) {\n            return;\n        }\n        const configuration = this.configurationService.getValue();\n        if (typeof configuration.workbench?.editor?.closeOnFileDelete === 'boolean') {\n            this.closeOnFileDelete = configuration.workbench.editor.closeOnFileDelete;\n        }\n        else {\n            this.closeOnFileDelete = false;\n        }\n    }\n    handleDeletedFile(arg1, isExternal, movedTo) {\n        for (const editor of this.getAllNonDirtyEditors({ includeUntitled: false, supportSideBySide: true })) {\n            (async () => {\n                const resource = editor.resource;\n                if (!resource) {\n                    return;\n                }\n                if (this.closeOnFileDelete || !isExternal) {\n                    if (movedTo && this.uriIdentityService.extUri.isEqualOrParent(resource, movedTo)) {\n                        return;\n                    }\n                    let matches = false;\n                    if (arg1 instanceof FileChangesEvent) {\n                        matches = arg1.contains(resource, 2 );\n                    }\n                    else {\n                        matches = this.uriIdentityService.extUri.isEqualOrParent(resource, arg1);\n                    }\n                    if (!matches) {\n                        return;\n                    }\n                    let exists = false;\n                    if (isExternal && this.fileService.hasProvider(resource)) {\n                        await timeout(100);\n                        exists = await this.fileService.exists(resource);\n                    }\n                    if (!exists && !editor.isDisposed()) {\n                        editor.dispose();\n                    }\n                }\n            })();\n        }\n    }\n    getAllNonDirtyEditors(options) {\n        const editors = [];\n        function conditionallyAddEditor(editor) {\n            if (editor.hasCapability(4 ) && !options.includeUntitled) {\n                return;\n            }\n            if (editor.isDirty()) {\n                return;\n            }\n            editors.push(editor);\n        }\n        for (const editor of this.editors) {\n            if (options.supportSideBySide && editor instanceof SideBySideEditorInput) {\n                conditionallyAddEditor(editor.primary);\n                conditionallyAddEditor(editor.secondary);\n            }\n            else {\n                conditionallyAddEditor(editor);\n            }\n        }\n        return editors;\n    }\n    get activeEditorPane() {\n        return this.editorGroupService.activeGroup?.activeEditorPane;\n    }\n    get activeTextEditorControl() {\n        const activeEditorPane = this.activeEditorPane;\n        if (activeEditorPane) {\n            const activeControl = activeEditorPane.getControl();\n            if (isCodeEditor(activeControl) || isDiffEditor(activeControl)) {\n                return activeControl;\n            }\n            if (isCompositeEditor(activeControl) && isCodeEditor(activeControl.activeCodeEditor)) {\n                return activeControl.activeCodeEditor;\n            }\n        }\n        return undefined;\n    }\n    get activeTextEditorLanguageId() {\n        let activeCodeEditor = undefined;\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (isDiffEditor(activeTextEditorControl)) {\n            activeCodeEditor = activeTextEditorControl.getModifiedEditor();\n        }\n        else {\n            activeCodeEditor = activeTextEditorControl;\n        }\n        return activeCodeEditor?.getModel()?.getLanguageId();\n    }\n    get count() {\n        return this.editorsObserver.count;\n    }\n    get editors() {\n        return ( this.getEditors(1 ).map(({ editor }) => editor));\n    }\n    getEditors(order, options) {\n        switch (order) {\n            case 0 :\n                if (options?.excludeSticky) {\n                    return this.editorsObserver.editors.filter(({ groupId, editor }) => !this.editorGroupService.getGroup(groupId)?.isSticky(editor));\n                }\n                return this.editorsObserver.editors;\n            case 1 : {\n                const editors = [];\n                for (const group of this.editorGroupService.getGroups(2 )) {\n                    editors.push(...( group.getEditors(1 , options).map(editor => ({ editor, groupId: group.id }))));\n                }\n                return editors;\n            }\n        }\n    }\n    get activeEditor() {\n        const activeGroup = this.editorGroupService.activeGroup;\n        return activeGroup ? withNullAsUndefined(activeGroup.activeEditor) : undefined;\n    }\n    get visibleEditorPanes() {\n        return coalesce(( this.editorGroupService.groups.map(group => group.activeEditorPane)));\n    }\n    get visibleTextEditorControls() {\n        const visibleTextEditorControls = [];\n        for (const visibleEditorPane of this.visibleEditorPanes) {\n            const control = visibleEditorPane.getControl();\n            if (isCodeEditor(control) || isDiffEditor(control)) {\n                visibleTextEditorControls.push(control);\n            }\n        }\n        return visibleTextEditorControls;\n    }\n    get visibleEditors() {\n        return coalesce(( this.editorGroupService.groups.map(group => group.activeEditor)));\n    }\n    async openEditor(editor, optionsOrPreferredGroup, preferredGroup) {\n        let typedEditor = undefined;\n        let options = isEditorInput(editor) ? optionsOrPreferredGroup : editor.options;\n        let group = undefined;\n        if (isPreferredGroup(optionsOrPreferredGroup)) {\n            preferredGroup = optionsOrPreferredGroup;\n        }\n        if (!isEditorInput(editor)) {\n            const resolvedEditor = await this.editorResolverService.resolveEditor(editor, preferredGroup);\n            if (resolvedEditor === 1 ) {\n                return;\n            }\n            if (isEditorInputWithOptionsAndGroup(resolvedEditor)) {\n                typedEditor = resolvedEditor.editor;\n                options = resolvedEditor.options;\n                group = resolvedEditor.group;\n            }\n        }\n        if (!typedEditor) {\n            typedEditor = isEditorInput(editor) ? editor : await this.textEditorService.resolveTextEditor(editor);\n        }\n        if (!group) {\n            let activation = undefined;\n            ([group, activation] = this.instantiationService.invokeFunction(findGroup, { editor: typedEditor, options }, preferredGroup));\n            if (activation) {\n                options = { ...options, activation };\n            }\n        }\n        return group.openEditor(typedEditor, options);\n    }\n    async openEditors(editors, preferredGroup, options) {\n        if (options?.validateTrust) {\n            const editorsTrusted = await this.handleWorkspaceTrust(editors);\n            if (!editorsTrusted) {\n                return [];\n            }\n        }\n        const mapGroupToTypedEditors = ( new Map());\n        for (const editor of editors) {\n            let typedEditor = undefined;\n            let group = undefined;\n            if (!isEditorInputWithOptions(editor)) {\n                const resolvedEditor = await this.editorResolverService.resolveEditor(editor, preferredGroup);\n                if (resolvedEditor === 1 ) {\n                    continue;\n                }\n                if (isEditorInputWithOptionsAndGroup(resolvedEditor)) {\n                    typedEditor = resolvedEditor;\n                    group = resolvedEditor.group;\n                }\n            }\n            if (!typedEditor) {\n                typedEditor = isEditorInputWithOptions(editor) ? editor : { editor: await this.textEditorService.resolveTextEditor(editor), options: editor.options };\n            }\n            if (!group) {\n                [group] = this.instantiationService.invokeFunction(findGroup, typedEditor, preferredGroup);\n            }\n            let targetGroupEditors = mapGroupToTypedEditors.get(group);\n            if (!targetGroupEditors) {\n                targetGroupEditors = [];\n                mapGroupToTypedEditors.set(group, targetGroupEditors);\n            }\n            targetGroupEditors.push(typedEditor);\n        }\n        const result = [];\n        for (const [group, editors] of mapGroupToTypedEditors) {\n            result.push(group.openEditors(editors));\n        }\n        return coalesce(await Promises.settled(result));\n    }\n    async handleWorkspaceTrust(editors) {\n        const { resources, diffMode, mergeMode } = this.extractEditorResources(editors);\n        const trustResult = await this.workspaceTrustRequestService.requestOpenFilesTrust(resources);\n        switch (trustResult) {\n            case 1 :\n                return true;\n            case 2 :\n                await this.hostService.openWindow(( resources.map(resource => ({ fileUri: resource }))), { forceNewWindow: true, diffMode, mergeMode });\n                return false;\n            case 3 :\n                return false;\n        }\n    }\n    extractEditorResources(editors) {\n        const resources = ( new ResourceSet());\n        let diffMode = false;\n        let mergeMode = false;\n        for (const editor of editors) {\n            if (isEditorInputWithOptions(editor)) {\n                const resource = EditorResourceAccessor.getOriginalUri(editor.editor, { supportSideBySide: SideBySideEditor.BOTH });\n                if (URI.isUri(resource)) {\n                    resources.add(resource);\n                }\n                else if (resource) {\n                    if (resource.primary) {\n                        resources.add(resource.primary);\n                    }\n                    if (resource.secondary) {\n                        resources.add(resource.secondary);\n                    }\n                    diffMode = editor.editor instanceof DiffEditorInput;\n                }\n            }\n            else {\n                if (isResourceMergeEditorInput(editor)) {\n                    if (URI.isUri(editor.input1)) {\n                        resources.add(editor.input1.resource);\n                    }\n                    if (URI.isUri(editor.input2)) {\n                        resources.add(editor.input2.resource);\n                    }\n                    if (URI.isUri(editor.base)) {\n                        resources.add(editor.base.resource);\n                    }\n                    if (URI.isUri(editor.result)) {\n                        resources.add(editor.result.resource);\n                    }\n                    mergeMode = true;\n                }\n                if (isResourceDiffEditorInput(editor)) {\n                    if (URI.isUri(editor.original.resource)) {\n                        resources.add(editor.original.resource);\n                    }\n                    if (URI.isUri(editor.modified.resource)) {\n                        resources.add(editor.modified.resource);\n                    }\n                    diffMode = true;\n                }\n                else if (isResourceEditorInput(editor)) {\n                    resources.add(editor.resource);\n                }\n            }\n        }\n        return {\n            resources: Array.from(( resources.keys())),\n            diffMode,\n            mergeMode\n        };\n    }\n    isOpened(editor) {\n        return this.editorsObserver.hasEditor({\n            resource: this.uriIdentityService.asCanonicalUri(editor.resource),\n            typeId: editor.typeId,\n            editorId: editor.editorId\n        });\n    }\n    isVisible(editor) {\n        for (const group of this.editorGroupService.groups) {\n            if (group.activeEditor?.matches(editor)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async closeEditor({ editor, groupId }, options) {\n        const group = this.editorGroupService.getGroup(groupId);\n        await group?.closeEditor(editor, options);\n    }\n    async closeEditors(editors, options) {\n        const mapGroupToEditors = ( new Map());\n        for (const { editor, groupId } of editors) {\n            const group = this.editorGroupService.getGroup(groupId);\n            if (!group) {\n                continue;\n            }\n            let editors = mapGroupToEditors.get(group);\n            if (!editors) {\n                editors = [];\n                mapGroupToEditors.set(group, editors);\n            }\n            editors.push(editor);\n        }\n        for (const [group, editors] of mapGroupToEditors) {\n            await group.closeEditors(editors, options);\n        }\n    }\n    findEditors(arg1, options, arg2) {\n        const resource = URI.isUri(arg1) ? arg1 : arg1.resource;\n        const typeId = URI.isUri(arg1) ? undefined : arg1.typeId;\n        if (options?.supportSideBySide !== SideBySideEditor.ANY && options?.supportSideBySide !== SideBySideEditor.SECONDARY) {\n            if (!this.editorsObserver.hasEditors(resource)) {\n                if (URI.isUri(arg1) || isUndefined(arg2)) {\n                    return [];\n                }\n                return undefined;\n            }\n        }\n        if (!isUndefined(arg2)) {\n            const targetGroup = typeof arg2 === 'number' ? this.editorGroupService.getGroup(arg2) : arg2;\n            if (URI.isUri(arg1)) {\n                if (!targetGroup) {\n                    return [];\n                }\n                return targetGroup.findEditors(resource, options);\n            }\n            else {\n                if (!targetGroup) {\n                    return undefined;\n                }\n                const editors = targetGroup.findEditors(resource, options);\n                for (const editor of editors) {\n                    if (editor.typeId === typeId) {\n                        return editor;\n                    }\n                }\n                return undefined;\n            }\n        }\n        else {\n            const result = [];\n            for (const group of this.editorGroupService.getGroups(1 )) {\n                const editors = [];\n                if (URI.isUri(arg1)) {\n                    editors.push(...this.findEditors(arg1, options, group));\n                }\n                else {\n                    const editor = this.findEditors(arg1, options, group);\n                    if (editor) {\n                        editors.push(editor);\n                    }\n                }\n                result.push(...( editors.map(editor => ({ editor, groupId: group.id }))));\n            }\n            return result;\n        }\n    }\n    async replaceEditors(replacements, group) {\n        const targetGroup = typeof group === 'number' ? this.editorGroupService.getGroup(group) : group;\n        const typedReplacements = [];\n        for (const replacement of replacements) {\n            let typedReplacement = undefined;\n            if (!isEditorInput(replacement.replacement)) {\n                const resolvedEditor = await this.editorResolverService.resolveEditor(replacement.replacement, targetGroup);\n                if (resolvedEditor === 1 ) {\n                    continue;\n                }\n                if (isEditorInputWithOptionsAndGroup(resolvedEditor)) {\n                    typedReplacement = {\n                        editor: replacement.editor,\n                        replacement: resolvedEditor.editor,\n                        options: resolvedEditor.options,\n                        forceReplaceDirty: replacement.forceReplaceDirty\n                    };\n                }\n            }\n            if (!typedReplacement) {\n                typedReplacement = {\n                    editor: replacement.editor,\n                    replacement: isEditorReplacement(replacement) ? replacement.replacement : await this.textEditorService.resolveTextEditor(replacement.replacement),\n                    options: isEditorReplacement(replacement) ? replacement.options : replacement.replacement.options,\n                    forceReplaceDirty: replacement.forceReplaceDirty\n                };\n            }\n            typedReplacements.push(typedReplacement);\n        }\n        return targetGroup?.replaceEditors(typedReplacements);\n    }\n    async save(editors, options) {\n        if (!Array.isArray(editors)) {\n            editors = [editors];\n        }\n        const uniqueEditors = this.getUniqueEditors(editors);\n        const editorsToSaveParallel = [];\n        const editorsToSaveSequentially = [];\n        if (options?.saveAs) {\n            editorsToSaveSequentially.push(...uniqueEditors);\n        }\n        else {\n            for (const { groupId, editor } of uniqueEditors) {\n                if (editor.hasCapability(4 )) {\n                    editorsToSaveSequentially.push({ groupId, editor });\n                }\n                else {\n                    editorsToSaveParallel.push({ groupId, editor });\n                }\n            }\n        }\n        const saveResults = await Promises.settled(( editorsToSaveParallel.map(({ groupId, editor }) => {\n            if (options?.reason === 1 ) {\n                this.editorGroupService.getGroup(groupId)?.pinEditor(editor);\n            }\n            return editor.save(groupId, options);\n        })));\n        for (const { groupId, editor } of editorsToSaveSequentially) {\n            if (editor.isDisposed()) {\n                continue;\n            }\n            const editorPane = await this.openEditor(editor, groupId);\n            const editorOptions = {\n                pinned: true,\n                viewState: editorPane?.getViewState()\n            };\n            const result = options?.saveAs ? await editor.saveAs(groupId, options) : await editor.save(groupId, options);\n            saveResults.push(result);\n            if (!result) {\n                break;\n            }\n            if (!editor.matches(result)) {\n                const targetGroups = editor.hasCapability(4 ) ? ( this.editorGroupService.groups.map(group => group.id) ) : [groupId];\n                for (const targetGroup of targetGroups) {\n                    if (result instanceof EditorInput) {\n                        await this.replaceEditors([{ editor, replacement: result, options: editorOptions }], targetGroup);\n                    }\n                    else {\n                        await this.replaceEditors([{ editor, replacement: { ...result, options: editorOptions } }], targetGroup);\n                    }\n                }\n            }\n        }\n        return {\n            success: saveResults.every(result => !!result),\n            editors: coalesce(saveResults)\n        };\n    }\n    saveAll(options) {\n        return this.save(this.getAllModifiedEditors(options), options);\n    }\n    async revert(editors, options) {\n        if (!Array.isArray(editors)) {\n            editors = [editors];\n        }\n        const uniqueEditors = this.getUniqueEditors(editors);\n        await Promises.settled(( uniqueEditors.map(async ({ groupId, editor }) => {\n            this.editorGroupService.getGroup(groupId)?.pinEditor(editor);\n            return editor.revert(groupId, options);\n        })));\n        return !( uniqueEditors.some(({ editor }) => editor.isDirty()));\n    }\n    async revertAll(options) {\n        return this.revert(this.getAllModifiedEditors(options), options);\n    }\n    getAllModifiedEditors(options) {\n        const editors = [];\n        for (const group of this.editorGroupService.getGroups(1 )) {\n            for (const editor of group.getEditors(0 )) {\n                if (!editor.isModified()) {\n                    continue;\n                }\n                if ((typeof options?.includeUntitled === 'boolean' || !options?.includeUntitled?.includeScratchpad)\n                    && editor.hasCapability(512 )) {\n                    continue;\n                }\n                if (!options?.includeUntitled && editor.hasCapability(4 )) {\n                    continue;\n                }\n                if (options?.excludeSticky && group.isSticky(editor)) {\n                    continue;\n                }\n                editors.push({ groupId: group.id, editor });\n            }\n        }\n        return editors;\n    }\n    getUniqueEditors(editors) {\n        const uniqueEditors = [];\n        for (const { editor, groupId } of editors) {\n            if (( uniqueEditors.some(uniqueEditor => uniqueEditor.editor.matches(editor)))) {\n                continue;\n            }\n            uniqueEditors.push({ editor, groupId });\n        }\n        return uniqueEditors;\n    }\n    dispose() {\n        super.dispose();\n        this.activeOutOfWorkspaceWatchers.forEach(disposable => dispose(disposable));\n        this.activeOutOfWorkspaceWatchers.clear();\n    }\n};\nEditorService = ( __decorate([\n    ( __param(0, IEditorGroupsService)),\n    ( __param(1, IInstantiationService)),\n    ( __param(2, IFileService)),\n    ( __param(3, IConfigurationService)),\n    ( __param(4, IWorkspaceContextService)),\n    ( __param(5, IUriIdentityService)),\n    ( __param(6, IEditorResolverService)),\n    ( __param(7, IWorkspaceTrustRequestService)),\n    ( __param(8, IHostService)),\n    ( __param(9, ITextEditorService))\n], EditorService));\nexport { EditorService };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport * as glob from 'monaco-editor/esm/vs/base/common/glob.js';\nimport { insert, flatten, distinct, firstOrDefault } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { Disposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { isEqual, extname, basename } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { EditorResolution, EditorActivation } from 'monaco-editor/esm/vs/platform/editor/common/editor.js';\nimport { isResourceSideBySideEditorInput, EditorResourceAccessor, SideBySideEditor, isEditorInputWithOptions, DEFAULT_EDITOR_ASSOCIATION, isResourceDiffEditorInput, isEditorInputWithOptionsAndGroup, isResourceMergeEditorInput, isUntitledResourceEditorInput } from '../../../common/editor.js';\nimport { IEditorGroupsService } from '../common/editorGroupsService.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { globMatchesResource, editorsAssociationsSettingId, RegisteredEditorPriority, priorityToRank } from '../common/editorResolverService.js';\nimport { IQuickInputService } from 'monaco-editor/esm/vs/platform/quickinput/common/quickInput.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { Severity, INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { findGroup } from '../common/editorGroupFinder.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { SideBySideEditorInput } from '../../../common/editor/sideBySideEditorInput.js';\nimport { PauseableEmitter } from 'monaco-editor/esm/vs/base/common/event.js';\nlet EditorResolverService = class EditorResolverService extends Disposable {\n    static { this.configureDefaultID = 'promptOpenWith.configureDefault'; }\n    static { this.cacheStorageID = 'editorOverrideService.cache'; }\n    static { this.conflictingDefaultsStorageID = 'editorOverrideService.conflictingDefaults'; }\n    constructor(editorGroupService, instantiationService, configurationService, quickInputService, notificationService, telemetryService, storageService, extensionService, logService) {\n        super();\n        this.editorGroupService = editorGroupService;\n        this.instantiationService = instantiationService;\n        this.configurationService = configurationService;\n        this.quickInputService = quickInputService;\n        this.notificationService = notificationService;\n        this.telemetryService = telemetryService;\n        this.storageService = storageService;\n        this.extensionService = extensionService;\n        this.logService = logService;\n        this._onDidChangeEditorRegistrations = this._register(( new PauseableEmitter()));\n        this.onDidChangeEditorRegistrations = this._onDidChangeEditorRegistrations.event;\n        this._editors = ( new Map());\n        this._flattenedEditors = ( new Map());\n        this._shouldReFlattenEditors = true;\n        this.cache = ( new Set(\n            JSON.parse(this.storageService.get(EditorResolverService.cacheStorageID, 0 , JSON.stringify([])))\n        ));\n        this.storageService.remove(EditorResolverService.cacheStorageID, 0 );\n        this._register(this.storageService.onWillSaveState(() => {\n            this.cacheEditors();\n        }));\n        this.extensionService.onDidRegisterExtensions(() => {\n            this.cache = undefined;\n        });\n    }\n    resolveUntypedInputAndGroup(editor, preferredGroup) {\n        const untypedEditor = editor;\n        const [group, activation] = this.instantiationService.invokeFunction(findGroup, untypedEditor, preferredGroup);\n        return [untypedEditor, group, activation];\n    }\n    async resolveEditor(editor, preferredGroup) {\n        this._flattenedEditors = this._flattenEditorsMap();\n        if (isResourceSideBySideEditorInput(editor)) {\n            return this.doResolveSideBySideEditor(editor, preferredGroup);\n        }\n        const resolvedUntypedAndGroup = this.resolveUntypedInputAndGroup(editor, preferredGroup);\n        if (!resolvedUntypedAndGroup) {\n            return 2 ;\n        }\n        const [untypedEditor, group, activation] = resolvedUntypedAndGroup;\n        if (activation) {\n            untypedEditor.options = { ...untypedEditor.options, activation };\n        }\n        let resource = EditorResourceAccessor.getCanonicalUri(untypedEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n        if (this.cache && resource && this.resourceMatchesCache(resource)) {\n            await this.extensionService.whenInstalledExtensionsRegistered();\n        }\n        if (resource === undefined) {\n            resource = ( URI.from({ scheme: Schemas.untitled }));\n        }\n        else if (resource.scheme === undefined || resource === null) {\n            return 2 ;\n        }\n        if (untypedEditor.options?.override === EditorResolution.PICK) {\n            const picked = await this.doPickEditor(untypedEditor);\n            if (!picked) {\n                return 1 ;\n            }\n            untypedEditor.options = picked;\n        }\n        let { editor: selectedEditor, conflictingDefault } = this.getEditor(resource, untypedEditor.options?.override);\n        if (!selectedEditor && (untypedEditor.options?.override || isEditorInputWithOptions(editor))) {\n            return 2 ;\n        }\n        else if (!selectedEditor) {\n            const resolvedEditor = this.getEditor(resource, DEFAULT_EDITOR_ASSOCIATION.id);\n            selectedEditor = resolvedEditor?.editor;\n            conflictingDefault = resolvedEditor?.conflictingDefault;\n            if (!selectedEditor) {\n                return 2 ;\n            }\n        }\n        if (isResourceDiffEditorInput(untypedEditor) && untypedEditor.options?.override === undefined) {\n            let resource2 = EditorResourceAccessor.getCanonicalUri(untypedEditor, { supportSideBySide: SideBySideEditor.SECONDARY });\n            if (!resource2) {\n                resource2 = ( URI.from({ scheme: Schemas.untitled }));\n            }\n            const { editor: selectedEditor2 } = this.getEditor(resource2, undefined);\n            if (!selectedEditor2 || selectedEditor.editorInfo.id !== selectedEditor2.editorInfo.id) {\n                const { editor: selectedDiff, conflictingDefault: conflictingDefaultDiff } = this.getEditor(resource, DEFAULT_EDITOR_ASSOCIATION.id);\n                selectedEditor = selectedDiff;\n                conflictingDefault = conflictingDefaultDiff;\n            }\n            if (!selectedEditor) {\n                return 2 ;\n            }\n        }\n        untypedEditor.options = { override: selectedEditor.editorInfo.id, ...untypedEditor.options };\n        if (selectedEditor.editorFactoryObject.createDiffEditorInput === undefined && isResourceDiffEditorInput(untypedEditor)) {\n            return 2 ;\n        }\n        const input = await this.doResolveEditor(untypedEditor, group, selectedEditor);\n        if (conflictingDefault && input) {\n            await this.doHandleConflictingDefaults(resource, selectedEditor.editorInfo.label, untypedEditor, input.editor, group);\n        }\n        if (input) {\n            this.sendEditorResolutionTelemetry(input.editor);\n            if (input.editor.editorId !== selectedEditor.editorInfo.id) {\n                this.logService.warn(`Editor ID Mismatch: ${input.editor.editorId} !== ${selectedEditor.editorInfo.id}. This will cause bugs. Please ensure editorInput.editorId matches the registered id`);\n            }\n            return { ...input, group };\n        }\n        return 1 ;\n    }\n    async doResolveSideBySideEditor(editor, preferredGroup) {\n        const primaryResolvedEditor = await this.resolveEditor(editor.primary, preferredGroup);\n        if (!isEditorInputWithOptionsAndGroup(primaryResolvedEditor)) {\n            return 2 ;\n        }\n        const secondaryResolvedEditor = await this.resolveEditor(editor.secondary, primaryResolvedEditor.group ?? preferredGroup);\n        if (!isEditorInputWithOptionsAndGroup(secondaryResolvedEditor)) {\n            return 2 ;\n        }\n        return {\n            group: primaryResolvedEditor.group ?? secondaryResolvedEditor.group,\n            editor: this.instantiationService.createInstance(SideBySideEditorInput, editor.label, editor.description, secondaryResolvedEditor.editor, primaryResolvedEditor.editor),\n            options: editor.options\n        };\n    }\n    bufferChangeEvents(callback) {\n        this._onDidChangeEditorRegistrations.pause();\n        try {\n            callback();\n        }\n        finally {\n            this._onDidChangeEditorRegistrations.resume();\n        }\n    }\n    registerEditor(globPattern, editorInfo, options, editorFactoryObject) {\n        let registeredEditor = this._editors.get(globPattern);\n        if (registeredEditor === undefined) {\n            registeredEditor = ( new Map());\n            this._editors.set(globPattern, registeredEditor);\n        }\n        let editorsWithId = registeredEditor.get(editorInfo.id);\n        if (editorsWithId === undefined) {\n            editorsWithId = [];\n        }\n        const remove = insert(editorsWithId, {\n            globPattern,\n            editorInfo,\n            options,\n            editorFactoryObject\n        });\n        registeredEditor.set(editorInfo.id, editorsWithId);\n        this._shouldReFlattenEditors = true;\n        this._onDidChangeEditorRegistrations.fire();\n        return toDisposable(() => {\n            remove();\n            if (editorsWithId && editorsWithId.length === 0) {\n                registeredEditor?.delete(editorInfo.id);\n            }\n            this._shouldReFlattenEditors = true;\n            this._onDidChangeEditorRegistrations.fire();\n        });\n    }\n    getAssociationsForResource(resource) {\n        const associations = this.getAllUserAssociations();\n        const matchingAssociations = associations.filter(association => association.filenamePattern && globMatchesResource(association.filenamePattern, resource));\n        const allEditors = this._registeredEditors;\n        return matchingAssociations.filter(association => allEditors.find(c => c.editorInfo.id === association.viewType));\n    }\n    getAllUserAssociations() {\n        const inspectedEditorAssociations = this.configurationService.inspect(editorsAssociationsSettingId) || {};\n        const workspaceAssociations = inspectedEditorAssociations.workspaceValue ?? {};\n        const userAssociations = inspectedEditorAssociations.userValue ?? {};\n        const rawAssociations = { ...workspaceAssociations };\n        for (const [key, value] of Object.entries(userAssociations)) {\n            if (rawAssociations[key] === undefined) {\n                rawAssociations[key] = value;\n            }\n        }\n        const associations = [];\n        for (const [key, value] of Object.entries(rawAssociations)) {\n            const association = {\n                filenamePattern: key,\n                viewType: value\n            };\n            associations.push(association);\n        }\n        return associations;\n    }\n    _flattenEditorsMap() {\n        if (!this._shouldReFlattenEditors) {\n            return this._flattenedEditors;\n        }\n        this._shouldReFlattenEditors = false;\n        const editors = ( new Map());\n        for (const [glob, value] of this._editors) {\n            const registeredEditors = [];\n            for (const editors of ( value.values())) {\n                let registeredEditor = undefined;\n                for (const editor of editors) {\n                    if (!registeredEditor) {\n                        registeredEditor = {\n                            editorInfo: editor.editorInfo,\n                            globPattern: editor.globPattern,\n                            options: {},\n                            editorFactoryObject: {}\n                        };\n                    }\n                    registeredEditor.options = { ...registeredEditor.options, ...editor.options };\n                    registeredEditor.editorFactoryObject = { ...registeredEditor.editorFactoryObject, ...editor.editorFactoryObject };\n                }\n                if (registeredEditor) {\n                    registeredEditors.push(registeredEditor);\n                }\n            }\n            editors.set(glob, registeredEditors);\n        }\n        return editors;\n    }\n    get _registeredEditors() {\n        return flatten(Array.from(( this._flattenedEditors.values())));\n    }\n    updateUserAssociations(globPattern, editorID) {\n        const newAssociation = { viewType: editorID, filenamePattern: globPattern };\n        const currentAssociations = this.getAllUserAssociations();\n        const newSettingObject = Object.create(null);\n        for (const association of [...currentAssociations, newAssociation]) {\n            if (association.filenamePattern) {\n                newSettingObject[association.filenamePattern] = association.viewType;\n            }\n        }\n        this.configurationService.updateValue(editorsAssociationsSettingId, newSettingObject);\n    }\n    findMatchingEditors(resource) {\n        const userSettings = this.getAssociationsForResource(resource);\n        const matchingEditors = [];\n        for (const [key, editors] of this._flattenedEditors) {\n            for (const editor of editors) {\n                const foundInSettings = userSettings.find(setting => setting.viewType === editor.editorInfo.id);\n                if ((foundInSettings && editor.editorInfo.priority !== RegisteredEditorPriority.exclusive) || globMatchesResource(key, resource)) {\n                    matchingEditors.push(editor);\n                }\n            }\n        }\n        return matchingEditors.sort((a, b) => {\n            if (priorityToRank(b.editorInfo.priority) === priorityToRank(a.editorInfo.priority) && typeof b.globPattern === 'string' && typeof a.globPattern === 'string') {\n                return b.globPattern.length - a.globPattern.length;\n            }\n            return priorityToRank(b.editorInfo.priority) - priorityToRank(a.editorInfo.priority);\n        });\n    }\n    getEditors(resource) {\n        this._flattenedEditors = this._flattenEditorsMap();\n        if (URI.isUri(resource)) {\n            const editors = this.findMatchingEditors(resource);\n            if (editors.find(e => e.editorInfo.priority === RegisteredEditorPriority.exclusive)) {\n                return [];\n            }\n            return ( editors.map(editor => editor.editorInfo));\n        }\n        return distinct(( this._registeredEditors.map(editor => editor.editorInfo)), editor => editor.id);\n    }\n    getEditor(resource, editorId) {\n        const findMatchingEditor = (editors, viewType) => {\n            return editors.find((editor) => {\n                if (editor.options && editor.options.canSupportResource !== undefined) {\n                    return editor.editorInfo.id === viewType && editor.options.canSupportResource(resource);\n                }\n                return editor.editorInfo.id === viewType;\n            });\n        };\n        if (editorId && editorId !== EditorResolution.EXCLUSIVE_ONLY) {\n            const registeredEditors = this._registeredEditors;\n            return {\n                editor: findMatchingEditor(registeredEditors, editorId),\n                conflictingDefault: false\n            };\n        }\n        const editors = this.findMatchingEditors(resource);\n        const associationsFromSetting = this.getAssociationsForResource(resource);\n        const minPriority = editorId === EditorResolution.EXCLUSIVE_ONLY ? RegisteredEditorPriority.exclusive : RegisteredEditorPriority.builtin;\n        let possibleEditors = editors.filter(editor => priorityToRank(editor.editorInfo.priority) >= priorityToRank(minPriority) && editor.editorInfo.id !== DEFAULT_EDITOR_ASSOCIATION.id);\n        if (possibleEditors.length === 0) {\n            return {\n                editor: associationsFromSetting[0] && minPriority !== RegisteredEditorPriority.exclusive ? findMatchingEditor(editors, associationsFromSetting[0].viewType) : undefined,\n                conflictingDefault: false\n            };\n        }\n        const selectedViewType = possibleEditors[0].editorInfo.priority === RegisteredEditorPriority.exclusive ?\n            possibleEditors[0].editorInfo.id :\n            associationsFromSetting[0]?.viewType || possibleEditors[0].editorInfo.id;\n        let conflictingDefault = false;\n        possibleEditors = possibleEditors.filter(editor => editor.editorInfo.priority !== RegisteredEditorPriority.exclusive);\n        if (associationsFromSetting.length === 0 && possibleEditors.length > 1) {\n            conflictingDefault = true;\n        }\n        return {\n            editor: findMatchingEditor(editors, selectedViewType),\n            conflictingDefault\n        };\n    }\n    async doResolveEditor(editor, group, selectedEditor) {\n        let options = editor.options;\n        const resource = EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n        if (options && typeof options.activation === 'undefined') {\n            options = { ...options, activation: options.preserveFocus ? EditorActivation.RESTORE : undefined };\n        }\n        if (isResourceMergeEditorInput(editor)) {\n            if (!selectedEditor.editorFactoryObject.createMergeEditorInput) {\n                return;\n            }\n            const inputWithOptions = await selectedEditor.editorFactoryObject.createMergeEditorInput(editor, group);\n            return { editor: inputWithOptions.editor, options: inputWithOptions.options ?? options };\n        }\n        if (isResourceDiffEditorInput(editor)) {\n            if (!selectedEditor.editorFactoryObject.createDiffEditorInput) {\n                return;\n            }\n            const inputWithOptions = await selectedEditor.editorFactoryObject.createDiffEditorInput(editor, group);\n            return { editor: inputWithOptions.editor, options: inputWithOptions.options ?? options };\n        }\n        if (isResourceSideBySideEditorInput(editor)) {\n            throw new Error(`Untyped side by side editor input not supported here.`);\n        }\n        if (isUntitledResourceEditorInput(editor)) {\n            if (!selectedEditor.editorFactoryObject.createUntitledEditorInput) {\n                return;\n            }\n            const inputWithOptions = await selectedEditor.editorFactoryObject.createUntitledEditorInput(editor, group);\n            return { editor: inputWithOptions.editor, options: inputWithOptions.options ?? options };\n        }\n        if (resource === undefined) {\n            throw new Error(`Undefined resource on non untitled editor input.`);\n        }\n        const singleEditorPerResource = typeof selectedEditor.options?.singlePerResource === 'function' ? selectedEditor.options.singlePerResource() : selectedEditor.options?.singlePerResource;\n        if (singleEditorPerResource) {\n            const foundInput = await this.moveExistingEditorForResource(resource, selectedEditor.editorInfo.id, group);\n            if (foundInput) {\n                return { editor: foundInput, options };\n            }\n        }\n        if (!selectedEditor.editorFactoryObject.createEditorInput) {\n            return;\n        }\n        const inputWithOptions = await selectedEditor.editorFactoryObject.createEditorInput(editor, group);\n        options = inputWithOptions.options ?? options;\n        const input = inputWithOptions.editor;\n        return { editor: input, options };\n    }\n    async moveExistingEditorForResource(resource, viewType, targetGroup) {\n        const editorInfoForResource = this.findExistingEditorsForResource(resource, viewType);\n        if (!editorInfoForResource.length) {\n            return;\n        }\n        const editorToUse = editorInfoForResource[0];\n        for (const { editor, group } of editorInfoForResource) {\n            if (editor !== editorToUse.editor) {\n                const closed = await group.closeEditor(editor);\n                if (!closed) {\n                    return;\n                }\n            }\n        }\n        if (targetGroup.id !== editorToUse.group.id) {\n            editorToUse.group.moveEditor(editorToUse.editor, targetGroup);\n            return editorToUse.editor;\n        }\n        return;\n    }\n    findExistingEditorsForResource(resource, editorId) {\n        const out = [];\n        const orderedGroups = distinct([\n            ...this.editorGroupService.groups,\n        ]);\n        for (const group of orderedGroups) {\n            for (const editor of group.editors) {\n                if (isEqual(editor.resource, resource) && editor.editorId === editorId) {\n                    out.push({ editor, group });\n                }\n            }\n        }\n        return out;\n    }\n    async doHandleConflictingDefaults(resource, editorName, untypedInput, currentEditor, group) {\n        const editors = this.findMatchingEditors(resource);\n        const storedChoices = JSON.parse(this.storageService.get(EditorResolverService.conflictingDefaultsStorageID, 0 , '{}'));\n        const globForResource = `*${extname(resource)}`;\n        const writeCurrentEditorsToStorage = () => {\n            storedChoices[globForResource] = [];\n            editors.forEach(editor => storedChoices[globForResource].push(editor.editorInfo.id));\n            this.storageService.store(EditorResolverService.conflictingDefaultsStorageID, JSON.stringify(storedChoices), 0 , 1 );\n        };\n        if (storedChoices[globForResource] && storedChoices[globForResource].find(editorID => editorID === currentEditor.editorId)) {\n            return;\n        }\n        const handle = this.notificationService.prompt(Severity.Warning, ( localize(\n            'editorResolver.conflictingDefaults',\n            'There are multiple default editors available for the resource.'\n        )), [{\n                label: ( localize('editorResolver.configureDefault', 'Configure Default')),\n                run: async () => {\n                    const picked = await this.doPickEditor(untypedInput, true);\n                    if (!picked) {\n                        return;\n                    }\n                    untypedInput.options = picked;\n                    const replacementEditor = await this.resolveEditor(untypedInput, group);\n                    if (replacementEditor === 1  || replacementEditor === 2 ) {\n                        return;\n                    }\n                    group.replaceEditors([\n                        {\n                            editor: currentEditor,\n                            replacement: replacementEditor.editor,\n                            options: replacementEditor.options ?? picked,\n                        }\n                    ]);\n                }\n            },\n            {\n                label: ( localize('editorResolver.keepDefault', 'Keep {0}', editorName)),\n                run: writeCurrentEditorsToStorage\n            }\n        ]);\n        const onCloseListener = handle.onDidClose(() => {\n            writeCurrentEditorsToStorage();\n            onCloseListener.dispose();\n        });\n    }\n    mapEditorsToQuickPickEntry(resource, showDefaultPicker) {\n        const currentEditor = firstOrDefault(this.editorGroupService.activeGroup.findEditors(resource));\n        let registeredEditors = resource.scheme === Schemas.untitled ? this._registeredEditors.filter(e => e.editorInfo.priority !== RegisteredEditorPriority.exclusive) : this.findMatchingEditors(resource);\n        registeredEditors = distinct(registeredEditors, c => c.editorInfo.id);\n        const defaultSetting = this.getAssociationsForResource(resource)[0]?.viewType;\n        registeredEditors = registeredEditors.sort((a, b) => {\n            if (a.editorInfo.id === DEFAULT_EDITOR_ASSOCIATION.id) {\n                return -1;\n            }\n            else if (b.editorInfo.id === DEFAULT_EDITOR_ASSOCIATION.id) {\n                return 1;\n            }\n            else {\n                return priorityToRank(b.editorInfo.priority) - priorityToRank(a.editorInfo.priority);\n            }\n        });\n        const quickPickEntries = [];\n        const currentlyActiveLabel = ( localize('promptOpenWith.currentlyActive', \"Active\"));\n        const currentDefaultLabel = ( localize('promptOpenWith.currentDefault', \"Default\"));\n        const currentDefaultAndActiveLabel = ( localize('promptOpenWith.currentDefaultAndActive', \"Active and Default\"));\n        let defaultViewType = defaultSetting;\n        if (!defaultViewType && registeredEditors.length > 2 && registeredEditors[1]?.editorInfo.priority !== RegisteredEditorPriority.option) {\n            defaultViewType = registeredEditors[1]?.editorInfo.id;\n        }\n        if (!defaultViewType) {\n            defaultViewType = DEFAULT_EDITOR_ASSOCIATION.id;\n        }\n        registeredEditors.forEach(editor => {\n            const currentViewType = currentEditor?.editorId ?? DEFAULT_EDITOR_ASSOCIATION.id;\n            const isActive = currentEditor ? editor.editorInfo.id === currentViewType : false;\n            const isDefault = editor.editorInfo.id === defaultViewType;\n            const quickPickEntry = {\n                id: editor.editorInfo.id,\n                label: editor.editorInfo.label,\n                description: isActive && isDefault ? currentDefaultAndActiveLabel : isActive ? currentlyActiveLabel : isDefault ? currentDefaultLabel : undefined,\n                detail: editor.editorInfo.detail ?? editor.editorInfo.priority,\n            };\n            quickPickEntries.push(quickPickEntry);\n        });\n        if (!showDefaultPicker && extname(resource) !== '') {\n            const separator = { type: 'separator' };\n            quickPickEntries.push(separator);\n            const configureDefaultEntry = {\n                id: EditorResolverService.configureDefaultID,\n                label: ( localize(\n                    'promptOpenWith.configureDefault',\n                    \"Configure default editor for '{0}'...\",\n                    `*${extname(resource)}`\n                )),\n            };\n            quickPickEntries.push(configureDefaultEntry);\n        }\n        return quickPickEntries;\n    }\n    async doPickEditor(editor, showDefaultPicker) {\n        let resource = EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n        if (resource === undefined) {\n            resource = ( URI.from({ scheme: Schemas.untitled }));\n        }\n        const editorPicks = this.mapEditorsToQuickPickEntry(resource, showDefaultPicker);\n        const editorPicker = this.quickInputService.createQuickPick();\n        const placeHolderMessage = showDefaultPicker ?\n            ( localize(\n                'promptOpenWith.updateDefaultPlaceHolder',\n                \"Select new default editor for '{0}'\",\n                `*${extname(resource)}`\n            )) :\n            ( localize(\n                'promptOpenWith.placeHolder',\n                \"Select editor for '{0}'\",\n                basename(resource)\n            ));\n        editorPicker.placeholder = placeHolderMessage;\n        editorPicker.canAcceptInBackground = true;\n        editorPicker.items = editorPicks;\n        const firstItem = editorPicker.items.find(item => item.type === 'item');\n        if (firstItem) {\n            editorPicker.selectedItems = [firstItem];\n        }\n        const picked = await ( new Promise(resolve => {\n            editorPicker.onDidAccept(e => {\n                let result = undefined;\n                if (editorPicker.selectedItems.length === 1) {\n                    result = {\n                        item: editorPicker.selectedItems[0],\n                        keyMods: editorPicker.keyMods,\n                        openInBackground: e.inBackground\n                    };\n                }\n                if (resource && showDefaultPicker && result?.item.id) {\n                    this.updateUserAssociations(`*${extname(resource)}`, result.item.id);\n                }\n                resolve(result);\n            });\n            editorPicker.onDidHide(() => resolve(undefined));\n            editorPicker.onDidTriggerItemButton(e => {\n                resolve({ item: e.item, openInBackground: false });\n                if (resource && e.item && e.item.id) {\n                    this.updateUserAssociations(`*${extname(resource)}`, e.item.id);\n                }\n            });\n            editorPicker.show();\n        }));\n        editorPicker.dispose();\n        if (picked) {\n            if (picked.item.id === EditorResolverService.configureDefaultID) {\n                return this.doPickEditor(editor, true);\n            }\n            const targetOptions = {\n                ...editor.options,\n                override: picked.item.id,\n                preserveFocus: picked.openInBackground || editor.options?.preserveFocus,\n            };\n            return targetOptions;\n        }\n        return undefined;\n    }\n    sendEditorResolutionTelemetry(chosenInput) {\n        if (chosenInput.editorId) {\n            this.telemetryService.publicLog2('override.viewType', { viewType: chosenInput.editorId });\n        }\n    }\n    cacheEditors() {\n        const cacheStorage = ( new Set());\n        for (const [globPattern, contribPoint] of this._flattenedEditors) {\n            const nonOptional = !!contribPoint.find(c => c.editorInfo.priority !== RegisteredEditorPriority.option && c.editorInfo.id !== DEFAULT_EDITOR_ASSOCIATION.id);\n            if (!nonOptional) {\n                continue;\n            }\n            if (glob.isRelativePattern(globPattern)) {\n                cacheStorage.add(`${globPattern.pattern}`);\n            }\n            else {\n                cacheStorage.add(globPattern);\n            }\n        }\n        const userAssociations = this.getAllUserAssociations();\n        for (const association of userAssociations) {\n            if (association.filenamePattern) {\n                cacheStorage.add(association.filenamePattern);\n            }\n        }\n        this.storageService.store(EditorResolverService.cacheStorageID, JSON.stringify(Array.from(cacheStorage)), 0 , 1 );\n    }\n    resourceMatchesCache(resource) {\n        if (!this.cache) {\n            return false;\n        }\n        for (const cacheEntry of this.cache) {\n            if (globMatchesResource(cacheEntry, resource)) {\n                return true;\n            }\n        }\n        return false;\n    }\n};\nEditorResolverService = ( __decorate([\n    ( __param(0, IEditorGroupsService)),\n    ( __param(1, IInstantiationService)),\n    ( __param(2, IConfigurationService)),\n    ( __param(3, IQuickInputService)),\n    ( __param(4, INotificationService)),\n    ( __param(5, ITelemetryService)),\n    ( __param(6, IStorageService)),\n    ( __param(7, IExtensionService)),\n    ( __param(8, ILogService))\n], EditorResolverService));\nexport { EditorResolverService };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .part.statusbar{box-sizing:border-box;cursor:default;display:flex;font-size:12px;height:22px;overflow:hidden;width:100%}.monaco-workbench:not(.reduce-motion) .part.statusbar{transition:background-color .15s ease-out}.monaco-workbench .part.statusbar.status-border-top:after{background-color:var(--status-border-top-color);content:\\\"\\\";height:1px;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:5}.monaco-workbench .part.statusbar>.left-items,.monaco-workbench .part.statusbar>.right-items{display:flex}.monaco-workbench .part.statusbar>.right-items{flex-direction:row-reverse;flex-wrap:wrap}.monaco-workbench .part.statusbar>.left-items{flex-grow:1}.monaco-workbench .part.statusbar>.items-container>.statusbar-item{display:inline-block;font-variant-numeric:tabular-nums;height:100%;line-height:22px;max-width:40vw;vertical-align:top}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak{position:relative}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container{height:5px;left:calc(50% - 5px);position:absolute;top:-5px;width:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container:before{border-bottom-style:solid;border-bottom-width:5px;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\";position:fixed}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{margin-left:3px;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label{margin-left:0;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{margin-left:3px;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.left.first-visible-item{padding-left:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.right.last-visible-item{margin-right:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.left.first-visible-item,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.right.last-visible-item{padding-left:0;padding-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color>.statusbar-item-label{margin-left:0;margin-right:0;padding-left:10px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.has-background-color>.statusbar-item-label{padding-left:3px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right.has-background-color>.statusbar-item-label{padding-left:10px;padding-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{align-items:center;cursor:pointer;display:flex;height:100%;outline-width:0;overflow:hidden;padding:0 5px;text-overflow:ellipsis;white-space:pre}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{padding:0 3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a:hover:not(.disabled){text-decoration:none}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a.disabled{cursor:default}.monaco-workbench .part.statusbar>.items-container>.statusbar-item span.codicon{color:inherit;font-size:14px;text-align:center}.monaco-workbench .part.statusbar>.items-container>.statusbar-item .status-bar-info{background-color:var(--vscode-statusBarItem-prominentBackground);color:var(--vscode-statusBarItem-prominentForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a.status-bar-info:hover:not(.disabled){background-color:var(--vscode-statusBarItem-prominentHoverBackground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){outline:1px solid var(--vscode-contrastActiveBorder)!important;outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){background-color:var(--vscode-statusBarItem-activeBackground)!important}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){outline:1px dashed var(--vscode-contrastActiveBorder);outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-hoverBackground)}\";\nn(css,{});\nexport { css, css as default };\n","import { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IStatusbarService } from '../../../services/statusbar/browser/statusbar.js';\nimport { Action } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { KeybindingsRegistry } from 'monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js';\nimport { registerAction2, Action2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { StatusBarFocused } from '../../../common/contextkeys.js';\nclass ToggleStatusbarEntryVisibilityAction extends Action {\n    constructor(id, label, model) {\n        super(id, label, undefined, true);\n        this.model = model;\n        this.checked = !model.isHidden(id);\n    }\n    async run() {\n        if (this.model.isHidden(this.id)) {\n            this.model.show(this.id);\n        }\n        else {\n            this.model.hide(this.id);\n        }\n    }\n}\nclass HideStatusbarEntryAction extends Action {\n    constructor(id, name, model) {\n        super(id, ( localize('hide', \"Hide '{0}'\", name)), undefined, true);\n        this.model = model;\n    }\n    async run() {\n        this.model.hide(this.id);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'workbench.statusBar.focusPrevious',\n    weight: 200 ,\n    primary: 15 ,\n    secondary: [16 ],\n    when: StatusBarFocused,\n    handler: (accessor) => {\n        const statusBarService = accessor.get(IStatusbarService);\n        statusBarService.focusPreviousEntry();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'workbench.statusBar.focusNext',\n    weight: 200 ,\n    primary: 17 ,\n    secondary: [18 ],\n    when: StatusBarFocused,\n    handler: (accessor) => {\n        const statusBarService = accessor.get(IStatusbarService);\n        statusBarService.focusNextEntry();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'workbench.statusBar.focusFirst',\n    weight: 200 ,\n    primary: 14 ,\n    when: StatusBarFocused,\n    handler: (accessor) => {\n        const statusBarService = accessor.get(IStatusbarService);\n        statusBarService.focus(false);\n        statusBarService.focusNextEntry();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'workbench.statusBar.focusLast',\n    weight: 200 ,\n    primary: 13 ,\n    when: StatusBarFocused,\n    handler: (accessor) => {\n        const statusBarService = accessor.get(IStatusbarService);\n        statusBarService.focus(false);\n        statusBarService.focusPreviousEntry();\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'workbench.statusBar.clearFocus',\n    weight: 200 ,\n    primary: 9 ,\n    when: StatusBarFocused,\n    handler: (accessor) => {\n        const statusBarService = accessor.get(IStatusbarService);\n        const editorService = accessor.get(IEditorService);\n        if (statusBarService.isEntryFocused()) {\n            statusBarService.focus(false);\n        }\n        else if (editorService.activeEditorPane) {\n            editorService.activeEditorPane.focus();\n        }\n    }\n});\nclass FocusStatusBarAction extends Action2 {\n    constructor() {\n        super({\n            id: 'workbench.action.focusStatusBar',\n            title: { value: ( localize('focusStatusBar', \"Focus Status Bar\")), original: 'Focus Status Bar' },\n            category: Categories.View,\n            f1: true\n        });\n    }\n    async run(accessor) {\n        const layoutService = accessor.get(IWorkbenchLayoutService);\n        layoutService.focusPart(\"workbench.parts.statusbar\" );\n    }\n}\nregisterAction2(FocusStatusBarAction);\nexport { HideStatusbarEntryAction, ToggleStatusbarEntryVisibilityAction };\n","import { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { isStatusbarEntryLocation } from '../../../services/statusbar/browser/statusbar.js';\nimport { isAncestor, hide, show } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nclass StatusbarViewModel extends Disposable {\n    static { this.HIDDEN_ENTRIES_KEY = 'workbench.statusbar.hidden'; }\n    get entries() { return this._entries.slice(0); }\n    get lastFocusedEntry() {\n        return this._lastFocusedEntry && !this.isHidden(this._lastFocusedEntry.id) ? this._lastFocusedEntry : undefined;\n    }\n    constructor(storageService) {\n        super();\n        this.storageService = storageService;\n        this._onDidChangeEntryVisibility = this._register(( new Emitter()));\n        this.onDidChangeEntryVisibility = this._onDidChangeEntryVisibility.event;\n        this._entries = [];\n        this.hidden = ( new Set());\n        this.restoreState();\n        this.registerListeners();\n    }\n    restoreState() {\n        const hiddenRaw = this.storageService.get(StatusbarViewModel.HIDDEN_ENTRIES_KEY, 0 );\n        if (hiddenRaw) {\n            try {\n                const hiddenArray = JSON.parse(hiddenRaw);\n                this.hidden = ( new Set(hiddenArray));\n            }\n            catch (error) {\n            }\n        }\n    }\n    registerListeners() {\n        this._register(this.storageService.onDidChangeValue(e => this.onDidStorageValueChange(e)));\n    }\n    onDidStorageValueChange(event) {\n        if (event.key === StatusbarViewModel.HIDDEN_ENTRIES_KEY && event.scope === 0 ) {\n            const currentlyHidden = ( new Set(this.hidden));\n            this.hidden.clear();\n            this.restoreState();\n            const changed = ( new Set());\n            for (const id of currentlyHidden) {\n                if (!( this.hidden.has(id))) {\n                    changed.add(id);\n                }\n            }\n            for (const id of this.hidden) {\n                if (!( currentlyHidden.has(id))) {\n                    changed.add(id);\n                }\n            }\n            if (changed.size > 0) {\n                for (const entry of this._entries) {\n                    if (( changed.has(entry.id))) {\n                        this.updateVisibility(entry.id, true);\n                        changed.delete(entry.id);\n                    }\n                }\n            }\n        }\n    }\n    add(entry) {\n        this._entries.push(entry);\n        this.updateVisibility(entry, false);\n        this.sort();\n        this.markFirstLastVisibleEntry();\n    }\n    remove(entry) {\n        const index = this._entries.indexOf(entry);\n        if (index >= 0) {\n            this._entries.splice(index, 1);\n            if (( this._entries.some(\n                otherEntry => isStatusbarEntryLocation(otherEntry.priority.primary) && otherEntry.priority.primary.id === entry.id\n            ))) {\n                this.sort();\n            }\n            this.markFirstLastVisibleEntry();\n        }\n    }\n    isHidden(id) {\n        return ( this.hidden.has(id));\n    }\n    hide(id) {\n        if (!( this.hidden.has(id))) {\n            this.hidden.add(id);\n            this.updateVisibility(id, true);\n            this.saveState();\n        }\n    }\n    show(id) {\n        if (( this.hidden.has(id))) {\n            this.hidden.delete(id);\n            this.updateVisibility(id, true);\n            this.saveState();\n        }\n    }\n    findEntry(container) {\n        return this._entries.find(entry => entry.container === container);\n    }\n    getEntries(alignment) {\n        return this._entries.filter(entry => entry.alignment === alignment);\n    }\n    focusNextEntry() {\n        this.focusEntry(+1, 0);\n    }\n    focusPreviousEntry() {\n        this.focusEntry(-1, this.entries.length - 1);\n    }\n    isEntryFocused() {\n        return !!this.getFocusedEntry();\n    }\n    getFocusedEntry() {\n        return this._entries.find(entry => isAncestor(document.activeElement, entry.container));\n    }\n    focusEntry(delta, restartPosition) {\n        const getVisibleEntry = (start) => {\n            let indexToFocus = start;\n            let entry = (indexToFocus >= 0 && indexToFocus < this._entries.length) ? this._entries[indexToFocus] : undefined;\n            while (entry && this.isHidden(entry.id)) {\n                indexToFocus += delta;\n                entry = (indexToFocus >= 0 && indexToFocus < this._entries.length) ? this._entries[indexToFocus] : undefined;\n            }\n            return entry;\n        };\n        const focused = this.getFocusedEntry();\n        if (focused) {\n            const entry = getVisibleEntry(this._entries.indexOf(focused) + delta);\n            if (entry) {\n                this._lastFocusedEntry = entry;\n                entry.labelContainer.focus();\n                return;\n            }\n        }\n        const entry = getVisibleEntry(restartPosition);\n        if (entry) {\n            this._lastFocusedEntry = entry;\n            entry.labelContainer.focus();\n        }\n    }\n    updateVisibility(arg1, trigger) {\n        if (typeof arg1 === 'string') {\n            const id = arg1;\n            for (const entry of this._entries) {\n                if (entry.id === id) {\n                    this.updateVisibility(entry, trigger);\n                }\n            }\n        }\n        else {\n            const entry = arg1;\n            const isHidden = this.isHidden(entry.id);\n            if (isHidden) {\n                hide(entry.container);\n            }\n            else {\n                show(entry.container);\n            }\n            if (trigger) {\n                this._onDidChangeEntryVisibility.fire({ id: entry.id, visible: !isHidden });\n            }\n            this.markFirstLastVisibleEntry();\n        }\n    }\n    saveState() {\n        if (this.hidden.size > 0) {\n            this.storageService.store(StatusbarViewModel.HIDDEN_ENTRIES_KEY, JSON.stringify(Array.from(( this.hidden.values()))), 0 , 0 );\n        }\n        else {\n            this.storageService.remove(StatusbarViewModel.HIDDEN_ENTRIES_KEY, 0 );\n        }\n    }\n    sort() {\n        const mapEntryWithNumberedPriorityToIndex = ( new Map());\n        const mapEntryWithRelativePriority = ( new Map());\n        for (let i = 0; i < this._entries.length; i++) {\n            const entry = this._entries[i];\n            if (typeof entry.priority.primary === 'number') {\n                mapEntryWithNumberedPriorityToIndex.set(entry, i);\n            }\n            else {\n                let entries = mapEntryWithRelativePriority.get(entry.priority.primary.id);\n                if (!entries) {\n                    entries = [];\n                    mapEntryWithRelativePriority.set(entry.priority.primary.id, entries);\n                }\n                entries.push(entry);\n            }\n        }\n        const sortedEntriesWithNumberedPriority = Array.from(( mapEntryWithNumberedPriorityToIndex.keys()));\n        sortedEntriesWithNumberedPriority.sort((entryA, entryB) => {\n            if (entryA.alignment === entryB.alignment) {\n                if (entryA.priority.primary !== entryB.priority.primary) {\n                    return Number(entryB.priority.primary) - Number(entryA.priority.primary);\n                }\n                if (entryA.priority.secondary !== entryB.priority.secondary) {\n                    return entryB.priority.secondary - entryA.priority.secondary;\n                }\n                return mapEntryWithNumberedPriorityToIndex.get(entryA) - mapEntryWithNumberedPriorityToIndex.get(entryB);\n            }\n            if (entryA.alignment === 0 ) {\n                return -1;\n            }\n            if (entryB.alignment === 0 ) {\n                return 1;\n            }\n            return 0;\n        });\n        let sortedEntries;\n        if (mapEntryWithRelativePriority.size > 0) {\n            sortedEntries = [];\n            for (const entry of sortedEntriesWithNumberedPriority) {\n                const relativeEntries = mapEntryWithRelativePriority.get(entry.id);\n                if (relativeEntries) {\n                    sortedEntries.push(...relativeEntries.filter(entry => isStatusbarEntryLocation(entry.priority.primary) && entry.priority.primary.alignment === 0 ));\n                }\n                sortedEntries.push(entry);\n                if (relativeEntries) {\n                    sortedEntries.push(...relativeEntries.filter(entry => isStatusbarEntryLocation(entry.priority.primary) && entry.priority.primary.alignment === 1 ));\n                }\n                mapEntryWithRelativePriority.delete(entry.id);\n            }\n            for (const [, entries] of mapEntryWithRelativePriority) {\n                sortedEntries.push(...entries);\n            }\n        }\n        else {\n            sortedEntries = sortedEntriesWithNumberedPriority;\n        }\n        this._entries = sortedEntries;\n    }\n    markFirstLastVisibleEntry() {\n        this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(0 ));\n        this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(1 ));\n    }\n    doMarkFirstLastVisibleStatusbarItem(entries) {\n        let firstVisibleItem;\n        let lastVisibleItem;\n        for (const entry of entries) {\n            entry.container.classList.remove('first-visible-item', 'last-visible-item');\n            const isVisible = !this.isHidden(entry.id);\n            if (isVisible) {\n                if (!firstVisibleItem) {\n                    firstVisibleItem = entry;\n                }\n                lastVisibleItem = entry;\n            }\n        }\n        firstVisibleItem?.container.classList.add('first-visible-item');\n        lastVisibleItem?.container.classList.add('last-visible-item');\n    }\n}\nexport { StatusbarViewModel };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { toErrorMessage } from 'monaco-editor/esm/vs/base/common/errorMessage.js';\nimport { Disposable, MutableDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { SimpleIconLabel } from '../../../../base/browser/ui/iconLabel/simpleIconLabel.js';\nimport { ICommandService } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { ShowTooltipCommand } from '../../../services/statusbar/browser/statusbar.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { isThemeColor } from 'monaco-editor/esm/vs/editor/common/editorCommon.js';\nimport { show, hide, addDisposableListener, EventType, EventHelper, append } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { StandardKeyboardEvent } from 'monaco-editor/esm/vs/base/browser/keyboardEvent.js';\nimport { renderIcon, renderLabelWithIcons } from 'monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabels.js';\nimport { syncing, spinningLoading } from 'monaco-editor/esm/vs/platform/theme/common/iconRegistry.js';\nimport { setupCustomHover } from 'monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabelHover.js';\nimport { isMarkdownString, markdownStringEqual } from 'monaco-editor/esm/vs/base/common/htmlContent.js';\nimport { Gesture, EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nlet StatusbarEntryItem = class StatusbarEntryItem extends Disposable {\n    get name() {\n        return assertIsDefined(this.entry).name;\n    }\n    get hasCommand() {\n        return typeof this.entry?.command !== 'undefined';\n    }\n    constructor(container, entry, hoverDelegate, commandService, notificationService, telemetryService, themeService) {\n        super();\n        this.container = container;\n        this.hoverDelegate = hoverDelegate;\n        this.commandService = commandService;\n        this.notificationService = notificationService;\n        this.telemetryService = telemetryService;\n        this.themeService = themeService;\n        this.entry = undefined;\n        this.foregroundListener = this._register(( new MutableDisposable()));\n        this.backgroundListener = this._register(( new MutableDisposable()));\n        this.commandMouseListener = this._register(( new MutableDisposable()));\n        this.commandTouchListener = this._register(( new MutableDisposable()));\n        this.commandKeyboardListener = this._register(( new MutableDisposable()));\n        this.hover = undefined;\n        this.labelContainer = document.createElement('a');\n        this.labelContainer.tabIndex = -1;\n        this.labelContainer.setAttribute('role', 'button');\n        this.labelContainer.className = 'statusbar-item-label';\n        this._register(Gesture.addTarget(this.labelContainer));\n        this.label = ( new StatusBarCodiconLabel(this.labelContainer));\n        this.container.appendChild(this.labelContainer);\n        this.beakContainer = document.createElement('div');\n        this.beakContainer.className = 'status-bar-item-beak-container';\n        this.container.appendChild(this.beakContainer);\n        this.update(entry);\n    }\n    update(entry) {\n        this.label.showProgress = entry.showProgress ?? false;\n        if (!this.entry || entry.text !== this.entry.text) {\n            this.label.text = entry.text;\n            if (entry.text) {\n                show(this.labelContainer);\n            }\n            else {\n                hide(this.labelContainer);\n            }\n        }\n        if (!this.entry || entry.ariaLabel !== this.entry.ariaLabel) {\n            this.container.setAttribute('aria-label', entry.ariaLabel);\n            this.labelContainer.setAttribute('aria-label', entry.ariaLabel);\n        }\n        if (!this.entry || entry.role !== this.entry.role) {\n            this.labelContainer.setAttribute('role', entry.role || 'button');\n        }\n        if (!this.entry || !this.isEqualTooltip(this.entry, entry)) {\n            const hoverContents = isMarkdownString(entry.tooltip) ? { markdown: entry.tooltip, markdownNotSupportedFallback: undefined } : entry.tooltip;\n            if (this.hover) {\n                this.hover.update(hoverContents);\n            }\n            else {\n                this.hover = this._register(setupCustomHover(this.hoverDelegate, this.container, hoverContents));\n            }\n        }\n        if (!this.entry || entry.command !== this.entry.command) {\n            this.commandMouseListener.clear();\n            this.commandTouchListener.clear();\n            this.commandKeyboardListener.clear();\n            const command = entry.command;\n            if (command && (command !== ShowTooltipCommand || this.hover) ) {\n                this.commandMouseListener.value = addDisposableListener(this.labelContainer, EventType.CLICK, () => this.executeCommand(command));\n                this.commandTouchListener.value = addDisposableListener(this.labelContainer, EventType$1.Tap, () => this.executeCommand(command));\n                this.commandKeyboardListener.value = addDisposableListener(this.labelContainer, EventType.KEY_DOWN, e => {\n                    const event = ( new StandardKeyboardEvent(e));\n                    if (event.equals(10 ) || event.equals(3 )) {\n                        EventHelper.stop(e);\n                        this.executeCommand(command);\n                    }\n                });\n                this.labelContainer.classList.remove('disabled');\n            }\n            else {\n                this.labelContainer.classList.add('disabled');\n            }\n        }\n        if (!this.entry || entry.showBeak !== this.entry.showBeak) {\n            if (entry.showBeak) {\n                this.container.classList.add('has-beak');\n            }\n            else {\n                this.container.classList.remove('has-beak');\n            }\n        }\n        if (!this.entry || entry.color !== this.entry.color) {\n            this.applyColor(this.labelContainer, entry.color);\n        }\n        if (!this.entry || entry.backgroundColor !== this.entry.backgroundColor) {\n            this.container.classList.toggle('has-background-color', !!entry.backgroundColor);\n            this.applyColor(this.container, entry.backgroundColor, true);\n        }\n        this.entry = entry;\n    }\n    isEqualTooltip({ tooltip }, { tooltip: otherTooltip }) {\n        if (tooltip === undefined) {\n            return otherTooltip === undefined;\n        }\n        if (isMarkdownString(tooltip)) {\n            return isMarkdownString(otherTooltip) && markdownStringEqual(tooltip, otherTooltip);\n        }\n        return tooltip === otherTooltip;\n    }\n    async executeCommand(command) {\n        if (command === ShowTooltipCommand) {\n            this.hover?.show(true );\n        }\n        else {\n            const id = typeof command === 'string' ? command : command.id;\n            const args = typeof command === 'string' ? [] : command.arguments ?? [];\n            this.telemetryService.publicLog2('workbenchActionExecuted', { id, from: 'status bar' });\n            try {\n                await this.commandService.executeCommand(id, ...args);\n            }\n            catch (error) {\n                this.notificationService.error(toErrorMessage(error));\n            }\n        }\n    }\n    applyColor(container, color, isBackground) {\n        let colorResult = undefined;\n        if (isBackground) {\n            this.backgroundListener.clear();\n        }\n        else {\n            this.foregroundListener.clear();\n        }\n        if (color) {\n            if (isThemeColor(color)) {\n                colorResult = this.themeService.getColorTheme().getColor(color.id)?.toString();\n                const listener = this.themeService.onDidColorThemeChange(theme => {\n                    const colorValue = theme.getColor(color.id)?.toString();\n                    if (isBackground) {\n                        container.style.backgroundColor = colorValue ?? '';\n                    }\n                    else {\n                        container.style.color = colorValue ?? '';\n                    }\n                });\n                if (isBackground) {\n                    this.backgroundListener.value = listener;\n                }\n                else {\n                    this.foregroundListener.value = listener;\n                }\n            }\n            else {\n                colorResult = color;\n            }\n        }\n        if (isBackground) {\n            container.style.backgroundColor = colorResult ?? '';\n        }\n        else {\n            container.style.color = colorResult ?? '';\n        }\n    }\n};\nStatusbarEntryItem = ( __decorate([\n    ( __param(3, ICommandService)),\n    ( __param(4, INotificationService)),\n    ( __param(5, ITelemetryService)),\n    ( __param(6, IThemeService))\n], StatusbarEntryItem));\nclass StatusBarCodiconLabel extends SimpleIconLabel {\n    constructor(container) {\n        super(container);\n        this.container = container;\n        this.progressCodicon = renderIcon(syncing);\n        this.currentText = '';\n        this.currentShowProgress = false;\n    }\n    set showProgress(showProgress) {\n        if (this.currentShowProgress !== showProgress) {\n            this.currentShowProgress = showProgress;\n            this.progressCodicon = renderIcon(showProgress === 'loading' ? spinningLoading : syncing);\n            this.text = this.currentText;\n        }\n    }\n    set text(text) {\n        if (this.currentShowProgress) {\n            if (this.container.firstChild !== this.progressCodicon) {\n                this.container.appendChild(this.progressCodicon);\n            }\n            for (const node of Array.from(this.container.childNodes)) {\n                if (node !== this.progressCodicon) {\n                    node.remove();\n                }\n            }\n            let textContent = text ?? '';\n            if (textContent) {\n                textContent = ` ${textContent}`;\n            }\n            append(this.container, ...renderLabelWithIcons(textContent));\n        }\n        else {\n            super.text = text;\n        }\n    }\n}\nexport { StatusbarEntryItem };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/statusbarpart.css.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { MutableDisposable, dispose, DisposableStore, disposeIfDisposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { Part } from '../../part.js';\nimport { Gesture, EventType as EventType$1 } from 'monaco-editor/esm/vs/base/browser/touch.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { isStatusbarEntryPriority, isStatusbarEntryLocation } from '../../../services/statusbar/browser/statusbar.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { toAction, Separator } from 'monaco-editor/esm/vs/base/common/actions.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { STATUS_BAR_ITEM_HOVER_BACKGROUND, STATUS_BAR_ITEM_COMPACT_HOVER_BACKGROUND, STATUS_BAR_BACKGROUND, STATUS_BAR_NO_FOLDER_BACKGROUND, STATUS_BAR_FOREGROUND, STATUS_BAR_NO_FOLDER_FOREGROUND, STATUS_BAR_ITEM_FOCUS_BORDER, STATUS_BAR_BORDER, STATUS_BAR_NO_FOLDER_BORDER, STATUS_BAR_FOCUS_BORDER } from '../../../common/theme.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { contrastBorder, activeContrastBorder } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { addDisposableListener, EventType, clearNode, EventHelper, createStyleSheet } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { coalesce, equals } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { StandardMouseEvent } from 'monaco-editor/esm/vs/base/browser/mouseEvent.js';\nimport { ToggleStatusbarVisibilityAction } from '../../actions/layoutActions.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { isHighContrast } from 'monaco-editor/esm/vs/platform/theme/common/theme.js';\nimport { hash } from 'monaco-editor/esm/vs/base/common/hash.js';\nimport { IHoverService } from '../../../services/hover/browser/hover.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { ToggleStatusbarEntryVisibilityAction, HideStatusbarEntryAction } from './statusbarActions.js';\nimport { StatusbarViewModel } from './statusbarModel.js';\nimport { StatusbarEntryItem } from './statusbarItem.js';\nimport { StatusBarFocused } from '../../../common/contextkeys.js';\nlet StatusbarPart = class StatusbarPart extends Part {\n    constructor(instantiationService, themeService, contextService, storageService, layoutService, contextMenuService, contextKeyService, hoverService, configurationService) {\n        super(\"workbench.parts.statusbar\" , { hasTitle: false }, themeService, storageService, layoutService);\n        this.instantiationService = instantiationService;\n        this.contextService = contextService;\n        this.storageService = storageService;\n        this.contextMenuService = contextMenuService;\n        this.contextKeyService = contextKeyService;\n        this.hoverService = hoverService;\n        this.configurationService = configurationService;\n        this.minimumWidth = 0;\n        this.maximumWidth = Number.POSITIVE_INFINITY;\n        this.minimumHeight = 22;\n        this.maximumHeight = 22;\n        this.pendingEntries = [];\n        this.viewModel = this._register(( new StatusbarViewModel(this.storageService)));\n        this.onDidChangeEntryVisibility = this.viewModel.onDidChangeEntryVisibility;\n        this.hoverDelegate = new (class {\n            get delay() {\n                if (Date.now() - this.lastHoverHideTime < 200) {\n                    return 0;\n                }\n                return this.configurationService.getValue('workbench.hover.delay');\n            }\n            constructor(configurationService, hoverService) {\n                this.configurationService = configurationService;\n                this.hoverService = hoverService;\n                this.lastHoverHideTime = 0;\n                this.placement = 'element';\n            }\n            showHover(options, focus) {\n                return this.hoverService.showHover({\n                    ...options,\n                    hideOnKeyDown: true\n                }, focus);\n            }\n            onDidHideHover() {\n                this.lastHoverHideTime = Date.now();\n            }\n        })(this.configurationService, this.hoverService);\n        this.compactEntriesDisposable = this._register(( new MutableDisposable()));\n        this.styleOverrides = ( new Set());\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.onDidChangeEntryVisibility(() => this.updateCompactEntries()));\n        this._register(this.contextService.onDidChangeWorkbenchState(() => this.updateStyles()));\n    }\n    addEntry(entry, id, alignment, priorityOrLocation = 0) {\n        let priority;\n        if (isStatusbarEntryPriority(priorityOrLocation)) {\n            priority = priorityOrLocation;\n        }\n        else {\n            priority = {\n                primary: priorityOrLocation,\n                secondary: hash(id)\n            };\n        }\n        if (!this.element) {\n            return this.doAddPendingEntry(entry, id, alignment, priority);\n        }\n        return this.doAddEntry(entry, id, alignment, priority);\n    }\n    doAddPendingEntry(entry, id, alignment, priority) {\n        const pendingEntry = { entry, id, alignment, priority };\n        this.pendingEntries.push(pendingEntry);\n        const accessor = {\n            update: (entry) => {\n                if (pendingEntry.accessor) {\n                    pendingEntry.accessor.update(entry);\n                }\n                else {\n                    pendingEntry.entry = entry;\n                }\n            },\n            dispose: () => {\n                if (pendingEntry.accessor) {\n                    pendingEntry.accessor.dispose();\n                }\n                else {\n                    this.pendingEntries = this.pendingEntries.filter(entry => entry !== pendingEntry);\n                }\n            }\n        };\n        return accessor;\n    }\n    doAddEntry(entry, id, alignment, priority) {\n        const itemContainer = this.doCreateStatusItem(id, alignment, ...coalesce([entry.showBeak ? 'has-beak' : undefined]));\n        const item = this.instantiationService.createInstance(StatusbarEntryItem, itemContainer, entry, this.hoverDelegate);\n        const viewModelEntry = new class {\n            constructor() {\n                this.id = id;\n                this.alignment = alignment;\n                this.priority = priority;\n                this.container = itemContainer;\n                this.labelContainer = item.labelContainer;\n            }\n            get name() { return item.name; }\n            get hasCommand() { return item.hasCommand; }\n        };\n        const { needsFullRefresh } = this.doAddOrRemoveModelEntry(viewModelEntry, true);\n        if (needsFullRefresh) {\n            this.appendStatusbarEntries();\n        }\n        else {\n            this.appendStatusbarEntry(viewModelEntry);\n        }\n        return {\n            update: entry => {\n                item.update(entry);\n            },\n            dispose: () => {\n                const { needsFullRefresh } = this.doAddOrRemoveModelEntry(viewModelEntry, false);\n                if (needsFullRefresh) {\n                    this.appendStatusbarEntries();\n                }\n                else {\n                    itemContainer.remove();\n                }\n                dispose(item);\n            }\n        };\n    }\n    doCreateStatusItem(id, alignment, ...extraClasses) {\n        const itemContainer = document.createElement('div');\n        itemContainer.id = id;\n        itemContainer.classList.add('statusbar-item');\n        if (extraClasses) {\n            itemContainer.classList.add(...extraClasses);\n        }\n        if (alignment === 1 ) {\n            itemContainer.classList.add('right');\n        }\n        else {\n            itemContainer.classList.add('left');\n        }\n        return itemContainer;\n    }\n    doAddOrRemoveModelEntry(entry, add) {\n        const entriesBefore = this.viewModel.entries;\n        if (add) {\n            this.viewModel.add(entry);\n        }\n        else {\n            this.viewModel.remove(entry);\n        }\n        const entriesAfter = this.viewModel.entries;\n        if (add) {\n            entriesBefore.splice(entriesAfter.indexOf(entry), 0, entry);\n        }\n        else {\n            entriesBefore.splice(entriesBefore.indexOf(entry), 1);\n        }\n        const needsFullRefresh = !equals(entriesBefore, entriesAfter);\n        return { needsFullRefresh };\n    }\n    isEntryVisible(id) {\n        return !this.viewModel.isHidden(id);\n    }\n    updateEntryVisibility(id, visible) {\n        if (visible) {\n            this.viewModel.show(id);\n        }\n        else {\n            this.viewModel.hide(id);\n        }\n    }\n    focusNextEntry() {\n        this.viewModel.focusNextEntry();\n    }\n    focusPreviousEntry() {\n        this.viewModel.focusPreviousEntry();\n    }\n    isEntryFocused() {\n        return this.viewModel.isEntryFocused();\n    }\n    focus(preserveEntryFocus = true) {\n        this.getContainer()?.focus();\n        const lastFocusedEntry = this.viewModel.lastFocusedEntry;\n        if (preserveEntryFocus && lastFocusedEntry) {\n            setTimeout(() => lastFocusedEntry.labelContainer.focus(), 0);\n        }\n    }\n    createContentArea(parent) {\n        this.element = parent;\n        const scopedContextKeyService = this.contextKeyService.createScoped(this.element);\n        StatusBarFocused.bindTo(scopedContextKeyService).set(true);\n        this.leftItemsContainer = document.createElement('div');\n        this.leftItemsContainer.classList.add('left-items', 'items-container');\n        this.element.appendChild(this.leftItemsContainer);\n        this.element.tabIndex = 0;\n        this.rightItemsContainer = document.createElement('div');\n        this.rightItemsContainer.classList.add('right-items', 'items-container');\n        this.element.appendChild(this.rightItemsContainer);\n        this._register(addDisposableListener(parent, EventType.CONTEXT_MENU, e => this.showContextMenu(e)));\n        this._register(Gesture.addTarget(parent));\n        this._register(addDisposableListener(parent, EventType$1.Contextmenu, e => this.showContextMenu(e)));\n        this.createInitialStatusbarEntries();\n        return this.element;\n    }\n    createInitialStatusbarEntries() {\n        this.appendStatusbarEntries();\n        while (this.pendingEntries.length) {\n            const pending = this.pendingEntries.shift();\n            if (pending) {\n                pending.accessor = this.addEntry(pending.entry, pending.id, pending.alignment, pending.priority.primary);\n            }\n        }\n    }\n    appendStatusbarEntries() {\n        const leftItemsContainer = assertIsDefined(this.leftItemsContainer);\n        const rightItemsContainer = assertIsDefined(this.rightItemsContainer);\n        clearNode(leftItemsContainer);\n        clearNode(rightItemsContainer);\n        for (const entry of [\n            ...this.viewModel.getEntries(0 ),\n            ...this.viewModel.getEntries(1 ).reverse()\n        ]) {\n            const target = entry.alignment === 0  ? leftItemsContainer : rightItemsContainer;\n            target.appendChild(entry.container);\n        }\n        this.updateCompactEntries();\n    }\n    appendStatusbarEntry(entry) {\n        const entries = this.viewModel.getEntries(entry.alignment);\n        if (entry.alignment === 1 ) {\n            entries.reverse();\n        }\n        const target = assertIsDefined(entry.alignment === 0  ? this.leftItemsContainer : this.rightItemsContainer);\n        const index = entries.indexOf(entry);\n        if (index + 1 === entries.length) {\n            target.appendChild(entry.container);\n        }\n        else {\n            target.insertBefore(entry.container, entries[index + 1].container);\n        }\n        this.updateCompactEntries();\n    }\n    updateCompactEntries() {\n        const entries = this.viewModel.entries;\n        const mapIdToVisibleEntry = ( new Map());\n        for (const entry of entries) {\n            if (!this.viewModel.isHidden(entry.id)) {\n                mapIdToVisibleEntry.set(entry.id, entry);\n            }\n            entry.container.classList.remove('compact-left', 'compact-right');\n        }\n        const compactEntryGroups = ( new Map());\n        for (const entry of ( mapIdToVisibleEntry.values())) {\n            if (isStatusbarEntryLocation(entry.priority.primary) &&\n                entry.priority.primary.compact\n            ) {\n                const locationId = entry.priority.primary.id;\n                const location = mapIdToVisibleEntry.get(locationId);\n                if (!location) {\n                    continue;\n                }\n                let compactEntryGroup = compactEntryGroups.get(locationId);\n                if (!compactEntryGroup) {\n                    compactEntryGroup = ( new Set([entry, location]));\n                    compactEntryGroups.set(locationId, compactEntryGroup);\n                }\n                else {\n                    compactEntryGroup.add(entry);\n                }\n                if (entry.priority.primary.alignment === 0 ) {\n                    location.container.classList.add('compact-left');\n                    entry.container.classList.add('compact-right');\n                }\n                else {\n                    location.container.classList.add('compact-right');\n                    entry.container.classList.add('compact-left');\n                }\n            }\n        }\n        const statusBarItemHoverBackground = this.getColor(STATUS_BAR_ITEM_HOVER_BACKGROUND);\n        const statusBarItemCompactHoverBackground = this.getColor(STATUS_BAR_ITEM_COMPACT_HOVER_BACKGROUND);\n        this.compactEntriesDisposable.value = ( new DisposableStore());\n        if (statusBarItemHoverBackground && statusBarItemCompactHoverBackground && !isHighContrast(this.theme.type)) {\n            for (const [, compactEntryGroup] of compactEntryGroups) {\n                for (const compactEntry of compactEntryGroup) {\n                    if (!compactEntry.hasCommand) {\n                        continue;\n                    }\n                    this.compactEntriesDisposable.value.add(addDisposableListener(compactEntry.labelContainer, EventType.MOUSE_OVER, () => {\n                        compactEntryGroup.forEach(compactEntry => compactEntry.labelContainer.style.backgroundColor = statusBarItemHoverBackground);\n                        compactEntry.labelContainer.style.backgroundColor = statusBarItemCompactHoverBackground;\n                    }));\n                    this.compactEntriesDisposable.value.add(addDisposableListener(compactEntry.labelContainer, EventType.MOUSE_OUT, () => {\n                        compactEntryGroup.forEach(compactEntry => compactEntry.labelContainer.style.backgroundColor = '');\n                    }));\n                }\n            }\n        }\n    }\n    showContextMenu(e) {\n        EventHelper.stop(e, true);\n        const event = ( new StandardMouseEvent(e));\n        let actions = undefined;\n        this.contextMenuService.showContextMenu({\n            getAnchor: () => event,\n            getActions: () => {\n                actions = this.getContextMenuActions(event);\n                return actions;\n            },\n            onHide: () => {\n                if (actions) {\n                    disposeIfDisposable(actions);\n                }\n            }\n        });\n    }\n    getContextMenuActions(event) {\n        const actions = [];\n        actions.push(toAction({ id: ToggleStatusbarVisibilityAction.ID, label: ( localize('hideStatusBar', \"Hide Status Bar\")), run: () => this.instantiationService.invokeFunction(accessor => ( new ToggleStatusbarVisibilityAction()).run(accessor)) }));\n        actions.push(( new Separator()));\n        const handledEntries = ( new Set());\n        for (const entry of this.viewModel.entries) {\n            if (!( handledEntries.has(entry.id))) {\n                actions.push(( new ToggleStatusbarEntryVisibilityAction(entry.id, entry.name, this.viewModel)));\n                handledEntries.add(entry.id);\n            }\n        }\n        let statusEntryUnderMouse = undefined;\n        for (let element = event.target; element; element = element.parentElement) {\n            const entry = this.viewModel.findEntry(element);\n            if (entry) {\n                statusEntryUnderMouse = entry;\n                break;\n            }\n        }\n        if (statusEntryUnderMouse) {\n            actions.push(( new Separator()));\n            actions.push(( new HideStatusbarEntryAction(statusEntryUnderMouse.id, statusEntryUnderMouse.name, this.viewModel)));\n        }\n        return actions;\n    }\n    updateStyles() {\n        super.updateStyles();\n        const container = assertIsDefined(this.getContainer());\n        const styleOverride = [...this.styleOverrides].sort((a, b) => a.priority - b.priority)[0];\n        const backgroundColor = this.getColor(styleOverride?.background ?? (this.contextService.getWorkbenchState() !== 1  ? STATUS_BAR_BACKGROUND : STATUS_BAR_NO_FOLDER_BACKGROUND)) || '';\n        container.style.backgroundColor = backgroundColor;\n        const foregroundColor = this.getColor(styleOverride?.foreground ?? (this.contextService.getWorkbenchState() !== 1  ? STATUS_BAR_FOREGROUND : STATUS_BAR_NO_FOLDER_FOREGROUND)) || '';\n        container.style.color = foregroundColor;\n        const itemBorderColor = this.getColor(STATUS_BAR_ITEM_FOCUS_BORDER);\n        const borderColor = this.getColor(styleOverride?.border ?? (this.contextService.getWorkbenchState() !== 1  ? STATUS_BAR_BORDER : STATUS_BAR_NO_FOLDER_BORDER)) || this.getColor(contrastBorder);\n        if (borderColor) {\n            container.classList.add('status-border-top');\n            container.style.setProperty('--status-border-top-color', borderColor);\n        }\n        else {\n            container.classList.remove('status-border-top');\n            container.style.removeProperty('--status-border-top-color');\n        }\n        const statusBarFocusColor = this.getColor(STATUS_BAR_FOCUS_BORDER);\n        if (!this.styleElement) {\n            this.styleElement = createStyleSheet(container);\n        }\n        this.styleElement.textContent = `\n\n\t\t\t\t/* Status bar focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar:focus {\n\t\t\t\t\toutline-color: ${statusBarFocusColor};\n\t\t\t\t}\n\n\t\t\t\t/* Status bar item focus outline */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible:not(.disabled) {\n\t\t\t\t\toutline: 1px solid ${this.getColor(activeContrastBorder) ?? itemBorderColor};\n\t\t\t\t\toutline-offset: ${borderColor ? '-2px' : '-1px'};\n\t\t\t\t}\n\n\t\t\t\t/* Notification Beak */\n\t\t\t\t.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {\n\t\t\t\t\tborder-bottom-color: ${backgroundColor};\n\t\t\t\t}\n\t\t\t`;\n    }\n    layout(width, height, top, left) {\n        super.layout(width, height, top, left);\n        super.layoutContents(width, height);\n    }\n    overrideStyle(style) {\n        this.styleOverrides.add(style);\n        this.updateStyles();\n        return toDisposable(() => {\n            this.styleOverrides.delete(style);\n            this.updateStyles();\n        });\n    }\n    toJSON() {\n        return {\n            type: \"workbench.parts.statusbar\"\n        };\n    }\n};\nStatusbarPart = ( __decorate([\n    ( __param(0, IInstantiationService)),\n    ( __param(1, IThemeService)),\n    ( __param(2, IWorkspaceContextService)),\n    ( __param(3, IStorageService)),\n    ( __param(4, IWorkbenchLayoutService)),\n    ( __param(5, IContextMenuService)),\n    ( __param(6, IContextKeyService)),\n    ( __param(7, IHoverService)),\n    ( __param(8, IConfigurationService))\n], StatusbarPart));\nexport { StatusbarPart };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { isEditorPaneWithSelection, isEditorInput, EditorResourceAccessor, EditorCloseContext, SideBySideEditor, isSideBySideEditorInput, isResourceEditorInput } from '../../../common/editor.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\nimport { FILES_EXCLUDE_CONFIG, FileChangesEvent, FileOperationEvent, IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { Disposable, DisposableStore, dispose } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { Emitter, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IEditorGroupsService } from '../../editor/common/editorGroupsService.js';\nimport { getExcludes, SEARCH_EXCLUDE_CONFIG } from '../../search/common/search.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { IWorkbenchLayoutService } from '../../layout/browser/layoutService.js';\nimport { RawContextKey, IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { coalesce, remove } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { EventHelper, addDisposableListener, EventType } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { IWorkspacesService } from '../../../../platform/workspaces/common/workspaces.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { onUnexpectedError } from 'monaco-editor/esm/vs/base/common/errors.js';\nimport { IdleValue } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { ResourceGlobMatcher } from '../../../common/resources.js';\nimport { IPathService } from '../../path/common/pathService.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { ILifecycleService } from '../../lifecycle/common/lifecycle.js';\nimport { LogLevel, ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nlet HistoryService = class HistoryService extends Disposable {\n    static { this.MOUSE_NAVIGATION_SETTING = 'workbench.editor.mouseBackForwardToNavigate'; }\n    static { this.NAVIGATION_SCOPE_SETTING = 'workbench.editor.navigationScope'; }\n    constructor(editorService, editorGroupService, contextService, storageService, configurationService, fileService, workspacesService, instantiationService, layoutService, contextKeyService) {\n        super();\n        this.editorService = editorService;\n        this.editorGroupService = editorGroupService;\n        this.contextService = contextService;\n        this.storageService = storageService;\n        this.configurationService = configurationService;\n        this.fileService = fileService;\n        this.workspacesService = workspacesService;\n        this.instantiationService = instantiationService;\n        this.layoutService = layoutService;\n        this.contextKeyService = contextKeyService;\n        this.activeEditorListeners = this._register(( (new DisposableStore())));\n        this.lastActiveEditor = undefined;\n        this.editorHelper = this.instantiationService.createInstance(EditorHelper);\n        this.canNavigateBackContextKey = (( (new RawContextKey('canNavigateBack', false,  (localize(\n            'canNavigateBack',\n            \"Whether it is possible to navigate back in editor history\"\n        )))))).bindTo(this.contextKeyService);\n        this.canNavigateForwardContextKey = (( (new RawContextKey('canNavigateForward', false,  (localize(\n            'canNavigateForward',\n            \"Whether it is possible to navigate forward in editor history\"\n        )))))).bindTo(this.contextKeyService);\n        this.canNavigateBackInNavigationsContextKey = (( (new RawContextKey('canNavigateBackInNavigationLocations', false,  (localize(\n            'canNavigateBackInNavigationLocations',\n            \"Whether it is possible to navigate back in editor navigation locations history\"\n        )))))).bindTo(this.contextKeyService);\n        this.canNavigateForwardInNavigationsContextKey = (( (new RawContextKey('canNavigateForwardInNavigationLocations', false,  (localize(\n            'canNavigateForwardInNavigationLocations',\n            \"Whether it is possible to navigate forward in editor navigation locations history\"\n        )))))).bindTo(this.contextKeyService);\n        this.canNavigateToLastNavigationLocationContextKey = (( (new RawContextKey('canNavigateToLastNavigationLocation', false,  (localize(\n            'canNavigateToLastNavigationLocation',\n            \"Whether it is possible to navigate to the last editor navigation location\"\n        )))))).bindTo(this.contextKeyService);\n        this.canNavigateBackInEditsContextKey = (( (new RawContextKey('canNavigateBackInEditLocations', false,  (localize(\n            'canNavigateBackInEditLocations',\n            \"Whether it is possible to navigate back in editor edit locations history\"\n        )))))).bindTo(this.contextKeyService);\n        this.canNavigateForwardInEditsContextKey = (( (new RawContextKey('canNavigateForwardInEditLocations', false,  (localize(\n            'canNavigateForwardInEditLocations',\n            \"Whether it is possible to navigate forward in editor edit locations history\"\n        )))))).bindTo(this.contextKeyService);\n        this.canNavigateToLastEditLocationContextKey = (( (new RawContextKey('canNavigateToLastEditLocation', false,  (localize(\n            'canNavigateToLastEditLocation',\n            \"Whether it is possible to navigate to the last editor edit location\"\n        )))))).bindTo(this.contextKeyService);\n        this.canReopenClosedEditorContextKey = (( (new RawContextKey('canReopenClosedEditor', false,  (localize(\n            'canReopenClosedEditor',\n            \"Whether it is possible to reopen the last closed editor\"\n        )))))).bindTo(this.contextKeyService);\n        this._onDidChangeEditorNavigationStack = this._register(( (new Emitter())));\n        this.onDidChangeEditorNavigationStack = this._onDidChangeEditorNavigationStack.event;\n        this.defaultScopedEditorNavigationStack = undefined;\n        this.editorGroupScopedNavigationStacks = ( (new Map()));\n        this.editorScopedNavigationStacks = ( (new Map()));\n        this.editorNavigationScope = 0 ;\n        this.recentlyUsedEditorsStack = undefined;\n        this.recentlyUsedEditorsStackIndex = 0;\n        this.recentlyUsedEditorsInGroupStack = undefined;\n        this.recentlyUsedEditorsInGroupStackIndex = 0;\n        this.navigatingInRecentlyUsedEditorsStack = false;\n        this.navigatingInRecentlyUsedEditorsInGroupStack = false;\n        this.recentlyClosedEditors = [];\n        this.ignoreEditorCloseEvent = false;\n        this.history = undefined;\n        this.editorHistoryListeners = ( (new Map()));\n        this.resourceExcludeMatcher = this._register(( (new IdleValue(() => {\n            const matcher = this._register(this.instantiationService.createInstance(ResourceGlobMatcher, root => getExcludes(root ? this.configurationService.getValue({ resource: root }) : this.configurationService.getValue()) || Object.create(null), event => event.affectsConfiguration(FILES_EXCLUDE_CONFIG) || event.affectsConfiguration(SEARCH_EXCLUDE_CONFIG)));\n            this._register(matcher.onExpressionChange(() => this.removeExcludedFromHistory()));\n            return matcher;\n        }))));\n        this.registerListeners();\n        if (this.editorService.activeEditorPane) {\n            this.onDidActiveEditorChange();\n        }\n    }\n    registerListeners() {\n        this.registerMouseNavigationListener();\n        this._register(this.editorService.onDidActiveEditorChange(() => this.onDidActiveEditorChange()));\n        this._register(this.editorService.onDidOpenEditorFail(event => this.remove(event.editor)));\n        this._register(this.editorService.onDidCloseEditor(event => this.onDidCloseEditor(event)));\n        this._register(this.editorService.onDidMostRecentlyActiveEditorsChange(() => this.handleEditorEventInRecentEditorsStack()));\n        this._register(this.editorGroupService.onDidRemoveGroup(e => this.onDidRemoveGroup(e)));\n        this._register(this.fileService.onDidFilesChange(event => this.onDidFilesChange(event)));\n        this._register(this.fileService.onDidRunOperation(event => this.onDidFilesChange(event)));\n        this._register(this.storageService.onWillSaveState(() => this.saveState()));\n        this.registerEditorNavigationScopeChangeListener();\n        this._register(this.onDidChangeEditorNavigationStack(() => this.updateContextKeys()));\n        this._register(this.editorGroupService.onDidChangeActiveGroup(() => this.updateContextKeys()));\n    }\n    onDidCloseEditor(e) {\n        this.handleEditorCloseEventInHistory(e);\n        this.handleEditorCloseEventInReopen(e);\n    }\n    registerMouseNavigationListener() {\n        const mouseBackForwardSupportListener = this._register(( (new DisposableStore())));\n        const handleMouseBackForwardSupport = () => {\n            mouseBackForwardSupportListener.clear();\n            if (this.configurationService.getValue(HistoryService.MOUSE_NAVIGATION_SETTING)) {\n                mouseBackForwardSupportListener.add(addDisposableListener(this.layoutService.container, EventType.MOUSE_DOWN, e => this.onMouseDownOrUp(e, true)));\n                mouseBackForwardSupportListener.add(addDisposableListener(this.layoutService.container, EventType.MOUSE_UP, e => this.onMouseDownOrUp(e, false)));\n            }\n        };\n        this._register(this.configurationService.onDidChangeConfiguration(event => {\n            if (event.affectsConfiguration(HistoryService.MOUSE_NAVIGATION_SETTING)) {\n                handleMouseBackForwardSupport();\n            }\n        }));\n        handleMouseBackForwardSupport();\n    }\n    onMouseDownOrUp(event, isMouseDown) {\n        switch (event.button) {\n            case 3:\n                EventHelper.stop(event);\n                if (isMouseDown) {\n                    this.goBack();\n                }\n                break;\n            case 4:\n                EventHelper.stop(event);\n                if (isMouseDown) {\n                    this.goForward();\n                }\n                break;\n        }\n    }\n    onDidRemoveGroup(group) {\n        this.handleEditorGroupRemoveInNavigationStacks(group);\n    }\n    onDidActiveEditorChange() {\n        const activeEditorGroup = this.editorGroupService.activeGroup;\n        const activeEditorPane = activeEditorGroup.activeEditorPane;\n        if (this.lastActiveEditor && this.editorHelper.matchesEditorIdentifier(this.lastActiveEditor, activeEditorPane)) {\n            return;\n        }\n        this.lastActiveEditor = activeEditorPane?.input && activeEditorPane.group ? { editor: activeEditorPane.input, groupId: activeEditorPane.group.id } : undefined;\n        this.activeEditorListeners.clear();\n        this.handleActiveEditorChange(activeEditorGroup, activeEditorPane);\n        if (isEditorPaneWithSelection(activeEditorPane)) {\n            this.activeEditorListeners.add(activeEditorPane.onDidChangeSelection(e => this.handleActiveEditorSelectionChangeEvent(activeEditorGroup, activeEditorPane, e)));\n        }\n        this.updateContextKeys();\n    }\n    onDidFilesChange(event) {\n        if (event instanceof FileChangesEvent) {\n            if (event.gotDeleted()) {\n                this.remove(event);\n            }\n        }\n        else {\n            if (event.isOperation(1 )) {\n                this.remove(event);\n            }\n            else if (event.isOperation(2 ) && event.target.isFile) {\n                this.move(event);\n            }\n        }\n    }\n    handleActiveEditorChange(group, editorPane) {\n        this.handleActiveEditorChangeInHistory(editorPane);\n        this.handleActiveEditorChangeInNavigationStacks(group, editorPane);\n    }\n    handleActiveEditorSelectionChangeEvent(group, editorPane, event) {\n        this.handleActiveEditorSelectionChangeInNavigationStacks(group, editorPane, event);\n    }\n    move(event) {\n        this.moveInHistory(event);\n        this.moveInEditorNavigationStacks(event);\n    }\n    remove(arg1) {\n        this.removeFromHistory(arg1);\n        this.removeFromEditorNavigationStacks(arg1);\n        this.removeFromRecentlyClosedEditors(arg1);\n        this.removeFromRecentlyOpened(arg1);\n    }\n    removeFromRecentlyOpened(arg1) {\n        let resource = undefined;\n        if (isEditorInput(arg1)) {\n            resource = EditorResourceAccessor.getOriginalUri(arg1);\n        }\n        else if (arg1 instanceof FileChangesEvent) ;\n        else {\n            resource = arg1.resource;\n        }\n        if (resource) {\n            this.workspacesService.removeRecentlyOpened([resource]);\n        }\n    }\n    clear() {\n        this.clearRecentlyOpened();\n        this.clearEditorNavigationStacks();\n        this.recentlyClosedEditors = [];\n        this.updateContextKeys();\n    }\n    updateContextKeys() {\n        this.contextKeyService.bufferChangeEvents(() => {\n            const activeStack = this.getStack();\n            this.canNavigateBackContextKey.set(activeStack.canGoBack(0 ));\n            this.canNavigateForwardContextKey.set(activeStack.canGoForward(0 ));\n            this.canNavigateBackInNavigationsContextKey.set(activeStack.canGoBack(2 ));\n            this.canNavigateForwardInNavigationsContextKey.set(activeStack.canGoForward(2 ));\n            this.canNavigateToLastNavigationLocationContextKey.set(activeStack.canGoLast(2 ));\n            this.canNavigateBackInEditsContextKey.set(activeStack.canGoBack(1 ));\n            this.canNavigateForwardInEditsContextKey.set(activeStack.canGoForward(1 ));\n            this.canNavigateToLastEditLocationContextKey.set(activeStack.canGoLast(1 ));\n            this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length > 0);\n        });\n    }\n    registerEditorNavigationScopeChangeListener() {\n        const handleEditorNavigationScopeChange = () => {\n            this.disposeEditorNavigationStacks();\n            const configuredScope = this.configurationService.getValue(HistoryService.NAVIGATION_SCOPE_SETTING);\n            if (configuredScope === 'editorGroup') {\n                this.editorNavigationScope = 1 ;\n            }\n            else if (configuredScope === 'editor') {\n                this.editorNavigationScope = 2 ;\n            }\n            else {\n                this.editorNavigationScope = 0 ;\n            }\n        };\n        this._register(this.configurationService.onDidChangeConfiguration(event => {\n            if (event.affectsConfiguration(HistoryService.NAVIGATION_SCOPE_SETTING)) {\n                handleEditorNavigationScopeChange();\n            }\n        }));\n        handleEditorNavigationScopeChange();\n    }\n    getStack(group = this.editorGroupService.activeGroup, editor = group.activeEditor) {\n        switch (this.editorNavigationScope) {\n            case 2 : {\n                if (!editor) {\n                    return (\n                         (new NoOpEditorNavigationStacks())\n                    );\n                }\n                let stacksForGroup = this.editorScopedNavigationStacks.get(group.id);\n                if (!stacksForGroup) {\n                    stacksForGroup = ( (new Map()));\n                    this.editorScopedNavigationStacks.set(group.id, stacksForGroup);\n                }\n                let stack = stacksForGroup.get(editor)?.stack;\n                if (!stack) {\n                    const disposable = ( (new DisposableStore()));\n                    stack = disposable.add(this.instantiationService.createInstance(EditorNavigationStacks, 2 ));\n                    disposable.add(stack.onDidChange(() => this._onDidChangeEditorNavigationStack.fire()));\n                    stacksForGroup.set(editor, { stack, disposable });\n                }\n                return stack;\n            }\n            case 1 : {\n                let stack = this.editorGroupScopedNavigationStacks.get(group.id)?.stack;\n                if (!stack) {\n                    const disposable = ( (new DisposableStore()));\n                    stack = disposable.add(this.instantiationService.createInstance(EditorNavigationStacks, 1 ));\n                    disposable.add(stack.onDidChange(() => this._onDidChangeEditorNavigationStack.fire()));\n                    this.editorGroupScopedNavigationStacks.set(group.id, { stack, disposable });\n                }\n                return stack;\n            }\n            case 0 : {\n                if (!this.defaultScopedEditorNavigationStack) {\n                    this.defaultScopedEditorNavigationStack = this._register(this.instantiationService.createInstance(EditorNavigationStacks, 0 ));\n                    this._register(this.defaultScopedEditorNavigationStack.onDidChange(() => this._onDidChangeEditorNavigationStack.fire()));\n                }\n                return this.defaultScopedEditorNavigationStack;\n            }\n        }\n    }\n    goForward(filter) {\n        return this.getStack().goForward(filter);\n    }\n    goBack(filter) {\n        return this.getStack().goBack(filter);\n    }\n    goPrevious(filter) {\n        return this.getStack().goPrevious(filter);\n    }\n    goLast(filter) {\n        return this.getStack().goLast(filter);\n    }\n    handleActiveEditorChangeInNavigationStacks(group, editorPane) {\n        this.getStack(group, editorPane?.input).handleActiveEditorChange(editorPane);\n    }\n    handleActiveEditorSelectionChangeInNavigationStacks(group, editorPane, event) {\n        this.getStack(group, editorPane.input).handleActiveEditorSelectionChange(editorPane, event);\n    }\n    handleEditorCloseEventInHistory(e) {\n        const editors = this.editorScopedNavigationStacks.get(e.groupId);\n        if (editors) {\n            const editorStack = editors.get(e.editor);\n            if (editorStack) {\n                editorStack.disposable.dispose();\n                editors.delete(e.editor);\n            }\n            if (editors.size === 0) {\n                this.editorScopedNavigationStacks.delete(e.groupId);\n            }\n        }\n    }\n    handleEditorGroupRemoveInNavigationStacks(group) {\n        this.defaultScopedEditorNavigationStack?.remove(group.id);\n        const editorGroupStack = this.editorGroupScopedNavigationStacks.get(group.id);\n        if (editorGroupStack) {\n            editorGroupStack.disposable.dispose();\n            this.editorGroupScopedNavigationStacks.delete(group.id);\n        }\n    }\n    clearEditorNavigationStacks() {\n        this.withEachEditorNavigationStack(stack => stack.clear());\n    }\n    removeFromEditorNavigationStacks(arg1) {\n        this.withEachEditorNavigationStack(stack => stack.remove(arg1));\n    }\n    moveInEditorNavigationStacks(event) {\n        this.withEachEditorNavigationStack(stack => stack.move(event));\n    }\n    withEachEditorNavigationStack(fn) {\n        if (this.defaultScopedEditorNavigationStack) {\n            fn(this.defaultScopedEditorNavigationStack);\n        }\n        for (const [, entry] of this.editorGroupScopedNavigationStacks) {\n            fn(entry.stack);\n        }\n        for (const [, entries] of this.editorScopedNavigationStacks) {\n            for (const [, entry] of entries) {\n                fn(entry.stack);\n            }\n        }\n    }\n    disposeEditorNavigationStacks() {\n        this.defaultScopedEditorNavigationStack?.dispose();\n        this.defaultScopedEditorNavigationStack = undefined;\n        for (const [, stack] of this.editorGroupScopedNavigationStacks) {\n            stack.disposable.dispose();\n        }\n        this.editorGroupScopedNavigationStacks.clear();\n        for (const [, stacks] of this.editorScopedNavigationStacks) {\n            for (const [, stack] of stacks) {\n                stack.disposable.dispose();\n            }\n        }\n        this.editorScopedNavigationStacks.clear();\n    }\n    openNextRecentlyUsedEditor(groupId) {\n        const [stack, index] = this.ensureRecentlyUsedStack(index => index - 1, groupId);\n        return this.doNavigateInRecentlyUsedEditorsStack(stack[index], groupId);\n    }\n    openPreviouslyUsedEditor(groupId) {\n        const [stack, index] = this.ensureRecentlyUsedStack(index => index + 1, groupId);\n        return this.doNavigateInRecentlyUsedEditorsStack(stack[index], groupId);\n    }\n    async doNavigateInRecentlyUsedEditorsStack(editorIdentifier, groupId) {\n        if (editorIdentifier) {\n            const acrossGroups = typeof groupId !== 'number' || !this.editorGroupService.getGroup(groupId);\n            if (acrossGroups) {\n                this.navigatingInRecentlyUsedEditorsStack = true;\n            }\n            else {\n                this.navigatingInRecentlyUsedEditorsInGroupStack = true;\n            }\n            const group = this.editorGroupService.getGroup(editorIdentifier.groupId) ?? this.editorGroupService.activeGroup;\n            try {\n                await group.openEditor(editorIdentifier.editor);\n            }\n            finally {\n                if (acrossGroups) {\n                    this.navigatingInRecentlyUsedEditorsStack = false;\n                }\n                else {\n                    this.navigatingInRecentlyUsedEditorsInGroupStack = false;\n                }\n            }\n        }\n    }\n    ensureRecentlyUsedStack(indexModifier, groupId) {\n        let editors;\n        let index;\n        const group = typeof groupId === 'number' ? this.editorGroupService.getGroup(groupId) : undefined;\n        if (!group) {\n            editors = this.recentlyUsedEditorsStack || this.editorService.getEditors(0 );\n            index = this.recentlyUsedEditorsStackIndex;\n        }\n        else {\n            editors = this.recentlyUsedEditorsInGroupStack || ( (group.getEditors(0 ).map(editor => ({ groupId: group.id, editor }))));\n            index = this.recentlyUsedEditorsInGroupStackIndex;\n        }\n        let newIndex = indexModifier(index);\n        if (newIndex < 0) {\n            newIndex = 0;\n        }\n        else if (newIndex > editors.length - 1) {\n            newIndex = editors.length - 1;\n        }\n        if (!group) {\n            this.recentlyUsedEditorsStack = editors;\n            this.recentlyUsedEditorsStackIndex = newIndex;\n        }\n        else {\n            this.recentlyUsedEditorsInGroupStack = editors;\n            this.recentlyUsedEditorsInGroupStackIndex = newIndex;\n        }\n        return [editors, newIndex];\n    }\n    handleEditorEventInRecentEditorsStack() {\n        if (!this.navigatingInRecentlyUsedEditorsStack) {\n            this.recentlyUsedEditorsStack = undefined;\n            this.recentlyUsedEditorsStackIndex = 0;\n        }\n        if (!this.navigatingInRecentlyUsedEditorsInGroupStack) {\n            this.recentlyUsedEditorsInGroupStack = undefined;\n            this.recentlyUsedEditorsInGroupStackIndex = 0;\n        }\n    }\n    static { this.MAX_RECENTLY_CLOSED_EDITORS = 20; }\n    handleEditorCloseEventInReopen(event) {\n        if (this.ignoreEditorCloseEvent) {\n            return;\n        }\n        const { editor, context } = event;\n        if (context === EditorCloseContext.REPLACE || context === EditorCloseContext.MOVE) {\n            return;\n        }\n        const untypedEditor = editor.toUntyped();\n        if (!untypedEditor) {\n            return;\n        }\n        const associatedResources = [];\n        const editorResource = EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.BOTH });\n        if (URI.isUri(editorResource)) {\n            associatedResources.push(editorResource);\n        }\n        else if (editorResource) {\n            associatedResources.push(...coalesce([editorResource.primary, editorResource.secondary]));\n        }\n        this.removeFromRecentlyClosedEditors(editor);\n        this.recentlyClosedEditors.push({\n            editorId: editor.editorId,\n            editor: untypedEditor,\n            resource: EditorResourceAccessor.getOriginalUri(editor),\n            associatedResources,\n            index: event.index,\n            sticky: event.sticky\n        });\n        if (this.recentlyClosedEditors.length > HistoryService.MAX_RECENTLY_CLOSED_EDITORS) {\n            this.recentlyClosedEditors.shift();\n        }\n        this.canReopenClosedEditorContextKey.set(true);\n    }\n    async reopenLastClosedEditor() {\n        const lastClosedEditor = this.recentlyClosedEditors.pop();\n        let reopenClosedEditorPromise = undefined;\n        if (lastClosedEditor) {\n            reopenClosedEditorPromise = this.doReopenLastClosedEditor(lastClosedEditor);\n        }\n        this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length > 0);\n        return reopenClosedEditorPromise;\n    }\n    async doReopenLastClosedEditor(lastClosedEditor) {\n        const options = { pinned: true, sticky: lastClosedEditor.sticky, index: lastClosedEditor.index, ignoreError: true };\n        if ((lastClosedEditor.sticky && !this.editorGroupService.activeGroup.isSticky(lastClosedEditor.index)) ||\n            (!lastClosedEditor.sticky && this.editorGroupService.activeGroup.isSticky(lastClosedEditor.index))) {\n            options.index = undefined;\n        }\n        let editorPane = undefined;\n        if (!this.editorGroupService.activeGroup.contains(lastClosedEditor.editor)) {\n            this.ignoreEditorCloseEvent = true;\n            try {\n                editorPane = await this.editorService.openEditor({\n                    ...lastClosedEditor.editor,\n                    options: {\n                        ...lastClosedEditor.editor.options,\n                        ...options\n                    }\n                });\n            }\n            finally {\n                this.ignoreEditorCloseEvent = false;\n            }\n        }\n        if (!editorPane) {\n            remove(this.recentlyClosedEditors, lastClosedEditor);\n            this.reopenLastClosedEditor();\n        }\n    }\n    removeFromRecentlyClosedEditors(arg1) {\n        this.recentlyClosedEditors = this.recentlyClosedEditors.filter(recentlyClosedEditor => {\n            if (isEditorInput(arg1) && recentlyClosedEditor.editorId !== arg1.editorId) {\n                return true;\n            }\n            if (recentlyClosedEditor.resource && this.editorHelper.matchesFile(recentlyClosedEditor.resource, arg1)) {\n                return false;\n            }\n            if (( (recentlyClosedEditor.associatedResources.some(\n                associatedResource => this.editorHelper.matchesFile(associatedResource, arg1)\n            )))) {\n                return false;\n            }\n            return true;\n        });\n        this.canReopenClosedEditorContextKey.set(this.recentlyClosedEditors.length > 0);\n    }\n    static { this.MAX_HISTORY_ITEMS = 200; }\n    static { this.HISTORY_STORAGE_KEY = 'history.entries'; }\n    handleActiveEditorChangeInHistory(editorPane) {\n        const editor = editorPane?.input;\n        if (!editor || editor.isDisposed() || !this.includeInHistory(editor)) {\n            return;\n        }\n        this.removeFromHistory(editor);\n        this.addToHistory(editor);\n    }\n    addToHistory(editor, insertFirst = true) {\n        this.ensureHistoryLoaded(this.history);\n        const historyInput = this.editorHelper.preferResourceEditorInput(editor);\n        if (!historyInput) {\n            return;\n        }\n        if (insertFirst) {\n            this.history.unshift(historyInput);\n        }\n        else {\n            this.history.push(historyInput);\n        }\n        if (this.history.length > HistoryService.MAX_HISTORY_ITEMS) {\n            this.editorHelper.clearOnEditorDispose(this.history.pop(), this.editorHistoryListeners);\n        }\n        if (isEditorInput(historyInput)) {\n            this.editorHelper.onEditorDispose(historyInput, () => this.updateHistoryOnEditorDispose(historyInput), this.editorHistoryListeners);\n        }\n    }\n    updateHistoryOnEditorDispose(editor) {\n        if (!isSideBySideEditorInput(editor)) {\n            this.removeFromHistory(editor);\n        }\n        else {\n            const resourceInputs = [];\n            const sideInputs = editor.primary.matches(editor.secondary) ? [editor.primary] : [editor.primary, editor.secondary];\n            for (const sideInput of sideInputs) {\n                const candidateResourceInput = this.editorHelper.preferResourceEditorInput(sideInput);\n                if (isResourceEditorInput(candidateResourceInput)) {\n                    resourceInputs.push(candidateResourceInput);\n                }\n            }\n            this.replaceInHistory(editor, ...resourceInputs);\n        }\n    }\n    includeInHistory(editor) {\n        if (isEditorInput(editor)) {\n            return true;\n        }\n        return !this.resourceExcludeMatcher.value.matches(editor.resource);\n    }\n    removeExcludedFromHistory() {\n        this.ensureHistoryLoaded(this.history);\n        this.history = this.history.filter(entry => {\n            const include = this.includeInHistory(entry);\n            if (!include) {\n                this.editorHelper.clearOnEditorDispose(entry, this.editorHistoryListeners);\n            }\n            return include;\n        });\n    }\n    moveInHistory(event) {\n        if (event.isOperation(2 )) {\n            const removed = this.removeFromHistory(event);\n            if (removed) {\n                this.addToHistory({ resource: event.target.resource });\n            }\n        }\n    }\n    removeFromHistory(arg1) {\n        let removed = false;\n        this.ensureHistoryLoaded(this.history);\n        this.history = this.history.filter(entry => {\n            const matches = this.editorHelper.matchesEditor(arg1, entry);\n            if (matches) {\n                this.editorHelper.clearOnEditorDispose(arg1, this.editorHistoryListeners);\n                removed = true;\n            }\n            return !matches;\n        });\n        return removed;\n    }\n    replaceInHistory(editor, ...replacements) {\n        this.ensureHistoryLoaded(this.history);\n        let replaced = false;\n        const newHistory = [];\n        for (const entry of this.history) {\n            if (this.editorHelper.matchesEditor(editor, entry)) {\n                this.editorHelper.clearOnEditorDispose(editor, this.editorHistoryListeners);\n                if (!replaced) {\n                    newHistory.push(...replacements);\n                    replaced = true;\n                }\n            }\n            else if (!( (replacements.some(replacement => this.editorHelper.matchesEditor(replacement, entry))))) {\n                newHistory.push(entry);\n            }\n        }\n        if (!replaced) {\n            newHistory.push(...replacements);\n        }\n        this.history = newHistory;\n    }\n    clearRecentlyOpened() {\n        this.history = [];\n        for (const [, disposable] of this.editorHistoryListeners) {\n            dispose(disposable);\n        }\n        this.editorHistoryListeners.clear();\n    }\n    getHistory() {\n        this.ensureHistoryLoaded(this.history);\n        return this.history;\n    }\n    ensureHistoryLoaded(history) {\n        if (!this.history) {\n            this.history = [];\n            if (this.editorGroupService.isReady) {\n                this.loadHistory();\n            }\n            else {\n                (async () => {\n                    await this.editorGroupService.whenReady;\n                    this.loadHistory();\n                })();\n            }\n        }\n    }\n    loadHistory() {\n        this.history = [];\n        const storedEditorHistory = this.loadHistoryFromStorage();\n        const openedEditorsLru = [...this.editorService.getEditors(0 )].reverse();\n        const handledEditors = ( (new Set()));\n        for (const { editor } of openedEditorsLru) {\n            if (!this.includeInHistory(editor)) {\n                continue;\n            }\n            this.addToHistory(editor);\n            if (editor.resource) {\n                handledEditors.add(`${( ( editor.resource.toString()))}/${editor.editorId}`);\n            }\n        }\n        for (const editor of storedEditorHistory) {\n            if (!( (handledEditors.has(`${( ( editor.resource.toString()))}/${editor.options?.override}`)))) {\n                this.addToHistory(editor, false );\n            }\n        }\n    }\n    loadHistoryFromStorage() {\n        const entries = [];\n        const entriesRaw = this.storageService.get(HistoryService.HISTORY_STORAGE_KEY, 1 );\n        if (entriesRaw) {\n            try {\n                const entriesParsed = JSON.parse(entriesRaw);\n                for (const entryParsed of entriesParsed) {\n                    if (!entryParsed.editor || !entryParsed.editor.resource) {\n                        continue;\n                    }\n                    try {\n                        entries.push({\n                            ...entryParsed.editor,\n                            resource: typeof entryParsed.editor.resource === 'string' ?\n                                (\n                                (URI.parse(entryParsed.editor.resource))) :\n                                ( (URI.from(entryParsed.editor.resource)))\n                        });\n                    }\n                    catch (error) {\n                        onUnexpectedError(error);\n                    }\n                }\n            }\n            catch (error) {\n                onUnexpectedError(error);\n            }\n        }\n        return entries;\n    }\n    saveState() {\n        if (!this.history) {\n            return;\n        }\n        const entries = [];\n        for (const editor of this.history) {\n            if (isEditorInput(editor) || !isResourceEditorInput(editor)) {\n                continue;\n            }\n            entries.push({\n                editor: {\n                    ...editor,\n                    resource: ( (editor.resource.toString()))\n                }\n            });\n        }\n        this.storageService.store(HistoryService.HISTORY_STORAGE_KEY, JSON.stringify(entries), 1 , 1 );\n    }\n    getLastActiveWorkspaceRoot(schemeFilter) {\n        const folders = this.contextService.getWorkspace().folders;\n        if (folders.length === 0) {\n            return undefined;\n        }\n        if (folders.length === 1) {\n            const resource = folders[0].uri;\n            if (!schemeFilter || resource.scheme === schemeFilter) {\n                return resource;\n            }\n            return undefined;\n        }\n        for (const input of this.getHistory()) {\n            if (isEditorInput(input)) {\n                continue;\n            }\n            if (schemeFilter && input.resource.scheme !== schemeFilter) {\n                continue;\n            }\n            const resourceWorkspace = this.contextService.getWorkspaceFolder(input.resource);\n            if (resourceWorkspace) {\n                return resourceWorkspace.uri;\n            }\n        }\n        for (const folder of folders) {\n            const resource = folder.uri;\n            if (!schemeFilter || resource.scheme === schemeFilter) {\n                return resource;\n            }\n        }\n        return undefined;\n    }\n    getLastActiveFile(filterByScheme) {\n        for (const input of this.getHistory()) {\n            let resource;\n            if (isEditorInput(input)) {\n                resource = EditorResourceAccessor.getOriginalUri(input, { filterByScheme });\n            }\n            else {\n                resource = input.resource;\n            }\n            if (resource?.scheme === filterByScheme) {\n                return resource;\n            }\n        }\n        return undefined;\n    }\n};\nHistoryService = ( (__decorate([\n    ( (__param(0, IEditorService))),\n    ( (__param(1, IEditorGroupsService))),\n    ( (__param(2, IWorkspaceContextService))),\n    ( (__param(3, IStorageService))),\n    ( (__param(4, IConfigurationService))),\n    ( (__param(5, IFileService))),\n    ( (__param(6, IWorkspacesService))),\n    ( (__param(7, IInstantiationService))),\n    ( (__param(8, IWorkbenchLayoutService))),\n    ( (__param(9, IContextKeyService)))\n], HistoryService)));\nclass EditorSelectionState {\n    constructor(editorIdentifier, selection, reason) {\n        this.editorIdentifier = editorIdentifier;\n        this.selection = selection;\n        this.reason = reason;\n    }\n    justifiesNewNavigationEntry(other) {\n        if (this.editorIdentifier.groupId !== other.editorIdentifier.groupId) {\n            return true;\n        }\n        if (!this.editorIdentifier.editor.matches(other.editorIdentifier.editor)) {\n            return true;\n        }\n        if (!this.selection || !other.selection) {\n            return true;\n        }\n        const result = this.selection.compare(other.selection);\n        if (result === 2  && ((other.reason === 4  || other.reason === 5) )) {\n            return true;\n        }\n        return result === 3 ;\n    }\n}\nlet EditorNavigationStacks = class EditorNavigationStacks extends Disposable {\n    constructor(scope, instantiationService) {\n        super();\n        this.scope = scope;\n        this.instantiationService = instantiationService;\n        this.selectionsStack = this._register(this.instantiationService.createInstance(EditorNavigationStack, 0 , this.scope));\n        this.editsStack = this._register(this.instantiationService.createInstance(EditorNavigationStack, 1 , this.scope));\n        this.navigationsStack = this._register(this.instantiationService.createInstance(EditorNavigationStack, 2 , this.scope));\n        this.stacks = [\n            this.selectionsStack,\n            this.editsStack,\n            this.navigationsStack\n        ];\n        this.onDidChange = Event.any(this.selectionsStack.onDidChange, this.editsStack.onDidChange, this.navigationsStack.onDidChange);\n    }\n    canGoForward(filter) {\n        return this.getStack(filter).canGoForward();\n    }\n    goForward(filter) {\n        return this.getStack(filter).goForward();\n    }\n    canGoBack(filter) {\n        return this.getStack(filter).canGoBack();\n    }\n    goBack(filter) {\n        return this.getStack(filter).goBack();\n    }\n    goPrevious(filter) {\n        return this.getStack(filter).goPrevious();\n    }\n    canGoLast(filter) {\n        return this.getStack(filter).canGoLast();\n    }\n    goLast(filter) {\n        return this.getStack(filter).goLast();\n    }\n    getStack(filter = 0 ) {\n        switch (filter) {\n            case 0 : return this.selectionsStack;\n            case 1 : return this.editsStack;\n            case 2 : return this.navigationsStack;\n        }\n    }\n    handleActiveEditorChange(editorPane) {\n        this.selectionsStack.notifyNavigation(editorPane);\n    }\n    handleActiveEditorSelectionChange(editorPane, event) {\n        const previous = this.selectionsStack.current;\n        this.selectionsStack.notifyNavigation(editorPane, event);\n        if (event.reason === 3 ) {\n            this.editsStack.notifyNavigation(editorPane, event);\n        }\n        else if (((event.reason === 4  || event.reason === 5) ) &&\n            !this.selectionsStack.isNavigating()) {\n            if (event.reason === 5  && !this.navigationsStack.isNavigating()) {\n                if (previous) {\n                    this.navigationsStack.addOrReplace(previous.groupId, previous.editor, previous.selection);\n                }\n            }\n            this.navigationsStack.notifyNavigation(editorPane, event);\n        }\n    }\n    clear() {\n        for (const stack of this.stacks) {\n            stack.clear();\n        }\n    }\n    remove(arg1) {\n        for (const stack of this.stacks) {\n            stack.remove(arg1);\n        }\n    }\n    move(event) {\n        for (const stack of this.stacks) {\n            stack.move(event);\n        }\n    }\n};\nEditorNavigationStacks = ( (__decorate([\n    ( (__param(1, IInstantiationService)))\n], EditorNavigationStacks)));\nclass NoOpEditorNavigationStacks {\n    constructor() {\n        this.onDidChange = Event.None;\n    }\n    canGoForward() { return false; }\n    async goForward() { }\n    canGoBack() { return false; }\n    async goBack() { }\n    async goPrevious() { }\n    canGoLast() { return false; }\n    async goLast() { }\n    handleActiveEditorChange() { }\n    handleActiveEditorSelectionChange() { }\n    clear() { }\n    remove() { }\n    move() { }\n    dispose() { }\n}\nlet EditorNavigationStack = class EditorNavigationStack extends Disposable {\n    static { this.MAX_STACK_SIZE = 50; }\n    get current() {\n        return this.stack[this.index];\n    }\n    set current(entry) {\n        if (entry) {\n            this.stack[this.index] = entry;\n        }\n    }\n    constructor(filter, scope, instantiationService, editorService, editorGroupService, logService) {\n        super();\n        this.filter = filter;\n        this.scope = scope;\n        this.instantiationService = instantiationService;\n        this.editorService = editorService;\n        this.editorGroupService = editorGroupService;\n        this.logService = logService;\n        this._onDidChange = this._register(( (new Emitter())));\n        this.onDidChange = this._onDidChange.event;\n        this.mapEditorToDisposable = ( (new Map()));\n        this.mapGroupToDisposable = ( (new Map()));\n        this.editorHelper = this.instantiationService.createInstance(EditorHelper);\n        this.stack = [];\n        this.index = -1;\n        this.previousIndex = -1;\n        this.navigating = false;\n        this.currentSelectionState = undefined;\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.onDidChange(() => this.traceStack()));\n        this._register(this.logService.onDidChangeLogLevel(() => this.traceStack()));\n    }\n    traceStack() {\n        if (this.logService.getLevel() !== LogLevel.Trace) {\n            return;\n        }\n        const entryLabels = [];\n        for (const entry of this.stack) {\n            if (typeof entry.selection?.log === 'function') {\n                entryLabels.push(`- group: ${entry.groupId}, editor: ${entry.editor.resource?.toString()}, selection: ${entry.selection.log()}`);\n            }\n            else {\n                entryLabels.push(`- group: ${entry.groupId}, editor: ${entry.editor.resource?.toString()}, selection: <none>`);\n            }\n        }\n        if (entryLabels.length === 0) {\n            this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}: <empty>`);\n        }\n        else {\n            this.trace(`index: ${this.index}, navigating: ${this.isNavigating()}\n${entryLabels.join('\\n')}\n\t\t\t`);\n        }\n    }\n    trace(msg, editor = null, event) {\n        if (this.logService.getLevel() !== LogLevel.Trace) {\n            return;\n        }\n        let filterLabel;\n        switch (this.filter) {\n            case 0 :\n                filterLabel = 'global';\n                break;\n            case 1 :\n                filterLabel = 'edits';\n                break;\n            case 2 :\n                filterLabel = 'navigation';\n                break;\n        }\n        let scopeLabel;\n        switch (this.scope) {\n            case 0 :\n                scopeLabel = 'default';\n                break;\n            case 1 :\n                scopeLabel = 'editorGroup';\n                break;\n            case 2 :\n                scopeLabel = 'editor';\n                break;\n        }\n        if (editor !== null) {\n            this.logService.trace(`[History stack ${filterLabel}-${scopeLabel}]: ${msg} (editor: ${editor?.resource?.toString()}, event: ${this.traceEvent(event)})`);\n        }\n        else {\n            this.logService.trace(`[History stack ${filterLabel}-${scopeLabel}]: ${msg}`);\n        }\n    }\n    traceEvent(event) {\n        if (!event) {\n            return '<none>';\n        }\n        switch (event.reason) {\n            case 3 : return 'edit';\n            case 4 : return 'navigation';\n            case 5 : return 'jump';\n            case 1 : return 'programmatic';\n            case 2 : return 'user';\n        }\n    }\n    registerGroupListeners(groupId) {\n        if (!( (this.mapGroupToDisposable.has(groupId)))) {\n            const group = this.editorGroupService.getGroup(groupId);\n            if (group) {\n                this.mapGroupToDisposable.set(groupId, group.onWillMoveEditor(e => this.onWillMoveEditor(e)));\n            }\n        }\n    }\n    onWillMoveEditor(e) {\n        this.trace('onWillMoveEditor()', e.editor);\n        if (this.scope === 1 ) {\n            return;\n        }\n        for (const entry of this.stack) {\n            if (entry.groupId !== e.groupId) {\n                continue;\n            }\n            if (!this.editorHelper.matchesEditor(e.editor, entry.editor)) {\n                continue;\n            }\n            entry.groupId = e.target;\n        }\n    }\n    notifyNavigation(editorPane, event) {\n        this.trace('notifyNavigation()', editorPane?.input, event);\n        const isSelectionAwareEditorPane = isEditorPaneWithSelection(editorPane);\n        const hasValidEditor = editorPane?.group && editorPane.input && !editorPane.input.isDisposed();\n        if (this.navigating) {\n            this.trace(`notifyNavigation() ignoring (navigating)`, editorPane?.input, event);\n            if (isSelectionAwareEditorPane && hasValidEditor) {\n                this.trace('notifyNavigation() updating current selection state', editorPane?.input, event);\n                this.currentSelectionState = ( (new EditorSelectionState(\n                    { groupId: editorPane.group.id, editor: editorPane.input },\n                    editorPane.getSelection(),\n                    event?.reason\n                )));\n            }\n            else {\n                this.trace('notifyNavigation() dropping current selection state', editorPane?.input, event);\n                this.currentSelectionState = undefined;\n            }\n        }\n        else {\n            this.trace(`notifyNavigation() not ignoring`, editorPane?.input, event);\n            if (isSelectionAwareEditorPane && hasValidEditor) {\n                this.onSelectionAwareEditorNavigation(editorPane.group.id, editorPane.input, editorPane.getSelection(), event);\n            }\n            else {\n                this.currentSelectionState = undefined;\n                if (hasValidEditor) {\n                    this.onNonSelectionAwareEditorNavigation(editorPane.group.id, editorPane.input);\n                }\n            }\n        }\n    }\n    onSelectionAwareEditorNavigation(groupId, editor, selection, event) {\n        if (this.current?.groupId === groupId && !selection && this.editorHelper.matchesEditor(this.current.editor, editor)) {\n            return;\n        }\n        this.trace('onSelectionAwareEditorNavigation()', editor, event);\n        const stateCandidate = ( (new EditorSelectionState({ groupId, editor }, selection, event?.reason)));\n        if (!this.currentSelectionState || this.currentSelectionState.justifiesNewNavigationEntry(stateCandidate)) {\n            this.doAdd(groupId, editor, stateCandidate.selection);\n        }\n        else {\n            this.doReplace(groupId, editor, stateCandidate.selection);\n        }\n        this.currentSelectionState = stateCandidate;\n    }\n    onNonSelectionAwareEditorNavigation(groupId, editor) {\n        if (this.current?.groupId === groupId && this.editorHelper.matchesEditor(this.current.editor, editor)) {\n            return;\n        }\n        this.trace('onNonSelectionAwareEditorNavigation()', editor);\n        this.doAdd(groupId, editor);\n    }\n    doAdd(groupId, editor, selection) {\n        if (!this.navigating) {\n            this.addOrReplace(groupId, editor, selection);\n        }\n    }\n    doReplace(groupId, editor, selection) {\n        if (!this.navigating) {\n            this.addOrReplace(groupId, editor, selection, true );\n        }\n    }\n    addOrReplace(groupId, editorCandidate, selection, forceReplace) {\n        this.registerGroupListeners(groupId);\n        let replace = false;\n        if (this.current) {\n            if (forceReplace) {\n                replace = true;\n            }\n            else if (this.shouldReplaceStackEntry(this.current, { groupId, editor: editorCandidate, selection })) {\n                replace = true;\n            }\n        }\n        const editor = this.editorHelper.preferResourceEditorInput(editorCandidate);\n        if (!editor) {\n            return;\n        }\n        if (replace) {\n            this.trace('replace()', editor);\n        }\n        else {\n            this.trace('add()', editor);\n        }\n        const newStackEntry = { groupId, editor, selection };\n        const removedEntries = [];\n        if (replace) {\n            if (this.current) {\n                removedEntries.push(this.current);\n            }\n            this.current = newStackEntry;\n        }\n        else {\n            if (this.stack.length > this.index + 1) {\n                for (let i = this.index + 1; i < this.stack.length; i++) {\n                    removedEntries.push(this.stack[i]);\n                }\n                this.stack = this.stack.slice(0, this.index + 1);\n            }\n            this.stack.splice(this.index + 1, 0, newStackEntry);\n            if (this.stack.length > EditorNavigationStack.MAX_STACK_SIZE) {\n                removedEntries.push(this.stack.shift());\n                if (this.previousIndex >= 0) {\n                    this.previousIndex--;\n                }\n            }\n            else {\n                this.setIndex(this.index + 1, true );\n            }\n        }\n        for (const removedEntry of removedEntries) {\n            this.editorHelper.clearOnEditorDispose(removedEntry.editor, this.mapEditorToDisposable);\n        }\n        if (isEditorInput(editor)) {\n            this.editorHelper.onEditorDispose(editor, () => this.remove(editor), this.mapEditorToDisposable);\n        }\n        this._onDidChange.fire();\n    }\n    shouldReplaceStackEntry(entry, candidate) {\n        if (entry.groupId !== candidate.groupId) {\n            return false;\n        }\n        if (!this.editorHelper.matchesEditor(entry.editor, candidate.editor)) {\n            return false;\n        }\n        if (!entry.selection) {\n            return true;\n        }\n        if (!candidate.selection) {\n            return false;\n        }\n        return entry.selection.compare(candidate.selection) === 1 ;\n    }\n    move(event) {\n        if (event.isOperation(2 )) {\n            for (const entry of this.stack) {\n                if (this.editorHelper.matchesEditor(event, entry.editor)) {\n                    entry.editor = { resource: event.target.resource };\n                }\n            }\n        }\n    }\n    remove(arg1) {\n        this.stack = this.stack.filter(entry => {\n            const matches = typeof arg1 === 'number' ? entry.groupId === arg1 : this.editorHelper.matchesEditor(arg1, entry.editor);\n            if (matches) {\n                this.editorHelper.clearOnEditorDispose(entry.editor, this.mapEditorToDisposable);\n            }\n            return !matches;\n        });\n        this.flatten();\n        this.index = this.stack.length - 1;\n        this.previousIndex = -1;\n        if (typeof arg1 === 'number') {\n            this.mapGroupToDisposable.get(arg1)?.dispose();\n            this.mapGroupToDisposable.delete(arg1);\n        }\n        this._onDidChange.fire();\n    }\n    flatten() {\n        const flattenedStack = [];\n        let previousEntry = undefined;\n        for (const entry of this.stack) {\n            if (previousEntry && this.shouldReplaceStackEntry(entry, previousEntry)) {\n                continue;\n            }\n            previousEntry = entry;\n            flattenedStack.push(entry);\n        }\n        this.stack = flattenedStack;\n    }\n    clear() {\n        this.index = -1;\n        this.previousIndex = -1;\n        this.stack.splice(0);\n        for (const [, disposable] of this.mapEditorToDisposable) {\n            dispose(disposable);\n        }\n        this.mapEditorToDisposable.clear();\n        for (const [, disposable] of this.mapGroupToDisposable) {\n            dispose(disposable);\n        }\n        this.mapGroupToDisposable.clear();\n    }\n    dispose() {\n        super.dispose();\n        this.clear();\n    }\n    canGoForward() {\n        return this.stack.length > this.index + 1;\n    }\n    async goForward() {\n        const navigated = await this.maybeGoCurrent();\n        if (navigated) {\n            return;\n        }\n        if (!this.canGoForward()) {\n            return;\n        }\n        this.setIndex(this.index + 1);\n        return this.navigate();\n    }\n    canGoBack() {\n        return this.index > 0;\n    }\n    async goBack() {\n        const navigated = await this.maybeGoCurrent();\n        if (navigated) {\n            return;\n        }\n        if (!this.canGoBack()) {\n            return;\n        }\n        this.setIndex(this.index - 1);\n        return this.navigate();\n    }\n    async goPrevious() {\n        const navigated = await this.maybeGoCurrent();\n        if (navigated) {\n            return;\n        }\n        if (this.previousIndex === -1) {\n            return this.goBack();\n        }\n        this.setIndex(this.previousIndex);\n        return this.navigate();\n    }\n    canGoLast() {\n        return this.stack.length > 0;\n    }\n    async goLast() {\n        if (!this.canGoLast()) {\n            return;\n        }\n        this.setIndex(this.stack.length - 1);\n        return this.navigate();\n    }\n    async maybeGoCurrent() {\n        if (this.filter === 0 ) {\n            return false;\n        }\n        if (this.isCurrentSelectionActive()) {\n            return false;\n        }\n        await this.navigate();\n        return true;\n    }\n    isCurrentSelectionActive() {\n        if (!this.current?.selection) {\n            return false;\n        }\n        const pane = this.editorService.activeEditorPane;\n        if (!isEditorPaneWithSelection(pane)) {\n            return false;\n        }\n        if (pane.group?.id !== this.current.groupId) {\n            return false;\n        }\n        if (!pane.input || !this.editorHelper.matchesEditor(pane.input, this.current.editor)) {\n            return false;\n        }\n        const paneSelection = pane.getSelection();\n        if (!paneSelection) {\n            return false;\n        }\n        return paneSelection.compare(this.current.selection) === 1 ;\n    }\n    setIndex(newIndex, skipEvent) {\n        this.previousIndex = this.index;\n        this.index = newIndex;\n        if (!skipEvent) {\n            this._onDidChange.fire();\n        }\n    }\n    async navigate() {\n        this.navigating = true;\n        try {\n            if (this.current) {\n                await this.doNavigate(this.current);\n            }\n        }\n        finally {\n            this.navigating = false;\n        }\n    }\n    doNavigate(location) {\n        let options = Object.create(null);\n        if (location.selection) {\n            options = location.selection.restore(options);\n        }\n        if (isEditorInput(location.editor)) {\n            return this.editorService.openEditor(location.editor, options, location.groupId);\n        }\n        return this.editorService.openEditor({\n            ...location.editor,\n            options: {\n                ...location.editor.options,\n                ...options\n            }\n        }, location.groupId);\n    }\n    isNavigating() {\n        return this.navigating;\n    }\n};\nEditorNavigationStack = ( (__decorate([\n    ( (__param(2, IInstantiationService))),\n    ( (__param(3, IEditorService))),\n    ( (__param(4, IEditorGroupsService))),\n    ( (__param(5, ILogService)))\n], EditorNavigationStack)));\nlet EditorHelper = class EditorHelper {\n    constructor(uriIdentityService, lifecycleService, fileService, pathService) {\n        this.uriIdentityService = uriIdentityService;\n        this.lifecycleService = lifecycleService;\n        this.fileService = fileService;\n        this.pathService = pathService;\n    }\n    preferResourceEditorInput(editor) {\n        const resource = EditorResourceAccessor.getOriginalUri(editor);\n        const hasValidResourceEditorInputScheme = resource?.scheme === Schemas.file ||\n            resource?.scheme === Schemas.vscodeRemote ||\n            resource?.scheme === Schemas.vscodeUserData ||\n            resource?.scheme === this.pathService.defaultUriScheme;\n        if (hasValidResourceEditorInputScheme) {\n            if (isEditorInput(editor)) {\n                const untypedInput = editor.toUntyped();\n                if (isResourceEditorInput(untypedInput)) {\n                    return untypedInput;\n                }\n            }\n            return editor;\n        }\n        else {\n            return isEditorInput(editor) ? editor : undefined;\n        }\n    }\n    matchesEditor(arg1, inputB) {\n        if (arg1 instanceof FileChangesEvent || arg1 instanceof FileOperationEvent) {\n            if (isEditorInput(inputB)) {\n                return false;\n            }\n            if (arg1 instanceof FileChangesEvent) {\n                return arg1.contains(inputB.resource, 2 );\n            }\n            return this.matchesFile(inputB.resource, arg1);\n        }\n        if (isEditorInput(arg1)) {\n            if (isEditorInput(inputB)) {\n                return arg1.matches(inputB);\n            }\n            return this.matchesFile(inputB.resource, arg1);\n        }\n        if (isEditorInput(inputB)) {\n            return this.matchesFile(arg1.resource, inputB);\n        }\n        return arg1 && inputB && this.uriIdentityService.extUri.isEqual(arg1.resource, inputB.resource);\n    }\n    matchesFile(resource, arg2) {\n        if (arg2 instanceof FileChangesEvent) {\n            return arg2.contains(resource, 2 );\n        }\n        if (arg2 instanceof FileOperationEvent) {\n            return this.uriIdentityService.extUri.isEqualOrParent(resource, arg2.resource);\n        }\n        if (isEditorInput(arg2)) {\n            const inputResource = arg2.resource;\n            if (!inputResource) {\n                return false;\n            }\n            if (this.lifecycleService.phase >= 3  && !this.fileService.hasProvider(inputResource)) {\n                return false;\n            }\n            return this.uriIdentityService.extUri.isEqual(inputResource, resource);\n        }\n        return this.uriIdentityService.extUri.isEqual(arg2?.resource, resource);\n    }\n    matchesEditorIdentifier(identifier, editorPane) {\n        if (!editorPane?.group) {\n            return false;\n        }\n        if (identifier.groupId !== editorPane.group.id) {\n            return false;\n        }\n        return editorPane.input ? identifier.editor.matches(editorPane.input) : false;\n    }\n    onEditorDispose(editor, listener, mapEditorToDispose) {\n        const toDispose = Event.once(editor.onWillDispose)(() => listener());\n        let disposables = mapEditorToDispose.get(editor);\n        if (!disposables) {\n            disposables = ( (new DisposableStore()));\n            mapEditorToDispose.set(editor, disposables);\n        }\n        disposables.add(toDispose);\n    }\n    clearOnEditorDispose(editor, mapEditorToDispose) {\n        if (!isEditorInput(editor)) {\n            return;\n        }\n        const disposables = mapEditorToDispose.get(editor);\n        if (disposables) {\n            dispose(disposables);\n            mapEditorToDispose.delete(editor);\n        }\n    }\n};\nEditorHelper = ( (__decorate([\n    ( (__param(0, IUriIdentityService))),\n    ( (__param(1, ILifecycleService))),\n    ( (__param(2, IFileService))),\n    ( (__param(3, IPathService)))\n], EditorHelper)));\nexport { EditorNavigationStack, HistoryService };\n","import { toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { LinkedList } from 'monaco-editor/esm/vs/base/common/linkedList.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nclass OutlineService {\n    constructor() {\n        this._factories = ( new LinkedList());\n        this._onDidChange = ( new Emitter());\n        this.onDidChange = this._onDidChange.event;\n    }\n    canCreateOutline(pane) {\n        for (const factory of this._factories) {\n            if (factory.matches(pane)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async createOutline(pane, target, token) {\n        for (const factory of this._factories) {\n            if (factory.matches(pane)) {\n                return await factory.createOutline(pane, target, token);\n            }\n        }\n        return undefined;\n    }\n    registerOutlineCreator(creator) {\n        const rm = this._factories.push(creator);\n        this._onDidChange.fire();\n        return toDisposable(() => {\n            rm();\n            this._onDidChange.fire();\n        });\n    }\n}\nexport { OutlineService };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".webview.modified{box-shadow:-6px 0 5px -5px var(--vscode-scrollbar-shadow)}\";\nn(css,{});\nexport { css, css as default };\n","import { once } from 'monaco-editor/esm/vs/base/common/functional.js';\nclass CustomEditorModelManager {\n    constructor() {\n        this._references = ( (new Map()));\n    }\n    async getAllModels(resource) {\n        const keyStart = `${( ( resource.toString()))}@@@`;\n        const models = [];\n        for (const [key, entry] of this._references) {\n            if (key.startsWith(keyStart) && entry.model) {\n                models.push(await entry.model);\n            }\n        }\n        return models;\n    }\n    async get(resource, viewType) {\n        const key = this.key(resource, viewType);\n        const entry = this._references.get(key);\n        return entry?.model;\n    }\n    tryRetain(resource, viewType) {\n        const key = this.key(resource, viewType);\n        const entry = this._references.get(key);\n        if (!entry) {\n            return undefined;\n        }\n        entry.counter++;\n        return entry.model.then(model => {\n            return {\n                object: model,\n                dispose: once(() => {\n                    if (--entry.counter <= 0) {\n                        entry.model.then(x => x.dispose());\n                        this._references.delete(key);\n                    }\n                }),\n            };\n        });\n    }\n    add(resource, viewType, model) {\n        const key = this.key(resource, viewType);\n        const existing = this._references.get(key);\n        if (existing) {\n            throw new Error('Model already exists');\n        }\n        this._references.set(key, { viewType, model, counter: 0 });\n        return this.tryRetain(resource, viewType);\n    }\n    disposeAllModelsForView(viewType) {\n        for (const [key, value] of this._references) {\n            if (value.viewType === viewType) {\n                value.model.then(x => x.dispose());\n                this._references.delete(key);\n            }\n        }\n    }\n    key(resource, viewType) {\n        return `${( ( resource.toString()))}@@@${viewType}`;\n    }\n}\nexport { CustomEditorModelManager };\n","import * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { ExtensionsRegistry } from '../../../services/extensions/common/extensionsRegistry.js';\nimport { languagesExtPoint } from '../../../services/language/common/languageService.js';\nconst Fields = ( Object.freeze({\n    viewType: 'viewType',\n    displayName: 'displayName',\n    selector: 'selector',\n    priority: 'priority',\n}));\nconst CustomEditorsContribution = {\n    description: ( nls.localize('contributes.customEditors', 'Contributed custom editors.')),\n    type: 'array',\n    defaultSnippets: [{\n            body: [{\n                    [Fields.viewType]: '$1',\n                    [Fields.displayName]: '$2',\n                    [Fields.selector]: [{\n                            filenamePattern: '$3'\n                        }],\n                }]\n        }],\n    items: {\n        type: 'object',\n        required: [\n            Fields.viewType,\n            Fields.displayName,\n            Fields.selector,\n        ],\n        properties: {\n            [Fields.viewType]: {\n                type: 'string',\n                markdownDescription: ( nls.localize(\n                    'contributes.viewType',\n                    'Identifier for the custom editor. This must be unique across all custom editors, so we recommend including your extension id as part of `viewType`. The `viewType` is used when registering custom editors with `vscode.registerCustomEditorProvider` and in the `onCustomEditor:${id}` [activation event](https://code.visualstudio.com/api/references/activation-events).'\n                )),\n            },\n            [Fields.displayName]: {\n                type: 'string',\n                description: ( nls.localize(\n                    'contributes.displayName',\n                    'Human readable name of the custom editor. This is displayed to users when selecting which editor to use.'\n                )),\n            },\n            [Fields.selector]: {\n                type: 'array',\n                description: ( nls.localize(\n                    'contributes.selector',\n                    'Set of globs that the custom editor is enabled for.'\n                )),\n                items: {\n                    type: 'object',\n                    defaultSnippets: [{\n                            body: {\n                                filenamePattern: '$1',\n                            }\n                        }],\n                    properties: {\n                        filenamePattern: {\n                            type: 'string',\n                            description: ( nls.localize(\n                                'contributes.selector.filenamePattern',\n                                'Glob that the custom editor is enabled for.'\n                            )),\n                        },\n                    }\n                }\n            },\n            [Fields.priority]: {\n                type: 'string',\n                markdownDeprecationMessage: ( nls.localize(\n                    'contributes.priority',\n                    'Controls if the custom editor is enabled automatically when the user opens a file. This may be overridden by users using the `workbench.editorAssociations` setting.'\n                )),\n                enum: [\n                    \"default\" ,\n                    \"option\" ,\n                ],\n                markdownEnumDescriptions: [\n                    ( nls.localize(\n                        'contributes.priority.default',\n                        'The editor is automatically used when the user opens a resource, provided that no other default custom editors are registered for that resource.'\n                    )),\n                    ( nls.localize(\n                        'contributes.priority.option',\n                        'The editor is not automatically used when the user opens a resource, but a user can switch to the editor using the `Reopen With` command.'\n                    )),\n                ],\n                default: 'default'\n            }\n        }\n    }\n};\nconst customEditorsExtensionPoint = ( ExtensionsRegistry.registerExtensionPoint({\n    extensionPoint: 'customEditors',\n    deps: [languagesExtPoint],\n    jsonSchema: CustomEditorsContribution,\n    activationEventsGenerator: (contribs, result) => {\n        for (const contrib of contribs) {\n            const viewType = contrib[Fields.viewType];\n            if (viewType) {\n                result.push(`onCustomEditor:${viewType}`);\n            }\n        }\n    },\n}));\nexport { customEditorsExtensionPoint };\n","import { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nimport { Memento } from '../../../common/memento.js';\nimport { CustomEditorInfo } from './customEditor.js';\nimport { customEditorsExtensionPoint } from './extensionPoint.js';\nimport { RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nclass ContributedCustomEditors extends Disposable {\n    static { this.CUSTOM_EDITORS_STORAGE_ID = 'customEditors'; }\n    static { this.CUSTOM_EDITORS_ENTRY_ID = 'editors'; }\n    constructor(storageService) {\n        super();\n        this._editors = ( new Map());\n        this._onChange = this._register(( new Emitter()));\n        this.onChange = this._onChange.event;\n        this._memento = ( new Memento(ContributedCustomEditors.CUSTOM_EDITORS_STORAGE_ID, storageService));\n        const mementoObject = this._memento.getMemento(0 , 1 );\n        for (const info of (mementoObject[ContributedCustomEditors.CUSTOM_EDITORS_ENTRY_ID] || [])) {\n            this.add(( new CustomEditorInfo(info)));\n        }\n        customEditorsExtensionPoint.setHandler(extensions => {\n            this.update(extensions);\n        });\n    }\n    update(extensions) {\n        this._editors.clear();\n        for (const extension of extensions) {\n            for (const webviewEditorContribution of extension.value) {\n                this.add(( new CustomEditorInfo({\n                    id: webviewEditorContribution.viewType,\n                    displayName: webviewEditorContribution.displayName,\n                    providerDisplayName: extension.description.isBuiltin ? ( nls.localize('builtinProviderDisplayName', \"Built-in\")) : extension.description.displayName || extension.description.identifier.value,\n                    selector: webviewEditorContribution.selector || [],\n                    priority: getPriorityFromContribution(webviewEditorContribution, extension.description),\n                })));\n            }\n        }\n        const mementoObject = this._memento.getMemento(0 , 1 );\n        mementoObject[ContributedCustomEditors.CUSTOM_EDITORS_ENTRY_ID] = Array.from(( this._editors.values()));\n        this._memento.saveMemento();\n        this._onChange.fire();\n    }\n    [Symbol.iterator]() {\n        return ( this._editors.values());\n    }\n    get(viewType) {\n        return this._editors.get(viewType);\n    }\n    getContributedEditors(resource) {\n        return Array.from(( this._editors.values()))\n            .filter(customEditor => customEditor.matches(resource));\n    }\n    add(info) {\n        if (( this._editors.has(info.id))) {\n            console.error(`Custom editor with id '${info.id}' already registered`);\n            return;\n        }\n        this._editors.set(info.id, info);\n    }\n}\nfunction getPriorityFromContribution(contribution, extension) {\n    switch (contribution.priority) {\n        case RegisteredEditorPriority.default:\n        case RegisteredEditorPriority.option:\n            return contribution.priority;\n        case RegisteredEditorPriority.builtin:\n            return extension.isBuiltin ? RegisteredEditorPriority.builtin : RegisteredEditorPriority.default;\n        default:\n            return RegisteredEditorPriority.default;\n    }\n}\nexport { ContributedCustomEditors };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport './media/customEditor.css.js';\nimport { coalesce } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { extname, isEqual } from 'monaco-editor/esm/vs/base/common/resources.js';\nimport { assertIsDefined } from 'monaco-editor/esm/vs/base/common/types.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { UndoCommand, RedoCommand } from 'monaco-editor/esm/vs/editor/browser/editorExtensions.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { EditorExtensions, DEFAULT_EDITOR_ASSOCIATION } from '../../../common/editor.js';\nimport { DiffEditorInput } from '../../../common/editor/diffEditorInput.js';\nimport { CONTEXT_ACTIVE_CUSTOM_EDITOR_ID, CONTEXT_FOCUSED_CUSTOM_EDITOR_IS_EDITABLE, CustomEditorInfoCollection } from '../common/customEditor.js';\nimport { CustomEditorModelManager } from '../common/customEditorModelManager.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { RegisteredEditorPriority, IEditorResolverService } from '../../../services/editor/common/editorResolverService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ContributedCustomEditors } from '../common/contributedCustomEditors.js';\nimport { CustomEditorInput } from './customEditorInput.js';\nlet CustomEditorService = class CustomEditorService extends Disposable {\n    constructor(contextKeyService, fileService, storageService, editorService, editorGroupService, instantiationService, uriIdentityService, editorResolverService) {\n        super();\n        this.editorService = editorService;\n        this.editorGroupService = editorGroupService;\n        this.instantiationService = instantiationService;\n        this.uriIdentityService = uriIdentityService;\n        this.editorResolverService = editorResolverService;\n        this._untitledCounter = 0;\n        this._editorResolverDisposables = this._register(( new DisposableStore()));\n        this._editorCapabilities = ( new Map());\n        this._models = ( new CustomEditorModelManager());\n        this._onDidChangeEditorTypes = this._register(( new Emitter()));\n        this.onDidChangeEditorTypes = this._onDidChangeEditorTypes.event;\n        this._fileEditorFactory = ( Registry.as(EditorExtensions.EditorFactory)).getFileEditorFactory();\n        this._activeCustomEditorId = CONTEXT_ACTIVE_CUSTOM_EDITOR_ID.bindTo(contextKeyService);\n        this._focusedCustomEditorIsEditable = CONTEXT_FOCUSED_CUSTOM_EDITOR_IS_EDITABLE.bindTo(contextKeyService);\n        this._contributedEditors = this._register(( new ContributedCustomEditors(storageService)));\n        this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this));\n        this._register(this._contributedEditors.onChange(() => {\n            this.editorResolverService.bufferChangeEvents(this.registerContributionPoints.bind(this));\n            this.updateContexts();\n            this._onDidChangeEditorTypes.fire();\n        }));\n        this._register(this.editorService.onDidActiveEditorChange(() => this.updateContexts()));\n        this._register(fileService.onDidRunOperation(e => {\n            if (e.isOperation(2 )) {\n                this.handleMovedFileInOpenedFileEditors(e.resource, this.uriIdentityService.asCanonicalUri(e.target.resource));\n            }\n        }));\n        const PRIORITY = 105;\n        this._register(UndoCommand.addImplementation(PRIORITY, 'custom-editor', () => {\n            return this.withActiveCustomEditor(editor => editor.undo());\n        }));\n        this._register(RedoCommand.addImplementation(PRIORITY, 'custom-editor', () => {\n            return this.withActiveCustomEditor(editor => editor.redo());\n        }));\n        this.updateContexts();\n    }\n    getEditorTypes() {\n        return [...this._contributedEditors];\n    }\n    withActiveCustomEditor(f) {\n        const activeEditor = this.editorService.activeEditor;\n        if (activeEditor instanceof CustomEditorInput) {\n            const result = f(activeEditor);\n            if (result) {\n                return result;\n            }\n            return true;\n        }\n        return false;\n    }\n    registerContributionPoints() {\n        this._editorResolverDisposables.clear();\n        for (const contributedEditor of this._contributedEditors) {\n            for (const globPattern of contributedEditor.selector) {\n                if (!globPattern.filenamePattern) {\n                    continue;\n                }\n                this._editorResolverDisposables.add(this.editorResolverService.registerEditor(globPattern.filenamePattern, {\n                    id: contributedEditor.id,\n                    label: contributedEditor.displayName,\n                    detail: contributedEditor.providerDisplayName,\n                    priority: contributedEditor.priority,\n                }, {\n                    singlePerResource: () => !this.getCustomEditorCapabilities(contributedEditor.id)?.supportsMultipleEditorsPerDocument ?? true\n                }, {\n                    createEditorInput: ({ resource }, group) => {\n                        return { editor: CustomEditorInput.create(this.instantiationService, resource, contributedEditor.id, group.id) };\n                    },\n                    createUntitledEditorInput: ({ resource }, group) => {\n                        return { editor: CustomEditorInput.create(this.instantiationService, resource ?? ( URI.from(\n                            { scheme: Schemas.untitled, authority: `Untitled-${this._untitledCounter++}` }\n                        )), contributedEditor.id, group.id) };\n                    },\n                    createDiffEditorInput: (diffEditorInput, group) => {\n                        return { editor: this.createDiffEditorInput(diffEditorInput, contributedEditor.id, group) };\n                    },\n                }));\n            }\n        }\n    }\n    createDiffEditorInput(editor, editorID, group) {\n        const modifiedOverride = CustomEditorInput.create(this.instantiationService, assertIsDefined(editor.modified.resource), editorID, group.id, { customClasses: 'modified' });\n        const originalOverride = CustomEditorInput.create(this.instantiationService, assertIsDefined(editor.original.resource), editorID, group.id, { customClasses: 'original' });\n        return this.instantiationService.createInstance(DiffEditorInput, editor.label, editor.description, originalOverride, modifiedOverride, true);\n    }\n    get models() { return this._models; }\n    getCustomEditor(viewType) {\n        return this._contributedEditors.get(viewType);\n    }\n    getContributedCustomEditors(resource) {\n        return ( new CustomEditorInfoCollection(this._contributedEditors.getContributedEditors(resource)));\n    }\n    getUserConfiguredCustomEditors(resource) {\n        const resourceAssocations = this.editorResolverService.getAssociationsForResource(resource);\n        return ( new CustomEditorInfoCollection(coalesce(( resourceAssocations\n            .map(association => this._contributedEditors.get(association.viewType))))));\n    }\n    getAllCustomEditors(resource) {\n        return ( new CustomEditorInfoCollection([\n            ...this.getUserConfiguredCustomEditors(resource).allEditors,\n            ...this.getContributedCustomEditors(resource).allEditors,\n        ]));\n    }\n    registerCustomEditorCapabilities(viewType, options) {\n        if (( this._editorCapabilities.has(viewType))) {\n            throw new Error(`Capabilities for ${viewType} already set`);\n        }\n        this._editorCapabilities.set(viewType, options);\n        return toDisposable(() => {\n            this._editorCapabilities.delete(viewType);\n        });\n    }\n    getCustomEditorCapabilities(viewType) {\n        return this._editorCapabilities.get(viewType);\n    }\n    updateContexts() {\n        const activeEditorPane = this.editorService.activeEditorPane;\n        const resource = activeEditorPane?.input?.resource;\n        if (!resource) {\n            this._activeCustomEditorId.reset();\n            this._focusedCustomEditorIsEditable.reset();\n            return;\n        }\n        this._activeCustomEditorId.set(activeEditorPane?.input instanceof CustomEditorInput ? activeEditorPane.input.viewType : '');\n        this._focusedCustomEditorIsEditable.set(activeEditorPane?.input instanceof CustomEditorInput);\n    }\n    async handleMovedFileInOpenedFileEditors(oldResource, newResource) {\n        if (extname(oldResource).toLowerCase() === extname(newResource).toLowerCase()) {\n            return;\n        }\n        const possibleEditors = this.getAllCustomEditors(newResource);\n        if (!( possibleEditors.allEditors.some(editor => editor.priority !== RegisteredEditorPriority.option))) {\n            return;\n        }\n        const editorsToReplace = ( new Map());\n        for (const group of this.editorGroupService.groups) {\n            for (const editor of group.editors) {\n                if (this._fileEditorFactory.isFileEditor(editor)\n                    && !(editor instanceof CustomEditorInput)\n                    && isEqual(editor.resource, newResource)) {\n                    let entry = editorsToReplace.get(group.id);\n                    if (!entry) {\n                        entry = [];\n                        editorsToReplace.set(group.id, entry);\n                    }\n                    entry.push(editor);\n                }\n            }\n        }\n        if (!editorsToReplace.size) {\n            return;\n        }\n        for (const [group, entries] of editorsToReplace) {\n            this.editorService.replaceEditors(( entries.map(editor => {\n                let replacement;\n                if (possibleEditors.defaultEditor) {\n                    const viewType = possibleEditors.defaultEditor.id;\n                    replacement = CustomEditorInput.create(this.instantiationService, newResource, viewType, group);\n                }\n                else {\n                    replacement = { resource: newResource, options: { override: DEFAULT_EDITOR_ASSOCIATION.id } };\n                }\n                return {\n                    editor,\n                    replacement,\n                    options: {\n                        preserveFocus: true,\n                    }\n                };\n            })), group);\n        }\n    }\n};\nCustomEditorService = ( __decorate([\n    ( __param(0, IContextKeyService)),\n    ( __param(1, IFileService)),\n    ( __param(2, IStorageService)),\n    ( __param(3, IEditorService)),\n    ( __param(4, IEditorGroupsService)),\n    ( __param(5, IInstantiationService)),\n    ( __param(6, IUriIdentityService)),\n    ( __param(7, IEditorResolverService))\n], CustomEditorService));\nexport { CustomEditorService };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { EDITOR_FONT_DEFAULTS } from 'monaco-editor/esm/vs/editor/common/config/editorOptions.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport * as colorRegistry from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nimport { ColorScheme } from 'monaco-editor/esm/vs/platform/theme/common/theme.js';\nimport { IWorkbenchThemeService } from '../../../services/themes/common/workbenchThemeService.js';\nimport { DEFAULT_FONT_FAMILY } from '../../../browser/style.js';\nlet WebviewThemeDataProvider = class WebviewThemeDataProvider extends Disposable {\n    constructor(_themeService, _configurationService) {\n        super();\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._cachedWebViewThemeData = undefined;\n        this._onThemeDataChanged = this._register(( new Emitter()));\n        this.onThemeDataChanged = this._onThemeDataChanged.event;\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._reset();\n        }));\n        const webviewConfigurationKeys = ['editor.fontFamily', 'editor.fontWeight', 'editor.fontSize'];\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (( webviewConfigurationKeys.some(key => e.affectsConfiguration(key)))) {\n                this._reset();\n            }\n        }));\n    }\n    getTheme() {\n        return this._themeService.getColorTheme();\n    }\n    getWebviewThemeData() {\n        if (!this._cachedWebViewThemeData) {\n            const configuration = this._configurationService.getValue('editor');\n            const editorFontFamily = configuration.fontFamily || EDITOR_FONT_DEFAULTS.fontFamily;\n            const editorFontWeight = configuration.fontWeight || EDITOR_FONT_DEFAULTS.fontWeight;\n            const editorFontSize = configuration.fontSize || EDITOR_FONT_DEFAULTS.fontSize;\n            const theme = this._themeService.getColorTheme();\n            const exportedColors = colorRegistry.getColorRegistry().getColors().reduce((colors, entry) => {\n                const color = theme.getColor(entry.id);\n                if (color) {\n                    colors['vscode-' + entry.id.replace('.', '-')] = ( color.toString());\n                }\n                return colors;\n            }, {});\n            const styles = {\n                'vscode-font-family': DEFAULT_FONT_FAMILY,\n                'vscode-font-weight': 'normal',\n                'vscode-font-size': '13px',\n                'vscode-editor-font-family': editorFontFamily,\n                'vscode-editor-font-weight': editorFontWeight,\n                'vscode-editor-font-size': editorFontSize + 'px',\n                ...exportedColors\n            };\n            const activeTheme = ApiThemeClassName.fromTheme(theme);\n            this._cachedWebViewThemeData = { styles, activeTheme, themeLabel: theme.label, themeId: theme.settingsId };\n        }\n        return this._cachedWebViewThemeData;\n    }\n    _reset() {\n        this._cachedWebViewThemeData = undefined;\n        this._onThemeDataChanged.fire();\n    }\n};\nWebviewThemeDataProvider = ( __decorate([\n    ( __param(0, IWorkbenchThemeService)),\n    ( __param(1, IConfigurationService))\n], WebviewThemeDataProvider));\nvar ApiThemeClassName;\n( (function(ApiThemeClassName) {\n    ApiThemeClassName[\"light\"] = \"vscode-light\";\n    ApiThemeClassName[\"dark\"] = \"vscode-dark\";\n    ApiThemeClassName[\"highContrast\"] = \"vscode-high-contrast\";\n    ApiThemeClassName[\"highContrastLight\"] = \"vscode-high-contrast-light\";\n})(ApiThemeClassName || (ApiThemeClassName = {})));\n( (function(ApiThemeClassName) {\n    function fromTheme(theme) {\n        switch (theme.type) {\n            case ColorScheme.LIGHT: return ApiThemeClassName.light;\n            case ColorScheme.DARK: return ApiThemeClassName.dark;\n            case ColorScheme.HIGH_CONTRAST_DARK: return ApiThemeClassName.highContrast;\n            case ColorScheme.HIGH_CONTRAST_LIGHT: return ApiThemeClassName.highContrastLight;\n        }\n    }\n    ApiThemeClassName.fromTheme = fromTheme;\n})(ApiThemeClassName || (ApiThemeClassName = {})));\nexport { WebviewThemeDataProvider };\n","import { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { extractLocalHostUriMetaDataForPortMapping } from '../../tunnel/common/tunnel.js';\nclass WebviewPortMappingManager {\n    constructor(_getExtensionLocation, _getMappings, tunnelService) {\n        this._getExtensionLocation = _getExtensionLocation;\n        this._getMappings = _getMappings;\n        this.tunnelService = tunnelService;\n        this._tunnels = ( new Map());\n    }\n    async getRedirect(resolveAuthority, url) {\n        const uri = ( URI.parse(url));\n        const requestLocalHostInfo = extractLocalHostUriMetaDataForPortMapping(uri);\n        if (!requestLocalHostInfo) {\n            return undefined;\n        }\n        for (const mapping of this._getMappings()) {\n            if (mapping.webviewPort === requestLocalHostInfo.port) {\n                const extensionLocation = this._getExtensionLocation();\n                if (extensionLocation && extensionLocation.scheme === Schemas.vscodeRemote) {\n                    const tunnel = resolveAuthority && (await this.getOrCreateTunnel(resolveAuthority, mapping.extensionHostPort));\n                    if (tunnel) {\n                        if (tunnel.tunnelLocalPort === mapping.webviewPort) {\n                            return undefined;\n                        }\n                        return encodeURI(( uri.with({\n                            authority: `127.0.0.1:${tunnel.tunnelLocalPort}`,\n                        }).toString(true)));\n                    }\n                }\n                if (mapping.webviewPort !== mapping.extensionHostPort) {\n                    return encodeURI(( uri.with({\n                        authority: `${requestLocalHostInfo.address}:${mapping.extensionHostPort}`\n                    }).toString(true)));\n                }\n            }\n        }\n        return undefined;\n    }\n    async dispose() {\n        for (const tunnel of ( this._tunnels.values())) {\n            await tunnel.dispose();\n        }\n        this._tunnels.clear();\n    }\n    async getOrCreateTunnel(remoteAuthority, remotePort) {\n        const existing = this._tunnels.get(remotePort);\n        if (existing) {\n            return existing;\n        }\n        const tunnel = await this.tunnelService.openTunnel({ getAddress: async () => remoteAuthority }, undefined, remotePort);\n        if (tunnel) {\n            this._tunnels.set(remotePort, tunnel);\n        }\n        return tunnel;\n    }\n}\nexport { WebviewPortMappingManager };\n","import { getMediaMime, Mimes } from 'monaco-editor/esm/vs/base/common/mime.js';\nimport { extname } from 'monaco-editor/esm/vs/base/common/path.js';\nconst webviewMimeTypes = ( new Map([\n    ['.svg', 'image/svg+xml'],\n    ['.txt', Mimes.text],\n    ['.css', 'text/css'],\n    ['.js', 'application/javascript'],\n    ['.cjs', 'application/javascript'],\n    ['.mjs', 'application/javascript'],\n    ['.json', 'application/json'],\n    ['.html', 'text/html'],\n    ['.htm', 'text/html'],\n    ['.xhtml', 'application/xhtml+xml'],\n    ['.oft', 'font/otf'],\n    ['.xml', 'application/xml'],\n    ['.wasm', 'application/wasm'],\n]));\nfunction getWebviewContentMimeType(resource) {\n    const ext = extname(resource.fsPath).toLowerCase();\n    return webviewMimeTypes.get(ext) || getMediaMime(resource.fsPath) || Mimes.unknown;\n}\nexport { getWebviewContentMimeType };\n","import { isUNC } from 'monaco-editor/esm/vs/base/common/extpath.js';\nimport { Schemas } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { normalize, sep } from 'monaco-editor/esm/vs/base/common/path.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { FileOperationError } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { getWebviewContentMimeType } from '../../../../platform/webview/common/mimeTypes.js';\nvar WebviewResourceResponse;\n( (function(WebviewResourceResponse) {\n    let Type;\n    ( (function(Type) {\n        Type[Type[\"Success\"] = 0] = \"Success\";\n        Type[Type[\"Failed\"] = 1] = \"Failed\";\n        Type[Type[\"AccessDenied\"] = 2] = \"AccessDenied\";\n        Type[Type[\"NotModified\"] = 3] = \"NotModified\";\n    })(Type = WebviewResourceResponse.Type || (WebviewResourceResponse.Type = {})));\n    class StreamSuccess {\n        constructor(stream, etag, mtime, mimeType) {\n            this.stream = stream;\n            this.etag = etag;\n            this.mtime = mtime;\n            this.mimeType = mimeType;\n            this.type = Type.Success;\n        }\n    }\n    WebviewResourceResponse.StreamSuccess = StreamSuccess;\n    WebviewResourceResponse.Failed = { type: Type.Failed };\n    WebviewResourceResponse.AccessDenied = { type: Type.AccessDenied };\n    class NotModified {\n        constructor(mimeType, mtime) {\n            this.mimeType = mimeType;\n            this.mtime = mtime;\n            this.type = Type.NotModified;\n        }\n    }\n    WebviewResourceResponse.NotModified = NotModified;\n})(WebviewResourceResponse || (WebviewResourceResponse = {})));\nasync function loadLocalResource(requestUri, options, fileService, logService, token) {\n    logService.debug(`loadLocalResource - begin. requestUri=${requestUri}`);\n    const resourceToLoad = getResourceToLoad(requestUri, options.roots);\n    logService.debug(`loadLocalResource - found resource to load. requestUri=${requestUri}, resourceToLoad=${resourceToLoad}`);\n    if (!resourceToLoad) {\n        return WebviewResourceResponse.AccessDenied;\n    }\n    const mime = getWebviewContentMimeType(requestUri);\n    try {\n        const result = await fileService.readFileStream(resourceToLoad, { etag: options.ifNoneMatch }, token);\n        return new WebviewResourceResponse.StreamSuccess(result.value, result.etag, result.mtime, mime);\n    }\n    catch (err) {\n        if (err instanceof FileOperationError) {\n            const result = err.fileOperationResult;\n            if (result === 2 ) {\n                return new WebviewResourceResponse.NotModified(mime, err.options?.mtime);\n            }\n        }\n        logService.debug(`loadLocalResource - Error using fileReader. requestUri=${requestUri}`);\n        console.log(err);\n        return WebviewResourceResponse.Failed;\n    }\n}\nfunction getResourceToLoad(requestUri, roots) {\n    for (const root of roots) {\n        if (containsResource(root, requestUri)) {\n            return normalizeResourcePath(requestUri);\n        }\n    }\n    return undefined;\n}\nfunction containsResource(root, resource) {\n    if (root.scheme !== resource.scheme) {\n        return false;\n    }\n    let resourceFsPath = normalize(resource.fsPath);\n    let rootPath = normalize(root.fsPath + (root.fsPath.endsWith(sep) ? '' : sep));\n    if (isUNC(root.fsPath) && isUNC(resource.fsPath)) {\n        rootPath = rootPath.toLowerCase();\n        resourceFsPath = resourceFsPath.toLowerCase();\n    }\n    return resourceFsPath.startsWith(rootPath);\n}\nfunction normalizeResourcePath(resource) {\n    if (resource.scheme === Schemas.vscodeRemote) {\n        return ( URI.from({\n            scheme: Schemas.vscodeRemote,\n            authority: resource.authority,\n            path: '/vscode-resource',\n            query: JSON.stringify({\n                requestResourcePath: resource.path\n            })\n        }));\n    }\n    return resource;\n}\nexport { WebviewResourceResponse, loadLocalResource };\n","import n from '../../../../../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js';\nvar css = \".monaco-workbench .simple-find-part-wrapper{max-width:calc(100% - 64px);overflow:hidden;padding:0 10px 10px;pointer-events:none;position:absolute;right:18px;top:0;z-index:10}.simple-find-part .monaco-inputbox>.ibwrapper>input{text-overflow:clip}.monaco-workbench .simple-find-part{align-items:center;background-color:var(--vscode-editorWidget-background)!important;border:1px solid var(--vscode-contrastBorder);border-bottom-left-radius:4px;border-bottom-right-radius:4px;box-shadow:0 0 8px 2px var(--vscode-widget-shadow);color:var(--vscode-editorWidget-foreground);display:flex;font-size:12px;padding:4px;pointer-events:all;position:relative;top:-45px;transition:top .2s linear;visibility:hidden;z-index:10}.monaco-workbench.reduce-motion .monaco-editor .find-widget{transition:top 0ms linear}.monaco-workbench .simple-find-part.visible{visibility:visible}.monaco-workbench .simple-find-part.suppress-transition{transition:none}.monaco-workbench .simple-find-part.visible-transition{top:0}.monaco-workbench .simple-find-part .monaco-findInput{flex:1}.monaco-workbench .simple-find-part .matchesCount{max-width:73px;min-width:73px;padding-left:5px;width:73px}.monaco-workbench .simple-find-part.reduced-find-widget .matchesCount{display:none}.monaco-workbench .simple-find-part .button{background-position:50%;background-repeat:no-repeat;cursor:pointer;display:flex;flex:initial;height:20px;justify-content:center;line-height:20px;margin-left:3px;min-width:20px;width:20px}.monaco-workbench div.simple-find-part div.button.disabled{cursor:default;opacity:.3!important}div.simple-find-part-wrapper div.button{border-radius:5px}.no-results.matchesCount{color:var(--vscode-errorForeground)}div.simple-find-part-wrapper div.button:hover:not(.disabled){background-color:var(--vscode-toolbar-hoverBackground);outline:1px dashed var(--vscode-toolbar-hoverOutline);outline-offset:-1px}\";\nn(css,{});\nexport { css, css as default };\n","import './simpleFindWidget.css.js';\nimport * as nls from 'monaco-editor/esm/vs/nls.js';\nimport * as dom from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { Widget } from 'monaco-editor/esm/vs/base/browser/ui/widget.js';\nimport { Delayer } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { FindReplaceState } from 'monaco-editor/esm/vs/editor/contrib/find/browser/findState.js';\nimport { SimpleButton, findPreviousMatchIcon, findNextMatchIcon, NLS_MATCHES_LOCATION, NLS_NO_RESULTS } from 'monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js';\nimport { ContextScopedFindInput } from 'monaco-editor/esm/vs/platform/history/browser/contextScopedHistoryWidget.js';\nimport { widgetClose } from 'monaco-editor/esm/vs/platform/theme/common/iconRegistry.js';\nimport * as strings from 'monaco-editor/esm/vs/base/common/strings.js';\nimport { showHistoryKeybindingHint } from 'monaco-editor/esm/vs/platform/history/browser/historyWidgetKeybindingHint.js';\nimport { status } from 'monaco-editor/esm/vs/base/browser/ui/aria/aria.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from 'monaco-editor/esm/vs/platform/theme/browser/defaultStyles.js';\nconst NLS_FIND_INPUT_LABEL = ( nls.localize('label.find', \"Find\"));\nconst NLS_FIND_INPUT_PLACEHOLDER = ( nls.localize('placeholder.find', \"Find (\\u21C5 for history)\"));\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = ( nls.localize('label.previousMatchButton', \"Previous Match\"));\nconst NLS_NEXT_MATCH_BTN_LABEL = ( nls.localize('label.nextMatchButton', \"Next Match\"));\nconst NLS_CLOSE_BTN_LABEL = ( nls.localize('label.closeButton', \"Close\"));\nconst SIMPLE_FIND_WIDGET_INITIAL_WIDTH = 310;\nconst MATCHES_COUNT_WIDTH = 73;\nclass SimpleFindWidget extends Widget {\n    constructor(options, contextViewService, contextKeyService, _keybindingService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._isVisible = false;\n        this._foundMatch = false;\n        this._width = 0;\n        this.state = ( new FindReplaceState());\n        this._matchesLimit = options.matchesLimit ?? Number.MAX_SAFE_INTEGER;\n        this._findInput = this._register(( new ContextScopedFindInput(null, contextViewService, {\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    return null;\n                }\n                catch (e) {\n                    this._foundMatch = false;\n                    this.updateButtons(this._foundMatch);\n                    return { content: e.message };\n                }\n            },\n            showCommonFindToggles: options.showCommonFindToggles,\n            appendCaseSensitiveLabel: options.appendCaseSensitiveActionId ? this._getKeybinding(options.appendCaseSensitiveActionId) : undefined,\n            appendRegexLabel: options.appendRegexActionId ? this._getKeybinding(options.appendRegexActionId) : undefined,\n            appendWholeWordsLabel: options.appendWholeWordsActionId ? this._getKeybinding(options.appendWholeWordsActionId) : undefined,\n            showHistoryHint: () => showHistoryKeybindingHint(_keybindingService),\n            inputBoxStyles: defaultInputBoxStyles,\n            toggleStyles: defaultToggleStyles\n        }, contextKeyService)));\n        this._updateHistoryDelayer = ( new Delayer(500));\n        this._register(this._findInput.onInput(async (e) => {\n            if (!options.checkImeCompletionState || !this._findInput.isImeSessionInProgress) {\n                this._foundMatch = this._onInputChanged();\n                if (options.showResultCount) {\n                    await this.updateResultCount();\n                }\n                this.updateButtons(this._foundMatch);\n                this.focusFindBox();\n                this._delayedUpdateHistory();\n            }\n        }));\n        this._findInput.setRegex(!!this.state.isRegex);\n        this._findInput.setCaseSensitive(!!this.state.matchCase);\n        this._findInput.setWholeWords(!!this.state.wholeWord);\n        this._register(this._findInput.onDidOptionChange(() => {\n            this.state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this.state.onFindReplaceStateChange(() => {\n            this._findInput.setRegex(this.state.isRegex);\n            this._findInput.setWholeWords(this.state.wholeWord);\n            this._findInput.setCaseSensitive(this.state.matchCase);\n            this.findFirst();\n        }));\n        this.prevBtn = this._register(( new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + (options.previousMatchActionId ? this._getKeybinding(options.previousMatchActionId) : ''),\n            icon: findPreviousMatchIcon,\n            onTrigger: () => {\n                this.find(true);\n            }\n        })));\n        this.nextBtn = this._register(( new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + (options.nextMatchActionId ? this._getKeybinding(options.nextMatchActionId) : ''),\n            icon: findNextMatchIcon,\n            onTrigger: () => {\n                this.find(false);\n            }\n        })));\n        const closeBtn = this._register(( new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + (options.closeWidgetActionId ? this._getKeybinding(options.closeWidgetActionId) : ''),\n            icon: widgetClose,\n            onTrigger: () => {\n                this.hide();\n            }\n        })));\n        this._innerDomNode = document.createElement('div');\n        this._innerDomNode.classList.add('simple-find-part');\n        this._innerDomNode.appendChild(this._findInput.domNode);\n        this._innerDomNode.appendChild(this.prevBtn.domNode);\n        this._innerDomNode.appendChild(this.nextBtn.domNode);\n        this._innerDomNode.appendChild(closeBtn.domNode);\n        this._domNode = document.createElement('div');\n        this._domNode.classList.add('simple-find-part-wrapper');\n        this._domNode.appendChild(this._innerDomNode);\n        this.onkeyup(this._innerDomNode, e => {\n            if (e.equals(9 )) {\n                this.hide();\n                e.preventDefault();\n                return;\n            }\n        });\n        this._focusTracker = this._register(dom.trackFocus(this._innerDomNode));\n        this._register(this._focusTracker.onDidFocus(this._onFocusTrackerFocus.bind(this)));\n        this._register(this._focusTracker.onDidBlur(this._onFocusTrackerBlur.bind(this)));\n        this._findInputFocusTracker = this._register(dom.trackFocus(this._findInput.domNode));\n        this._register(this._findInputFocusTracker.onDidFocus(this._onFindInputFocusTrackerFocus.bind(this)));\n        this._register(this._findInputFocusTracker.onDidBlur(this._onFindInputFocusTrackerBlur.bind(this)));\n        this._register(dom.addDisposableListener(this._innerDomNode, 'click', (event) => {\n            event.stopPropagation();\n        }));\n        if (options?.showResultCount) {\n            this._domNode.classList.add('result-count');\n            this._matchesCount = document.createElement('div');\n            this._matchesCount.className = 'matchesCount';\n            this._findInput.domNode.insertAdjacentElement('afterend', this._matchesCount);\n            this._register(this._findInput.onDidChange(async () => {\n                await this.updateResultCount();\n            }));\n            this._register(this._findInput.onDidOptionChange(async () => {\n                this._foundMatch = this._onInputChanged();\n                await this.updateResultCount();\n                this.focusFindBox();\n                this._delayedUpdateHistory();\n            }));\n        }\n    }\n    get inputValue() {\n        return this._findInput.getValue();\n    }\n    get focusTracker() {\n        return this._focusTracker;\n    }\n    _getKeybinding(actionId) {\n        const kb = this._keybindingService?.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        super.dispose();\n        if (this._domNode && this._domNode.parentElement) {\n            this._domNode.parentElement.removeChild(this._domNode);\n        }\n    }\n    isVisible() {\n        return this._isVisible;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    reveal(initialInput, animated = true) {\n        if (initialInput) {\n            this._findInput.setValue(initialInput);\n        }\n        if (this._isVisible) {\n            this._findInput.select();\n            return;\n        }\n        this._isVisible = true;\n        this.updateResultCount();\n        this.layout();\n        setTimeout(() => {\n            this._innerDomNode.classList.toggle('suppress-transition', !animated);\n            this._innerDomNode.classList.add('visible', 'visible-transition');\n            this._innerDomNode.setAttribute('aria-hidden', 'false');\n            this._findInput.select();\n            if (!animated) {\n                setTimeout(() => {\n                    this._innerDomNode.classList.remove('suppress-transition');\n                }, 0);\n            }\n        }, 0);\n    }\n    show(initialInput) {\n        if (initialInput && !this._isVisible) {\n            this._findInput.setValue(initialInput);\n        }\n        this._isVisible = true;\n        this.layout();\n        setTimeout(() => {\n            this._innerDomNode.classList.add('visible', 'visible-transition');\n            this._innerDomNode.setAttribute('aria-hidden', 'false');\n        }, 0);\n    }\n    hide(animated = true) {\n        if (this._isVisible) {\n            this._innerDomNode.classList.toggle('suppress-transition', !animated);\n            this._innerDomNode.classList.remove('visible-transition');\n            this._innerDomNode.setAttribute('aria-hidden', 'true');\n            setTimeout(() => {\n                this._isVisible = false;\n                this.updateButtons(this._foundMatch);\n                this._innerDomNode.classList.remove('visible', 'suppress-transition');\n            }, animated ? 200 : 0);\n        }\n    }\n    layout(width = this._width) {\n        this._width = width;\n        if (!this._isVisible) {\n            return;\n        }\n        if (this._matchesCount) {\n            let reducedFindWidget = false;\n            if (SIMPLE_FIND_WIDGET_INITIAL_WIDTH + MATCHES_COUNT_WIDTH + 28 >= width) {\n                reducedFindWidget = true;\n            }\n            this._innerDomNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this));\n    }\n    _updateHistory() {\n        this._findInput.inputBox.addToHistory();\n    }\n    _getRegexValue() {\n        return this._findInput.getRegex();\n    }\n    _getWholeWordValue() {\n        return this._findInput.getWholeWords();\n    }\n    _getCaseSensitiveValue() {\n        return this._findInput.getCaseSensitive();\n    }\n    updateButtons(foundMatch) {\n        const hasInput = this.inputValue.length > 0;\n        this.prevBtn.setEnabled(this._isVisible && hasInput && foundMatch);\n        this.nextBtn.setEnabled(this._isVisible && hasInput && foundMatch);\n    }\n    focusFindBox() {\n        this.nextBtn.focus();\n        this._findInput.inputBox.focus();\n    }\n    async updateResultCount() {\n        if (!this._matchesCount) {\n            this.updateButtons(this._foundMatch);\n            return;\n        }\n        const count = await this._getResultCount();\n        this._matchesCount.innerText = '';\n        const showRedOutline = (this.inputValue.length > 0 && count?.resultCount === 0);\n        this._matchesCount.classList.toggle('no-results', showRedOutline);\n        let label = '';\n        if (count?.resultCount) {\n            let matchesCount = String(count.resultCount);\n            if (count.resultCount >= this._matchesLimit) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(count.resultIndex + 1);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        status(this._announceSearchResults(label, this.inputValue));\n        this._matchesCount.appendChild(document.createTextNode(label));\n        this._foundMatch = !!count && count.resultCount > 0;\n        this.updateButtons(this._foundMatch);\n    }\n    changeState(state) {\n        this.state.change(state, false);\n    }\n    _announceSearchResults(label, searchString) {\n        if (!searchString) {\n            return ( nls.localize('ariaSearchNoInput', \"Enter search input\"));\n        }\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? ( nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label))\n                : ( nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString));\n        }\n        return ( nls.localize(\n            'ariaSearchNoResultWithLineNumNoCurrentMatch',\n            \"{0} found for '{1}'\",\n            label,\n            searchString\n        ));\n    }\n}\nexport { SimpleFindWidget };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';\nimport { SimpleFindWidget } from '../../codeEditor/browser/find/simpleFindWidget.js';\nimport { KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED } from './webview.js';\nlet WebviewFindWidget = class WebviewFindWidget extends SimpleFindWidget {\n    async _getResultCount(dataChanged) {\n        return undefined;\n    }\n    constructor(_delegate, contextViewService, contextKeyService, keybindingService) {\n        super({ showCommonFindToggles: false, checkImeCompletionState: _delegate.checkImeCompletionState }, contextViewService, contextKeyService, keybindingService);\n        this._delegate = _delegate;\n        this._findWidgetFocused = KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED.bindTo(contextKeyService);\n        this._register(_delegate.hasFindResult(hasResult => {\n            this.updateButtons(hasResult);\n            this.focusFindBox();\n        }));\n        this._register(_delegate.onDidStopFind(() => {\n            this.updateButtons(false);\n        }));\n    }\n    find(previous) {\n        const val = this.inputValue;\n        if (val) {\n            this._delegate.find(val, previous);\n        }\n    }\n    hide(animated = true) {\n        super.hide(animated);\n        this._delegate.stopFind(true);\n        this._delegate.focus();\n    }\n    _onInputChanged() {\n        const val = this.inputValue;\n        if (val) {\n            this._delegate.updateFind(val);\n        }\n        else {\n            this._delegate.stopFind(false);\n        }\n        return false;\n    }\n    _onFocusTrackerFocus() {\n        this._findWidgetFocused.set(true);\n    }\n    _onFocusTrackerBlur() {\n        this._findWidgetFocused.reset();\n    }\n    _onFindInputFocusTrackerFocus() { }\n    _onFindInputFocusTrackerBlur() { }\n    findFirst() { }\n};\nWebviewFindWidget = ( __decorate([\n    ( __param(1, IContextViewService)),\n    ( __param(2, IContextKeyService)),\n    ( __param(3, IKeybindingService))\n], WebviewFindWidget));\nexport { WebviewFindWidget };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { isFirefox } from 'monaco-editor/esm/vs/base/browser/browser.js';\nimport { addDisposableListener, EventType } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { ThrottledDelayer } from 'monaco-editor/esm/vs/base/common/async.js';\nimport { streamToBuffer } from 'monaco-editor/esm/vs/base/common/buffer.js';\nimport { CancellationTokenSource } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { Emitter, Event } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable, toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { COI, FileAccess } from 'monaco-editor/esm/vs/base/common/network.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { generateUuid } from 'monaco-editor/esm/vs/base/common/uuid.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IAccessibilityService } from 'monaco-editor/esm/vs/platform/accessibility/common/accessibility.js';\nimport { MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IContextMenuService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { INotificationService } from 'monaco-editor/esm/vs/platform/notification/common/notification.js';\nimport { IRemoteAuthorityResolverService } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { ITunnelService } from '../../../../platform/tunnel/common/tunnel.js';\nimport { WebviewPortMappingManager } from '../../../../platform/webview/common/webviewPortMapping.js';\nimport { parentOriginHash } from '../../../browser/iframe.js';\nimport { loadLocalResource, WebviewResourceResponse } from './resourceLoading.js';\nimport { areWebviewContentOptionsEqual } from './webview.js';\nimport { WebviewFindWidget } from './webviewFindWidget.js';\nimport { decodeAuthority, webviewGenericCspSource, webviewRootResourceAuthority } from '../common/webview.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nvar WebviewState;\n( ((function(WebviewState) {\n    ( ((function(Type) {\n        Type[Type[\"Initializing\"] = 0] = \"Initializing\";\n        Type[Type[\"Ready\"] = 1] = \"Ready\";\n    })(WebviewState.Type || (WebviewState.Type = {}))));\n    class Initializing {\n        constructor(pendingMessages) {\n            this.pendingMessages = pendingMessages;\n            this.type = 0 ;\n        }\n    }\n    WebviewState.Initializing = Initializing;\n    WebviewState.Ready = { type: 1  };\n})(WebviewState || (WebviewState = {}))));\nconst webviewIdContext = 'webviewId';\nlet WebviewElement = class WebviewElement extends Disposable {\n    get platform() { return 'browser'; }\n    get element() { return this._element; }\n    get isFocused() {\n        if (!this._focused) {\n            return false;\n        }\n        if (document.activeElement && document.activeElement !== this.element) {\n            return false;\n        }\n        return true;\n    }\n    constructor(initInfo, webviewThemeDataProvider, configurationService, contextMenuService, notificationService, _environmentService, _fileService, _logService, _remoteAuthorityResolverService, _telemetryService, _tunnelService, instantiationService, _accessibilityService) {\n        super();\n        this.webviewThemeDataProvider = webviewThemeDataProvider;\n        this._environmentService = _environmentService;\n        this._fileService = _fileService;\n        this._logService = _logService;\n        this._remoteAuthorityResolverService = _remoteAuthorityResolverService;\n        this._telemetryService = _telemetryService;\n        this._tunnelService = _tunnelService;\n        this._accessibilityService = _accessibilityService;\n        this.id = generateUuid();\n        this._expectedServiceWorkerVersion = 4;\n        this._state = new WebviewState.Initializing([]);\n        this._resourceLoadingCts = this._register(( (new CancellationTokenSource())));\n        this._focusDelayer = this._register(( (new ThrottledDelayer(50))));\n        this._onDidHtmlChange = this._register(( (new Emitter())));\n        this.onDidHtmlChange = this._onDidHtmlChange.event;\n        this._messageHandlers = ( (new Map()));\n        this.checkImeCompletionState = true;\n        this._disposed = false;\n        this._onMissingCsp = this._register(( (new Emitter())));\n        this.onMissingCsp = this._onMissingCsp.event;\n        this._onDidClickLink = this._register(( (new Emitter())));\n        this.onDidClickLink = this._onDidClickLink.event;\n        this._onDidReload = this._register(( (new Emitter())));\n        this.onDidReload = this._onDidReload.event;\n        this._onMessage = this._register(( (new Emitter())));\n        this.onMessage = this._onMessage.event;\n        this._onDidScroll = this._register(( (new Emitter())));\n        this.onDidScroll = this._onDidScroll.event;\n        this._onDidWheel = this._register(( (new Emitter())));\n        this.onDidWheel = this._onDidWheel.event;\n        this._onDidUpdateState = this._register(( (new Emitter())));\n        this.onDidUpdateState = this._onDidUpdateState.event;\n        this._onDidFocus = this._register(( (new Emitter())));\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(( (new Emitter())));\n        this.onDidBlur = this._onDidBlur.event;\n        this._onFatalError = this._register(( (new Emitter())));\n        this.onFatalError = this._onFatalError.event;\n        this._onDidDispose = this._register(( (new Emitter())));\n        this.onDidDispose = this._onDidDispose.event;\n        this._hasAlertedAboutMissingCsp = false;\n        this._hasFindResult = this._register(( (new Emitter())));\n        this.hasFindResult = this._hasFindResult.event;\n        this._onDidStopFind = this._register(( (new Emitter())));\n        this.onDidStopFind = this._onDidStopFind.event;\n        this.providedViewType = initInfo.providedViewType;\n        this.origin = initInfo.origin ?? this.id;\n        this._encodedWebviewOriginPromise = parentOriginHash(window.origin, this.origin).then(id => this._encodedWebviewOrigin = id);\n        this._options = initInfo.options;\n        this.extension = initInfo.extension;\n        this._content = {\n            html: '',\n            title: initInfo.title,\n            options: initInfo.contentOptions,\n            state: undefined\n        };\n        this._portMappingManager = this._register(( (new WebviewPortMappingManager(\n            () => this.extension?.location,\n            () => this._content.options.portMapping || [],\n            this._tunnelService\n        ))));\n        this._element = this._createElement(initInfo.options, initInfo.contentOptions);\n        const subscription = this._register(addDisposableListener(window, 'message', (e) => {\n            if (!this._encodedWebviewOrigin || e?.data?.target !== this.id) {\n                return;\n            }\n            if (e.data.channel === 'webview-ready') {\n                if (this._messagePort) {\n                    return;\n                }\n                this._logService.debug(`Webview(${this.id}): webview ready`);\n                this._messagePort = e.ports[0];\n                this._messagePort.onmessage = (e) => {\n                    const handlers = this._messageHandlers.get(e.data.channel);\n                    if (!handlers) {\n                        console.log(`No handlers found for '${e.data.channel}'`);\n                        return;\n                    }\n                    handlers?.forEach(handler => handler(e.data.data, e));\n                };\n                this.element?.classList.add('ready');\n                if (this._state.type === 0 ) {\n                    this._state.pendingMessages.forEach(({ channel, data }) => this.doPostMessage(channel, data));\n                }\n                this._state = WebviewState.Ready;\n                subscription.dispose();\n            }\n        }));\n        this._register(this.on('no-csp-found', () => {\n            this.handleNoCspFound();\n        }));\n        this._register(this.on('did-click-link', ({ uri }) => {\n            this._onDidClickLink.fire(uri);\n        }));\n        this._register(this.on('onmessage', ({ message, transfer }) => {\n            this._onMessage.fire({ message, transfer });\n        }));\n        this._register(this.on('did-scroll', ({ scrollYPercentage }) => {\n            this._onDidScroll.fire({ scrollYPercentage });\n        }));\n        this._register(this.on('do-reload', () => {\n            this.reload();\n        }));\n        this._register(this.on('do-update-state', (state) => {\n            this.state = state;\n            this._onDidUpdateState.fire(state);\n        }));\n        this._register(this.on('did-focus', () => {\n            this.handleFocusChange(true);\n        }));\n        this._register(this.on('did-blur', () => {\n            this.handleFocusChange(false);\n        }));\n        this._register(this.on('did-scroll-wheel', (event) => {\n            this._onDidWheel.fire(event);\n        }));\n        this._register(this.on('did-find', ({ didFind }) => {\n            this._hasFindResult.fire(didFind);\n        }));\n        this._register(this.on('fatal-error', (e) => {\n            notificationService.error(( (localize('fatalErrorMessage', \"Error loading webview: {0}\", e.message))));\n            this._onFatalError.fire({ message: e.message });\n        }));\n        this._register(this.on('did-keydown', (data) => {\n            this.handleKeyEvent('keydown', data);\n        }));\n        this._register(this.on('did-keyup', (data) => {\n            this.handleKeyEvent('keyup', data);\n        }));\n        this._register(this.on('did-context-menu', (data) => {\n            if (!this.element) {\n                return;\n            }\n            if (!this._contextKeyService) {\n                return;\n            }\n            const elementBox = this.element.getBoundingClientRect();\n            const contextKeyService = this._contextKeyService.createOverlay([\n                ...Object.entries(data.context),\n                [webviewIdContext, this.providedViewType],\n            ]);\n            contextMenuService.showContextMenu({\n                menuId: MenuId.WebviewContext,\n                menuActionOptions: { shouldForwardArgs: true },\n                contextKeyService,\n                getActionsContext: () => ({ ...data.context, webview: this.providedViewType }),\n                getAnchor: () => ({\n                    x: elementBox.x + data.clientX,\n                    y: elementBox.y + data.clientY\n                })\n            });\n        }));\n        this._register(this.on('load-resource', async (entry) => {\n            try {\n                const authority = decodeAuthority(entry.authority);\n                const uri = ( (URI.from({\n                    scheme: entry.scheme,\n                    authority: authority,\n                    path: decodeURIComponent(entry.path),\n                    query: entry.query ? decodeURIComponent(entry.query) : entry.query,\n                })));\n                this.loadResource(entry.id, uri, entry.ifNoneMatch);\n            }\n            catch (e) {\n                this._send('did-load-resource', {\n                    id: entry.id,\n                    status: 404,\n                    path: entry.path,\n                });\n            }\n        }));\n        this._register(this.on('load-localhost', (entry) => {\n            this.localLocalhost(entry.id, entry.origin);\n        }));\n        this._register(Event.runAndSubscribe(webviewThemeDataProvider.onThemeDataChanged, () => this.style()));\n        this._register(_accessibilityService.onDidChangeReducedMotion(() => this.style()));\n        this._register(_accessibilityService.onDidChangeScreenReaderOptimized(() => this.style()));\n        this._register(contextMenuService.onDidShowContextMenu(() => this._send('set-context-menu-visible', { visible: true })));\n        this._register(contextMenuService.onDidHideContextMenu(() => this._send('set-context-menu-visible', { visible: false })));\n        this._confirmBeforeClose = configurationService.getValue('window.confirmBeforeClose');\n        this._register(configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('window.confirmBeforeClose')) {\n                this._confirmBeforeClose = configurationService.getValue('window.confirmBeforeClose');\n                this._send('set-confirm-before-close', this._confirmBeforeClose);\n            }\n        }));\n        this._register(this.on('drag-start', () => {\n            this._startBlockingIframeDragEvents();\n        }));\n        if (initInfo.options.enableFindWidget) {\n            this._webviewFindWidget = this._register(instantiationService.createInstance(WebviewFindWidget, this));\n        }\n        this._encodedWebviewOriginPromise.then(encodedWebviewOrigin => {\n            if (!this._disposed) {\n                this._initElement(encodedWebviewOrigin, this.extension, this._options);\n            }\n        });\n    }\n    dispose() {\n        this._disposed = true;\n        this.element?.remove();\n        this._element = undefined;\n        this._messagePort = undefined;\n        if (this._state.type === 0 ) {\n            for (const message of this._state.pendingMessages) {\n                message.resolve(false);\n            }\n            this._state.pendingMessages = [];\n        }\n        this._onDidDispose.fire();\n        this._resourceLoadingCts.dispose(true);\n        super.dispose();\n    }\n    setContextKeyService(contextKeyService) {\n        this._contextKeyService = contextKeyService;\n    }\n    postMessage(message, transfer) {\n        return this._send('message', { message, transfer });\n    }\n    async _send(channel, data, _createElement = []) {\n        if (this._state.type === 0 ) {\n            let resolve;\n            const promise = ( (new Promise(r => resolve = r)));\n            this._state.pendingMessages.push({ channel, data, transferable: _createElement, resolve: resolve });\n            return promise;\n        }\n        else {\n            return this.doPostMessage(channel, data, _createElement);\n        }\n    }\n    _createElement(options, _contentOptions) {\n        const element = document.createElement('iframe');\n        element.name = this.id;\n        element.className = `webview ${options.customClasses || ''}`;\n        element.sandbox.add('allow-scripts', 'allow-same-origin', 'allow-forms', 'allow-pointer-lock', 'allow-downloads');\n        const allowRules = ['cross-origin-isolated', 'autoplay'];\n        if (!isFirefox) {\n            allowRules.push('clipboard-read', 'clipboard-write');\n        }\n        element.setAttribute('allow', allowRules.join('; '));\n        element.style.border = 'none';\n        element.style.width = '100%';\n        element.style.height = '100%';\n        element.focus = () => {\n            this._doFocus();\n        };\n        return element;\n    }\n    _initElement(encodedWebviewOrigin, extension, options) {\n        const params = {\n            id: this.id,\n            origin: this.origin,\n            swVersion: String(this._expectedServiceWorkerVersion),\n            extensionId: extension?.id.value ?? '',\n            platform: this.platform,\n            'vscode-resource-base-authority': webviewRootResourceAuthority,\n            parentOrigin: window.origin,\n        };\n        if (this._options.disableServiceWorker) {\n            params.disableServiceWorker = 'true';\n        }\n        if (this._environmentService.remoteAuthority) {\n            params.remoteAuthority = this._environmentService.remoteAuthority;\n        }\n        if (options.purpose) {\n            params.purpose = options.purpose;\n        }\n        params.serviceWorkerUri = ( (( (FileAccess.asBrowserUri('vs/workbench/contrib/webview/browser/pre/service-worker.js'))).toString(true)));\n        params.fakeHtmlUri = ( (( (FileAccess.asBrowserUri('vs/workbench/contrib/webview/browser/pre/fake.html'))).toString(true)));\n        COI.addSearchParam(params, true, true);\n        const queryString = ( (( (new URLSearchParams(params))).toString()));\n        const fileName = isFirefox ? 'index-no-csp.html' : 'index.html';\n        const relativeIframeSrc = ( (FileAccess.asBrowserUri(`vs/workbench/contrib/webview/browser/pre/${fileName}`)));\n        this.element.setAttribute('src', `${( ( relativeIframeSrc.toString(true)))}?${queryString}`);\n    }\n    mountTo(element) {\n        if (!this.element) {\n            return;\n        }\n        if (this._webviewFindWidget) {\n            element.appendChild(this._webviewFindWidget.getDomNode());\n        }\n        for (const eventName of [EventType.MOUSE_DOWN, EventType.MOUSE_MOVE, EventType.DROP]) {\n            this._register(addDisposableListener(element, eventName, () => {\n                this._stopBlockingIframeDragEvents();\n            }));\n        }\n        for (const node of [element, window]) {\n            this._register(addDisposableListener(node, EventType.DRAG_END, () => {\n                this._stopBlockingIframeDragEvents();\n            }));\n        }\n        element.id = this.id;\n        element.appendChild(this.element);\n    }\n    _startBlockingIframeDragEvents() {\n        if (this.element) {\n            this.element.style.pointerEvents = 'none';\n        }\n    }\n    _stopBlockingIframeDragEvents() {\n        if (this.element) {\n            this.element.style.pointerEvents = 'auto';\n        }\n    }\n    webviewContentEndpoint(encodedWebviewOrigin) {\n        const webviewExternalEndpoint = this._environmentService.webviewExternalEndpoint;\n        if (!webviewExternalEndpoint) {\n            throw new Error(`'webviewExternalEndpoint' has not been configured. Webviews will not work!`);\n        }\n        const endpoint = webviewExternalEndpoint.replace('{{uuid}}', encodedWebviewOrigin);\n        if (endpoint[endpoint.length - 1] === '/') {\n            return endpoint.slice(0, endpoint.length - 1);\n        }\n        return endpoint;\n    }\n    doPostMessage(channel, data, transferable = []) {\n        if (this.element && this._messagePort) {\n            this._messagePort.postMessage({ channel, args: data }, transferable);\n            return true;\n        }\n        return false;\n    }\n    on(channel, handler) {\n        let handlers = this._messageHandlers.get(channel);\n        if (!handlers) {\n            handlers = ( (new Set()));\n            this._messageHandlers.set(channel, handlers);\n        }\n        handlers.add(handler);\n        return toDisposable(() => {\n            this._messageHandlers.get(channel)?.delete(handler);\n        });\n    }\n    handleNoCspFound() {\n        if (this._hasAlertedAboutMissingCsp) {\n            return;\n        }\n        this._hasAlertedAboutMissingCsp = true;\n        if (this.extension?.id) {\n            if (this._environmentService.isExtensionDevelopment) {\n                this._onMissingCsp.fire(this.extension.id);\n            }\n            const payload = {\n                extension: this.extension.id.value\n            };\n            this._telemetryService.publicLog2('webviewMissingCsp', payload);\n        }\n    }\n    reload() {\n        this.doUpdateContent(this._content);\n        const subscription = this._register(this.on('did-load', () => {\n            this._onDidReload.fire();\n            subscription.dispose();\n        }));\n    }\n    setHtml(html) {\n        this.doUpdateContent({ ...this._content, html });\n        this._onDidHtmlChange.fire(html);\n    }\n    setTitle(title) {\n        this._content = { ...this._content, title };\n        this._send('set-title', title);\n    }\n    set contentOptions(options) {\n        this._logService.debug(`Webview(${this.id}): will update content options`);\n        if (areWebviewContentOptionsEqual(options, this._content.options)) {\n            this._logService.debug(`Webview(${this.id}): skipping content options update`);\n            return;\n        }\n        this.doUpdateContent({ ...this._content, options });\n    }\n    set localResourcesRoot(resources) {\n        this._content = {\n            ...this._content,\n            options: { ...this._content.options, localResourceRoots: resources }\n        };\n    }\n    set state(state) {\n        this._content = { ...this._content, state };\n    }\n    set initialScrollProgress(value) {\n        this._send('initial-scroll-position', value);\n    }\n    doUpdateContent(newContent) {\n        this._logService.debug(`Webview(${this.id}): will update content`);\n        this._content = newContent;\n        const allowScripts = !!this._content.options.allowScripts;\n        this._send('content', {\n            contents: this._content.html,\n            title: this._content.title,\n            options: {\n                allowMultipleAPIAcquire: !!this._content.options.allowMultipleAPIAcquire,\n                allowScripts: allowScripts,\n                allowForms: this._content.options.allowForms ?? allowScripts,\n            },\n            state: this._content.state,\n            cspSource: webviewGenericCspSource,\n            confirmBeforeClose: this._confirmBeforeClose,\n        });\n    }\n    style() {\n        let { styles, activeTheme, themeLabel, themeId } = this.webviewThemeDataProvider.getWebviewThemeData();\n        if (this._options.transformCssVariables) {\n            styles = this._options.transformCssVariables(styles);\n        }\n        const reduceMotion = this._accessibilityService.isMotionReduced();\n        const screenReader = this._accessibilityService.isScreenReaderOptimized();\n        this._send('styles', { styles, activeTheme, themeId, themeLabel, reduceMotion, screenReader });\n    }\n    handleFocusChange(isFocused) {\n        this._focused = isFocused;\n        if (isFocused) {\n            this._onDidFocus.fire();\n        }\n        else {\n            this._onDidBlur.fire();\n        }\n    }\n    handleKeyEvent(type, event) {\n        const emulatedKeyboardEvent = ( (new KeyboardEvent(type, event)));\n        Object.defineProperty(emulatedKeyboardEvent, 'target', {\n            get: () => this.element,\n        });\n        window.dispatchEvent(emulatedKeyboardEvent);\n    }\n    windowDidDragStart() {\n        this._startBlockingIframeDragEvents();\n    }\n    windowDidDragEnd() {\n        this._stopBlockingIframeDragEvents();\n    }\n    selectAll() {\n        this.execCommand('selectAll');\n    }\n    copy() {\n        this.execCommand('copy');\n    }\n    paste() {\n        this.execCommand('paste');\n    }\n    cut() {\n        this.execCommand('cut');\n    }\n    undo() {\n        this.execCommand('undo');\n    }\n    redo() {\n        this.execCommand('redo');\n    }\n    execCommand(command) {\n        if (this.element) {\n            this._send('execCommand', command);\n        }\n    }\n    async loadResource(id, uri, ifNoneMatch) {\n        try {\n            const result = await loadLocalResource(uri, {\n                ifNoneMatch,\n                roots: this._content.options.localResourceRoots || [],\n            }, this._fileService, this._logService, this._resourceLoadingCts.token);\n            switch (result.type) {\n                case WebviewResourceResponse.Type.Success: {\n                    const buffer = await this.streamToBuffer(result.stream);\n                    return this._send('did-load-resource', {\n                        id,\n                        status: 200,\n                        path: uri.path,\n                        mime: result.mimeType,\n                        data: buffer,\n                        etag: result.etag,\n                        mtime: result.mtime\n                    }, [buffer]);\n                }\n                case WebviewResourceResponse.Type.NotModified: {\n                    return this._send('did-load-resource', {\n                        id,\n                        status: 304,\n                        path: uri.path,\n                        mime: result.mimeType,\n                        mtime: result.mtime\n                    });\n                }\n                case WebviewResourceResponse.Type.AccessDenied: {\n                    return this._send('did-load-resource', {\n                        id,\n                        status: 401,\n                        path: uri.path,\n                    });\n                }\n            }\n        }\n        catch {\n        }\n        return this._send('did-load-resource', {\n            id,\n            status: 404,\n            path: uri.path,\n        });\n    }\n    async streamToBuffer(stream) {\n        const vsBuffer = await streamToBuffer(stream);\n        return vsBuffer.buffer.buffer;\n    }\n    async localLocalhost(id, origin) {\n        const authority = this._environmentService.remoteAuthority;\n        const resolveAuthority = authority ? await this._remoteAuthorityResolverService.resolveAuthority(authority) : undefined;\n        const redirect = resolveAuthority ? await this._portMappingManager.getRedirect(resolveAuthority.authority, origin) : undefined;\n        return this._send('did-load-localhost', {\n            id,\n            origin,\n            location: redirect\n        });\n    }\n    focus() {\n        this._doFocus();\n        this.handleFocusChange(true);\n    }\n    _doFocus() {\n        if (!this.element) {\n            return;\n        }\n        try {\n            this.element.contentWindow?.focus();\n        }\n        catch {\n        }\n        this._focusDelayer.trigger(async () => {\n            if (!this.isFocused || !this.element) {\n                return;\n            }\n            if (document.activeElement && document.activeElement !== this.element && document.activeElement?.tagName !== 'BODY') {\n                return;\n            }\n            this._send('focus', undefined);\n        });\n    }\n    find(value, previous) {\n        if (!this.element) {\n            return;\n        }\n        this._send('find', { value, previous });\n    }\n    updateFind(value) {\n        if (!value || !this.element) {\n            return;\n        }\n        this._send('find', { value });\n    }\n    stopFind(keepSelection) {\n        if (!this.element) {\n            return;\n        }\n        this._send('find-stop', { clearSelection: !keepSelection });\n        this._onDidStopFind.fire();\n    }\n    showFind(animated = true) {\n        this._webviewFindWidget?.reveal(undefined, animated);\n    }\n    hideFind(animated = true) {\n        this._webviewFindWidget?.hide(animated);\n    }\n    runFindAction(previous) {\n        this._webviewFindWidget?.find(previous);\n    }\n};\nWebviewElement = ( (__decorate([\n    ( (__param(2, IConfigurationService))),\n    ( (__param(3, IContextMenuService))),\n    ( (__param(4, INotificationService))),\n    ( (__param(5, IWorkbenchEnvironmentService))),\n    ( (__param(6, IFileService))),\n    ( (__param(7, ILogService))),\n    ( (__param(8, IRemoteAuthorityResolverService))),\n    ( (__param(9, ITelemetryService))),\n    ( (__param(10, ITunnelService))),\n    ( (__param(11, IInstantiationService))),\n    ( (__param(12, IAccessibilityService)))\n], WebviewElement)));\nexport { WebviewElement };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { FastDomNode } from 'monaco-editor/esm/vs/base/browser/fastDomNode.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable, MutableDisposable, DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { generateUuid } from 'monaco-editor/esm/vs/base/common/uuid.js';\nimport { IContextKeyService } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { ILayoutService } from 'monaco-editor/esm/vs/platform/layout/browser/layoutService.js';\nimport { KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE, KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED, IWebviewService } from './webview.js';\nlet OverlayWebview = class OverlayWebview extends Disposable {\n    constructor(initInfo, _layoutService, _webviewService, _baseContextKeyService) {\n        super();\n        this._layoutService = _layoutService;\n        this._webviewService = _webviewService;\n        this._baseContextKeyService = _baseContextKeyService;\n        this._isFirstLoad = true;\n        this._firstLoadPendingMessages = ( new Set());\n        this._webview = this._register(( new MutableDisposable()));\n        this._webviewEvents = this._register(( new DisposableStore()));\n        this._html = '';\n        this._initialScrollProgress = 0;\n        this._state = undefined;\n        this._owner = undefined;\n        this._scopedContextKeyService = this._register(( new MutableDisposable()));\n        this._shouldShowFindWidgetOnRestore = false;\n        this._isDisposed = false;\n        this._onDidDispose = this._register(( new Emitter()));\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidFocus = this._register(( new Emitter()));\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(( new Emitter()));\n        this.onDidBlur = this._onDidBlur.event;\n        this._onDidClickLink = this._register(( new Emitter()));\n        this.onDidClickLink = this._onDidClickLink.event;\n        this._onDidReload = this._register(( new Emitter()));\n        this.onDidReload = this._onDidReload.event;\n        this._onDidScroll = this._register(( new Emitter()));\n        this.onDidScroll = this._onDidScroll.event;\n        this._onDidUpdateState = this._register(( new Emitter()));\n        this.onDidUpdateState = this._onDidUpdateState.event;\n        this._onMessage = this._register(( new Emitter()));\n        this.onMessage = this._onMessage.event;\n        this._onMissingCsp = this._register(( new Emitter()));\n        this.onMissingCsp = this._onMissingCsp.event;\n        this._onDidWheel = this._register(( new Emitter()));\n        this.onDidWheel = this._onDidWheel.event;\n        this._onFatalError = this._register(( new Emitter()));\n        this.onFatalError = this._onFatalError.event;\n        this.providedViewType = initInfo.providedViewType;\n        this.origin = initInfo.origin ?? generateUuid();\n        this._title = initInfo.title;\n        this._extension = initInfo.extension;\n        this._options = initInfo.options;\n        this._contentOptions = initInfo.contentOptions;\n    }\n    get isFocused() {\n        return !!this._webview.value?.isFocused;\n    }\n    dispose() {\n        this._isDisposed = true;\n        this._container?.domNode.remove();\n        this._container = undefined;\n        for (const msg of this._firstLoadPendingMessages) {\n            msg.resolve(false);\n        }\n        this._firstLoadPendingMessages.clear();\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    get container() {\n        if (this._isDisposed) {\n            throw new Error(`OverlayWebview has been disposed`);\n        }\n        if (!this._container) {\n            const node = document.createElement('div');\n            node.style.position = 'absolute';\n            node.style.overflow = 'hidden';\n            this._container = ( new FastDomNode(node));\n            this._container.setVisibility('hidden');\n            this._layoutService.container.appendChild(node);\n        }\n        return this._container.domNode;\n    }\n    claim(owner, scopedContextKeyService) {\n        if (this._isDisposed) {\n            return;\n        }\n        const oldOwner = this._owner;\n        this._owner = owner;\n        this._show();\n        if (oldOwner !== owner) {\n            const contextKeyService = (scopedContextKeyService || this._baseContextKeyService);\n            this._scopedContextKeyService.clear();\n            this._scopedContextKeyService.value = contextKeyService.createScoped(this.container);\n            const wasFindVisible = this._findWidgetVisible?.get();\n            this._findWidgetVisible?.reset();\n            this._findWidgetVisible = KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n            this._findWidgetVisible.set(!!wasFindVisible);\n            this._findWidgetEnabled?.reset();\n            this._findWidgetEnabled = KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED.bindTo(contextKeyService);\n            this._findWidgetEnabled.set(!!this.options.enableFindWidget);\n            this._webview.value?.setContextKeyService(this._scopedContextKeyService.value);\n        }\n    }\n    release(owner) {\n        if (this._owner !== owner) {\n            return;\n        }\n        this._scopedContextKeyService.clear();\n        this._owner = undefined;\n        if (this._container) {\n            this._container.setVisibility('hidden');\n        }\n        if (this._options.retainContextWhenHidden) {\n            this._shouldShowFindWidgetOnRestore = !!this._findWidgetVisible?.get();\n            this.hideFind(false);\n        }\n        else {\n            this._webview.clear();\n            this._webviewEvents.clear();\n        }\n    }\n    layoutWebviewOverElement(element, dimension, clippingContainer) {\n        if (!this._container || !this._container.domNode.parentElement) {\n            return;\n        }\n        const frameRect = element.getBoundingClientRect();\n        const containerRect = this._container.domNode.parentElement.getBoundingClientRect();\n        const parentBorderTop = (containerRect.height - this._container.domNode.parentElement.clientHeight) / 2.0;\n        const parentBorderLeft = (containerRect.width - this._container.domNode.parentElement.clientWidth) / 2.0;\n        this._container.setTop(frameRect.top - containerRect.top - parentBorderTop);\n        this._container.setLeft(frameRect.left - containerRect.left - parentBorderLeft);\n        this._container.setWidth(dimension ? dimension.width : frameRect.width);\n        this._container.setHeight(dimension ? dimension.height : frameRect.height);\n        if (clippingContainer) {\n            const { top, left, right, bottom } = computeClippingRect(frameRect, clippingContainer);\n            this._container.domNode.style.clipPath = `polygon(${left}px ${top}px, ${right}px ${top}px, ${right}px ${bottom}px, ${left}px ${bottom}px)`;\n        }\n    }\n    _show() {\n        if (this._isDisposed) {\n            throw new Error('OverlayWebview is disposed');\n        }\n        if (!this._webview.value) {\n            const webview = this._webviewService.createWebviewElement({\n                providedViewType: this.providedViewType,\n                origin: this.origin,\n                title: this._title,\n                options: this._options,\n                contentOptions: this._contentOptions,\n                extension: this.extension,\n            });\n            this._webview.value = webview;\n            webview.state = this._state;\n            if (this._scopedContextKeyService.value) {\n                this._webview.value.setContextKeyService(this._scopedContextKeyService.value);\n            }\n            if (this._html) {\n                webview.setHtml(this._html);\n            }\n            if (this._options.tryRestoreScrollPosition) {\n                webview.initialScrollProgress = this._initialScrollProgress;\n            }\n            this._findWidgetEnabled?.set(!!this.options.enableFindWidget);\n            webview.mountTo(this.container);\n            this._webviewEvents.clear();\n            this._webviewEvents.add(webview.onDidFocus(() => { this._onDidFocus.fire(); }));\n            this._webviewEvents.add(webview.onDidBlur(() => { this._onDidBlur.fire(); }));\n            this._webviewEvents.add(webview.onDidClickLink(x => { this._onDidClickLink.fire(x); }));\n            this._webviewEvents.add(webview.onMessage(x => { this._onMessage.fire(x); }));\n            this._webviewEvents.add(webview.onMissingCsp(x => { this._onMissingCsp.fire(x); }));\n            this._webviewEvents.add(webview.onDidWheel(x => { this._onDidWheel.fire(x); }));\n            this._webviewEvents.add(webview.onDidReload(() => { this._onDidReload.fire(); }));\n            this._webviewEvents.add(webview.onFatalError(x => { this._onFatalError.fire(x); }));\n            this._webviewEvents.add(webview.onDidScroll(x => {\n                this._initialScrollProgress = x.scrollYPercentage;\n                this._onDidScroll.fire(x);\n            }));\n            this._webviewEvents.add(webview.onDidUpdateState(state => {\n                this._state = state;\n                this._onDidUpdateState.fire(state);\n            }));\n            if (this._isFirstLoad) {\n                this._firstLoadPendingMessages.forEach(async (msg) => {\n                    msg.resolve(await webview.postMessage(msg.message, msg.transfer));\n                });\n            }\n            this._isFirstLoad = false;\n            this._firstLoadPendingMessages.clear();\n        }\n        if (this.options.retainContextWhenHidden && this._shouldShowFindWidgetOnRestore) {\n            this.showFind(false);\n            this._shouldShowFindWidgetOnRestore = false;\n        }\n        this._container?.setVisibility('visible');\n    }\n    setHtml(html) {\n        this._html = html;\n        this._withWebview(webview => webview.setHtml(html));\n    }\n    setTitle(title) {\n        this._title = title;\n        this._withWebview(webview => webview.setTitle(title));\n    }\n    get initialScrollProgress() { return this._initialScrollProgress; }\n    set initialScrollProgress(value) {\n        this._initialScrollProgress = value;\n        this._withWebview(webview => webview.initialScrollProgress = value);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._withWebview(webview => webview.state = value);\n    }\n    get extension() { return this._extension; }\n    set extension(value) {\n        this._extension = value;\n        this._withWebview(webview => webview.extension = value);\n    }\n    get options() { return this._options; }\n    set options(value) { this._options = { customClasses: this._options.customClasses, ...value }; }\n    get contentOptions() { return this._contentOptions; }\n    set contentOptions(value) {\n        this._contentOptions = value;\n        this._withWebview(webview => webview.contentOptions = value);\n    }\n    set localResourcesRoot(resources) {\n        this._withWebview(webview => webview.localResourcesRoot = resources);\n    }\n    async postMessage(message, transfer) {\n        if (this._webview.value) {\n            return this._webview.value.postMessage(message, transfer);\n        }\n        if (this._isFirstLoad) {\n            let resolve;\n            const p = ( new Promise(r => resolve = r));\n            this._firstLoadPendingMessages.add({ message, transfer, resolve: resolve });\n            return p;\n        }\n        return false;\n    }\n    focus() { this._webview.value?.focus(); }\n    reload() { this._webview.value?.reload(); }\n    selectAll() { this._webview.value?.selectAll(); }\n    copy() { this._webview.value?.copy(); }\n    paste() { this._webview.value?.paste(); }\n    cut() { this._webview.value?.cut(); }\n    undo() { this._webview.value?.undo(); }\n    redo() { this._webview.value?.redo(); }\n    showFind(animated = true) {\n        if (this._webview.value) {\n            this._webview.value.showFind(animated);\n            this._findWidgetVisible?.set(true);\n        }\n    }\n    hideFind(animated = true) {\n        this._findWidgetVisible?.reset();\n        this._webview.value?.hideFind(animated);\n    }\n    runFindAction(previous) { this._webview.value?.runFindAction(previous); }\n    _withWebview(f) {\n        if (this._webview.value) {\n            f(this._webview.value);\n        }\n    }\n    windowDidDragStart() {\n        this._webview.value?.windowDidDragStart();\n    }\n    windowDidDragEnd() {\n        this._webview.value?.windowDidDragEnd();\n    }\n    setContextKeyService(contextKeyService) {\n        this._webview.value?.setContextKeyService(contextKeyService);\n    }\n};\nOverlayWebview = ( __decorate([\n    ( __param(1, ILayoutService)),\n    ( __param(2, IWebviewService)),\n    ( __param(3, IContextKeyService))\n], OverlayWebview));\nfunction computeClippingRect(frameRect, clipper) {\n    const rootRect = clipper.getBoundingClientRect();\n    const top = Math.max(rootRect.top - frameRect.top, 0);\n    const right = Math.max(frameRect.width - (frameRect.right - rootRect.right), 0);\n    const bottom = Math.max(frameRect.height - (frameRect.bottom - rootRect.bottom), 0);\n    const left = Math.max(rootRect.left - frameRect.left, 0);\n    return { top, right, bottom, left };\n}\nexport { OverlayWebview };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { Emitter } from 'monaco-editor/esm/vs/base/common/event.js';\nimport { Disposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { WebviewThemeDataProvider } from './themeing.js';\nimport { WebviewElement } from './webviewElement.js';\nimport { OverlayWebview } from './overlayWebview.js';\nlet WebviewService = class WebviewService extends Disposable {\n    constructor(_instantiationService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._webviews = ( new Set());\n        this._onDidChangeActiveWebview = this._register(( new Emitter()));\n        this.onDidChangeActiveWebview = this._onDidChangeActiveWebview.event;\n        this._webviewThemeDataProvider = this._instantiationService.createInstance(WebviewThemeDataProvider);\n    }\n    get activeWebview() { return this._activeWebview; }\n    _updateActiveWebview(value) {\n        if (value !== this._activeWebview) {\n            this._activeWebview = value;\n            this._onDidChangeActiveWebview.fire(value);\n        }\n    }\n    get webviews() {\n        return ( this._webviews.values());\n    }\n    createWebviewElement(initInfo) {\n        const webview = this._instantiationService.createInstance(WebviewElement, initInfo, this._webviewThemeDataProvider);\n        this.registerNewWebview(webview);\n        return webview;\n    }\n    createWebviewOverlay(initInfo) {\n        const webview = this._instantiationService.createInstance(OverlayWebview, initInfo);\n        this.registerNewWebview(webview);\n        return webview;\n    }\n    registerNewWebview(webview) {\n        this._webviews.add(webview);\n        webview.onDidFocus(() => {\n            this._updateActiveWebview(webview);\n        });\n        const onBlur = () => {\n            if (this._activeWebview === webview) {\n                this._updateActiveWebview(undefined);\n            }\n        };\n        webview.onDidBlur(onBlur);\n        webview.onDidDispose(() => {\n            onBlur();\n            this._webviews.delete(webview);\n        });\n    }\n};\nWebviewService = ( __decorate([\n    ( __param(0, IInstantiationService))\n], WebviewService));\nexport { WebviewService };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IWorkingCopyFileService } from '../../../services/workingCopy/common/workingCopyFileService.js';\nimport { IUndoRedoService } from 'monaco-editor/esm/vs/platform/undoRedo/common/undoRedo.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { CancellationToken } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { tail } from 'monaco-editor/esm/vs/base/common/arrays.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nclass Noop {\n    constructor() {\n        this.uris = [];\n    }\n    async perform() { return this; }\n    toString() {\n        return '(noop)';\n    }\n}\nclass RenameEdit {\n    constructor(newUri, oldUri, options) {\n        this.newUri = newUri;\n        this.oldUri = oldUri;\n        this.options = options;\n        this.type = 'rename';\n    }\n}\nlet RenameOperation = class RenameOperation {\n    constructor(_edits, _undoRedoInfo, _workingCopyFileService, _fileService) {\n        this._edits = _edits;\n        this._undoRedoInfo = _undoRedoInfo;\n        this._workingCopyFileService = _workingCopyFileService;\n        this._fileService = _fileService;\n    }\n    get uris() {\n        return ( (this._edits.map(edit => [edit.newUri, edit.oldUri]))).flat();\n    }\n    async perform(token) {\n        const moves = [];\n        const undoes = [];\n        for (const edit of this._edits) {\n            const skip = edit.options.overwrite === undefined && edit.options.ignoreIfExists && (await this._fileService.exists(edit.newUri));\n            if (!skip) {\n                moves.push({\n                    file: { source: edit.oldUri, target: edit.newUri },\n                    overwrite: edit.options.overwrite\n                });\n                undoes.push(( (new RenameEdit(edit.oldUri, edit.newUri, edit.options))));\n            }\n        }\n        if (moves.length === 0) {\n            return (\n                 (new Noop())\n            );\n        }\n        await this._workingCopyFileService.move(moves, token, this._undoRedoInfo);\n        return (\n             (new RenameOperation(\n                undoes,\n                { isUndoing: true },\n                this._workingCopyFileService,\n                this._fileService\n            ))\n        );\n    }\n    toString() {\n        return `(rename ${( ( this._edits.map(edit => `${edit.oldUri} to ${edit.newUri}`))).join(', ')})`;\n    }\n};\nRenameOperation = ( (__decorate([\n    ( (__param(2, IWorkingCopyFileService))),\n    ( (__param(3, IFileService)))\n], RenameOperation)));\nclass CopyEdit {\n    constructor(newUri, oldUri, options) {\n        this.newUri = newUri;\n        this.oldUri = oldUri;\n        this.options = options;\n        this.type = 'copy';\n    }\n}\nlet CopyOperation = class CopyOperation {\n    constructor(_edits, _undoRedoInfo, _workingCopyFileService, _fileService, _instaService) {\n        this._edits = _edits;\n        this._undoRedoInfo = _undoRedoInfo;\n        this._workingCopyFileService = _workingCopyFileService;\n        this._fileService = _fileService;\n        this._instaService = _instaService;\n    }\n    get uris() {\n        return ( (this._edits.map(edit => [edit.newUri, edit.oldUri]))).flat();\n    }\n    async perform(token) {\n        const copies = [];\n        for (const edit of this._edits) {\n            const skip = edit.options.overwrite === undefined && edit.options.ignoreIfExists && (await this._fileService.exists(edit.newUri));\n            if (!skip) {\n                copies.push({ file: { source: edit.oldUri, target: edit.newUri }, overwrite: edit.options.overwrite });\n            }\n        }\n        if (copies.length === 0) {\n            return (\n                 (new Noop())\n            );\n        }\n        const stats = await this._workingCopyFileService.copy(copies, token, this._undoRedoInfo);\n        const undoes = [];\n        for (let i = 0; i < stats.length; i++) {\n            const stat = stats[i];\n            const edit = this._edits[i];\n            undoes.push(( (new DeleteEdit(\n                stat.resource,\n                { recursive: true, folder: this._edits[i].options.folder || stat.isDirectory, ...edit.options },\n                false\n            ))));\n        }\n        return this._instaService.createInstance(DeleteOperation, undoes, { isUndoing: true });\n    }\n    toString() {\n        return `(copy ${( ( this._edits.map(edit => `${edit.oldUri} to ${edit.newUri}`))).join(', ')})`;\n    }\n};\nCopyOperation = ( (__decorate([\n    ( (__param(2, IWorkingCopyFileService))),\n    ( (__param(3, IFileService))),\n    ( (__param(4, IInstantiationService)))\n], CopyOperation)));\nclass CreateEdit {\n    constructor(newUri, options, contents) {\n        this.newUri = newUri;\n        this.options = options;\n        this.contents = contents;\n        this.type = 'create';\n    }\n}\nlet CreateOperation = class CreateOperation {\n    constructor(_edits, _undoRedoInfo, _fileService, _workingCopyFileService, _instaService, _textFileService) {\n        this._edits = _edits;\n        this._undoRedoInfo = _undoRedoInfo;\n        this._fileService = _fileService;\n        this._workingCopyFileService = _workingCopyFileService;\n        this._instaService = _instaService;\n        this._textFileService = _textFileService;\n    }\n    get uris() {\n        return (\n             (this._edits.map(edit => edit.newUri))\n        );\n    }\n    async perform(token) {\n        const folderCreates = [];\n        const fileCreates = [];\n        const undoes = [];\n        for (const edit of this._edits) {\n            if (edit.options.overwrite === undefined && edit.options.ignoreIfExists && (await this._fileService.exists(edit.newUri))) {\n                continue;\n            }\n            if (edit.options.folder) {\n                folderCreates.push({ resource: edit.newUri });\n            }\n            else {\n                const encodedReadable = typeof edit.contents !== 'undefined' ? edit.contents : await this._textFileService.getEncodedReadable(edit.newUri);\n                fileCreates.push({ resource: edit.newUri, contents: encodedReadable, overwrite: edit.options.overwrite });\n            }\n            undoes.push(( (new DeleteEdit(edit.newUri, edit.options, !edit.options.folder && !edit.contents))));\n        }\n        if (folderCreates.length === 0 && fileCreates.length === 0) {\n            return (\n                 (new Noop())\n            );\n        }\n        await this._workingCopyFileService.createFolder(folderCreates, token, this._undoRedoInfo);\n        await this._workingCopyFileService.create(fileCreates, token, this._undoRedoInfo);\n        return this._instaService.createInstance(DeleteOperation, undoes, { isUndoing: true });\n    }\n    toString() {\n        return `(create ${( ( this._edits.map(\n            edit => edit.options.folder ? `folder ${edit.newUri}` : `file ${edit.newUri} with ${edit.contents?.byteLength || 0} bytes`\n        ))).join(', ')})`;\n    }\n};\nCreateOperation = ( (__decorate([\n    ( (__param(2, IFileService))),\n    ( (__param(3, IWorkingCopyFileService))),\n    ( (__param(4, IInstantiationService))),\n    ( (__param(5, ITextFileService)))\n], CreateOperation)));\nclass DeleteEdit {\n    constructor(oldUri, options, undoesCreate) {\n        this.oldUri = oldUri;\n        this.options = options;\n        this.undoesCreate = undoesCreate;\n        this.type = 'delete';\n    }\n}\nlet DeleteOperation = class DeleteOperation {\n    constructor(_edits, _undoRedoInfo, _workingCopyFileService, _fileService, _configurationService, _instaService, _logService) {\n        this._edits = _edits;\n        this._undoRedoInfo = _undoRedoInfo;\n        this._workingCopyFileService = _workingCopyFileService;\n        this._fileService = _fileService;\n        this._configurationService = _configurationService;\n        this._instaService = _instaService;\n        this._logService = _logService;\n    }\n    get uris() {\n        return (\n             (this._edits.map(edit => edit.oldUri))\n        );\n    }\n    async perform(token) {\n        const deletes = [];\n        const undoes = [];\n        for (const edit of this._edits) {\n            let fileStat;\n            try {\n                fileStat = await this._fileService.resolve(edit.oldUri, { resolveMetadata: true });\n            }\n            catch (err) {\n                if (!edit.options.ignoreIfNotExists) {\n                    throw new Error(`${edit.oldUri} does not exist and can not be deleted`);\n                }\n                continue;\n            }\n            deletes.push({\n                resource: edit.oldUri,\n                recursive: edit.options.recursive,\n                useTrash: !edit.options.skipTrashBin && this._fileService.hasCapability(edit.oldUri, 4096 ) && this._configurationService.getValue('files.enableTrash')\n            });\n            let fileContent;\n            if (!edit.undoesCreate && !edit.options.folder && !(typeof edit.options.maxSize === 'number' && fileStat.size > edit.options.maxSize)) {\n                try {\n                    fileContent = await this._fileService.readFile(edit.oldUri);\n                }\n                catch (err) {\n                    this._logService.error(err);\n                }\n            }\n            if (fileContent !== undefined) {\n                undoes.push(( (new CreateEdit(edit.oldUri, edit.options, fileContent.value))));\n            }\n        }\n        if (deletes.length === 0) {\n            return (\n                 (new Noop())\n            );\n        }\n        await this._workingCopyFileService.delete(deletes, token, this._undoRedoInfo);\n        if (undoes.length === 0) {\n            return (\n                 (new Noop())\n            );\n        }\n        return this._instaService.createInstance(CreateOperation, undoes, { isUndoing: true });\n    }\n    toString() {\n        return `(delete ${( ( this._edits.map(edit => edit.oldUri))).join(', ')})`;\n    }\n};\nDeleteOperation = ( (__decorate([\n    ( (__param(2, IWorkingCopyFileService))),\n    ( (__param(3, IFileService))),\n    ( (__param(4, IConfigurationService))),\n    ( (__param(5, IInstantiationService))),\n    ( (__param(6, ILogService)))\n], DeleteOperation)));\nclass FileUndoRedoElement {\n    constructor(label, code, operations, confirmBeforeUndo) {\n        this.label = label;\n        this.code = code;\n        this.operations = operations;\n        this.confirmBeforeUndo = confirmBeforeUndo;\n        this.type = 1 ;\n        this.resources = ( (operations.map(op => op.uris))).flat();\n    }\n    async undo() {\n        await this._reverse();\n    }\n    async redo() {\n        await this._reverse();\n    }\n    async _reverse() {\n        for (let i = 0; i < this.operations.length; i++) {\n            const op = this.operations[i];\n            const undo = await op.perform(CancellationToken.None);\n            this.operations[i] = undo;\n        }\n    }\n    toString() {\n        return ( (this.operations.map(op => String(op)))).join(', ');\n    }\n}\nlet BulkFileEdits = class BulkFileEdits {\n    constructor(_label, _code, _undoRedoGroup, _undoRedoSource, _confirmBeforeUndo, _progress, _token, _edits, _instaService, _undoRedoService) {\n        this._label = _label;\n        this._code = _code;\n        this._undoRedoGroup = _undoRedoGroup;\n        this._undoRedoSource = _undoRedoSource;\n        this._confirmBeforeUndo = _confirmBeforeUndo;\n        this._progress = _progress;\n        this._token = _token;\n        this._edits = _edits;\n        this._instaService = _instaService;\n        this._undoRedoService = _undoRedoService;\n    }\n    async apply() {\n        const undoOperations = [];\n        const undoRedoInfo = { undoRedoGroupId: this._undoRedoGroup.id };\n        const edits = [];\n        for (const edit of this._edits) {\n            if (edit.newResource && edit.oldResource && !edit.options?.copy) {\n                edits.push(( (new RenameEdit(edit.newResource, edit.oldResource, edit.options ?? {}))));\n            }\n            else if (edit.newResource && edit.oldResource && edit.options?.copy) {\n                edits.push(( (new CopyEdit(edit.newResource, edit.oldResource, edit.options ?? {}))));\n            }\n            else if (!edit.newResource && edit.oldResource) {\n                edits.push(( (new DeleteEdit(edit.oldResource, edit.options ?? {}, false))));\n            }\n            else if (edit.newResource && !edit.oldResource) {\n                edits.push(( (new CreateEdit(edit.newResource, edit.options ?? {}, await edit.options.contents))));\n            }\n        }\n        if (edits.length === 0) {\n            return [];\n        }\n        const groups = [];\n        groups[0] = [edits[0]];\n        for (let i = 1; i < edits.length; i++) {\n            const edit = edits[i];\n            const lastGroup = tail(groups);\n            if (lastGroup[0].type === edit.type) {\n                lastGroup.push(edit);\n            }\n            else {\n                groups.push([edit]);\n            }\n        }\n        for (const group of groups) {\n            if (this._token.isCancellationRequested) {\n                break;\n            }\n            let op;\n            switch (group[0].type) {\n                case 'rename':\n                    op = this._instaService.createInstance(RenameOperation, group, undoRedoInfo);\n                    break;\n                case 'copy':\n                    op = this._instaService.createInstance(CopyOperation, group, undoRedoInfo);\n                    break;\n                case 'delete':\n                    op = this._instaService.createInstance(DeleteOperation, group, undoRedoInfo);\n                    break;\n                case 'create':\n                    op = this._instaService.createInstance(CreateOperation, group, undoRedoInfo);\n                    break;\n            }\n            if (op) {\n                const undoOp = await op.perform(this._token);\n                undoOperations.push(undoOp);\n            }\n            this._progress.report(undefined);\n        }\n        const undoRedoElement = ( (new FileUndoRedoElement(this._label, this._code, undoOperations, this._confirmBeforeUndo)));\n        this._undoRedoService.pushElement(undoRedoElement, this._undoRedoGroup, this._undoRedoSource);\n        return undoRedoElement.resources;\n    }\n};\nBulkFileEdits = ( (__decorate([\n    ( (__param(8, IInstantiationService))),\n    ( (__param(9, IUndoRedoService)))\n], BulkFileEdits)));\nexport { BulkFileEdits };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { dispose } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { EditOperation } from 'monaco-editor/esm/vs/editor/common/core/editOperation.js';\nimport { Range } from 'monaco-editor/esm/vs/editor/common/core/range.js';\nimport { ITextModelService } from 'monaco-editor/esm/vs/editor/common/services/resolverService.js';\nimport { IEditorWorkerService } from 'monaco-editor/esm/vs/editor/common/services/editorWorker.js';\nimport { IUndoRedoService } from 'monaco-editor/esm/vs/platform/undoRedo/common/undoRedo.js';\nimport { SingleModelEditStackElement, MultiModelEditStackElement } from 'monaco-editor/esm/vs/editor/common/model/editStack.js';\nimport { ResourceMap } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { IModelService } from 'monaco-editor/esm/vs/editor/common/services/model.js';\nimport { ResourceTextEdit } from 'monaco-editor/esm/vs/editor/browser/services/bulkEditService.js';\nimport { SnippetController2 } from 'monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js';\nimport { SnippetParser } from 'monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js';\nclass ModelEditTask {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n        this.model = this._modelReference.object.textEditorModel;\n        this._edits = [];\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    isNoOp() {\n        if (this._edits.length > 0) {\n            return false;\n        }\n        if (this._newEol !== undefined && this._newEol !== this.model.getEndOfLineSequence()) {\n            return false;\n        }\n        return true;\n    }\n    addEdit(resourceEdit) {\n        this._expectedModelVersionId = resourceEdit.versionId;\n        const { textEdit } = resourceEdit;\n        if (typeof textEdit.eol === 'number') {\n            this._newEol = textEdit.eol;\n        }\n        if (!textEdit.range && !textEdit.text) {\n            return;\n        }\n        if (Range.isEmpty(textEdit.range) && !textEdit.text) {\n            return;\n        }\n        let range;\n        if (!textEdit.range) {\n            range = this.model.getFullModelRange();\n        }\n        else {\n            range = Range.lift(textEdit.range);\n        }\n        this._edits.push({ ...EditOperation.replaceMove(range, textEdit.text), insertAsSnippet: textEdit.insertAsSnippet });\n    }\n    validate() {\n        if (typeof this._expectedModelVersionId === 'undefined' || this.model.getVersionId() === this._expectedModelVersionId) {\n            return { canApply: true };\n        }\n        return { canApply: false, reason: this.model.uri };\n    }\n    getBeforeCursorState() {\n        return null;\n    }\n    apply() {\n        if (this._edits.length > 0) {\n            this._edits = (\n            this._edits\n                .map(this._transformSnippetStringToInsertText, this))\n                .sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n            this.model.pushEditOperations(null, this._edits, () => null);\n        }\n        if (this._newEol !== undefined) {\n            this.model.pushEOL(this._newEol);\n        }\n    }\n    _transformSnippetStringToInsertText(edit) {\n        if (!edit.insertAsSnippet) {\n            return edit;\n        }\n        if (!edit.text) {\n            return edit;\n        }\n        const text = SnippetParser.asInsertText(edit.text);\n        return { ...edit, insertAsSnippet: false, text };\n    }\n}\nclass EditorEditTask extends ModelEditTask {\n    constructor(modelReference, editor) {\n        super(modelReference);\n        this._editor = editor;\n    }\n    getBeforeCursorState() {\n        return this._canUseEditor() ? this._editor.getSelections() : null;\n    }\n    apply() {\n        if (!this._canUseEditor()) {\n            super.apply();\n            return;\n        }\n        if (this._edits.length > 0) {\n            const snippetCtrl = SnippetController2.get(this._editor);\n            if (snippetCtrl && ( this._edits.some(edit => edit.insertAsSnippet))) {\n                const snippetEdits = [];\n                for (const edit of this._edits) {\n                    if (edit.range && edit.text !== null) {\n                        snippetEdits.push({\n                            range: Range.lift(edit.range),\n                            template: edit.insertAsSnippet ? edit.text : SnippetParser.escape(edit.text)\n                        });\n                    }\n                }\n                snippetCtrl.apply(snippetEdits, { undoStopBefore: false, undoStopAfter: false });\n            }\n            else {\n                this._edits = (\n                this._edits\n                    .map(this._transformSnippetStringToInsertText, this))\n                    .sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n                this._editor.executeEdits('', this._edits);\n            }\n        }\n        if (this._newEol !== undefined) {\n            if (this._editor.hasModel()) {\n                this._editor.getModel().pushEOL(this._newEol);\n            }\n        }\n    }\n    _canUseEditor() {\n        return this._editor?.getModel()?.uri.toString() === ( this.model.uri.toString());\n    }\n}\nlet BulkTextEdits = class BulkTextEdits {\n    constructor(_label, _code, _editor, _undoRedoGroup, _undoRedoSource, _progress, _token, edits, _editorWorker, _modelService, _textModelResolverService, _undoRedoService) {\n        this._label = _label;\n        this._code = _code;\n        this._editor = _editor;\n        this._undoRedoGroup = _undoRedoGroup;\n        this._undoRedoSource = _undoRedoSource;\n        this._progress = _progress;\n        this._token = _token;\n        this._editorWorker = _editorWorker;\n        this._modelService = _modelService;\n        this._textModelResolverService = _textModelResolverService;\n        this._undoRedoService = _undoRedoService;\n        this._edits = ( new ResourceMap());\n        for (const edit of edits) {\n            let array = this._edits.get(edit.resource);\n            if (!array) {\n                array = [];\n                this._edits.set(edit.resource, array);\n            }\n            array.push(edit);\n        }\n    }\n    _validateBeforePrepare() {\n        for (const array of ( this._edits.values())) {\n            for (const edit of array) {\n                if (typeof edit.versionId === 'number') {\n                    const model = this._modelService.getModel(edit.resource);\n                    if (model && model.getVersionId() !== edit.versionId) {\n                        throw new Error(`${model.uri.toString()} has changed in the meantime`);\n                    }\n                }\n            }\n        }\n    }\n    async _createEditsTasks() {\n        const tasks = [];\n        const promises = [];\n        for (const [key, value] of this._edits) {\n            const promise = this._textModelResolverService.createModelReference(key).then(async (ref) => {\n                let task;\n                let makeMinimal = false;\n                if (this._editor?.getModel()?.uri.toString() === ( ref.object.textEditorModel.uri.toString())) {\n                    task = ( new EditorEditTask(ref, this._editor));\n                    makeMinimal = true;\n                }\n                else {\n                    task = ( new ModelEditTask(ref));\n                }\n                for (const edit of value) {\n                    if (makeMinimal && !edit.textEdit.insertAsSnippet) {\n                        const newEdits = await this._editorWorker.computeMoreMinimalEdits(edit.resource, [edit.textEdit]);\n                        if (!newEdits) {\n                            task.addEdit(edit);\n                        }\n                        else {\n                            for (const moreMinialEdit of newEdits) {\n                                task.addEdit(( new ResourceTextEdit(edit.resource, moreMinialEdit, edit.versionId, edit.metadata)));\n                            }\n                        }\n                    }\n                    else {\n                        task.addEdit(edit);\n                    }\n                }\n                tasks.push(task);\n            });\n            promises.push(promise);\n        }\n        await Promise.all(promises);\n        return tasks;\n    }\n    _validateTasks(tasks) {\n        for (const task of tasks) {\n            const result = task.validate();\n            if (!result.canApply) {\n                return result;\n            }\n        }\n        return { canApply: true };\n    }\n    async apply() {\n        this._validateBeforePrepare();\n        const tasks = await this._createEditsTasks();\n        try {\n            if (this._token.isCancellationRequested) {\n                return [];\n            }\n            const resources = [];\n            const validation = this._validateTasks(tasks);\n            if (!validation.canApply) {\n                throw new Error(`${validation.reason.toString()} has changed in the meantime`);\n            }\n            if (tasks.length === 1) {\n                const task = tasks[0];\n                if (!task.isNoOp()) {\n                    const singleModelEditStackElement = ( new SingleModelEditStackElement(this._label, this._code, task.model, task.getBeforeCursorState()));\n                    this._undoRedoService.pushElement(singleModelEditStackElement, this._undoRedoGroup, this._undoRedoSource);\n                    task.apply();\n                    singleModelEditStackElement.close();\n                    resources.push(task.model.uri);\n                }\n                this._progress.report(undefined);\n            }\n            else {\n                const multiModelEditStackElement = ( new MultiModelEditStackElement(this._label, this._code, ( tasks.map(t => ( new SingleModelEditStackElement(this._label, this._code, t.model, t.getBeforeCursorState()))))));\n                this._undoRedoService.pushElement(multiModelEditStackElement, this._undoRedoGroup, this._undoRedoSource);\n                for (const task of tasks) {\n                    task.apply();\n                    this._progress.report(undefined);\n                    resources.push(task.model.uri);\n                }\n                multiModelEditStackElement.close();\n            }\n            return resources;\n        }\n        finally {\n            dispose(tasks);\n        }\n    }\n};\nBulkTextEdits = ( __decorate([\n    ( __param(8, IEditorWorkerService)),\n    ( __param(9, IModelService)),\n    ( __param(10, ITextModelService)),\n    ( __param(11, IUndoRedoService))\n], BulkTextEdits));\nexport { BulkTextEdits };\n","import { __decorate, __param } from '../../../../../../node_modules/tslib/tslib.es6.js';\nimport { CancellationToken } from 'monaco-editor/esm/vs/base/common/cancellation.js';\nimport { toDisposable } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { LinkedList } from 'monaco-editor/esm/vs/base/common/linkedList.js';\nimport { ResourceMap, ResourceSet } from 'monaco-editor/esm/vs/base/common/map.js';\nimport { isCodeEditor } from 'monaco-editor/esm/vs/editor/browser/editorBrowser.js';\nimport { ResourceTextEdit, ResourceFileEdit } from 'monaco-editor/esm/vs/editor/browser/services/bulkEditService.js';\nimport { localize } from 'monaco-editor/esm/vs/nls.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { Extensions } from 'monaco-editor/esm/vs/platform/configuration/common/configurationRegistry.js';\nimport '../../../../../../override/vs/platform/dialogs/common/dialogs.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nimport { ILogService } from 'monaco-editor/esm/vs/platform/log/common/log.js';\nimport { Progress } from 'monaco-editor/esm/vs/platform/progress/common/progress.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { UndoRedoGroup } from 'monaco-editor/esm/vs/platform/undoRedo/common/undoRedo.js';\nimport { ResourceNotebookCellEdit, BulkCellEdits } from './bulkCellEdits.js';\nimport { BulkFileEdits } from './bulkFileEdits.js';\nimport { BulkTextEdits } from './bulkTextEdits.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ILifecycleService } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IWorkingCopyService } from '../../../services/workingCopy/common/workingCopyService.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nfunction liftEdits(edits) {\n    return ( edits.map(edit => {\n        if (ResourceTextEdit.is(edit)) {\n            return ResourceTextEdit.lift(edit);\n        }\n        if (ResourceFileEdit.is(edit)) {\n            return ResourceFileEdit.lift(edit);\n        }\n        if (ResourceNotebookCellEdit.is(edit)) {\n            return ResourceNotebookCellEdit.lift(edit);\n        }\n        throw new Error('Unsupported edit');\n    }));\n}\nlet BulkEdit = class BulkEdit {\n    constructor(_label, _code, _editor, _progress, _token, _edits, _undoRedoGroup, _undoRedoSource, _confirmBeforeUndo, _instaService, _logService) {\n        this._label = _label;\n        this._code = _code;\n        this._editor = _editor;\n        this._progress = _progress;\n        this._token = _token;\n        this._edits = _edits;\n        this._undoRedoGroup = _undoRedoGroup;\n        this._undoRedoSource = _undoRedoSource;\n        this._confirmBeforeUndo = _confirmBeforeUndo;\n        this._instaService = _instaService;\n        this._logService = _logService;\n    }\n    ariaMessage() {\n        const otherResources = ( new ResourceMap());\n        const textEditResources = ( new ResourceMap());\n        let textEditCount = 0;\n        for (const edit of this._edits) {\n            if (edit instanceof ResourceTextEdit) {\n                textEditCount += 1;\n                textEditResources.set(edit.resource, true);\n            }\n            else if (edit instanceof ResourceFileEdit) {\n                otherResources.set(edit.oldResource ?? edit.newResource, true);\n            }\n        }\n        if (this._edits.length === 0) {\n            return ( localize('summary.0', \"Made no edits\"));\n        }\n        else if (otherResources.size === 0) {\n            if (textEditCount > 1 && textEditResources.size > 1) {\n                return ( localize(\n                    'summary.nm',\n                    \"Made {0} text edits in {1} files\",\n                    textEditCount,\n                    textEditResources.size\n                ));\n            }\n            else {\n                return ( localize('summary.n0', \"Made {0} text edits in one file\", textEditCount));\n            }\n        }\n        else {\n            return ( localize(\n                'summary.textFiles',\n                \"Made {0} text edits in {1} files, also created or deleted {2} files\",\n                textEditCount,\n                textEditResources.size,\n                otherResources.size\n            ));\n        }\n    }\n    async perform() {\n        if (this._edits.length === 0) {\n            return [];\n        }\n        const ranges = [1];\n        for (let i = 1; i < this._edits.length; i++) {\n            if (Object.getPrototypeOf(this._edits[i - 1]) === Object.getPrototypeOf(this._edits[i])) {\n                ranges[ranges.length - 1]++;\n            }\n            else {\n                ranges.push(1);\n            }\n        }\n        const increment = this._edits.length > 1 ? 0 : undefined;\n        this._progress.report({ increment, total: 100 });\n        const progress = { report: _ => this._progress.report({ increment: 100 / this._edits.length }) };\n        const resources = [];\n        let index = 0;\n        for (const range of ranges) {\n            if (this._token.isCancellationRequested) {\n                break;\n            }\n            const group = this._edits.slice(index, index + range);\n            if (group[0] instanceof ResourceFileEdit) {\n                resources.push(await this._performFileEdits(group, this._undoRedoGroup, this._undoRedoSource, this._confirmBeforeUndo, progress));\n            }\n            else if (group[0] instanceof ResourceTextEdit) {\n                resources.push(await this._performTextEdits(group, this._undoRedoGroup, this._undoRedoSource, progress));\n            }\n            else if (group[0] instanceof ResourceNotebookCellEdit) {\n                resources.push(await this._performCellEdits(group, this._undoRedoGroup, this._undoRedoSource, progress));\n            }\n            else {\n                console.log('UNKNOWN EDIT');\n            }\n            index = index + range;\n        }\n        return resources.flat();\n    }\n    async _performFileEdits(edits, undoRedoGroup, undoRedoSource, confirmBeforeUndo, progress) {\n        this._logService.debug('_performFileEdits', JSON.stringify(edits));\n        const model = this._instaService.createInstance(BulkFileEdits, this._label || ( localize('workspaceEdit', \"Workspace Edit\")), this._code || 'undoredo.workspaceEdit', undoRedoGroup, undoRedoSource, confirmBeforeUndo, progress, this._token, edits);\n        return await model.apply();\n    }\n    async _performTextEdits(edits, undoRedoGroup, undoRedoSource, progress) {\n        this._logService.debug('_performTextEdits', JSON.stringify(edits));\n        const model = this._instaService.createInstance(BulkTextEdits, this._label || ( localize('workspaceEdit', \"Workspace Edit\")), this._code || 'undoredo.workspaceEdit', this._editor, undoRedoGroup, undoRedoSource, progress, this._token, edits);\n        return await model.apply();\n    }\n    async _performCellEdits(edits, undoRedoGroup, undoRedoSource, progress) {\n        this._logService.debug('_performCellEdits', JSON.stringify(edits));\n        const model = this._instaService.createInstance(BulkCellEdits, undoRedoGroup, undoRedoSource, progress, this._token, edits);\n        return await model.apply();\n    }\n};\nBulkEdit = ( __decorate([\n    ( __param(9, IInstantiationService)),\n    ( __param(10, ILogService))\n], BulkEdit));\nlet BulkEditService = class BulkEditService {\n    constructor(_instaService, _logService, _editorService, _lifecycleService, _dialogService, _workingCopyService, _configService) {\n        this._instaService = _instaService;\n        this._logService = _logService;\n        this._editorService = _editorService;\n        this._lifecycleService = _lifecycleService;\n        this._dialogService = _dialogService;\n        this._workingCopyService = _workingCopyService;\n        this._configService = _configService;\n        this._activeUndoRedoGroups = ( new LinkedList());\n    }\n    setPreviewHandler(handler) {\n        this._previewHandler = handler;\n        return toDisposable(() => {\n            if (this._previewHandler === handler) {\n                this._previewHandler = undefined;\n            }\n        });\n    }\n    hasPreviewHandler() {\n        return Boolean(this._previewHandler);\n    }\n    async apply(editsIn, options) {\n        let edits = liftEdits(Array.isArray(editsIn) ? editsIn : editsIn.edits);\n        if (edits.length === 0) {\n            return { ariaSummary: ( localize('nothing', \"Made no edits\")), isApplied: false };\n        }\n        if (this._previewHandler && (options?.showPreview || ( edits.some(value => value.metadata?.needsConfirmation)))) {\n            edits = await this._previewHandler(edits, options);\n        }\n        let codeEditor = options?.editor;\n        if (!codeEditor) {\n            const candidate = this._editorService.activeTextEditorControl;\n            if (isCodeEditor(candidate)) {\n                codeEditor = candidate;\n            }\n        }\n        if (codeEditor && codeEditor.getOption(89 )) {\n            codeEditor = undefined;\n        }\n        let undoRedoGroup;\n        let undoRedoGroupRemove = () => { };\n        if (typeof options?.undoRedoGroupId === 'number') {\n            for (const candidate of this._activeUndoRedoGroups) {\n                if (candidate.id === options.undoRedoGroupId) {\n                    undoRedoGroup = candidate;\n                    break;\n                }\n            }\n        }\n        if (!undoRedoGroup) {\n            undoRedoGroup = ( new UndoRedoGroup());\n            undoRedoGroupRemove = this._activeUndoRedoGroups.push(undoRedoGroup);\n        }\n        const label = options?.quotableLabel || options?.label;\n        const bulkEdit = this._instaService.createInstance(BulkEdit, label, options?.code, codeEditor, options?.progress ?? Progress.None, options?.token ?? CancellationToken.None, edits, undoRedoGroup, options?.undoRedoSource, !!options?.confirmBeforeUndo);\n        let listener;\n        try {\n            listener = this._lifecycleService.onBeforeShutdown(e => e.veto(this._shouldVeto(label, e.reason), 'veto.blukEditService'));\n            const resources = await bulkEdit.perform();\n            if (options?.respectAutoSaveConfig && this._configService.getValue(autoSaveSetting) === true && resources.length > 1) {\n                await this._saveAll(resources);\n            }\n            return { ariaSummary: bulkEdit.ariaMessage(), isApplied: edits.length > 0 };\n        }\n        catch (err) {\n            this._logService.error(err);\n            throw err;\n        }\n        finally {\n            listener?.dispose();\n            undoRedoGroupRemove();\n        }\n    }\n    async _saveAll(resources) {\n        const set = ( new ResourceSet(resources));\n        const saves = ( this._workingCopyService.dirtyWorkingCopies.map(async (copy) => {\n            if (( set.has(copy.resource))) {\n                await copy.save();\n            }\n        }));\n        const result = await Promise.allSettled(saves);\n        for (const item of result) {\n            if (item.status === 'rejected') {\n                this._logService.warn(item.reason);\n            }\n        }\n    }\n    async _shouldVeto(label, reason) {\n        let message;\n        let primaryButton;\n        switch (reason) {\n            case 1 :\n                message = ( localize('closeTheWindow.message', \"Are you sure you want to close the window?\"));\n                primaryButton = ( localize(\n                    { key: 'closeTheWindow', comment: ['&& denotes a mnemonic'] },\n                    \"&&Close Window\"\n                ));\n                break;\n            case 4 :\n                message = ( localize(\n                    'changeWorkspace.message',\n                    \"Are you sure you want to change the workspace?\"\n                ));\n                primaryButton = ( localize(\n                    { key: 'changeWorkspace', comment: ['&& denotes a mnemonic'] },\n                    \"Change &&Workspace\"\n                ));\n                break;\n            case 3 :\n                message = ( localize('reloadTheWindow.message', \"Are you sure you want to reload the window?\"));\n                primaryButton = ( localize(\n                    { key: 'reloadTheWindow', comment: ['&& denotes a mnemonic'] },\n                    \"&&Reload Window\"\n                ));\n                break;\n            default:\n                message = ( localize('quit.message', \"Are you sure you want to quit?\"));\n                primaryButton = ( localize({ key: 'quit', comment: ['&& denotes a mnemonic'] }, \"&&Quit\"));\n                break;\n        }\n        const result = await this._dialogService.confirm({\n            message,\n            detail: ( localize(\n                'areYouSureQuiteBulkEdit.detail',\n                \"'{0}' is in progress.\",\n                label || ( localize('fileOperation', \"File operation\"))\n            )),\n            primaryButton\n        });\n        return !result.confirmed;\n    }\n};\nBulkEditService = ( __decorate([\n    ( __param(0, IInstantiationService)),\n    ( __param(1, ILogService)),\n    ( __param(2, IEditorService)),\n    ( __param(3, ILifecycleService)),\n    ( __param(4, IDialogService)),\n    ( __param(5, IWorkingCopyService)),\n    ( __param(6, IConfigurationService))\n], BulkEditService));\nconst autoSaveSetting = 'files.refactoring.autoSave';\n( Registry.as(Extensions.Configuration)).registerConfiguration({\n    id: 'files',\n    properties: {\n        [autoSaveSetting]: {\n            description: ( localize(\n                'refactoring.autoSave',\n                \"Controls if files that were part of a refactoring are saved automatically\"\n            )),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\nexport { BulkEditService };\n","import { __decorate, __param } from '../node_modules/tslib/tslib.es6.js';\nimport '../missing-services.js';\nimport { StandaloneServices } from 'monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js';\nimport { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { Extensions, IViewsService, IViewDescriptorService } from '../vscode/vs/workbench/common/views.js';\nexport { ViewContainerLocation } from '../vscode/vs/workbench/common/views.js';\nimport { ViewsService } from '../vscode/vs/workbench/browser/parts/views/viewsService.js';\nimport { IInstantiationService } from 'monaco-editor/esm/vs/platform/instantiation/common/instantiation.js';\nexport { SidebarPart } from '../vscode/vs/workbench/browser/parts/sidebar/sidebarPart.js';\nimport { ViewDescriptorService } from '../vscode/vs/workbench/services/views/browser/viewDescriptorService.js';\nimport { IActivityService } from '../vscode/vs/workbench/services/activity/common/activity.js';\nimport { ActivityService } from '../vscode/vs/workbench/services/activity/browser/activityService.js';\nimport { IPaneCompositePartService } from '../vscode/vs/workbench/services/panecomposite/browser/panecomposite.js';\nimport { PaneCompositeParts } from '../vscode/vs/workbench/browser/parts/paneCompositePart.js';\nexport { ActivitybarPart } from '../vscode/vs/workbench/browser/parts/activitybar/activitybarPart.js';\nimport { DisposableStore } from 'monaco-editor/esm/vs/base/common/lifecycle.js';\nimport { IHoverService } from '../vscode/vs/workbench/services/hover/browser/hover.js';\nimport { HoverService } from '../vscode/vs/workbench/services/hover/browser/hoverService.js';\nimport { ExplorerService } from '../vscode/vs/workbench/contrib/files/browser/explorerService.js';\nimport { IExplorerService } from '../vscode/vs/workbench/contrib/files/browser/files.js';\nexport { PanelPart } from '../vscode/vs/workbench/browser/parts/panel/panelPart.js';\nimport { $, append } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { ViewPane } from '../vscode/vs/workbench/browser/parts/views/viewPane.js';\nimport { Registry } from 'monaco-editor/esm/vs/platform/registry/common/platform.js';\nimport { ViewPaneContainer } from '../vscode/vs/workbench/browser/parts/views/viewPaneContainer.js';\nimport { URI } from 'monaco-editor/esm/vs/base/common/uri.js';\nimport { EditorPart } from '../vscode/vs/workbench/browser/parts/editor/editorPart.js';\nimport '../vscode/vs/workbench/contrib/files/browser/fileCommands.js';\nimport '../vscode/vs/workbench/contrib/files/browser/fileActions.contribution.js';\nimport '../vscode/vs/workbench/contrib/callHierarchy/browser/callHierarchy.contribution.js';\nimport '../vscode/vs/workbench/contrib/typeHierarchy/browser/typeHierarchy.contribution.js';\nimport '../vscode/vs/workbench/contrib/codeEditor/browser/outline/documentSymbolsOutline.js';\nimport '../vscode/vs/workbench/contrib/outline/browser/outline.contribution.js';\nimport '../vscode/vs/workbench/browser/actions/listCommands.js';\nimport '../vscode/vs/workbench/browser/parts/views/media/views.css.js';\nimport '../vscode/vs/workbench/api/browser/viewsExtensionPoint.js';\nimport '../vscode/vs/workbench/browser/parts/editor/editor.contribution.js';\nimport '../vscode/vs/workbench/browser/workbench.contribution.js';\nimport '../vscode/vs/workbench/contrib/customEditor/browser/customEditor.contribution.js';\nimport '../vscode/vs/workbench/contrib/webviewPanel/browser/webviewPanel.contribution.js';\nimport '../vscode/vs/workbench/contrib/externalUriOpener/common/externalUriOpener.contribution.js';\nimport '../vscode/vs/workbench/contrib/languageStatus/browser/languageStatus.contribution.js';\nimport '../vscode/vs/workbench/contrib/languageDetection/browser/languageDetection.contribution.js';\nimport '../vscode/vs/workbench/contrib/files/browser/files.contribution.js';\nimport '../vscode/vs/workbench/contrib/files/browser/files.contribution2.js';\nimport { Codicon } from 'monaco-editor/esm/vs/base/common/codicons.js';\nimport { IEditorGroupsService } from '../vscode/vs/workbench/services/editor/common/editorGroupsService.js';\nimport { IEditorDropService } from '../vscode/vs/workbench/services/editor/browser/editorDropService.js';\nimport { EditorService } from '../vscode/vs/workbench/services/editor/browser/editorService.js';\nimport { IEditorService } from '../vscode/vs/workbench/services/editor/common/editorService.js';\nimport { IEditorResolverService } from '../vscode/vs/workbench/services/editor/common/editorResolverService.js';\nimport { EditorResolverService } from '../vscode/vs/workbench/services/editor/browser/editorResolverService.js';\nimport { IBreadcrumbsService, BreadcrumbsService } from '../vscode/vs/workbench/browser/parts/editor/breadcrumbs.js';\nimport { IContextViewService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextView.js';\nimport { ContextViewService } from 'monaco-editor/esm/vs/platform/contextview/browser/contextViewService.js';\nimport { ICodeEditorService } from 'monaco-editor/esm/vs/editor/browser/services/codeEditorService.js';\nimport { EditorInput } from '../vscode/vs/workbench/common/editor/editorInput.js';\nimport { EditorExtensions } from '../vscode/vs/workbench/common/editor.js';\nimport { ITextModelService } from 'monaco-editor/esm/vs/editor/common/services/resolverService.js';\nimport { IFileService } from 'monaco-editor/esm/vs/platform/files/common/files.js';\nimport { IConfigurationService } from 'monaco-editor/esm/vs/platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService } from 'monaco-editor/esm/vs/platform/workspace/common/workspace.js';\nimport { IUriIdentityService } from 'monaco-editor/esm/vs/platform/uriIdentity/common/uriIdentity.js';\nimport { IWorkspaceTrustRequestService } from 'monaco-editor/esm/vs/platform/workspace/common/workspaceTrust.js';\nimport { IHostService } from '../vscode/vs/workbench/services/host/browser/host.js';\nimport { ITextEditorService, TextEditorService } from '../vscode/vs/workbench/services/textfile/common/textEditorService.js';\nimport { CodeEditorService } from '../vscode/vs/workbench/services/editor/browser/codeEditorService.js';\nimport { IUntitledTextEditorService, UntitledTextEditorService } from '../vscode/vs/workbench/services/untitled/common/untitledTextEditorService.js';\nimport { StatusbarPart } from '../vscode/vs/workbench/browser/parts/statusbar/statusbarPart.js';\nimport { IStatusbarService } from '../vscode/vs/workbench/services/statusbar/browser/statusbar.js';\nimport { ISemanticSimilarityService, SemanticSimilarityService } from '../vscode/vs/workbench/services/semanticSimilarity/common/semanticSimilarityService.js';\nimport { IHistoryService } from '../vscode/vs/workbench/services/history/common/history.js';\nimport { HistoryService } from '../vscode/vs/workbench/services/history/browser/historyService.js';\nimport { registerAction2, Action2, MenuId } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';\nimport { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';\nimport { ContextKeyExpr } from 'monaco-editor/esm/vs/platform/contextkey/common/contextkey.js';\nimport { BaseActionViewItem } from 'monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js';\nimport { IOutlineService } from '../vscode/vs/workbench/services/outline/browser/outline.js';\nimport { OutlineService } from '../vscode/vs/workbench/services/outline/browser/outlineService.js';\nimport { ICustomEditorService } from '../vscode/vs/workbench/contrib/customEditor/common/customEditor.js';\nimport { CustomEditorService } from '../vscode/vs/workbench/contrib/customEditor/browser/customEditors.js';\nimport { WebviewService } from '../vscode/vs/workbench/contrib/webview/browser/webviewService.js';\nimport { IWebviewWorkbenchService, WebviewEditorService } from '../vscode/vs/workbench/contrib/webviewPanel/browser/webviewWorkbenchService.js';\nimport { IWebviewService } from '../vscode/vs/workbench/contrib/webview/browser/webview.js';\nimport { IWebviewViewService, WebviewViewService } from '../vscode/vs/workbench/contrib/webviewView/browser/webviewViewService.js';\nimport { ILifecycleService } from '../vscode/vs/workbench/services/lifecycle/common/lifecycle.js';\nimport { IWorkbenchLayoutService, positionToString } from '../vscode/vs/workbench/services/layout/browser/layoutService.js';\nexport { Parts } from '../vscode/vs/workbench/services/layout/browser/layoutService.js';\nimport { EditorPaneDescriptor } from '../vscode/vs/workbench/browser/editor.js';\nimport { EditorPane } from '../vscode/vs/workbench/browser/parts/editor/editorPane.js';\nimport { ITelemetryService } from 'monaco-editor/esm/vs/platform/telemetry/common/telemetry.js';\nimport { IStorageService } from 'monaco-editor/esm/vs/platform/storage/common/storage.js';\nimport { IThemeService } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nexport { ConfirmResult } from '../override/vs/platform/dialogs/common/dialogs.js';\nimport { ILayoutService } from 'monaco-editor/esm/vs/platform/layout/browser/layoutService.js';\nimport { StandaloneCodeEditor } from 'monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js';\nimport { wrapOpenEditor } from './tools/editor.js';\nimport getServiceOverride$2 from './bulkEdit.js';\nimport getServiceOverride$1 from './layout.js';\nimport getServiceOverride$3 from './quickaccess.js';\nimport { changeUrlDomain } from './tools/url.js';\nimport { registerAssets } from '../assets.js';\nimport { registerServiceInitializePostParticipant } from '../lifecycle.js';\nfunction createPart(id, role, classes) {\n    const part = document.createElement(role === 'status' ? 'footer'  : 'div');\n    part.classList.add('part', ...classes);\n    part.id = id;\n    part.setAttribute('role', role);\n    if (role === 'status') {\n        part.setAttribute('aria-live', 'off');\n    }\n    return part;\n}\nfunction layoutPart(part) {\n    const parent = part.getContainer()?.parentNode;\n    if (parent == null) {\n        return;\n    }\n    part.layout(Math.max(part.minimumWidth, Math.min(part.maximumWidth, parent.offsetWidth)), Math.max(part.minimumHeight, Math.min(part.maximumHeight, parent.offsetHeight)), 0, 0);\n}\nfunction renderPart(partContainer, part) {\n    partContainer.oncontextmenu = () => false;\n    function layout() {\n        layoutPart(part);\n    }\n    part.onDidVisibilityChange((visible) => {\n        if (visible) {\n            layout();\n        }\n    });\n    layout();\n}\nfunction getPart(part) {\n    return StandaloneServices.get(ILayoutService).getPart(part);\n}\nfunction _attachPart(part, container) {\n    container.append(part.getContainer());\n    const observer = new ResizeObserver(() => layoutPart(part));\n    observer.observe(container);\n    return {\n        dispose() {\n            return observer.disconnect();\n        }\n    };\n}\nfunction attachPart(part, container) {\n    return _attachPart(getPart(part), container);\n}\nfunction onPartVisibilityChange(part, listener) {\n    return getPart(part).onDidVisibilityChange(listener);\n}\nfunction isPartVisibile(part) {\n    return StandaloneServices.get(IWorkbenchLayoutService).isVisible(part);\n}\nfunction setPartVisibility(part, visible) {\n    StandaloneServices.get(IWorkbenchLayoutService).setPartHidden(!visible, part);\n}\nfunction renderActivitybarPar(container) {\n    return attachPart(\"workbench.parts.activitybar\" , container);\n}\nfunction renderSidebarPart(container) {\n    return attachPart(\"workbench.parts.sidebar\" , container);\n}\nfunction renderPanelPart(container) {\n    return attachPart(\"workbench.parts.panel\" , container);\n}\nfunction renderAuxiliaryPart(container) {\n    return attachPart(\"workbench.parts.auxiliarybar\" , container);\n}\nfunction renderEditorPart(container) {\n    return attachPart(\"workbench.parts.editor\" , container);\n}\nfunction renderStatusBarPart(container) {\n    return attachPart(\"workbench.parts.statusbar\" , container);\n}\nfunction registerEditorPane(options) {\n    let CustomEditorPane = class CustomEditorPane extends EditorPane {\n        constructor(telemetryService, themeService, storageService) {\n            super(options.id, telemetryService, themeService, storageService);\n        }\n        createEditor(parent) {\n            this.content = $('.editor-pane-content');\n            this.content.style.display = 'flex';\n            this.content.style.alignItems = 'stretch';\n            append(parent, this.content);\n            this._register(options.renderBody(this.content));\n        }\n        layout(dimension) {\n            this.content.style.height = `${dimension.height}px`;\n            this.content.style.width = `${dimension.width}px`;\n        }\n    };\n    CustomEditorPane = __decorate([\n        ( __param(0, ITelemetryService)),\n        ( __param(1, IThemeService)),\n        ( __param(2, IStorageService))\n    ], CustomEditorPane);\n    class CustomEditorInput extends EditorInput {\n        constructor(closeHandler) {\n            super();\n            this.closeHandler = closeHandler;\n            this.name = options.name;\n            this.title = options.name;\n            this.description = options.name;\n            this.dirty = false;\n        }\n        get typeId() {\n            return CustomEditorInput.ID;\n        }\n        get resource() {\n            return undefined;\n        }\n        setName(name) {\n            this.name = name;\n            this._onDidChangeLabel.fire();\n        }\n        setTitle(title) {\n            this.title = title;\n            this._onDidChangeLabel.fire();\n        }\n        setDescription(description) {\n            this.description = description;\n            this._onDidChangeLabel.fire();\n        }\n        getLabelValue(label, verbosity) {\n            if (typeof label === 'string') {\n                return label;\n            }\n            switch (verbosity) {\n                case 0 :\n                    return label.short;\n                case 2 :\n                    return label.long;\n                case 1 :\n                default:\n                    return label.medium;\n            }\n        }\n        getName() {\n            return this.name;\n        }\n        getTitle(verbosity) {\n            return this.getLabelValue(this.title, verbosity);\n        }\n        getDescription(verbosity) {\n            return this.getLabelValue(this.description, verbosity);\n        }\n        isDirty() {\n            return this.dirty;\n        }\n        setDirty(dirty) {\n            this.dirty = dirty;\n            this._onDidChangeDirty.fire();\n        }\n    }\n    CustomEditorInput.ID = `workbench.editors.${options.id}Input`;\n    const disposable = ( Registry.as(EditorExtensions.EditorPane)).registerEditorPane(EditorPaneDescriptor.create(CustomEditorPane, options.id, options.name), [new SyncDescriptor(CustomEditorInput)]);\n    return {\n        disposable,\n        CustomEditorInput\n    };\n}\nfunction registerCustomView(options) {\n    const iconUrl = options.icon != null ? ( URI.parse(options.icon)) : undefined;\n    const VIEW_CONTAINER = ( Registry.as(Extensions.ViewContainersRegistry)).registerViewContainer({\n        id: options.id,\n        title: options.name,\n        order: options.order,\n        ctorDescriptor: new SyncDescriptor(ViewPaneContainer, [options.id, { mergeViewWithContainerWhenSingleView: true }]),\n        hideIfEmpty: true,\n        icon: iconUrl\n    }, options.location);\n    const views = [{\n            id: options.id,\n            name: options.name,\n            canToggleVisibility: false,\n            ctorDescriptor: new SyncDescriptor(class extends ViewPane {\n                renderBody(container) {\n                    super.renderBody(container);\n                    this.content = $('.view-pane-content');\n                    this.content.style.display = 'flex';\n                    this.content.style.alignItems = 'stretch';\n                    append(container, this.content);\n                    this._register(options.renderBody(this.content));\n                }\n                getActionViewItem(action, actionOptions) {\n                    const customAction = (options.actions ?? []).find(customAction => customAction.id === action.id);\n                    if (customAction?.render != null) {\n                        return new (class extends BaseActionViewItem {\n                            constructor() {\n                                super(null, action);\n                                this.render = customAction.render;\n                            }\n                        })();\n                    }\n                    return super.getActionViewItem(action, actionOptions);\n                }\n                layoutBody(height, width) {\n                    this.content.style.height = `${height}px`;\n                    this.content.style.width = `${width}px`;\n                }\n            }),\n            canMoveView: options.canMoveView ?? true,\n            containerIcon: iconUrl\n        }];\n    ( Registry.as(Extensions.ViewsRegistry)).registerViews(views, VIEW_CONTAINER);\n    if (options.default ?? false) {\n        void StandaloneServices.get(ILifecycleService).when(4 ).then(() => {\n            void StandaloneServices.get(IViewsService).openViewContainer(options.id);\n        });\n    }\n    const disposableCollection = new DisposableStore();\n    disposableCollection.add({\n        dispose() {\n            ( Registry.as(Extensions.ViewsRegistry)).deregisterViews(views, VIEW_CONTAINER);\n            ( Registry.as(Extensions.ViewContainersRegistry)).deregisterViewContainer(VIEW_CONTAINER);\n        }\n    });\n    for (const action of options.actions ?? []) {\n        disposableCollection.add(registerAction2(class extends Action2 {\n            constructor() {\n                super({\n                    id: action.id,\n                    title: { value: action.title, original: action.title },\n                    category: Categories.View,\n                    menu: [{\n                            id: MenuId.ViewTitle,\n                            when: ( ContextKeyExpr.equals('view', options.id)),\n                            group: 'navigation',\n                            order: action.order\n                        }, {\n                            id: MenuId.CommandPalette\n                        }],\n                    tooltip: action.tooltip,\n                    icon: action.icon != null ? Codicon[action.icon] : undefined\n                });\n                this.run = action.run ?? (async () => { });\n            }\n        }));\n    }\n    return disposableCollection;\n}\nlet EditorDropService = class EditorDropService {\n    constructor(editorPart) {\n        this.editorPart = editorPart;\n    }\n    createEditorDropTarget(container, delegate) {\n        return this.editorPart.createEditorDropTarget(container, delegate);\n    }\n};\nEditorDropService = __decorate([\n    ( __param(0, IEditorGroupsService))\n], EditorDropService);\nfunction isElementVisible(el) {\n    if (!el.isConnected) {\n        return false;\n    }\n    if (el.checkVisibility != null) {\n        return el.checkVisibility({\n            checkOpacity: true,\n            checkVisibilityCSS: true\n        });\n    }\n    return el.offsetHeight > 0 && el.offsetWidth > 0;\n}\nfunction isEditorPartVisible() {\n    const container = StandaloneServices.get(IEditorGroupsService).getContainer();\n    return container != null && isElementVisible(container);\n}\nlet MonacoEditorService = class MonacoEditorService extends EditorService {\n    constructor(_openEditorFallback, _editorGroupService, instantiationService, fileService, configurationService, contextService, uriIdentityService, editorResolverService, workspaceTrustRequestService, hostService, textEditorService, textModelService) {\n        super(_editorGroupService, instantiationService, fileService, configurationService, contextService, uriIdentityService, editorResolverService, workspaceTrustRequestService, hostService, textEditorService);\n        this.openEditor = wrapOpenEditor(textModelService, this.openEditor.bind(this), _openEditorFallback);\n    }\n    get activeTextEditorControl() {\n        const focusedCodeEditor = StandaloneServices.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedCodeEditor != null && focusedCodeEditor instanceof StandaloneCodeEditor) {\n            return focusedCodeEditor;\n        }\n        return super.activeTextEditorControl;\n    }\n    async openEditor(editor, optionsOrPreferredGroup, preferredGroup) {\n        if (!isEditorPartVisible()) {\n            return undefined;\n        }\n        return super.openEditor(editor, optionsOrPreferredGroup, preferredGroup);\n    }\n};\nMonacoEditorService = __decorate([\n    ( __param(1, IEditorGroupsService)),\n    ( __param(2, IInstantiationService)),\n    ( __param(3, IFileService)),\n    ( __param(4, IConfigurationService)),\n    ( __param(5, IWorkspaceContextService)),\n    ( __param(6, IUriIdentityService)),\n    ( __param(7, IEditorResolverService)),\n    ( __param(8, IWorkspaceTrustRequestService)),\n    ( __param(9, IHostService)),\n    ( __param(10, ITextEditorService)),\n    ( __param(11, ITextModelService))\n], MonacoEditorService);\nlet webviewIframeAlternateDomains;\nregisterAssets({\n    'vs/workbench/contrib/webview/browser/pre/service-worker.js': () => changeUrlDomain(new URL('../assets/service-worker.js', import.meta.url).href, webviewIframeAlternateDomains),\n    'vs/workbench/contrib/webview/browser/pre/index.html': () => changeUrlDomain(new URL('../assets/index.html', import.meta.url).href, webviewIframeAlternateDomains),\n    'vs/workbench/contrib/webview/browser/pre/index-no-csp.html': () => changeUrlDomain(new URL('../assets/index-no-csp.html', import.meta.url).href, webviewIframeAlternateDomains),\n    'vs/workbench/contrib/webview/browser/pre/fake.html': () => changeUrlDomain(new URL('../assets/fake.html', import.meta.url).href, webviewIframeAlternateDomains)\n});\nregisterServiceInitializePostParticipant(async (accessor) => {\n    const paneCompositePartService = accessor.get(IPaneCompositePartService);\n    const viewDescriptorService = accessor.get(IViewDescriptorService);\n    accessor.get(IStatusbarService);\n    paneCompositePartService.getPaneComposites(1 );\n    const layoutService = accessor.get(ILayoutService);\n    const invisibleContainer = document.createElement('div');\n    invisibleContainer.style.display = 'none';\n    document.body.append(invisibleContainer);\n    for (const { id, role, classes, options } of [\n        { id: \"workbench.parts.activitybar\" , role: 'none', classes: ['activitybar', 'left'] },\n        { id: \"workbench.parts.sidebar\" , role: 'none', classes: ['sidebar', 'left'] },\n        { id: \"workbench.parts.editor\" , role: 'main', classes: ['editor'], options: { restorePreviousState: false } },\n        { id: \"workbench.parts.panel\" , role: 'none', classes: ['panel', 'basepanel', positionToString(2 )] },\n        { id: \"workbench.parts.auxiliarybar\" , role: 'none', classes: ['auxiliarybar', 'basepanel', 'right'] },\n        { id: \"workbench.parts.statusbar\" , role: 'status', classes: ['statusbar'] }\n    ]) {\n        const partContainer = createPart(id, role, classes);\n        const part = layoutService.getPart(id);\n        part.create(partContainer, options);\n        renderPart(partContainer, part);\n        invisibleContainer.append(partContainer);\n    }\n    await paneCompositePartService.openPaneComposite(viewDescriptorService.getDefaultViewContainer(0 )?.id, 0 );\n    await paneCompositePartService.openPaneComposite(viewDescriptorService.getDefaultViewContainer(1 )?.id, 1 );\n    await paneCompositePartService.openPaneComposite(viewDescriptorService.getDefaultViewContainer(2 )?.id, 2 );\n});\nfunction getServiceOverride(openEditorFallback, _webviewIframeAlternateDomains) {\n    if (_webviewIframeAlternateDomains != null) {\n        webviewIframeAlternateDomains = _webviewIframeAlternateDomains;\n    }\n    return {\n        ...getServiceOverride$1(),\n        ...getServiceOverride$2(),\n        ...getServiceOverride$3({\n            isKeybindingConfigurationVisible: isEditorPartVisible,\n            shouldUseGlobalPicker: isEditorPartVisible\n        }),\n        [( IViewsService.toString())]: new SyncDescriptor(ViewsService, [], false),\n        [( IViewDescriptorService.toString())]: new SyncDescriptor(ViewDescriptorService, [], true),\n        [( IActivityService.toString())]: new SyncDescriptor(ActivityService, [], true),\n        [( IPaneCompositePartService.toString())]: new SyncDescriptor(PaneCompositeParts, [], true),\n        [( IHoverService.toString())]: new SyncDescriptor(HoverService, [], true),\n        [( IExplorerService.toString())]: new SyncDescriptor(ExplorerService, [], true),\n        [( ICodeEditorService.toString())]: new SyncDescriptor(CodeEditorService, [], true),\n        [( ITextEditorService.toString())]: new SyncDescriptor(TextEditorService, [], false),\n        [( IEditorGroupsService.toString())]: new SyncDescriptor(EditorPart, [], false),\n        [( IStatusbarService.toString())]: new SyncDescriptor(StatusbarPart, [], false),\n        [( IEditorDropService.toString())]: new SyncDescriptor(EditorDropService, [], true),\n        [( IEditorService.toString())]: new SyncDescriptor(MonacoEditorService, [openEditorFallback], false),\n        [( IEditorResolverService.toString())]: new SyncDescriptor(EditorResolverService, [], false),\n        [( IBreadcrumbsService.toString())]: new SyncDescriptor(BreadcrumbsService, [], true),\n        [( IContextViewService.toString())]: new SyncDescriptor(ContextViewService, [], true),\n        [( IUntitledTextEditorService.toString())]: new SyncDescriptor(UntitledTextEditorService, [], true),\n        [( ISemanticSimilarityService.toString())]: new SyncDescriptor(SemanticSimilarityService, [], true),\n        [( IHistoryService.toString())]: new SyncDescriptor(HistoryService, [], false),\n        [( IOutlineService.toString())]: new SyncDescriptor(OutlineService, [], true),\n        [( ICustomEditorService.toString())]: new SyncDescriptor(CustomEditorService, [], true),\n        [( IWebviewService.toString())]: new SyncDescriptor(WebviewService, [], true),\n        [( IWebviewViewService.toString())]: new SyncDescriptor(WebviewViewService, [], true),\n        [( IWebviewWorkbenchService.toString())]: new SyncDescriptor(WebviewEditorService, [], true)\n    };\n}\nexport { ActivityService, HoverService, StatusbarPart, attachPart, getServiceOverride as default, isEditorPartVisible, isPartVisibile, onPartVisibilityChange, registerCustomView, registerEditorPane, renderActivitybarPar, renderAuxiliaryPart, renderEditorPart, renderPanelPart, renderPart, renderSidebarPart, renderStatusBarPart, setPartVisibility };\n","import '../missing-services.js';\nimport { SyncDescriptor } from 'monaco-editor/esm/vs/platform/instantiation/common/descriptors.js';\nimport { IBulkEditService } from 'monaco-editor/esm/vs/editor/browser/services/bulkEditService.js';\nimport { BulkEditService } from '../vscode/vs/workbench/contrib/bulkEdit/browser/bulkEditService.js';\nfunction getServiceOverride() {\n    return {\n        [( IBulkEditService.toString())]: new SyncDescriptor(BulkEditService, [], true)\n    };\n}\nexport { getServiceOverride as default };\n","import { isMacintosh, isNative, isWeb, isLinux } from 'monaco-editor/esm/vs/base/common/platform.js';\nfunction isWorkspaceToOpen(uriToOpen) {\n    return !!uriToOpen.workspaceUri;\n}\nfunction isFileToOpen(uriToOpen) {\n    return !!uriToOpen.fileUri;\n}\nfunction getMenuBarVisibility(configurationService) {\n    const titleBarStyle = getTitleBarStyle(configurationService);\n    const menuBarVisibility = configurationService.getValue('window.menuBarVisibility');\n    if (menuBarVisibility === 'default' || (titleBarStyle === 'native' && menuBarVisibility === 'compact') || (isMacintosh && isNative)) {\n        return 'classic';\n    }\n    else {\n        return menuBarVisibility;\n    }\n}\nfunction getTitleBarStyle(configurationService) {\n    if (isWeb) {\n        return 'custom';\n    }\n    const configuration = configurationService.getValue('window');\n    if (configuration) {\n        const useNativeTabs = isMacintosh && configuration.nativeTabs === true;\n        if (useNativeTabs) {\n            return 'native';\n        }\n        const useSimpleFullScreen = isMacintosh && configuration.nativeFullScreen === false;\n        if (useSimpleFullScreen) {\n            return 'native';\n        }\n        const style = configuration.titleBarStyle;\n        if (style === 'native' || style === 'custom') {\n            return style;\n        }\n    }\n    return isLinux ? 'native' : 'custom';\n}\nexport { getMenuBarVisibility, getTitleBarStyle, isFileToOpen, isWorkspaceToOpen };\n","import { registerThemingParticipant } from 'monaco-editor/esm/vs/platform/theme/common/themeService.js';\nimport { TITLE_BAR_ACTIVE_BACKGROUND, WORKBENCH_BACKGROUND } from '../common/theme.js';\nimport { isWeb, isIOS, isWindows, isMacintosh } from 'monaco-editor/esm/vs/base/common/platform.js';\nimport { createMetaElement } from 'monaco-editor/esm/vs/base/browser/dom.js';\nimport { isSafari, isStandalone } from 'monaco-editor/esm/vs/base/browser/browser.js';\nimport { selectionBackground } from 'monaco-editor/esm/vs/platform/theme/common/colorRegistry.js';\nregisterThemingParticipant((theme, collector) => {\n    const workbenchBackground = WORKBENCH_BACKGROUND(theme);\n    collector.addRule(`.monaco-workbench { background-color: ${workbenchBackground}; }`);\n    const windowSelectionBackground = theme.getColor(selectionBackground);\n    if (windowSelectionBackground) {\n        collector.addRule(`.monaco-workbench ::selection { background-color: ${windowSelectionBackground}; }`);\n    }\n    if (isWeb) {\n        const titleBackground = theme.getColor(TITLE_BAR_ACTIVE_BACKGROUND);\n        if (titleBackground) {\n            const metaElementId = 'monaco-workbench-meta-theme-color';\n            let metaElement = document.getElementById(metaElementId);\n            if (!metaElement) {\n                metaElement = createMetaElement();\n                metaElement.name = 'theme-color';\n                metaElement.id = metaElementId;\n            }\n            metaElement.content = ( titleBackground.toString());\n        }\n    }\n    if (isSafari) {\n        collector.addRule(`\n\t\t\tbody.web {\n\t\t\t\ttouch-action: none;\n\t\t\t}\n\t\t\t.monaco-workbench .monaco-editor .view-lines {\n\t\t\t\tuser-select: text;\n\t\t\t\t-webkit-user-select: text;\n\t\t\t}\n\t\t`);\n    }\n    if (isIOS && isStandalone()) {\n        collector.addRule(`body { background-color: ${workbenchBackground}; }`);\n    }\n});\nconst DEFAULT_FONT_FAMILY = isWindows ? '\"Segoe WPC\", \"Segoe UI\", sans-serif' : isMacintosh ? '-apple-system, BlinkMacSystemFont, sans-serif' : 'system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif';\nexport { DEFAULT_FONT_FAMILY };\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","$","dom","HoverWidget","constructor","super","this","containerDomNode","document","createElement","className","tabIndex","setAttribute","contentsDomNode","scrollbar","_register","consumeMouseWheelIfScrollbarIsNeeded","appendChild","getDomNode","onContentsChanged","scanDomNode","HoverAction","render","parent","actionOptions","keybindingLabel","actionContainer","action","iconClass","textContent","label","CLICK","e","stopPropagation","preventDefault","run","KEY_DOWN","event","equals","setEnabled","enabled","classList","remove","removeAttribute","add","Part","dimension","_dimension","themeService","storageService","layoutService","_onDidVisibilityChange","onDidVisibilityChange","_onDidChange","registerPart","onThemeChange","theme","updateStyles","create","titleArea","createTitleArea","contentArea","createContentArea","partLayout","PartLayout","getContainer","getTitleArea","getContentArea","layoutContents","width","height","layout","onDidChange","_top","_left","setVisible","visible","fire","TITLE_HEIGHT","titleSize","hasTitle","Math","min","None","contentWidth","borderWidth","contentSize","CompositePart","notificationService","contextMenuService","keybindingService","instantiationService","registry","activeCompositeSettingsKey","defaultCompositeId","nameForTelemetry","compositeCSSClass","titleForegroundColor","onDidCompositeOpen","onDidCompositeClose","mapCompositeToCompositeContainer","Map","mapActionsBindingToComposite","instantiatedCompositeItems","actionsListener","lastActiveCompositeId","get","openComposite","focus","activeComposite","getId","element","doOpenComposite","currentCompositeOpenToken","nextId","hideActiveComposite","updateTitle","composite","createComposite","showComposite","isActive","compositeItem","compositeDescriptor","getComposite","that","compositeProgressIndicator","progressBar","onScopeOpened","onScopeClosed","compositeInstantiationService","createChild","instantiate","disposable","set","progress","onTitleAreaUpdate","Error","store","compositeContainer","split","toolBar","actionRunner","getActionRunner","descriptor","name","getTitle","actionsBinding","collectCompositeActions","value","onDidRun","error","contentAreaSize","boundarySashes","setBoundarySashes","compositeId","delete","compositeTitle","titleLabel","keybinding","lookupKeybinding","getLabel","setAriaLabel","menuIds","getMenuIds","primaryActions","getActions","slice","secondaryActions","getSecondaryActions","context","actionsContextProvider","setActions","getActiveComposite","getLastActiveCompositeId","undefined","stop","hide","createTitleLabel","titleActionsContainer","createInstance","actionViewItemProvider","orientation","getKeyBinding","anchorAlignmentProvider","getTitleAreaDropDownAnchorAlignment","toggleMenuTitle","telemetrySource","titleContainer","titleLabelElement","$this","title","innerText","style","color","getColor","getActionViewItem","getActionsContext","contentContainer","getProgressIndicator","top","left","lift","sashes","removeComposite","dispose","clear","forEach","SidebarPart","activeViewletSettingsKey","preferredWidth","viewlet","getActivePaneComposite","getOptimalWidth","max","onDidPaneCompositeRegister","viewletRegistry","onDidRegister","onDidPaneCompositeOpen","map","compositeEvent","onDidPaneCompositeClose","viewDescriptorService","contextKeyService","extensionService","as","Viewlets","getDefaultViewContainer","minimumWidth","maximumWidth","Number","POSITIVE_INFINITY","minimumHeight","maximumHeight","priority","snap","_onDidViewletDeregister","onDidPaneCompositeDeregister","sideBarFocusContextKey","bindTo","activeViewletContextKey","blockOpeningViewlet","registerListeners","reset","onDidDeregister","async","viewletDescriptor","activeContainers","getViewContainersByLocation","filter","container","getViewContainerModel","activeViewDescriptors","length","defaultViewletId","containerToOpen","c","openPaneComposite","setPartHidden","focusTracker","onDidFocus","onDidBlur","CONTEXT_MENU","onTitleAreaContextMenu","addTarget","Contextmenu","draggable","INSTANCE","registerDraggable","type","backgroundColor","borderColor","isPositionLeft","getSideBarPosition","borderRightWidth","borderRightStyle","borderRightColor","borderLeftWidth","borderLeftStyle","borderLeftColor","outlineColor","isVisible","getLastActivePaneCompositeId","hideActivePaneComposite","getPaneComposite","doOpenViewlet","whenInstalledExtensionsRegistered","getPaneComposites","sort","v1","v2","order","activeViewlet","contextMenuActions","getContextMenuActions","showContextMenu","getAnchor","skipTelemetry","toJSON","VIEWS_LOG_ID","VIEWS_LOG_NAME","getViewsLogFile","environmentService","windowLogsPath","getViewsStateStorageId","viewContainerStorageId","original","category","Developer","f1","servicesAccessor","loggerService","outputService","setVisibility","showChannel","ViewDescriptorsState","viewContainerName","workbenchEnvironmentService","_onDidChangeStoredState","onDidChangeStoredState","logger","createLogger","hidden","globalViewsStateStorageId","workspaceViewsStateStorageId","onDidChangeValue","onDidStorageChange","state","initialize","updateState","viewDescriptors","updateWorkspaceState","updateGlobalState","storedViewsStates","getStoredWorkspaceState","viewDescriptor","viewState","collapsed","isHidden","visibleWorkspace","size","workspace","Object","keys","JSON","stringify","storedGlobalState","getStoredGlobalState","canToggleVisibility","visibleGlobal","setStoredGlobalState","key","scope","globalViewsStatesValue","getStoredGlobalViewsStatesValue","_globalViewsStatesValue","storedViewsVisibilityStates","storedWorkspaceViewsStates","changedStates","storedState","info","workspaceViewState","active","changedState","viewStates","workspaceViewsStates","workspaceVisibilityStates","parseStoredGlobalState","values","hasDuplicates","parse","storedValue","reduce","result","has","setStoredGlobalViewsStatesValue","ViewContainerModel","_title","icon","_icon","keybindingId","_keybindingId","allViewDescriptors","viewDescriptorItems","item","visibleViewDescriptors","isViewDescriptorVisible","viewContainer","contextKeys","_onDidChangeContainerInfo","onDidChangeContainerInfo","_onDidChangeAllViewDescriptors","onDidChangeAllViewDescriptors","_onDidChangeActiveViewDescriptors","onDidChangeActiveViewDescriptors","_onDidAddVisibleViewDescriptors","onDidAddVisibleViewDescriptors","_onDidRemoveVisibleViewDescriptors","onDidRemoveVisibleViewDescriptors","_onDidMoveVisibleViewDescriptors","onDidMoveVisibleViewDescriptors","onDidChangeContext","affectsSome","viewDescriptorsState","storageId","items","updateVisibility","updateContainerInfo","useDefaultContainerInfo","alwaysUseContainerInfo","some","v","ViewsRegistry","getViewContainer","containerTitle","titleChanged","containerIcon","iconChanged","isEqualIcon","openCommandActionDescriptor","find","keybindingIdChanged","isUri","isThemeIcon","isEqual","viewDescriptorItem","viewDescriptorItemsToHide","findAndIgnoreIfNotFound","removed","visibleIndex","updateViewDescriptorItemVisibility","index","broadCastRemovedVisibleViewDescriptors","added","foundViewDescriptor","broadCastAddedVisibleViewDescriptors","isViewDescriptorVisibleWhenActive","isCollapsed","setCollapsed","getSize","setSizes","newSizes","move","from","to","fromIndex","findIndex","toIndex","fromViewDescriptor","toViewDescriptor","broadCastMovedViewDescriptors","addedViewDescriptorStates","addedItems","addedViewDescriptorState","when","hideByDefault","contextMatchesRules","compareViewDescriptors","bind","addedActiveItems","addedVisibleDescriptors","removedItems","removedActiveDescriptors","removedVisibleDescriptors","i","splice","indexOf","removedActiveItems","wasActive","visibleWhenActive","a","b","join","reason","getViewOrder","getGroupOrderResult","viewOrder","MAX_VALUE","group","getViewContainerStorageId","viewContainerId","ViewDescriptorService","VIEWS_CUSTOMIZATIONS","COMMON_CONTAINER_ID_PREFIX","viewContainers","viewContainersRegistry","all","telemetryService","_onDidChangeContainer","onDidChangeContainer","_onDidChangeLocation","onDidChangeLocation","_onDidChangeContainerLocation","onDidChangeContainerLocation","viewContainerModels","viewsVisibilityActionDisposables","_onDidChangeViewContainers","onDidChangeViewContainers","activeViewContextKeys","movableViewContextKeys","defaultViewLocationContextKeys","defaultViewContainerLocationContextKeys","ViewContainersRegistry","viewsRegistry","migrateToViewsCustomizationsStorage","viewContainersCustomLocations","entries","viewCustomizations","viewContainerLocations","viewDescriptorsCustomLocations","viewLocations","viewContainerBadgeEnablementStates","onDidRegisterViewContainer","onViewsRegistered","views","onDidRegisterViews","onViewsDeregistered","onDidDeregisterViews","onDidChangeDefaultContainer","location","getViewContainerLocation","onDidDeregisterViewContainer","then","whenExtensionsRegistered","viewContainerLocationsValue","viewDescriptorLocationsValue","viewDescriptorLocations","viewsCustomizations","containerId","registerGroupedViews","groupedViews","isGeneratedContainerId","viewContainerLocation","registerGeneratedViewContainer","viewsToAdd","view","vd","addViews","deregisterGroupedViews","removeViews","moveOrphanViewsToDefaultLocation","viewId","getViewDescriptorById","cleanUpGeneratedViewContainer","saveViewCustomizations","registerViewsVisibilityActions","bufferChangeEvents","regroupedViews","regroupViews","getOrCreateMovableViewContextKey","canMoveView","startsWith","viewsByContainer","correctContainerId","containerViews","getView","getViewLocationById","getViewContainerByViewId","getDefaultContainerById","getDefaultViewContainerLocation","getOrRegisterViewContainerModel","getViewContainerById","moveViewContainerToLocation","requestedIndex","moveViewContainerToLocationWithoutSaving","getViewContainerBadgeEnablementState","setViewContainerBadgeEnablementState","badgesEnabled","moveViewToLocation","moveViewsToContainer","visibilityState","moveViewsWithoutSaving","reportMovedViews","viewContainerModel","defaultContainer","currentContainer","defaultContainerLocation","currentContainerLocation","isViewContainerRemovedPermanently","viewsToMove","includes","containerToString","extensionId","oldLocation","newLocation","viewCount","fromContainer","toContainer","fromLocation","toLocation","publicLog2","Expand","isGeneratedViewContainer","isDefaultViewContainerLocation","getOrCreateDefaultViewContainerLocationContextKey","getViewsByContainer","deregisterViewContainer","existingId","generateContainerId","registerViewContainer","ctorDescriptor","mergeViewWithContainerWhenSingleView","hideIfEmpty","doNotRegisterOpenCommand","getStoredViewCustomizationsValue","onDidViewCustomizationsStorageChange","_viewCustomizations","newViewContainerCustomizations","newViewDescriptorCustomizations","viewContainersToMove","currentLocation","defaultLocation","prevViewContainer","newViewContainer","Default","badgeEnablementState","setStoredViewCustomizationsValue","getViews","disposables","onDidChangeActiveViews","changed","onDidChangeVisibleViews","deleteAndDispose","registerResetViewContainerAction","viewsToRegister","getOrCreateActiveViewContextKey","getOrCreateVisibleViewContextKey","registerViewsVisibilityActionsForContainer","any","remoteAuthority","viewPaneContainerId","precondition","true","false","toggled","menu","and","ViewContainerTitleContext","ViewTitleContext","or","runInViewPaneContainer","serviceAccessor","viewPaneContainer","toggleViewVisibility","isDefaultContainer","getOrCreateDefaultViewLocationContextKey","activeContextKeyId","contextKey","movableViewContextKeyId","defaultViewLocationContextKeyId","defaultViewContainerLocationContextKeyId","GLOBAL_ACTIVITY_ID","ACCOUNTS_ACTIVITY_ID","ViewContainerActivityByView","activityService","activity","activityDisposable","update","setActivity","clearActivity","showViewContainerActivity","ActivityService","paneCompositeService","viewActivities","badge","clazz","showActivity","showViewActivity","maybeItem","showAccountsActivity","showGlobalActivity","ViewContainerActivityAction","preventDoubleClickDelay","paneCompositePart","configurationService","lastRun","updateActivity","MouseEvent","button","now","Date","sideBarVisible","focusBehavior","getValue","preserveFocus","logAction","activate","viewletId","AbstractGlobalActivityActionViewItem","contextMenuActionsProvider","hoverService","menuService","MOUSE_DOWN","actions","resolveContextMenuActions","onHide","KEY_UP","Tap","MenuActivityActionViewItem","menuId","colors","hoverOptions","hasPopup","createMenu","resolveMainMenuActions","anchorAlignment","anchorAxisAlignment","menuActionOptions","renderShortTitle","_disposable","primary","secondary","AccountsActivityActionViewItem","ACCOUNTS_VISIBILITY_PREFERENCE_KEY","activityHoverOptions","authenticationService","productService","secretStorageService","credentialsService","logService","AccountsContext","groupedAccounts","problematicProviders","Set","initialized","sessionFromEmbedder","onDidRegisterAuthenticationProvider","addAccountsFromProvider","onDidUnregisterAuthenticationProvider","onDidChangeSessions","addOrUpdateAccount","providerId","account","removeAccount","providerIds","getProviderIds","results","Promise","allSettled","status","accountsMenu","providers","otherCommands","menus","noAccountsAvailableAction","providerLabel","accounts","providerSubMenuActions","manageTrustedExtensionsForAccount","canSignOut","signOutAction","sessionsForAccount","getSessions","s","removeAccountSessions","providerSubMenu","providerUnavailableAction","concat","unshift","existingAccount","sessions","session","GlobalActivityActionViewItem","userDataProfileService","GlobalActivity","onDidChangeCurrentProfile","updateProfileBadge","profileBadge","profileBadgeContent","currentProfile","isDefault","getBadge","substring","toUpperCase","updateBadge","computeTitle","PlaceHolderViewContainerActivityAction","PlaceHolderToggleCompositePinnedAction","compositeBar","classNames","PlaceHolderToggleCompositeBadgeAction","SwitchSideBarViewAction","desc","offset","accessor","visibleViewletIds","getVisiblePaneCompositeIds","targetViewletId","View","focusPart","collector","activityBarActiveBorderColor","addRule","activityBarActiveFocusBorderColor","activityBarActiveBackgroundColor","outline","focusBorderColor","CompositeDragAndDrop","targetContainerLocation","moveComposite","getItems","drop","data","targetCompositeId","originalEvent","before","dragData","getData","getTargetIndex","viewToMove","newContainer","openView","onDragEnter","canDrop","onDragOver","targetId","before2d","horizontallyBefore","verticallyBefore","CompositeBar","model","CompositeBarModel","visibleComposites","compositeSizeInBar","computeSizes","visibleItems","getCompositeBarItems","setCompositeBarItems","setItems","updateCompositeSwitcher","getPinnedComposites","pinnedItems","getVisibleComposites","actionBarDiv","insertDropBefore","compositeSwitcherBar","compositeOverflowActionViewItem","findItem","pinnedAction","toggleBadgeAction","getContextMenuActionsForComposite","dndHandler","ariaLabel","ariaRole","animated","preventLoopNavigation","triggerKeys","keyDown","registerTarget","eventData","target","updateFromDragging","insertAtFront","validDropTarget","dragAndDropData","dataTransfer","onDragLeave","onDragEnd","onDrop","rect","getBoundingClientRect","posX","clientX","posY","clientY","showFeedback","front","isDragging","toggle","recomputeSizes","addComposite","isPinned","unpin","hideComposite","resetActiveComposite","activateComposite","previousActiveItem","activeItem","pinned","deactivateComposite","deactivate","addActivity","removeActivity","pin","open","setPinned","areBadgesEnabled","toggleBadgeEnablement","activityAction","setBadge","getClass","getDefaultCompositeId","cid","toCompositeId","setTimeout","getAction","compositeSize","currentItemsLength","viewItems","getHeight","getWidth","pull","compositesToShow","maxVisible","totalComposites","limit","every","removedComposite","pop","overflowActionSize","compositeOverflowAction","compositesToRemove","reverse","actionViewItem","newIndex","currentIndex","showMenu","getOverflowingComposites","getOnCompositeClickAction","overflowingIds","checked","_items","hasChanges","existingItems","newItem","existingItem","createCompositeBarItem","getActivityAction","getCompositePinnedAction","getCompositeBadgeAction","rIndex","sourceItem","stack","MenubarState","MenuBar","OVERFLOW_INDEX","menuStyle","_mnemonicsInUse","openedViaKeyboard","awaitingAltRelease","ignoreNextMouseUp","updatePending","numMenusShown","overflowLayoutScheduled","isCompact","mnemonics","_focusState","VISIBLE","_onVisibilityChange","_onFocusStateChange","createOverflowMenu","menuUpdater","onWillRun","setUnfocusedState","getInstance","onModifierKeyToggled","eventHandled","toLocaleLowerCase","tabNav","focusPrevious","focusNext","isFocused","isOpen","ctrlKey","enableMnemonics","mnemonicsInUse","menuIndex","onMenuTriggered","window","FOCUS_IN","relatedTarget","contains","focusToReturn","FOCUS_OUT","altKey","defaultPrevented","updateMnemonicVisibility","arg","menuBarMenu","cleanMenuLabel","mnemonicMatches","exec","mnemonic","registerMnemonic","buttonElement","titleElement","insertBefore","overflowMenu","updateLabels","focusedMenu","focusState","OPEN","holder","initialTarget","leftButton","MOUSE_UP","MOUSE_ENTER","isCurrentMenu","cleanupCustomMenu","showCustomMenu","nls","asCSSSelector","menuBarMore","visibility","compactMode","Right","Left","k","updateMenu","menuToUpdate","blur","hasOverflow","right","clientHeight","toggleFocus","FOCUSED","updateOverflowAction","overflowMenuOnlyClass","sizeAvailable","offsetWidth","currentSize","full","prevNumMenusShown","showableMenus","idx","compactMenuActions","getCompactMenuActions","nextElementSibling","cleanLabel","strings","lastIndex","escMatch","replaceDoubleEscapes","str","replace","append","substr","trim","hideMenubar","display","showMenubar","schedule","HIDDEN","browser","newFocusedIndex","children","child","textDecoration","alwaysOnMnemonics","shouldAltKeyFocus","disableAltFocus","onVisibilityChange","onFocusStateChange","clicked","modifierKeyStatus","allModifiersReleased","shiftKey","metaKey","toEnum","code","lastKeyPressed","lastKeyReleased","parentElement","widget","selectFirst","actualMenuIndex","customMenu","menuHolder","titleBoundingRect","titleBoundingRectZoom","clientWidth","bottom","menuOptions","getKeybinding","getAttribute","expandDirection","useEventAsContext","menuWidget","onDidCancel","trigger","isFolderBackupInfo","curr","hasOwnProperty","inRecentFilesPickerContextKey","BaseOpenRecentAction","removeFromRecentlyOpened","asClassName","removeClose","tooltip","dirtyRecentlyOpenedFolder","closeDirty","alwaysVisible","dirtyRecentlyOpenedWorkspace","workspacesService","quickInputService","contextService","labelService","modelService","languageService","hostService","dialogService","recentlyOpened","getRecentlyOpened","dirtyWorkspacesAndFolders","getDirtyWorkspaces","hasWorkspaces","dirtyFolders","dirtyWorkspaces","dirtyWorkspace","folderUri","configPath","recentFolders","recentWorkspaces","recent","workspaces","workspacePicks","isDirty","toQuickPick","dirtyWorkspaceOrFolder","filePicks","files","p","firstEntry","autoFocusSecondEntry","isCurrentWorkspace","keyMods","workspaceSeparator","fileSeparator","picks","pick","placeHolder","matchOnDescription","onKeyMods","mods","quickNavigate","isQuickNavigate","keybindings","lookupKeybindings","hideInput","onDidTriggerItemButton","removeRecentlyOpened","resource","removeItem","isDirtyWorkspace","confirmed","confirm","message","detail","openWindow","openable","cancel","forceNewWindow","ctrlCmd","forceReuseWindow","alt","iconClasses","fullLabel","isWorkspace","getIconClasses","FOLDER","getWorkspaceLabel","verbose","ROOT_FOLDER","workspaceUri","fileUri","FILE","getUriLabel","parentPath","description","buttons","OpenRecentAction","ID","mnemonicTitle","comment","File","weight","mac","MenubarRecentMenu","ReloadWindowAction","reload","recentFilesPickerContext","quickPickNavigateNextInRecentFilesPickerId","registerCommandAndKeybindingRule","handler","quickPickNavigatePreviousInRecentFilesPicker","registerCommand","setting","inspect","userValue","updateValue","appendMenuItem","MenubarMainMenu","submenu","MenubarFileMenu","MenubarEditMenu","MenubarSelectionMenu","MenubarViewMenu","MenubarGoMenu","MenubarTerminalMenu","MenubarHelpMenu","MenubarPreferencesMenu","MenubarControl","MAX_MENU_RECENT_ENTRIES","updateService","preferencesService","accessibilityService","commandService","topLevelTitles","mainMenu","mainMenuDisposables","setupMainMenu","doUpdateMenubar","notifyUserOfCustomMenubarAccessibility","onDidChangeFocus","onDidChangeWindowFocus","onDidChangeConfiguration","onConfigurationUpdated","onStateChange","onUpdateStateChange","onDidChangeRecentlyOpened","onDidUpdateKeybindings","updateMenubar","onDidChangeFormatters","mainMenuActions","mainMenuAction","emitEventsForSubmenuChanges","calculateActionLabel","onUpdateKeybindings","getOpenRecentActions","createOpenRecentMenuAction","hasFocus","affectsConfiguration","menubarHidden","uri","commandId","ret","browserEvent","openInNewWindow","assign","hasBeenNotified","getBoolean","usingCustomMenubar","isScreenReaderOptimized","prompt","Info","openUserSettings","query","CustomMenubarControl","focusInsideMenubar","pendingFirstTimeUpdate","webNavigationMenu","MenubarHomeMenu","reinstallDisposables","registerActions","firstTime","setupCustomMenubar","menubar","getUpdateAction","checkForUpdates","downloadUpdate","applyUpdate","quitAndInstall","currentMenubarVisibility","currentDisableMenuBarAltFocus","settingValue","disableMenuBarAltBehavior","insertActionsBefore","nextAction","updateAction","currentEnableMenuBarMnemonics","enableMenuBarMnemonics","currentCompactMenuMode","toActionsArray","shouldForwardArgs","getMenuBarOptions","alwaysUnderlineAccessKeys","val","focused","updateActions","menuActions","topLevelTitle","menuItem","submenuActions","newAction","class","executeCommand","webActions","getWebNavigationActions","webNavigationActions","groups","RESIZE","pointerEvents","onDidChangeFullscreen","getMenubarItemsDimensions","ActivitybarPart","PINNED_VIEW_CONTAINERS","PLACEHOLDER_VIEW_CONTAINERS","ACTION_HEIGHT","ACCOUNTS_ACTION_INDEX","GEAR_ICON","settingsGear","ACCOUNTS_ICON","globalActivity","accountsActivity","compositeActions","viewContainerDisposables","keyboardNavigationDisposables","hasExtensionsRegistered","enabledViewContainersContextKeys","_cachedViewContainers","cachedViewContainer","cachedViewContainers","shouldBeHidden","createCompositeBar","onDidRegisterViewContainers","getViewContainers","cachedItems","getActivityHoverOptions","getCompositeActions","badgeAction","fillExtraContextMenuActions","menuBarVisibility","menuBarContainer","accountsVisibilityPreference","invokeFunction","hidePart","getActivitybarItemColors","position","viewToReset","onDidChangeViewContainerLocation","onDidChangeViewContainerVisibility","onDidRegisterExtensions","saveCachedViewContainers","onDidStorageValueChange","installMenubar","uninstallMenubar","onDidViewContainerVisible","showOrHideViewContainer","viewContainerOrActionId","activityId","activityCache","updateGlobalActivity","removeGlobalActivity","globalActivityAction","accountsActivityAction","cumulativeNumberBadge","getCumulativeNumberBadge","numberActivities","number","getDescription","menuBar","registerKeyboardNavigationListeners","content","prepend","compositeBarContainer","globalActivitiesContainer","kbEvent","globalActivityActionBar","createGlobalActivityActionBar","asClassNameArray","toggleAccountsActivity","toActivity","cachedComposite","visibleViewContainer","iconUrl","cssUrl","hash","iconId","digest","createKey","viewContainerOrId","isBuiltin","deserialize","getPinnedPaneCompositeIds","pinnedCompositeIds","background","activeForegroundColor","inactiveForegroundColor","activeBorderColor","activeBackground","badgeBackground","badgeForeground","dragAndDropBorder","activeBackgroundColor","inactiveBackgroundColor","activeBorderBottomColor","availableHeight","pinnedViewContainersValue","getStoredPinnedViewContainersValue","_pinnedViewContainersValue","newCompositeItems","compositeItems","serialize","storeCachedViewContainersState","getPinnedViewContainers","placeholderViewContainer","getPlaceholderViewContainers","cached","themeIcon","revive","setPinnedViewContainers","setPlaceholderViewContainers","pinnedViewContainers","setStoredPinnedViewContainersValue","placeholderViewContainersValue","placeholderViewContainers","_placeholderViewContainersValue","getStoredPlaceholderViewContainersValue","placeholderViewContainesValue","setStoredPlaceholderViewContainersValue","BasePanelPart","MIN_COMPOSITE_BAR_WIDTH","preferredHeight","partId","activePanelSettingsKey","pinnedPanelsKey","placeholdeViewContainersKey","panelRegistryId","activePanelContextKey","panelFocusContextKey","panelOptions","panelDisposables","blockOpeningPanel","extensionsRegistered","panelRegistry","panel","getCachedPanels","useIcons","onDidRegisterPanels","globalActions","C","PanelTitle","AuxiliaryBarTitle","updateGlobalToolbarActions","panels","cachedPanels","cachedPanel","activePanel","newPanel","doOpenPanel","onDidDeregisterPanel","panelId","defaultPanelId","cachedTitle","layoutCompositeBar","saveCachedPanels","isRestored","layoutEmptyMessage","onPanelOpen","onPanelClose","foundPanel","panelDescriptor","createEmptyPanelMessage","emptyPanelMessageElement","messageElement","toString","globalTitleActionsContainer","globalToolBar","borderTopColor","p1","p2","contentDimension","availableWidth","getToolbarWidth","getPrimaryActions","getItemsWidth","cachedPanelsValue","getStoredCachedPanelsValue","_cachedPanelsValue","placeholders","registeredPanels","serialized","registered","cachedViewletsValue","setStoredCachedViewletsValue","PanelPart","Panels","getPanelPosition","isPanelMaximized","panelPositionMenu","PanelPositionMenu","panelAlignMenu","PanelAlignmentMenu","positionActions","alignActions","dimensions","AuxiliaryBarPart","Auxiliary","currentPositionRight","PaneCompositeParts","paneCompositeParts","paneCompositeSelectorParts","panelPart","sideBarPart","auxiliaryBarPart","activityBarPart","eventDisposables","loc","getPartByLocation","getSelectorPartByLocation","isDisposed","_isDisposed","isMouseIn","_lockMouseTracker","domNode","_hover","onDispose","_onDispose","onRequestLayout","_onRequestLayout","anchor","_hoverPosition","x","_x","y","_y","isLocked","_isLocked","_hoverContainer","_keybindingService","_configurationService","_openerService","_instantiationService","_messageListeners","_forcePosition","_enableFocusTraps","_addedFocusTrap","_linkHandler","linkHandler","url","isTrusted","_target","ElementHoverTarget","_hoverPointer","showPointer","compact","skipFadeInAnimation","additionalClasses","forcePosition","trapFocus","hoverPosition","onmousedown","onkeydown","rowElement","contentsElement","whiteSpace","HTMLElement","markdown","mdRenderer","codeBlockFontFamily","fontFamily","actionHandler","callback","asyncRenderCallback","statusBarElement","actionsElement","hideOnHover","showHoverHint","infoElement","mouseTrackerTargets","targetElements","mouseTracker","CompositeMouseTracker","onMouseOut","mouseTracker2Targets","addFocusTrap","firstContainerFocusElement","lastContainerFocusElement","findLastFocusableChild","beforeContainerFocusElement","afterContainerFocusElement","root","hasChildNodes","childNodes","node","nodeType","ELEMENT_NODE","parsedNode","recursivelyFoundElement","maxHeight","targetBounds","zoom","boundingRect","getZoomAccountedBoundingClientRect","targetRect","center","adjustHorizontalHoverPosition","adjustVerticalHoverPosition","adjustHoverMaxHeight","padding","margin","paddingLeft","marginLeft","paddingRight","marginRight","paddingTop","marginTop","paddingBottom","marginBottom","computeXCordinate","computeYCordinate","setHoverPointerPosition","hoverWidth","documentElement","clientLeft","innerHeight","maxWidth","scrollHeight","extraRightPadding","verticalScrollbarSize","hoverHeight","round","pointerLeftPosition","pointerX","_onMouseOut","_isMouseIn","_elements","n","onmouseover","_onTargetMouseOver","onmouseleave","_onTargetMouseLeave","_clearEvaluateMouseStateTimeout","_evaluateMouseState","_mouseTimeout","_fireIfMouseOutside","clearTimeout","_element","HoverService","_contextViewService","_accessibilityService","onDidShowContextMenu","hideHover","showHover","skipLastFocusedUpdate","getHoverOptionsIdentity","_currentHoverOptions","_lastHoverOptions","activeElement","_lastFocusedElementBeforeOpen","hoverDisposables","hover","provider","showContextView","HoverContextViewDelegate","focusedElement","_keyDown","hideOnKeyDown","_keyUp","observer","IntersectionObserver","_intersectionChange","threshold","firstTargetElement","observe","disconnect","_currentHover","hideContextView","isIntersecting","showAndFocusLastHover","resolveKeyboardEvent","getSingleModifierDispatchChords","softDispatch","kind","anchorPosition","_focus","hoverBorder","transparent","UNDO_REDO_SOURCE","ExplorerService","EXPLORER_FILE_CHANGES_REACT_DELAY","fileService","clipboardService","editorService","uriIdentityService","bulkEditService","progressService","filesConfigurationService","fileChangeEvents","config","onDidRunOperation","onFileChangesScheduler","events","types","sortOrder","shouldRefresh","roots","r","doesFileEventAffect","rawAdded","findClosest","getChild","refresh","onDidFilesChange","editable","isScheduled","onDidChangeFileSystemProviderRegistrations","onDidChangeFileSystemProviderCapabilities","affected","scheme","forgetChildren","setTreeInput","onDidChangeRoots","revealExcludeMatcher","configuration","revealExcludes","explorer","autoRevealExclude","getRevealExcludes","sortOrderConfiguration","lexicographicOptions","sortOrderLexicographicOptions","registerView","contextProvider","getContext","respectMultiSelection","ignoreNestedChildren","isItemCollapsed","nestedChildren","applyBulkEdit","edit","cancellationTokenSource","promise","withProgress","progressLocation","progressLabel","cancellable","delay","apply","undoRedoSource","undoLabel","token","confirmBeforeUndo","hasViewFocus","findClosestRoot","parentRoots","extUri","isEqualOrParent","first","second","path","setEditable","stat","isEditing","isEditable","setToCopy","cut","previouslyCutItems","cutItems","writeResources","itemsCopied","isCut","getEditable","getEditableData","select","reveal","ignoreRevealExcludes","fileStat","shouldAutoRevealItem","selectResource","resolve","resolveTo","resolveMetadata","modelStat","mergeLocalWithDisk","activeEditor","autoReveal","shouldDeepRefresh","fileNesting","isOperation","addedElement","parentResource","parents","findAll","isDirectoryResolved","childElement","removeChild","addChild","oldResource","newElement","oldParentResource","newParentResource","modelElements","sameParentMove","nestedParent","modelElement","rename","newParents","oldParent","oldNestedParent","ignore","matches","currentItem","configSortOrder","configLexicographicOptions","_name","isItemVisible","isDirectory","separatorBorder","orthogonal","LayoutController","isLayoutEnabled","validateIndex","numChildren","abs","BranchNode","_size","orthogonalSize","_orthogonalSize","absoluteOffset","_absoluteOffset","absoluteOrthogonalOffset","_absoluteOrthogonalOffset","styles","_styles","minimumSize","minimumOrthogonalSize","maximumSize","maximumOrthogonalSize","priorities","proportionalLayout","splitview","_boundarySashes","start","end","orthogonalStart","orthogonalEnd","orthogonalStartSash","orthogonalEndSash","last","edgeSnapping","_edgeSnapping","updateSplitviewEdgeSnappingEnablement","layoutController","splitviewProportionalLayout","childDescriptors","absoluteOrthogonalSize","_onDidScroll","onDidScrollDisposable","onDidScroll","childrenChangeDisposable","_onDidSashReset","onDidSashReset","splitviewSashResetDisposable","childrenSashResetDisposable","childDescriptor","LeafNode","absoluteSize","updateChildrenEvents","ctx","skipLayout","addView","updateBoundarySashes","onDidChildrenChange","sizing","removeView","moveChild","moveView","swapChildren","swapViews","resizeChild","resizeView","isChildSizeMaximized","isViewSizeMaximized","distributeViewSizes","recursive","getChildSize","getViewSize","isChildVisible","isViewVisible","setChildVisible","setViewVisible","getChildCachedVisibleSize","getViewCachedVisibleSize","onDidChildrenSashReset","signal","trySet2x2","other","firstChild","secondChild","otherFirstChild","otherSecondChild","linkedWidthNode","linkedHeightNode","mySash","otherSash","linkedSash","startSnappingEnabled","endSnappingEnabled","_linkedWidthNode","_onDidLinkedWidthNodeChange","input","_onDidViewChange","_onDidSetLinkedNode","_linkedHeightNode","_onDidLinkedHeightNodeChange","cachedWidth","cachedHeight","cachedTop","cachedLeft","onDidChangeViewConstraints","onDidSetViewSize","latch","_","createLatchedOnDidChangeViewEvent","_layout","flipNode","totalSize","childSize","newSize","GridView","_root","oldRoot","onDidSashResetRelay","disposable2x2","orthogonalOffset","rest","pathToParent","getNode","grandParent","parentIndex","newSiblingSize","newSiblingCachedVisibleSize","Invisible","newParent","newSibling","Split","sibling","isSiblingVisible","sizes","parentLocation","fromRest","fromParent","fromSize","fromNode","toRest","toParent","toSize","toNode","parentSize","grandParentSize","maximizeViewSize","ancestors","_getViews","json","deserializer","_deserialize","_deserializeNode","serializedChild","fromJSON","cachedVisibleSize","box","getViewMap","isGridBranchNode","getGridNode","getBoxBoundary","direction","getDirectionOrientation","range","getLocationOrientation","rootOrientation","getRelativeLocation","getGridLocation","test","el","firstElementChild","lastElementChild","indexInParent","Sizing","Distribute","Auto","Grid","gridview","didLayout","_addView","newView","referenceView","referenceLocation","getViewLocation","viewSize","addViewAt","gridViewSizing","sourceLocation","sourceParentLocation","targetLocation","targetParentLocation","moveViewTo","cachedViewSize","getNeighborViews","wrap","boundary","boxNode","one","findAdjacentBoxLeafNodes","oppositeDirection","resizeToPreferredSize","SerializableGrid","arguments","initialLayoutContext","serializeNode","gridDescriptor","createSerializedGrid","isGridBranchNodeDescriptor","nodeDescriptor","sanitizeGridNodeDescriptor","rootNode","totalDefinedSize","totalDefinedSizeCount","eachUndefinedSize","createSerializedNode","getDimensions","childrenDimensions","d","BreadcrumbsItem","BreadcrumbsWidget","horizontalScrollbarSize","separatorIcon","_disposables","_onDidSelectItem","_onDidFocusItem","_onDidChangeFocus","onDidSelectItem","onDidFocusItem","Array","_nodes","_freeNodes","_enabled","_focusedItemIdx","_selectedItemIdx","_domNode","_scrollable","vertical","horizontal","useShadows","scrollYToX","_separatorIcon","_onClick","styleElement","_style","setHorizontalScrollbarSize","updateOptions","_a","_pendingLayout","dim","_updateDimensions","_updateScrollbar","setRevealOnScroll","breadcrumbsBackground","breadcrumbsForeground","breadcrumbsFocusForeground","breadcrumbsFocusAndSelectionForeground","breadcrumbsHoverForeground","domFocus","isDOMFocused","candidate","getFocused","setFocused","payload","focusPrev","nth","_reveal","revealLast","minimal","getScrollDimensions","scrollLeft","getScrollPosition","offsetLeft","setScrollPosition","getSelection","setSelection","_select","prefix","_render","newError","didChange","_renderItem","free","err","console","iconContainer","FileElement","OutlineElement2","BreadcrumbsModel","editor","_workspaceService","_outlineService","_currentOutline","_outlineDisposables","_onDidUpdate","onDidUpdate","_cfgFilePath","FilePath","_cfgSymbolPath","SymbolPath","onDidChangeWorkspaceFolders","_onDidChangeWorkspaceFolders","_fileInfo","_initFilePathInfo","_bindToEditor","onDidChangeControl","isRelative","Boolean","folder","getElements","breadcrumbsElements","breadcrumbsDataSource","getBreadcrumbElements","isEmpty","untitled","getWorkspaceFolder","uriPrefix","prevPathLength","getWorkbenchState","newCts","createOutline","isCancellationRequested","catch","BreadcrumbsPicker","_themeService","_fakeEvent","UIEvent","_onWillPickElement","onWillPickElement","_previewDispoables","_tree","show","arrowSize","arrowOffset","getColorTheme","_arrow","_treeContainer","borderRadius","boxShadow","border","_layoutInfo","inputHeight","_createTree","onDidOpen","editorOptions","sideBySide","_revealElement","_previewElement","elements","onDidChangeContentHeight","_setInput","headerHeight","treeHeight","contentHeight","totalHeight","restoreViewState","FileVirtualDelegate","getTemplateId","FileIdentityProvider","FileDataSource","_fileService","hasChildren","getChildren","folders","FileRenderer","_labels","_configService","templateId","renderTemplate","supportHighlights","renderElement","templateData","fileDecorations","fileKind","setFile","hidePath","filterData","extraClasses","disposeTemplate","FileNavigationLabelProvider","getKeyboardNavigationLabel","FileAccessibilityProvider","getWidgetAriaLabel","getAriaLabel","FileFilter","configService","_cachedExpressions","FileExcludes","getWorkspace","excludesConfig","adjustedConfig","pattern","glob","_parentVisibility","expression","FileSorter","compare","BreadcrumbsFilePicker","_editorService","onFileIconThemeChange","fileIconTheme","hasFileIcons","hasFolderIcons","hidesExplorerArrows","onDidFileIconThemeChange","getFileIconTheme","labels","multipleSelectionSupport","sorter","identityProvider","keyboardNavigationLabelProvider","accessibilityProvider","showNotFoundMessage","overrideStyles","listBackground","tree","focusElement","setInput","setFocus","isFile","openEditor","OutlineTreeSorter","comparator","_order","compareByName","compareByType","compareByPosition","BreadcrumbsOutlinePicker","delegate","renderers","treeDataSource","collapseByDefault","expandOnlyOnTwistieClick","captureViewState","getInput","preview","OutlineItem","showFileIcons","showSymbolIcons","renderer","template","depth","visibleChildrenCount","visibleChildIndex","collapsible","FileItem","hideIcon","showDecorationColors","badges","toLowerCase","chevronRight","BreadcrumbsControl","HEIGHT","SCROLLBAR_SIZES","default","large","Payload_Reveal","Payload_RevealAside","Payload_Pick","CK_BreadcrumbsPossible","CK_BreadcrumbsVisible","CK_BreadcrumbsActive","_options","_editorGroup","_contextKeyService","_quickInputService","_labelService","breadcrumbsService","_breadcrumbsDisposables","_model","_breadcrumbsPickerShowing","_cfUseQuickPick","UseQuickPick","_cfShowIcons","Icons","_cfTitleScrollbarSizing","TitleScrollbarSizing","widgetStyles","_widget","_onSelectEvent","_onFocusEvent","_updateCkBreadcrumbsActive","_ckBreadcrumbsPossible","_ckBreadcrumbsVisible","_ckBreadcrumbsActive","register","getCanonicalUri","supportSideBySide","PRIMARY","wasHidden","hasProvider","fileInfoUri","getOriginalUri","activeEditorPane","getSeparator","authority","updateBreadcrumbs","showIcons","listener","configListener","updateScrollbarSizing","updateScrollbarSizeListener","source","_breadcrumbsPickerIgnoreOnceItem","_getEditorGroup","_revealInEditor","quickAccess","picker","pickerAnchor","selectListener","didPick","zoomListener","blurListener","maxInnerWidth","innerWidth","pickerWidth","pickerArrowSize","pickerArrowOffset","maxPickerArrowOffset","posx","focusAndSelectHandler","getWidget","activeGroup","condition","CommandPalette","MenubarAppearanceMenu","NotebookToolbar","StickyScrollContext","IsEnabled","args","not","instant","isEnabled","editors","lastFocusedList","getFocus","outlineKind","EditorCommandsContextActionRunner","mergedContext","TitleControl","editorResolverService","editorTransfer","groupTransfer","treeItemsTransfer","breadcrumbsControl","editorToolBarMenuDisposables","resourceContext","editorPinnedContext","editorIsFirstContext","editorIsLastContext","editorStickyContext","editorAvailableEditorIds","editorCanSplitInGroupContext","sideBySideEditorContext","groupLockedContext","renderDropdownAsChildElement","createBreadcrumbsControl","handleBreadcrumbsEnablementChange","createEditorActionsToolBar","groupId","editorActionsToolbar","resetMenu","EditorTitle","maxNumberOfItems","menuAsChild","updateEditorActionsToolbar","prepareEditorActions","getEditorActions","isFirst","isLast","isSticky","hasCapability","typeId","scopedContextKeyService","getEditorPaneAwareContextKeyService","titleBarMenu","eventDebounceDelay","shouldInlineGroup","clearEditorActionsToolbar","enableGroupDragging","DRAG_START","setData","prototype","effectAllowed","hasDataTransfer","partOptions","showTabs","doFillResourceDataTransfers","getEditors","TEXT","String","getName","count","DRAG_END","clearData","onContextMenu","currentResourceContext","currentPinnedContext","currentEditorIsFirstContext","currentEditorIsLastContext","currentStickyContext","currentGroupLockedContext","currentEditorCanSplitContext","currentSideBySideEditorContext","currentEditorAvailableEditorIds","EditorTitleContext","editorIndex","getIndexOfEditor","getKeybindingLabel","TabsTitleControl","TAB_WIDTH","shrink","fit","TAB_HEIGHT","DRAG_OVER_OPEN_TAB_THRESHOLD","MOUSE_WHEEL_EVENT_THRESHOLD","MOUSE_WHEEL_DISTANCE_THRESHOLD","pathService","editorGroupService","treeViewsDragAndDropService","closeEditorAction","LABEL","unpinEditorAction","tabResourceLabels","tabLabels","tabActionBars","tabDisposables","available","layoutScheduler","lastMouseWheelEventTime","isMouseOverTabs","updateEditorLabelScheduler","doUpdateEditorLabels","onDidChangeDecorations","doHandleDecorationsChange","tabsAndActionsContainer","tabsContainer","tabSizingFixedDisposables","updateTabSizing","tabsScrollbar","createTabsScrollbar","registerTabsContainerListeners","editorToolbarContainer","breadcrumbsContainer","showPlaceholder","scrollable","getTabsScrollbarSizing","onScroll","scrollLeftChanged","updateTabsScrollbarSizing","fromEvent","tabSizing","setProperty","tabSizingFixedMinWidth","tabSizingFixedMaxWidth","MOUSE_LEAVE","updateTabsFixedWidth","removeProperty","fixed","forEachTab","tabContainer","titleScrollbarSizing","SCROLL","eventType","DBLCLICK","tapCount","override","updateDropFeedback","isSupportedDropTransfer","dropEffect","isLocalDragAndDrop","hasData","isArray","localDraggedEditor","identifier","MOUSE_WHEEL","scrollToSwitchTabs","deltaX","deltaY","tabSwitchDirection","nextEditor","getEditorByIndex","EditorTabsBarContext","handleOpenedEditors","openEditors","createTab","activeEditorChanged","didActiveEditorChange","oldActiveTabLabel","activeTabLabel","oldTabLabelsLength","computeTabLabels","equalsEditorInputLabel","redraw","forceRevealActiveTab","labelA","labelB","forceDescription","beforeCloseEditor","closingLastTab","closeEditor","handleClosedEditors","closeEditors","lastChild","moveEditor","targetIndex","editorLabel","tabLabelWidget","tabLabel","tabActionBar","redrawTab","pinEditor","withTab","redrawTabLabel","stickEditor","doHandleStickyEditorChange","unstickEditor","redrawTabBorders","setActive","isGroupActive","redrawTabActiveAndDirty","updateEditorLabel","updateEditorDirty","oldOptions","newOptions","labelFormat","tabCloseButton","pinnedTabSizing","hasIcons","highlightModifiedTabs","wrapTabs","decorations","fn","doWithTab","tabResourceLabel","tabBorderTopContainer","tabActionsContainer","tabActionRunner","blockRevealActiveTabOnce","tabActionBarDisposable","tabBorderBottomContainer","eventsDisposable","registerTabListeners","tab","handleClickOrTouch","originatesFromTabActionBar","activation","ACTIVATE","Change","translationX","AUXCLICK","keyCode","handled","kb","doubleClickTabToToggleEditorGroupSizes","arrangeGroups","dragDuration","draggedOverTab","isDND","isTab","isActiveTab","noDNDBackgroundColor","activeContrastBorderColor","outlineWidth","outlineStyle","outlineOffset","verbosity","shortenDuplicates","getLabelConfigFlags","activeEditorIndex","shortenTabLabels","mapNameToDuplicates","duplicateLabels","mapDescriptionToDuplicates","duplicateLabel","useLongDescriptions","descriptions","shortenedDescriptions","sep","tabsContainerBorderColor","isTabSticky","tabAction","hasAction","tabActionsVisibility","option","stickyTabWidth","forceLabel","fileDecorationBadges","charAt","setResource","BOTH","getLabelExtraClasses","italic","isTabActive","hasModifiedBorderTop","doRedrawTabDirty","doRedrawTabActive","allowBorderTop","activeTabBorderColorBottom","activeTabBorderColorTop","setFocusable","hasModifiedBorderColor","isSaving","modifiedBorderColor","stickyCount","borderRight","editorActions","showsBreadcrumbs","used","total","computeHeight","offsetHeight","scheduledLayout","doLayout","activeTabAndIndex","getTabAndIndex","doLayoutBreadcrumbs","activeTab","activeIndex","doLayoutTabs","oldDimension","newDimension","relayout","doLayoutTabsWrapping","doLayoutTabsNonWrapping","didTabsWrapMultiLine","tabsWrapMultiLine","updateTabsWrapping","visibleTabsWidth","allTabsWidth","scrollWidth","lastTabFitsWrapped","lastTab","getLastTab","setScrollDimensions","tabs","currentTabsPosY","tabPosY","offsetTop","lastInRow","stickyTabsWidth","activeTabPosX","activeTabWidth","activeTabPositionStatic","availableTabsContainerWidth","blockRevealActiveTab","oldVisibleTabsWidth","oldAllTabsWidth","dimensionsChanged","tabsContainerScrollPosX","activeTabFits","adjustedActiveTabPosX","getTabAtIndex","srcElement","sourceGroup","getGroup","mergeGroupOptions","isMoveOperation","mode","mergeGroup","draggedEditor","copyEditor","dataTransferItem","removeDragOperationTransfer","treeDropData","validateTrust","allowWorkspaceOpen","handleDrop","sourceEditor","contrastBorderColor","tabHoverBackground","tabUnfocusedHoverBackground","tabHoverForeground","tabUnfocusedHoverForeground","tabHoverBorder","tabUnfocusedHoverBorder","workbenchBackground","editorBackgroundColor","editorGroupHeaderTabsBackground","editorDragAndDropBackground","adjustedTabBackground","adjustedTabDragBackground","flatten","makeTabHoverBackgroundRule","colorDrag","adjustedColor","adjustedColorDrag","makeTabBackgroundRule","tabActiveBackground","tabUnfocusedActiveBackground","tabInactiveBackground","tabUnfocusedInactiveBackground","EditorPanes","_activeEditorPane","editorGroupParent","editorPanesParent","groupView","editorProgressService","workspaceTrustService","_onDidFocus","_onDidChangeSizeConstraints","onDidChangeSizeConstraints","editorPanes","activeEditorPaneDisposables","editorOperation","editorPanesRegistry","EditorPane","onDidChangeTrust","onDidChangeWorkspaceTrust","doOpenEditor","getEditorPaneDescriptor","ignoreError","doShowError","errorHandled","USER","allowDialog","doShowErrorDialog","editorPlaceholderOptions","DESCRIPTOR","errorActions","severity","forceSeverity","forceMessage","errorAction","cancelButton","errorActionResult","pane","doShowEditorPane","cancelled","doSetInput","shouldRestoreFocus","expectedActiveElement","body","tagName","isWorkspaceTrusted","getEditorPane","describes","doHideActiveEditorPane","editorPane","doCreateEditorPane","doSetActiveEditorPane","pagePosition","doInstantiateEditorPane","editorPaneContainer","existingEditorPane","inputMatches","forceReload","setOptions","operation","clearInput","isCurrent","safeRun","NoTabsTitleControl","activeLabel","registerContainerListeners","labelContainer","onTitleLabelClick","actionsContainer","onTitleDoubleClick","onTitleAuxClick","onTitleTap","doHandleOpenEditor","ifActiveEditorChanged","ifActiveEditorPropertiesChanged","ifEditorIsActive","isEditorPinned","getVerbosity","showCommands","text","openFileNonMacOnly","openFolderNonMacOnly","openFileOrFolderMacOnly","openRecent","newUntitledFile","newUntitledFileMacOnly","findInFiles","toggleTerminal","startDebugging","toggleFullscreen","negate","showSettings","noFolderEntries","folderEntries","EditorGroupWatermark","lifecycleService","transientDisposables","h","shortcuts","workbenchState","onDidShutdown","onDidChangeWorkbenchState","allEntriesWhenClauses","entry","allKeys","getCommand","publicLog","EditorGroupView","createNew","createFromSerialized","createCopy","copyFrom","_index","fileDialogService","_onWillDispose","onWillDispose","_onDidModelChange","onDidModelChange","_onDidActiveEditorChange","onDidActiveEditorChange","_onDidOpenEditorFail","onDidOpenEditorFail","_onWillCloseEditor","onWillCloseEditor","_onDidCloseEditor","onDidCloseEditor","_onWillMoveEditor","onWillMoveEditor","_onWillOpenEditor","onWillOpenEditor","disposedEditorsWorker","handleDisposedEditors","mapEditorToPendingConfirmation","containerToolBarMenuDisposable","whenRestoredPromise","whenRestored","_disposed","clone","createScoped","createContainerToolbar","createContainerContextMenu","scopedInstantiationService","handleGroupContextKeys","titleAreaControl","createTitleAreaControl","editorContainer","doTrackFocus","updateTitleContainer","updateContainer","restoreEditors","finally","complete","groupActiveEditorDirtyContext","groupActiveEditorPinnedContext","groupActiveEditorFirstContext","groupActiveEditorLastContext","groupActiveEditorStickyContext","groupEditorsCountContext","activeEditorListener","observeActiveEditor","onDidChangeDirty","removeGroup","toolbarContainer","containerToolbar","containerToolbarMenu","EmptyEditorGroup","updateContainerToolbar","onShowContainerContextMenu","EmptyEditorGroupContext","containerFocusTracker","handleTitleClickOrTouch","sticky","doShowEditor","isNew","onDidGroupModelChange","onDidChangeEditorPartOptions","onDidOpenEditor","handleOnDidCloseEditor","onWillDisposeEditor","onDidChangeEditorDirty","onDidChangeEditorLabel","toEditorTelemetryDescriptor","editorsToClose","canDispose","strictEquals","ANY","getTelemetryDescriptor","file","fsPath","resourceExt","queryStringLocation","mimeType","ext","work","disposedEditors","inactiveEditors","disposedEditor","editorFindResult","findEditor","inactiveEditor","doCloseEditor","oldPartOptions","newPartOptions","enablePreview","previewEditor","disposed","titleHeight","notifyIndexChanged","setIndex","editorOrIndex","findEditors","canonicalResource","asCanonicalUri","primaryResource","SECONDARY","secondaryResource","doStickEditor","oldIndexOfEditor","stick","unstick","newIndexOfEditor","internalOptions","openEditorOptions","inactive","activateGroup","restoreGroup","RESTORE","PRESERVE","indexOfEditor","doMoveEditorInsideGroup","openedEditor","editorId","autoLockGroups","lock","showEditorResult","openEditorPromise","newInGroup","fromError","skipTitleUpdate","editorsToOpen","firstEditor","openEditorsOptions","startingIndex","settled","moveEditors","movedEditors","doMoveOrCopyEditorAcrossGroups","keepCopy","moveToIndex","openOptions","copy","MOVE","copyEditors","copiedEditors","doCloseEditorWithConfirmationHandling","handleCloseConfirmation","doCloseActiveEditor","doCloseInactiveEditor","editorToClose","restoreFocus","closeEmptyGroup","closeEmptyGroups","nextActiveGroup","getGroups","nextActiveEditor","shift","veto","handleCloseConfirmationPromise","doHandleCloseConfirmation","shouldConfirmClose","otherGroup","confirmation","saveReason","autoSave","skipAutoSave","closeHandler","getAutoSaveMode","showSaveConfirm","save","revert","soft","showConfirm","doGetEditorsToClose","doCloseEditors","hasDirection","savedOnly","except","closeActiveEditor","closeAllEditors","doCloseAllEditors","replaceEditors","activeReplacement","inactiveReplacements","replacement","forceReplaceDirty","isActiveEditor","editorToReplace","closed","REPLACE","openEditorResult","locked","lastLayout","titleAreaSize","editorHeight","isDropIntoEditorEnabledGlobally","isDragIntoEditorEvent","DropOverlay","OVERLAY_ID","cleanupOverlayScheduler","enableDropIntoEditor","isDropIntoActiveEditorEnabled","overlayOffsetHeight","getOverlayOffsetHeight","overlay","dropIntoPromptElement","borderStyle","isDraggingGroup","isDraggingEditor","isCopy","isCopyOperation","sourceGroupView","findSourceGroupView","hideOverlay","splitOnDragAndDrop","isToggleSplitOperation","positionOverlay","offsetX","offsetY","currentDropOperation","splitDirection","MOUSE_OVER","ensureTargetGroup","targetGroup","addGroup","copyGroup","moveGroup","mousePosX","mousePosY","enableSplitting","preferSplitVertically","openSideBySideDirection","editorControlWidth","editorControlHeight","edgeWidthThresholdFactor","edgeHeightThresholdFactor","edgeWidthThreshold","edgeHeightThreshold","splitWidthThreshold","splitHeightThreshold","doPositionOverlay","toggleDropIntoPrompt","opacity","showing","EditorDropTarget","counter","_overlay","DRAG_ENTER","DRAG_LEAVE","dndContributions","DragAndDropContribution","getAll","dndContributionKeys","dataFormatKey","FILES","RESOURCES","EDITORS","disposeOverlay","targetGroupView","findTargetGroupView","containsGroup","isDraggedOver","defaultState","targetWidth","leftMarginRatio","rightMarginRatio","distributeSizing","createEmptyView","CenteredViewLayout","lastLayoutPosition","splitViewDisposables","centeredLayoutFixedWidth","overflow","splitView","resizeSplitViews","centerViewWidth","marginWidthFloat","floor","ceil","leftMargin","rightMargin","setFixedWidth","emptyViews","inverseAltBehavior","onDidSashChange","findGroup","preferredGroup","candidateGroup","isGroupLockedForEditor","groupsByLastActive","revealIfVisible","lastActiveGroup","revealIfOpened","groupWithInputActive","groupWithInputOpened","isOpened","doFindGroup","typedEditor","GridWidgetView","gridWidget","_gridWidget","grid","EditorPart","EDITOR_PART_UI_STATE_STORAGE_KEY","EDITOR_PART_CENTERED_VIEW_STORAGE_KEY","_onDidLayout","onDidLayout","_onDidChangeActiveGroup","onDidChangeActiveGroup","_onDidChangeGroupIndex","onDidChangeGroupIndex","_onDidChangeGroupLocked","onDidChangeGroupLocked","_onDidActivateGroup","onDidActivateGroup","_onDidAddGroup","onDidAddGroup","_onDidRemoveGroup","onDidRemoveGroup","_onDidMoveGroup","onDidMoveGroup","onDidSetGridWidget","_onDidChangeEditorPartOptions","workspaceMemento","getMemento","profileMemento","groupViews","mostRecentActiveGroups","gridWidgetView","enforcedPartOptions","_partOptions","sideGroup","_isReady","whenReadyPromise","whenReady","handleChangedPartOptions","enforcePartOptions","_contentDimension","_activeGroup","isReady","hasRestorableState","mostRecentActive","fillGridNodes","doFindGroupByDirection","doFindGroupByLocation","assertGroupView","neighbours","toGridViewDirection","n1","n2","nextGroup","previousGroup","doSetGroupActive","doRestoreGroup","setSize","arrangement","isGroupMaximized","setGroupOrientation","newOrientation","applyLayout","layoutGroupsCount","countGroups","currentGroupViews","lastGroupInLayout","toGridViewOrientation","isTwoDimensionalGrid","doCreateGridControlWithState","notifyGroupIndexChange","getLayout","serializedGrid","serializedNodeToGroupLayoutArgument","serializedNode","locationView","doAddGroup","groupToCopy","shouldMaximize","newGroupView","doCreateGroupView","getSplitSizingStyle","splitSizing","groupDisposables","once","doUpdateMostRecentActive","previousActiveGroup","makeMostRecentlyActive","fallback","doRemoveEmptyGroup","doRemoveGroupWithEditors","mostRecentlyActiveGroups","sourceView","targetView","copiedGroupView","mergeAllGroups","createEditorDropTarget","centeredLayoutWidget","getMaximumEditorDimensions","getPanelAlignment","gridSeparatorBorder","separatorBorderStyle","doCreateGridControl","setupDragAndDropSupport","horizontalOpenerTimeout","verticalOpenerTimeout","lastOpenHorizontalPosition","lastOpenVerticalPosition","onDragStart","openPartAtPosition","clearAllTimeouts","openHorizontalPosition","openVerticalPosition","centerLayout","isLayoutCentered","restoreError","restorePreviousState","doCreateGridControlWithPreviousState","initialGroup","doSetGridWidget","uiState","activeGroupId","editorGroupViewsToReuse","reuseGroupViews","serializedEditorGroup","saveState","centeredLayoutState","listService","explorerService","resources","untitledResources","fileResources","f","untitledResource","toNegated","_resource","COMPARE_WITH_SAVED_SCHEMA","globalResourceToCompare","resourceSelectedForCompareContext","providerDisposables","resourcesToClipboard","relative","lineDelimiter","separator","relativeSeparator","noPrefix","writeText","textModelService","registerEditorListener","registerTextModelContentProvider","onDidVisibleEditorsChange","filterByScheme","modified","rightResource","copyPathCommandHandler","win","copyRelativePathCommandHandler","saveSelectedEditors","codeEditorService","textFileService","saveAs","doSaveEditors","focusedCodeEditor","getFocusedCodeEditor","getModel","isReadonly","saveDirtyEditorsOfGroups","dirtyEditors","notify","activeInput","viewService","isInsideWorkspace","explorerView","setExpanded","openEditorsView","PICK","force","skipSaveParticipants","editorContext","contexts","saveAll","includeUntitled","success","workspaceEditingService","removeFolders","getViewPaneContainer","getExplorerView","previousCompressedStat","nextCompressedStat","firstCompressedStat","lastCompressedStat","isOptional","schema","viewType","languageId","createFileLocalized","defaultFileUri","defaultFilePath","fileName","saveUri","showSaveDialog","saveLabel","defaultUri","createFile","overwrite","FileEditorInput","capabilities","preferredResource","preferredName","preferredDescription","preferredEncoding","preferredLanguageId","preferredContents","textModelResolverService","textResourceConfigurationService","forceOpenAs","cachedTextFileModelReference","modelListeners","setPreferredName","setPreferredDescription","setPreferredEncoding","setPreferredLanguageId","setPreferredContents","onDidCreate","onDidCreateTextFileModel","registerModelListeners","_onDidChangeDirty","onDidChangeReadonly","_onDidChangeCapabilities","onDidSaveError","allowLabelOverride","_onDidChangeLabel","defaultUriScheme","vscodeUserData","vscodeRemote","getPreferredName","getPreferredDescription","getEncoding","getPreferredEncoding","setEncoding","encoding","setForceOpenAsText","getLanguageId","getPreferredLanguageId","setLanguageId","contents","setForceOpenAsBinary","hasState","prefersEditorPane","doResolveAsBinary","doResolveAsText","allowBinary","limits","ensureLimits","createModelReference","object","disposeModelReference","textFileOperationResult","defaultSizeLimit","configuredSizeLimit","configuredSizeLimitMb","MB","isResolved","toUntyped","untypedInput","forceFile","preserveViewState","textEditorModel","otherInput","CONFLICT_RESOLUTION_CONTEXT","CONFLICT_RESOLUTION_SCHEME","LEARN_MORE_DIRTY_WRITE_IGNORE_KEY","conflictEditorHelp","TextFileSaveErrorHandler","messages","conflictResolutionContext","activeConflictResolutionResource","saveErrorHandler","onDidSave","onFileSavedOrReverted","onDidRevert","onActiveEditorChanged","isActiveEditorSaveConflictResolution","messageHandle","close","onSaveError","fileOperationError","fileOperationResult","ResolveConflictLearnMoreAction","DoNotShowResolveConflictLearnMoreAction","ResolveSaveConflictAction","SaveModelIgnoreModifiedSinceAction","ConfigureSaveConflictAction","isWriteLocked","triedToUnlock","unlock","isPermissionDenied","canSaveElevated","SaveModelElevatedAction","UnlockModelAction","RetrySaveModelAction","SaveModelAsAction","DiscardModelAction","handle","onDidClose","openerService","notification","nameLong","neverShowAgain","isSecondary","writeElevated","writeUnlock","preferredMatchingEditor","ignoreModifiedSince","openSettings","RENAME_ID","MOVE_FILE_TO_TRASH_ID","DELETE_FILE_ID","CUT_FILE_ID","COPY_FILE_ID","PASTE_FILE_ID","copyPathCommand","copyRelativePathCommand","appendEditorTitleContextMenuItem","command","appendSaveConflictEditorTitleAction","appendToCommandPalette","IsFileSystemResource","check","discard","notEqualsTo","isFileOrUntitledResourceContextKey","Scheme","isEqualTo","openToSideCommand","OpenEditorsContext","compareResourceCommand","HasResource","selectForCompareCommand","compareSelectedCommand","ExplorerContext","Call","locations","res","compareRangesUsingStarts","DataSource","getDirection","resolveOutgoingCalls","call","fromRanges","resolveIncomingCalls","Sorter","otherElement","IdentityProvider","CallRenderingTemplate","CallRenderer","deprecated","tags","toIcon","setLabel","labelEscapeNewLines","strikethrough","VirtualDelegate","AccessibilityProvider","LayoutInfo","retrieve","defaultInfo","ratio","CallHierarchyTree","CallHierarchyTreePeekWidget","peekView","TitleMenu","_where","_direction","_peekViewService","_textModelService","_storageService","_menuService","showFrame","showArrow","isResizeable","isAccessible","_treeViewStates","_previewDisposable","addExclusiveWidget","_applyTheme","onDidColorThemeChange","_splitView","_editor","arrowColor","frameColor","headerBackgroundColor","primaryHeadingColor","secondaryHeadingColor","_fillHead","updateToolbar","_actionbarWidget","_fillBody","_dim","_parent","_message","scrollBeyondLastLine","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","minimap","treeContainer","_updatePreview","onMouseDown","selection","onMouseDblClick","Twistie","selectionRange","onDidChangeSelection","KeyboardEvent","stickiness","overviewRuler","Center","previewUri","setModel","fullRange","plusRange","revealRangeInCenter","decorationsCollection","createDecorationsCollection","setTitle","showLoading","dataset","_show","showMessage","setMetaTitle","showModel","expand","updateDirection","newDirection","getViewState","_isShowing","revealLineInCenterIfOutsideViewport","lineNumber","fromPositions","_onWidth","_doLayoutBody","_viewZone","heightInLines","_ctxHasCallHierarchyProvider","_ctxCallHierarchyVisible","_ctxCallHierarchyDirection","CallHierarchyController","Id","getContribution","_StorageDirection","_dispoables","_sessionDisposables","_ctxIsVisible","_ctxHasProvider","_ctxDirection","onDidChangeModel","onDidChangeModelLanguage","hasModel","startCallHierarchyFromEditor","getPosition","cts","_showCallHierarchyWidget","startCallHierarchyFromCallHierarchy","newEditor","openCodeEditor","newModel","fork","getStartPosition","endCallHierarchy","showOutgoingCalls","showIncomingCalls","EditorContextPeek","notInPeekEditor","editorTextFocus","runEditorCommand","_accessor","callIncoming","callOutgoing","Type","provideSupertypes","provideSubtypes","TypeRenderingTemplate","TypeRenderer","TypeHierarchyTree","TypeHierarchyTreePeekWidget","_ctxHasTypeHierarchyProvider","_ctxTypeHierarchyVisible","_ctxTypeHierarchyDirection","TypeHierarchyController","_storageDirectionKey","T","startTypeHierarchyFromEditor","_showTypeHierarchyWidget","endTypeHierarchy","startTypeHierarchyFromTypeHierarchy","typeItem","showSupertypes","showSubtypes","typeHierarchySuper","typeHierarchySub","DocumentSymbolNavigationLabelProvider","symbol","DocumentSymbolAccessibilityProvider","_ariaLabel","DocumentSymbolIdentityProvider","DocumentSymbolGroupTemplate","DocumentSymbolTemplate","iconLabel","decoration","DocumentSymbolVirtualDelegate","DocumentSymbolGroupRenderer","_template","DocumentSymbolRenderer","_renderMarker","_renderMarkerInfo","marker","topSev","cssColor","DocumentSymbolFilter","kindToConfigName","freeze","_prefix","_textResourceConfigService","configName","configKey","DocumentSymbolComparator","_collator","Intl","Collator","numeric","DocumentSymbolBreadcrumbsSource","_textResourceConfigurationService","_breadcrumbs","newElements","_computeBreadcrumbs","getItemEnclosingPosition","chain","_isFiltered","DocumentSymbolsOutline","posistion","_outlineModel","firstLoadBarrier","_languageFeaturesService","_codeEditorService","_outlineModelService","_markerDecorationsService","_breadcrumbsDataSource","initialState","quickPickDataSource","getQuickPickElements","documentSymbolProvider","_createOutline","updateSoon","onDidChangeModelContent","timeout","getDebounceValue","cancelAndSet","onDidDispose","empty","collapseToStart","selectionRevealType","revealRangeInCenterIfOutsideViewport","isWholeLine","saveViewState","contentChangeEvent","_setOutlineModel","buffer","versionIdThen","getVersionId","timeoutTimer","getOrCreate","getLineCount","newLength","getValueLength","newRatio","oldRatio","changes","prev","rangeLength","_applyMarkersToOutline","onDidChangeMarker","textModel","updateMarker","onDidChangeCursorPosition","affectOnlyActiveElement","markers","getLiveMarkers","Warning","merge","DocumentSymbolsOutlineCreator","outlineService","reg","registerOutlineCreator","ctrl","getControl","_token","control","getModifiedEditor","invokeWithinContext","wait","Workbench","registerWorkbenchContribution","OutlineViewState","_followCursor","_filterOnType","_sortBy","followCursor","filterOnType","sortBy","persist","restore","raw","IOutlinePane","ctxFollowsCursor","ctxFilterOnType","ctxSortMode","ctxAllCollapsed","_comparator","OutlinePane","_editorControlDisposables","_editorPaneDisposables","_outlineViewState","_editorListener","_treeStates","_ctxFollowsCursor","_ctxFilterOnType","_ctxSortMode","_ctxAllCollapsed","updateContext","renderBody","progressContainer","_progressBar","onDidChangeBodyVisibility","_handleEditorChanged","layoutBody","_treeDimensions","collapseAll","expandAll","outlineViewState","_showMessage","_captureViewState","oldOutline","_handleEditorControlChanged","didCapture","canCreateOutline","loadingMessage","infinite","newOutline","expandOnDoubleClick","hideTwistiesOfChildlessElements","defaultFindMode","Filter","Highlight","getBackgroundColor","updateTree","updateChildren","findMode","onDidChangeFindMode","revealActiveElement","getRelativeTop","getParentElement","resort","onDidChangeFindPattern","updateAllCollapsedCtx","onDidChangeCollapseState","outlineViewIcon","symbolClass","registerViews","focusCommand","Configuration","registerConfiguration","markdownDescription","ensureDOMFocus","getHTMLElement","updateFocusFn","newFocus","fakeKeyboardEvent","updateFocus","listFocus","setAnchor","expandMultiSelection","previousFocus","list","selectElement","retainCurrentFocus","toggleCollapsed","arg2","focusNextPage","focusPreviousPage","focusFirst","focusLast","focusedElements","collapse","getFirstElementChild","didExpand","newSelection","visit","isCollapsible","triggerTypeNavigation","registerCommandAlias","openFind","closeFind","scrollTop","CollapseAllAction","viewer","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","next","rejected","done","createFileDataTransferItemFromFile","Uint8Array","arrayBuffer","INTERNAL_DND_MIME_TYPES","INTERNAL_URI_LIST","toExternalVSDataTransfer","sourceDataTransfer","overwriteUriList","vsDataTransfer","asStringValue","getAsString","getAsFile","toVSDataTransfer","uriList","editorData","internal","CheckboxStateHandler","_onDidChangeCheckboxState","onDidChangeCheckboxState","setCheckboxState","TreeItemCheckbox","checkboxClass","checkboxStateHandler","hoverDelegate","_onDidChangeState","onDidChangeState","checkboxContainer","checkbox","isChecked","setIcon","createCheckbox","setHover","setAccessibilityInformation","registerListener","removeCheckbox","onChange","setCheckbox","checkboxHoverContent","accessibilityInformation","role","TreeViewPane","titleMenuId","ViewTitle","donotForwardArgs","treeView","onDidChangeActions","onDidChangeTitle","newTitle","onDidChangeDescription","newDescription","updateTitleDescription","_container","updateTreeVisibility","onDidChangeWelcomeState","_onDidChangeViewWelcomeState","titleDescription","_actionRunner","MultipleSelectionActionRunner","renderTreeView","shouldShowWelcome","dataProvider","isTreeEmpty","layoutTreeView","isBodyVisible","$treeViewId","$focusedTreeItem","$selectedTreeItems","Root","parentHandle","collapsibleState","Expanded","isTreeCommandEnabled","treeCommand","originalId","commandAction","isRenderedMessageValue","messageValue","noDataProviderMessage","RawCustomTreeViewContextKey","Tree","AbstractTreeView","_hasIconForParentNode","_hasIconForLeafNode","_canSelectMany","_manuallyManageCheckboxes","elementsToRefresh","lastSelection","_onDidExpandItem","onDidExpandItem","_onDidCollapseItem","onDidCollapseItem","_onDidChangeSelectionAndFocus","onDidChangeSelectionAndFocus","_onDidChangeVisibility","onDidChangeVisibility","_onDidChangeActions","_onDidChangeWelcomeState","_onDidChangeTitle","_onDidChangeDescription","_onDidCompleteRefresh","_isInitialized","_height","_width","refreshing","lastActive","initializeShowCollapseAllAction","initializeCollapseAllToggle","initializeShowRefreshAction","treeViewDnd","CustomTreeViewDragAndDrop","_dragAndDropController","controller","doRefresh","viewLocation","dragAndDropController","dnd","_dataProvider","self","_isEmpty","_onDidChangeEmpty","onDidChangeEmpty","checkboxesUpdated","manuallyManageCheckboxes","oldEmpty","updateCollapseAllToggle","updateMessage","_description","_badge","_badgeActivity","canSelectMany","oldCanSelectMany","hasIconForParentNode","hasIconForLeafNode","startingValue","collapseAllContext","collapseAllContextKey","showCollapseAllAction","refreshContext","refreshContextKey","showRefreshAction","MAX_SAFE_INTEGER","collapseAllToggleContextKey","revealItem","createTree","treeMenus","TreeMenus","treeLabels","dataSource","TreeDataSource","task","aligner","Aligner","TreeRenderer","widgetAriaLabel","TreeViewDelegate","TreeViewIdentityProvider","resourceUri","buildAriaLabel","getRole","setContextKeyService","updateContentAreas","resolveCommand","hasNode","rerender","hasResolve","treeEvent","getResourceContextActions","wasCancelled","$treeItemHandle","hideMessage","_messageValue","markdownRenderer","resetMessageElement","parentNode","querySelectorAll","toPromise","seen","itemOrItems","oldSelection","collapseAllToggleContext","ITEM_HEIGHT","TREE_TEMPLATE_ID","treeViewId","treeViewsService","_hasCheckbox","_renderedElements","_hoverDelegate","updateCheckboxes","resourceLabel","actionBar","elementDisposable","getHover","markdownNotSupportedFallback","treeItemLabel","highlights","swap","LIGHT","iconDark","commandEnabled","renderCheckbox","labelResource","getFileKind","shouldHideResourceLabelIcon","disabledCommand","backgroundImage","shouldShowThemeIcon","getResourceActions","setAlignment","addRenderedTreeItemElement","rendered","disposeElement","treeItem","alignIconWithTwisty","isFileKindThemeIcon","hasResource","isFolderThemeIcon","Collapsed","additionalItems","checkChildren","visitedParents","checkParents","someUnchecked","someChecked","renderedItem","removeRenderedTreeItemElement","hasIcon","getSelectedResources","runAction","selectionHandleArgs","actionInSelected","selected","ViewItemContext","service","listen","createOverlay","contextValue","CustomTreeView","activated","activateByEvent","treeId","treeMimeType","dndController","handleDragAndLog","itemHandles","uuid","dragCancellationToken","handleDrag","additionalDataTransfer","unlistedTypes","dragMimeTypes","warn","addExtensionProvidedTransferTypes","addDragOperationTransfer","supportedType","addResourceInfoToTransfer","treeItemsData","sourceInfo","debugLog","debug","targetElement","dropMimeTypes","accept","bubble","autoExpand","getDragURI","getDragLabel","targetNode","treeSourceInfo","willDropUuid","originalDataTransfer","outDataTransfer","asFile","asString","VIEWLET_ID","OnAutoForwardedAction","NOTIFY_COOL_DOWN","remoteExplorerService","externalOpenerService","tunnelService","alreadyOpenedOnce","lastNotifyTime","setFullYear","getFullYear","doAction","tunnels","trace","tunnelRemotePort","doActionTunnels","tunnel","portNumberHeuristicDelay","allAttributes","tunnelModel","getAttributes","port","host","tunnelRemoteHost","attributes","onAutoForward","OpenBrowserOnce","localAddress","OpenBrowser","address","OpenPreview","Silent","elapsed","getTime","showNotification","removedPorts","lastShownPort","lastNotification","firstTunnel","newerTunnel","basicMessage","linkMessage","hadLastFocus","choices","openBrowserChoice","openPreviewChoice","tunnelLocalPort","canElevate","isPortPrivileged","elevateChoice","privacy","Private","canChangePrivacy","makePublicChoice","oldTunnelDetails","forwarded","Other","forward","remote","local","elevateIfNeeded","Public","newTunnel","storageKeys","WebviewViewPane","getOriginStore","_originStore","webviewService","webviewViewService","showActions","WhenExpanded","_webview","_webviewDisposables","_activated","fromExtensionId","defaultTitle","memento","onNewResolverRegistered","_repositionTimeout","_rootContainer","_resizeObserver","ResizeObserver","layoutWebview","saveMemento","claim","release","origin","getOrigin","webview","createWebviewOverlay","providedViewType","purpose","contentOptions","extension","onDidUpdateState","DRAG","stopImmediatePropagation","dropTargetElement","dispatchEvent","DragEvent","webviewView","onDidScrollRoot","doLayoutWebview","webviewEntry","isConnected","findRootContainer","layoutWebviewOverElement","viewsContainerSchema","properties","required","viewsContainersContribution","ViewType","InitialVisibility","defaultSnippets","enum","markdownEnumDescriptions","contextualTitle","enumDescriptions","initialSize","remoteViewDescriptor","remoteName","viewsContribution","additionalProperties","viewsContainersExtensionPoint","registerExtensionPoint","extensionPoint","jsonSchema","viewsExtensionPoint","deps","activationEventsGenerator","viewExtensionPointTypeArray","viewExtensionPointType","ViewsExtensionHandler","handleAndRegisterCustomViewContainers","handleAndRegisterCustomViews","showTreeHoverCancellation","getRenderedTreeElement","setHandler","extensions","removeCustomViewContainers","addCustomViewContainers","extensionPoints","existingViewContainers","activityBarOrder","panelOrder","isValidViewsContainer","registerCustomViewContainers","removedExtensions","moveViews","deregisterCustomViewContainer","viewsContainersDescriptors","containers","fromString","extensionLocation","registerCustomViewContainer","existingViewContainer","originalContainerId","deregisterPaneComposite","viewIds","isValidViewDescriptors","viewOrderDelegate","getOrder","initialVisibility","convertInitialVisibility","getViewType","showCollapsed","virtualWorkspace","Hidden","registerViews2","Webview","removedViews","deregisterViews","anyView","WebviewEditorInputSerializer","_webviewWorkbenchService","canSerialize","shouldPersist","toJson","serializedEditorInput","fromJson","openRevivedWebview","webviewInitInfo","providedId","webviewOptions","iconPath","reviveWebviewExtensionDescription","reviveIconPath","restoreWebviewContentOptions","light","dark","reviveUri","localResourceRoots","reviveWebview","enableFindWidget","retainContextWhenHidden","webviewWorkbenchService","_webviewService","dirty","editorResource","backupId","customInput","startsDirty","updateGroup","ComplexCustomWorkingCopyEditorHandler","_workingCopyEditorService","_workingCopyBackupService","_customEditorService","registerHandler","handles","workingCopy","vscodeCustomEditor","workingCopyResource","createEditor","backup","meta","backupData","registerEditorPane","webviewActiveContextKeyExpr","ShowWebViewEditorFindWidgetAction","getActiveWebviewEditor","showFind","HideWebViewEditorFindCommand","hideFind","WebViewEditorFindNextCommand","runFindAction","WebViewEditorFindPreviousCommand","ReloadWebviewAction","webviews","WebviewPanelContribution","registerGroupListener","onEditorOpening","LanguageStatusViewModel","combined","dedicated","StoredCounter","_key","getNumber","increment","EditorStatusContribution","_id","_keyDedicatedItems","_languageStatusService","_statusBarService","_dedicated","_dedicatedEntries","_renderDisposables","_handleStorageChange","_restoreState","_interactionCounter","_update","onDidChangeEntryVisibility","_storeState","_combinedEntry","ids","_createViewModel","getLanguageStatus","activeTextEditorControl","showSeverity","_severityToComboCodicon","isOneBusy","ariaLabels","_renderStatus","_asAriaLabel","busy","props","addEntry","alignment","userHasInteractedWithStatus","querySelector","_wiggle","_flash","_e","hoverTarget","MutationObserver","childList","subtree","newDedicatedEntries","_asStatusbarEntry","severityText","_severityToSingleCodicon","_renderTextPlus","href","updateEntryVisibility","sev","nodes","parts","accessibilityInfo","supportThemeIcons","NOTEBOOK_EDITOR_EDITABLE","detectLanguageCommandId","LanguageDetectionStatusContribution","_languageDetectionService","_languageService","_delayer","_doUpdate","editorModel","editorUri","enablementConfig","untitledEditors","lang","detectLanguage","skip","existing","detectedName","getLanguageName","languageDetectionService","setLanguage","TextFileEditorTracker","workingCopyEditorService","ensureDirtyFilesAreOpenedWorker","units","ensureDirtyTextFilesAreOpened","getDirtyTextFileTrackerDelay","reloadVisibleTextFileEditors","doEnsureDirtyTextFilesAreOpened","fileModel","listCodeEditors","codeEditor","BinaryFileEditor","openInternal","untypedActiveEditor","resolvedEditor","resolveEditor","WorkspaceWatcher","watchedWorkspaces","getComparisonKey","onDidWatchError","unwatchWorkspace","watchWorkspace","msg","WORKSPACE","SILENT","excludes","watcherExclude","pathsToWatch","watcherInclude","includePath","with","toResource","pathToWatch","watch","unwatchWorkspaces","DirtyFilesIndicator","workingCopyService","badgeHandle","lastKnownDirtyCount","updateActivityBadge","onWorkingCopyDidChangeDirty","gotDirty","dirtyCount","num","FileEditorWorkingCopyEditorHandler","textEditorService","canHandleResource","handlesSync","createTextEditor","TextFileEditor","rawDeleted","clearEditorViewState","moveEditorViewState","_input","resolvedModel","openAsBinary","textFileModel","editorControl","editorViewState","loadEditorViewState","cursorState","getReadonlyConfiguration","handleInitialized","handleSetInputError","formatSize","hasValidBasename","defaultBinaryEditor","doOpenAsBinaryInDifferentEditor","doOpenAsBinaryInSameEditor","createEditorControl","initialOptions","tracksEditorViewState","tracksDisposedEditorViewState","FileUriLabelContribution","registerFormatter","formatting","tildify","normalizeDriveLetter","authorityPrefix","workspaceSuffix","EditorFactory","registerFileEditorFactory","createFileEditor","isFileEditor","obj","addImplementation","undoRedoService","explorerCanUndo","enableUndo","canUndo","undo","canRedo","redo","registerLanguage","aliases","mimetypes","EditorsObserver","STORAGE_KEY","mostRecentEditorsMap","hasEditor","editorsPerResourceCounter","toIdentifier","hasEditors","arg1","editorGroupsService","keyMap","_onDidMostRecentlyActiveEditorsChange","onDidMostRecentlyActiveEditorsChange","onWillSaveState","onGroupAdded","loadState","groupEditorsMru","addMostRecentEditor","registerGroupListeners","ensureOpenedEditorsLimit","removeMostRecentEditor","exclude","ensureKey","mostRecentEditor","updateEditorResourcesMap","editorsPerResource","findKey","groupMap","perEditorGroup","doEnsureOpenedEditorsLimit","mostRecentEditors","mostRecentEditorsCountingForLimit","excludeDirty","leastRecentlyClosableEditors","editorsToCloseCount","mapGroupToEditorsToClose","editorsInGroupToClose","mapGroupToSerializableEditorsOfGroup","serializableEditorsOfGroup","editorSerializer","getEditorSerializer","mapValues","editorIdentifier","EditorService","workspaceTrustRequestService","_onDidVisibleEditorsChange","_onDidEditorsChange","onDidEditorsChange","lastActiveEditor","activeOutOfWorkspaceWatchers","closeOnFileDelete","editorsObserver","onEditorGroupsReady","handleActiveEditorChange","handleVisibleEditorsChange","onDidRunFileOperation","doHandleActiveEditorChangeEvent","visibleOutOfWorkspaceResources","visibleEditors","handleMovedFile","handleDeletedFile","gotDeleted","replacements","targetResource","ignorePathCasing","moveResult","optionOverrides","workbench","isExternal","movedTo","getAllNonDirtyEditors","exists","conditionallyAddEditor","activeControl","activeCodeEditor","activeTextEditorLanguageId","excludeSticky","visibleEditorPanes","visibleTextEditorControls","visibleEditorPane","optionsOrPreferredGroup","resolveTextEditor","handleWorkspaceTrust","mapGroupToTypedEditors","targetGroupEditors","diffMode","mergeMode","extractEditorResources","requestOpenFilesTrust","input1","input2","base","mapGroupToEditors","typedReplacements","typedReplacement","uniqueEditors","getUniqueEditors","editorsToSaveParallel","editorsToSaveSequentially","saveResults","targetGroups","getAllModifiedEditors","revertAll","isModified","includeScratchpad","uniqueEditor","EditorResolverService","configureDefaultID","cacheStorageID","conflictingDefaultsStorageID","_onDidChangeEditorRegistrations","onDidChangeEditorRegistrations","_editors","_flattenedEditors","_shouldReFlattenEditors","cache","cacheEditors","resolveUntypedInputAndGroup","untypedEditor","_flattenEditorsMap","doResolveSideBySideEditor","resolvedUntypedAndGroup","resourceMatchesCache","picked","doPickEditor","selectedEditor","conflictingDefault","getEditor","resource2","selectedEditor2","editorInfo","selectedDiff","conflictingDefaultDiff","editorFactoryObject","createDiffEditorInput","doResolveEditor","doHandleConflictingDefaults","sendEditorResolutionTelemetry","primaryResolvedEditor","secondaryResolvedEditor","pause","resume","registerEditor","globPattern","registeredEditor","editorsWithId","getAssociationsForResource","matchingAssociations","getAllUserAssociations","association","filenamePattern","allEditors","_registeredEditors","inspectedEditorAssociations","workspaceAssociations","workspaceValue","userAssociations","rawAssociations","associations","registeredEditors","updateUserAssociations","editorID","newAssociation","currentAssociations","newSettingObject","findMatchingEditors","userSettings","matchingEditors","exclusive","findMatchingEditor","canSupportResource","EXCLUSIVE_ONLY","associationsFromSetting","minPriority","builtin","possibleEditors","selectedViewType","createMergeEditorInput","inputWithOptions","createUntitledEditorInput","singlePerResource","foundInput","moveExistingEditorForResource","createEditorInput","editorInfoForResource","findExistingEditorsForResource","editorToUse","out","orderedGroups","editorName","currentEditor","storedChoices","globForResource","writeCurrentEditorsToStorage","onCloseListener","replacementEditor","mapEditorsToQuickPickEntry","showDefaultPicker","defaultSetting","quickPickEntries","currentlyActiveLabel","currentDefaultLabel","currentDefaultAndActiveLabel","defaultViewType","currentViewType","quickPickEntry","configureDefaultEntry","editorPicks","editorPicker","createQuickPick","placeHolderMessage","placeholder","canAcceptInBackground","firstItem","selectedItems","onDidAccept","openInBackground","inBackground","onDidHide","chosenInput","cacheStorage","contribPoint","cacheEntry","ToggleStatusbarEntryVisibilityAction","HideStatusbarEntryAction","focusPreviousEntry","focusNextEntry","statusBarService","isEntryFocused","FocusStatusBarAction","StatusbarViewModel","HIDDEN_ENTRIES_KEY","_entries","lastFocusedEntry","_lastFocusedEntry","_onDidChangeEntryVisibility","restoreState","hiddenRaw","hiddenArray","currentlyHidden","markFirstLastVisibleEntry","otherEntry","findEntry","getEntries","focusEntry","getFocusedEntry","delta","restartPosition","getVisibleEntry","indexToFocus","mapEntryWithNumberedPriorityToIndex","mapEntryWithRelativePriority","sortedEntriesWithNumberedPriority","sortedEntries","entryA","entryB","relativeEntries","doMarkFirstLastVisibleStatusbarItem","firstVisibleItem","lastVisibleItem","StatusbarEntryItem","hasCommand","foregroundListener","backgroundListener","commandMouseListener","commandTouchListener","commandKeyboardListener","StatusBarCodiconLabel","beakContainer","showProgress","isEqualTooltip","hoverContents","showBeak","applyColor","otherTooltip","isBackground","colorResult","colorValue","progressCodicon","currentText","currentShowProgress","StatusbarPart","pendingEntries","viewModel","lastHoverHideTime","placement","onDidHideHover","compactEntriesDisposable","styleOverrides","updateCompactEntries","priorityOrLocation","doAddEntry","doAddPendingEntry","pendingEntry","itemContainer","doCreateStatusItem","viewModelEntry","needsFullRefresh","doAddOrRemoveModelEntry","appendStatusbarEntries","appendStatusbarEntry","entriesBefore","entriesAfter","isEntryVisible","preserveEntryFocus","leftItemsContainer","rightItemsContainer","createInitialStatusbarEntries","pending","mapIdToVisibleEntry","compactEntryGroups","locationId","compactEntryGroup","statusBarItemHoverBackground","statusBarItemCompactHoverBackground","compactEntry","MOUSE_OUT","handledEntries","statusEntryUnderMouse","styleOverride","foregroundColor","foreground","itemBorderColor","statusBarFocusColor","overrideStyle","HistoryService","MOUSE_NAVIGATION_SETTING","NAVIGATION_SCOPE_SETTING","activeEditorListeners","editorHelper","EditorHelper","canNavigateBackContextKey","canNavigateForwardContextKey","canNavigateBackInNavigationsContextKey","canNavigateForwardInNavigationsContextKey","canNavigateToLastNavigationLocationContextKey","canNavigateBackInEditsContextKey","canNavigateForwardInEditsContextKey","canNavigateToLastEditLocationContextKey","canReopenClosedEditorContextKey","_onDidChangeEditorNavigationStack","onDidChangeEditorNavigationStack","defaultScopedEditorNavigationStack","editorGroupScopedNavigationStacks","editorScopedNavigationStacks","editorNavigationScope","recentlyUsedEditorsStack","recentlyUsedEditorsStackIndex","recentlyUsedEditorsInGroupStack","recentlyUsedEditorsInGroupStackIndex","navigatingInRecentlyUsedEditorsStack","navigatingInRecentlyUsedEditorsInGroupStack","recentlyClosedEditors","ignoreEditorCloseEvent","history","editorHistoryListeners","resourceExcludeMatcher","matcher","onExpressionChange","removeExcludedFromHistory","registerMouseNavigationListener","handleEditorEventInRecentEditorsStack","registerEditorNavigationScopeChangeListener","updateContextKeys","handleEditorCloseEventInHistory","handleEditorCloseEventInReopen","mouseBackForwardSupportListener","handleMouseBackForwardSupport","onMouseDownOrUp","isMouseDown","goBack","goForward","handleEditorGroupRemoveInNavigationStacks","activeEditorGroup","matchesEditorIdentifier","handleActiveEditorSelectionChangeEvent","handleActiveEditorChangeInHistory","handleActiveEditorChangeInNavigationStacks","handleActiveEditorSelectionChangeInNavigationStacks","moveInHistory","moveInEditorNavigationStacks","removeFromHistory","removeFromEditorNavigationStacks","removeFromRecentlyClosedEditors","clearRecentlyOpened","clearEditorNavigationStacks","activeStack","getStack","canGoBack","canGoForward","canGoLast","handleEditorNavigationScopeChange","disposeEditorNavigationStacks","configuredScope","NoOpEditorNavigationStacks","stacksForGroup","EditorNavigationStacks","goPrevious","goLast","handleActiveEditorSelectionChange","editorStack","editorGroupStack","withEachEditorNavigationStack","stacks","openNextRecentlyUsedEditor","ensureRecentlyUsedStack","doNavigateInRecentlyUsedEditorsStack","openPreviouslyUsedEditor","acrossGroups","indexModifier","MAX_RECENTLY_CLOSED_EDITORS","associatedResources","reopenLastClosedEditor","lastClosedEditor","reopenClosedEditorPromise","doReopenLastClosedEditor","recentlyClosedEditor","matchesFile","associatedResource","MAX_HISTORY_ITEMS","HISTORY_STORAGE_KEY","includeInHistory","addToHistory","insertFirst","ensureHistoryLoaded","historyInput","preferResourceEditorInput","clearOnEditorDispose","onEditorDispose","updateHistoryOnEditorDispose","resourceInputs","sideInputs","sideInput","candidateResourceInput","replaceInHistory","include","matchesEditor","replaced","newHistory","getHistory","loadHistory","storedEditorHistory","loadHistoryFromStorage","openedEditorsLru","handledEditors","entriesRaw","entriesParsed","entryParsed","getLastActiveWorkspaceRoot","schemeFilter","resourceWorkspace","getLastActiveFile","EditorSelectionState","justifiesNewNavigationEntry","selectionsStack","EditorNavigationStack","editsStack","navigationsStack","notifyNavigation","previous","current","isNavigating","addOrReplace","MAX_STACK_SIZE","mapEditorToDisposable","mapGroupToDisposable","previousIndex","navigating","currentSelectionState","traceStack","onDidChangeLogLevel","getLevel","Trace","entryLabels","log","filterLabel","scopeLabel","traceEvent","isSelectionAwareEditorPane","hasValidEditor","onSelectionAwareEditorNavigation","onNonSelectionAwareEditorNavigation","stateCandidate","doAdd","doReplace","editorCandidate","forceReplace","shouldReplaceStackEntry","newStackEntry","removedEntries","removedEntry","flattenedStack","previousEntry","maybeGoCurrent","navigate","isCurrentSelectionActive","paneSelection","skipEvent","doNavigate","inputB","inputResource","phase","mapEditorToDispose","toDispose","OutlineService","_factories","factory","creator","rm","CustomEditorModelManager","_references","getAllModels","keyStart","models","tryRetain","disposeAllModelsForView","Fields","displayName","selector","CustomEditorsContribution","markdownDeprecationMessage","customEditorsExtensionPoint","contribs","contrib","ContributedCustomEditors","CUSTOM_EDITORS_STORAGE_ID","CUSTOM_EDITORS_ENTRY_ID","_onChange","_memento","mementoObject","webviewEditorContribution","providerDisplayName","getPriorityFromContribution","Symbol","iterator","getContributedEditors","customEditor","contribution","CustomEditorService","_untitledCounter","_editorResolverDisposables","_editorCapabilities","_models","_onDidChangeEditorTypes","onDidChangeEditorTypes","_fileEditorFactory","getFileEditorFactory","_activeCustomEditorId","_focusedCustomEditorIsEditable","_contributedEditors","registerContributionPoints","updateContexts","handleMovedFileInOpenedFileEditors","withActiveCustomEditor","getEditorTypes","contributedEditor","getCustomEditorCapabilities","supportsMultipleEditorsPerDocument","diffEditorInput","modifiedOverride","customClasses","originalOverride","getCustomEditor","getContributedCustomEditors","getUserConfiguredCustomEditors","resourceAssocations","getAllCustomEditors","registerCustomEditorCapabilities","newResource","editorsToReplace","defaultEditor","WebviewThemeDataProvider","_cachedWebViewThemeData","_onThemeDataChanged","onThemeDataChanged","_reset","webviewConfigurationKeys","getTheme","getWebviewThemeData","editorFontFamily","editorFontWeight","fontWeight","editorFontSize","fontSize","exportedColors","colorRegistry","getColors","activeTheme","ApiThemeClassName","fromTheme","themeLabel","themeId","settingsId","DARK","HIGH_CONTRAST_DARK","highContrast","HIGH_CONTRAST_LIGHT","highContrastLight","WebviewPortMappingManager","_getExtensionLocation","_getMappings","_tunnels","getRedirect","resolveAuthority","requestLocalHostInfo","mapping","webviewPort","getOrCreateTunnel","extensionHostPort","encodeURI","remotePort","openTunnel","getAddress","webviewMimeTypes","getWebviewContentMimeType","unknown","WebviewResourceResponse","containsResource","resourceFsPath","rootPath","endsWith","StreamSuccess","stream","etag","mtime","Success","Failed","AccessDenied","NotModified","NLS_FIND_INPUT_LABEL","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_CLOSE_BTN_LABEL","SimpleFindWidget","contextViewService","_isVisible","_foundMatch","_matchesLimit","matchesLimit","_findInput","validation","getRegex","updateButtons","showCommonFindToggles","appendCaseSensitiveLabel","appendCaseSensitiveActionId","_getKeybinding","appendRegexLabel","appendRegexActionId","appendWholeWordsLabel","appendWholeWordsActionId","showHistoryHint","inputBoxStyles","toggleStyles","_updateHistoryDelayer","onInput","checkImeCompletionState","isImeSessionInProgress","_onInputChanged","showResultCount","updateResultCount","focusFindBox","_delayedUpdateHistory","setRegex","isRegex","setCaseSensitive","matchCase","setWholeWords","wholeWord","onDidOptionChange","change","getWholeWords","getCaseSensitive","onFindReplaceStateChange","findFirst","prevBtn","previousMatchActionId","onTrigger","nextBtn","nextMatchActionId","closeBtn","closeWidgetActionId","_innerDomNode","onkeyup","_focusTracker","_onFocusTrackerFocus","_onFocusTrackerBlur","_findInputFocusTracker","_onFindInputFocusTrackerFocus","_onFindInputFocusTrackerBlur","_matchesCount","insertAdjacentElement","inputValue","actionId","initialInput","setValue","reducedFindWidget","SIMPLE_FIND_WIDGET_INITIAL_WIDTH","_updateHistory","inputBox","_getRegexValue","_getWholeWordValue","_getCaseSensitiveValue","foundMatch","hasInput","_getResultCount","showRedOutline","resultCount","matchesCount","matchesPosition","resultIndex","_announceSearchResults","createTextNode","changeState","searchString","WebviewFindWidget","dataChanged","_delegate","_findWidgetFocused","hasFindResult","hasResult","onDidStopFind","stopFind","updateFind","WebviewState","Initializing","pendingMessages","Ready","WebviewElement","platform","_focused","initInfo","webviewThemeDataProvider","_environmentService","_logService","_remoteAuthorityResolverService","_telemetryService","_tunnelService","_expectedServiceWorkerVersion","_state","_resourceLoadingCts","_focusDelayer","_onDidHtmlChange","onDidHtmlChange","_messageHandlers","_onMissingCsp","onMissingCsp","_onDidClickLink","onDidClickLink","_onDidReload","onDidReload","_onMessage","onMessage","_onDidWheel","onDidWheel","_onDidUpdateState","_onDidBlur","_onFatalError","onFatalError","_onDidDispose","_hasAlertedAboutMissingCsp","_hasFindResult","_onDidStopFind","_encodedWebviewOriginPromise","_encodedWebviewOrigin","_content","html","_portMappingManager","portMapping","_createElement","subscription","channel","_messagePort","ports","onmessage","handlers","doPostMessage","on","handleNoCspFound","transfer","scrollYPercentage","handleFocusChange","didFind","handleKeyEvent","elementBox","WebviewContext","decodeURIComponent","loadResource","ifNoneMatch","_send","localLocalhost","runAndSubscribe","onDidChangeReducedMotion","onDidChangeScreenReaderOptimized","onDidHideContextMenu","_confirmBeforeClose","_startBlockingIframeDragEvents","_webviewFindWidget","encodedWebviewOrigin","_initElement","postMessage","transferable","_contentOptions","sandbox","allowRules","_doFocus","params","swVersion","parentOrigin","disableServiceWorker","serviceWorkerUri","asBrowserUri","fakeHtmlUri","addSearchParam","queryString","URLSearchParams","relativeIframeSrc","mountTo","eventName","MOUSE_MOVE","DROP","_stopBlockingIframeDragEvents","webviewContentEndpoint","webviewExternalEndpoint","endpoint","isExtensionDevelopment","doUpdateContent","setHtml","localResourcesRoot","initialScrollProgress","newContent","allowScripts","allowMultipleAPIAcquire","allowForms","cspSource","confirmBeforeClose","transformCssVariables","reduceMotion","isMotionReduced","screenReader","emulatedKeyboardEvent","defineProperty","windowDidDragStart","windowDidDragEnd","selectAll","execCommand","paste","requestUri","resourceToLoad","requestResourcePath","getResourceToLoad","mime","readFileStream","loadLocalResource","streamToBuffer","redirect","contentWindow","keepSelection","clearSelection","OverlayWebview","_layoutService","_baseContextKeyService","_isFirstLoad","_firstLoadPendingMessages","_webviewEvents","_html","_initialScrollProgress","_owner","_scopedContextKeyService","_shouldShowFindWidgetOnRestore","_extension","owner","oldOwner","wasFindVisible","_findWidgetVisible","_findWidgetEnabled","clippingContainer","frameRect","containerRect","parentBorderTop","parentBorderLeft","setTop","setLeft","setWidth","setHeight","clipper","rootRect","computeClippingRect","clipPath","createWebviewElement","tryRestoreScrollPosition","_withWebview","WebviewService","_webviews","_onDidChangeActiveWebview","onDidChangeActiveWebview","_webviewThemeDataProvider","activeWebview","_activeWebview","_updateActiveWebview","registerNewWebview","onBlur","Noop","uris","perform","RenameEdit","newUri","oldUri","RenameOperation","_edits","_undoRedoInfo","_workingCopyFileService","flat","moves","undoes","ignoreIfExists","isUndoing","I","CopyEdit","CopyOperation","_instaService","copies","stats","DeleteEdit","DeleteOperation","CreateEdit","CreateOperation","_textFileService","folderCreates","fileCreates","encodedReadable","getEncodedReadable","createFolder","byteLength","undoesCreate","deletes","fileContent","ignoreIfNotExists","useTrash","skipTrashBin","maxSize","readFile","FileUndoRedoElement","operations","op","_reverse","BulkFileEdits","_label","_code","_undoRedoGroup","_undoRedoSource","_confirmBeforeUndo","_progress","_undoRedoService","undoOperations","undoRedoInfo","undoRedoGroupId","edits","lastGroup","undoOp","report","undoRedoElement","pushElement","ModelEditTask","_modelReference","isNoOp","_newEol","getEndOfLineSequence","addEdit","resourceEdit","_expectedModelVersionId","versionId","textEdit","eol","getFullModelRange","replaceMove","insertAsSnippet","validate","canApply","getBeforeCursorState","_transformSnippetStringToInsertText","pushEditOperations","pushEOL","asInsertText","EditorEditTask","modelReference","_canUseEditor","getSelections","snippetCtrl","snippetEdits","escape","undoStopBefore","undoStopAfter","executeEdits","BulkTextEdits","_editorWorker","_modelService","_textModelResolverService","array","_validateBeforePrepare","_createEditsTasks","tasks","promises","ref","makeMinimal","newEdits","computeMoreMinimalEdits","moreMinialEdit","metadata","_validateTasks","singleModelEditStackElement","multiModelEditStackElement","t","BulkEdit","ariaMessage","otherResources","textEditResources","textEditCount","ranges","getPrototypeOf","_performFileEdits","_performTextEdits","_performCellEdits","undoRedoGroup","BulkEditService","_lifecycleService","_dialogService","_workingCopyService","_activeUndoRedoGroups","setPreviewHandler","_previewHandler","hasPreviewHandler","editsIn","is","liftEdits","ariaSummary","isApplied","showPreview","needsConfirmation","getOption","undoRedoGroupRemove","quotableLabel","bulkEdit","onBeforeShutdown","_shouldVeto","respectAutoSaveConfig","autoSaveSetting","_saveAll","saves","dirtyWorkingCopies","primaryButton","createPart","classes","part","layoutPart","renderPart","partContainer","oncontextmenu","getPart","attachPart","_attachPart","onPartVisibilityChange","isPartVisibile","setPartVisibility","renderActivitybarPar","renderSidebarPart","renderPanelPart","renderAuxiliaryPart","renderEditorPart","renderStatusBarPart","CustomEditorPane","alignItems","CustomEditorInput","setName","setDescription","getLabelValue","short","long","medium","setDirty","registerCustomView","VIEW_CONTAINER","customAction","openViewContainer","disposableCollection","EditorDropService","editorPart","isEditorPartVisible","checkVisibility","checkOpacity","checkVisibilityCSS","webviewIframeAlternateDomains","MonacoEditorService","_openEditorFallback","_editorGroupService","openEditorFallback","_webviewIframeAlternateDomains","isKeybindingConfigurationVisible","shouldUseGlobalPicker","URL","paneCompositePartService","invisibleContainer","isWorkspaceToOpen","uriToOpen","isFileToOpen","getMenuBarVisibility","titleBarStyle","getTitleBarStyle","nativeTabs","nativeFullScreen","windowSelectionBackground","titleBackground","metaElementId","metaElement","getElementById","DEFAULT_FONT_FAMILY"],"sourceRoot":""}