"use strict";(self.webpackChunkmonaco_custom_bundle=self.webpackChunkmonaco_custom_bundle||[]).push([[468],{52468:(e,t,i)=>{i.r(t),i.d(t,{default:()=>he}),i(29769);var n=i(77364),s=i(97108),o=i(22774),a=i(76976),p=i(22384),r=i(89118),l=i(75560),c=i(63580),d=i(84144),u=i(94565),g=i(81294),f=i(89872),h=i(63809),m=i(15527),b=i(82663),S=i(95935),C=i(70666),w=i(72042),y=i(75761),N=i(44349),v=i(50988),I=i(41157),x=i(40382),k=i(16830);const _={category:{value:(0,c.NC)("snippets","Snippets"),original:"Snippets"}};class A extends d.Ke{constructor(e){super({..._,...e})}}class P extends k.x1{constructor(e){super({..._,...e})}}var $,T=i(5826),E=i(49452);!function(e){e.is=function(e){return!!e&&C.ov.isUri(e.filepath)}}($||($={}));var M=i(9488),j=i(97295),L=i(65520),O=i(97711),D=i(24448);class F extends A{static{this.Id="workbench.action.populateFileFromSnippet"}constructor(){super({id:F.Id,title:{value:(0,c.NC)("label","Fill File with Snippet"),original:"Fill File with Snippet"},f1:!0})}async run(e){const t=e.get(o.z),i=e.get(I.eJ),n=e.get(D.AR),s=e.get(w.O),a=(0,L.Pi)(n.activeTextEditorControl);if(!a||!a.hasModel())return;const p=await t.getSnippets(void 0,{fileTemplateSnippets:!0,noRecencySort:!0,includeNoPrefixSnippets:!0});if(0===p.length)return;const r=await this._pick(i,s,p);r&&a.hasModel()&&(O.f.get(a)?.apply([{range:a.getModel().getFullModelRange(),template:r.snippet.body}]),a.getModel().setLanguage(s.createById(r.langId),F.Id),a.focus())}async _pick(e,t,i){const n=[];for(const e of i)if((0,M.XY)(e.scopes))n.push({langId:"",snippet:e});else for(const t of e.scopes)n.push({langId:t,snippet:e});const s=[],o=(0,M.vM)(n,((e,t)=>(0,j.qu)(e.langId,t.langId)));for(const e of o){let i=!0;for(const n of e)i&&(s.push({type:"separator",label:t.getLanguageName(n.langId)??n.langId}),i=!1),s.push({snippet:n,label:n.snippet.prefix||n.snippet.name,detail:n.snippet.description})}const a=await e.pick(s,{placeHolder:(0,c.NC)("placeholder","Select a snippet"),matchOnDetail:!0});return a?.snippet}}var U=i(29102),z=i(84972),W=i(72065),H=i(73046),Z=i(25670),R=i(4669);async function G(e,t){const i=e.get(o.z),n=e.get(I.eJ);let s;s=Array.isArray(t)?t:await i.getSnippets(t,{includeDisabledSnippets:!0,includeNoPrefixSnippets:!0}),s.sort(((e,t)=>e.snippetSource-t.snippetSource));const a=()=>{const e=[];let t;for(const n of s){const s={label:n.prefix||n.name,detail:n.description||n.body,snippet:n};if(!t||t.snippetSource!==n.snippetSource||t.source!==n.source){let t="";switch(n.snippetSource){case 1:t=c.NC("sep.userSnippet","User Snippets");break;case 3:t=n.source;break;case 2:t=c.NC("sep.workspaceSnippet","Workspace Snippets")}e.push({type:"separator",label:t})}3===n.snippetSource&&(i.isEnabled(n)?s.buttons=[{iconClass:Z.kS.asClassName(H.lA.eyeClosed),tooltip:c.NC("disableSnippet","Hide from IntelliSense")}]:(s.description=c.NC("isDisabled","(hidden from IntelliSense)"),s.buttons=[{iconClass:Z.kS.asClassName(H.lA.eye),tooltip:c.NC("enable.snippet","Show in IntelliSense")}])),e.push(s),t=n}return e},p=n.createQuickPick();p.placeholder=c.NC("pick.placeholder","Select a snippet"),p.matchOnDetail=!0,p.ignoreFocusOut=!1,p.keepScrollPosition=!0,p.onDidTriggerItemButton((e=>{const t=i.isEnabled(e.item.snippet);i.updateEnablement(e.item.snippet,!t),p.items=a()})),p.items=a(),p.items.length||(p.validationMessage=c.NC("pick.noSnippetAvailable","No snippet available")),p.show(),await Promise.race([R.ju.toPromise(p.onDidAccept),R.ju.toPromise(p.onDidHide)]);const r=p.selectedItems[0]?.snippet;return p.dispose(),r}var B=i(47919);class V{static fromUser(e){if(!e||"object"!=typeof e)return V._empty;let{snippet:t,name:i,langId:n}=e;return"string"!=typeof t&&(t=void 0),"string"!=typeof i&&(i=void 0),"string"!=typeof n&&(n=void 0),new V(t,i,n)}static{this._empty=new V(void 0,void 0,void 0)}constructor(e,t,i){this.snippet=e,this.name=t,this.langId=i}}var X=i(93983);async function J(e,t,i,n){const{lineNumber:s,column:o}=i;t.tokenization.tokenizeIfCheap(s);const a=t.getLanguageIdAtPosition(s,o);return(await e.getSnippets(a,{includeNoPrefixSnippets:!0,includeDisabledSnippets:n})).filter((e=>e.usesSelection))}class q extends P{static{this.options={id:"editor.action.surroundWithSnippet",title:{value:(0,c.NC)("label","Surround With Snippet..."),original:"Surround With Snippet..."}}}constructor(){super({...q.options,precondition:X.Ao.and(U.u.writable,U.u.hasNonEmptySelection),f1:!0})}async runEditorCommand(e,t){if(!t.hasModel())return;const i=e.get(W.TG),n=e.get(o.z),s=e.get(z.p),a=await J(n,t.getModel(),t.getPosition(),!0);if(!a.length)return;const p=await i.invokeFunction(G,a);if(!p)return;let r;p.needsClipboard&&(r=await s.readText()),t.focus(),O.f.get(t)?.insert(p.codeSnippet,{clipboardText:r}),n.updateUsageTimestamp(p)}}var K=i(80855),Q=i(5976),Y=i(3860),ee=i(71922),te=i(87997),ie=i(33108);let ne=class e{static{this._MAX_CODE_ACTIONS=4}static{this._overflowCommandCodeAction={kind:te.yN.SurroundWith.value,title:q.options.title.value,command:{id:q.options.id,title:q.options.title.value}}}constructor(e){this._snippetService=e}async provideCodeActions(t,i){if(i.isEmpty())return;const n=Y.Y.isISelection(i)?i.getPosition():i.getStartPosition(),s=await J(this._snippetService,t,n,!1);if(!s.length)return;const o=[];for(const n of s){if(o.length>=e._MAX_CODE_ACTIONS){o.push(e._overflowCommandCodeAction);break}o.push({title:(0,c.NC)("codeAction","Surround With: {0}",n.name),kind:te.yN.SurroundWith.value,edit:oe(t,i,n)})}return{actions:o,dispose(){}}}};ne=(0,K.g)([(0,K.f)(0,o.z)],ne);let se=class e{static{this._MAX_CODE_ACTIONS=4}static{this._overflowCommandCodeAction={title:(0,c.NC)("overflow.start.title","Start with Snippet"),kind:te.yN.SurroundWith.value,command:{id:F.Id,title:""}}}constructor(e){this._snippetService=e,this.providedCodeActionKinds=[te.yN.SurroundWith.value]}async provideCodeActions(t){if(0!==t.getValueLength())return;const i=await this._snippetService.getSnippets(t.getLanguageId(),{fileTemplateSnippets:!0,includeNoPrefixSnippets:!0}),n=[];for(const s of i){if(n.length>=e._MAX_CODE_ACTIONS){n.push(e._overflowCommandCodeAction);break}n.push({title:(0,c.NC)("title","Start with: {0}",s.name),kind:te.yN.SurroundWith.value,edit:oe(t,t.getFullModelRange(),s)})}return{actions:n,dispose(){}}}};function oe(e,t,i){return{edits:[{versionId:e.getVersionId(),resource:e.uri,textEdit:{range:t,text:i.body,insertAsSnippet:!0}}]}}se=(0,K.g)([(0,K.f)(0,o.z)],se);let ae=class{constructor(e,t,i){this._store=new Q.SL;const n="editor.snippets.codeActions.enabled",s=new Q.SL,o=()=>{s.clear(),i.getValue(n)&&(s.add(t.codeActionProvider.register("*",e.createInstance(ne))),s.add(t.codeActionProvider.register("*",e.createInstance(se))))};o(),this._store.add(i.onDidChangeConfiguration((e=>e.affectsConfiguration(n)&&o()))),this._store.add(s)}dispose(){this._store.dispose()}};ae=(0,K.g)([(0,K.f)(0,W.TG),(0,K.f)(1,ee.p),(0,K.f)(2,ie.Ui)],ae);var pe=i(23193),re=i(800);(0,d.r1)(class extends P{constructor(){super({id:"editor.action.insertSnippet",title:{value:c.NC("snippet.suggestions.label","Insert Snippet"),original:"Insert Snippet"},f1:!0,precondition:U.u.writable,description:{description:"Insert Snippet",args:[{name:"args",schema:{type:"object",properties:{snippet:{type:"string"},langId:{type:"string"},name:{type:"string"}}}}]}})}async runEditorCommand(e,t,i){const n=e.get(w.O),s=e.get(o.z);if(!t.hasModel())return;const a=e.get(z.p),p=e.get(W.TG),r=await new Promise(((e,o)=>{const{lineNumber:a,column:r}=t.getPosition(),{snippet:l,name:c,langId:d}=V.fromUser(i);if(l)return e(new B.p(!1,[],"","","",l,"",1,`random/${Math.random()}`));let u;if(d){if(!n.isRegisteredLanguageId(d))return e(void 0);u=d}else t.getModel().tokenization.tokenizeIfCheap(a),u=t.getModel().getLanguageIdAtPosition(a,r),n.getLanguageName(u)||(u=t.getModel().getLanguageId());c?s.getSnippets(u,{includeNoPrefixSnippets:!0}).then((e=>e.find((e=>e.name===c)))).then(e,o):e(p.invokeFunction(G,u))}));if(!r)return;let l;r.needsClipboard&&(l=await a.readText()),t.focus(),O.f.get(t)?.insert(r.codeSnippet,{clipboardText:l}),s.updateUsageTimestamp(r)}}),u.P.registerCommandAlias("editor.action.showSnippets","editor.action.insertSnippet"),(0,d.r1)(q),(0,d.r1)(F),(0,d.r1)(class extends A{constructor(){super({id:"workbench.action.openSnippets",title:{value:c.NC("openSnippet.label","Configure User Snippets"),original:"Configure User Snippets"},shortTitle:{value:c.NC("userSnippets","User Snippets"),mnemonicTitle:c.NC({key:"miOpenSnippets",comment:["&& denotes a mnemonic"]},"User &&Snippets"),original:"User Snippets"},f1:!0,menu:[{id:d.eH.MenubarPreferencesMenu,group:"2_configuration",order:4},{id:d.eH.GlobalActivity,group:"2_configuration",order:4}]})}async run(e){const t=e.get(o.z),i=e.get(I.eJ),n=e.get(v.v4),s=e.get(w.O),a=e.get(E.AP),p=e.get(x.ec),r=e.get(y.sn),l=e.get(T.MM),d=e.get(N.e),u=await async function(e,t,i,n){const s=[],o=[],a=new Set,p=new Map;for(const t of await e.getSnippetFiles())if(3!==t.source)if(t.isGlobalSnippets){await t.load();const e=new Set;let o;e:for(const n of t.data){o||(o=n.source);for(const t of n.scopes){const n=i.getLanguageName(t);if(n){if(e.size>=4){e.add(`${n}...`);break e}e.add(n)}}}const a={label:(0,S.EZ)(t.location),filepath:t.location,description:0===e.size?c.NC("global.scope","(global)"):c.NC("global.1","({0})",[...e].join(", "))};if(s.push(a),!o)continue;const r=c.NC("detail.label","({0}) {1}",o,n.getUriLabel(t.location,{relative:!0})),l=p.get((0,S.EZ)(t.location));l&&(a.detail=r,l.snippet.detail=l.detail),p.set((0,S.EZ)(t.location),{snippet:a,detail:r})}else{const e=(0,S.EZ)(t.location).replace(/\.json$/,"");s.push({label:(0,S.EZ)(t.location),description:`(${i.getLanguageName(e)})`,filepath:t.location}),a.add(e)}const r=t.currentProfile.snippetsHome;for(const e of i.getRegisteredLanguageIds()){const t=i.getLanguageName(e);t&&!a.has(e)&&o.push({label:e,description:`(${t})`,filepath:(0,S.Vo)(r,`${e}.json`),hint:!0})}return s.sort(((e,t)=>{const i=(0,b.DZ)(e.filepath.path);return i===(0,b.DZ)(t.filepath.path)?e.label.localeCompare(t.label):".code-snippets"===i?-1:1})),o.sort(((e,t)=>e.label.localeCompare(t.label))),{existing:s,future:o}}(t,a,s,d),g=u.existing,f=[{scope:c.NC("new.global_scope","global"),label:c.NC("new.global","New Global Snippets file..."),uri:a.currentProfile.snippetsHome}],h=[];for(const e of p.getWorkspace().folders)h.push({scope:c.NC("new.workspace_scope","{0} workspace",e.name),label:c.NC("new.folder","New Snippets file for '{0}'...",e.name),uri:e.toResource(".vscode")});g.length>0?(g.unshift({type:"separator",label:c.NC("group.global","Existing Snippets")}),g.push({type:"separator",label:c.NC("new.global.sep","New Snippets")})):g.push({type:"separator",label:c.NC("new.global.sep","New Snippets")});const C=await i.pick([].concat(g,f,h,u.future),{placeHolder:c.NC("openSnippet.pickLanguage","Select Snippets File or Create Snippets"),matchOnDescription:!0});return f.indexOf(C)>=0||h.indexOf(C)>=0?async function(e,t,i,n,s,o){function a(e){const i=".code-snippets"!==(0,b.DZ)(e)?`${e}.code-snippets`:e;return(0,S.Vo)(t,i)}await n.createFolder(t);const p=await i.input({placeHolder:c.NC("name","Type snippet file name"),validateInput:async e=>e?(0,m.AQ)(e)?await n.exists(a(e))?c.NC("bad_name3","'{0}' already exists",e):void 0:c.NC("bad_name2","'{0}' is not a valid file name",e):c.NC("bad_name1","Invalid file name")});if(!p)return;const r=a(p);await s.write(r,["{","\t// Place your "+e+" snippets here. Each snippet is defined under a snippet name and has a scope, prefix, body and ","\t// description. Add comma separated ids of the languages where the snippet is applicable in the scope field. If scope ","\t// is left empty or omitted, the snippet gets applied to all languages. The prefix is what is ","\t// used to trigger the snippet and the body will be expanded and inserted. Possible variables are: ","\t// $1, $2 for tab stops, $0 for the final cursor position, and ${1:label}, ${2:another} for placeholders. ","\t// Placeholders with the same ids are connected.","\t// Example:",'\t// "Print to console": {','\t// \t"scope": "javascript,typescript",','\t// \t"prefix": "log",','\t// \t"body": [',"\t// \t\t\"console.log('$1');\",",'\t// \t\t"$2"',"\t// \t],",'\t// \t"description": "Log output to console"',"\t// }","}"].join("\n")),await o.open(r)}(C.scope,C.uri,i,r,l,n):$.is(C)?(C.hint&&await async function(e,t,i){if(await t.exists(e.filepath))return;const n=["{","\t// Place your snippets for "+e.label+" here. Each snippet is defined under a snippet name and has a prefix, body and ","\t// description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are:","\t// $1, $2 for tab stops, $0 for the final cursor position, and ${1:label}, ${2:another} for placeholders. Placeholders with the ","\t// same ids are connected.","\t// Example:",'\t// "Print to console": {','\t// \t"prefix": "log",','\t// \t"body": [',"\t// \t\t\"console.log('$1');\",",'\t// \t\t"$2"',"\t// \t],",'\t// \t"description": "Log output to console"',"\t// }","}"].join("\n");await i.write(e.filepath,n)}(C,r,l),n.open(C.filepath)):void 0}}),f.B.as(h.I.Workbench).registerWorkbenchContribution(ae,3),f.B.as(pe.IP.Configuration).registerConfiguration({...re.wk,properties:{"editor.snippets.codeActions.enabled":{description:c.NC("editor.snippets.codeActions.enabled","Controls if surround-with-snippets or file template snippets show as Code Actions."),type:"boolean",default:!0}}});const le="vscode://schemas/snippets",ce={prefix:{description:c.NC("snippetSchema.json.prefix","The prefix to use when selecting the snippet in intellisense"),type:["string","array"]},isFileTemplate:{description:c.NC("snippetSchema.json.isFileTemplate","The snippet is meant to populate or replace a whole file"),type:"boolean"},body:{markdownDescription:c.NC("snippetSchema.json.body","The snippet content. Use `$1`, `${1:defaultText}` to define cursor positions, use `$0` for the final cursor position. Insert variable values with `${varName}` and `${varName:defaultText}`, e.g. `This is file: $TM_FILENAME`."),type:["string","array"],items:{type:"string"}},description:{description:c.NC("snippetSchema.json.description","The snippet description."),type:["string","array"]}},de={id:le,allowComments:!0,allowTrailingCommas:!0,defaultSnippets:[{label:c.NC("snippetSchema.json.default","Empty snippet"),body:{"${1:snippetName}":{prefix:"${2:prefix}",body:"${3:snippet}",description:"${4:description}"}}}],type:"object",description:c.NC("snippetSchema.json","User snippet configuration"),additionalProperties:{type:"object",required:["body"],properties:ce,additionalProperties:!1}},ue="vscode://schemas/global-snippets",ge={id:ue,allowComments:!0,allowTrailingCommas:!0,defaultSnippets:[{label:c.NC("snippetSchema.json.default","Empty snippet"),body:{"${1:snippetName}":{scope:"${2:scope}",prefix:"${3:prefix}",body:"${4:snippet}",description:"${5:description}"}}}],type:"object",description:c.NC("snippetSchema.json","User snippet configuration"),additionalProperties:{type:"object",required:["body"],properties:{...ce,scope:{description:c.NC("snippetSchema.json.scope","A list of language names to which this snippet applies, e.g. 'typescript,javascript'."),type:"string"}},additionalProperties:!1}},fe=f.B.as(g.I.JSONContribution);function he(){return{...(0,r.ZP)(),[o.z.toString()]:new s.M(a._,[],!0)}}fe.registerSchema(le,de),fe.registerSchema(ue,ge),(0,l.Fg)((async e=>{e.get(p.g).when(2).then((()=>{n.IO.get(o.z)}))}))}}]);
//# sourceMappingURL=468.bundle.js.map